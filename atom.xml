<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>âœ¨Fsnâœ¨</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://fengshana.github.io/"/>
  <updated>2020-05-27T06:22:47.687Z</updated>
  <id>https://fengshana.github.io/</id>
  
  <author>
    <name>Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ·±å…¥ç†è§£javaè™šæ‹Ÿæœº-çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</title>
    <link href="https://fengshana.github.io/2020/05/26/%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA13/"/>
    <id>https://fengshana.github.io/2020/05/26/%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA13/</id>
    <published>2020-05-26T14:41:37.497Z</published>
    <updated>2020-05-27T06:22:47.687Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘"><a href="#æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘" class="headerlink" title="æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘"></a>æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘</h2><h3 id="ç¬¬13ç« -çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"><a href="#ç¬¬13ç« -çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–" class="headerlink" title="ç¬¬13ç«  çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"></a>ç¬¬13ç«  çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</h3><p>å¹¶å‘å¤„ç† çš„ å¹¿æ³›åº”ç”¨ æ˜¯ä½¿å¾— Amdah1å®šå¾‹ ä»£æ›¿ æ‘©å°”å®šå¾‹ æˆä¸º è®¡ç®—æœºæ€§èƒ½å‘å±•æºåŠ¨åŠ› çš„æ ¹æœ¬åŸå› ï¼Œä¹Ÿæ˜¯äººç±» â€œå‹æ¦¨â€ è®¡ç®—æœºè¿ç®—èƒ½åŠ› çš„ æœ€æœ‰åŠ›æ­¦å™¨ã€‚</p><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>åœ¨ è½¯ä»¶ä¸šå‘å±• çš„ åˆæœŸï¼Œç¨‹åºç¼–å†™ éƒ½æ˜¯ä»¥ ç®—æ³• ä¸ºæ ¸å¿ƒçš„ï¼Œ<br>ç¨‹åºå‘˜ä¼šæŠŠ æ•°æ® å’Œ è¿‡ç¨‹ åˆ†åˆ«ä½œä¸º ç‹¬ç«‹çš„éƒ¨åˆ† æ¥è€ƒè™‘ï¼Œ<br>æ•°æ® ä»£è¡¨ é—®é¢˜ç©ºé—´ ä¸­çš„ å®¢ä½“ï¼Œç¨‹åºä»£ç  åˆ™ç”¨äº å¤„ç†è¿™äº›æ•°æ®ï¼Œ<br>è¿™ç§ æ€ç»´æ–¹å¼ ç›´æ¥ç«™åœ¨ è®¡ç®—æœºçš„è§’åº¦ å» æŠ½è±¡é—®é¢˜å’Œè§£å†³é—®é¢˜ï¼Œ<br>ç§°ä¸º é¢å‘è¿‡ç¨‹ çš„ ç¼–ç¨‹æ€æƒ³ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œ<br>é¢å‘å¯¹è±¡ çš„ ç¼–ç¨‹æ€æƒ³ æ˜¯ç«™åœ¨ ç°å®ä¸–ç•Œçš„è§’åº¦ å» æŠ½è±¡å’Œè§£å†³é—®é¢˜ï¼Œ<br>å®ƒæŠŠ æ•°æ®å’Œè¡Œä¸º éƒ½çœ‹åšæ˜¯ å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œ<br>è¿™æ ·å¯ä»¥è®©ç¨‹åºå‘˜èƒ½ä»¥ ç¬¦åˆç°å®ä¸–ç•Œçš„ æ€ç»´æ–¹å¼ æ¥ ç¼–å†™å’Œç»„ç»‡ç¨‹åºã€‚</p><p>é¢å‘è¿‡ç¨‹ çš„ ç¼–ç¨‹æ€æƒ³ æå¤§åœ° æå‡äº† ç°ä»£è½¯ä»¶å¼€å‘ çš„ ç”Ÿäº§æ•ˆç‡ å’Œ è½¯ä»¶å¯ä»¥è¾¾åˆ°çš„è§„æ¨¡ï¼Œ<br>ä½†æ˜¯ ç°å®ä¸–ç•Œä¸è®¡ç®—æœºä¸–ç•Œ ä¹‹é—´ä¸å¯é¿å…åœ° å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p><p>ä¾‹å¦‚ï¼Œäººä»¬å¾ˆéš¾æƒ³è±¡ç°å®ä¸­çš„ å¯¹è±¡ åœ¨ä¸€é¡¹å·¥ä½œè¿›è¡ŒæœŸé—´ï¼Œä¼šè¢«ä¸åœåœ°ä¸­æ–­å’Œåˆ‡æ¢ï¼Œå¯¹è±¡çš„å±æ€§ï¼ˆæ•°æ®ï¼‰å¯èƒ½ä¼šåœ¨ ä¸­æ–­æœŸé—´ è¢«ä¿®æ”¹å’Œå˜â€œè„â€ï¼Œ<br>è€Œè¿™äº›äº‹ä»¶ åœ¨è®¡ç®—æœºä¸–ç•Œä¸­ åˆ™æ˜¯å¾ˆæ­£å¸¸çš„äº‹æƒ…ã€‚</p><p>æœ‰æ—¶å€™ï¼Œè‰¯å¥½çš„è®¾è®¡åŸåˆ™ ä¸å¾—ä¸å‘ç°å®åšå‡ºä¸€äº›è®©æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»è®© ç¨‹åº åœ¨è®¡ç®—æœºä¸­ æ­£ç¡®æ— è¯¯åœ°è¿è¡Œï¼Œ<br>ç„¶åå†è€ƒè™‘å¦‚ä½•å°† ä»£ç ç»„ç»‡å¾—æ›´å¥½ï¼Œè®© ç¨‹åº è¿è¡Œå¾— æ›´å¿«ã€‚</p><p>å¯¹äºè¿™éƒ¨åˆ†çš„ä¸»é¢˜â€œé«˜æ•ˆå¹¶å‘â€æ¥è®²ï¼Œé¦–å…ˆéœ€è¦ä¿è¯ å¹¶å‘çš„æ­£ç¡®æ€§ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šå®ç° é«˜æ•ˆã€‚</p><p>æœ¬ç« å…ˆä» å¦‚ä½•ä¿è¯å¹¶å‘çš„æ­£ç¡®æ€§ å’Œ å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨è®²èµ·ã€‚</p><h4 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h4><p>â€œçº¿ç¨‹å®‰å…¨â€  è¿™ä¸ªåç§°ï¼Œç›¸ä¿¡ç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜éƒ½ä¼šå¬è¯´è¿‡ï¼Œç”šè‡³åœ¨ ä»£ç ç¼–å†™ å’Œ èµ°æŸ¥çš„æ—¶å€™ å¯èƒ½è¿˜ä¼šå°†ä¼šæŒ‚åœ¨å˜´è¾¹ï¼Œ<br>ä½†æ˜¯å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªä¸å¤ªæ‹—å£çš„æ¦‚å¿µ æ¥å®šä¹‰ çº¿ç¨‹å®‰å…¨ å´ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œ<br>ç¬”è€…å°è¯•åœ¨Googleä¸­æœç´¢å®ƒçš„æ¦‚å¿µï¼Œæ‰¾åˆ°çš„æ˜¯ç±»ä¼¼äº â€œå¦‚æœä¸€ä¸ªå¯¹è±¡å¯ä»¥å®‰å…¨åœ°è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ï¼Œé‚£å®ƒå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„â€è¿™æ ·çš„å®šä¹‰â€”â€”å¹¶ä¸èƒ½è¯´å®ƒä¸æ­£ç¡®ï¼Œä½†æ˜¯äººä»¬æ— æ³•ä»ä¸­è·å–åˆ°ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><p>ï¼ˆåƒæˆ‘è¿™ç§å°ç™½ï¼Œä¹Ÿåªæ˜¯ï¼Œå¬è¿‡ï¼Œæˆ‘å¯æ²¡æœ‰è¯´è¿‡ğŸ˜¶ğŸ˜¶ğŸ˜¶ï¼‰</p><p>ç¬”è€…è®¤ä¸ºã€ŠJava Concurrency In Practiceã€‹ çš„ä½œè€… Brian Goetz å¯¹ â€œçº¿ç¨‹å®‰å…¨â€ æœ‰ä¸€ä¸ªæ¯”è¾ƒæ°å½“çš„å®šä¹‰ï¼š<br>â€œå½“ å¤šä¸ªçº¿ç¨‹ è®¿é—® ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœä¸ç”¨è€ƒè™‘è¿™äº› çº¿ç¨‹ åœ¨ è¿è¡Œæ—¶ç¯å¢ƒ ä¸‹çš„ è°ƒåº¦ å’Œ äº¤æ›¿æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œ é¢å¤–çš„åŒæ­¥ï¼Œæˆ–è€…åœ¨ è°ƒç”¨æ–¹ è¿›è¡Œä»»ä½•å…¶ä»–çš„ åè°ƒæ“ä½œï¼Œè°ƒç”¨è¿™ä¸ª å¯¹è±¡çš„è¡Œä¸º éƒ½å¯ä»¥è·å¾— æ­£ç¡®çš„ç»“æœï¼Œé‚£ è¿™ä¸ªå¯¹è±¡ æ˜¯ çº¿ç¨‹å®‰å…¨ çš„â€ã€‚</p><p>è¿™ä¸ªå®šä¹‰æ¯”è¾ƒ ä¸¥è°¨ï¼Œå®ƒè¦æ±‚ çº¿ç¨‹å®‰å…¨ çš„ä»£ç  éƒ½å¿…é¡»å…·å¤‡ä¸€ä¸ªç‰¹å¾ï¼š<br>ä»£ç æœ¬èº« å°è£… äº†æ‰€æœ‰å¿…è¦çš„ æ­£ç¡®æ€§ä¿éšœæ‰‹æ®µï¼ˆå¦‚äº’æ–¥åŒæ­¥ç­‰ï¼‰ï¼Œ<br>ä»¤ è°ƒç”¨è€… æ— éœ€å…³å¿ƒ å¤šçº¿ç¨‹ çš„é—®é¢˜ï¼Œæ›´æ— é¡»è‡ªå·±é‡‡å– ä»»ä½•æªæ–½ æ¥ ä¿è¯å¤šçº¿ç¨‹çš„æ­£ç¡®è°ƒç”¨ã€‚</p><p>è¿™ç‚¹å¬èµ·æ¥ç®€å•ï¼Œä½†å…¶å®å¹¶ä¸å®¹æ˜“åšåˆ°ï¼Œåœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šå°†è¿™ä¸ªå®šä¹‰å¼±åŒ–ä¸€äº›ï¼Œå¦‚æœæŠŠâ€è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºâ€œé™å®šä¸ºâ€å•æ¬¡è°ƒç”¨â€œï¼Œ<br>è¿™ä¸ªå®šä¹‰çš„å…¶ä»–æè¿°ä¹Ÿèƒ½å¤Ÿæˆç«‹çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç§°å®ƒæ˜¯ çº¿ç¨‹å®‰å…¨ äº†ï¼Œä¸ºä»€ä¹ˆè¦ å¼±åŒ– è¿™ä¸ªå®šä¹‰ï¼Œç°åœ¨æš‚ä¸”æ”¾ä¸‹ï¼Œç¨åå†è¯¦ç»†æ¢è®¨ã€‚</p><h5 id="Javaè¯­è¨€ä¸­çš„çº¿ç¨‹å®‰å…¨"><a href="#Javaè¯­è¨€ä¸­çš„çº¿ç¨‹å®‰å…¨" class="headerlink" title="Javaè¯­è¨€ä¸­çš„çº¿ç¨‹å®‰å…¨"></a>Javaè¯­è¨€ä¸­çš„çº¿ç¨‹å®‰å…¨</h5><p>æˆ‘ä»¬å·²ç»æœ‰äº† çº¿ç¨‹å®‰å…¨ çš„ä¸€ä¸ª æŠ½è±¡å®šä¹‰ï¼Œ<br>é‚£æ¥ä¸‹æ¥å°±è®¨è®ºä¸€ä¸‹åœ¨ javaè¯­è¨€ ä¸­ï¼Œçº¿ç¨‹å®‰å…¨ å…·ä½“æ˜¯å¦‚ä½•ä½“ç°çš„ï¼Ÿ<br>æœ‰å“ªäº›æ“ä½œæ˜¯ çº¿ç¨‹å®‰å…¨ çš„ï¼Ÿ<br>æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„ çº¿ç¨‹å®‰å…¨ï¼Œå°± é™å®šä¸ å¤šä¸ªçº¿ç¨‹ä¹‹é—´ å­˜åœ¨ å…±äº«æ•°æ®è®¿é—® è¿™ä¸ª å‰æï¼Œ<br>å› ä¸ºå¦‚æœä¸€æ®µä»£ç  æ ¹æœ¬ä¸ä¼š ä¸å…¶ä»–çº¿ç¨‹å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆä» çº¿ç¨‹å®‰å…¨ çš„ è§’åº¦ æ¥çœ‹ï¼Œç¨‹åºæ˜¯ ä¸²è¡Œæ‰§è¡Œ è¿˜æ˜¯ å¤šçº¿ç¨‹æ‰§è¡Œ å¯¹å®ƒæ¥è¯´æ˜¯å®Œå…¨æ²¡æœ‰åŒºåˆ«çš„ã€‚</p><p>ä¸ºäº†æ›´åŠ  æ·±å…¥åœ° ç†è§£ çº¿ç¨‹å®‰å…¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¸æŠŠ çº¿ç¨‹å®‰å…¨ å½“åšä¸€ä¸ªéçœŸå³å‡ çš„ äºŒå…ƒæ’ä»–é¡¹ æ¥çœ‹å¾…ï¼Œ<br>æŒ‰ç…§ çº¿ç¨‹å®‰å…¨ çš„ â€œå®‰å…¨ç¨‹åº¦â€ ç”±å¼ºè‡³å¼±æ¥æ’åºï¼Œæˆ‘ä»¬å¯ä»¥å°†Javaè¯­è¨€ä¸­å„ç§æ“ä½œå…±äº«çš„æ•°æ®åˆ†ä¸ºä»¥ä¸‹5ç±»ï¼š<br>ä¸å¯å˜ã€ç»å¯¹çº¿ç¨‹å®‰å…¨ã€ç›¸å¯¹çº¿ç¨‹å®‰å…¨ã€çº¿ç¨‹å…¼å®¹å’Œçº¿ç¨‹å¯¹ç«‹ã€‚</p><blockquote><p>è¿™ç§åˆ’åˆ†æ–¹æ³•ä¹Ÿæ˜¯ Brian Goetzåœ¨IBM developWorkersä¸Šå‘è¡¨çš„ä¸€ç¯‡è®ºæ–‡ä¸­æå‡ºçš„ï¼Œ<br>è¿™é‡Œå†™ â€œæˆ‘ä»¬â€  çº¯ç²¹æ˜¯ç¬”è€…ä¸‹ç¬”è¡Œæ–‡ä¸­çš„è¯­è¨€ç”¨æ³•ã€‚</p></blockquote><h6 id="1-ä¸å¯å˜"><a href="#1-ä¸å¯å˜" class="headerlink" title="1.ä¸å¯å˜"></a>1.ä¸å¯å˜</h6><p>åœ¨Javaè¯­è¨€ä¸­ï¼ˆç‰¹æŒ‡JDK1.5ä»¥åï¼Œå³ Javaå†…å­˜æ¨¡å‹ è¢« ä¿®æ­£ä»¥åçš„ Javaè¯­è¨€ï¼‰ï¼Œ<br>ä¸å¯å˜ï¼ˆImmutableï¼‰ çš„ å¯¹è±¡ ä¸€å®šæ˜¯ çº¿ç¨‹å®‰å…¨çš„ï¼Œ<br>æ— è®ºæ˜¯ å¯¹è±¡çš„æ–¹æ³• è¿˜æ˜¯ æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œéƒ½ä¸éœ€è¦å†é‡‡å– ä»»ä½•çš„çº¿ç¨‹å®‰å…¨ä¿éšœæªæ–½ï¼Œ</p><p>åœ¨12ç« æˆ‘ä»¬è°ˆåˆ° finalå…³é”®å­— å¸¦æ¥çš„ å¯è§æ€§ æ—¶æ›¾ç»æåˆ°è¿‡è¿™ä¸€ç‚¹ï¼Œ<br>åªè¦ä¸€ä¸ª ä¸å¯å˜çš„å¯¹è±¡ è¢«æ­£ç¡®åœ° æ„å»ºå‡ºæ¥ï¼ˆæ²¡æœ‰å‘ç”Ÿ this å¼•ç”¨é€ƒé€¸ çš„æƒ…å†µï¼‰ï¼Œ<br>é‚£å…¶å¤–éƒ¨çš„ å¯è§çŠ¶æ€ æ°¸è¿œä¹Ÿä¸ä¼šæ”¹å˜ï¼Œ<br>æ°¸è¿œä¹Ÿä¸ä¼šçœ‹åˆ°å®ƒåœ¨ å¤šä¸ªçº¿ç¨‹ä¹‹ä¸­ å¤„äº ä¸ä¸€è‡´ çš„çŠ¶æ€ã€‚</p><p>â€œä¸å¯å˜â€ å¸¦æ¥çš„ å®‰å…¨æ€§ æ˜¯ æœ€ç®€å•å’Œæœ€çº¯ç²¹çš„ã€‚</p><p>Javaè¯­è¨€ä¸­ï¼Œå¦‚æœ å…±äº«æ•°æ® æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆåªè¦åœ¨ å®šä¹‰æ—¶ ä½¿ç”¨ finalå…³é”®å­— ä¿®é¥°å®ƒ å°±å¯ä»¥ä¿è¯å®ƒæ˜¯ ä¸å¯å˜çš„ã€‚</p><p>å¦‚æœ å…±äº«æ•°æ® æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±éœ€è¦ä¿è¯ å¯¹è±¡çš„è¡Œä¸º ä¸ä¼šå¯¹å…¶ çŠ¶æ€ äº§ç”Ÿä»»ä½•å½±å“ æ‰è¡Œï¼Œ</p><p>å¦‚æœè¯»è€…è¿˜æ²¡æƒ³æ˜ç™½è¿™å¥è¯ï¼Œä¸å¦¨æƒ³ä¸€æƒ³ java.lang.String ç±»çš„å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¸å‹çš„ ä¸å¯å˜å¯¹è±¡ï¼Œ<br>æˆ‘ä»¬è°ƒç”¨å®ƒçš„ substring()ã€replace()å’Œconcat() è¿™äº›æ–¹æ³•éƒ½ ä¸ä¼šå½±å“å®ƒ åŸæ¥çš„å€¼ï¼Œåªä¼šè¿”å›ä¸€ä¸ªæ–°æ„é€ çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><p>ä¿è¯å¯¹è±¡è¡Œä¸º ä¸å½±å“ è‡ªå·±çŠ¶æ€çš„é€”å¾„ æœ‰å¾ˆå¤šç§ï¼Œ<br>å…¶ä¸­æœ€ç®€å•çš„å°±æ˜¯æŠŠå¯¹è±¡ä¸­ å¸¦æœ‰çŠ¶æ€çš„å˜é‡ éƒ½å£°æ˜ä¸º finalï¼Œ<br>è¿™æ ·åœ¨ æ„é€ å‡½æ•° ç»“æŸä¹‹åï¼Œå®ƒå°±æ˜¯ ä¸å¯å˜çš„ï¼Œ<br>ä¾‹å¦‚ä»£ç æ¸…å•13-1ä¸­java.lang.Integer æ„é€ å‡½æ•°æ‰€ç¤ºçš„ï¼Œ<br>å®ƒé€šè¿‡å°† å†…éƒ¨çŠ¶æ€å˜é‡ value å®šä¹‰ä¸º final æ¥ä¿éšœ çŠ¶æ€ä¸å˜ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 13-1 JDKä¸­Integerç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">/*<span class="strong">*</span></span><br><span class="line"><span class="strong">  *</span> The value of the &lt;code&gt;Integer&lt;/code&gt;.</span><br><span class="line"><span class="code">  * @serial</span></span><br><span class="line"><span class="code">  */</span></span><br><span class="line"><span class="code">  private final int value;</span></span><br><span class="line"></span><br><span class="line"><span class="code">  /**</span></span><br><span class="line"><span class="code">    * Constructs newly allocated &lt;code&gt;Integer&lt;/code&gt; object that</span></span><br><span class="line"><span class="code">    * represents the specified &lt;code&gt;int&lt;/code&gt; value.</span></span><br><span class="line"><span class="code">    *</span></span><br><span class="line"><span class="code">    * @param value the value to be represented by the &lt;code&gt;Integer&lt;/code&gt; object.</span></span><br><span class="line"><span class="code">    *</span></span><br><span class="line"><span class="code">    */</span></span><br><span class="line"><span class="code">    public Integer(int value)&#123;</span></span><br><span class="line"><span class="code">      this.value=value;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>åœ¨ Java API ä¸­ ç¬¦åˆ ä¸å¯å˜è¦æ±‚ çš„ç±»å‹ï¼Œ<br>é™¤äº†ä¸Šé¢æåˆ°çš„ String ä¹‹å¤–ï¼Œ<br>å¸¸ç”¨çš„è¿˜æœ‰ æšä¸¾ç±»å‹ï¼Œä»¥åŠ java.lang.Numberçš„éƒ¨åˆ†å­ç±»ï¼Œ<br>å¦‚Longå’ŒDoubleç­‰æ•°å€¼åŒ…è£…ç±»å‹ï¼ŒBigIntegerå’ŒBigDecimalç­‰å¤§æ•°æ®ç±»å‹ï¼›</p><p>ä½†åŒä¸º Number çš„ å­ç±»å‹ çš„ åŸå­ç±» AtomicInteger å’Œ AtomicLong åˆ™å¹¶éä¸å¯å˜çš„ï¼Œ<br>è¯»è€…ä¸å¦¨çœ‹çœ‹è¿™ä¸¤ä¸ªåŸå­ç±»çš„æºç ï¼Œæƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆã€‚</p><p>(emmï¼ŒåŸå› æ˜¯ä¸æ˜¯é‚£ä¸ªvalueæ²¡æœ‰è¢«æ ‡ä¸ºfinalï¼ŸIntegerç±»å½“ä¸­çš„valueè¢«æ ‡è®°ä¸ºfinaläº†ï¼Œè€ŒAtomicIntegerä»¥åŠAtomicLongé‡Œé¢çš„valueéƒ½æ²¡æœ‰è¢«æ ‡è®°ä¸ºfinal)</p><p>AtomicIntegerç±»ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• AtomicIntegerç±»</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Written by Doug Lea with assistance from members of JCP JSR-166</span></span><br><span class="line"><span class="comment"> * Expert Group and released to the public domain, as explained at</span></span><br><span class="line"><span class="comment"> * http://creativecommons.org/publicdomain/zero/1.0/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">package java.util.concurrent.atomic;</span><br><span class="line"><span class="keyword">import</span> java.util.function.IntUnaryOperator;</span><br><span class="line"><span class="keyword">import</span> java.util.function.IntBinaryOperator;</span><br><span class="line"><span class="keyword">import</span> sun.misc.Unsafe;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>An &#123;@code int&#125; value that may be updated atomically.  See </span>the</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>&#123;@link java.util.concurrent.atomic&#125; package specification for</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>description of </span>the<span class="markdown"> properties of atomic variables. An</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>&#123;@code AtomicInteger&#125; is used in applications </span>such<span class="markdown"> as atomically</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>incremented counters, and cannot be used as </span>a<span class="markdown"> replacement for </span>an</span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>&#123;@link java.lang.Integer&#125;. However, this class does extend</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>&#123;@code Number&#125; to allow uniform access by tools and utilities that</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>deal with numerically-based classes.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"> *</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@since 1.5</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet"> * </span>@author Doug Lea</span></span></span><br><span class="line"><span class="comment"><span class="markdown">*/</span></span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">AtomicInteger</span> <span class="keyword">extends</span> <span class="title">Number</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    private <span class="keyword">static</span> <span class="keyword">final</span> long serialVersionUID = <span class="number">6214790243416807050</span>L;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setup to use Unsafe.compareAndSwapInt for updates</span></span><br><span class="line">    private <span class="keyword">static</span> <span class="keyword">final</span> Unsafe unsafe = Unsafe.getUnsafe();</span><br><span class="line">    private <span class="keyword">static</span> <span class="keyword">final</span> long valueOffset;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            valueOffset = unsafe.objectFieldOffset</span><br><span class="line">                (AtomicInteger<span class="class">.<span class="keyword">class</span>.<span class="title">getDeclaredField</span>("<span class="title">value</span>"));</span></span><br><span class="line"><span class="class">        &#125; <span class="title">catch</span> (<span class="title">Exception</span> <span class="title">ex</span>) </span>&#123; <span class="keyword">throw</span> <span class="keyword">new</span> Error(ex); &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private volatile <span class="built_in">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Creates </span>a<span class="markdown"> new AtomicInteger with </span>the<span class="markdown"> given initial value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param initialValue </span>the<span class="markdown"> initial value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public AtomicInteger(<span class="built_in">int</span> initialValue) &#123;</span><br><span class="line">        value = initialValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Creates </span>a<span class="markdown"> new AtomicInteger with initial value &#123;@code 0&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public AtomicInteger() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Gets </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> current value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> <span class="keyword">get</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Sets to </span>the<span class="markdown"> given value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param newValue </span>the<span class="markdown"> new value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="keyword">void</span> <span class="keyword">set</span>(<span class="built_in">int</span> newValue) &#123;</span><br><span class="line">        value = newValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Eventually sets to </span>the<span class="markdown"> given value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param newValue </span>the<span class="markdown"> new value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@since 1.6</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="keyword">void</span> lazySet(<span class="built_in">int</span> newValue) &#123;</span><br><span class="line">        unsafe.putOrderedInt(<span class="keyword">this</span>, valueOffset, newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically sets to </span>the<span class="markdown"> given value and returns </span>the<span class="markdown"> old value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param newValue </span>the<span class="markdown"> new value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndSet(<span class="built_in">int</span> newValue) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndSetInt(<span class="keyword">this</span>, valueOffset, newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically sets </span>the<span class="markdown"> value to </span>the<span class="markdown"> given updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>if </span>the<span class="markdown"> current value &#123;@code ==&#125; </span>the<span class="markdown"> expected value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param expect </span>the<span class="markdown"> expected value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param update </span>the<span class="markdown"> new value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return &#123;@code true&#125; if successful. False return indicates that</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span></span>the<span class="markdown"> actual value was not equal to </span>the<span class="markdown"> expected value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> boolean compareAndSet(<span class="built_in">int</span> expect, <span class="built_in">int</span> update) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.compareAndSwapInt(<span class="keyword">this</span>, valueOffset, expect, update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically sets </span>the<span class="markdown"> value to </span>the<span class="markdown"> given updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>if </span>the<span class="markdown"> current value &#123;@code ==&#125; </span>the<span class="markdown"> expected value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;</span></span></span>a<span class="markdown"><span class="xml"> href="package-summary.html#weakCompareAndSet"&gt;</span>May fail</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>spuriously and does not provide ordering guarantees<span class="xml"><span class="tag">&lt;/</span></span></span>a<span class="markdown"><span class="xml">&gt;</span>, </span>so<span class="markdown"> is</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>only rarely </span>an<span class="markdown"> appropriate alternative to &#123;@code compareAndSet&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param expect </span>the<span class="markdown"> expected value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param update </span>the<span class="markdown"> new value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return &#123;@code true&#125; if successful</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> boolean weakCompareAndSet(<span class="built_in">int</span> expect, <span class="built_in">int</span> update) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.compareAndSwapInt(<span class="keyword">this</span>, valueOffset, expect, update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically increments by one </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndIncrement() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically decrements by one </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndDecrement() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically adds </span>the<span class="markdown"> given value to </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param delta </span>the<span class="markdown"> value to add</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndAdd(<span class="built_in">int</span> delta) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically increments by one </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> incrementAndGet() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically decrements by one </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> decrementAndGet() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">-1</span>) - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically adds </span>the<span class="markdown"> given value to </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param delta </span>the<span class="markdown"> value to add</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> addAndGet(<span class="built_in">int</span> delta) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, delta) + delta;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically updates </span>the<span class="markdown"> current value with </span>the<span class="markdown"> results of</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>applying </span>the<span class="markdown"> given function, returning </span>the<span class="markdown"> previous value. The</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>function </span>should<span class="markdown"> be side-effect-free, since it may be re-applied</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>when attempted updates fail due to contention among threads.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param updateFunction </span>a<span class="markdown"> side-effect-free function</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@since 1.8</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndUpdate(IntUnaryOperator updateFunction) &#123;</span><br><span class="line">        <span class="built_in">int</span> prev, next;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            prev = <span class="keyword">get</span>();</span><br><span class="line">            next = updateFunction.applyAsInt(prev);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically updates </span>the<span class="markdown"> current value with </span>the<span class="markdown"> results of</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>applying </span>the<span class="markdown"> given function, returning </span>the<span class="markdown"> updated value. The</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>function </span>should<span class="markdown"> be side-effect-free, since it may be re-applied</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>when attempted updates fail due to contention among threads.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param updateFunction </span>a<span class="markdown"> side-effect-free function</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@since 1.8</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> updateAndGet(IntUnaryOperator updateFunction) &#123;</span><br><span class="line">        <span class="built_in">int</span> prev, next;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            prev = <span class="keyword">get</span>();</span><br><span class="line">            next = updateFunction.applyAsInt(prev);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically updates </span>the<span class="markdown"> current value with </span>the<span class="markdown"> results of</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>applying </span>the<span class="markdown"> given function to </span>the<span class="markdown"> current and given values,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>returning </span>the<span class="markdown"> previous value. The function </span>should<span class="markdown"> be</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>side-effect-free, since it may be re-applied when attempted</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>updates fail due to contention among threads.  The function</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>is applied with </span>the<span class="markdown"> current value as its first argument,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>and </span>the<span class="markdown"> given update as </span>the<span class="markdown"> second argument.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param x </span>the<span class="markdown"> update value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param accumulatorFunction </span>a<span class="markdown"> side-effect-free function of two arguments</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> previous value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@since 1.8</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> getAndAccumulate(<span class="built_in">int</span> x,</span><br><span class="line">                                      IntBinaryOperator accumulatorFunction) &#123;</span><br><span class="line">        <span class="built_in">int</span> prev, next;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            prev = <span class="keyword">get</span>();</span><br><span class="line">            next = accumulatorFunction.applyAsInt(prev, x);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Atomically updates </span>the<span class="markdown"> current value with </span>the<span class="markdown"> results of</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>applying </span>the<span class="markdown"> given function to </span>the<span class="markdown"> current and given values,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>returning </span>the<span class="markdown"> updated value. The function </span>should<span class="markdown"> be</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>side-effect-free, since it may be re-applied when attempted</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>updates fail due to contention among threads.  The function</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>is applied with </span>the<span class="markdown"> current value as its first argument,</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>and </span>the<span class="markdown"> given update as </span>the<span class="markdown"> second argument.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     *</span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param x </span>the<span class="markdown"> update value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@param accumulatorFunction </span>a<span class="markdown"> side-effect-free function of two arguments</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> updated value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@since 1.8</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="keyword">final</span> <span class="built_in">int</span> accumulateAndGet(<span class="built_in">int</span> x,</span><br><span class="line">                                      IntBinaryOperator accumulatorFunction) &#123;</span><br><span class="line">        <span class="built_in">int</span> prev, next;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            prev = <span class="keyword">get</span>();</span><br><span class="line">            next = accumulatorFunction.applyAsInt(prev, x);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>the<span class="markdown"> String representation of </span>the<span class="markdown"> current value.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@return </span>the<span class="markdown"> String representation of </span>the<span class="markdown"> current value</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="built_in">String</span> toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.toString(<span class="keyword">get</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>the<span class="markdown"> value of this &#123;@code AtomicInteger&#125; as </span>an<span class="markdown"> &#123;@code int&#125;.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="built_in">int</span> intValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>the<span class="markdown"> value of this &#123;@code AtomicInteger&#125; as </span>a<span class="markdown"> &#123;@code long&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>after </span>a<span class="markdown"> widening primitive conversion.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@jls 5.1.2 Widening Primitive Conversions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public long longValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (long)<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>the<span class="markdown"> value of this &#123;@code AtomicInteger&#125; as </span>a<span class="markdown"> &#123;@code float&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>after </span>a<span class="markdown"> widening primitive conversion.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@jls 5.1.2 Widening Primitive Conversions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public float floatValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (float)<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="markdown">/**</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>Returns </span>the<span class="markdown"> value of this &#123;@code AtomicInteger&#125; as </span>a<span class="markdown"> &#123;@code double&#125;</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>after </span>a<span class="markdown"> widening primitive conversion.</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">     * </span>@jls 5.1.2 Widening Primitive Conversions</span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="code">     */</span></span></span></span><br><span class="line">    public <span class="built_in">double</span> doubleValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">double</span>)<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>AtomicLongç±»ä»£ç ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• AtomicLongç±»</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Written by Doug Lea with assistance from members of JCP JSR-166</span></span><br><span class="line"><span class="comment"> * Expert Group and released to the public domain, as explained at</span></span><br><span class="line"><span class="comment"> * http://creativecommons.org/publicdomain/zero/1.0/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> java.util.concurrent.atomic;</span><br><span class="line"><span class="keyword">import</span> java.util.function.LongUnaryOperator;</span><br><span class="line"><span class="keyword">import</span> java.util.function.LongBinaryOperator;</span><br><span class="line"><span class="keyword">import</span> sun.misc.Unsafe;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A &#123;<span class="doctag">@code</span> long&#125; value that may be updated atomically.  See the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> java.util.concurrent.atomic&#125; package specification for</span></span><br><span class="line"><span class="comment"> * description of the properties of atomic variables. An</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@code</span> AtomicLong&#125; is used in applications such as atomically</span></span><br><span class="line"><span class="comment"> * incremented sequence numbers, and cannot be used as a replacement</span></span><br><span class="line"><span class="comment"> * for a &#123;<span class="doctag">@link</span> java.lang.Long&#125;. However, this class does extend</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@code</span> Number&#125; to allow uniform access by tools and utilities that</span></span><br><span class="line"><span class="comment"> * deal with numerically-based classes.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Doug Lea</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicLong</span> <span class="keyword">extends</span> <span class="title">Number</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1927816293512124184</span>L;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setup to use Unsafe.compareAndSwapLong for updates</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Unsafe unsafe = Unsafe.getUnsafe();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> valueOffset;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Records whether the underlying JVM supports lockless</span></span><br><span class="line"><span class="comment">     * compareAndSwap for longs. While the Unsafe.compareAndSwapLong</span></span><br><span class="line"><span class="comment">     * method works in either case, some constructions should be</span></span><br><span class="line"><span class="comment">     * handled at Java level to avoid locking user-visible locks.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> VM_SUPPORTS_LONG_CAS = VMSupportsCS8();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns whether underlying JVM supports lockless CompareAndSet</span></span><br><span class="line"><span class="comment">     * for longs. Called only once and cached in VM_SUPPORTS_LONG_CAS.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> native <span class="keyword">boolean</span> VMSupportsCS8();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            valueOffset = unsafe.objectFieldOffset</span><br><span class="line">                (AtomicLong<span class="class">.<span class="keyword">class</span>.<span class="title">getDeclaredField</span>("<span class="title">value</span>"));</span></span><br><span class="line"><span class="class">        &#125; <span class="title">catch</span> (<span class="title">Exception</span> <span class="title">ex</span>) &#123;</span> <span class="keyword">throw</span> <span class="keyword">new</span> Error(ex); &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">long</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Creates a new AtomicLong with the given initial value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> initialValue the initial value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> AtomicLong(<span class="keyword">long</span> initialValue) &#123;</span><br><span class="line">        value = initialValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Creates a new AtomicLong with initial value &#123;<span class="doctag">@code</span> 0&#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> AtomicLong() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the current value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> get() &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets to the given value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newValue the new value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> set(<span class="keyword">long</span> newValue) &#123;</span><br><span class="line">        value = newValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Eventually sets to the given value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newValue the new value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> lazySet(<span class="keyword">long</span> newValue) &#123;</span><br><span class="line">        unsafe.putOrderedLong(<span class="keyword">this</span>, valueOffset, newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically sets to the given value and returns the old value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newValue the new value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndSet(<span class="keyword">long</span> newValue) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndSetLong(<span class="keyword">this</span>, valueOffset, newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically sets the value to the given updated value</span></span><br><span class="line"><span class="comment">     * if the current value &#123;<span class="doctag">@code</span> ==&#125; the expected value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expect the expected value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> update the new value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if successful. False return indicates that</span></span><br><span class="line"><span class="comment">     * the actual value was not equal to the expected value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> compareAndSet(<span class="keyword">long</span> expect, <span class="keyword">long</span> update) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.compareAndSwapLong(<span class="keyword">this</span>, valueOffset, expect, update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically sets the value to the given updated value</span></span><br><span class="line"><span class="comment">     * if the current value &#123;<span class="doctag">@code</span> ==&#125; the expected value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;&lt;a href="package-summary.html#weakCompareAndSet"&gt;May fail</span></span><br><span class="line"><span class="comment">     * spuriously and does not provide ordering guarantees&lt;/a&gt;, so is</span></span><br><span class="line"><span class="comment">     * only rarely an appropriate alternative to &#123;<span class="doctag">@code</span> compareAndSet&#125;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expect the expected value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> update the new value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if successful</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> weakCompareAndSet(<span class="keyword">long</span> expect, <span class="keyword">long</span> update) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.compareAndSwapLong(<span class="keyword">this</span>, valueOffset, expect, update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically increments by one the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndIncrement() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>L);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically decrements by one the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndDecrement() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, <span class="number">-1</span>L);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically adds the given value to the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta the value to add</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndAdd(<span class="keyword">long</span> delta) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically increments by one the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> incrementAndGet() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>L) + <span class="number">1</span>L;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically decrements by one the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> decrementAndGet() &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, <span class="number">-1</span>L) - <span class="number">1</span>L;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically adds the given value to the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta the value to add</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> addAndGet(<span class="keyword">long</span> delta) &#123;</span><br><span class="line">        <span class="keyword">return</span> unsafe.getAndAddLong(<span class="keyword">this</span>, valueOffset, delta) + delta;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically updates the current value with the results of</span></span><br><span class="line"><span class="comment">     * applying the given function, returning the previous value. The</span></span><br><span class="line"><span class="comment">     * function should be side-effect-free, since it may be re-applied</span></span><br><span class="line"><span class="comment">     * when attempted updates fail due to contention among threads.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateFunction a side-effect-free function</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndUpdate(LongUnaryOperator updateFunction) &#123;</span><br><span class="line">        <span class="keyword">long</span> prev, next;</span><br><span class="line">        do &#123;</span><br><span class="line">            prev = get();</span><br><span class="line">            next = updateFunction.applyAsLong(prev);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically updates the current value with the results of</span></span><br><span class="line"><span class="comment">     * applying the given function, returning the updated value. The</span></span><br><span class="line"><span class="comment">     * function should be side-effect-free, since it may be re-applied</span></span><br><span class="line"><span class="comment">     * when attempted updates fail due to contention among threads.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateFunction a side-effect-free function</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> updateAndGet(LongUnaryOperator updateFunction) &#123;</span><br><span class="line">        <span class="keyword">long</span> prev, next;</span><br><span class="line">        do &#123;</span><br><span class="line">            prev = get();</span><br><span class="line">            next = updateFunction.applyAsLong(prev);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically updates the current value with the results of</span></span><br><span class="line"><span class="comment">     * applying the given function to the current and given values,</span></span><br><span class="line"><span class="comment">     * returning the previous value. The function should be</span></span><br><span class="line"><span class="comment">     * side-effect-free, since it may be re-applied when attempted</span></span><br><span class="line"><span class="comment">     * updates fail due to contention among threads.  The function</span></span><br><span class="line"><span class="comment">     * is applied with the current value as its first argument,</span></span><br><span class="line"><span class="comment">     * and the given update as the second argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x the update value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accumulatorFunction a side-effect-free function of two arguments</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the previous value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> getAndAccumulate(<span class="keyword">long</span> x,</span><br><span class="line">                                       LongBinaryOperator accumulatorFunction) &#123;</span><br><span class="line">        <span class="keyword">long</span> prev, next;</span><br><span class="line">        do &#123;</span><br><span class="line">            prev = get();</span><br><span class="line">            next = accumulatorFunction.applyAsLong(prev, x);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically updates the current value with the results of</span></span><br><span class="line"><span class="comment">     * applying the given function to the current and given values,</span></span><br><span class="line"><span class="comment">     * returning the updated value. The function should be</span></span><br><span class="line"><span class="comment">     * side-effect-free, since it may be re-applied when attempted</span></span><br><span class="line"><span class="comment">     * updates fail due to contention among threads.  The function</span></span><br><span class="line"><span class="comment">     * is applied with the current value as its first argument,</span></span><br><span class="line"><span class="comment">     * and the given update as the second argument.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x the update value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accumulatorFunction a side-effect-free function of two arguments</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> accumulateAndGet(<span class="keyword">long</span> x,</span><br><span class="line">                                       LongBinaryOperator accumulatorFunction) &#123;</span><br><span class="line">        <span class="keyword">long</span> prev, next;</span><br><span class="line">        do &#123;</span><br><span class="line">            prev = get();</span><br><span class="line">            next = accumulatorFunction.applyAsLong(prev, x);</span><br><span class="line">        &#125; <span class="keyword">while</span> (!compareAndSet(prev, next));</span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the String representation of the current value.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the String representation of the current value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> Long.toString(get());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value of this &#123;<span class="doctag">@code</span> AtomicLong&#125; as an &#123;<span class="doctag">@code</span> int&#125;</span></span><br><span class="line"><span class="comment">     * after a narrowing primitive conversion.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@jls</span> 5.1.3 Narrowing Primitive Conversions</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> intValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value of this &#123;<span class="doctag">@code</span> AtomicLong&#125; as a &#123;<span class="doctag">@code</span> long&#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> longValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value of this &#123;<span class="doctag">@code</span> AtomicLong&#125; as a &#123;<span class="doctag">@code</span> float&#125;</span></span><br><span class="line"><span class="comment">     * after a widening primitive conversion.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@jls</span> 5.1.2 Widening Primitive Conversions</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">float</span> floatValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value of this &#123;<span class="doctag">@code</span> AtomicLong&#125; as a &#123;<span class="doctag">@code</span> double&#125;</span></span><br><span class="line"><span class="comment">     * after a widening primitive conversion.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@jls</span> 5.1.2 Widening Primitive Conversions</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> doubleValue() &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">double</span>)get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><h6 id="2-ç»å¯¹çº¿ç¨‹å®‰å…¨"><a href="#2-ç»å¯¹çº¿ç¨‹å®‰å…¨" class="headerlink" title="2.ç»å¯¹çº¿ç¨‹å®‰å…¨"></a>2.ç»å¯¹çº¿ç¨‹å®‰å…¨</h6><p>ç»å¯¹çš„ çº¿ç¨‹å®‰å…¨ å®Œå…¨æ»¡è¶³ Brian Goetz ç»™å‡ºçš„ çº¿ç¨‹å®‰å…¨ çš„å®šä¹‰ï¼Œ<br>è¿™ä¸ª å®šä¹‰ å…¶å®æ˜¯å¾ˆ ä¸¥æ ¼çš„ï¼Œ<br>ä¸€ä¸ªç±» è¦è¾¾åˆ° â€œä¸ç®¡ è¿è¡Œæ—¶ç¯å¢ƒ å¦‚ä½•ï¼Œ è°ƒç”¨è€… éƒ½ä¸éœ€è¦ ä»»ä½•é¢å¤–çš„ åŒæ­¥æªæ–½â€ é€šå¸¸éœ€è¦ä»˜å‡ºå¾ˆå¤§çš„ï¼Œç”šè‡³æœ‰æ—¶å€™æ˜¯ä¸åˆ‡å®é™…çš„ä»£ä»·ã€‚</p><p>åœ¨ Java APIä¸­ æ ‡æ³¨è‡ªå·±æ˜¯ çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œå¤§å¤šæ•°éƒ½ä¸æ˜¯ ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Java APIä¸­ ä¸€ä¸ªä¸æ˜¯ â€œç»å¯¹çº¿ç¨‹å®‰å…¨â€ çš„çº¿ç¨‹å®‰å…¨ç±» æ¥çœ‹çœ‹è¿™é‡Œçš„ â€œç»å¯¹â€ æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><p>å¦‚æœè¯´ java.util.Vector æ˜¯ä¸€ä¸ª çº¿ç¨‹å®‰å…¨ çš„ å®¹å™¨ï¼Œ<br>ç›¸ä¿¡æ‰€æœ‰çš„Javaç¨‹åºå‘˜å¯¹æ­¤éƒ½ä¸ä¼šæœ‰å¼‚è®®ï¼Œå› ä¸ºå®ƒçš„ add()ã€get()å’Œsize() è¿™ç±»æ–¹æ³•éƒ½æ˜¯è¢« synchronized ä¿®é¥°çš„ï¼Œ<br>å°½ç®¡è¿™æ · æ•ˆç‡å¾ˆä½ï¼Œä½†ç¡®å®æ˜¯ å®‰å…¨çš„ã€‚</p><p>ä½†æ˜¯ï¼Œå³ä½¿å®ƒ æ‰€æœ‰çš„æ–¹æ³• éƒ½è¢« ä¿®é¥°æˆ åŒæ­¥ï¼Œä¹Ÿä¸æ„å‘³ç€ è°ƒç”¨å®ƒçš„æ—¶å€™æ°¸è¿œéƒ½ä¸éœ€è¦ åŒæ­¥æ‰‹æ®µäº†ï¼Œ<br>è¯·çœ‹ä¸€ä¸‹ä»£ç æ¸…å•13-2ä¸­çš„æµ‹è¯•ä»£ç ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">13</span><span class="number">-2</span> å¯¹Vectorçº¿ç¨‹å®‰å…¨çš„æµ‹è¯•</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Vector&lt;Integer&gt; <span class="built_in">vector</span> = <span class="keyword">new</span> Vector&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">      <span class="built_in">vector</span>.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Thread removeThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">vector</span>.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        <span class="built_in">vector</span>.<span class="built_in">remove</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  Thread printThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">vector</span>.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>((<span class="built_in">vector</span>.<span class="built_in">get</span>(i)));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  removeThread.start();</span><br><span class="line">  printThread.start();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä¸è¦åŒæ—¶äº§ç”Ÿè¿‡å¤šçš„çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ“ä½œç³»ç»Ÿå‡æ­»</span></span><br><span class="line">  <span class="keyword">while</span>(Thread.activeCount() &gt; <span class="number">20</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"Thread-132"</span> java.lang.ArrayIndexOutOfBoundsException:</span><br><span class="line">Array index out <span class="keyword">of</span> range:<span class="number">17</span></span><br><span class="line">  at java.util.<span class="module-access"><span class="module"><span class="identifier">Vector</span>.</span></span>remove(<span class="module-access"><span class="module"><span class="identifier">Vector</span>.</span></span>java:<span class="number">777</span>)</span><br><span class="line">  at org.fenixsoft.mulithread.<span class="module-access"><span class="module"><span class="identifier">VectorTest$1</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">VectorTest</span>.</span></span>java:<span class="number">21</span>)</span><br><span class="line">  at java.lang.<span class="module-access"><span class="module"><span class="identifier">Thread</span>.</span></span>run(<span class="module-access"><span class="module"><span class="identifier">Thread</span>.</span></span>java:<span class="number">662</span>)</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œå°½ç®¡è¿™é‡Œä½¿ç”¨åˆ°çš„ Vectorçš„get()ã€remove()å’Œsize() æ–¹æ³•éƒ½æ˜¯ åŒæ­¥çš„ï¼Œ<br>ä½†æ˜¯åœ¨ å¤šçº¿ç¨‹ çš„ç¯å¢ƒä¸‹ï¼Œå¦‚æœä¸åœ¨ æ–¹æ³•è°ƒç”¨ç«¯ åšé¢å¤–çš„åŒæ­¥æªæ–½ çš„è¯ï¼Œ<br>ä½¿ç”¨è¿™æ®µä»£ç  ä»ç„¶æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹ æ°å¥½åœ¨é”™è¯¯çš„æ—¶é—´é‡Œ åˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œ<br>å¯¼è‡´åºå· i å·²ç»ä¸å†å¯ç”¨çš„è¯ï¼Œ<br>å†ç”¨ i è®¿é—®æ•°ç»„å°±ä¼š æŠ›å‡ºä¸€ä¸ªArrayIndexOutOfBoundsException</p><p>å¦‚æœè¦ä¿è¯è¿™æ®µä»£ç èƒ½æ­£ç¡®æ‰§è¡Œä¸‹å»ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æŠŠ removeThreadå’ŒprintThread çš„å®šä¹‰æ”¹æˆå¦‚ä»£ç æ¸…å•13-3æ‰€ç¤ºçš„æ ·å­ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">13</span><span class="number">-3</span> å¿…é¡»åŠ å…¥åŒæ­¥ ä»¥ä¿è¯Vectorè®¿é—®çš„çº¿ç¨‹å®‰å…¨æ€§</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">Thread removeThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">  @Override</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">    synchronized(<span class="built_in">vector</span>)&#123;</span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">vector</span>.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        <span class="built_in">vector</span>.<span class="built_in">remove</span>(i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Thread printThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">  @Override</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">    synchronized(<span class="built_in">vector</span>)&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">vector</span>.<span class="built_in">size</span>(); i++)&#123;</span><br><span class="line">        System.out.<span class="built_in">println</span>((<span class="built_in">vector</span>.<span class="built_in">get</span>(i)));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><h6 id="3-ç›¸å¯¹çº¿ç¨‹å®‰å…¨"><a href="#3-ç›¸å¯¹çº¿ç¨‹å®‰å…¨" class="headerlink" title="3.ç›¸å¯¹çº¿ç¨‹å®‰å…¨"></a>3.ç›¸å¯¹çº¿ç¨‹å®‰å…¨</h6><p>ç›¸å¯¹çš„ çº¿ç¨‹å®‰å…¨ å°±æ˜¯æˆ‘ä»¬ é€šå¸¸æ„ä¹‰ä¸Š æ‰€è®²çš„ çº¿ç¨‹å®‰å…¨ï¼Œ<br>å®ƒéœ€è¦ ä¿è¯ å¯¹è¿™ä¸ªå¯¹è±¡ å•ç‹¬çš„æ“ä½œ æ˜¯ çº¿ç¨‹å®‰å…¨çš„ï¼Œ<br>æˆ‘ä»¬åœ¨ è°ƒç”¨çš„æ—¶å€™ ä¸éœ€è¦åš é¢å¤–çš„ä¿éšœæªæ–½ï¼Œä½†æ˜¯å¯¹äºä¸€äº› ç‰¹å®šé¡ºåº çš„ è¿ç»­è°ƒç”¨ï¼Œ<br>å°±å¯èƒ½éœ€è¦åœ¨ è°ƒç”¨ç«¯ ä½¿ç”¨ é¢å¤–çš„åŒæ­¥æ‰‹æ®µ æ¥ä¿è¯ è°ƒç”¨çš„æ­£ç¡®æ€§ã€‚</p><p>ä¸Šé¢ä»£ç æ¸…å•13-2å’Œä»£ç æ¸…å•13-3å°±æ˜¯ ç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„ æ˜æ˜¾çš„ æ¡ˆä¾‹ã€‚</p><p>åœ¨Javaè¯­è¨€ä¸­ï¼Œå¤§éƒ¨åˆ†çš„ çº¿ç¨‹å®‰å…¨ç±» éƒ½å±äºè¿™ç§ç±»å‹ï¼Œä¾‹å¦‚ Vectorã€HashTableã€Collectionsçš„synchronizedCollection() æ–¹æ³•åŒ…è£…çš„é›†åˆ ç­‰ã€‚</p><h6 id="4-çº¿ç¨‹å…¼å®¹"><a href="#4-çº¿ç¨‹å…¼å®¹" class="headerlink" title="4.çº¿ç¨‹å…¼å®¹"></a>4.çº¿ç¨‹å…¼å®¹</h6><p>çº¿ç¨‹å…¼å®¹ æ˜¯æŒ‡ å¯¹è±¡æœ¬èº« å¹¶ä¸æ˜¯ çº¿ç¨‹å®‰å…¨çš„ï¼Œ<br>ä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨ è°ƒç”¨ç«¯ æ­£ç¡®åœ° ä½¿ç”¨ åŒæ­¥æ‰‹æ®µ æ¥ä¿è¯å¯¹è±¡ åœ¨å¹¶å‘ç¯å¢ƒä¸­ å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ï¼Œ<br>æˆ‘ä»¬å¹³å¸¸è¯´ ä¸€ä¸ªç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç»å¤§å¤šæ•°æ—¶å€™æŒ‡çš„æ˜¯è¿™ä¸€ç§æƒ…å†µã€‚</p><p>Java APIä¸­å¤§éƒ¨åˆ†çš„ç±» éƒ½æ˜¯å±äº çº¿ç¨‹å…¼å®¹çš„ï¼Œå¦‚ä¸å‰é¢çš„ Vectorå’ŒHashTable ç›¸å¯¹åº”çš„é›†åˆç±» ArrayListå’ŒHashMap ç­‰ã€‚</p><h6 id="5-çº¿ç¨‹å¯¹ç«‹"><a href="#5-çº¿ç¨‹å¯¹ç«‹" class="headerlink" title="5.çº¿ç¨‹å¯¹ç«‹"></a>5.çº¿ç¨‹å¯¹ç«‹</h6><p>çº¿ç¨‹å¯¹ç«‹ æ˜¯æŒ‡æ— è®º è°ƒç”¨ç«¯ æ˜¯å¦é‡‡å–äº† åŒæ­¥æªæ–½ï¼Œ<br>éƒ½æ— æ³•åœ¨ å¤šçº¿ç¨‹ç¯å¢ƒä¸­ å¹¶å‘ä½¿ç”¨çš„ä»£ç ã€‚</p><p>ç”±äºJavaè¯­è¨€å¤©ç”Ÿå°±å…·å¤‡ å¤šçº¿ç¨‹ç‰¹æ€§ï¼Œçº¿ç¨‹å¯¹ç«‹ è¿™ç§ æ’æ–¥å¤šçº¿ç¨‹çš„ä»£ç  æ—¶å¾ˆå°‘å‡ºç°çš„ï¼Œè€Œä¸”é€šå¸¸éƒ½æ˜¯ æœ‰å®³çš„ï¼Œåº”å½“å°½é‡é¿å…ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹å¯¹ç«‹ çš„ä¾‹å­æ˜¯ Thread ç±»çš„ suspend() å’Œ resume() æ–¹æ³•ï¼Œ<br>å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹ åŒæ—¶æŒæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä¸€ä¸ªå°è¯•å»ä¸­æ–­çº¿ç¨‹ï¼Œå¦ä¸€ä¸ªå°è¯•å»æ¢å¤çº¿ç¨‹ï¼Œ<br>å¦‚æœå¹¶å‘è¿›è¡Œçš„è¯ï¼Œæ— è®ºè°ƒç”¨æ—¶ æ˜¯å¦è¿›è¡Œäº†åŒæ­¥ï¼Œç›®æ ‡çº¿ç¨‹éƒ½æ˜¯å­˜åœ¨ æ­»é”é£é™© çš„ï¼Œ<br>å¦‚æœ suspend() ä¸­æ–­çš„çº¿ç¨‹ å°±æ˜¯ å³å°†è¦æ‰§è¡Œ resume() çš„é‚£ä¸ªçº¿ç¨‹ï¼Œé‚£å°±è‚¯å®šè¦äº§ç”Ÿ æ­»é” äº†ã€‚</p><p>ä¹Ÿæ­£æ˜¯ç”±äºè¿™ä¸ªåŸå› ï¼Œ suspend() å’Œ resume() æ–¹æ³•å·²ç»è¢« JDK å£°æ˜åºŸå¼ƒï¼ˆ@Deprecatedï¼‰äº†ã€‚</p><p>å¸¸è§çš„ çº¿ç¨‹å¯¹ç«‹ çš„æ“ä½œè¿˜æœ‰ System.setIn()ã€System.setOut() å’Œ System.runFinalizersOnExit()ç­‰ã€‚</p><h5 id="çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"><a href="#çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•" class="headerlink" title="çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"></a>çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•</h5><p>äº†è§£äº† ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ ä¹‹åï¼Œç´§æ¥ç€çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬åº”è¯¥ å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Œ<br>è¿™å¬èµ·æ¥ä¼¼ä¹æ˜¯ä¸€ä»¶ç”±ä»£ç å¦‚ä½•ç¼–å†™æ¥å†³å®šçš„äº‹æƒ…ï¼Œç¡®å®ï¼Œå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ ä¸ ä»£ç ç¼–å†™ æœ‰å¾ˆå¤§çš„å…³ç³»ï¼Œ<br>ä½† è™šæ‹Ÿæœº æä¾›çš„ åŒæ­¥å’Œé”æœºåˆ¶ ä¹Ÿèµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p><p>æœ¬èŠ‚ä¸­ï¼Œä»£ç ç¼–å†™å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ å’Œ è™šæ‹Ÿæœºå¦‚ä½•å®ç°åŒæ­¥ä¸é” è¿™ä¸¤è€…éƒ½ä¼šæœ‰æ‰€æ¶‰åŠï¼Œç›¸å¯¹è€Œè¨€æ›´åé‡åè€…ä¸€äº›ï¼Œ<br>åªè¦è¯»è€…äº†è§£äº† è™šæ‹Ÿæœºçº¿ç¨‹å®‰å…¨æ‰‹æ®µ çš„è¿ä½œè¿‡ç¨‹ï¼Œè‡ªå·±å»æ€è€ƒä»£ç å¦‚ä½•ç¼–å†™å¹¶ä¸æ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ã€‚</p><p>ï¼ˆå‘¨å¤§å¤§ï¼Œä½ æ˜¯è®¤çœŸçš„å—ï¼ŸğŸ˜­ğŸ˜­ğŸ˜­ è¯´å‡ºè¿™å¥è¯çš„æ—¶å€™ï¼Œè€ƒè™‘è¿‡åƒæˆ‘è¿™ç§å°ç™½çš„æ„Ÿå—å—ï¼ŸğŸ™ƒğŸ™ƒğŸ™ƒï¼‰</p><h6 id="1-äº’æ–¥åŒæ­¥"><a href="#1-äº’æ–¥åŒæ­¥" class="headerlink" title="1.äº’æ–¥åŒæ­¥"></a>1.äº’æ–¥åŒæ­¥</h6><p>äº’æ–¥åŒæ­¥ï¼ˆMutual Exclusion &amp; Synchronizationï¼‰ æ˜¯å¸¸è§çš„ä¸€ç§ å¹¶å‘æ­£ç¡®æ€§ä¿éšœæ‰‹æ®µã€‚</p><p>åŒæ­¥ æ˜¯æŒ‡åœ¨ å¤šä¸ªçº¿ç¨‹ å¹¶å‘è®¿é—® å…±äº«æ•°æ®æ—¶ï¼Œä¿è¯ å…±äº«æ•°æ® åœ¨åŒä¸€ä¸ªæ—¶åˆ» åªè¢«ä¸€ä¸ªï¼ˆæˆ–è€…æ˜¯ä¸€äº›ï¼Œä½¿ç”¨ä¿¡å·é‡çš„æ—¶å€™ï¼‰çº¿ç¨‹ä½¿ç”¨ã€‚</p><p>è€Œ äº’æ–¥ æ˜¯ å®ç°åŒæ­¥ çš„ ä¸€ç§æ‰‹æ®µï¼Œ<br>ä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰å’Œä¿¡å·é‡ï¼ˆSemaphoreï¼‰éƒ½æ˜¯ä¸»è¦çš„ äº’æ–¥å®ç°æ–¹å¼ã€‚</p><p>å› æ­¤ï¼Œåœ¨è¿™4ä¸ªå­—é‡Œé¢ï¼Œäº’æ–¥ æ˜¯ å› ï¼Œ åŒæ­¥ æ˜¯ æœï¼›äº’æ–¥ æ˜¯ æ–¹æ³•ï¼ŒåŒæ­¥ æ˜¯ ç›®çš„ã€‚</p><p>åœ¨ Java ä¸­ï¼Œæœ€åŸºæœ¬çš„ åŒæ­¥äº’æ–¥ æ‰‹æ®µå°±æ˜¯ synchronizedå…³é”®å­—ï¼Œ<br>synchronizedå…³é”®å­— ç»è¿‡ ç¼–è¯‘ ä¹‹åï¼Œ ä¼šåœ¨ åŒæ­¥å— çš„å‰å åˆ†åˆ«å½¢æˆ monitorenterå’Œmonitorexit è¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ï¼Œ<br>è¿™ä¸¤ä¸ªå­—èŠ‚ç  éƒ½éœ€è¦ä¸€ä¸ª reference ç±»å‹çš„å‚æ•°æ¥æŒ‡æ˜è¦ é”å®šå’Œè§£é” çš„å¯¹è±¡ã€‚</p><p>å¦‚æœJavaç¨‹åºä¸­çš„ synchronizedæ˜ç¡®æŒ‡å®šäº† å¯¹è±¡å‚æ•°ï¼Œé‚£å°±æ˜¯ è¿™ä¸ªå¯¹è±¡çš„referenceï¼›<br>å¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®šï¼Œé‚£å°±æ ¹æ® synchronized ä¿®é¥°çš„æ˜¯å®ä¾‹æ–¹æ³•è¿˜æ˜¯ç±»æ–¹æ³•ï¼Œå»å–å¯¹åº”çš„ å¯¹è±¡å®ä¾‹ æˆ– Classå¯¹è±¡ æ¥ä½œä¸º é”å¯¹è±¡ã€‚</p><p>æ ¹æ® è™šæ‹Ÿæœºè§„èŒƒ çš„è¦æ±‚ï¼Œ<br>åœ¨ æ‰§è¡Œ monitorenter æŒ‡ä»¤æ—¶ï¼Œ<br>é¦–å…ˆ è¦å°è¯• è·å– å¯¹è±¡çš„é”ã€‚</p><p>å¦‚æœ è¿™ä¸ªå¯¹è±¡ æ²¡è¢« é”å®šï¼Œ<br>æˆ–è€… å½“å‰çº¿ç¨‹ å·²ç»æ‹¥æœ‰äº† é‚£ä¸ªå¯¹è±¡çš„é”ï¼Œ<br>æŠŠ é” çš„ è®¡æ•°å™¨ åŠ 1ï¼Œ<br>ç›¸åº”çš„ï¼Œ<br>åœ¨ æ‰§è¡Œ monitorexit æŒ‡ä»¤æ—¶ ä¼šå°† é”è®¡æ•°å™¨ å‡1ï¼Œ<br>å½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé” å°± é‡Šæ”¾ã€‚</p><p>å¦‚æœ è·å– å¯¹è±¡é” å¤±è´¥ï¼Œé‚£ å½“å‰çº¿ç¨‹ å°±è¦ é˜»å¡ç­‰å¾…ï¼Œç›´åˆ° å¯¹è±¡é” è¢« å¦å¤–ä¸€ä¸ªçº¿ç¨‹ é‡Šæ”¾ä¸ºæ­¢ã€‚</p><p>åœ¨ è™šæ‹Ÿæœºè§„èŒƒ å¯¹ monitorenterå’Œmonitorexit çš„è¡Œä¸ºæè¿°ä¸­ï¼Œæœ‰ä¸¤ç‚¹æ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ã€‚</p><p>é¦–å…ˆï¼ŒsynchronizedåŒæ­¥å— å¯¹ åŒä¸€æ¡çº¿ç¨‹ æ¥è¯´ æ˜¯å¯é‡å…¥çš„ï¼Œä¸ä¼šå‡ºç° è‡ªå·±æŠŠè‡ªå·± é”æ­»çš„é—®é¢˜ã€‚</p><p>å…¶æ¬¡ï¼ŒåŒæ­¥å— åœ¨ å·²è¿›å…¥çš„çº¿ç¨‹ æ‰§è¡Œå®Œä¹‹å‰ï¼Œä¼š é˜»å¡ åé¢å…¶ä»–çº¿ç¨‹çš„è¿›å…¥ã€‚</p><p>ç¬¬12ç« è®²è¿‡ï¼ŒJavaçš„çº¿ç¨‹ æ˜¯æ˜ å°„åˆ° æ“ä½œç³»ç»Ÿ çš„ åŸç”Ÿçº¿ç¨‹ ä¹‹ä¸Šçš„ï¼Œå¦‚æœè¦ é˜»å¡æˆ–å”¤é†’ ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½éœ€è¦ æ“ä½œç³»ç»Ÿæ¥å¸®å¿™å®Œæˆï¼Œ<br>è¿™å°±éœ€è¦ä» ç”¨æˆ·æ€ è½¬æ¢åˆ° æ ¸å¿ƒæ€ ä¸­ï¼Œå› æ­¤ çŠ¶æ€è½¬æ¢ éœ€è¦è€—è´¹ å¾ˆå¤šçš„å¤„ç†å™¨æ—¶é—´ã€‚</p><p>å¯¹äº ä»£ç ç®€å•çš„ åŒæ­¥å—ï¼ˆå¦‚è¢« synchronizedä¿®é¥°çš„ getter() æˆ– setter() æ–¹æ³•ï¼‰ï¼Œ<br>çŠ¶æ€è½¬æ¢ æ¶ˆè€—çš„æ—¶é—´ æœ‰å¯èƒ½æ¯” ç”¨æˆ·ä»£ç  æ‰§è¡Œçš„æ—¶é—´ è¿˜è¦é•¿ã€‚</p><p>æ‰€ä»¥ synchronized æ˜¯Javaè¯­è¨€ä¸­ä¸€ä¸ª é‡é‡çº§ï¼ˆHeavyweightï¼‰çš„æ“ä½œï¼Œæœ‰ç»éªŒçš„ç¨‹åºå‘˜éƒ½ä¼šåœ¨ ç¡®å®å¿…è¦ çš„æƒ…å†µä¸‹ æ‰ä½¿ç”¨è¿™ç§æ“ä½œã€‚</p><p>è€Œ è™šæ‹Ÿæœºæœ¬èº« ä¹Ÿä¼šè¿›è¡Œä¸€äº› ä¼˜åŒ–ï¼Œ<br>è­¬å¦‚åœ¨é€šçŸ¥ æ“ä½œç³»ç»Ÿé˜»å¡çº¿ç¨‹ ä¹‹å‰ åŠ å…¥ä¸€æ®µ è‡ªæ—‹ç­‰å¾…è¿‡ç¨‹ï¼Œé¿å…é¢‘ç¹åœ° åˆ‡å…¥åˆ° æ ¸å¿ƒæ€ ä¹‹ä¸­ã€‚</p><p>é™¤äº† synchronized ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ java.util.concurrent(ä¸‹æ–‡ç§°J.U.C) åŒ…ä¸­çš„ é‡å…¥é”ï¼ˆReentrantLockï¼‰ æ¥ å®ç°åŒæ­¥ï¼Œ<br>åœ¨åŸºæœ¬ç”¨æ³•ä¸Šï¼Œ ReentrantLockä¸synchronized å¾ˆç›¸ä¼¼ï¼Œ<br>å®ƒä»¬éƒ½å…·å¤‡ä¸€æ ·çš„ çº¿ç¨‹é‡å…¥ç‰¹æ€§ï¼Œåªæ˜¯ä»£ç å†™æ³•ä¸Šæœ‰ç‚¹åŒºåˆ«ï¼Œ<br>ä¸€ä¸ªè¡¨ç°ä¸º APIå±‚é¢çš„ äº’æ–¥é”ï¼ˆ lock()å’Œunlock()æ–¹æ³• é…åˆ try/finallyè¯­å¥å— æ¥å®Œæˆï¼‰ï¼Œ<br>å¦ä¸€ä¸ªè¡¨ç°ä¸º åŸç”Ÿè¯­æ³•å±‚é¢çš„äº’æ–¥é”ã€‚</p><p>ä¸è¿‡ï¼Œç›¸æ¯” synchronizedï¼ŒReentrantLock å¢åŠ äº†ä¸€äº› é«˜çº§åŠŸèƒ½ï¼Œ<br>ä¸»è¦æœ‰ä»¥ä¸‹3é¡¹ï¼š<br>ç­‰å¾…å¯ä¸­æ–­ã€å¯å®ç°å…¬å¹³é”ã€ä»¥åŠ é”å¯ä»¥ç»‘å®šå¤šä¸ªæ¡ä»¶ã€‚</p><p>ç­‰å¾…å¯ä¸­æ–­ æ˜¯æŒ‡ å½“æŒæœ‰é”çš„çº¿ç¨‹ é•¿æœŸä¸é‡Šæ”¾é” çš„æ—¶å€™ï¼Œæ­£åœ¨ ç­‰å¾…çš„çº¿ç¨‹ å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ï¼Œå¯ä¸­æ–­ç‰¹æ€§ å¯¹å¤„ç†æ‰§è¡Œæ—¶é—´éå¸¸é•¿çš„ åŒæ­¥å— å¾ˆæœ‰å¸®åŠ©ã€‚</p><p>å…¬å¹³é” æ˜¯æŒ‡ å¤šä¸ªçº¿ç¨‹ åœ¨ç­‰å¾… åŒä¸€ä¸ªé” æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ ç”³è¯·é” çš„æ—¶é—´é¡ºåº æ¥ä¾æ¬¡ è·å¾—é”ï¼›<br>è€Œ éå…¬å¹³é” åˆ™ä¸ä¿è¯ è¿™ä¸€ç‚¹ï¼Œ<br>åœ¨ é” è¢«é‡Šæ”¾æ—¶ï¼Œä»»ä½•ä¸€ä¸ª ç­‰å¾…é”çš„çº¿ç¨‹ éƒ½æœ‰æœºä¼š è·å¾—é”ã€‚<br>synchronized ä¸­ çš„ é” æ˜¯éå…¬å¹³çš„ï¼ŒReentrantLock é»˜è®¤æƒ…å†µä¸‹  ä¹Ÿæ˜¯éå…¬å¹³çš„ï¼Œä½†å¯ä»¥é€šè¿‡ å¸¦å¸ƒå°”å€¼ çš„ æ„é€ å‡½æ•° è¦æ±‚ä½¿ç”¨ å…¬å¹³é”ã€‚</p><p>é”ç»‘å®šå¤šä¸ªæ¡ä»¶ æ˜¯æŒ‡ ä¸€ä¸ªReentrantLockå¯¹è±¡ å¯ä»¥åŒæ—¶ ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ï¼Œ<br>è€Œåœ¨ synchronizedä¸­ï¼Œ é”å¯¹è±¡ çš„ wait()å’Œnotify()æˆ–notifyAll()æ–¹æ³• å¯ä»¥å®ç°ä¸€ä¸ª éšå«çš„æ¡ä»¶ï¼Œ<br>å¦‚æœè¦å’Œ å¤šäºä¸€ä¸ªçš„æ¡ä»¶å…³è”çš„æ—¶å€™ï¼Œ å°±ä¸å¾—ä¸ é¢å¤–åœ°æ·»åŠ ä¸€ä¸ªé”ï¼Œ<br>è€Œ ReentrantLock åˆ™æ— éœ€è¿™æ ·åšï¼Œåªéœ€è¦ å¤šæ¬¡è°ƒç”¨ newCondition()æ–¹æ³• å³å¯ã€‚</p><p>å¦‚æœéœ€è¦ä½¿ç”¨ä¸Šè¿°åŠŸèƒ½ï¼Œé€‰ç”¨ ReentrantLock æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œ<br>é‚£å¦‚æœ æ˜¯åŸºäº æ€§èƒ½è€ƒè™‘å‘¢ï¼Ÿ<br>å…³äº synchronizedå’ŒReentrantLock çš„ æ€§èƒ½é—®é¢˜ï¼Œ<br>Brian Goetzå¯¹è¿™ä¸¤ç§é”åœ¨ JDK1.5ä¸å•æ ¸å¤„ç†å™¨ï¼Œä»¥åŠ JDK1.5ä¸åŒXeonå¤„ç†å™¨ ç¯å¢ƒä¸‹åšäº†ä¸€ç»„ ååé‡å¯¹æ¯”çš„å®éªŒï¼Œå®éªŒç»“æœå¦‚å›¾13-1å’Œå›¾13-2æ‰€ç¤ºã€‚</p><blockquote><p>æœ¬ä¾‹ä¸­çš„æ•°æ®åŠå›¾ç‰‡æ¥æºäº Brian Goetz ä¸º IBM developerWorks æ’°å†™çš„è®ºæ–‡ï¼šã€ŠJava theory and practice:More flexible, scalable locking in JDK5.0ã€‹ï¼Œ<br>åŸæ–‡åœ°å€æ˜¯ï¼š<a href="http://www.ibm.com/developerworks/java/library/j-jtp10264/?S_TACT=" target="_blank" rel="noopener">http://www.ibm.com/developerworks/java/library/j-jtp10264/?S_TACT=</a> 105AGX53&amp;S_CMP=cn-a-jã€‚</p></blockquote><p>ï¼ˆè¯¥é“¾æ¥æœ‰æ•ˆï¼Œä½†æ˜¯ï¼Œæˆ‘çœ‹çš„å¾ˆæ˜¯è‰°éš¾ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­æ•‘æ•‘è¿™è‹¦å‘½çš„å­©å­å§ï¼Œå°±åƒå½“åˆæ¥å…¥paypalæ”¯ä»˜ğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒï¼‰</p><p>ä»å›¾13-1å’Œå›¾13-2å¯ä»¥çœ‹å‡ºï¼Œ<br>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ synchronizedçš„ååé‡ä¸‹é™å¾— éå¸¸ä¸¥é‡ï¼Œ<br>è€Œ ReentrantLock åˆ™èƒ½åŸºæœ¬ä¿æŒåœ¨åŒä¸€ä¸ª æ¯”è¾ƒç¨³å®šçš„æ°´å¹³ ä¸Šã€‚</p><p>ä¸å…¶è¯´ ReentrantLock æ€§èƒ½å¥½ï¼Œè¿˜ä¸å¦‚è¯´ synchronized è¿˜æœ‰éå¸¸å¤§çš„ä¼˜åŒ–ä½™åœ°ã€‚</p><p>åç»­çš„æŠ€æœ¯å‘å±•ä¹Ÿè¯æ˜äº†è¿™ä¸€ç‚¹ï¼ŒJDK1.6ä¸­åŠ å…¥äº†å¾ˆå¤šé’ˆå¯¹ é”çš„ä¼˜åŒ–æªæ–½ï¼ˆ13.3èŠ‚æˆ‘ä»¬å°±ä¼šè®²è§£è¿™äº› ä¼˜åŒ–æªæ–½ï¼‰ï¼Œ<br>JDK1.6å‘å¸ƒä¹‹åï¼Œäººä»¬å°±å‘ç° synchronizedä¸ReentrantLock çš„ æ€§èƒ½ åŸºæœ¬ä¸Šæ˜¯ å®Œå…¨æŒå¹³ äº†ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœè¯»è€…çš„ç¨‹åº æ˜¯ä½¿ç”¨ JDK1.6 æˆ–ä»¥ä¸Š éƒ¨ç½² çš„è¯ï¼Œ<br>æ€§èƒ½å› ç´  å°±ä¸å†æ˜¯ é€‰æ‹©ReentrantLock çš„ç†ç”±äº†ï¼Œ<br>è™šæ‹Ÿæœº åœ¨ æœªæ¥çš„æ€§èƒ½æ”¹è¿›ä¸­ è‚¯å®šä¹Ÿä¼šæ›´åŠ åå‘äº åŸç”Ÿçš„synchronizedï¼Œ<br>æ‰€ä»¥è¿˜æ˜¯æå€¡åœ¨ synchronized èƒ½å®ç°éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ synchronized æ¥è¿›è¡Œ åŒæ­¥ã€‚</p><h6 id="2-éé˜»å¡åŒæ­¥"><a href="#2-éé˜»å¡åŒæ­¥" class="headerlink" title="2.éé˜»å¡åŒæ­¥"></a>2.éé˜»å¡åŒæ­¥</h6><p>äº’æ–¥åŒæ­¥ æœ€ä¸»è¦çš„é—®é¢˜ å°±æ˜¯ è¿›è¡Œçº¿ç¨‹ é˜»å¡å’Œå”¤é†’ æ‰€å¸¦æ¥çš„çš„ æ€§èƒ½é—®é¢˜ï¼Œ<br>å› æ­¤è¿™ç§ åŒæ­¥ä¹Ÿç§°ä¸º é˜»å¡åŒæ­¥ï¼ˆBlocking Synchronizationï¼‰ã€‚</p><p>ä» å¤„ç†é—®é¢˜çš„æ–¹å¼ ä¸Šè¯´ï¼Œ<br>äº’æ–¥åŒæ­¥ å±äºä¸€ç§ æ‚²è§‚çš„ å¹¶å‘ç­–ç•¥ï¼Œæ€»æ˜¯è®¤ä¸º åªè¦ä¸å»åš æ­£ç¡®çš„ åŒæ­¥æªæ–½ï¼ˆä¾‹å¦‚åŠ é”ï¼‰ï¼Œé‚£å°±è‚¯å®šä¼šå‡ºç°é—®é¢˜ï¼Œ<br>æ— è®º å…±äº«æ•°æ® æ˜¯å¦çœŸçš„ä¼šå‡ºç°ç«äº‰ï¼Œå®ƒéƒ½è¦ è¿›è¡ŒåŠ é”<br>ï¼ˆè¿™é‡Œè®¨è®ºçš„æ˜¯ æ¦‚å¿µæ¨¡å‹ï¼Œå®é™…ä¸Š è™šæ‹Ÿæœº ä¼šä¼˜åŒ–å¾ˆå¤§ä¸€éƒ¨åˆ† ä¸å¿…è¦çš„ åŠ é”ï¼‰ã€<br>ç”¨æˆ·æ€å’Œå¿ƒæ€è½¬æ¢ã€ç»´æŠ¤é”è®¡æ•°å™¨ å’Œ æ£€æŸ¥ æ˜¯å¦æœ‰ è¢«é˜»å¡çš„çº¿ç¨‹ éœ€è¦å”¤é†’ ç­‰æ“ä½œã€‚</p><p>ï¼ˆè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„ æ€»æœ‰åˆæ°‘æƒ³å®³æœ• äº†ï¼‰</p><p>éšç€ ç¡¬ä»¶æŒ‡ä»¤é›† çš„å‘å±•ï¼Œæˆ‘ä»¬æœ‰äº†å¦å¤–ä¸€ä¸ªé€‰æ‹©ï¼šåŸºäº å†²çªæ£€æµ‹ çš„ ä¹è§‚å¹¶å‘ç­–ç•¥ï¼Œ<br>é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯å…ˆè¿›è¡Œæ“ä½œï¼Œ<br>å¦‚æœæ²¡æœ‰å…¶ä»–çº¿ç¨‹ äº‰ç”¨å…±äº«æ•°æ®ï¼Œé‚£æ“ä½œå°±æˆåŠŸäº†ï¼›<br>å¦‚æœ å…±äº«æ•°æ® æœ‰äº‰ç”¨ï¼Œäº§ç”Ÿäº† å†²çªï¼Œé‚£å°±å†é‡‡å–å…¶ä»–çš„ è¡¥å¿æªæ–½ï¼ˆæœ€å¸¸è§çš„è¡¥å¿æªæ–½å°±æ˜¯ ä¸æ–­åœ°é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ï¼‰ï¼Œ<br>è¿™ç§ ä¹è§‚çš„å¹¶å‘ç­–ç•¥ çš„è®¸å¤šå®ç° éƒ½ä¸éœ€è¦æŠŠ çº¿ç¨‹æŒ‚èµ·ï¼Œå› æ­¤è¿™ç§ åŒæ­¥æ“ä½œ ç§°ä¸º éé˜»å¡åŒæ­¥ï¼ˆNon-Blocking Synchronizationï¼‰ã€‚</p><p>ä¸ºä»€ä¹ˆç¬”è€…è¯´ä½¿ç”¨ ä¹è§‚å¹¶å‘ç­–ç•¥ éœ€è¦ â€œç¡¬ä»¶æŒ‡ä»¤é›†çš„å‘å±•â€ æ‰èƒ½è¿›è¡Œå‘¢ï¼Ÿ</p><p>å› ä¸ºæˆ‘ä»¬éœ€è¦ æ“ä½œå’Œå†²çªæ£€æµ‹ è¿™ä¸¤ä¸ªæ­¥éª¤ å…·å¤‡ åŸå­æ€§ï¼Œé ä»€ä¹ˆæ¥ä¿è¯å‘¢ï¼Ÿ</p><p>å¦‚æœè¿™é‡Œ å†ä½¿ç”¨ äº’æ–¥åŒæ­¥ æ¥ä¿è¯å°±å¤±å»æ„ä¹‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é  ç¡¬ä»¶ æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ï¼Œ<br>ç¡¬ä»¶ ä¿è¯ä¸€ä¸ªä» è¯­ä¹‰ ä¸Šçœ‹èµ·æ¥éœ€è¦å¤šæ¬¡æ“ä½œçš„æ€§èƒ½ åªé€šè¿‡ ä¸€æ¡å¤„ç†å™¨æŒ‡ä»¤ å°±èƒ½å®Œæˆï¼Œè¿™ç±»æŒ‡ä»¤å¸¸ç”¨çš„æœ‰ï¼š</p><p>(æˆ‘å¤§æ¦‚ä¸€è¾ˆå­ä¹Ÿç”¨ä¸åˆ°è¿™äº›ä¸ªä¸œè¥¿)</p><ul><li>æµ‹è¯•å¹¶è®¾ç½®ï¼ˆTest-and-Setï¼‰</li><li>è·å–å¹¶å¢åŠ ï¼ˆFetch-and-Incrementï¼‰</li><li>äº¤æ¢ï¼ˆSwapï¼‰</li><li>æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆCompare-and-Swapï¼Œä¸‹æ–‡ç§° CASï¼‰</li><li>åŠ è½½é“¾æ¥/æ¡ä»¶å­˜å‚¨ï¼ˆLoad-Linked/Store-Conditionalï¼Œä¸‹æ–‡ç§°LL/SCï¼‰</li></ul><p>(ä½†æ˜¯è¿˜æ˜¯å¾—åŠªåŠ›å»è¯•è¯•ã€‚ä¸æ€•ä¸€ä¸‡å°±æ€•ä¸‡ä¸€ã€‚)</p><p>å…¶ä¸­ï¼Œå‰é¢çš„3æ¡ æ˜¯20ä¸–çºªå°±å·²ç»å­˜åœ¨äº å¤§å¤šæ•°æŒ‡ä»¤é›†ä¹‹ä¸­çš„ å¤„ç†å™¨æŒ‡ä»¤ï¼Œ</p><p>åé¢çš„ä¸¤æ¡æ˜¯ ç°ä»£å¤„ç†å™¨ æ–°å¢çš„ï¼Œè€Œä¸”è¿™ä¸¤æ¡æŒ‡ä»¤çš„ ç›®çš„å’ŒåŠŸèƒ½ æ˜¯ç±»ä¼¼çš„ã€‚</p><p>åœ¨ IA64ã€x86 æŒ‡ä»¤é›† ä¸­æœ‰ cmpxchgæŒ‡ä»¤ å®Œæˆ CASåŠŸèƒ½ï¼Œ<br>åœ¨ sparc-TSO ä¹Ÿæœ‰ casaæŒ‡ä»¤ å®ç°ï¼Œè€Œåœ¨ ARM å’Œ PowerPC æ¶æ„ä¸‹ï¼Œåˆ™éœ€è¦ä½¿ç”¨ ä¸€å¯¹ ldrex/strex æŒ‡ä»¤ æ¥å®Œæˆ LL/SC çš„åŠŸèƒ½ã€‚</p><p>CASæŒ‡ä»¤ éœ€è¦æœ‰3ä¸ªæ“ä½œæ•°ï¼Œåˆ†åˆ«æ˜¯ å†…å­˜ä½ç½®ï¼ˆåœ¨Javaä¸­å¯ä»¥ç®€å•ç†è§£ä¸º å˜é‡çš„å†…å­˜åœ°å€ï¼Œç”¨Vè¡¨ç¤ºï¼‰ã€æ—§çš„é¢„æœŸå€¼ï¼ˆç”¨Aè¡¨ç¤ºï¼‰å’Œæ–°å€¼ï¼ˆç”¨Bè¡¨ç¤ºï¼‰ã€‚</p><p>CASæŒ‡ä»¤ æ‰§è¡Œæ—¶ï¼Œå½“ä¸”ä»…å½“ V ç¬¦åˆ æ—§é¢„æœŸå€¼A æ—¶ï¼Œå¤„ç†å™¨ ç”¨ æ–°å€¼B æ›´æ–° Vçš„å€¼ï¼Œå¦åˆ™å®ƒå°±ä¸æ‰§è¡Œæ›´æ–°ï¼Œ<br>ä½†æ˜¯æ— è®º æ˜¯å¦æ›´æ–°äº† Vçš„å€¼ï¼Œéƒ½ä¼šè¿”å› Vçš„æ—§å€¼ï¼Œä¸Šè¿°çš„å¤„ç†è¿‡ç¨‹æ˜¯ä¸€ä¸ª åŸå­æ“ä½œã€‚</p><p>åœ¨ JDK1.5 ä¹‹åï¼ŒJavaç¨‹åº ä¸­æ‰å¯ä»¥ä½¿ç”¨ CAS æ“ä½œï¼Œ<br>è¯¥æ“ä½œç”± sun.misc.Unsafeç±» é‡Œé¢çš„ compareAndSwapInt() å’Œ compareAndSwapLong() ç­‰å‡ ä¸ªæ–¹æ³•åŒ…è£…æä¾›ï¼Œ<br>è™šæ‹Ÿæœº åœ¨ å†…éƒ¨ å¯¹è¿™äº›æ–¹æ³•åšäº†ç‰¹æ®Šå¤„ç†ï¼Œ<br>å³æ—¶ç¼–è¯‘å‡ºæ¥çš„ç»“æœ å°±æ˜¯ä¸€æ¡ å¹³å°ç›¸å…³çš„ å¤„ç†å™¨CASæŒ‡ä»¤ï¼Œæ²¡æœ‰æ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹ï¼Œæˆ–è€…å¯ä»¥è®¤ä¸ºæ˜¯æ— æ¡ä»¶ å†…è” è¿›å»äº†ã€‚</p><blockquote><p>è¿™ç§è¢« è™šæ‹Ÿæœº ç‰¹æ®Šå¤„ç† çš„æ–¹æ³•ç§°ä¸º å›ºæœ‰å‡½æ•°ï¼ˆIntrinsicsï¼‰ï¼Œç±»ä¼¼çš„ å›ºæœ‰å‡½æ•° è¿˜æœ‰Math.sin()ç­‰ã€‚</p></blockquote><p>ç”±äº Unsafeç±» ä¸æ˜¯æä¾›ç»™ ç”¨æˆ·ç¨‹åº è°ƒç”¨çš„ç±»ï¼ˆUnsafe.getUnsafe()çš„ä»£ç ä¸­ é™åˆ¶äº†åªæœ‰ å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ åŠ è½½çš„Class æ‰èƒ½è®¿é—®å®ƒï¼‰ï¼Œ<br>å› æ­¤ï¼Œå¦‚æœä¸é‡‡ç”¨ åå°„æ‰‹æ®µ ï¼Œ æˆ‘ä»¬åªèƒ½é€šè¿‡å…¶ä»–çš„ Java APIæ¥é—´æ¥ä½¿ç”¨å®ƒï¼Œå¦‚ J.U.CåŒ… é‡Œé¢çš„ æ•´æ•°åŸå­ç±»ï¼Œå…¶ä¸­çš„ compareAndSet()å’ŒgetAndIncrement() ç­‰æ–¹æ³•éƒ½æ˜¯ç”¨äº† Unsafeç±» çš„ CASæ“ä½œã€‚</p><p>æˆ‘ä»¬ä¸å¦¨æ‹¿ä¸€æ®µåœ¨ç¬¬12ç« ä¸­æ²¡æœ‰è§£å†³çš„é—®é¢˜ä»£ç æ¥çœ‹çœ‹ å¦‚ä½•ä½¿ç”¨CASæ“ä½œæ¥é¿å…é˜»å¡åŒæ­¥ ï¼Œä»£ç å¦‚ä»£ç æ¸…å•12-1æ‰€ç¤ºã€‚</p><p>æˆ‘ä»¬æ›¾ç»é€šè¿‡è¿™æ®µ20ä¸ªçº¿ç¨‹ è‡ªå¢10000æ¬¡ çš„ä»£ç æ¥è¯æ˜ volatileå˜é‡ä¸å…·å¤‡åŸå­æ€§ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©å®ƒ å…·å¤‡åŸå­æ€§ å‘¢ï¼Ÿ</p><p>æŠŠ â€œrace++â€æ“ä½œæˆ–increase() æ–¹æ³•ç”¨ åŒæ­¥å— åŒ…è£¹èµ·æ¥å½“ç„¶æ˜¯ä¸€ä¸ªåŠæ³•ï¼Œä½†æ˜¯å¦‚æœæ”¹æˆå¦‚ä»£ç æ¸…å•13-4æ‰€ç¤ºçš„ä»£ç ï¼Œé‚£æ•ˆç‡å°†ä¼šæé«˜è®¸å¤šã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">13</span><span class="number">-4</span> Atomicçš„åŸå­è‡ªå¢è¿ç®—</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Atomic å˜é‡è‡ªå¢è¿ç®—æµ‹è¯•</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @author zzm</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicTest</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AtomicInteger race = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">increase</span><span class="params">()</span></span>&#123;</span><br><span class="line">      race.incrementAndGet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> THREADS_COUNT = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> throws Exception</span>&#123;</span><br><span class="line">      Thread[] threads = <span class="keyword">new</span> Thread[THREADS_COUNT];</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; THREADS_COUNT; i++)&#123;</span><br><span class="line">        threads[i] = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">          @Override</span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">            <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; THREADS_COUNT; i++)&#123;</span><br><span class="line">              increase();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        threads[i].start();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span>(Thread.activeCount() &gt; <span class="number">1</span>)</span><br><span class="line">          thread.<span class="built_in">yield</span>();</span><br><span class="line"></span><br><span class="line">      System.out.<span class="built_in">println</span>(race);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p>200000</p><p>ä½¿ç”¨ AtomicInteger ä»£æ›¿ int åï¼Œç¨‹åºè¾“å‡ºäº†æ­£ç¡®çš„ç»“æœï¼Œ<br>ä¸€åˆ‡éƒ½è¦å½’åŠŸäº incrementAndGet()æ–¹æ³• çš„ åŸå­æ€§ã€‚<br>å®ƒçš„å®ç° å…¶å®éå¸¸ ç®€å•ï¼Œå¦‚ä»£ç æ¸…å•13-5æ‰€ç¤ºã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 13-5 incrementAndGet()æ–¹æ³•çš„JDKæºç </span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">/*<span class="strong">*</span></span><br><span class="line"><span class="strong">  *</span> Atomically  increment by one the current value.</span><br><span class="line"><span class="code">  * @return the updated value</span></span><br><span class="line"><span class="code">  */</span></span><br><span class="line"><span class="code">  public final int incrementAndGet()&#123;</span></span><br><span class="line"><span class="code">    for(;;)&#123;</span></span><br><span class="line"><span class="code">      int current = get();</span></span><br><span class="line"><span class="code">      int next = current + 1;</span></span><br><span class="line"><span class="code">      if(compareAndSet(current, next))&#123;</span></span><br><span class="line"><span class="code">        return next;</span></span><br><span class="line"><span class="code">      &#125;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">  &#125;</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>incrementAndGet()æ–¹æ³• åœ¨ä¸€ä¸ª æ— é™å¾ªç¯ ä¸­ï¼Œ<br>ä¸æ–­å°è¯• å°†ä¸€ä¸ªæ¯”å½“å‰å€¼ å¤§1çš„æ–°å€¼ èµ‹å€¼ç»™è‡ªå·±ã€‚<br>å¦‚æœå¤±è´¥äº†ï¼Œé‚£è¯´æ˜åœ¨æ‰§è¡Œ â€œè·å–-è®¾ç½®â€ æ“ä½œçš„æ—¶å€™ å€¼å·²ç»æœ‰äº†ä¿®æ”¹ï¼Œ<br>äºæ˜¯ å†æ¬¡å¾ªç¯ è¿›è¡Œä¸‹ä¸€æ¬¡æ“ä½œï¼Œç›´åˆ°è®¾ç½®æˆåŠŸä¸ºæ­¢ã€‚</p><p>å°½ç®¡ CAS çœ‹èµ·æ¥å¾ˆç¾ï¼Œä½†æ˜¾ç„¶è¿™ç§æ“ä½œæ— æ³•æ¶µç›– äº’æ–¥åŒæ­¥çš„æ‰€æœ‰ä½¿ç”¨åœºæ™¯ï¼Œ<br>å¹¶ä¸” CAS ä»è¯­ä¹‰ä¸Šæ¥è¯´ å¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œå­˜åœ¨è¿™æ ·ä¸€ä¸ª é€»è¾‘æ¼æ´ï¼š<br>å¦‚æœä¸€ä¸ª å˜é‡V åˆæ¬¡è¯»å–çš„æ—¶å€™æ˜¯ Aå€¼ï¼Œ<br>å¹¶ä¸”åœ¨å‡†å¤‡èµ‹å€¼çš„æ—¶å€™ æ£€æŸ¥åˆ°å®ƒä»ç„¶ä¸ºAå€¼ï¼Œ<br>é‚£æˆ‘ä»¬å°±èƒ½è¯´å®ƒçš„å€¼ æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æ”¹å˜è¿‡äº†å—ï¼Ÿ<br>å¦‚æœåœ¨è¿™æ®µæœŸé—´ å®ƒçš„å€¼æ›¾ç»è¢«æ”¹æˆäº†Bï¼Œ åæ¥åˆè¢«æ”¹å›Aï¼Œ<br>é‚£ CASæ“ä½œ å°±ä¼šè¯¯è®¤ä¸ºå®ƒ ä»æ¥æ²¡æœ‰è¢«æ”¹å˜è¿‡ã€‚</p><p>è¿™ä¸ª æ¼æ´ ç§°ä¸º CASæ“ä½œ çš„ â€œABAé—®é¢˜â€ã€‚</p><p>J.U.CåŒ… ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæä¾›äº†ä¸€ä¸ªå¸¦æœ‰æ ‡è®°çš„ åŸå­å¼•ç”¨ç±»â€œAtomicStampedReferenceâ€ï¼Œ<br>å®ƒå¯ä»¥é€šè¿‡æ§åˆ¶ å˜é‡å€¼çš„ç‰ˆæœ¬ æ¥ä¿è¯ CASçš„æ­£ç¡®æ€§ã€‚</p><p>ä¸è¿‡ç›®å‰æ¥è¯´è¿™ä¸ªç±» æ¯”è¾ƒâ€œé¸¡è‚‹â€ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ ABAé—®é¢˜ ä¸ä¼šå½±å“ ç¨‹åºå¹¶å‘çš„æ­£ç¡®æ€§ï¼Œ<br>å¦‚æœéœ€è¦ è§£å†³ABAé—®é¢˜ï¼Œæ”¹ç”¨ä¼ ç»Ÿçš„ äº’æ–¥åŒæ­¥ å¯èƒ½ä¼šæ¯” åŸå­ç±»æ›´é«˜æ•ˆã€‚</p><h6 id="3-æ— åŒæ­¥æ–¹æ¡ˆ"><a href="#3-æ— åŒæ­¥æ–¹æ¡ˆ" class="headerlink" title="3.æ— åŒæ­¥æ–¹æ¡ˆ"></a>3.æ— åŒæ­¥æ–¹æ¡ˆ</h6><p>è¦ä¿è¯ çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸æ˜¯ä¸€å®šå°±è¦è¿›è¡Œ åŒæ­¥ï¼Œä¸¤è€…æ²¡æœ‰ å› æœå…³ç³»ã€‚</p><p>åŒæ­¥ åªæ˜¯ä¿è¯ å…±äº«æ•°æ®äº‰ç”¨æ—¶çš„æ­£ç¡®æ€§ çš„æ‰‹æ®µï¼Œ<br>å¦‚æœä¸€ä¸ªæ–¹æ³• æœ¬æ¥å°±ä¸æ¶‰åŠ å…±äº«æ•°æ®ï¼Œ<br>é‚£å®ƒè‡ªç„¶å°±æ— éœ€ ä»»ä½•åŒæ­¥æªæ–½ å»ä¿è¯ æ­£ç¡®æ€§ï¼Œ<br>å› æ­¤ä¼šæœ‰ä¸€äº›ä»£ç å¤©ç”Ÿå°±æ˜¯ çº¿ç¨‹å®‰å…¨çš„ï¼Œç¬”è€…ç®€å•åœ°ä»‹ç»å…¶ä¸­çš„ä¸¤ç±»ã€‚</p><p><strong>å¯é‡å…¥ä»£ç ï¼ˆReentrant Codeï¼‰</strong>:<br>è¿™ç§ä»£ç ä¹Ÿå«åš çº¯ä»£ç ï¼ˆPure Codeï¼‰ï¼Œ<br>å¯ä»¥åœ¨ ä»£ç æ‰§è¡Œçš„ä»»ä½•æ—¶åˆ» ä¸­æ–­å®ƒï¼Œ<br>è½¬è€Œå» æ‰§è¡Œå¦å¤–ä¸€æ®µä»£ç ï¼ˆåŒ…æ‹¬ é€’å½’è°ƒç”¨å®ƒæœ¬èº«ï¼‰ï¼Œ<br>è€Œåœ¨ æ§åˆ¶æƒ è¿”å›åï¼Œ<br>åŸæ¥çš„ç¨‹åº ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚</p><p>ç›¸å¯¹ çº¿ç¨‹å®‰å…¨ æ¥è¯´ï¼Œ<br>å¯é‡å…¥æ€§ æ˜¯æ›´åŸºæœ¬çš„ç‰¹æ€§ï¼Œ<br>å®ƒå¯ä»¥ä¿è¯ çº¿ç¨‹å®‰å…¨ï¼Œ<br>å³æ‰€æœ‰çš„ å¯é‡å…¥ çš„ä»£ç éƒ½æ˜¯ çº¿ç¨‹å®‰å…¨çš„ï¼Œ<br>ä½†æ˜¯å¹¶éæ‰€æœ‰çš„ çº¿ç¨‹å®‰å…¨ çš„ä»£ç éƒ½æ˜¯ å¯é‡å…¥çš„ã€‚</p><p>å¯é‡å…¥ä»£ç  æœ‰ä¸€äº› å…±åŒçš„ç‰¹å¾ï¼Œ<br>ä¾‹å¦‚ ä¸ä¾èµ–å­˜å‚¨åœ¨å †ä¸Šçš„æ•°æ® å’Œ å…¬ç”¨çš„ç³»ç»Ÿèµ„æºã€ç”¨åˆ°çš„çŠ¶æ€é‡ éƒ½ç”±å‚æ•°ä¸­ä¼ å…¥ã€ä¸è°ƒç”¨éå¯é‡å…¥çš„æ–¹æ³•ç­‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„åŸåˆ™æ¥åˆ¤æ–­ ä»£ç æ˜¯å¦å…·å¤‡å¯é‡å…¥æ€§ï¼š<br>å¦‚æœä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„è¿”å›ç»“æœæ˜¯å¯ä»¥ é¢„æµ‹çš„ï¼Œåªè¦è¾“å…¥äº†ç›¸åŒçš„æ•°æ®ï¼Œå°±éƒ½èƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œé‚£å®ƒå°±æ»¡è¶³ å¯é‡å…¥æ€§ çš„è¦æ±‚ï¼Œå½“ç„¶ä¹Ÿå°±æ˜¯ çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p><strong>çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆThread Local Storageï¼‰</strong>:<br>å¦‚æœä¸€æ®µä»£ç ä¸­ æ‰€éœ€è¦çš„æ•°æ® å¿…é¡»ä¸ å…¶ä»–ä»£ç  å…±äº«ï¼Œ<br>é‚£å°±çœ‹çœ‹è¿™äº› å…±äº«æ•°æ®çš„ä»£ç  æ˜¯å¦èƒ½ä¿è¯ åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ æ‰§è¡Œï¼Ÿ<br>å¦‚æœèƒ½ä¿è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠ å…±äº«æ•°æ®çš„å¯è§èŒƒå›´ é™åˆ¶åœ¨ åŒä¸€ä¸ªçº¿ç¨‹ä¹‹å†…ï¼Œ<br>è¿™æ ·ï¼Œæ— é¡» åŒæ­¥  ä¹Ÿèƒ½ä¿è¯ çº¿ç¨‹ä¹‹é—´ ä¸å‡ºç° æ•°æ®äº‰ç”¨ çš„é—®é¢˜ã€‚</p><p>ç¬¦åˆè¿™ç§ç‰¹ç‚¹çš„åº”ç”¨å¹¶ä¸å°‘è§ï¼Œ<br>å¤§éƒ¨åˆ†ä½¿ç”¨ æ¶ˆè´¹é˜Ÿåˆ—çš„æ¶æ„æ¨¡å¼ï¼ˆå¦‚â€œç”Ÿäº§è€…-æ¶ˆè´¹è€…â€æ¨¡å¼ï¼‰éƒ½ä¼šå°† äº§å“çš„æ¶ˆè´¹è¿‡ç¨‹ å°½é‡åœ¨ ä¸€ä¸ªçº¿ç¨‹ä¸­ æ¶ˆè´¹å®Œï¼Œ<br>å…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªåº”ç”¨å®ä¾‹å°±æ˜¯ ç»å…¸Webäº¤äº’æ¨¡å‹ ä¸­çš„ â€œä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªæœåŠ¡å™¨çº¿ç¨‹â€ï¼ˆThread-per-Requestï¼‰ çš„å¤„ç†æ–¹å¼ï¼Œ<br>è¿™ç§ å¤„ç†æ–¹å¼çš„å¹¿æ³›åº”ç”¨ ä½¿å¾—å¾ˆå¤š WebæœåŠ¡ç«¯åº”ç”¨ éƒ½å¯ä»¥ä½¿ç”¨ çº¿ç¨‹æœ¬åœ°å­˜å‚¨ æ¥è§£å†³ çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>Javaè¯­è¨€ä¸­ï¼Œ<br>å¦‚æœ ä¸€ä¸ªå˜é‡ è¦è¢« å¤šçº¿ç¨‹ è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ volatileå…³é”®å­— å£°æ˜å®ƒä¸º â€œæ˜“å˜çš„â€ï¼›<br>å¦‚æœ ä¸€ä¸ªå˜é‡ è¦è¢« æŸä¸ªçº¿ç¨‹ ç‹¬äº«ï¼ŒJavaä¸­å°±æ²¡æœ‰ç±»ä¼¼C++ä¸­ __declspec(thread)è¿™æ ·çš„å…³é”®å­—ï¼Œ<br>ä¸è¿‡è¿˜æ˜¯å¯ä»¥é€šè¿‡ java.lang.ThreadLocalç±» æ¥å®ç° çº¿ç¨‹æœ¬åœ°å­˜å‚¨ çš„åŠŸèƒ½ã€‚</p><blockquote><p>åœ¨ Visual C++ ä¸­æ˜¯ â€œ<strong>declspec(thread)â€å…³é”®å­—ï¼Œè€Œåœ¨ GCC ä¸­æ˜¯â€œ</strong>threadâ€ã€‚</p></blockquote><p>æ¯ä¸€ä¸ªçº¿ç¨‹çš„ Threadå¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ª ThreadLocalMapå¯¹è±¡ï¼Œ<br>è¿™ä¸ªå¯¹è±¡ å­˜å‚¨äº†ä¸€ç»„ ä»¥ ThreadLocal.threadLocalHashCode ä¸º é”® ï¼Œä»¥ æœ¬åœ°çº¿ç¨‹å˜é‡ ä¸º å€¼ çš„ K-Vå€¼å¯¹ï¼Œ<br>ThreadLocalå¯¹è±¡ å°±æ˜¯ å½“å‰çº¿ç¨‹çš„ThreadLocalMapçš„ è®¿é—®å…¥å£ï¼Œ<br>æ¯ä¸€ä¸ª ThreadLocalå¯¹è±¡ éƒ½åŒ…å«äº† ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ threadLocalHashCodeå€¼ï¼Œ<br>ä½¿ç”¨è¿™ä¸ªå€¼ å°±å¯ä»¥åœ¨çº¿ç¨‹ K-Vå€¼å¯¹ ä¸­æ‰¾å› å¯¹åº”çš„æœ¬åœ°çº¿ç¨‹å˜é‡ã€‚</p><h4 id="é”ä¼˜åŒ–"><a href="#é”ä¼˜åŒ–" class="headerlink" title="é”ä¼˜åŒ–"></a>é”ä¼˜åŒ–</h4><p>é«˜æ•ˆå¹¶å‘ æ˜¯ä» JDK1.5åˆ°JDK1.6çš„ä¸€ä¸ª é‡è¦æ”¹è¿›ï¼Œ<br>HotSpotè™šæ‹Ÿæœº å¼€å‘å›¢é˜Ÿåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸ŠèŠ±è´¹äº†å¤§é‡çš„ç²¾åŠ›å»å®ç° å„ç§é”ä¼˜åŒ–æŠ€æœ¯ï¼Œ<br>å¦‚ é€‚åº”æ€§è‡ªæ—‹ï¼ˆAdaptive Spinningï¼‰ã€é”æ¶ˆé™¤ï¼ˆLock Eliminationï¼‰ã€é”ç²—åŒ–ï¼ˆLock Coarseningï¼‰ã€è½»é‡çº§é”ï¼ˆLightweight Lockingï¼‰å’Œåå‘é”ï¼ˆBiased Lockingï¼‰ç­‰ï¼Œ<br>è¿™äº›æŠ€æœ¯éƒ½æ˜¯ä¸ºäº† åœ¨çº¿ç¨‹ä¹‹é—´ æ›´é«˜æ•ˆåœ° å…±äº«æ•°æ®ï¼Œ<br>ä»¥åŠ è§£å†³ç«äº‰é—®é¢˜ï¼Œ<br>ä»è€Œ æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><h5 id="è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹"><a href="#è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹" class="headerlink" title="è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹"></a>è‡ªæ—‹é”ä¸è‡ªé€‚åº”è‡ªæ—‹</h5><p>å‰é¢æˆ‘ä»¬è®¨è®º äº’æ–¥åŒæ­¥ çš„æ—¶å€™ï¼Œ<br>æåˆ°äº† äº’æ–¥åŒæ­¥ å¯¹æ€§èƒ½æœ€å¤§çš„å½±å“ æ˜¯é˜»å¡çš„å®ç°ï¼Œ<br>æŒ‚èµ·çº¿ç¨‹ å’Œ æ¢å¤çº¿ç¨‹ çš„æ“ä½œéƒ½éœ€è¦ è½¬å…¥å†…æ ¸æ€ ä¸­å®Œæˆï¼Œ<br>è¿™äº›æ“ä½œç»™ç³»ç»Ÿçš„ å¹¶å‘æ€§èƒ½ å¸¦æ¥äº†å¾ˆå¤§çš„å‹åŠ›ã€‚</p><p>åŒæ—¶ï¼Œè™šæ‹Ÿæœº çš„å¼€å‘å›¢é˜Ÿä¹Ÿæ³¨æ„åˆ°åœ¨è®¸å¤šåº”ç”¨ä¸Šï¼Œ<br>å…±äº«æ•°æ®çš„é”å®šçŠ¶æ€ åªä¼šæŒç»­å¾ˆçŸ­çš„ä¸€æ®µæ—¶é—´ï¼Œ<br>ä¸ºäº†è¿™æ®µæ—¶é—´ å»æŒ‚èµ·å’Œæ¢å¤çº¿ç¨‹ å¹¶ä¸å€¼å¾—ã€‚</p><p>å¦‚æœ ç‰©ç†æœºå™¨ æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ å¤„ç†å™¨ï¼Œ<br>èƒ½è®© ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹ åŒæ—¶å¹¶è¡Œæ‰§è¡Œï¼Œ<br>æˆ‘ä»¬å°±å¯ä»¥è®©  åé¢è¯·æ±‚é”çš„é‚£ä¸ªçº¿ç¨‹ â€œç¨ç­‰ä¸€ä¸‹â€ï¼Œ<br>ä½†ä¸æ”¾å¼ƒ å¤„ç†å™¨çš„æ‰§è¡Œæ—¶é—´ï¼Œ<br>çœ‹çœ‹ æŒæœ‰é”çš„çº¿ç¨‹ æ˜¯å¦å¾ˆå¿«å°±ä¼šé‡Šæ”¾é”ã€‚</p><p>ä¸ºäº†è®©çº¿ç¨‹ç­‰å¾…ï¼Œæˆ‘ä»¬åªéœ€è®© çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¿™å¾ªç¯ï¼ˆè‡ªæ—‹ï¼‰ï¼Œè¿™é¡¹æŠ€æœ¯å°±æ˜¯æ‰€è°“çš„ è‡ªæ—‹é”ã€‚</p><p>è‡ªæ—‹é” åœ¨ JDK1.4.2 ä¸­å°±å·²ç»å¼•å…¥ï¼Œ<br>åªä¸è¿‡ é»˜è®¤ æ˜¯ å…³é—­çš„ï¼Œ<br>å¯ä»¥ä½¿ç”¨ -XX:+UseSpinning å‚æ•°æ¥å¼€å¯ï¼Œ<br>åœ¨ JDK1.6 ä¸­å°±å·²ç»æ”¹ä¸º é»˜è®¤å¼€å¯äº†ã€‚</p><p>è‡ªæ—‹ç­‰å¾… ä¸èƒ½ä»£æ›¿ é˜»å¡ï¼Œ<br>ä¸”å…ˆä¸è¯´å¯¹ å¤„ç†å™¨æ•°é‡çš„è¦æ±‚ï¼Œ<br>è‡ªæ—‹ç­‰å¾… æœ¬èº«è™½ç„¶ é¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œ<br>ä½†å®ƒæ˜¯è¦ å ç”¨å¤„ç†å™¨æ—¶é—´çš„ï¼Œ<br>å› æ­¤ï¼Œå¦‚æœ é” è¢«å ç”¨çš„æ—¶é—´ å¾ˆçŸ­ï¼Œè‡ªæ—‹ç­‰å¾… çš„ æ•ˆæœå°±ä¼šéå¸¸å¥½ï¼Œ<br>åä¹‹ï¼Œå¦‚æœ é” è¢«å ç”¨çš„æ—¶é—´ å¾ˆé•¿ï¼Œé‚£ä¹ˆ è‡ªæ—‹çš„çº¿ç¨‹ åªä¼š ç™½ç™½æ¶ˆè€—å¤„ç†å™¨èµ„æºï¼Œ<br>è€Œä¸ä¼šåš ä»»ä½•æœ‰ç”¨çš„å·¥ä½œï¼Œ<br>åè€Œä¼šå¸¦æ¥ æ€§èƒ½ä¸Šçš„æµªè´¹ã€‚</p><p>å› æ­¤ï¼Œè‡ªæ—‹ç­‰å¾…çš„æ—¶é—´ å¿…é¡»è¦æœ‰ ä¸€å®šçš„é™åº¦ï¼Œ<br>å¦‚æœ è‡ªæ—‹è¶…è¿‡äº†é™å®šçš„æ¬¡æ•° ä»ç„¶æ²¡æœ‰ æˆåŠŸè·å¾—é”ï¼Œ<br>å°±åº”å½“ä½¿ç”¨ ä¼ ç»Ÿçš„æ–¹å¼ å»æŒ‚èµ·çº¿ç¨‹äº†ã€‚</p><p>è‡ªæ—‹æ¬¡æ•° çš„ é»˜è®¤å€¼ æ˜¯ 10æ¬¡ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å‚æ•°-XX:PreBlockSpin æ¥æ›´æ”¹ã€‚</p><p>åœ¨ JDK1.6 ä¸­å¼•å…¥äº† è‡ªé€‚åº”çš„è‡ªæ—‹é”ã€‚</p><p>è‡ªé€‚åº” æ„å‘³ç€ è‡ªæ—‹çš„æ—¶é—´ ä¸å†å›ºå®šäº†ï¼Œ<br>è€Œæ˜¯ç”± å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´ åŠ é”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€ æ¥å†³å®šã€‚</p><p>å¦‚æœåœ¨ åŒä¸€ä¸ªé”å¯¹è±¡ä¸Šï¼Œ<br>è‡ªæ—‹ç­‰å¾… åˆšåˆšæˆåŠŸè·å¾—è¿‡é”ï¼Œå¹¶ä¸” æŒæœ‰é”çš„çº¿ç¨‹ æ­£åœ¨è¿è¡Œä¸­ï¼Œ<br>é‚£ä¹ˆ è™šæ‹Ÿæœº å°±ä¼šè®¤ä¸º è¿™æ¬¡è‡ªæ—‹ ä¹Ÿå¾ˆæœ‰å¯èƒ½å†æ¬¡æˆåŠŸï¼Œ<br>è¿›è€Œå®ƒå°† å…è®¸ è‡ªæ—‹ç­‰å¾… æŒç»­ç›¸å¯¹æ›´é•¿çš„æ—¶é—´ï¼Œæ¯”å¦‚100ä¸ªå¾ªç¯ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœ å¯¹äºæŸä¸ªé”ï¼Œè‡ªæ—‹ å¾ˆå°‘æˆåŠŸè·å¾—è¿‡ï¼Œ<br>éšç€ ç¨‹åºè¿è¡Œå’Œæ€§èƒ½ç›‘æ§ä¿¡æ¯ çš„ ä¸æ–­å®Œå–„ï¼Œ<br>è™šæ‹Ÿæœº å¯¹ ç¨‹åºé” çš„ çŠ¶å†µé¢„æµ‹ å°±ä¼šè¶Šæ¥è¶Šå‡†ç¡®ï¼Œ<br>è™šæ‹Ÿæœº å°±ä¼šå˜å¾— è¶Šæ¥è¶Šâ€œèªæ˜â€äº†ã€‚</p><h5 id="é”æ¶ˆé™¤"><a href="#é”æ¶ˆé™¤" class="headerlink" title="é”æ¶ˆé™¤"></a>é”æ¶ˆé™¤</h5><p>é”æ¶ˆé™¤ æ˜¯æŒ‡ è™šæ‹Ÿæœº å³æ—¶ç¼–è¯‘å™¨ åœ¨è¿è¡Œæ—¶ï¼Œ<br>å¯¹ä¸€äº›ä»£ç ä¸Š è¦æ±‚ åŒæ­¥ï¼Œä½†æ˜¯è¢«æ£€æµ‹åˆ° ä¸å¯èƒ½å­˜åœ¨å…±äº«æ•°æ®ç«äº‰çš„é” è¿›è¡Œ æ¶ˆé™¤ã€‚</p><p>é”æ¶ˆé™¤ çš„ ä¸»è¦åˆ¤å®šä¾æ® æ¥æºäº é€ƒé€¸åˆ†æ çš„ æ•°æ®æ”¯æŒï¼ˆç¬¬11ç« å·²ç»è®²è§£è¿‡ é€ƒé€¸åˆ†ææŠ€æœ¯ï¼‰ï¼Œ<br>å¦‚æœåˆ¤æ–­ åœ¨ä¸€æ®µä»£ç ä¸­ï¼Œå † ä¸Šçš„æ‰€æœ‰ æ•°æ® éƒ½ä¸ä¼š é€ƒé€¸å‡ºå» ä»è€Œè¢« å…¶ä»–çš„çº¿ç¨‹è®¿é—®åˆ°ï¼Œ<br>é‚£å°±å¯ä»¥æŠŠå®ƒä»¬å½“åš å †ä¸Šæ•°æ®å¯¹å¾…ï¼Œ<br>è®¤ä¸ºå®ƒä»¬æ˜¯ çº¿ç¨‹ç§æœ‰çš„ï¼ŒåŒæ­¥åŠ é” è‡ªç„¶ä¹Ÿå°±æ— é¡»è¿è¡Œã€‚</p><p>ä¹Ÿè®¸è¯»è€…ä¼šæœ‰ç–‘é—®ï¼Œ å˜é‡ æ˜¯å¦é€ƒé€¸ï¼Œ<br>å¯¹äº è™šæ‹Ÿæœº æ¥è¯´éœ€è¦ä½¿ç”¨ æ•°æ®æµåˆ†æ æ¥ç¡®å®šï¼Œ<br>ä½†æ˜¯ç¨‹åºå‘˜è‡ªå·±åº”è¯¥æ—¶å¾ˆæ¸…æ¥šçš„ï¼Œæ€ä¹ˆä¼šåœ¨ æ˜çŸ¥é“ä¸å­˜åœ¨æ•°æ®äº‰ç”¨çš„æƒ…å†µä¸‹ è¦æ±‚åŒæ­¥å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯æœ‰è®¸å¤š åŒæ­¥æªæ–½ å¹¶ä¸æ˜¯ç¨‹åºå‘˜è‡ªå·±åŠ çš„ï¼Œ<br>åŒæ­¥çš„ä»£ç  åœ¨javaç¨‹åºä¸­çš„ æ™®éç¨‹åº¦ ä¹Ÿè®¸è¶…è¿‡äº†å¤§éƒ¨åˆ†è¯»è€…çš„æƒ³è±¡ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç æ¸…å•13-6ä¸­çš„ä¾‹å­ï¼Œè¿™æ®µéå¸¸ç®€å•çš„ä»£ç  ä»…ä»…æ˜¯è¾“å‡º3ä¸ªå­—ç¬¦ä¸²ç›¸åŠ çš„ç»“æœï¼Œ<br>æ— è®ºæ˜¯ æºç å­—é¢ä¸Š è¿˜æ˜¯ ç¨‹åºè¯­ä¹‰ä¸Š éƒ½æ²¡æœ‰åŒæ­¥ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 13-6 ä¸€æ®µçœ‹èµ·æ¥æ²¡æœ‰åŒæ­¥çš„ä»£ç </span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">public String concatString(String s1,String s2,String s3)&#123;</span><br><span class="line"><span class="code">  return s1+s2+s3;</span></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œ<br>ç”±äº Stringæ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå¯¹å­—ç¬¦ä¸²çš„è¿æ¥æ“ä½œ æ€»æ˜¯é€šè¿‡ç”Ÿæˆ æ–°çš„Stringå¯¹è±¡ æ¥è¿›è¡Œçš„ï¼Œ<br>å› æ­¤ Javacç¼–è¯‘å™¨ ä¼šå¯¹ Stringè¿æ¥ åš è‡ªåŠ¨ä¼˜åŒ–ã€‚</p><p>åœ¨ JDK1.5 ä¹‹å‰ï¼Œä¼šè½¬åŒ–ä¸º StringBufferå¯¹è±¡çš„è¿ç»­append()æ“ä½œï¼Œ<br>åœ¨ JDK1.5åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œä¼šè½¬ä¸º StringBuilderå¯¹è±¡çš„è¿ç»­append()æ“ä½œï¼Œ<br>å³ä»£ç æ¸…å•13-6ä¸­çš„ä»£ç  å¯èƒ½ä¼šå˜æˆä»£ç æ¸…å• 13-7çš„æ ·å­ã€‚</p><blockquote><p>å®¢è§‚åœ°è¯´ï¼Œæ—¢ç„¶è°ˆåˆ° é”æ¶ˆé™¤ä¸é€ƒé€¸åˆ†æï¼Œé‚£ è™šæ‹Ÿæœº å°±ä¸å¯èƒ½æ˜¯ JDK1.5ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå®é™…ä¸Šä¼šè½¬åŒ–ä¸º éçº¿ç¨‹å®‰å…¨çš„StringBuilder æ¥å®Œæˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¹¶ä¸ä¼šåŠ é”ï¼Œ ä½†è¿™ä¹Ÿä¸å½±å“ç¬”è€…ç”¨è¿™ä¸ªä¾‹å­è¯æ˜ Javaå¯¹è±¡ä¸­åŒæ­¥çš„æ™®éæ€§ã€‚</p></blockquote><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 13-7 Javacè½¬åŒ–åçš„å­—ç¬¦ä¸²è¿æ¥æ“ä½œ</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">public String concatString(String s1,String s2,String s3)&#123;</span><br><span class="line"><span class="code">  StringBuffer sb = new StringBuffer();</span></span><br><span class="line"><span class="code">  sb.append(s1);</span></span><br><span class="line"><span class="code">  sb.append(s2);</span></span><br><span class="line"><span class="code">  sb.append(s3);</span></span><br><span class="line"><span class="code">  return sb.toString();</span></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¤§å®¶è¿˜è®¤ä¸ºè¿™æ®µä»£ç æ²¡æœ‰æ¶‰åŠåŒæ­¥å—ï¼Ÿ<br>æ¯ä¸ª StringBuffer.append() æ–¹æ³•ä¸­éƒ½æœ‰ä¸€ä¸ª åŒæ­¥å—ï¼Œé”å°±æ˜¯sbå¯¹è±¡ã€‚<br>è™šæ‹Ÿæœº è§‚å¯Ÿ å˜é‡sbï¼Œå¾ˆå¿«å°±ä¼šå‘ç°å®ƒçš„ åŠ¨æ€ä½œç”¨åŸŸ è¢«é™åˆ¶åœ¨ concatString()æ–¹æ³•å†…éƒ¨ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œsbçš„æ‰€æœ‰å¼•ç”¨ æ°¸è¿œä¸ä¼š â€œé€ƒé€¸â€ åˆ° concatString() æ–¹æ³•ä¹‹å¤–ï¼Œ<br>å…¶ä»–çº¿ç¨‹ æ— æ³•è®¿é—® åˆ° å®ƒï¼Œ<br>å› æ­¤ï¼Œè™½ç„¶è¿™é‡Œæœ‰é”ï¼Œä½†æ˜¯å¯ä»¥è¢« å®‰å…¨åœ°æ¶ˆé™¤æ‰ï¼Œ<br>åœ¨ å³æ—¶ç¼–è¯‘ ä¹‹åï¼Œè¿™æ®µä»£ç å°±ä¼šå¿½ç•¥æ‰ æ‰€æœ‰çš„åŒæ­¥å— è€Œç›´æ¥æ‰§è¡Œäº†ã€‚</p><h5 id="é”ç²—åŒ–"><a href="#é”ç²—åŒ–" class="headerlink" title="é”ç²—åŒ–"></a>é”ç²—åŒ–</h5><p>åŸåˆ™ä¸Šï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæ€»æ˜¯æ¨èå°† åŒæ­¥å—çš„ä½œç”¨èŒƒå›´ é™åˆ¶å¾— å°½é‡å°â€”â€”åªåœ¨ å…±äº«æ•°æ®çš„å®é™…ä½œç”¨åŸŸ ä¸­æ‰è¿›è¡ŒåŒæ­¥ï¼Œ<br>è¿™æ ·æ˜¯ä¸ºäº† ä½¿å¾—éœ€è¦ åŒæ­¥çš„æ“ä½œæ•°é‡ å°½å¯èƒ½ å˜å°ï¼Œ<br>å¦‚æœå­˜åœ¨ é”ç«äº‰ï¼Œé‚£ç­‰å¾… é”çš„çº¿ç¨‹ ä¹Ÿèƒ½å°½å¿«æ‹¿åˆ°é”ã€‚</p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„åŸåˆ™éƒ½æ˜¯æ­£ç¡®çš„ï¼Œ<br>ä½†æ˜¯å¦‚æœ ä¸€ç³»åˆ—çš„è¿ç»­çš„åŠ¨ä½œ éƒ½å¯¹ åŒä¸€ä¸ªå¯¹è±¡ åå¤åŠ é”å’Œè§£é”ï¼Œ<br>ç”šè‡³ åŠ é”æ“ä½œ æ˜¯å‡ºç°åœ¨ å¾ªç¯ä½“ä¸­çš„ï¼Œ<br>é‚£å³æ˜¯æ²¡æœ‰ çº¿ç¨‹ç«äº‰ï¼Œé¢‘ç¹åœ°è¿›è¡Œäº’æ–¥åŒæ­¥æ“ä½œ ä¹Ÿä¼šå¯¼è‡´ ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</p><p>ä»£ç æ¸…å•13-7ä¸­ è¿ç»­çš„append()æ–¹æ³•å°±å±äºè¿™ç±»æƒ…å†µã€‚</p><p>å¦‚æœ è™šæ‹Ÿæœº æ¢æµ‹åˆ°æœ‰è¿™æ · ä¸€ä¸²é›¶ç¢çš„æ“ä½œ éƒ½å¯¹ åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œ<br>å°†ä¼šæŠŠ åŠ é”åŒæ­¥çš„èŒƒå›´ æ‰©å±•ï¼ˆç²—åŒ–ï¼‰åˆ° æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨ï¼Œ<br>ä»¥ä»£ç æ¸…å•13-7ä¸ºä¾‹ï¼Œå°±æ˜¯æ‰©å±•åˆ°ç¬¬ä¸€ä¸ªappend()æ“ä½œä¹‹å‰ ç›´è‡³ æœ€åä¸€ä¸ªappend()æ“ä½œä¹‹åï¼Œ<br>è¿™æ ·åªéœ€è¦ åŠ é”ä¸€æ¬¡ å°±å¯ä»¥äº†ã€‚</p><h5 id="è½»é‡çº§é”"><a href="#è½»é‡çº§é”" class="headerlink" title="è½»é‡çº§é”"></a>è½»é‡çº§é”</h5><p>è½»é‡çº§é” æ˜¯ JDK1.6ä¹‹ä¸­ åŠ å…¥çš„ æ–°å‹é”æœºåˆ¶ï¼Œ<br>å®ƒåå­—ä¸­çš„ â€œè½»é‡çº§â€ æ˜¯ ç›¸å¯¹äº ä½¿ç”¨ æ“ä½œç³»ç»Ÿäº’æ–¥é‡æ¥å®ç°çš„ä¼ ç»Ÿé” è€Œè¨€çš„ï¼Œ<br>å› æ­¤ ä¼ ç»Ÿçš„é”æœºåˆ¶ å°±ç§°ä¸º â€œé‡é‡çº§â€é”ã€‚</p><p>é¦–å…ˆéœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œ è½»é‡çº§é” å¹¶ä¸æ˜¯ç”¨æ¥ ä»£æ›¿ é‡é‡çº§é” çš„ï¼Œ<br>å®ƒçš„æœ¬æ„ æ˜¯åœ¨ æ²¡æœ‰å¤šçº¿ç¨‹ç«äº‰çš„å‰æä¸‹ï¼Œ<br>å‡å°‘ ä¼ ç»Ÿçš„é‡é‡çº§é” ä½¿ç”¨ æ“ä½œç³»ç»Ÿäº’æ–¥é‡ äº§ç”Ÿçš„æ€§èƒ½æ¶ˆè€—ã€‚</p><p>è¦ç†è§£ è½»é‡çº§é”ï¼Œ<br>ä»¥åŠåé¢ä¼šè®²åˆ°çš„ åå‘é”çš„åŸç†å’Œè¿ä½œè¿‡ç¨‹ï¼Œ<br>å¿…é¡»ä» HotSpotè™šæ‹Ÿæœºçš„å¯¹è±¡ï¼ˆå¯¹è±¡å¤´éƒ¨åˆ†ï¼‰çš„å†…å­˜å¸ƒå±€å¼€å§‹ä»‹ç»ã€‚</p><p>HotSpotè™šæ‹Ÿæœºçš„å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰åˆ†ä¸ºä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œ<br>ç¬¬ä¸€éƒ¨åˆ† ç”¨äºå­˜å‚¨ å¯¹è±¡è‡ªèº«çš„ è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ã€GCåˆ†ä»£å¹´é¾„ï¼ˆGenerational GC Ageï¼‰ç­‰ï¼Œ<br>è¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦ åœ¨32ä½å’Œ64ä½çš„ è™šæ‹Ÿæœºä¸­ åˆ†åˆ«ä¸º 32bitå’Œ64bitï¼Œå®˜æ–¹ç§°å®ƒä¸º â€œMark Wordâ€ï¼Œ<br>å®ƒæ˜¯ å®ç°è½»é‡çº§é” å’Œ åå‘é” çš„ å…³é”®ã€‚</p><p>å¦ä¸€éƒ¨åˆ† ç”¨äºå­˜å‚¨ æŒ‡å‘æ–¹æ³•åŒºå¯¹è±¡ ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼Œ<br>å¦‚æœæ˜¯æ•°ç»„å¯¹è±¡çš„è¯ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„éƒ¨åˆ† ç”¨äºå­˜å‚¨ æ•°ç»„é•¿åº¦ã€‚</p><p>å¯¹è±¡å¤´ä¿¡æ¯ æ˜¯ä¸ å¯¹è±¡è‡ªèº«å®šä¹‰çš„ æ•°æ®æ— å…³çš„ é¢å¤–å­˜å‚¨æˆæœ¬ï¼Œ<br>è€ƒè™‘åˆ° è™šæ‹Ÿæœºçš„ç©ºé—´æ•ˆç‡ï¼Œ<br>Mark Word è¢«è®¾è®¡æˆä¸€ä¸ª éå›ºå®šçš„æ•°æ®ç»“æ„ ä»¥ä¾¿åœ¨ æå°çš„ç©ºé—´å†… å­˜å‚¨å°½é‡å¤šçš„ä¿¡æ¯ï¼Œ<br>å®ƒä¼šæ ¹æ®å¯¹è±¡çš„çŠ¶æ€ å¤ç”¨ è‡ªå·±çš„ å­˜å‚¨ç©ºé—´ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨32ä½çš„HotSpotè™šæ‹Ÿæœºä¸­ å¯¹è±¡æœªè¢«é”å®šçš„çŠ¶æ€ä¸‹ï¼Œ<br>Mark Wordçš„ 32bitç©ºé—´çš„ 25bit ç”¨äºå­˜å‚¨ å¯¹è±¡å“ˆå¸Œç ï¼ˆHashCodeï¼‰ï¼Œ<br>4bit ç”¨äºå­˜å‚¨ å¯¹è±¡åˆ†ä»£å¹´é¾„ï¼Œ<br>2bit ç”¨äºå­˜å‚¨ é”æ ‡å¿—ä½ï¼Œ<br>1bit å›ºå®šä¸º 0ï¼Œ<br>åœ¨å…¶ä»–çŠ¶æ€ï¼ˆè½»é‡çº§é”å®šã€é‡é‡çº§é”å®šã€GCæ ‡è®°ã€å¯åå‘ï¼‰ä¸‹ å¯¹è±¡çš„å­˜å‚¨å†…å®¹ è§è¡¨13-1ã€‚</p><table>  <thead>    <tr>      <th colspan="2">è¡¨ 13-1 HotSpotè™šæ‹Ÿæœºå¯¹è±¡å¤´ Mark Word</th>    </tr>  </thead>  <tr>    <th>å­˜å‚¨å†…å®¹</th>    <th>æ ‡å¿—ä½</th>    <th>çŠ¶æ€</th>  </tr>  <tr>    <td>å¯¹è±¡å“ˆå¸Œç ã€å¯¹è±¡åˆ†ä»£å¹´é¾„</td>    <td>01</td>    <td>æœªé”å®š</td>  </tr>    <tr>    <td>æŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆ</td>    <td>00</td>    <td>è½»é‡çº§é”å®š</td>  </tr>    <tr>    <td>æŒ‡å‘é‡é‡çº§é”çš„æŒ‡é’ˆ</td>    <td>10</td>    <td>è†¨èƒ€ï¼ˆé‡é‡çº§é”å®šï¼‰</td>  </tr>   <tr>    <td>ç©ºï¼Œä¸éœ€è¦è®°å½•ä¿¡æ¯</td>    <td>11</td>    <td>GCæ ‡è®°</td>  </tr>   <tr>    <td>åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ã€å¯¹è±¡åˆ†ä»£å¹´é¾„</td>    <td>01</td>    <td>å¯åå‘</td>  </tr></table><p>ç®€å•åœ°ä»‹ç»äº† å¯¹è±¡çš„å†…å­˜å¸ƒå±€ åï¼Œ<br>æˆ‘ä»¬æŠŠè¯é¢˜è¿”å›åˆ° è½»é‡çº§é”çš„æ‰§è¡Œè¿‡ç¨‹ä¸Šã€‚</p><p>åœ¨ä»£ç è¿›å…¥ åŒæ­¥å— çš„æ—¶å€™ï¼Œ<br>å¦‚æœæ­¤ åŒæ­¥å¯¹è±¡ æ²¡æœ‰è¢« é”å®šï¼ˆé”æ ‡å¿—ä½ ä¸ºâ€œ01â€çŠ¶æ€ï¼‰ï¼Œ<br>è™šæ‹Ÿæœº é¦–å…ˆå°† åœ¨å½“å‰çº¿ç¨‹çš„ æ ˆå¸§ ä¸­ å»ºç«‹ä¸€ä¸ªåä¸º é”è®°å½•ï¼ˆLock Recordï¼‰çš„ç©ºé—´ï¼Œ<br>ç”¨äºå­˜å‚¨ é”å¯¹è±¡ç›®å‰çš„Mark Wordçš„æ‹·è´<br>ï¼ˆå®˜æ–¹æŠŠè¿™ä»½æ‹·è´åŠ äº†ä¸€ä¸ª Displacedå‰ç¼€ï¼Œå³ Displaced Mark Wordï¼‰ï¼Œ<br>è¿™æ—¶å€™ çº¿ç¨‹å †æ ˆ ä¸ å¯¹è±¡å¤´çš„çŠ¶æ€ å¦‚å›¾13-3æ‰€ç¤ºã€‚</p><p>ç„¶åï¼Œ<br>è™šæ‹Ÿæœº å°†ä½¿ç”¨ CASæ“ä½œ å°è¯•å°† å¯¹è±¡çš„Mark Word æ›´æ–°ä¸ºæŒ‡å‘ Lock Recordçš„æŒ‡é’ˆã€‚</p><p>å¦‚æœè¿™ä¸ªæ›´æ–°åŠ¨ä½œ æˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ å°±æ‹¥æœ‰äº† è¯¥å¯¹è±¡çš„é”ï¼Œ<br>å¹¶ä¸” å¯¹è±¡Mark Word çš„ é”æ ‡å¿—ä½ï¼ˆMark Wordçš„æœ€å2bitï¼‰å°†è½¬å˜ä¸ºâ€œ00â€ï¼Œ<br>å³è¡¨ç¤ºæ­¤å¯¹è±¡å¤„äº è½»é‡çº§é”å®šçŠ¶æ€ï¼Œ<br>è¿™æ—¶å€™ çº¿ç¨‹å †æ ˆä¸å¯¹è±¡å¤´çš„çŠ¶æ€ å¦‚å›¾13-4æ‰€ç¤ºã€‚</p><blockquote><p>å›¾13-3å’Œå›¾13-4æ¥æºäº HotSpotè™šæ‹Ÿæœºçš„ä¸€ä½Senior Staff Engineerâ€”â€”Paul Hohenseeæ‰€å†™çš„PPT â€œThe Hotspot Java Virtual Machineâ€ã€‚</p></blockquote><p>å¦‚æœè¿™ä¸ªæ›´æ–°åŠ¨ä½œ å¤±è´¥äº†ï¼Œè™šæ‹Ÿæœº é¦–å…ˆä¼šæ£€æŸ¥ å¯¹è±¡çš„Mark Word æ˜¯å¦æŒ‡å‘ å½“å‰çº¿ç¨‹çš„æ ˆå¸§ï¼Œ<br>å¦‚æœåªè¯´æ˜ å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£å°±å¯ä»¥ç›´æ¥ è¿›å…¥åŒæ­¥å— ç»§ç»­æ‰§è¡Œï¼Œ<br>å¦åˆ™è¯´æ˜ è¿™ä¸ªé”å¯¹è±¡ å·²ç»è¢«å…¶ä»–çº¿ç¨‹ æŠ¢å äº†ã€‚</p><p>å¦‚æœæœ‰ä¸¤æ¡ä»¥ä¸Šçš„ çº¿ç¨‹ äº‰ç”¨åŒä¸€ä¸ªé”ï¼Œ<br>é‚£ è½»é‡çº§é” å°±ä¸å†æœ‰æ•ˆï¼Œè¦ è†¨èƒ€ ä¸º é‡é‡çº§é”ï¼Œ<br>é”æ ‡å¿— çš„ çŠ¶æ€å€¼ å˜ä¸º â€œ10â€œï¼Œ<br>Mark Wordä¸­å­˜å‚¨çš„ å°±æ˜¯æŒ‡å‘ é‡é‡çº§é”ï¼ˆäº’æ–¥é‡ï¼‰çš„æŒ‡é’ˆï¼Œ<br>åé¢ ç­‰å¾…é”çš„çº¿ç¨‹ ä¹Ÿè¦è¿›å…¥ é˜»å¡çŠ¶æ€ã€‚</p><p>ä¸Šé¢æè¿°çš„æ˜¯ è½»é‡çº§é”çš„æ·é”è¿‡ç¨‹ï¼Œ<br>å®ƒçš„ è§£é”è¿‡ç¨‹ ä¹Ÿæ˜¯é€šè¿‡ CASæ“ä½œæ¥è¿›è¡Œçš„ï¼Œ<br>å¦‚æœ å¯¹è±¡çš„Mark Word ä»ç„¶æŒ‡å‘è¿™ çº¿ç¨‹çš„é”è®°å½•ï¼Œ<br>é‚£å°±ç”¨ CASæ“ä½œ æŠŠ å¯¹è±¡çš„Mark Word å’Œ çº¿ç¨‹ä¸­å¤åˆ¶çš„Displaced Mark Wordæ›¿æ¢å›æ¥ï¼Œ<br>å¦‚æœæ›¿æ¢æˆåŠŸï¼Œæ•´ä¸ªåŒæ­¥è¿‡ç¨‹å°±å®Œæˆäº†ã€‚<br>å¦‚æœæ›¿æ¢å¤±è´¥ï¼Œè¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹ å°è¯•è¿‡è·å–è¯¥é”ï¼Œé‚£å°±è¦åœ¨é‡Šæ”¾é”çš„åŒæ—¶ï¼Œå”¤é†’è¢«æŒ‚èµ·çš„çº¿ç¨‹ã€‚</p><p>è½»é‡çº§é” èƒ½æå‡ ç¨‹åºåŒæ­¥æ€§èƒ½ çš„ä¾æ®æ˜¯ â€œå¯¹äºç»å¤§éƒ¨åˆ†çš„é”ï¼Œåœ¨æ•´ä¸ªåŒæ­¥å‘¨æœŸå†…éƒ½æ˜¯ä¸å­˜åœ¨ç«äº‰çš„â€ï¼Œ<br>è¿™æ˜¯ä¸€ä¸ªç»éªŒæ•°æ®ã€‚</p><p>å¦‚æœæ²¡æœ‰ç«äº‰ï¼Œè½»é‡çº§é”ä½¿ç”¨ CASæ“ä½œ é¿å…äº†ä½¿ç”¨ äº’æ–¥é‡çš„å¼€é”€ï¼Œ<br>ä½†å¦‚æœå­˜åœ¨ é”ç«äº‰ï¼Œé™¤äº†äº’æ–¥é‡çš„å¼€é”€ä»¥å¤–ï¼Œè¿˜é¢å¤–å‘ç”Ÿäº† CASæ“ä½œï¼Œ<br>å› æ­¤åœ¨ æœ‰ç«äº‰çš„æƒ…å†µä¸‹ï¼Œ è½»é‡çº§é” ä¼šæ¯” ä¼ ç»Ÿçš„é‡é‡çº§é” æ›´æ…¢ã€‚</p><h5 id="åå‘é”"><a href="#åå‘é”" class="headerlink" title="åå‘é”"></a>åå‘é”</h5><p>åå‘é” ä¹Ÿæ˜¯ JDK1.6 ä¸­å¼•å…¥çš„ä¸€é¡¹ é”ä¼˜åŒ–ï¼Œ<br>å®ƒçš„ç›®çš„æ˜¯ æ¶ˆé™¤æ•°æ®åœ¨æ— ç«äº‰æƒ…å†µä¸‹çš„åŒæ­¥åŸè¯­ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚</p><p>å¦‚æœè¯´ è½»é‡çº§é” æ˜¯åœ¨ æ— ç«äº‰çš„æƒ…å†µä¸‹ ä½¿ç”¨ CASæ“ä½œ å» æ¶ˆé™¤åŒæ­¥ä½¿ç”¨çš„äº’æ–¥é‡ï¼Œ<br>é‚£ åå‘é” å°±æ˜¯åœ¨ æ— ç«äº‰çš„æƒ…å†µä¸‹ æƒ³æŠŠ æ•´ä¸ªåŒæ­¥éƒ½æ¶ˆé™¤æ‰ï¼Œè¿CASæ“ä½œéƒ½ä¸åšäº†ã€‚</p><p>åå‘é”çš„ â€œåâ€ï¼Œå°±æ˜¯åå¿ƒçš„â€œåâ€ã€åè¢’çš„â€œåâ€ï¼Œ<br>å®ƒçš„æ„æ€æ˜¯ è¿™ä¸ªé” ä¼šåå‘äº ç¬¬ä¸€ä¸ª è·å¾—å®ƒçš„çº¿ç¨‹ï¼Œ<br>å¦‚æœåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é” æ²¡æœ‰è¢«å…¶ä»–çš„ çº¿ç¨‹è·å–ï¼Œåˆ™æŒæœ‰ åå‘é”çš„ çº¿ç¨‹ å°†æ°¸è¿œä¸éœ€è¦å†è¿›è¡Œ åŒæ­¥ã€‚</p><p>å¦‚æœè¯»è€…è¯»æ‡‚äº†å‰é¢ è½»é‡çº§é” ä¸­ å…³äºå¯¹è±¡å¤´Mark Wordä¸çº¿ç¨‹ä¹‹é—´ çš„ æ“ä½œè¿‡ç¨‹ï¼Œ<br>é‚£ åå‘é”çš„åŸç† ç†è§£èµ·æ¥å°±ä¼šå¾ˆç®€å•ã€‚</p><p>å‡è®¾å½“å‰ è™šæ‹Ÿæœº å¯ç”¨äº† åå‘é”ï¼ˆå¯ç”¨å‚æ•° -XX:+UseBiasedLockingï¼Œè¿™æ˜¯ JDK1.6çš„é»˜è®¤å€¼ï¼‰ï¼Œ<br>é‚£ä¹ˆï¼Œå½“ é”å¯¹è±¡ ç¬¬ä¸€æ¬¡ è¢«çº¿ç¨‹è·å–çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœº å°†ä¼šæŠŠ å¯¹è±¡å¤´ä¸­çš„ æ ‡å¿—ä½ è®¾ä¸º â€œ01â€ï¼Œå³åå‘æ¨¡å¼ã€‚</p><p>å¦‚æœä½¿ç”¨ CASæ“ä½œ æŠŠ è·å–åˆ°è¿™ä¸ªé”çš„çº¿ç¨‹çš„ID è®°å½•åœ¨ å¯¹è±¡çš„Mark Wordä¹‹ä¸­ï¼Œ<br>å¦‚æœ CASæ“ä½œ æˆåŠŸ<br>æŒæœ‰ åå‘é”çš„çº¿ç¨‹ ä»¥åæ¯æ¬¡è¿›å…¥è¿™ä¸ªé” ç›¸å…³çš„åŒæ­¥å—æ—¶ï¼Œè™šæ‹Ÿæœºéƒ½å¯ä»¥ä¸å†è¿›è¡Œ ä»»ä½•åŒæ­¥æ“ä½œ<br>ï¼ˆä¾‹å¦‚ LOckingã€Unlocking åŠå¯¹ Mark Wordçš„Update ç­‰ï¼‰ã€‚</p><p>å½“æœ‰ å¦å¤–ä¸€ä¸ªçº¿ç¨‹ å»å°è¯• è·å–è¿™ä¸ªé”æ—¶ï¼Œ<br>åå‘æ¨¡å¼ å°± å®£å‘Šç»“æŸã€‚</p><p>æ ¹æ® é”å¯¹è±¡ ç›®å‰æ˜¯å¦å¤„äº è¢«é”å®š çš„çŠ¶æ€ï¼Œ<br>æ’¤é”€ åå‘ï¼ˆRevoke Biasï¼‰å æ¢å¤åˆ° æœªé”å®šï¼ˆæ ‡å¿—ä½ä¸º â€œ01â€ï¼‰ æˆ– è½»é‡çº§é”å®šï¼ˆæ ‡å¿—ä½ä¸ºâ€œ00â€ï¼‰çš„çŠ¶æ€ï¼Œ<br>åç»­çš„åŒæ­¥æ“ä½œ å°±å¦‚ä¸Šé¢ä»‹ç»çš„ è½»é‡çº§é”é‚£æ ·æ‰§è¡Œã€‚</p><p>åå‘é”ã€è½»é‡çº§é”çš„çŠ¶æ€è½¬åŒ– åŠ å¯¹è±¡çš„Mark Wordçš„å…³ç³»å¦‚å›¾13-5 æ‰€ç¤ºã€‚</p><p>åå‘é” å¯ä»¥æé«˜ å¸¦æœ‰ åŒæ­¥ ä½† æ— ç«äº‰çš„ ç¨‹åºæ€§èƒ½ã€‚</p><p>å®ƒåŒæ ·æ˜¯ä¸€ä¸ªå¸¦æœ‰ æ•ˆç›Šæƒè¡¡ï¼ˆTrade Offï¼‰æ€§è´¨çš„ä¼˜åŒ–ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸ä¸€å®šæ€»æ˜¯å¯¹ ç¨‹åºè¿è¡Œ æœ‰åˆ©ï¼Œ<br>å¦‚æœ ç¨‹åºä¸­å¤§å¤šæ•°çš„é” æ€»æ˜¯è¢« å¤šä¸ªä¸åŒçš„çº¿ç¨‹ è®¿é—®ï¼Œ<br>é‚£ åå‘æ¨¡å¼å°±æ˜¯å¤šä½™çš„ã€‚</p><p>åœ¨å…·ä½“é—®é¢˜å…·ä½“åˆ†æçš„å‰æä¸‹ï¼Œæœ‰æ—¶å€™ä½¿ç”¨å‚æ•° -XX:-UseBiasedLocking æ¥ ç¦æ­¢åå‘é”ä¼˜åŒ– åè€Œå¯ä»¥ æå‡æ€§èƒ½ã€‚</p><h4 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h4><p>æœ¬ç« ä»‹ç»äº† çº¿ç¨‹å®‰å…¨ æ‰€æ¶‰åŠçš„ æ¦‚å¿µå’Œåˆ†ç±»ã€åŒæ­¥å®ç°çš„æ–¹å¼ åŠ è™šæ‹Ÿæœºçš„åº•å±‚è¿ä½œåŸç†ï¼Œ<br>å¹¶ä¸”ä»‹ç»äº† è™šæ‹Ÿæœº ä¸ºäº†å®ç°é«˜æ•ˆå¹¶å‘ æ‰€é‡‡å–çš„çš„ ä¸€ç³»åˆ— é”ä¼˜åŒ–æªæ–½ã€‚</p><p>è®¸å¤šèµ„æ·±çš„ç¨‹åºå‘˜éƒ½è¯´è¿‡ï¼Œèƒ½å¤Ÿå†™å‡º é«˜ä¼¸ç¼©æ€§çš„å¹¶å‘ç¨‹åº æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œ<br>è€Œ äº†è§£å¹¶å‘ åœ¨ç³»ç»Ÿåº•å±‚ æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåˆ™æ˜¯ æŒæ¡è¿™é—¨è‰ºæœ¯çš„ å‰ææ¡ä»¶ï¼Œ<br>ä¹Ÿæ˜¯æˆé•¿ä¸º é«˜çº§ç¨‹åºå‘˜çš„å¿…å¤‡çŸ¥è¯†ä¹‹ä¸€ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot;&gt;&lt;a href=&quot;#æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot; class=&quot;headerlink&quot; title=&quot;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot;&gt;&lt;/a&gt;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&lt;/h2&gt;&lt;h3 i
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="è™šæ‹Ÿæœº" scheme="https://fengshana.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</title>
    <link href="https://fengshana.github.io/2020/05/26/%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA12/"/>
    <id>https://fengshana.github.io/2020/05/26/%E3%80%90%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA%E3%80%91/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JAVA%E8%99%9A%E6%8B%9F%E6%9C%BA12/</id>
    <published>2020-05-26T14:39:02.793Z</published>
    <updated>2020-05-26T14:42:38.997Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘"><a href="#æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘" class="headerlink" title="æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘"></a>æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘</h2><h3 id="ç¬¬12ç« -Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"><a href="#ç¬¬12ç« -Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹" class="headerlink" title="ç¬¬12ç«  Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹"></a>ç¬¬12ç«  Javaå†…å­˜æ¨¡å‹ä¸çº¿ç¨‹</h3><p><strong>å¹¶å‘å¤„ç†çš„å¹¿æ³›åº”ç”¨</strong> æ˜¯ä½¿å¾— <strong>Amdah1å®šå¾‹ ä»£æ›¿ æ‘©å°”å®šå¾‹</strong> æˆä¸º<strong>è®¡ç®—æœºæ€§èƒ½å‘å±•æºåŠ¨åŠ›</strong> çš„æ ¹æœ¬åŸå› ï¼Œ ä¹Ÿæ˜¯äººç±» â€œå‹æ¦¨â€ è®¡ç®—æœºè¿ç®—èƒ½åŠ›çš„æœ€æœ‰åˆ©æ­¦å™¨ã€‚  </p><blockquote><p><strong>Amdah1å®šå¾‹</strong> ä»£æ›¿ <strong>æ‘©å°”å®šå¾‹</strong> æˆä¸º <strong>è®¡ç®—æœºæ€§èƒ½å‘å±•æºåŠ¨åŠ›</strong> çš„<strong>æ ¹æœ¬åŸå› </strong>ï¼š <strong>å¹¶å‘å¤„ç†çš„å¹¿æ³›åº”ç”¨</strong>ã€‚</p></blockquote><blockquote><p><strong>Amdah1å®šå¾‹</strong></p><ul><li>é€šè¿‡ç³»ç»Ÿä¸­ <strong>å¹¶è¡ŒåŒ–ä¸ä¸²è¡ŒåŒ–</strong> çš„ <strong>æ¯”é‡</strong> æ¥ <strong>æè¿°</strong> <strong>å¤šå¤„ç†å™¨ç³»ç»Ÿ</strong> èƒ½è·å¾—çš„ <strong>è¿ç®—åŠ é€Ÿèƒ½åŠ›</strong>ï¼›</li></ul></blockquote><blockquote><p><strong>æ‘©å°”å®šå¾‹</strong></p><ul><li>åˆ™ç”¨äº <strong>æè¿°</strong> <strong>å¤„ç†å™¨</strong> <strong>æ™¶ä½“ç®¡æ•°é‡</strong> ä¸ <strong>è¿è¡Œæ•ˆç‡</strong> ä¹‹é—´çš„<strong>å‘å±•å…³ç³»</strong>ã€‚</li></ul></blockquote><blockquote><p>è¿™ä¸¤ä¸ª<strong>å®šå¾‹</strong> çš„ <strong>æ›´æ›¿</strong> ä»£è¡¨äº†ï¼šè¿‘å¹´æ¥ <strong>ç¡¬ä»¶å‘å±•</strong> ä»è¿½æ±‚ <strong>å¤„ç†å™¨é¢‘ç‡</strong> åˆ° è¿½æ±‚ <strong>å¤šæ ¸å¿ƒå¹¶è¡Œå¤„ç†</strong> çš„<strong>å‘å±•è¿‡ç¨‹</strong>ï¼›</p></blockquote><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p><strong>å¤šä»»åŠ¡å¤„ç†</strong> åœ¨ <strong>ç°ä»£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ</strong> ä¸­ å‡ ä¹å·²æ˜¯ä¸€é¡¹å¿…å¤‡çš„æŠ€èƒ½äº†ã€‚  </p><blockquote><p><strong>ç°ä»£è®¡ç®—æœºæ“ä½œç³»ç»Ÿ</strong> ä¸­ï¼Œ<strong>å¤šä»»åŠ¡å¤„ç†</strong> å‡ ä¹å·²æ˜¯ä¸€é¡¹å¿…å¤‡çš„æŠ€èƒ½ã€‚</p></blockquote><p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè®© <strong>è®¡ç®—æœº</strong> <strong>åŒæ—¶å»åšå‡ ä»¶äº‹æƒ…</strong>ï¼Œ ä¸ä»…æ˜¯å› ä¸º <strong>è®¡ç®—æœºçš„è¿ç®—èƒ½åŠ›å¼ºå¤§</strong> äº†ï¼Œè¿˜è¦ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› æ˜¯ <strong>è®¡ç®—æœºçš„è¿ç®—é€Ÿåº¦</strong> ä¸ <strong>å®ƒçš„å­˜å‚¨å’Œé€šä¿¡å­ç³»ç»Ÿé€Ÿåº¦</strong> çš„ <strong>å·®è·å¤ªå¤§</strong>ï¼Œ<br><strong>å¤§é‡çš„æ—¶é—´</strong>éƒ½<strong>èŠ±è´¹</strong>åœ¨<strong>ç£ç›˜I/O</strong> ã€<strong>ç½‘ç»œé€šä¿¡</strong>æˆ–è€… <strong>æ•°æ®åº“è®¿é—®</strong>ä¸Šã€‚</p><blockquote><p>è®©è®¡ç®—æœºåŒæ—¶å»åšå‡ ä»¶äº‹æƒ…çš„åŸå› ï¼š</p><ul><li>è®¡ç®—æœºçš„<strong>è¿ç®—èƒ½åŠ›</strong>å¼ºå¤§</li><li>è®¡ç®—æœºçš„ <strong>è¿ç®—é€Ÿåº¦</strong> ä¸ å®ƒçš„ <strong>å­˜å‚¨å’Œé€šä¿¡å­ç³»ç»Ÿ</strong> <strong>é€Ÿåº¦</strong> çš„<strong>å·®è·å¤ªå¤§</strong>ï¼›</li><li>ä¸ºäº†<strong>é¿å…</strong>å¤§é‡çš„<strong>æ—¶é—´</strong>éƒ½<strong>èŠ±è´¹</strong>åœ¨ <strong>ç£ç›˜I/O</strong>ã€<strong>ç½‘ç»œé€šä¿¡</strong>ã€<strong>è®¿é—®æ•°æ®åº“</strong>ä¸Š;</li></ul></blockquote><p>å¦‚æœä¸å¸Œæœ› <strong>å¤„ç†å™¨</strong> åœ¨<strong>å¤§éƒ¨åˆ†æ—¶é—´</strong>é‡Œéƒ½å¤„äº <strong>ç­‰å¾…å…¶ä»–èµ„æºçš„çŠ¶æ€</strong>ï¼Œ<br>å°±å¿…é¡» ä½¿ç”¨ä¸€äº›æ‰‹æ®µ å»æŠŠ <strong>å¤„ç†å™¨çš„é¢„ç®—èƒ½åŠ›</strong> <strong>å‹æ¦¨</strong> å‡ºæ¥ï¼Œ<br>å¦åˆ™å°±ä¼š<strong>é€ æˆ</strong>å¾ˆå¤§çš„<strong>æµªè´¹</strong>ï¼Œ<br>è€Œè®©<strong>è®¡ç®—æœº</strong> <strong>åŒæ—¶å¤„ç†å‡ é¡¹ä»»åŠ¡</strong> åˆ™æ˜¯æœ€å®¹æ˜“æƒ³åˆ°ã€ä¹Ÿè¢«è¯æ˜ æ˜¯éå¸¸æœ‰æ•ˆçš„â€œå‹æ¦¨â€æ‰‹æ®µï¼›</p><blockquote><p><strong>å¤„ç†å™¨</strong> åœ¨<strong>å¤§éƒ¨åˆ†æ—¶é—´</strong>é‡Œ éƒ½å¤„äº <strong>ç­‰å¾…å…¶ä»–èµ„æºçš„çŠ¶æ€</strong></p></blockquote><blockquote><p>è§£å†³ å¤„ç†å™¨åœ¨å¤§éƒ¨åˆ†æ—¶é—´é‡Œ éƒ½å¤„äº ç­‰å¾…å…¶ä»–èµ„æºçš„çŠ¶æ€ çš„æ‰‹æ®µ or å¦‚ä½•å°† å¤„ç†å™¨çš„é¢„ç®—èƒ½åŠ› å‹æ¦¨å‡ºæ¥ï¼š</p><ul><li>è®©è®¡ç®—æœº åŒæ—¶å¤„ç†å‡ é¡¹ä»»åŠ¡ï¼ˆæœ€å®¹æ˜“æƒ³åˆ°ã€ä¹Ÿè¢«è¯æ˜æ˜¯éå¸¸æœ‰æ•ˆçš„â€œå‹æ¦¨â€æ‰‹æ®µï¼‰</li></ul></blockquote><p>é™¤äº†å……åˆ†åˆ©ç”¨ <strong>è®¡ç®—æœºå¤„ç†å™¨çš„èƒ½åŠ›</strong> å¤–ï¼Œ<strong>ä¸€ä¸ªæœåŠ¡ç«¯</strong> <strong>åŒæ—¶</strong>å¯¹ <strong>å¤šä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡</strong> åˆ™æ˜¯å¦ä¸€ä¸ªæ›´<strong>å…·ä½“çš„å¹¶å‘åº”ç”¨åœºæ™¯</strong>ã€‚</p><blockquote><p>å…·ä½“çš„<strong>å¹¶å‘åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>ä¸€ä¸ªæœåŠ¡ç«¯ åŒæ—¶å¯¹ å¤šä¸ªå®¢æˆ·ç«¯ æä¾›æœåŠ¡ã€‚</li><li>å……åˆ†åˆ©ç”¨è®¡ç®—æœºå¤„ç†å™¨çš„èƒ½åŠ›ï¼ˆè®©è®¡ç®—æœºåŒæ—¶å¤„ç†å‡ é¡¹ä»»åŠ¡ï¼‰ï¼›</li></ul></blockquote><p><strong>è¡¡é‡</strong> <strong>ä¸€ä¸ªæœåŠ¡æ€§èƒ½</strong> çš„ <strong>é«˜ä½å¥½å</strong>ï¼Œ<br><strong>æ¯ç§’äº‹åŠ¡å¤„ç†æ•°ï¼ˆTransactions Per Secondï¼Œ TPSï¼‰æ˜¯æœ€é‡è¦çš„æŒ‡æ ‡ä¹‹ä¸€</strong>ï¼Œ<br>å®ƒä»£è¡¨ç€ <strong>ä¸€ç§’å†…</strong>  <strong>æœåŠ¡ç«¯</strong> <strong>å¹³å‡</strong> <strong>èƒ½å“åº”</strong> <strong>çš„è¯·æ±‚æ€»æ•°</strong>ï¼Œ<br>è€Œ <strong>TPS å€¼</strong> ä¸ <strong>ç¨‹åºçš„ å¹¶å‘èƒ½åŠ›</strong> åˆæœ‰ éå¸¸<strong>å¯†åˆ‡</strong>çš„<strong>å…³ç³»</strong>ã€‚</p><blockquote><p><strong>æ¯ç§’äº‹åŠ¡å¤„ç†æ•°ï¼ˆTransactions Per Second ï¼ŒTPSï¼‰</strong></p><ul><li>æ¯ç§’äº‹åŠ¡å¤„ç†æ•°ï¼ˆTransactions Per Second ï¼ŒTPSï¼‰æ˜¯ <strong>è¡¡é‡</strong>ä¸€ä¸ªæœåŠ¡<strong>æ€§èƒ½é«˜ä½å¥½å</strong>çš„æœ€é‡è¦<strong>æŒ‡æ ‡</strong>ä¹‹ä¸€</li><li>æ¯ç§’äº‹åŠ¡å¤„ç†æ•°ï¼ˆTransactions Per Second ï¼ŒTPSï¼‰ ä»£è¡¨ç€ <strong>ä¸€ç§’å†… æœåŠ¡ç«¯çš„ å¹³å‡ èƒ½å“åº” çš„ è¯·æ±‚æ€»æ•°</strong>ï¼›</li><li>æ¯ç§’äº‹åŠ¡å¤„ç†æ•°ï¼ˆTransactions Per Second ï¼ŒTPSï¼‰ä¸ <strong>ç¨‹åºçš„å¹¶å‘èƒ½åŠ›</strong> æœ‰ç€éå¸¸<strong>å¯†åˆ‡</strong>çš„<strong>å…³ç³»</strong>ã€‚</li></ul></blockquote><p>å¯¹äº <strong>è®¡ç®—é‡ç›¸åŒ</strong> çš„ä»»åŠ¡ï¼Œ <strong>ç¨‹åºçº¿ç¨‹</strong> <strong>å¹¶å‘åè°ƒ</strong> å¾— è¶Š<strong>æœ‰æ¡ä¸ç´Š</strong>ï¼Œ<strong>æ•ˆç‡</strong>è‡ªç„¶å°±ä¼š<strong>æé«˜</strong>ï¼›<br>åä¹‹ï¼Œ<strong>çº¿ç¨‹ä¹‹é—´</strong> <strong>é¢‘ç¹é˜»å¡</strong> ç”šè‡³ <strong>æ­»é”</strong>ï¼Œå°†ä¼šå¤§å¤§ <strong>é™ä½</strong> <strong>ç¨‹åº</strong> çš„ <strong>å¹¶å‘èƒ½åŠ›</strong>ã€‚</p><blockquote><p>è®¡ç®—é‡ç›¸åŒçš„ä»»åŠ¡ï¼Œçº¿ç¨‹ä¹‹é—´çŠ¶æ€ä¸åŒå°†å¯¼è‡´ä¸åŒçš„ç»“æœï¼š</p><ul><li>ç¨‹åºçº¿ç¨‹ å¹¶å‘åè°ƒ æœ‰æ¡ä¸ç´Šï¼Œæ•ˆç‡æé«˜ï¼›</li><li>çº¿ç¨‹ä¹‹é—´ é¢‘ç¹é˜»å¡ ç”šè‡³ æ­»é”ï¼Œå°†ä¼šå¤§å¤§ é™ä½ ç¨‹åº çš„ å¹¶å‘ èƒ½åŠ›ï¼›</li></ul></blockquote><p><strong>æœåŠ¡ç«¯</strong> æ˜¯ javaè¯­è¨€ æœ€æ“…é•¿çš„é¢†åŸŸä¹‹ä¸€ï¼Œè¿™ä¸ªé¢†åŸŸçš„åº”ç”¨ å äº† Javaåº”ç”¨ä¸­æœ€å¤§çš„ä¸€å—ä»½é¢ï¼Œ</p><blockquote><p>å¿…é¡»ä»¥ <strong>ä»£ç çš„æ€»ä½“è§„æ¨¡</strong> æ¥<strong>è¡¡é‡</strong>ï¼Œ <strong>æœåŠ¡ç«¯åº”ç”¨</strong> <strong>ä¸èƒ½</strong>ä¸ <strong>JavaCardã€ç§»åŠ¨ç»ˆç«¯</strong> è¿™äº›é¢†åŸŸå»æ¯” <strong>ç»å¯¹æ•°é‡</strong>ã€‚</p></blockquote><p>ä¸è¿‡ å¦‚ä½•å†™å¥½ å¹¶å‘åº”ç”¨ç¨‹åº å´åˆæ˜¯ æœåŠ¡ç«¯ç¨‹åºå¼€å‘çš„éš¾ç‚¹ä¹‹ä¸€ï¼Œ å¤„ç†å¥½å¹¶å‘æ–¹é¢çš„é—®é¢˜ é€šå¸¸éœ€è¦æ›´å¤šçš„ ç¼–ç ç»éªŒ æ¥æ”¯æŒã€‚  </p><blockquote><p><strong>æœåŠ¡ç«¯ é¢†åŸŸçš„åº”ç”¨</strong> å ç”¨äº†javaåº”ç”¨ ä¸­æœ€å¤§çš„ä¸€å—ä»½é¢ã€‚<br>æœåŠ¡ç«¯ ç¨‹åºå¼€å‘çš„éš¾ç‚¹ä¹‹ä¸€ï¼šå¦‚ä½•å†™å¥½ å¹¶å‘åº”ç”¨ç¨‹åºï¼›<br>å¤„ç†å¥½å¹¶å‘æ–¹é¢çš„é—®é¢˜ï¼šé€šå¸¸éœ€è¦æ›´å¤šçš„ ç¼–ç ç»éªŒ æ¥æ”¯æŒï¼›</p></blockquote><p>å¹¸å¥½ <strong>javaè¯­è¨€å’Œè™šæ‹Ÿæœº</strong> æä¾›äº†è®¸å¤šå·¥å…·ï¼ŒæŠŠ <strong>å¹¶å‘ç¼–ç¨‹</strong> çš„é—¨æ§› é™ä½äº†ä¸å°‘ã€‚<br>å¹¶ä¸”å„ç§ <strong>ä¸­é—´ä»¶æœåŠ¡å™¨</strong>ã€<strong>å„ç±»æ¡†æ¶</strong> éƒ½åŠªåŠ›åœ°æ›¿ç¨‹åºå‘˜ <strong>å¤„ç†å°½å¯èƒ½å¤šçš„çº¿ç¨‹å¹¶å‘ç»†èŠ‚</strong>ï¼Œ<br>ä½¿å¾—ç¨‹åºå‘˜ åœ¨ç¼–ç æ—¶èƒ½ <strong>æ›´å…³æ³¨ä¸šåŠ¡é€»è¾‘</strong>ï¼Œ<br>è€Œ <strong>ä¸æ˜¯èŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´</strong>å» <strong>å…³æ³¨æ­¤æœåŠ¡</strong> <strong>ä¼šåŒæ—¶è¢«å¤šå°‘äººè°ƒç”¨</strong>ã€<strong>å¦‚ä½•åè°ƒç¡¬ä»¶èµ„æº</strong>ã€‚</p><blockquote><p>javaè¯­è¨€å’Œè™šæ‹Ÿæœº æä¾›çš„è®¸å¤š å·¥å…·ï¼Œé™ä½äº† å¹¶å‘ç¼–ç¨‹ çš„ é—¨æ§›ã€‚<br>å„ç§ä¸­é—´ä»¶æœåŠ¡å™¨ã€å„ç±»æ¡†æ¶çš„å¥½å¤„ï¼š</p><ul><li>å„ç§ ä¸­é—´ä»¶æœåŠ¡å™¨ã€å„ç±»æ¡†æ¶ å¤„ç†å°½å¯èƒ½å¤šçš„çº¿ç¨‹å¹¶å‘ç»†èŠ‚ï¼›</li><li>ç¨‹åºå‘˜èƒ½å¤Ÿå…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œé¿å…èŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´å» å…³æ³¨æ­¤æœåŠ¡ ä¼šåŒæ—¶è¢«å¤šå°‘äººè°ƒç”¨ã€å¦‚ä½•åè°ƒç¡¬ä»¶èµ„æºç­‰</li></ul></blockquote><p>æ— è®º<strong>è¯­è¨€ã€ä¸­é—´ä»¶å’Œæ¡†æ¶</strong> å¦‚ä½•å…ˆè¿›ï¼Œå¼€å‘äººå‘˜éƒ½<strong>ä¸èƒ½æœŸæœ› å®ƒä»¬èƒ½ç‹¬ç«‹å®Œæˆæ‰€æœ‰å¹¶å‘å¤„ç†çš„äº‹æƒ…</strong>ï¼Œäº†è§£ å¹¶å‘çš„å†…å¹• ä¹Ÿæ˜¯ ç§°ä¸ºä¸€ä¸ªé«˜çº§ç¨‹åºå‘˜ ä¸å¯ç¼ºå°‘çš„è¯¾ç¨‹ã€‚<br>ï¼ˆğŸ™ƒå°½ç®¡æˆ‘æ˜¯å¦‚æ­¤åƒåœ¾ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶çƒ­çˆ±â€”â€“ä¸ªå±ğŸ™ƒï¼‰</p><blockquote><p>ä¸èƒ½å»æœŸæœ› æŸç§è¯­è¨€ã€ä¸­é—´ä»¶æˆ–è€…æ¡†æ¶ èƒ½å¤Ÿç‹¬ç«‹å®Œæˆæ‰€æœ‰å¹¶å‘å¤„ç†çš„äº‹æƒ…ã€‚</p></blockquote><p>â€œ<strong>é«˜æ•ˆå¹¶å‘</strong>â€ æ˜¯æœ¬ä¹¦ è®²è§£javaè™šæ‹Ÿæœºçš„æœ€åä¸€éƒ¨åˆ†ï¼Œ<br>å°†ä¼šå‘è¯»è€…ä»‹ç»  <strong>è™šæ‹Ÿæœº</strong>  å¦‚ä½•å®ç° <strong>å¤šçº¿ç¨‹ã€å¤šçº¿ç¨‹ä¹‹é—´</strong> ç”±äº <strong>å…±äº«</strong> å’Œ <strong>ç«äº‰æ•°æ®</strong> è€Œ <strong>å¯¼è‡´çš„</strong> ä¸€ç³»åˆ— <strong>é—®é¢˜</strong> åŠ <strong>è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p><h4 id="ç¡¬ä»¶çš„æ•ˆç‡-ä¸-ä¸€è‡´æ€§"><a href="#ç¡¬ä»¶çš„æ•ˆç‡-ä¸-ä¸€è‡´æ€§" class="headerlink" title="ç¡¬ä»¶çš„æ•ˆç‡ ä¸ ä¸€è‡´æ€§"></a>ç¡¬ä»¶çš„æ•ˆç‡ ä¸ ä¸€è‡´æ€§</h4><p>åœ¨æ­£å¼è®²è§£ <strong>javaè™šæ‹Ÿæœºå¹¶å‘ç›¸å…³</strong> çš„çŸ¥è¯†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆèŠ±è´¹ä¸€ç‚¹æ—¶é—´å»äº†è§£ä¸€ä¸‹ <strong>ç‰©ç†è®¡ç®—æœº</strong>ä¸­çš„ <strong>å¹¶å‘é—®é¢˜</strong>ï¼Œ<br><strong>ç‰©ç†æœº</strong>é‡åˆ°çš„ <strong>å¹¶å‘é—®é¢˜</strong> ä¸ <strong>è™šæ‹Ÿæœºä¸­çš„æƒ…å†µ</strong> æœ‰ä¸å°‘<strong>ç›¸ä¼¼</strong>ä¹‹å¤„ï¼Œ<br><strong>ç‰©ç†æœº</strong> å¯¹ <strong>å¹¶å‘çš„å¤„ç†æ–¹æ¡ˆ</strong> å¯¹äº <strong>è™šæ‹Ÿæœºçš„å®ç°</strong> ä¹Ÿæœ‰ç›¸å½“å¤§çš„å‚è€ƒæ„ä¹‰ã€‚</p><blockquote><p>ç‰©ç†æœºä¸è™šæ‹Ÿæœº</p><ul><li>ç‰©ç†æœº é‡åˆ°çš„ å¹¶å‘é—®é¢˜ ä¸ è™šæ‹Ÿæœºä¸­çš„æƒ…å†µ æœ‰ä¸å°‘ç›¸ä¼¼ä¹‹å¤„ï¼›</li><li>ç‰©ç†æœº å¯¹ å¹¶å‘çš„å¤„ç†æ–¹æ¡ˆ å¯¹äº è™šæ‹Ÿæœºçš„å®ç° ä¹Ÿæœ‰ç›¸å½“å¤§çš„å‚è€ƒæ„ä¹‰ã€‚</li></ul></blockquote><p>â€œè®© <strong>è®¡ç®—æœº</strong> <strong>å¹¶å‘æ‰§è¡Œ</strong> <strong>è‹¥å¹²ä¸ª</strong> <strong>è¿ç®—ä»»åŠ¡</strong>â€ ä¸ â€œæ›´<strong>å……åˆ†</strong> åœ° <strong>åˆ©ç”¨</strong> <strong>è®¡ç®—æœºå¤„ç†å™¨çš„æ•ˆèƒ½</strong>â€ ä¹‹é—´çš„å› æœå…³ç³»ï¼Œçœ‹èµ·æ¥é¡ºç†æˆç« ï¼Œ<br>å®é™…ä¸Šä»–ä»¬ä¹‹é—´çš„å…³ç³» å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆç®€å•ï¼Œ<br>å…¶ä¸­ä¸€ä¸ª é‡è¦çš„<strong>å¤æ‚æ€§</strong> æ¥æºæ˜¯ ç»å¤§å¤šæ•°çš„ <strong>è¿ç®—ä»»åŠ¡</strong> éƒ½ <strong>ä¸å¯èƒ½</strong> <strong>åªé </strong> <strong>å¤„ç†å™¨â€œè®¡ç®—â€</strong> å°±èƒ½å®Œæˆï¼Œ<br><strong>å¤„ç†å™¨</strong> è‡³å°‘ è¦ä¸ <strong>å†…å­˜äº¤äº’</strong>ï¼Œ<br>å¦‚è¯»å–è¿ç®—æ•°æ®ã€å­˜å‚¨è¿ç®—ç»“æœç­‰ï¼Œ<br>è¿™ä¸ª<strong>I/O</strong>æ“ä½œæ˜¯å¾ˆ<strong>éš¾æ¶ˆé™¤</strong>çš„<br>ï¼ˆ<strong>æ— æ³•ä»…é å¯„å­˜å™¨</strong>æ¥<strong>å®Œæˆ</strong>æ‰€æœ‰è¿ç®—<strong>ä»»åŠ¡</strong>ï¼‰ã€‚  </p><p>ç”±äº <strong>è®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡</strong> ä¸ <strong>å¤„ç†å™¨çš„è¿ç®—é€Ÿåº¦</strong> æœ‰å‡ ä¸ªæ•°é‡çº§çš„å·®è·ï¼Œ<br>æ‰€ä»¥ <strong>ç°ä»£è®¡ç®—æœºç³»ç»Ÿ</strong> éƒ½ä¸å¾—ä¸åŠ å…¥ ä¸€å±‚ <strong>è¯»å†™é€Ÿåº¦</strong> <strong>å°½å¯èƒ½æ¥è¿‘</strong> <strong>å¤„ç†å™¨è¿ç®—é€Ÿåº¦</strong> çš„ <strong>é«˜é€Ÿç¼“å­˜ï¼ˆCacheï¼‰</strong> æ¥ä½œä¸º <strong>å†…å­˜ä¸å¤„ç†å™¨</strong> ä¹‹é—´çš„<strong>ç¼“å†²</strong>ï¼š<br>å°†è¿ç®—éœ€è¦ä½¿ç”¨çš„<strong>æ•°æ®</strong> <strong>å¤åˆ¶</strong>åˆ° <strong>ç¼“å­˜</strong>ä¸­ï¼Œ<br>è®©<strong>è¿ç®—</strong>èƒ½<strong>å¿«é€Ÿè¿›è¡Œ</strong>ï¼Œ<br>å½“<strong>è¿ç®—ç»“æŸ</strong>å å†ä» <strong>ç¼“å­˜</strong> <strong>åŒæ­¥</strong>å› <strong>å†…å­˜</strong>ä¹‹ä¸­ï¼Œ<br>è¿™æ · <strong>å¤„ç†å™¨</strong> å°± <strong>æ— éœ€ç­‰å¾…</strong> ç¼“æ…¢çš„ <strong>å†…å­˜è¯»å†™</strong> äº†ã€‚</p><blockquote><p>â€œè®©è®¡ç®—æœº å¹¶å‘æ‰§è¡Œ è‹¥å¹²ä¸ªè¿ç®—ä»»åŠ¡â€ ä¸ â€œæ›´å……åˆ†åœ°åˆ©ç”¨è®¡ç®—æœºå¤„ç†å™¨çš„æ•ˆèƒ½â€ä¹‹é—´å› æœå…³ç³»çš„å¤æ‚æ€§æ¥æº</p><ol><li>ç»å¤§å¤šæ•°çš„è¿ç®—ä»»åŠ¡éƒ½ä¸å¯èƒ½åªé  å¤„ç†å™¨â€œè®¡ç®—â€ å°±èƒ½å®Œæˆ</li><li>å¤„ç†å™¨ è‡³å°‘ è¦ä¸ å†…å­˜äº¤äº’ï¼ˆå¦‚è¯»å–è¿ç®—æ•°æ®ã€å­˜å‚¨è¿ç®—ç»“æœç­‰ï¼‰ï¼›è¿™ä¸ªI/Oæ“ä½œæ˜¯å¾ˆéš¾æ¶ˆé™¤çš„ï¼›</li><li>æ— æ³•ä»…é å¯„å­˜å™¨æ¥å®Œæˆæ‰€æœ‰è¿ç®—ä»»åŠ¡ï¼›</li><li>è®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ ä¸ å¤„ç†å™¨çš„è¿ç®—é€Ÿåº¦ æœ‰å‡ ä¸ªæ•°é‡çº§çš„ å·®è·ã€‚</li><li>ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­åŠ å…¥äº† ä¸€å±‚ (è¯»å†™é€Ÿåº¦å°½å¯èƒ½æ¥è¿‘å¤„ç†å™¨è¿ç®—é€Ÿåº¦) çš„ é«˜é€Ÿç¼“å­˜ï¼ˆCacheï¼‰ æ¥ä½œä¸º <strong>å†…å­˜ä¸å¤„ç†å™¨ä¹‹é—´çš„ç¼“å†²</strong>ï¼š<ul><li>å°† è¿ç®— æ‰€éœ€è¦ä½¿ç”¨åˆ°çš„ æ•°æ® å¤åˆ¶åˆ° ç¼“å­˜ ä¸­ï¼›</li><li>è®©è¿ç®—èƒ½å¿«é€Ÿè¿›è¡Œï¼›</li><li>å½“è¿ç®—ç»“æŸåï¼Œå†ä» ç¼“å­˜ åŒæ­¥ å› å†…å­˜ ä¹‹ä¸­ï¼›</li><li>è¿™æ ·å¤„ç†å™¨ å°±æ— éœ€ç­‰å¾… ç¼“æ…¢çš„ å†…å­˜è¯»å†™ äº†ï¼›</li></ul></li></ol></blockquote><p>åŸºäº <strong>é«˜é€Ÿç¼“å­˜</strong> çš„ <strong>å­˜å‚¨äº¤äº’</strong> å¾ˆå¥½åœ°è§£å†³äº† <strong>å¤„ç†å™¨ ä¸ å†…å­˜ çš„é€Ÿåº¦çŸ›ç›¾</strong>ï¼Œ<br>ä½†æ˜¯ä¹Ÿä¸º è®¡ç®—æœºç³»ç»Ÿ å¸¦æ¥æ›´é«˜çš„<strong>å¤æ‚åº¦</strong>ï¼Œ<br>å› ä¸ºå®ƒå¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š <strong>ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰</strong>ã€‚  </p><blockquote><p>é«˜é€Ÿç¼“å­˜ çš„ å­˜å‚¨äº¤äº’ ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šè§£å†³äº† å¤„ç†å™¨ä¸å†…å­˜ ä¹‹é—´çš„ é€Ÿåº¦çŸ›ç›¾ï¼›</li><li>ç¼ºç‚¹ï¼šå¸¦æ¥äº†æ–°é—®é¢˜-ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰</li></ul></blockquote><p>åœ¨ <strong>å¤šå¤„ç†å™¨ç³»ç»Ÿ</strong> ä¸­ï¼Œæ¯ä¸ª <strong>å¤„ç†å™¨</strong> éƒ½æœ‰ è‡ªå·±çš„ <strong>é«˜é€Ÿç¼“å­˜</strong>ï¼Œè€Œå®ƒä»¬åˆ <strong>å…±äº«</strong> <strong>åŒä¸€ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰</strong>ã€‚</p><p>å½“ <strong>å¤šä¸ªå¤„ç†å™¨çš„è¿ç®—ä»»åŠ¡</strong> éƒ½è®¾è®¡ <strong>åŒä¸€å—</strong> <strong>ä¸»å†…å­˜åŒºåŸŸ</strong> æ—¶ï¼Œ<br> å°†å¯èƒ½å¯¼è‡´ <strong>å„è‡ªçš„ç¼“å­˜æ•°æ®ä¸ä¸€è‡´</strong>ï¼Œ<br> å¦‚æœçœŸçš„å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œé‚£åŒæ­¥å›åˆ° ä¸»å†…å­˜æ—¶ ä»¥è°çš„ç¼“å­˜æ•°æ®ä¸ºå‡†å‘¢ï¼Ÿ  </p><p>ä¸ºäº†<strong>è§£å†³ä¸€è‡´æ€§çš„é—®é¢˜</strong>ï¼Œ<br>éœ€è¦ å„ä¸ª <strong>å¤„ç†å™¨</strong> <strong>è®¿é—®ç¼“å­˜</strong> æ—¶ éƒ½ <strong>éµå¾ª</strong> ä¸€äº› <strong>åè®®</strong>ï¼Œ<br>åœ¨<strong>è¯»å†™</strong>æ—¶ è¦<strong>æ ¹æ®åè®®</strong> æ¥è¿›è¡Œ<strong>æ“ä½œ</strong>ï¼Œ<br>è¿™ç±»åè®®æœ‰ MSIã€MESIï¼ˆIllinois Protoclï¼‰ã€MOSIã€Synapseã€Firefly åŠ Dragon Protocol ç­‰ã€‚  </p><p>åœ¨æœ¬ç« ä¸­å°†ä¼šå¤šæ¬¡æåˆ°çš„ â€œ<strong>å†…å­˜æ¨¡å‹</strong>â€ ä¸€è¯ï¼Œ<br>å¯ä»¥ç†è§£ä¸º åœ¨<strong>ç‰¹å®šçš„æ“ä½œåè®®</strong>ä¸‹ï¼Œå¯¹ <strong>ç‰¹å®šçš„å†…å­˜æˆ–é«˜é€Ÿç¼“å­˜</strong> è¿›è¡Œ <strong>è¯»å†™è®¿é—®çš„è¿‡ç¨‹æŠ½è±¡</strong>ã€‚  </p><p><strong>ä¸åŒæ¶æ„çš„ç‰©ç†æœºå™¨</strong> å¯ä»¥æ‹¥æœ‰ <strong>ä¸ä¸€æ ·çš„å†…å­˜æ¨¡å‹</strong>ï¼Œ<br>è€Œ <strong>javaè™šæ‹Ÿæœº</strong> ä¹Ÿæœ‰è‡ªå·±çš„<strong>å†…å­˜æ¨¡å‹</strong>ï¼Œ<br>å¹¶ä¸”è¿™é‡Œä»‹ç»çš„ <strong>å†…å­˜è®¿é—®æ“ä½œ</strong> ä¸ <strong>ç¡¬ä»¶çš„ç¼“å­˜è®¿é—®æ“ä½œ</strong>å…·æœ‰å¾ˆé«˜çš„<strong>å¯æ¯”æ€§</strong>ã€‚</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---------               -----------                ----------------               ------</span><br><span class="line">|<span class="string"> å¤„ç†å™¨ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> é«˜é€Ÿç¼“å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">      ç¼“å­˜     </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> ä¸» </span>|</span><br><span class="line">---------               -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">---------               -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">|<span class="string"> å¤„ç†å™¨ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> é«˜é€Ÿç¼“å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">     ä¸€è‡´æ€§    </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> å†… </span>|</span><br><span class="line">---------               -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">---------               -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">|<span class="string"> å¤„ç†å™¨ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> é«˜é€Ÿç¼“å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">      åè®®     </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> å­˜ </span>|</span><br><span class="line">---------               -----------                ----------------               ------</span><br></pre></td></tr></table></figure><p>é™¤äº† <strong>å¢åŠ </strong> <strong>é«˜é€Ÿç¼“å­˜</strong> ä¹‹å¤–ï¼Œ<br>ä¸ºäº†ä½¿å¾— <strong>å¤„ç†å™¨å†…éƒ¨ çš„ è¿ç®—å•ä½</strong> èƒ½å°½é‡è¢« <strong>å……åˆ†ä½¿ç”¨</strong>ï¼Œ<br><strong>å¤„ç†å™¨</strong> å¯èƒ½ä¼šå¯¹ <strong>è¾“å…¥ä»£ç </strong> è¿›è¡Œ <strong>ä¹±åºæ‰§è¡Œï¼ˆOut-Of-Order Executionï¼‰ä¼˜åŒ–</strong>ï¼Œ<br><strong>å¤„ç†å™¨</strong> ä¼šåœ¨ <strong>è®¡ç®—ä¹‹å</strong> å°†<strong>ä¹±åºæ‰§è¡Œçš„ç»“æœ</strong> <strong>é‡ç»„</strong>ï¼Œ<br>ä¿è¯ <strong>è¯¥ç»“æœ ä¸ é¡ºåºæ‰§è¡Œ çš„ç»“æœæ˜¯ä¸€è‡´çš„</strong>ï¼Œ<br>ä½† <strong>å¹¶ä¸ä¿è¯ ç¨‹åºä¸­ å„ä¸ªè¯­å¥ è®¡ç®—çš„å…ˆåé¡ºåº ä¸ è¾“å…¥ä»£ç ä¸­çš„é¡ºåº ä¸€è‡´</strong>ï¼Œ<br>å› æ­¤ ï¼Œ<br>å¦‚æœ<strong>å­˜åœ¨ ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ ä¾èµ– å¦å¤–ä¸€ä¸ª è®¡ç®—ä»»åŠ¡çš„ ä¸­é—´ç»“æœ</strong>ï¼Œ<br>é‚£ä¹ˆå…¶ <strong>é¡ºåºæ€§å¹¶ä¸èƒ½é  ä»£ç çš„å…ˆåé¡ºåº æ¥ä¿è¯</strong>ã€‚  </p><p>ä¸ <strong>å¤„ç†å™¨çš„ä¹±åºæ‰§è¡Œä¼˜åŒ–</strong> ç±»ä¼¼ï¼Œ<br><strong>javaè™šæ‹Ÿæœº</strong> çš„ <strong>å³æ—¶ç¼–è¯‘å™¨</strong> ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ <strong>æŒ‡ä»¤é‡æ’åºï¼ˆInstruction Reorderï¼‰ä¼˜åŒ–</strong>ã€‚</p><blockquote><p>å¤„ç†å™¨å†…éƒ¨ çš„ è¿ç®—å•ä½ï¼Œå¦‚ä½•å°½å¯èƒ½è¢« å……åˆ†åˆ©ç”¨ï¼Ÿ</p><ul><li>å¢åŠ é«˜é€Ÿç¼“å­˜</li><li>ä¹±åºæ‰§è¡Œï¼ˆOut-Of-Order Executionï¼‰ä¼˜åŒ–<ul><li>å¤„ç†å™¨ å¯èƒ½ä¼šå¯¹ è¾“å…¥ä»£ç  è¿›è¡Œ ä¹±åºæ‰§è¡Œï¼ˆOut-Of-Order Executionï¼‰ä¼˜åŒ–</li><li>å¤„ç†å™¨ ä¼šåœ¨ è®¡ç®—ä¹‹å å°† ä¹±åºæ‰§è¡Œçš„ç»“æœ é‡ç»„</li><li>ä¿è¯ è¯¥ç»“æœ ä¸ é¡ºåºæ‰§è¡Œ çš„ç»“æœ æ˜¯ä¸€è‡´çš„ï¼›</li><li>ä½†å¹¶ ä¸ä¿è¯ ç¨‹åºä¸­å„ä¸ªè¯­å¥è®¡ç®—çš„å…ˆåé¡ºåº ä¸ è¾“å…¥ä»£ç ä¸­çš„é¡ºåº ä¸€è‡´ï¼›</li><li>å¦‚æœå­˜åœ¨ ä¸€ä¸ªè®¡ç®—ä»»åŠ¡ ä¾èµ– å¦å¤–ä¸€ä¸ªè®¡ç®—ä»»åŠ¡çš„ ä¸­é—´ç»“æœï¼Œé‚£ä¹ˆå…¶é¡ºåºæ€§ å¹¶ä¸èƒ½ä¾é  ä»£ç çš„å…ˆåé¡ºåº æ¥ä¿è¯ã€‚</li></ul></li></ul></blockquote><h4 id="Javaå†…å­˜æ¨¡å‹"><a href="#Javaå†…å­˜æ¨¡å‹" class="headerlink" title="Javaå†…å­˜æ¨¡å‹"></a>Javaå†…å­˜æ¨¡å‹</h4><p><strong>Javaè™šæ‹Ÿæœºè§„èŒƒ</strong> ä¸­è¯•å›¾å®šä¹‰ä¸€ç§  <strong>Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰</strong><br>æ¥ <strong>å±è”½æ‰</strong> å„ç§ <strong>ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿ</strong> çš„ <strong>å†…å­˜è®¿é—®å·®å¼‚</strong>ï¼Œ<br>ä»¥ <strong>å®ç°</strong> è®© <strong>Javaç¨‹åº</strong> åœ¨ <strong>å„ç§å¹³å°</strong> ä¸‹éƒ½èƒ½è¾¾åˆ°<strong>ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœ</strong>ã€‚</p><blockquote><p>æœ¬ä¹¦ä¸­çš„ Javaå†…å­˜æ¨¡å‹ éƒ½ç‰¹æŒ‡ ç›®å‰æ­£åœ¨ä½¿ç”¨çš„ï¼Œå³åœ¨ JDK1.2 ä¹‹åå»ºç«‹èµ·æ¥å¹¶åœ¨ JDK1.5 ä¸­å®Œå¤‡è¿‡çš„å†…å­˜æ¨¡å‹ã€‚</p></blockquote><p>åœ¨æ­¤ä¹‹å‰ï¼Œä¸»æµç¨‹åºè¯­è¨€ï¼ˆC/C++ç­‰ï¼‰ <strong>ç›´æ¥ä½¿ç”¨</strong> <strong>ç‰©ç†ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜æ¨¡å‹</strong>ï¼Œ<br>å› æ­¤ï¼Œä¼šç”±äº<strong>ä¸åŒå¹³å°ä¸Šå†…å­˜æ¨¡å‹çš„å·®å¼‚</strong>ï¼Œæœ‰å¯èƒ½å¯¼è‡´ç¨‹åºåœ¨ä¸€å¥—å¹³å°ä¸Šå¹¶å‘å®Œå…¨<strong>æ­£å¸¸</strong>ï¼Œè€Œåœ¨å¦å¤–ä¸€å¥—å¹³å°ä¸Šå¹¶å‘è®¿é—®å´ç»å¸¸<strong>å‡ºé”™</strong>ï¼Œå› æ­¤åœ¨æŸäº›åœºæ™¯å°±å¿…é¡»é’ˆå¯¹ä¸åŒçš„å¹³å°æ¥ç¼–å†™ç¨‹åºã€‚</p><p><strong>å®šä¹‰Javaå†…å­˜æ¨¡å‹</strong> å¹¶éä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œ<br>è¿™ä¸ªæ¨¡å‹å¿…é¡»å®šä¹‰å¾—<strong>è¶³å¤Ÿä¸¥è°¨</strong>ï¼Œæ‰èƒ½è®©Javaçš„ <strong>å¹¶å‘å†…å­˜è®¿é—®æ“ä½œ</strong> <strong>ä¸ä¼šäº§ç”Ÿæ­§ä¹‰</strong>ï¼›<br>ä½†æ˜¯ï¼Œä¹Ÿå¿…é¡»å®šä¹‰å¾—<strong>è¶³å¤Ÿå®½æ¾</strong>ï¼Œä½¿å¾— è™šæ‹Ÿæœºçš„å®ç° æœ‰è¶³å¤Ÿçš„è‡ªç”±ç©ºé—´ å»åˆ©ç”¨ ç¡¬ä»¶çš„å„ç§ç‰¹æ€§ï¼ˆå¯„å­˜å™¨ã€é«˜é€Ÿç¼“å­˜å’ŒæŒ‡ä»¤é›†ä¸­æŸäº›ç‰¹æœ‰çš„æŒ‡ä»¤ï¼‰æ¥ è·å– æ›´å¥½çš„æ‰§è¡Œé€Ÿåº¦ã€‚<br>ç»è¿‡é•¿æ—¶é—´çš„éªŒè¯å’Œä¿®è¡¥ï¼Œåœ¨ JDK1.5ï¼ˆå®ç°äº†JSR-133ï¼‰å‘å¸ƒåï¼ŒJavaå†…å­˜æ¨¡å‹å·²ç»æˆç†Ÿå’Œå®Œå–„èµ·æ¥äº†ã€‚</p><blockquote><p>JSR-133ï¼šJava Memory Model and Thread Specification Revision ï¼ˆJavaå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹è§„èŒƒä¿®è®¢ï¼‰ã€‚</p></blockquote><h5 id="ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"><a href="#ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜" class="headerlink" title="ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"></a>ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜</h5><p>Javaå†…å­˜æ¨¡å‹ çš„ ä¸»è¦ç›®æ ‡ æ˜¯ å®šä¹‰ç¨‹åºä¸­ å„ä¸ªå˜é‡çš„ è®¿é—®è§„åˆ™ï¼Œå³åœ¨ è™šæ‹Ÿæœºä¸­ å°† å˜é‡å­˜å‚¨åˆ°å†…å­˜ å’Œ ä»å†…å­˜ä¸­å–å‡ºå˜é‡ è¿™æ ·çš„åº•å±‚ç»†èŠ‚ã€‚  </p><p>æ­¤å¤„çš„ å˜é‡ï¼ˆVariablesï¼‰ä¸Javaç¼–ç¨‹ä¸­æ‰€è¯´çš„å˜é‡ æœ‰åŒºåˆ«ï¼Œå®ƒ åŒ…æ‹¬äº† å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå’Œæ„æˆæ•°ç»„å¯¹è±¡çš„å…ƒç´ ï¼Œä½†ä¸åŒ…æ‹¬ å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œ<br>å› ä¸ºåè€…æ˜¯ çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸ä¼šè¢«å…±äº«ï¼Œè‡ªç„¶å°±ä¸ä¼šå­˜åœ¨ç«äº‰é—®é¢˜ã€‚</p><blockquote><p>æ­¤å¤„è¯·è¯»è€…æ³¨æ„åŒºåˆ†æ¦‚å¿µï¼š<br>å¦‚æœ å±€éƒ¨å˜é‡ æ˜¯ä¸€ä¸ª reference ç±»å‹ï¼Œå®ƒ å¼•ç”¨çš„å¯¹è±¡ åœ¨ Javaå †ä¸­ å¯è¢« å„ä¸ªçº¿ç¨‹å…±äº«ï¼Œä½†æ˜¯ reference æœ¬èº«åœ¨ Javaæ ˆçš„ å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œå®ƒæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚</p></blockquote><p>ä¸ºäº†è·å¾—è¾ƒå¥½çš„ æ‰§è¡Œæ•ˆèƒ½ï¼ŒJavaå†…å­˜æ¨¡å‹ å¹¶æ²¡æœ‰é™åˆ¶ æ‰§è¡Œå¼•æ“ ä½¿ç”¨å¤„ç†å™¨çš„ ç‰¹å®šå¯„å­˜å™¨ æˆ– ç¼“å­˜ æ¥å’Œä¸»å†…å­˜è¿›è¡Œäº¤äº’ï¼Œä¹Ÿæ²¡æœ‰é™åˆ¶ å³æ—¶ç¼–è¯‘å™¨ è¿›è¡Œè°ƒæ•´ä»£ç æ‰§è¡Œé¡ºåº è¿™ç±»ä¼˜åŒ–æªæ–½ã€‚</p><p>Javaå†…å­˜æ¨¡å‹ è§„å®šäº† æ‰€æœ‰çš„å˜é‡ éƒ½ å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ä¸­ï¼ˆæ­¤å¤„çš„ ä¸»å†…å­˜ ä¸ä»‹ç» ç‰©ç†ç¡¬ä»¶æ—¶çš„ä¸»å†…å­˜ åå­—ä¸€æ ·ï¼Œä¸¤è€…ä¹Ÿå¯ä»¥äº’ç›¸ç±»æ¯”ï¼Œä½† æ­¤å¤„ä»…æ˜¯ è™šæ‹Ÿæœºå†…å­˜ çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚</p><p>æ¯æ¡çº¿ç¨‹ è¿˜æœ‰è‡ªå·±çš„ å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼Œ å¯ä¸å‰é¢è®²çš„ å¤„ç†å™¨é«˜é€Ÿç¼“å­˜ ç±»æ¯”ï¼‰ï¼Œçº¿ç¨‹ çš„ å·¥ä½œå†…å­˜ ä¸­ ä¿å­˜äº† è¢«è¯¥çº¿ç¨‹ ä½¿ç”¨åˆ°çš„ å˜é‡ çš„ ä¸»å†…å­˜ å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹ å¯¹ å˜é‡ çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ã€èµ‹å€¼ç­‰ï¼‰ éƒ½ å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œ è€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚  </p><blockquote><p>æœ‰ä¸å°‘è¯»è€…ä¼šå¯¹è¿™æ®µæè¿°ä¸­çš„ â€œæ‹·è´å‰¯æœ¬â€ æå‡ºç–‘é—®ï¼Œ<br>å¦‚ â€œå‡è®¾çº¿ç¨‹ä¸­è®¿é—®ä¸€ä¸ª10MBçš„å¯¹è±¡ï¼Œä¹Ÿä¼šæŠŠè¿™10MBçš„å†…å­˜å¤åˆ¶ä¸€ä»½æ‹·è´å‡ºæ¥å—ï¼Ÿâ€<br>äº‹å®ä¸Šå¹¶ä¸ä¼šå¦‚æ­¤ï¼Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€å¯¹è±¡ä¸­æŸä¸ªåœ¨çº¿ç¨‹è®¿é—®åˆ°çš„å­—æ®µ æ˜¯æœ‰å¯èƒ½å­˜åœ¨æ‹·è´çš„ï¼Œä½† ä¸ä¼šæœ‰ è™šæ‹Ÿæœº å®ç°æˆ æŠŠæ•´ä¸ªå¯¹è±¡æ‹·è´ä¸€æ¬¡ã€‚</p></blockquote><blockquote><p>æ ¹æ® Javaè™šæ‹Ÿæœºè§„èŒƒ çš„è§„å®š<br>volatileå˜é‡ ä¾ç„¶æœ‰å·¥ä½œå†…å­˜çš„æ‹·è´<br>ä½†æ˜¯ç”±äº å®ƒ ç‰¹æ®Šçš„æ“ä½œé¡ºåºæ€§è§„å®šï¼ˆåæ–‡ä¼šè®²åˆ°ï¼‰ï¼Œ<br>æ‰€ä»¥çœ‹èµ·æ¥å¦‚åŒç›´æ¥åœ¨ä¸»å†…å­˜ä¸­è¯»å†™è®¿é—®ä¸€èˆ¬ï¼Œå› æ­¤è¿™é‡Œçš„æè¿°å¯¹äº volatileä¹Ÿå¹¶ä¸å­˜åœ¨ä¾‹å¤–ã€‚</p></blockquote><p>ä¸åŒçš„ çº¿ç¨‹ä¹‹é—´ ä¹Ÿæ— æ³• ç›´æ¥è®¿é—® å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„ å˜é‡ï¼Œçº¿ç¨‹é—´ å˜é‡å€¼çš„ä¼ é€’ å‡éœ€è¦ é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆï¼Œçº¿ç¨‹ã€ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜ä¸‰è€…çš„äº¤äº’å…³ç³»ï¼›  </p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">------------              -----------                ----------------               ------</span><br><span class="line">|<span class="string"> Javaçº¿ç¨‹ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> å·¥ä½œå†…å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">      Save     </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> ä¸» </span>|</span><br><span class="line">------------              -----------               |<span class="string">       å’Œ      </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">------------              -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">|<span class="string"> Javaçº¿ç¨‹ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> å·¥ä½œå†…å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">     Load      </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> å†… </span>|</span><br><span class="line">------------              -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">------------              -----------               |<span class="string">               </span>|<span class="string">               </span>|<span class="string">    </span>|</span><br><span class="line">|<span class="string"> Javaçº¿ç¨‹ </span>|<span class="string"> &lt;----------&gt; </span>|<span class="string"> å·¥ä½œå†…å­˜ </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string">      æ“ä½œ     </span>|<span class="string">  &lt;----------&gt; </span>|<span class="string"> å­˜ </span>|</span><br><span class="line">------------              -----------                ----------------               ------</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ‰€è®²çš„ ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜ ä¸æœ¬ä¹¦ç¬¬2ç« æ‰€è®²çš„Javaå†…å­˜åŒºåŸŸä¸­çš„Javaå †ã€æ ˆã€æ–¹æ³•åŒºç­‰å¹¶ä¸æ˜¯åŒä¸€ä¸ªå±‚æ¬¡çš„å†…å­˜åˆ’åˆ†ï¼Œ<br>è¿™ä¸¤è€…åŸºæœ¬ä¸Šæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œ<br>å¦‚æœä¸¤è€…ä¸€å®šè¦å‹‰å¼ºå¯¹åº”èµ·æ¥ï¼Œ<br>é‚£ä» å˜é‡ã€ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜ çš„å®šä¹‰æ¥çœ‹ï¼Œ<br>ä¸»å†…å­˜ ä¸»è¦å¯¹åº”äº Javaå †ä¸­çš„å¯¹è±¡å®ä¾‹æ•°æ®éƒ¨åˆ†ï¼Œ<br>è€Œ å·¥ä½œå†…å­˜ åˆ™å¯¹åº”äº è™šæ‹Ÿæœºæ ˆä¸­çš„éƒ¨åˆ†åŒºåŸŸã€‚<br>ä»æ›´ä½å±‚æ¬¡ä¸Šè¯´ï¼Œ<br>ä¸»å†…å­˜ å°±ç›´æ¥å¯¹åº”äº ç‰©ç†ç¡¬ä»¶çš„å†…å­˜ ï¼Œè€Œä¸ºäº† è·å–æ›´å¥½çš„è¿è¡Œé€Ÿåº¦ï¼Œ<br>è™šæ‹Ÿæœºï¼ˆç”šè‡³æ˜¯ç¡¬ä»¶ç³»ç»Ÿæœ¬èº«çš„ä¼˜åŒ–æªæ–½ï¼‰å¯èƒ½ä¼šè®© å·¥ä½œå†…å­˜ ä¼˜å…ˆå­˜å‚¨äº å¯„å­˜å™¨å’Œé«˜é€Ÿç¼“å­˜ä¸­ï¼Œå› ä¸ºç¨‹åºè¿è¡Œæ—¶ ä¸»è¦è®¿é—®è¯»å†™çš„ æ˜¯å·¥ä½œå†…å­˜ã€‚</p><blockquote><p>é™¤äº† å®ä¾‹æ•°æ®ï¼ŒJavaå † è¿˜ä¿å­˜äº† å¯¹è±¡çš„å…¶ä»–ä¿¡æ¯<br>å¯¹äº HotSpotè™šæ‹Ÿæœº æ¥è®²ï¼Œ</p><ul><li>æœ‰ Mark Wordï¼ˆå­˜å‚¨å¯¹è±¡å“ˆå¸Œç ã€GCæ ‡å¿—ã€GCå¹´é¾„ã€åŒæ­¥é”ç­‰ä¿¡æ¯ï¼‰</li><li>Klass Point(æŒ‡å‘å­˜å‚¨ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆ)</li><li>åŠä¸€äº›ç”¨äºå­—èŠ‚å¯¹é½è¡¥ç™½çš„å¡«å……æ•°æ®ï¼ˆå¦‚æœå®ä¾‹æ•°æ®åˆšå¥½æ»¡è¶³8å­—èŠ‚å¯¹é½çš„è¯ï¼Œåˆ™å¯ä»¥ä¸å­˜åœ¨è¡¥ç™½ï¼‰</li></ul></blockquote><h5 id="å†…å­˜é—´äº¤äº’æ“ä½œ"><a href="#å†…å­˜é—´äº¤äº’æ“ä½œ" class="headerlink" title="å†…å­˜é—´äº¤äº’æ“ä½œ"></a>å†…å­˜é—´äº¤äº’æ“ä½œ</h5><p>å…³äº ä¸»å†…å­˜ ä¸ å·¥ä½œå†…å­˜ ä¹‹é—´çš„ å…·ä½“çš„ äº¤äº’åè®®ï¼Œ<br>å³ ä¸€ä¸ªå˜é‡ å¦‚ä½•ä» ä¸»å†…å­˜ æ‹·è´åˆ° å·¥ä½œå†…å­˜ã€ å¦‚ä½•ä» å·¥ä½œå†…å­˜ åŒæ­¥ å› ä¸»å†…å­˜ ä¹‹ç±»çš„ å®ç°ç»†èŠ‚ï¼Œ<br>Javaå†…å­˜æ¨¡å‹ å®šä¹‰äº†ä»¥ä¸‹ 8ç§æ“ä½œ æ¥å®Œæˆï¼Œ<br>è™šæ‹Ÿæœºå®ç°æ—¶ å¿…é¡»ä¿è¯ ä¸‹é¢æåŠçš„æ¯ä¸€ç§æ“ä½œ éƒ½æ˜¯ åŸå­çš„ã€ä¸å¯å†åˆ†çš„ï¼ˆå¯¹äº double å’Œ long ç±»å‹çš„å˜é‡æ¥è¯´ï¼Œloadã€storeã€read å’Œ write æ“ä½œåœ¨æŸäº›å¹³å°ä¸Šå…è®¸æœ‰ä¾‹å¤–ï¼Œè¿™ä¸ªé—®é¢˜åœ¨12.3.4èŠ‚å†è®²ï¼‰</p><blockquote><p>åŸºäºç†è§£éš¾åº¦å’Œä¸¥è°¨æ€§è€ƒè™‘ï¼Œæœ€æ–°çš„ JSR-133 æ–‡æ¡£ä¸­ï¼Œå·²ç»æ”¾å¼ƒé‡‡ç”¨è¿™8ç§æ“ä½œå» å®šä¹‰Javaå†…å­˜æ¨¡å‹çš„è®¿é—®åè®®ï¼ˆä»…æ˜¯ æè¿°æ–¹å¼ æ”¹å˜äº†ï¼ŒJavaå†…å­˜æ¨¡å‹ å¹¶æ²¡æœ‰æ”¹å˜ï¼‰ã€‚</p></blockquote><table>  <tr>    <th>operation</th>    <th>åç§°</th>    <th>ä½œç”¨å˜é‡</th>    <th>æè¿°</th>  </tr>  <tr>    <td>lock</td>    <td>(é”å®š)</td>    <td>ä½œç”¨äº ä¸»å†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ ä¸€ä¸ª å˜é‡ æ ‡è¯†ä¸º ä¸€æ¡çº¿ç¨‹ ç‹¬å  çš„ çŠ¶æ€ã€‚</td>  </tr>  <tr>    <td>unlock</td>    <td>(è§£é”)</td>    <td>ä½œç”¨äº ä¸»å†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ ä¸€ä¸ª å¤„äºé”å®šçŠ¶æ€ çš„å˜é‡ é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡ æ‰å¯ä»¥ è¢« å…¶ä»–çº¿ç¨‹ é”å®šã€‚</td>  </tr>  <tr>    <td>read</td>    <td>(è¯»å–)</td>    <td>ä½œç”¨äº ä¸»å†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ ä¸€ä¸ª å˜é‡çš„å€¼ ä» ä¸»å†…å­˜ ä¼ è¾“åˆ° çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„ loadåŠ¨ä½œ ä½¿ç”¨ã€‚</td>  </tr>  <tr>    <td>load</td>    <td>(è½½å…¥)</td>    <td>ä½œç”¨äº å·¥ä½œå†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ readæ“ä½œ ä» ä¸»å†…å­˜ ä¸­å¾—åˆ°çš„ å˜é‡å€¼ æ”¾å…¥ å·¥ä½œå†…å­˜ çš„å˜é‡å‰¯æœ¬ ä¸­ã€‚</td>  </tr>   <tr>    <td>use</td>    <td>(ä½¿ç”¨)</td>    <td>ä½œç”¨äº å·¥ä½œå†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ å·¥ä½œå†…å­˜ä¸­ ä¸€ä¸ªå˜é‡çš„å€¼ ä¼ é€’ç»™ æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“ è™šæ‹Ÿæœº é‡åˆ°ä¸€ä¸ª éœ€è¦ä½¿ç”¨åˆ°å˜é‡çš„å€¼ çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶ å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</td>  </tr>   <tr>    <td>assign</td>    <td>(èµ‹å€¼)</td>    <td>ä½œç”¨äº å·¥ä½œå†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ ä¸€ä¸ª ä»æ‰§è¡Œå¼•æ“ æ¥æ”¶åˆ°çš„å€¼ èµ‹ç»™ å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œæ¯å½“ è™šæ‹Ÿæœº é‡åˆ° ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤ æ—¶ æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</td>  </tr>  <tr>    <td>store</td>    <td>(å­˜å‚¨)</td>    <td>ä½œç”¨äº å·¥ä½œå†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ å·¥ä½œå†…å­˜ ä¸­ ä¸€ä¸ªå˜é‡çš„å€¼ ä¼ é€åˆ° ä¸»å†…å­˜ ä¸­ï¼Œä»¥ä¾¿ éšåçš„writeæ“ä½œ ä½¿ç”¨ã€‚</td>  </tr>    <tr>    <td>write</td>    <td>(å†™å…¥)</td>    <td>ä½œç”¨äº ä¸»å†…å­˜ çš„ å˜é‡</td>    <td>å®ƒæŠŠ storeæ“ä½œ ä» å·¥ä½œå†…å­˜ ä¸­å¾—åˆ°çš„ å˜é‡çš„å€¼ æ”¾å…¥ ä¸»å†…å­˜ çš„ å˜é‡ ä¸­ã€‚</td>  </tr></table><p>å¦‚æœè¦æŠŠ ä¸€ä¸ªå˜é‡ ä» ä¸»å†…å­˜ å¤åˆ¶åˆ° å·¥ä½œå†…å­˜ï¼Œé‚£å°±è¦ é¡ºåºåœ° æ‰§è¡Œ readå’Œload æ“ä½œï¼›<br>å¦‚æœè¦æŠŠ å˜é‡ ä» å·¥ä½œå†…å­˜ åŒæ­¥å› ä¸»å†…å­˜ï¼Œå°±è¦ é¡ºåºåœ° æ‰§è¡Œ storeå’Œwrite æ“ä½œã€‚</p><p>æ³¨æ„ï¼Œ Javaå†…å­˜æ¨¡å‹ åªè¦æ±‚ä¸Šè¿° ä¸¤ä¸ªæ“ä½œ å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œæ²¡æœ‰ä¿è¯æ˜¯ è¿ç»­æ‰§è¡Œã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œreadå’Œloadä¹‹é—´ï¼Œstoreå’Œwriteä¹‹é—´ æ˜¯å¯æ’å…¥å…¶ä»–æŒ‡ä»¤çš„ï¼Œ<br>å¦‚å¯¹ä¸»å†…å­˜ä¸­çš„å˜é‡ aã€bè¿›è¡Œè®¿é—®æ—¶ï¼Œä¸€ç§å¯èƒ½å‡ºç°é¡ºåºæ˜¯ read aã€read bã€load bã€ load aã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼ŒJavaå†…å­˜æ¨¡å‹ è¿˜è§„å®šäº† åœ¨æ‰§è¡Œä¸Šè¿°8ä¸­åŸºæœ¬æ“ä½œæ—¶ å¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li>ä¸å…è®¸ readå’Œloadã€storeå’Œwrite æ“ä½œä¹‹ä¸€ å•ç‹¬å‡ºç°ï¼›<ul><li>å³ ä¸å…è®¸ ä¸€ä¸ªå˜é‡ ä»ä¸»å†…å­˜è¯»å–äº† ä½†å·¥ä½œå†…å­˜ä¸æ¥å—ï¼›</li><li>æˆ–è€…ä»å·¥ä½œå†…å­˜å‘èµ·å›å†™äº† ä½†ä¸»å†…å­˜ä¸æ¥å—çš„æƒ…å†µå‡ºç°ã€‚</li></ul></li><li>ä¸å…è®¸ ä¸€ä¸ªçº¿ç¨‹ ä¸¢å¼ƒ å®ƒçš„ æœ€è¿‘çš„ assignæ“ä½œï¼›<ul><li>å³ å˜é‡ åœ¨ å·¥ä½œå†…å­˜ ä¸­ æ”¹å˜äº† ä¹‹å å¿…é¡»æŠŠ è¯¥å˜åŒ– åŒæ­¥å› ä¸»å†…å­˜ã€‚</li></ul></li><li>ä¸å…è®¸ ä¸€ä¸ªçº¿ç¨‹ æ— åŸå› åœ°ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œï¼‰æŠŠ æ•°æ® ä» çº¿ç¨‹çš„å·¥ä½œå†…å­˜ åŒæ­¥å› ä¸»å†…å­˜ã€‚</li><li>ä¸€ä¸ª æ–°çš„å˜é‡ åªèƒ½åœ¨ ä¸»å†…å­˜ ä¸­â€œè¯ç”Ÿâ€ï¼Œ ä¸å…è®¸ åœ¨å·¥ä½œå†…å­˜ä¸­ ç›´æ¥ä½¿ç”¨ ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆloadæˆ–assignï¼‰çš„å˜é‡ï¼›<ul><li>æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯¹ ä¸€ä¸ªå˜é‡ å®æ–½ useã€storeæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº† assignæˆ–load æ“ä½œï¼›</li></ul></li><li>ä¸€ä¸ªå˜é‡ åœ¨ åŒä¸€æ—¶åˆ» åªå…è®¸ ä¸€æ¡çº¿ç¨‹ å¯¹å…¶è¿›è¡Œ lockæ“ä½œï¼Œä½† lockæ“ä½œ å¯ä»¥è¢« åŒä¸€æ¡çº¿ç¨‹ æ‰§è¡Œå¤šæ¬¡ï¼Œå¤šæ¬¡æ‰§è¡Œlockåï¼Œåªæœ‰æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„ unlockæ“ä½œï¼Œå˜é‡æ‰ä¼šè¢«è§£é”ï¼›</li><li>å¦‚æœå¯¹ ä¸€ä¸ªå˜é‡ æ‰§è¡Œ lockæ“ä½œï¼Œé‚£å°†ä¼š æ¸…ç©ºå·¥ä½œå†…å­˜ ä¸­ æ­¤å˜é‡çš„å€¼ï¼Œåœ¨ æ‰§è¡Œå¼•æ“ ä½¿ç”¨è¿™ä¸ªå˜é‡å‰ï¼Œéœ€è¦é‡æ–°æ‰§è¡Œ loadæˆ–assignæ“ä½œ åˆå§‹åŒ–å˜é‡çš„å€¼ã€‚</li><li>å¦‚æœ ä¸€ä¸ªå˜é‡ äº‹å…ˆæ²¡æœ‰è¢« lockæ“ä½œ é”å®šï¼Œé‚£å°±ä¸å…è®¸ å¯¹å®ƒæ‰§è¡Œ unlockæ“ä½œï¼Œä¹Ÿä¸å…è®¸å» unlock ä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šä½çš„ å˜é‡ã€‚</li><li>å¯¹ ä¸€ä¸ªå˜é‡ æ‰§è¡Œ unlockæ“ä½œ ä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠ æ­¤å˜é‡ åŒæ­¥å› ä¸»å†…å­˜ ä¸­ï¼ˆæ‰§è¡Œ storeã€writeæ“ä½œï¼‰ï¼›</li></ul><p>è¿™ 8ç§å†…å­˜è®¿é—®æ“ä½œ ä»¥åŠ ä¸Šè¿°è§„åˆ™é™å®šï¼Œå†åŠ ä¸Šç¨åä»‹ç»çš„å¯¹ volatile çš„ä¸€äº›ç‰¹æ®Šè§„å®šï¼Œå°±å·²ç»å®Œå…¨ç¡®å®šäº† javaç¨‹åºä¸­ å“ªäº›å†…å­˜è®¿é—®æ“ä½œ åœ¨å¹¶å‘ä¸‹ æ˜¯å®‰å…¨çš„ã€‚</p><p>ç”±äºè¿™ç§å®šä¹‰ ç›¸å½“ä¸¥è°¨ ä½†åˆååˆ† çƒ¦çï¼ˆæˆ‘è§‰å¾—å‘¨å¤§å¤§è¿™é‡Œå¯èƒ½æ˜¯æƒ³æ‰“ç¹çï¼Ÿï¼‰ï¼Œå®è·µèµ·æ¥å¾ˆéº»çƒ¦ï¼Œ<br>æ‰€ä»¥ åœ¨12.3.6èŠ‚ä¸­ç¬”è€…å°†ä»‹ç»è¿™ç§å®šä¹‰çš„ ä¸€ä¸ªç­‰æ•ˆåˆ¤æ–­åŸåˆ™ â€”â€“ å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œç”¨æ¥ç¡®å®š ä¸€ä¸ªè®¿é—® åœ¨å¹¶å‘ç¯å¢ƒä¸‹ æ˜¯å¦ å®‰å…¨ã€‚</p><h5 id="å¯¹äº-volatile-å‹å˜é‡çš„-ç‰¹æ®Šè§„åˆ™"><a href="#å¯¹äº-volatile-å‹å˜é‡çš„-ç‰¹æ®Šè§„åˆ™" class="headerlink" title="å¯¹äº volatile å‹å˜é‡çš„ ç‰¹æ®Šè§„åˆ™"></a>å¯¹äº volatile å‹å˜é‡çš„ ç‰¹æ®Šè§„åˆ™</h5><p>å…³é”®å­— volatile å¯ä»¥è¯´æ˜¯ Javaè™šæ‹Ÿæœº æä¾›çš„ æœ€è½»é‡çº§ çš„ åŒæ­¥æœºåˆ¶ï¼Œ<br>ä½†æ˜¯å®ƒ å¹¶ä¸å®¹æ˜“ å®Œå…¨è¢«æ­£ç¡®ã€ å®Œæ•´åœ°ç†è§£ï¼Œä»¥è‡³äºè®¸å¤šç¨‹åºå‘˜éƒ½ä¹ æƒ¯ä¸å»ä½¿ç”¨å®ƒï¼Œ<br>é‡åˆ°éœ€è¦å¤„ç† å¤šçº¿ç¨‹æ•°æ® ç«äº‰é—®é¢˜ çš„æ—¶å€™ ä¸€å¾‹ä½¿ç”¨ synchronized æ¥è¿›è¡Œ åŒæ­¥ã€‚<br>ï¼ˆç„¶è€Œæˆ‘ä¹Ÿä¸æ˜¯ä¹ æƒ¯ä¸ä¹ æƒ¯çš„é—®é¢˜ï¼Œæ˜¯æˆ‘æ ¹æœ¬ä¸ä¼šç”¨synchronizedï¼Œä¸æ‡‚å¤šçº¿ç¨‹å¹¶å‘è¿™ä¸€å—ï¼Œæ ¹æœ¬æ²¡å…¥é—¨çš„é—®é¢˜ï¼‰</p><p>äº†è§£ volatileå˜é‡çš„è¯­ä¹‰ å¯¹åé¢äº†è§£ å¤šçº¿ç¨‹æ“ä½œçš„å…¶ä»–ç‰¹æ€§ å¾ˆæœ‰æ„ä¹‰ï¼Œ<br>åœ¨æœ¬èŠ‚ä¸­ æˆ‘ä»¬å°† å¤šèŠ±è´¹ä¸€äº›æ—¶é—´å»å¼„æ¸…æ¥š volatileçš„è¯­ä¹‰ åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p><p>Javaå†…å­˜æ¨¡å‹ å¯¹ volatile ä¸“é—¨å®šä¹‰äº† ä¸€äº› ç‰¹æ®Šçš„è®¿é—®è§„åˆ™ï¼Œ<br>åœ¨ä»‹ç» è¿™äº›æ¯”è¾ƒ æ‹—å£çš„è§„åˆ™å®šä¹‰ ä¹‹å‰ï¼Œç¬”è€…å…ˆç”¨ ä¸é‚£ä¹ˆæ­£å¼ ä½† é€šä¿—æ˜“æ‡‚çš„ è¯­è¨€ æ¥ä»‹ç»ä¸€ä¸‹ è¿™ä¸ªå…³é”®å­—çš„ä½œç”¨ã€‚<br>ï¼ˆå¥½äººä¸€ç”Ÿå¹³å®‰<del>~</del> è™½ç„¶æˆ‘ä¹Ÿä¸ä¸€å®šèƒ½çœ‹æ‡‚ä½ é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ï¼‰</p><p>å½“ ä¸€ä¸ªå˜é‡ å®šä¹‰ä¸º volatile ä¹‹åï¼Œå®ƒ å°†å…·å¤‡ ä¸¤ç§ç‰¹æ€§ï¼Œ<br>ç¬¬ä¸€ æ˜¯ä¿è¯ æ­¤å˜é‡ å¯¹ æ‰€æœ‰çº¿ç¨‹ çš„ å¯è§æ€§ï¼Œ<br>è¿™é‡Œçš„ â€œå¯è§æ€§â€ æ˜¯æŒ‡å½“ ä¸€æ¡çº¿ç¨‹ ä¿®æ”¹äº† è¿™ä¸ª å˜é‡çš„å€¼ï¼Œæ–°å€¼ å¯¹äº å…¶ä»–çº¿ç¨‹ æ¥è¯´ æ˜¯å¯ä»¥ç«‹å³å¾—çŸ¥çš„ã€‚<br>è€Œ æ™®é€šå˜é‡ ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œ æ™®é€šå˜é‡ çš„ å€¼ åœ¨çº¿ç¨‹é—´ ä¼ é€’ å‡éœ€è¦é€šè¿‡ ä¸»å†…å­˜ æ¥å®Œæˆï¼Œ<br>ä¾‹å¦‚ï¼Œçº¿ç¨‹A ä¿®æ”¹ ä¸€ä¸ªæ™®é€šå˜é‡çš„å€¼ï¼Œç„¶å å‘ ä¸»å†…å­˜ è¿›è¡Œ å›å†™ï¼Œå¦å¤–ä¸€æ¡çº¿ç¨‹B åœ¨çº¿ç¨‹A å›å†™å®Œæˆ äº†ä¹‹å å†ä» ä¸»å†…å­˜ è¿›è¡Œ è¯»å– æ“ä½œï¼Œæ–°å˜é‡å€¼ æ‰ä¼šå¯¹çº¿ç¨‹Bå¯è§ã€‚</p><p>ï¼ˆè¯¶è¯¶è¯¶ï¼Œè¿™ä¸ªæˆ‘çœ‹æ‡‚äº†ï¼Œå¯èƒ½åŸå› åœ¨äºæˆ‘çœ‹äº†è§†é¢‘çš„åŸå› ï¼Œæˆ‘æ€ä¹ˆå¯ä»¥è¿™ä¹ˆè ¢ã€‚ã€‚ã€‚ã€‚ï¼‰</p><p>å…³äº volatileå˜é‡çš„å¯è§æ€§ï¼Œç»å¸¸ä¼šè¢«å¼€å‘äººå‘˜è¯¯ä¼šï¼Œè®¤ä¸ºä»¥ä¸‹æè¿°æˆç«‹ï¼šâ€œvolatileå˜é‡ å¯¹æ‰€æœ‰çº¿ç¨‹ æ˜¯ ç«‹å³å¯è§ çš„ï¼Œå¯¹ volatileå˜é‡ æ‰€æœ‰çš„ å†™æ“ä½œ éƒ½èƒ½ ç«‹åˆ»ååº” åˆ° å…¶ä»–çº¿ç¨‹ä¹‹ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œ volatileå˜é‡ åœ¨ å„ä¸ªçº¿ç¨‹ä¸­ æ˜¯ ä¸€è‡´çš„ï¼Œæ‰€ä»¥åŸºäº volatileå˜é‡ çš„ è¿ç®— åœ¨å¹¶å‘ä¸‹ æ˜¯å®‰å…¨çš„â€ã€‚  </p><p>è¿™å¥è¯çš„è®ºæ®éƒ¨åˆ† å¹¶æ²¡æœ‰é”™ï¼Œ ä½†æ˜¯å…¶è®ºæ® å¹¶ä¸èƒ½å¾—å‡º â€œåŸºäº volatileå˜é‡ çš„ è¿ç®— åœ¨å¹¶å‘ä¸‹ æ˜¯å®‰å…¨çš„â€è¿™ä¸ªç»“è®ºã€‚  </p><p>ï¼ˆemmï¼Œæˆ‘è§‰å¾—è®ºæ®éƒ¨åˆ†ä¹Ÿæœ‰ç‚¹æ¯›ç—…ï¼Œ<br>ä¸ªäººè§‚ç‚¹ï¼šâ€volatileå˜é‡ å¯¹æ‰€æœ‰çº¿ç¨‹ æ˜¯ ç«‹å³å¯è§çš„â€ï¼Œ ç«‹å³å¯è§å—ï¼Ÿ<br>ä¸æ˜¯ä¹‹å‰è¯´ æ™®é€šå˜é‡çš„å€¼åœ¨çº¿ç¨‹é—´ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆå—ï¼Œ<br>é‚£æ—¢ç„¶æ˜¯è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆçš„è¯ï¼Œé‚£æ˜¯ä¸æ˜¯å°±éœ€è¦æ‰§è¡Œé‚£8ä¸ªæ“ä½œå…¶ä¸­çš„readè¯»å–æ“ä½œä»¥åŠloadã€useæ“ä½œç­‰ï¼›<br>ç„¶åè®ºæ®éƒ¨åˆ†å½“ä¸­çš„ â€œå¯¹volatileå˜é‡ æ‰€æœ‰çš„ å†™æ“ä½œ éƒ½èƒ½ ç«‹åˆ»ååº” åˆ°å…¶ä»–çº¿ç¨‹ä¹‹ä¸­â€ ç»†å“ä¸€ä¸‹å“¦ï¼Œèƒ½ç«‹åˆ»ååº”ï¼Ÿ<br>ä¸æ˜¯8ä¸ªæ“ä½œå½“ä¸­å·¥ä½œå†…å­˜çš„èµ‹å€¼æ“ä½œassignè¿™ç§çš„æ“ä½œä¸€æ—¦æœ‰äº†è¿˜éœ€è¦åŒæ­¥å›ä¸»å†…å­˜çš„å—ï¼Ÿ<br>ä¹Ÿå°±æ˜¯æ‰§è¡Œstoreä»¥åŠwriteæ“ä½œï¼Œä»¥åŠç«‹åˆ»åæ˜ åˆ°å…¶ä»–çº¿ç¨‹ä¹‹ä¸­éš¾é“ä¸è¦ å…¶ä»–çº¿ç¨‹åˆè¦å»æ¸…ç©ºå…¶å·¥ä½œå†…å­˜å½“ä¸­çš„è¯¥å˜é‡ç„¶åé‡æ–°è¿›è¡Œreadã€loadâ€¦.æ“ä½œä¹‹ç±»çš„ï¼Ÿ<br>è¿˜æ˜¯è¯´emmï¼Œ<br>å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜ä¹‹é—´çš„è¿™ä¸ªäº¤äº’éå¸¸å¿«ï¼Ÿå¿«åˆ°é‚£å‡ ä¸ªæ“ä½œæ‰€éœ€èŠ±è´¹æ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡æ‰€ä»¥è¯´ ç«‹å³å¯è§ã€ç«‹å³ååº”ï¼Ÿ<br>å®³ï¼Œä¸»è¦æ˜¯è‡ªå·±ä¹Ÿä¸æ‡‚ï¼Œçœ‹äº†ä¹¦å’Œè§†é¢‘ä¹‹åå§æœ‰é—®é¢˜ä¹Ÿæ²¡æœ‰äººå¯ä»¥è§£ç­”ä¸‹â€¦.ã€’â–½ã€’ï¼‰</p><p>volatileå˜é‡ åœ¨ å„ä¸ªçº¿ç¨‹çš„ å·¥ä½œå†…å­˜ ä¸­ä¸å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜<br>ï¼ˆåœ¨ å„ä¸ªçº¿ç¨‹çš„ å·¥ä½œå†…å­˜ä¸­ï¼Œvolatileå˜é‡ ä¹Ÿå¯ä»¥å­˜åœ¨ ä¸ä¸€è‡´çš„ æƒ…å†µï¼Œä½†ç”±äº æ¯æ¬¡ä½¿ç”¨ä¹‹å‰ éƒ½è¦å…ˆåˆ·æ–°ï¼Œæ‰§è¡Œå¼•æ“ çœ‹ä¸åˆ° ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥è®¤ä¸º ä¸å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜ï¼‰ï¼Œ<br>ä½†æ˜¯Javaé‡Œé¢çš„è¿ç®— å¹¶é åŸå­æ“ä½œï¼Œå¯¼è‡´ volatileå˜é‡ çš„è¿ç®— åœ¨ å¹¶å‘ä¸‹ä¸€æ ·æ˜¯ä¸å®‰å…¨çš„ï¼Œ</p><p>æˆ‘ä»¬å¯ä»¥ é€šè¿‡ä¸€æ®µç®€å•çš„æ¼”ç¤ºæ¥è¯´æ˜åŸå› ï¼Œè¯·çœ‹ä»£ç æ¸…å•12-1 ä¸­æ¼”ç¤ºçš„ä¾‹å­ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">12</span><span class="number">-1</span> <span class="keyword">volatile</span> çš„è¿ç®—</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * volatile å˜é‡è‡ªå¢è¿ç®—æµ‹è¯•</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @author zzm</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileTest</span> &#123;</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">int</span> race = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">increase</span><span class="params">()</span></span>&#123;</span><br><span class="line">        race++;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> THREADS_COUNT = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Thread[] threads = <span class="keyword">new</span> Thread[THREADS_COUNT];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; THREADS_COUNT; i++)&#123;</span><br><span class="line">          threads[i] = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;</span><br><span class="line">                increase();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          threads[i].start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç­‰å¾…æ‰€æœ‰ç´¯åŠ çº¿ç¨‹éƒ½ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span>(Thread.activeCount() &gt; <span class="number">1</span>)</span><br><span class="line">            Thread.<span class="built_in">yield</span>();</span><br><span class="line"></span><br><span class="line">        System.out.<span class="built_in">println</span>(race);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç  å‘èµ·äº†20ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ å¯¹ raceå˜é‡ è¿›è¡Œ10000æ¬¡è‡ªå¢æ“ä½œï¼Œå¦‚æœè¿™æ®µä»£ç èƒ½å¤Ÿ æ­£ç¡®å¹¶å‘ çš„è¯ï¼Œæœ€åè¾“å‡ºçš„ç»“æœåº”è¯¥æ˜¯200000ã€‚</p><p>è¯»è€…è¿è¡Œå®Œè¿™æ®µä»£ç ä¹‹åï¼Œå¹¶ä¸ä¼šè·å¾—æœŸæœ›çš„ç»“æœï¼Œè€Œä¸”ä¼šå‘ç° æ¯æ¬¡è¿è¡Œç¨‹åºï¼Œè¾“å‡ºçš„ç»“æœéƒ½ä¸ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ä¸ªå°äº 200000çš„æ•°å­—ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>é—®é¢˜å°±å‡ºç°åœ¨ è‡ªå¢è¿ç®— â€œrace++â€ä¹‹ä¸­ï¼Œ<br>æˆ‘ä»¬ç”¨ Javap åç¼–è¯‘ è¿™æ®µä»£ç ä¹‹åï¼Œä¼šå¾—åˆ°ä»£ç æ¸…å•12-2ï¼Œ<br>å‘ç°åªæœ‰ä¸€è¡Œä»£ç çš„ increase() æ–¹æ³•åœ¨ Classæ–‡ä»¶ ä¸­æ˜¯ç”± 4æ¡å­—èŠ‚ç æŒ‡ä»¤æ„æˆçš„ï¼ˆreturn æŒ‡ä»¤ä¸æ˜¯ç”± race++ äº§ç”Ÿçš„ï¼Œè¿™æ¡æŒ‡ä»¤å¯ä»¥ä¸è®¡ç®—ï¼‰ï¼Œ<br>ä» å­—èŠ‚ç å±‚é¢ä¸Š å¾ˆå®¹æ˜“å°±åˆ†æå‡º å¹¶å‘å¤±è´¥ çš„åŸå› äº†ï¼š<br>å½“ getstaticæŒ‡ä»¤ æŠŠ race çš„å€¼ å–åˆ° æ“ä½œæ ˆé¡¶æ—¶ï¼Œvolatileå…³é”®å­— ä¿è¯äº† raceçš„å€¼ åœ¨æ­¤æ—¶æ˜¯æ­£ç¡®çš„çš„ï¼Œ<br>ä½†æ˜¯åœ¨æ‰§è¡Œ iconst_1ã€iaddè¿™äº›æŒ‡ä»¤çš„æ—¶å€™ï¼Œ<br>å…¶ä»–çº¿ç¨‹ å¯èƒ½å·²ç»æŠŠ raceçš„å€¼ åŠ å¤§äº†ï¼Œ<br>è€Œåœ¨ æ“ä½œæ ˆé¡¶ çš„å€¼ å°±å˜æˆäº† è¿‡æœŸçš„æ•°æ®ï¼Œ<br>æ‰€ä»¥ putstatic æŒ‡ä»¤æ‰§è¡Œåå°±å¯èƒ½æŠŠ è¾ƒå°çš„ raceå€¼ åŒæ­¥å› ä¸»å†…å­˜ä¹‹ä¸­ã€‚</p><p>ï¼ˆæ­å–œæˆ‘ï¼Œç«Ÿç„¶åˆçœ‹æ‡‚äº†è¿™ä¸€æ®µé€šä¿—æ˜“æ‡‚çš„è¯ï¼ŒåŸå› å¯èƒ½åœ¨äºæˆ‘çœ‹äº†è§†é¢‘çš„ç¼˜æ•…ã€‚ã€‚ã€‚ï¼‰  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">12</span><span class="number">-2</span> VolatileTest çš„å­—èŠ‚ç </span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> static <span class="built_in">void</span> increase();</span><br><span class="line">  Code:</span><br><span class="line">    Stack=<span class="number">2</span>, Locals=<span class="number">0</span>, Args_size=<span class="number">0</span></span><br><span class="line">    <span class="number">0</span>ï¼š   getstatic      #<span class="number">13</span>; <span class="comment">//Field race:I</span></span><br><span class="line">    <span class="number">3</span>ï¼š   iconst_1</span><br><span class="line">    <span class="number">4</span>ï¼š   iadd</span><br><span class="line">    <span class="number">5</span>ï¼š   putstatic      #<span class="number">13</span>; <span class="comment">//Field race:I</span></span><br><span class="line">    <span class="number">8</span>ï¼š   <span class="keyword">return</span></span><br><span class="line">  LineNumberTable:</span><br><span class="line">    Line <span class="number">14</span>: <span class="number">0</span></span><br><span class="line">    Line <span class="number">15</span>: <span class="number">8</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>å®¢è§‚åœ°è¯´ï¼Œç¬”è€…åœ¨æ­¤ä½¿ç”¨ å­—èŠ‚ç  æ¥åˆ†æ å¹¶å‘é—®é¢˜ï¼Œä»ç„¶æ˜¯ ä¸ä¸¥è°¨çš„ï¼Œ<br>å› ä¸ºå³ä½¿ ç¼–è¯‘å‡ºæ¥ åªæœ‰ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œ ä¹Ÿä¸æ„å‘³ç€ æ‰§è¡Œè¿™æ¡æŒ‡ä»¤å°±æ˜¯ ä¸€ä¸ªåŸå­æ“ä½œã€‚  </p><p>ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ åœ¨ è§£é‡Šæ‰§è¡Œ æ—¶ï¼Œè§£é‡Šå™¨å°†è¦è¿è¡Œè®¸å¤šä»£ç æ‰èƒ½å®ç° å®ƒçš„è¯­ä¹‰ï¼Œ<br>å¦‚æœæ˜¯ ç¼–è¯‘æ‰§è¡Œï¼Œä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ ä¹Ÿå¯èƒ½ è½¬åŒ–æˆè‹¥å¹²æ¡ æœ¬åœ°æœºå™¨ç æŒ‡ä»¤ï¼Œ<br>æ­¤å¤„ä½¿ç”¨ -XX:+PrintAssembly å‚æ•°è¾“å‡º åæ±‡ç¼– æ¥åˆ†æä¼š æ›´ä¸¥è°¨ ä¸€äº›ï¼Œ<br>ä½†è€ƒè™‘åˆ°è¯»è€…é˜…è¯»çš„æ–¹ä¾¿ï¼Œå¹¶ä¸”å­—èŠ‚ç å·²ç»èƒ½è¯´æ˜é—®é¢˜ï¼Œæ‰€ä»¥æ­¤å¤„ä½¿ç”¨å­—èŠ‚ç åˆ†æã€‚</p><p>ï¼ˆæˆ‘è§‰å¾—è¿™ä¸ªè€ƒè™‘åˆ°è¯»è€…æ–¹ä¾¿ï¼Œå¯èƒ½æ˜¯è€ƒè™‘åˆ°äº†åƒæˆ‘è¿™ç§å°ç™½åˆ°æ—¶å€™çœ‹ä¸æ‡‚ï¼Œå°±è§£é‡Šçš„ä¹Ÿå°±è¶Šè®²è¶Šå¤šè¶Šè®²è¶Šå¤šã€‚ã€‚ã€‚ã€‚ çœŸæ˜¯å¤ªè´´å¿ƒäº†ï¼Œè´´å¿ƒçš„æš–å®å®ï¼‰</p><p>ç”±äº volatileå˜é‡ åªèƒ½ä¿è¯ å¯è§æ€§ï¼Œ<br>åœ¨ä¸ç¬¦åˆ ä»¥ä¸‹ä¸¤æ¡è§„åˆ™çš„è¿ç®—åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä»ç„¶è¦é€šè¿‡ åŠ é”ï¼ˆä½¿ç”¨ synchronizedæˆ–java.util.concurrentä¸­çš„åŸå­ç±»ï¼‰æ¥ä¿è¯åŸå­æ€§ã€‚</p><ul><li>è¿ç®—ç»“æœ å¹¶ä¸ä¾èµ– å˜é‡ çš„å½“å‰å€¼ï¼Œæˆ–è€… èƒ½å¤Ÿç¡®ä¿ åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹ å˜é‡çš„å€¼ã€‚</li><li>å˜é‡ ä¸éœ€è¦ ä¸ å…¶ä»–çš„çŠ¶æ€å˜é‡ å…±åŒå‚ä¸ ä¸å˜çº¦æŸã€‚</li></ul><p>è€Œåœ¨åƒ å¦‚ä¸‹çš„ä»£ç æ¸…ä»£12-3æ‰€ç¤ºçš„ è¿™ç±»åœºæ™¯å°±å¾ˆé€‚åˆä½¿ç”¨ volatileå˜é‡ æ¥æ§åˆ¶å¹¶å‘ï¼Œå½“ shutdown() æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œèƒ½ä¿è¯ æ‰€æœ‰çº¿ç¨‹ ä¸­æ‰§è¡Œçš„ doWork() æ–¹æ³•éƒ½ç«‹å³åœä¸‹æ¥ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-3 volatile çš„ä½¿ç”¨åœºæ™¯</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">volatile boolean shutdownRequested;</span><br><span class="line"></span><br><span class="line">public void shutdown()&#123;</span><br><span class="line"><span class="code">      shutdownRequested = true;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void doWork()&#123;</span><br><span class="line"><span class="code">      while(!shutdownRequested)&#123;</span></span><br><span class="line"><span class="code">        // do stuff</span></span><br><span class="line"><span class="code">      &#125;</span></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ volatileå˜é‡ çš„ç¬¬äºŒä¸ªè¯­ä¹‰ æ˜¯ ç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œ<br>æ™®é€šçš„å˜é‡ ä»…ä»… ä¼šä¿è¯ åœ¨è¯¥æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ æ‰€æœ‰ä¾èµ– èµ‹å€¼ç»“æœ çš„åœ°æ–¹ éƒ½èƒ½è·å–åˆ° æ­£ç¡®çš„ç»“æœï¼Œ<br>è€Œä¸èƒ½ ä¿è¯ å˜é‡èµ‹å€¼ æ“ä½œçš„é¡ºåº ä¸ ç¨‹åºä»£ç ä¸­çš„æ‰§è¡Œé¡ºåº ä¸€è‡´ã€‚  </p><p>å› ä¸º åœ¨ä¸€ä¸ªçº¿ç¨‹çš„æ–¹æ³• æ‰§è¡Œè¿‡ç¨‹ä¸­ æ— æ³•æ„ŸçŸ¥åˆ°è¿™ç‚¹ï¼Œ<br>è¿™ä¹Ÿå°±æ˜¯ Javaå†…å­˜æ¨¡å‹ ä¸­æè¿°çš„æ‰€è°“çš„ â€œçº¿ç¨‹å†… è¡¨ç°ä¸º ä¸²è¡Œ çš„è¯­ä¹‰â€ï¼ˆWithin-Tread As-If-Serial Semanticsï¼‰ã€‚</p><p>ä¸Šé¢çš„æè¿°ä»ç„¶ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç»§ç»­é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹ä¸ºä½• æŒ‡ä»¤é‡æ’åº ä¼š å¹²æ‰° ç¨‹åºçš„å¹¶å‘æ‰§è¡Œï¼Œ<br>æ¼”ç¤ºç¨‹åºå¦‚ä»£ç æ¸…å•12-4æ‰€ç¤ºã€‚<br>ï¼ˆå‘¨å¤§å¤§çœŸæ˜¯è¯´åˆ°æˆ‘çš„å¿ƒåé‡Œå»äº†ï¼ŒçœŸæ˜¯å¤ªä¸ºæˆ‘è¿™ç§äººè€ƒè™‘äº†ï¼Œå²‚æ­¢æ˜¯ä¸å¤ªå®¹æ˜“ç†è§£ï¼ï¼ç®€ç›´ï¼Œæˆ‘éƒ½ä¸å¥½æ„æ€è¯´è‡ªå·±æ˜¯ä¸­å›½äººäº†ã€‚å®³ï¼›â•®(â•¯â–½â•°)â•­ï¼‰</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-4 æŒ‡ä»¤é‡æ’åº</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">Map configOptions;</span><br><span class="line"></span><br><span class="line">char[] configText;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤ å˜é‡ å¿…é¡»å®šä¹‰ä¸º volatile</span></span><br><span class="line">volatile boolean initialized = false;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ä»¥ä¸‹ä»£ç åœ¨ çº¿ç¨‹A ä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿ è¯»å–é…ç½®ä¿¡æ¯ï¼Œå½“è¯»å–å®Œæˆå å°† initialized è®¾ç½®ä¸º true ä»¥é€šçŸ¥å…¶ä»–çº¿ç¨‹ é…ç½®å¯ç”¨</span></span><br><span class="line">configOptions = new HashMap();</span><br><span class="line">configText =  readConfigFile(fileName);</span><br><span class="line">processConfigOptions(configText, configOptions);</span><br><span class="line">initialized = true;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ä»¥ä¸‹ä»£ç åœ¨ çº¿ç¨‹B ä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// ç­‰å¾… initialized ä¸º trueï¼Œä»£è¡¨ çº¿ç¨‹A å·²ç»æŠŠé…ç½®ä¿¡æ¯ åˆå§‹åŒ–å®Œæˆ</span></span><br><span class="line">while (!initialized)&#123;</span><br><span class="line"><span class="code">  sleep();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ çº¿ç¨‹A ä¸­åˆå§‹åŒ–å¥½çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">doSomethingWithConfig();</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ä»£ç æ¸…å•12-4ä¸­çš„ç¨‹åºæ˜¯ä¸€æ®µ ä¼ªä»£ç ï¼Œå…¶ä¸­æè¿°çš„åœºæ™¯ååˆ†å¸¸è§ï¼Œåªæ˜¯æˆ‘ä»¬åœ¨å¤„ç†é…ç½®æ–‡ä»¶æ—¶ä¸€èˆ¬ä¸ä¼šå‡ºç°å¹¶å‘è€Œå·²ã€‚  </p><p>å¦‚æœå®šä¹‰ initializedå˜é‡ æ²¡æœ‰ä½¿ç”¨ volatileä¿®é¥°ï¼Œ<br>å°±å¯èƒ½ä¼šç”±äº æŒ‡ä»¤é‡æ’åºçš„ä¼˜åŒ–ï¼Œ<br>å¯¼è‡´ä½äº çº¿ç¨‹A ä¸­çš„æœ€åä¸€å¥ä»£ç  â€œinitialized=trueâ€è¢«æå‰æ‰§è¡Œï¼ˆè¿™é‡Œè™½ç„¶ä½¿ç”¨Javaä½œä¸ºä¼ªä»£ç ï¼Œä½†æ‰€æŒ‡çš„ é‡æ’åºä¼˜åŒ– æ˜¯ æœºå™¨çº§ çš„ ä¼˜åŒ– æ“ä½œï¼Œæå‰æ‰§è¡Œ æ˜¯æŒ‡ è¿™å¥è¯å¯¹åº”çš„ æ±‡ç¼–ä»£ç  è¢« æå‰æ‰§è¡Œï¼‰ï¼Œ<br>è¿™æ ·åœ¨ çº¿ç¨‹B ä¸­ä½¿ç”¨é…ç½®ä¿¡æ¯çš„ä»£ç  å°±å¯èƒ½å‡ºç°é”™è¯¯ï¼Œ<br>è€Œ volatileå…³é”®å­— åˆ™å¯ä»¥é¿å…æ­¤ç±»æƒ…å†µçš„å‘ç”Ÿã€‚</p><blockquote><p>volatile å±è”½ æŒ‡ä»¤é‡æ’åº çš„è¯­ä¹‰ åœ¨JDK1.5 æ‰è¢«å®Œå…¨ä¿®å¤ï¼Œæ­¤å‰çš„JDKä¸­ å³ä½¿å°†å˜é‡å£°æ˜ä¸º volatile ä¹Ÿä»ç„¶ä¸èƒ½å®Œå…¨é¿å… é‡æ’åº æ‰€å¯¼è‡´çš„é—®é¢˜<br>(ä¸»è¦æ˜¯ volatileå˜é‡ å‰åçš„ä»£ç  ä»ç„¶å­˜åœ¨ é‡æ’åº é—®é¢˜)ï¼Œè¿™ç‚¹ ä¹Ÿæ˜¯åœ¨ JDK1.5 ä¹‹å‰çš„Javaä¸­ æ— æ³•å®‰å…¨åœ°ä½¿ç”¨ DCLï¼ˆåŒé”æ£€æµ‹ï¼‰æ¥å®ç°å•ä¾‹æ¨¡å¼çš„åŸå› ã€‚</p></blockquote><p>æŒ‡ä»¤é‡æ’åº æ˜¯ å¹¶å‘ç¼–ç¨‹ ä¸­æœ€å®¹æ˜“è®©å¼€å‘äººå‘˜äº§ç”Ÿç–‘æƒ‘çš„åœ°æ–¹ï¼Œé™¤äº†ä¸Šé¢ä¼ªä»£ç çš„ä¾‹å­ä¹‹å¤–ï¼Œ<br>ç¬”è€…å†ä¸¾ä¸€ä¸ªå¯ä»¥å®é™…æ“ä½œè¿è¡Œçš„ä¾‹å­æ¥åˆ†æ volatileå…³é”®å­— æ˜¯å¦‚ä½• ç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–çš„ã€‚  </p><p>ä»£ç æ¸…å•12-5æ˜¯ä¸€æ®µæ ‡å‡†çš„ DCLå•ä¾‹ä»£ç ï¼Œå¯ä»¥è§‚å¯Ÿ åŠ å…¥volatileå’ŒæœªåŠ å…¥volatileå…³é”®å­— æ‰€ç”Ÿæˆ æ±‡ç¼–ä»£ç  çš„å·®åˆ«<br>ï¼ˆå¦‚ä½•è·å¾—JITçš„æ±‡ç¼–ä»£ç ï¼Œè¯·å‚è€ƒ4.2.7èŠ‚ï¼‰ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• 12-5 DCLå•ä¾‹æ¨¡å¼</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">public class Singleton&#123;</span><br><span class="line">    private volatile static Singleton instance;</span><br><span class="line"></span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">      <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">        synchronized ( Singleton.class )&#123;</span><br><span class="line">          <span class="keyword">if</span>(instance ==<span class="literal">null</span> )&#123;</span><br><span class="line">           <span class="built_in"> instance </span>= new Singleton();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">      Singleton.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åï¼Œè¿™æ®µä»£ç å¯¹ instanceå˜é‡ èµ‹å€¼éƒ¨åˆ† å¦‚ä»£ç æ¸…å•12-6æ‰€ç¤ºã€‚</p><p>(å§æ§½ï¼Œæˆ‘æœ‰ç—…æˆ‘ä¸ºä»€ä¹ˆè¦æŠ„è¿™ä¸ªä»£ç æ¸…å•12-6â€¦)</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">                                ä»£ç æ¸…å• <span class="number">12</span><span class="number">-6</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="number">0x01a3de0f</span>: mov       $<span class="number">0x3375cdb0</span>,%esi           ; ...beb0cd75 <span class="number">33</span></span><br><span class="line">                                                 ;    &#123;oop(<span class="string">'Singleton'</span>)&#125;</span><br><span class="line"><span class="number">0x01a3de14</span>: mov       %eax,<span class="number">0x150</span>(%esi)           ; ..<span class="number">.89865001</span> <span class="number">0000</span></span><br><span class="line"><span class="number">0x01a3de1a</span>: shr       $<span class="number">0x9</span>,%esi                  ; ...clee09</span><br><span class="line"><span class="number">0x01a3de1d</span>: movb      $<span class="number">0x0</span>,<span class="number">0x1104800</span>(%esi)       ; ...c6860048 <span class="number">100100</span></span><br><span class="line"><span class="number">0x01a3de24</span>: lock  add1 $<span class="number">0x0</span>,(%esp)               ; ...f0830424 <span class="number">00</span></span><br><span class="line">                                                 ; *putstatic instance</span><br><span class="line">                                                 ; -</span><br><span class="line">Singleton::<span class="symbol">getInstance@</span><span class="number">24</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>é€šè¿‡ å¯¹æ¯” å°±ä¼šå‘ç°ï¼Œ å…³é”®å˜åŒ– åœ¨äºæœ‰ volatileä¿®é¥°çš„å˜é‡ï¼Œ<br>èµ‹å€¼åï¼ˆå‰é¢ mov %eax,0x150(%esi) è¿™å¥ä¾¿æ˜¯èµ‹å€¼æ“ä½œï¼‰ å¤šæ‰§è¡Œäº†ä¸€ä¸ªâ€ lock add1 $0x0,(%esp)â€ æ“ä½œï¼Œ<br>è¿™ä¸ªæ“ä½œç›¸å½“äºä¸€ä¸ª å†…å­˜å±éšœ ï¼ˆMemory Barrier æˆ– Memory Fenceï¼ŒæŒ‡ é‡æ’åºæ—¶ ä¸èƒ½æŠŠ åé¢çš„æŒ‡ä»¤ é‡æ’åºåˆ° å†…å­˜å±éšœ ä¹‹å‰çš„ä½ç½®ï¼‰ï¼Œ<br>åªæœ‰ä¸€ä¸ª CPU è®¿é—® å†…å­˜æ—¶ï¼Œå¹¶ä¸éœ€è¦ å†…å­˜å±éšœï¼›<br>ä½†å¦‚æœæœ‰ ä¸¤ä¸ªæˆ–æ›´å¤šCPU è®¿é—® åŒä¸€å— å†…å­˜ï¼Œä¸” å…¶ä¸­æœ‰ä¸€ä¸ªåœ¨ è§‚æµ‹ å¦ä¸€ä¸ªï¼Œå°±éœ€è¦ å†…å­˜å±éšœ æ¥ä¿è¯ ä¸€è‡´æ€§äº†ã€‚</p><p>è¿™å¥ æŒ‡ä»¤ ä¸­çš„ â€œadd1 $0x0,(%esp)â€ï¼ˆæŠŠ ESPå¯„å­˜å™¨ çš„ å€¼ åŠ  0ï¼‰æ˜¾ç„¶æ˜¯ä¸€ä¸ª ç©ºæ“ä½œ<br>ï¼ˆé‡‡ç”¨è¿™ä¸ª ç©ºæ“ä½œ è€Œä¸æ˜¯ ç©ºæ“ä½œæŒ‡ä»¤nop æ˜¯å› ä¸º IA32æ‰‹å†Œè§„å®š lockå‰ç¼€ ä¸å…è®¸ é…åˆ nopæŒ‡ä»¤ ä½¿ç”¨ï¼‰ï¼Œ<br>å…³é”®åœ¨äº lockå‰ç¼€ï¼ŒæŸ¥è¯¢ IA32æ‰‹å†Œï¼Œ<br>å®ƒçš„ä½œç”¨æ˜¯ä½¿å¾— æœ¬CPU çš„ Cache å†™å…¥äº† å†…å­˜ï¼Œ<br>è¯¥ å†™å…¥åŠ¨ä½œ ä¹Ÿä¼šå¼•èµ· åˆ«çš„CPU æˆ–è€… åˆ«çš„å†…æ ¸ æ— æ•ˆåŒ–ï¼ˆInvalidateï¼‰å…¶Cacheï¼Œ<br>è¿™ç§æ“ä½œç›¸å½“äºå¯¹ Cacheä¸­çš„å˜é‡ åšäº†ä¸€æ¬¡ å‰é¢ä»‹ç» Javaå†…å­˜æ¨¡å¼ ä¸­æ‰€è¯´çš„ â€storeâ€œå’Œâ€writeâ€œæ“ä½œã€‚<br>æ‰€ä»¥é€šè¿‡è¿™æ ·ä¸€ä¸ª ç©ºæ“ä½œï¼Œå¯è®©å‰é¢ volatileå˜é‡ çš„ ä¿®æ”¹ å¯¹ å…¶ä»–CPU ç«‹å³å¯è§ã€‚</p><blockquote><p>Doug Lea åˆ—å‡ºäº†å„ç§å¤„ç†å™¨æ¶æ„ä¸‹çš„ å†…å­˜å±éšœæŒ‡ä»¤ï¼ˆ<a href="http://g.oswego.edu/d1/jmm/cookbook.htmlï¼‰" target="_blank" rel="noopener">http://g.oswego.edu/d1/jmm/cookbook.htmlï¼‰</a></p></blockquote><blockquote><p>è¿™ä¸ª <a href="http://g.oswego.edu/d1/jmm/cookbook.html" target="_blank" rel="noopener">http://g.oswego.edu/d1/jmm/cookbook.html</a> æˆ‘è¯•äº†ä¸‹è®¿é—®ä¸é€šï¼›â€¦</p></blockquote><p>ï¼ˆçœ‹åˆ°è¿™äº›æ–‡å­—ğŸ™ƒï¼Œè«åæˆ‘ğŸ™ƒå°±æƒ³èµ·äº†é«˜ä¸­çš„æ•°å­¦ğŸ™ƒè¿˜æœ‰å¤§å­¦çš„é«˜ç­‰æ•°å­¦ğŸ™ƒã€‚è¿˜æƒ³èµ·äº†é‚£ä¸ªæ–æ³¢æ‹‰å¥‘æ•°åˆ—è¿˜æœ‰é‚£ä¸ªKMPæ¨¡å¼åŒ¹é…ç®—æ³•ğŸ™ƒï¼Œå§æ§½ğŸ™ƒï¼‰</p><blockquote><p>ğŸ™ƒğŸ™ƒğŸ™ƒæ‹ä¸€æ‹ğŸ™ƒğŸ™ƒğŸ™ƒ</p><ul><li>åŠ äº†volatileå’Œä¸åŠ volatileçš„åŒºåˆ«ï¼šâ€œ0x01a3de24: lock  add1 $0x0,(%esp)               ; â€¦f0830424 00â€è¿™ä¸€è¡Œä»£ç æ˜¯å¦å­˜åœ¨</li><li>â€œ0x01a3de14: mov       %eax,0x150(%esi)           ; â€¦89865001 0000â€è¿™ä¸€å¥æ˜¯èµ‹å€¼æ“ä½œï¼Œç›¸å½“äºâ€œinstance = new Singleton();â€è¿™å¥è¯ï¼Ÿ</li><li>â€œadd1 $0x0,(%esp)â€ç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼›</li><li>å†…å­˜å±éšœï¼ˆMemory Barrieræˆ– Memory Fenceï¼‰ä½œç”¨ï¼šé‡æ’åºæ—¶ï¼Œä¸èƒ½æŠŠ åé¢çš„æŒ‡ä»¤ é‡æ’åºåˆ° å†…å­˜å±éšœ ä¹‹å‰çš„ä½ç½®<ul><li>ä¸¾ä¸ªä¾‹å­ï¼Œå°±å¥½æ¯”emmä¹‹å‰é‚£ä¸ªä»£ç å—ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹Aä¸çº¿ç¨‹Bï¼›çº¿ç¨‹Aè´Ÿè´£è¯»å–é…ç½®ä¿¡æ¯ï¼›çº¿ç¨‹Bç­‰å¾…çº¿ç¨‹Aåˆå§‹åŒ–é…ç½®ä¿¡æ¯å®Œæˆï¼›å®Œæˆä¹‹åè¿›è¡Œä½¿ç”¨çº¿ç¨‹Aåˆå§‹åŒ–å¥½çš„é…ç½®ä¿¡æ¯ï¼›åœ¨è¿™å½“ä¸­å¦‚æœçº¿ç¨‹Aå½“ä¸­â€œinitialized=trueâ€è¿™å¥è¯æå‰æ‰§è¡Œï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´çº¿ç¨‹Bçš„åˆ¤æ–­å¤±è¯¯ä¸ä¼šå†æ‰§è¡Œsleep()ï¼Œä»è€Œæ‰§è¡Œä¸‹é¢çš„doSomethingWithConfig()æ–¹æ³•ï¼›è€Œæ­¤æ—¶æ‰§è¡Œè¿™ä¸ªæ–¹æ³•å°±æœ‰å¯èƒ½ä¼šå‡ºé”™ï¼›</li></ul></li><li>â€œadd1 $0x0,(%esp)â€å½“ä¸­çš„espæŒ‡çš„æ˜¯ESPå¯„å­˜å™¨</li><li>â€œadd1 $0x0,(%esp)â€è¯¥æŒ‡ä»¤ä¸ºä¸€ä¸ªç©ºæ“ä½œ<ul><li>è¯¥ ç©ºæ“ä½œ å¯¼è‡´ æœ¬CPU çš„ Cache å†™å…¥äº† å†…å­˜ï¼›</li><li>æœ¬CPUçš„Cacheå†™å…¥å†…å­˜ ç›¸å½“äº Cacheä¸­çš„å˜é‡ åšäº†ä¸€æ¬¡â€œstoreâ€ä¸â€œwriteâ€ï¼Œä¹Ÿå°±æ˜¯ åŒæ­¥å›å†…å­˜ çš„æ„æ€ï¼›</li><li>é€šè¿‡å°† æœ¬CPUçš„Cacheå†™å…¥å†…å­˜ çš„è¯¥ç©ºæ“ä½œï¼Œä»è€Œä½¿å¾—volatileå˜é‡ çš„ä¿®æ”¹å¯¹å…¶ä»–CPUç«‹å³å¯è§</li><li>è¿™ä¸ªç©ºæ“ä½œæ˜¯ä¸æ˜¯ä¹Ÿå°±æ˜¯ä¸€ä¸ªåˆ·æ–°çš„æ“ä½œï¼Ÿç±»ä¼¼ï¼Ÿ</li><li>æ„æ€ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªESPå¯„å­˜å™¨çš„å€¼ä¸æ˜¯åŠ 0å—ï¼Œé‚£è¿™ä¸ªESPå¯„å­˜å™¨çš„å€¼è¿™ä¸ªåº”è¯¥æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç„¶ååŠ è¿™ä¸ª0å¯¹è¿™ä¸ªå¸¸é‡å¹¶ä¸ä¼šèµ·åˆ°ä»€ä¹ˆå½±å“ï¼Œä½†æ˜¯å½“ä¸­ä¼šæœ‰ä¸€ä¸ªå†™æ“ä½œï¼Œä¹Ÿå°±æ˜¯assignè¿™ä¸ªæ“ä½œï¼›å› ä¸ºæ‰§è¡Œ8ä¸ªæ“ä½œä¸­å…¶ä¸­çš„è§„åˆ™æœ‰ä¸€æ¡æ˜¯ï¼šä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› åœ°ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œï¼‰æŠŠæ•°æ®ä»çº¿ç¨‹çš„å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ã€‚</li><li>æ‰€ä»¥ä¼šå»é€šè¿‡è¿™æ ·ä¸€ä¸ªç©ºæ“ä½œï¼Œè®©å‰é¢çš„ volatileå˜é‡ çš„ä¿®æ”¹ å¯¹å…¶ä»–CPUç«‹å³å¯è§</li><li>å¯¹äº†ï¼Œè¿™ä¸ªCPUï¼Œå…¶ä»–CPUä¹Ÿå°±ç›¸å½“äºæ˜¯ä¸»å†…å­˜äº†æ˜¯å§</li></ul></li></ul></blockquote><p>é‚£ä¸ºä½•è¯´ å®ƒç¦æ­¢æŒ‡ä»¤é‡æ’åº å‘¢ï¼Ÿ<br>ä» ç¡¬ä»¶æ¶æ„ ä¸Šè®²ï¼ŒæŒ‡ä»¤é‡æ’åº æ˜¯æŒ‡ CPU é‡‡ç”¨äº† å…è®¸å°† å¤šæ¡æŒ‡ä»¤ ä¸æŒ‰ ç¨‹åºè§„å®šçš„é¡ºåº åˆ†å¼€å‘é€ç»™ å„ç›¸åº” ç”µè·¯å•å…ƒ å¤„ç†ã€‚<br>ä½†å¹¶ä¸æ˜¯è¯´ æŒ‡ä»¤ä»»æ„é‡æ’ï¼Œ CPU éœ€è¦èƒ½ æ­£ç¡®å¤„ç† æŒ‡ä»¤ ä¾èµ–æƒ…å†µ ä»¥ä¿éšœ ç¨‹åº èƒ½å¾—å‡º æ­£ç¡®çš„æ‰§è¡Œç»“æœã€‚</p><p>è­¬å¦‚<br>æŒ‡ä»¤1 æŠŠ åœ°å€A ä¸­çš„ å€¼ åŠ 10ï¼Œ<br>æŒ‡ä»¤2 æŠŠ åœ°å€A ä¸­çš„ å€¼ ä¹˜ä»¥2ï¼Œ<br>æŒ‡ä»¤3 æŠŠ åœ°å€B ä¸­çš„ å€¼ å‡å»3ï¼Œ<br>è¿™æ—¶ æŒ‡ä»¤1å’ŒæŒ‡ä»¤2 æ˜¯æœ‰ä¾èµ–çš„ï¼Œ<br>å®ƒä»¬ä¹‹é—´çš„é¡ºåº ä¸èƒ½é‡æ’â€”â€”â€“ï¼ˆA+10ï¼‰<em>2å’Œ A</em>2+10æ˜¾ç„¶ä¸ç›¸ç­‰ï¼Œ<br>ä½†æŒ‡ä»¤3 å¯ä»¥é‡æ’åˆ°æŒ‡ä»¤1ã€2ä¹‹å‰æˆ–è€…ä¸­é—´ï¼Œ<br>åªè¦ä¿è¯CPUæ‰§è¡Œåé¢ ä¾èµ–åˆ°Aã€Bå€¼çš„æ“ä½œæ—¶èƒ½è·å–åˆ°æ­£ç¡®çš„Aå’ŒBå€¼å³å¯ã€‚</p><p>æ‰€ä»¥åœ¨ æœ¬å†…CPUä¸­ï¼ˆè¿™ä¸ªåœ°æ–¹ï¼Œæœ¬å†…ï¼Ÿemmï¼Œæ˜¯å¦æ˜¯æƒ³è¯´çš„æ˜¯æœ¬å†…å­˜or æœ¬CPUå•Šï¼Ÿï¼‰ï¼Œé‡æ’åºçœ‹èµ·æ¥ä¾ç„¶æ˜¯æœ‰åºçš„ã€‚<br>å› æ­¤ï¼Œ lock add1 $0x0,(%esp) æŒ‡ä»¤ æŠŠ ä¿®æ”¹ åŒæ­¥ åˆ° å†…å­˜æ—¶ï¼Œæ„å‘³ç€æ‰€æœ‰ä¹‹å‰çš„ æ“ä½œ éƒ½å·²ç» æ‰§è¡Œå®Œæˆï¼Œè¿™æ ·ä¾¿å½¢æˆäº†â€œæŒ‡ä»¤é‡æ’åºæ— æ³•è¶Šè¿‡å†…å­˜å±éšœâ€çš„æ•ˆæœã€‚</p><p>è§£å†³äº† volatile çš„è¯­ä¹‰é—®é¢˜ï¼Œå†æ¥çœ‹çœ‹åœ¨ä¼—å¤šä¿éšœå¹¶å‘å®‰å…¨çš„å·¥å…·ä¸­é€‰ç”¨ volatile çš„æ„ä¹‰â€”â€”-å®ƒèƒ½è®©æˆ‘ä»¬çš„ä»£ç æ¯”ä½¿ç”¨å…¶ä»–çš„åŒæ­¥å·¥å…·ä¼šæ›´å¿«å—ï¼Ÿ</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œvolatile çš„ åŒæ­¥æœºåˆ¶ çš„æ€§èƒ½ ç¡®å®è¦ä¼˜äº é”ï¼ˆä½¿ç”¨ synchronized å…³é”®å­— æˆ– java.util.concurrentåŒ…é‡Œé¢çš„é”ï¼‰ï¼Œ<br>ä½†æ˜¯ç”±äº è™šæ‹Ÿæœº å¯¹ é” å®è¡Œçš„è®¸å¤š æ¶ˆé™¤å’Œä¼˜åŒ–ï¼Œä½¿å¾—æˆ‘ä»¬å¾ˆéš¾é‡åŒ–åœ°è®¤ä¸º volatile å°±ä¼šæ¯” synchronized å¿«å¤šå°‘ã€‚  </p><p>å¦‚æœè®© volatile è‡ªå·±ä¸è‡ªå·±æ¯”è¾ƒï¼Œé‚£å¯ä»¥ç¡®å®šä¸€ä¸ªåŸåˆ™ï¼š<br>volatileå˜é‡ è¯»æ“ä½œçš„æ€§èƒ½æ¶ˆè€— æ¯” æ™®é€šå˜é‡å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œä½†æ˜¯ å†™æ“ä½œ åˆ™å¯èƒ½ ä¼šæ…¢ä¸€äº›ï¼›<br>å› ä¸ºå®ƒéœ€è¦ åœ¨æœ¬åœ°ä»£ç ä¸­ æ’å…¥è®¸å¤š å†…å­˜å±éšœæŒ‡ä»¤ æ¥ä¿è¯ å¤„ç†å™¨ ä¸å‘ç”Ÿ ä¹±åºæ‰§è¡Œã€‚</p><p>ä¸è¿‡å³ä¾¿å¦‚æ­¤ï¼Œå¤§å¤šæ•°åœºæ™¯ä¸‹ volatile çš„æ€»å¼€é”€ ä»ç„¶è¦æ¯” é” ä½ï¼Œ<br>æˆ‘ä»¬åœ¨ volatileä¸é” ä¸­é€‰æ‹©çš„å”¯ä¸€ä¾æ®ä»…ä»…æ˜¯ volatileçš„è¯­ä¹‰ èƒ½å¦æ»¡è¶³ä½¿ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</p><p>åœ¨æœ¬èŠ‚çš„æœ€åï¼Œæˆ‘ä»¬å›å¤´çœ‹ä¸€ä¸‹ Javaå†…å­˜æ¨¡å‹ ä¸­å¯¹ volatileå˜é‡ å®šä¹‰çš„ç‰¹æ®Šè§„åˆ™ã€‚</p><p>å‡å®š T è¡¨ç¤ºä¸€ä¸ªçº¿ç¨‹ï¼ŒV å’Œ W åˆ†åˆ«è¡¨ç¤º ä¸¤ä¸ª volatileå‹å˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œreadã€loadã€useã€assignã€storeå’Œwrite æ“ä½œæ—¶éœ€è¦æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li>åªæœ‰å½“ çº¿ç¨‹ T å¯¹ å˜é‡ V æ‰§è¡Œçš„å‰ä¸€ä¸ªåŠ¨ä½œæ˜¯ load çš„æ—¶å€™ï¼Œçº¿ç¨‹ T æ‰èƒ½å¯¹ å˜é‡ V æ‰§è¡Œ useåŠ¨ä½œï¼›<ul><li>å¹¶ä¸”ï¼Œåªæœ‰å½“ çº¿ç¨‹ T å¯¹ å˜é‡ V æ‰§è¡Œçš„ åä¸€ä¸ªåŠ¨ä½œ æ˜¯ use çš„æ—¶å€™ï¼Œçº¿ç¨‹ T æ‰èƒ½å¯¹ å˜é‡ V æ‰§è¡Œ load åŠ¨ä½œã€‚</li><li>çº¿ç¨‹ T å¯¹ å˜é‡ V çš„ useåŠ¨ä½œ å¯ä»¥è®¤ä¸ºæ˜¯ å’Œçº¿ç¨‹ T å¯¹ å˜é‡ V çš„ loadã€readåŠ¨ä½œç›¸å…³è”ï¼Œå¿…é¡»è¿ç»­ä¸€èµ·å‡ºç°<ul><li>ï¼ˆè¿™æ¡ è§„åˆ™ è¦æ±‚åœ¨ å·¥ä½œå†…å­˜ ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨ V å‰éƒ½å¿…é¡»å…ˆä» ä¸»å†…å­˜ åˆ·æ–°æœ€æ–°çš„å€¼ï¼Œç”¨äºä¿è¯ èƒ½çœ‹è§ å…¶ä»–çº¿ç¨‹ å¯¹ å˜é‡ V æ‰€åšçš„ä¿®æ”¹åçš„å€¼ï¼‰ã€‚</li></ul></li></ul></li><li>åªæœ‰å½“ çº¿ç¨‹ T å¯¹ å˜é‡ V æ‰§è¡Œçš„å‰ä¸€ä¸ªåŠ¨ä½œæ˜¯ assign çš„æ—¶å€™ï¼Œçº¿ç¨‹ T æ‰èƒ½å¯¹ å˜é‡ V æ‰§è¡Œ store åŠ¨ä½œï¼›<ul><li>å¹¶ä¸”ï¼Œåªæœ‰å½“ çº¿ç¨‹ T å¯¹å˜é‡ V æ‰§è¡Œçš„ åä¸€ä¸ªåŠ¨ä½œ æ˜¯ store çš„æ—¶å€™å¯ä»¥è®¤ä¸ºæ˜¯å’Œ çº¿ç¨‹ T å¯¹ å˜é‡ V çš„storeã€writeåŠ¨ä½œç›¸å…³è”ï¼Œå¿…é¡» è¿ç»­ ä¸€èµ·å‡ºç°<ul><li>ï¼ˆè¿™æ¡ è§„åˆ™ è¦æ±‚åœ¨ å·¥ä½œå†…å­˜ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹ V åéƒ½å¿…é¡»ç«‹åˆ» åŒæ­¥å› ä¸»å†…å­˜ ä¸­ï¼Œç”¨äºä¿è¯ å…¶ä»–çº¿ç¨‹ å¯ä»¥çœ‹åˆ° è‡ªå·±å¯¹å˜é‡ V æ‰€åšçš„ä¿®æ”¹ï¼‰</li></ul></li></ul></li><li>å‡å®š åŠ¨ä½œ A æ˜¯ çº¿ç¨‹ T å¯¹ å˜é‡ V å®æ–½çš„ use æˆ– assign åŠ¨ä½œï¼›<br>å‡å®š åŠ¨ä½œ F æ˜¯å’Œ åŠ¨ä½œ A ç›¸å…³è”çš„ load æˆ– store åŠ¨ä½œï¼Œ<br>å‡å®š åŠ¨ä½œ P æ˜¯å’Œ åŠ¨ä½œ F ç›¸å…³è”çš„ read æˆ– write åŠ¨ä½œï¼›<br>ç±»ä¼¼çš„ï¼Œ<br>å‡å®š åŠ¨ä½œ B æ˜¯ çº¿ç¨‹ T å¯¹ å˜é‡ W å®æ–½çš„ use æˆ– assign åŠ¨ä½œï¼Œ<br>å‡å®š åŠ¨ä½œ G æ˜¯å’ŒåŠ¨ä½œ B ç›¸å…³è”çš„ load æˆ– store åŠ¨ä½œï¼Œ<br>å‡å®š åŠ¨ä½œ Q æ˜¯å’ŒåŠ¨ä½œ G ç›¸åº”çš„å¯¹ å˜é‡ W çš„ readæˆ–write åŠ¨ä½œã€‚<br>å¦‚æœ A å…ˆäº Bï¼Œé‚£ä¹ˆ P å…ˆäº Q<ul><li>ï¼ˆè¿™æ¡ è§„åˆ™ è¦æ±‚ volatile ä¿®é¥°çš„å˜é‡ ä¸ä¼šè¢« æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œä¿è¯ ä»£ç çš„æ‰§è¡Œé¡ºåº å’Œ ç¨‹åºçš„é¡ºåº ç›¸åŒï¼‰</li></ul></li></ul><blockquote><p>ç†è§£ä¸ºå°±å¥½åƒæ˜¯ä¸€ä¸ªè¦ read-load-use åŠªåŠ›åˆ·æ–°ï¼›ä¸€ä¸ªassign-store-write åŠªåŠ›æ›´æ–°ä¸€æ ·</p></blockquote><h5 id="å¯¹äº-long-å’Œ-double-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#å¯¹äº-long-å’Œ-double-å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="å¯¹äº long å’Œ double å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>å¯¹äº long å’Œ double å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h5><p>javaå†…å­˜æ¨¡å‹ è¦æ±‚ lockã€unlockã€readã€loadã€useã€assignã€storeã€write è¿™ä¸ª 8ä¸ªæ“ä½œ éƒ½å…·æœ‰ åŸå­æ€§ï¼Œ<br>ä½†æ˜¯å¯¹äº 64ä½çš„æ•°æ®ç±»å‹ï¼ˆ long å’Œ double ï¼‰ï¼Œåœ¨æ¨¡å‹ä¸­ç‰¹åˆ«å®šä¹‰äº†ä¸€æ¡ç›¸å¯¹å®½æ¾çš„è§„å®šï¼šå…è®¸ è™šæ‹Ÿæœº å°† æ²¡æœ‰è¢« volatile ä¿®é¥°çš„ 64ä½æ•°æ®çš„ è¯»å†™æ“ä½œ åˆ’åˆ†ä¸º ä¸¤æ¬¡32ä½çš„æ“ä½œ æ¥è¿›è¡Œï¼Œå³å…è®¸ è™šæ‹Ÿæœº å®ç°é€‰æ‹© å¯ä»¥ ä¸ä¿è¯64ä½æ•°æ®ç±»å‹çš„ loadã€storeã€readå’Œwriteè¿™ä¸ª4ä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œ<br>è¿™ç‚¹å°±æ˜¯æ‰€è°“çš„ longå’Œdouble çš„éåŸå­æ€§åå®šï¼ˆNonatomic Treatment of double and long Variablesï¼‰ã€‚</p><p>å¦‚æœæœ‰ å¤šä¸ªçº¿ç¨‹ å…±äº«ä¸€ä¸ª å¹¶æœªå£°æ˜ä¸º volatileçš„ long æˆ– double ç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”åŒæ—¶å¯¹å®ƒä»¬è¿›è¡Œ è¯»å–å’Œä¿®æ”¹ æ“ä½œï¼Œ<br>é‚£ä¹ˆ æŸäº›çº¿ç¨‹ å¯èƒ½ä¼š è¯»å–åˆ°ä¸€ä¸ª æ—¢éåŸå€¼ï¼Œä¹Ÿä¸æ˜¯å…¶ä»–çº¿ç¨‹ä¿®æ”¹å€¼çš„ ä»£è¡¨äº† â€œåŠä¸ªå˜é‡â€çš„æ•°å€¼ã€‚</p><p>ä¸è¿‡è¿™ç§è¯»å–åˆ° â€œåŠä¸ªå˜é‡â€çš„æƒ…å†µ éå¸¸ç½•è§ï¼ˆåœ¨ç›®å‰ å•†ç”¨javaè™šæ‹Ÿæœº ä¸­ä¸ä¼šå‡ºç°ï¼‰ï¼Œ<br>å› ä¸º javaå†…å­˜æ¨¡å‹ è™½ç„¶å…è®¸è™šæ‹Ÿæœºä¸æŠŠ longå’Œdouble å˜é‡çš„ è¯»å†™ å®ç°æˆåŸå­æ“ä½œï¼Œ<br>ä½†å…è®¸ è™šæ‹Ÿæœº é€‰æ‹©æŠŠè¿™äº›æ“ä½œå®ç°ä¸º å…·æœ‰åŸå­æ€§çš„æ“ä½œï¼Œè€Œä¸”è¿˜ â€œå¼ºçƒˆå»ºè®®â€ è™šæ‹Ÿæœº è¿™æ ·å®ç°ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç›®å‰å„ç§å¹³å°ä¸‹çš„ å•†ç”¨è™šæ‹Ÿæœº å‡ ä¹éƒ½é€‰æ‹©æŠŠ 64ä½æ•°æ®çš„è¯»å†™æ“ä½œ ä½œä¸º åŸå­æ“ä½œ æ¥å¯¹å¾…ï¼Œ<br>å› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ ä¸€èˆ¬ä¸éœ€è¦æŠŠç”¨åˆ°çš„ longå’Œdouble å˜é‡ä¸“é—¨å£°æ˜ä¸º volatileã€‚</p><h5 id="åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§"><a href="#åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§" class="headerlink" title="åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§"></a>åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§</h5><p>ä»‹ç»å®Œ Javaå†…å­˜æ¨¡å‹ çš„ ç›¸å…³æ“ä½œå’Œè§„åˆ™ï¼Œ<br>æˆ‘ä»¬å†æ•´ä½“å›é¡¾ä¸€ä¸‹ è¿™ä¸ªæ¨¡å‹çš„ç‰¹å¾ã€‚</p><p>Javaå†…å­˜æ¨¡å‹ æ˜¯å›´ç»•ç€åœ¨ å¹¶å‘è¿‡ç¨‹ä¸­ å¦‚ä½•å¤„ç†åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ è¿™3ä¸ªç‰¹å¾æ¥å»ºç«‹çš„ï¼Œ<br>æˆ‘ä»¬é€ä¸ªæ¥çœ‹ä¸€ä¸‹å“ªäº›æ“ä½œå®ç°äº†è¿™3ä¸ªç‰¹æ€§ã€‚</p><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼šç”± Javaå†…å­˜æ¨¡å‹ æ¥ç›´æ¥ä¿è¯çš„ åŸå­æ€§å˜é‡æ“ä½œ åŒ…æ‹¬ readã€loadã€assignã€useã€storeå’Œwrite</p><p>æˆ‘ä»¬å¤§è‡´å¯ä»¥è®¤ä¸º åŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®è¯»å†™ æ˜¯å…·å¤‡åŸå­æ€§çš„ï¼ˆä¾‹å¤–å°±æ˜¯ longå’Œdouble çš„éåŸå­æ€§åå®šï¼Œè¯»è€…åªè¦çŸ¥é“è¿™ä»¶äº‹æƒ…å°±å¯ä»¥äº†ï¼Œæ— éœ€å¤ªè¿‡åœ¨æ„è¿™äº›å‡ ä¹ä¸ä¼šå‘ç”Ÿçš„ä¾‹å¤–æƒ…å†µï¼‰</p><p>å¦‚æœ åº”ç”¨åœºæ™¯ éœ€è¦ä¸€ä¸ª æ›´å¤§èŒƒå›´çš„ åŸå­æ€§ä¿è¯ï¼ˆç»å¸¸ä¼šé‡åˆ°ï¼‰ï¼ŒJavaå†…å­˜æ¨¡å‹è¿˜æä¾›äº†äº† lockå’Œunlock æ“ä½œæ¥æ»¡è¶³è¿™ç§éœ€æ±‚ï¼Œ </p><p>å°½ç®¡ è™šæ‹Ÿæœº æœªæŠŠ lockå’Œunlock æ“ä½œç›´æ¥å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œä½†æ˜¯å´æä¾›äº† æ›´é«˜å±‚æ¬¡çš„å­—èŠ‚ç æŒ‡ä»¤ monitorenterå’Œmonitorexit æ¥ éšå¼åœ° ä½¿ç”¨è¿™ä¸¤ä¸ªæ“ä½œï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤åæ˜ åˆ°Javaä»£ç ä¸­ å°±æ˜¯ åŒæ­¥å—â€”â€“synchronizedå…³é”®å­—ï¼Œå› æ­¤ synchronized å—ä¹‹é—´çš„æ“ä½œä¹Ÿå…·å¤‡åŸå­æ€§ã€‚</p><p><strong>å¯è§æ€§ï¼ˆVisibilityï¼‰</strong>ï¼šå¯è§æ€§ æ˜¯æŒ‡å½“ ä¸€ä¸ªçº¿ç¨‹ ä¿®æ”¹äº† å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹ èƒ½å¤Ÿ ç«‹å³å¾—çŸ¥ è¿™ä¸ªä¿®æ”¹ã€‚</p><p>ä¸Šæ–‡åœ¨è®²è§£ volatileå˜é‡ çš„æ—¶å€™æˆ‘ä»¬å·²è¯¦ç»†è®¨è®ºè¿‡è¿™ä¸€ç‚¹ã€‚</p><p>Javaå†…å­˜æ¨¡å‹ æ˜¯é€šè¿‡åœ¨ å˜é‡ä¿®æ”¹å å°† æ–°å€¼ åŒæ­¥å› ä¸»å†…å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ ä» ä¸»å†…å­˜ åˆ·æ–°å˜é‡å€¼ è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸º ä¼ é€’åª’ä»‹ çš„æ–¹å¼æ¥å®ç°å¯è§æ€§çš„ï¼Œæ— è®ºæ˜¯ æ™®é€šå˜é‡ è¿˜æ˜¯ volatileå˜é‡ éƒ½æ˜¯å¦‚æ­¤</p><p>æ™®é€šå˜é‡ä¸volatileå˜é‡ çš„åŒºåˆ«æ˜¯ï¼švolatile çš„ ç‰¹æ®Šè§„åˆ™ ä¿è¯äº† æ–°å€¼ èƒ½ç«‹å³ åŒæ­¥åˆ° ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ ä½¿ç”¨å‰ ç«‹å³ä» ä¸»å†…å­˜åˆ·æ–°ã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥è¯´ volatile ä¿è¯äº† å¤šçº¿ç¨‹æ“ä½œæ—¶ å˜é‡çš„å¯è§æ€§ï¼Œè€Œ æ™®é€šå˜é‡ åˆ™ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚</p><p>é™¤äº† volatile ä¹‹å¤–ï¼ŒJavaè¿˜æœ‰ä¸¤ä¸ªå…³é”®å­— èƒ½å®ç°å¯è§æ€§ï¼Œå³ synchronized å’Œ finalã€‚</p><p>åŒæ­¥å— çš„ å¯è§æ€§ æ˜¯ç”± â€œå¯¹ä¸€ä¸ª å˜é‡ æ‰§è¡Œ unlock æ“ä½œä¹‹å‰ï¼Œ å¿…é¡»å…ˆæŠŠ æ­¤å˜é‡ åŒæ­¥å› ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreã€writeæ“ä½œï¼‰â€è¿™æ¡è§„åˆ™è·å¾—çš„ï¼Œ</p><p>è€Œ final å…³é”®å­— çš„å¯è§æ€§æ˜¯æŒ‡ï¼šè¢« final ä¿®é¥°çš„å­—æ®µ åœ¨æ„é€ å™¨ä¸­ ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œ å¹¶ä¸”æ„é€ å™¨ æ²¡æœ‰æŠŠâ€œthisâ€çš„å¼•ç”¨ ä¼ é€’å‡ºå»ï¼ˆthiså¼•ç”¨é€ƒé€¸ æ˜¯ä¸€ä»¶å¾ˆå±é™©çš„äº‹æƒ…ï¼Œå…¶ä»–çº¿ç¨‹ æœ‰å¯èƒ½ é€šè¿‡è¿™ä¸ªå¼•ç”¨ è®¿é—®åˆ° â€œåˆå§‹åŒ–äº†ä¸€åŠâ€ çš„å¯¹è±¡ï¼‰ï¼Œé‚£åœ¨ å…¶ä»–çº¿ç¨‹ ä¸­å°±èƒ½çœ‹è§ finalå­—æ®µçš„å€¼ã€‚</p><p>å¦‚ä»£ç æ¸…å•12-7æ‰€ç¤ºï¼Œå˜é‡iå’Œjéƒ½å…·å¤‡å¯è§æ€§ï¼Œå®ƒä»¬æ— éœ€åŒæ­¥ å°±èƒ½è¢« å…¶ä»–çº¿ç¨‹æ­£ç¡®è®¿é—®ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-7 final ä¸å¯è§æ€§</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">public static final int i;</span><br><span class="line"></span><br><span class="line">public final int j;</span><br><span class="line"></span><br><span class="line">static &#123;</span><br><span class="line"><span class="code">  i = 0;</span></span><br><span class="line"><span class="code">  // do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="code">  // ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ æ„é€ å‡½æ•°ä¸­ åˆå§‹åŒ–</span></span><br><span class="line"><span class="code">  j = 0;</span></span><br><span class="line"><span class="code">  // do something</span></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p><strong>æœ‰åºæ€§ï¼ˆOrderingï¼‰</strong>ï¼šJavaå†…å­˜æ¨¡å‹ çš„ æœ‰åºæ€§ åœ¨å‰é¢è®²è§£ volatile æ—¶ä¹Ÿè¯¦ç»†åœ°è®¨è®ºè¿‡äº†ï¼Œ<br>Javaç¨‹åº ä¸­  å¤©ç„¶çš„æœ‰åºæ€§ å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼š</p><p>å¦‚æœåœ¨ æœ¬çº¿ç¨‹ å†…è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œ éƒ½æ˜¯ æœ‰åºçš„ï¼›<br>å¦‚æœåœ¨ ä¸€ä¸ªçº¿ç¨‹ä¸­ è§‚å¯Ÿ å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ æ— åºçš„ã€‚</p><p>å‰åŠå¥æ˜¯æŒ‡ â€œçº¿ç¨‹å†… è¡¨ç°ä¸º ä¸²è¡Œçš„è¯­ä¹‰â€ï¼ˆWithin-Thread As-If-Serial Semanticsï¼‰ï¼Œ<br>ååŠå¥æ˜¯æŒ‡ â€œæŒ‡ä»¤é‡æ’åºâ€ç°è±¡å’Œ â€œå·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿâ€ç°è±¡ã€‚</p><p>Javaè¯­è¨€ æä¾›äº† volatileå’Œsynchronized ä¸¤ä¸ªå…³é”®å­— æ¥ ä¿è¯ çº¿ç¨‹ä¹‹é—´ æ“ä½œçš„ æœ‰åºæ€§ï¼Œ<br>volatileå…³é”®å­— æœ¬èº«å°±åŒ…å«äº† ç¦æ­¢æŒ‡ä»¤é‡æ’åº çš„è¯­ä¹‰ï¼Œ<br>è€Œ synchronized åˆ™æ˜¯ç”± â€œä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹ å¯¹å…¶è¿›è¡Œ lock æ“ä½œâ€è¿™æ¡è§„åˆ™è·å¾—çš„ï¼Œè¿™æ¡è§„åˆ™ å†³å®šäº† æŒæœ‰åŒä¸€ä¸ªé”çš„ä¸¤ä¸ªåŒæ­¥å— åªèƒ½ ä¸²è¡Œåœ°è¿›å…¥ï¼›</p><p>ä»‹ç»å®Œ å¹¶å‘ ä¸­ 3ç§ é‡è¦çš„ç‰¹æ€§åï¼Œè¯»è€…æœ‰æ²¡æœ‰å‘ç° synchronizedå…³é”®å­— åœ¨éœ€è¦è¿™3ç§ç‰¹æ€§çš„æ—¶å€™ éƒ½å¯ä»¥ä½œä¸ºå…¶ä¸­ä¸€ç§çš„ è§£å†³æ–¹æ¡ˆï¼Ÿ<br>çœ‹èµ·æ¥å¾ˆâ€œä¸‡èƒ½â€å§ã€‚<br>çš„ç¡®ï¼Œå¤§éƒ¨åˆ†çš„ å¹¶å‘æ§åˆ¶ æ“ä½œéƒ½èƒ½ä½¿ç”¨ synchronized æ¥å®Œæˆã€‚<br>synchronized çš„â€œä¸‡èƒ½â€ ä¹Ÿé—´æ¥é€ å°±äº† å®ƒè¢«ç¨‹åºå‘˜æ»¥ç”¨çš„ å±€é¢ï¼Œè¶Šâ€œä¸‡èƒ½â€çš„ å¹¶å‘æ§åˆ¶ï¼Œé€šå¸¸ä¼šä¼´éšç€è¶Šå¤§çš„ æ€§èƒ½å½±å“ï¼Œ<br>è¿™ç‚¹æˆ‘ä»¬å°†åœ¨ç¬¬13ç« è®²è§£ è™šæ‹Ÿæœºé”ä¼˜åŒ–æ—¶åœ¨ä»‹ç»ã€‚  </p><h5 id="å…ˆè¡Œå‘ç”ŸåŸåˆ™"><a href="#å…ˆè¡Œå‘ç”ŸåŸåˆ™" class="headerlink" title="å…ˆè¡Œå‘ç”ŸåŸåˆ™"></a>å…ˆè¡Œå‘ç”ŸåŸåˆ™</h5><p>å¦‚æœ Javaå†…å­˜æ¨¡å‹ ä¸­æ‰€æœ‰çš„ æœ‰åºæ€§ éƒ½ä»…ä»…ä¾é  volatile å’Œ synchronized æ¥å®Œæˆï¼Œé‚£ä¹ˆæœ‰ä¸€äº›æ“ä½œå°†ä¼šå˜å¾—å¾ˆ çƒ¦çï¼Œ<br>ä½†æ˜¯æˆ‘ä»¬åœ¨ç¼–å†™Javaå¹¶å‘ä»£ç çš„æ—¶å€™å¹¶æ²¡æœ‰æ„Ÿè§‰åˆ°è¿™ä¸€ç‚¹ï¼Œ<br>è¿™æ˜¯å› ä¸ºJavaè¯­è¨€ä¸­æœ‰ä¸€ä¸ª â€œå…ˆè¡Œå‘ç”Ÿâ€ï¼ˆhappens-beforeï¼‰ çš„ åŸåˆ™ã€‚<br>è¿™ä¸ªåŸåˆ™éå¸¸é‡è¦ï¼Œå®ƒæ˜¯ åˆ¤æ–­ æ•°æ®æ˜¯å¦ç«äº‰ã€çº¿ç¨‹æ˜¯å¦å®‰å…¨ çš„ ä¸»è¦ä¾æ®ï¼Œä¾é è¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡ æ¡è§„åˆ™ä¸€æ½å­åœ°è§£å†³ å¹¶å‘ç¯å¢ƒä¸‹ ä¸¤ä¸ªæ“ä½œä¹‹é—´æ˜¯å¦å¯èƒ½å­˜åœ¨å†²çªçš„æ‰€æœ‰é—®é¢˜ã€‚</p><p>ç°åœ¨å°±æ¥çœ‹çœ‹ â€œå…ˆè¡Œå‘ç”Ÿâ€åŸåˆ™ æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚<br>å…ˆè¡Œå‘ç”Ÿ æ˜¯ Javaå†…å­˜æ¨¡å‹ ä¸­å®šä¹‰çš„ ä¸¤é¡¹æ“ä½œ ä¹‹é—´çš„ ååºå…³ç³»ï¼Œ<br>å¦‚æœè¯´ æ“ä½œA å…ˆè¡Œå‘ç”Ÿäº æ“ä½œBï¼Œå…¶å®å°±æ˜¯è¯´ å‘ç”Ÿåœ¨æ“ä½œB ä¹‹å‰ï¼Œæ“ä½œA äº§ç”Ÿçš„å½±å“ èƒ½è¢« æ“ä½œB è§‚å¯Ÿåˆ°ï¼Œâ€œå½±å“â€ åŒ…æ‹¬ ä¿®æ”¹äº†å†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ã€å‘é€äº†æ¶ˆæ¯ã€è°ƒç”¨äº†æ–¹æ³•ç­‰ã€‚<br>è¿™å¥è¯ä¸éš¾ç†è§£ï¼Œä½†å®ƒ æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä»£ç æ¸…å•12-8ä¸­æ‰€ç¤ºçš„è¿™3å¥ä¼ªä»£ç ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-8 å…ˆè¡Œå‘ç”ŸåŸåˆ™ç¤ºä¾‹1</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ“ä½œåœ¨ çº¿ç¨‹A ä¸­æ‰§è¡Œ</span></span><br><span class="line">i = 1;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ“ä½œåœ¨ çº¿ç¨‹B ä¸­æ‰§è¡Œ</span></span><br><span class="line">j = i;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ“ä½œåœ¨ çº¿ç¨‹C ä¸­æ‰§è¡Œ</span></span><br><span class="line">i = 2;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>å‡è®¾ çº¿ç¨‹A ä¸­çš„æ“ä½œ â€œi=1;â€ å…ˆè¡Œå‘ç”Ÿäº çº¿ç¨‹B çš„æ“ä½œâ€œj=iâ€œ ï¼Œ<br>é‚£ä¹ˆå¯ä»¥ç¡®å®šåœ¨ çº¿ç¨‹B çš„æ“ä½œæ‰§è¡Œåï¼Œå˜é‡jçš„å€¼ä¸€å®šç­‰äº1ï¼Œ<br>å¾—å‡ºè¿™ä¸ªç»“è®ºçš„ä¾æ®æœ‰ä¸¤ä¸ªï¼š<br>ä¸€æ˜¯æ ¹æ® å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œ â€œi=1â€çš„ç»“æœå¯ä»¥è¢«è§‚å¯Ÿåˆ°ï¼›<br>äºŒæ˜¯ çº¿ç¨‹C è¿˜æ²¡â€œç™»åœºâ€ï¼Œ çº¿ç¨‹A æ“ä½œç»“æŸä¹‹åæ²¡æœ‰å…¶ä»–çº¿ç¨‹ ä¼šä¿®æ”¹å˜é‡içš„å€¼ã€‚</p><p>ç°åœ¨å†æ¥è€ƒè™‘ çº¿ç¨‹Cï¼Œæˆ‘ä»¬ä¾ç„¶ä¿æŒ çº¿ç¨‹A å’Œ çº¿ç¨‹B ä¹‹é—´çš„ å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œ<br>è€Œ çº¿ç¨‹C å‡ºç°åœ¨ çº¿ç¨‹A å’Œ çº¿ç¨‹B çš„æ“ä½œä¹‹é—´ï¼Œ<br>ä½†æ˜¯ çº¿ç¨‹C ä¸ çº¿ç¨‹B æ²¡æœ‰ å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œ<br>é‚£ j çš„å€¼ä¼šæ˜¯å¤šå°‘å‘¢?</p><p>ç­”æ¡ˆæ˜¯ä¸ç¡®å®šï¼<br>1å’Œ2éƒ½æœ‰å¯èƒ½ï¼Œå› ä¸º çº¿ç¨‹C å¯¹ å˜é‡i çš„å½±å“ å¯èƒ½ä¼šè¢« çº¿ç¨‹B è§‚å¯Ÿåˆ°ï¼Œ<br>ä¹Ÿå¯èƒ½ä¸ä¼šï¼Œ è¿™æ—¶å€™ çº¿ç¨‹B å°±å­˜åœ¨ è¯»å–åˆ° è¿‡æœŸæ•°æ®çš„é£é™©ï¼Œä¸å…·å¤‡ çº¿ç¨‹å®‰å…¨æ€§ã€‚</p><p>ä¸‹é¢æ˜¯ Javaå†…å­˜æ¨¡å‹ ä¸‹ä¸€äº›â€œå¤©ç„¶çš„â€å…ˆè¡Œå‘ç”Ÿå…³ç³»ï¼Œ<br>è¿™äº› å…ˆè¡Œå‘ç”Ÿå…³ç³» æ— éœ€ä»»ä½• åŒæ­¥å™¨ ååŠ©ï¼Œå¯ä»¥åœ¨ç¼–ç ä¸­ç›´æ¥ä½¿ç”¨ã€‚</p><p>å¦‚æœ ä¸¤ä¸ªæ“ä½œ ä¹‹é—´çš„å…³ç³»ä¸åœ¨æ­¤åˆ—ï¼Œå¹¶ä¸”æ— æ³•ä»ä¸‹åˆ—è§„åˆ™æ¨å¯¼å‡ºæ¥çš„è¯ï¼Œå®ƒä»¬å°± æ²¡æœ‰é¡ºåºæ€§ä¿éšœï¼Œè™šæ‹Ÿæœº å¯ä»¥å¯¹å®ƒä»¬ éšæ„åœ° è¿›è¡Œ é‡æ’åºã€‚</p><p><strong>ç¨‹åºæ¬¡åºè§„åˆ™ï¼ˆProgram Order Ruleï¼‰</strong>ï¼š<br>åœ¨ ä¸€ä¸ªçº¿ç¨‹ å†…ï¼ŒæŒ‰ç…§ ç¨‹åºä»£ç  é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œ å…ˆè¡Œå‘ç”Ÿäº ä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚<br>å‡†ç¡®åœ°è¯´ï¼Œåº”è¯¥æ˜¯ æ§åˆ¶æµé¡ºåº è€Œä¸æ˜¯ ç¨‹åºä»£ç é¡ºåºï¼Œ åº”ä¸ºè¦è€ƒè™‘ åˆ†æ”¯ã€å¾ªç¯ ç­‰ç»“æ„ã€‚</p><p><strong>*ç®¡ç¨‹é”å®šè§„åˆ™ï¼ˆMonitor Lock Ruleï¼‰</strong>ï¼š<br>ä¸€ä¸ª unlockæ“ä½œ å…ˆè¡Œå‘ç”Ÿäº åé¢å¯¹ åŒä¸€ä¸ªé” çš„ lockæ“ä½œã€‚<br>è¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯ åŒä¸€ä¸ªé”ï¼Œè€Œ â€œåé¢â€ æ˜¯æŒ‡ æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚</p><p><strong>volatile å˜é‡è§„åˆ™ï¼ˆVolatile Variable Ruleï¼‰</strong>ï¼š<br>å¯¹ ä¸€ä¸ª volatileå˜é‡ çš„ å†™æ“ä½œ å…ˆè¡Œå‘ç”Ÿäº åé¢å¯¹è¿™ä¸ªå˜é‡çš„ è¯»æ“ä½œï¼Œ<br>è¿™é‡Œçš„ â€œåé¢â€åŒæ ·æ˜¯æŒ‡ æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºã€‚</p><p><strong>çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼ˆThread Start Ruleï¼‰</strong>ï¼š<br>Thread å¯¹è±¡çš„ start() æ–¹æ³• å…ˆè¡Œå‘ç”Ÿäº æ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œã€‚</p><p><strong>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ï¼ˆThread Termination Ruleï¼‰</strong>ï¼š<br>çº¿ç¨‹ ä¸­çš„ æ‰€æœ‰æ“ä½œ éƒ½ å…ˆè¡Œå‘ç”Ÿäº å¯¹æ­¤çº¿ç¨‹çš„ ç»ˆæ­¢æ£€æµ‹ï¼Œ<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Thread.join()æ–¹æ³•ç»“æŸã€Thread.isAlive()çš„è¿”å›å€¼ ç­‰æ‰‹æ®µ æ£€æµ‹åˆ° çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œã€‚</p><p><strong>çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼ˆThread Interruption Ruleï¼‰</strong>ï¼š<br>å¯¹ çº¿ç¨‹ interrupt() æ–¹æ³•çš„è°ƒç”¨ å…ˆè¡Œå‘ç”Ÿäº è¢« ä¸­æ–­çº¿ç¨‹çš„ä»£ç  æ£€æµ‹åˆ° ä¸­æ–­äº‹ä»¶ çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡ Thread.interrupted()æ–¹æ³• æ£€æµ‹åˆ° æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿã€‚</p><p><strong>å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼ˆFinalizer Ruleï¼‰</strong>:<br>ä¸€ä¸ªå¯¹è±¡çš„ åˆå§‹åŒ– å®Œæˆï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸï¼‰ å…ˆè¡Œå‘ç”Ÿäº å®ƒçš„ finalize() æ–¹æ³•çš„å¼€å§‹ã€‚</p><p><strong>ä¼ é€’æ€§ï¼ˆTransitivityï¼‰</strong>:<br>å¦‚æœ æ“ä½œA å…ˆè¡Œå‘ç”Ÿäº æ“ä½œBï¼Œæ“ä½œB å…ˆè¡Œå‘ç”Ÿäº æ“ä½œCï¼Œé‚£å°±å¯ä»¥å¾—å‡º æ“ä½œA å…ˆè¡Œå‘ç”Ÿäº æ“ä½œC çš„ç»“è®ºã€‚</p><p>Javaè¯­è¨€ æ— é¡» ä»»ä½•åŒæ­¥æ‰‹æ®µä¿éšœ å°±èƒ½æˆç«‹çš„ å…ˆè¡Œå‘ç”Ÿè§„åˆ™ å°±åªæœ‰ä¸Šé¢è¿™äº›äº†ï¼Œ<br>ç¬”è€…æ¼”ç¤ºä¸€ä¸‹ å¦‚ä½•ä½¿ç”¨è¿™äº›è§„åˆ™å»åˆ¤å®š æ“ä½œé—´æ˜¯å¦å…·å¤‡é¡ºåºæ€§ï¼Œ<br>å¯¹äº è¯»å†™å…±äº«å˜é‡ çš„æ“ä½œæ¥è¯´ï¼Œå°±æ˜¯ çº¿ç¨‹æ˜¯å¦å®‰å…¨ï¼Œ<br>è¯»è€…è¿˜å¯ä»¥ä»ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­æ„Ÿå—ä¸€ä¸‹ â€œæ—¶é—´ä¸Šçš„å…ˆåé¡ºåºâ€ ä¸ â€œå…ˆè¡Œå‘ç”Ÿâ€ ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒã€‚<br>æ¼”ç¤ºä¾‹å­å¦‚ä»£ç æ¸…å•12-9æ‰€ç¤ºã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-9 å…ˆè¡Œå‘ç”ŸåŸåˆ™ç¤ºä¾‹2</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line">private int  value = 0;</span><br><span class="line"></span><br><span class="line">public void setValue(int value)&#123;</span><br><span class="line"><span class="code">  this.value=value;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public int getValue()&#123;</span><br><span class="line"><span class="code">  return value;</span></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ä»£ç æ¸…å•12-9ä¸­æ˜¾ç¤ºçš„æ˜¯ä¸€ç»„å†æ™®é€šä¸è¿‡çš„ getter/setter æ–¹æ³•ï¼Œ<br>å‡è®¾å­˜åœ¨ çº¿ç¨‹Aå’ŒBï¼Œ çº¿ç¨‹Aå…ˆï¼ˆæ—¶é—´ä¸Šçš„å…ˆåï¼‰è°ƒç”¨äº† â€œsetValueâ€ï¼Œ<br>ç„¶å çº¿ç¨‹B è°ƒç”¨äº† åŒä¸€ä¸ªå¯¹è±¡ çš„â€œgetValue()â€ï¼Œé‚£ä¹ˆ çº¿ç¨‹B æ”¶åˆ°çš„è¿”å›å€¼ æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æˆ‘ä»¬ä¾æ¬¡åˆ†æä¸€ä¸‹ å…ˆè¡Œå‘ç”ŸåŸåˆ™ ä¸­çš„å„é¡¹è§„åˆ™ï¼Œ<br>ç”±äº ä¸¤ä¸ªæ–¹æ³• åˆ†åˆ«ç”± çº¿ç¨‹Aå’Œçº¿ç¨‹B è°ƒç”¨ï¼Œä¸åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ ç¨‹åºæ¬¡åºè§„åˆ™ åœ¨è¿™é‡Œä¸é€‚ç”¨ï¼›</p><p>ç”±äº æ²¡æœ‰åŒæ­¥å—ï¼Œè‡ªç„¶å°±ä¸ä¼šå‘ç”Ÿ lockå’Œunlock æ“ä½œï¼Œæ‰€ä»¥ ç®¡ç¨‹é”å®šè§„åˆ™ ä¸é€‚ç”¨ï¼›</p><p>ç”±äº valueå˜é‡ æ²¡æœ‰è¢« volatileå…³é”®å­— ä¿®é¥°ï¼Œæ‰€ä»¥ volatileå˜é‡è§„åˆ™ ä¸é€‚ç”¨ï¼›</p><p>åé¢çš„ çº¿ç¨‹å¯åŠ¨ã€ç»ˆæ­¢ã€ä¸­æ–­è§„åˆ™å’Œå¯¹è±¡ç»ˆç»“è§„åˆ™ ä¹Ÿå’Œè¿™é‡Œå®Œå…¨æ²¡æœ‰å…³ç³»ã€‚</p><p>å› ä¸º æ²¡æœ‰ä¸€ä¸ªé€‚ç”¨çš„ å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼Œæ‰€ä»¥æœ€åä¸€æ¡ ä¼ é€’æ€§ ä¹Ÿæ— ä»è°ˆèµ·ï¼Œ</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ¤å®šå°½ç®¡ çº¿ç¨‹A åœ¨æ“ä½œæ—¶é—´ä¸Š å…ˆäº çº¿ç¨‹Bï¼Œä½†æ˜¯æ— æ³•ç¡®å®š çº¿ç¨‹B ä¸­â€œgetValue()â€æ–¹æ³•è¿”å›çš„ç»“æœï¼Œ<br>æ¢å¥è¯è¯´ï¼Œè¿™é‡Œé¢çš„æ“ä½œä¸æ˜¯ çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>é‚£æ€ä¹ˆä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è‡³å°‘æœ‰ä¸¤ç§æ¯”è¾ƒç®€å•çš„æ–¹æ¡ˆå¯ä»¥é€‰æ‹©ï¼š<br>è¦ä¹ˆæŠŠ getter/setter æ–¹æ³•éƒ½å®šä¹‰ä¸º synchronized æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥ç”°å‹‡ ç®¡ç¨‹é”å®šè§„åˆ™ï¼›</p><p>è¦ä¹ˆæŠŠ value å®šä¹‰ä¸º volatileå˜é‡ï¼Œç”±äº setteræ–¹æ³• å¯¹ valueçš„ä¿®æ”¹ ä¸ä¾èµ– valueçš„åŸå€¼ï¼Œæ»¡è¶³ volatileå…³é”®å­—ä½¿ç”¨åœºæ™¯ï¼Œ<br>è¿™æ ·å°±å¯ä»¥ å¥—ç”¨volatileå˜é‡è§„åˆ™ æ¥å®ç° å…ˆè¡Œå‘ç”Ÿå…³ç³»ã€‚</p><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š<br>ä¸€ä¸ªæ“ä½œ â€œæ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿâ€ ä¸ä»£è¡¨è¿™ä¸ªæ“ä½œ ä¼šæ˜¯ â€œå…ˆè¡Œå‘ç”Ÿâ€ï¼Œ<br>é‚£å¦‚æœ ä¸€ä¸ªæ“ä½œ â€œå…ˆè¡Œå‘ç”Ÿâ€ æ˜¯å¦å°±èƒ½æ¨å¯¼ è¿™ä¸ªæ“ä½œ å¿…å®šæ˜¯ â€œæ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿâ€ å‘¢ï¼Ÿ</p><p>å¾ˆé—æ†¾ï¼Œè¿™ä¸ªæ¨è®ºä¹Ÿæ˜¯ä¸æˆç«‹çš„ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯å¤šæ¬¡æåˆ°çš„ â€œæŒ‡ä»¤é‡æ’åºâ€ï¼Œ<br>æ¼”ç¤ºä¾‹å­å¦‚ä»£ç æ¸…å•12-10æ‰€ç¤ºã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                                ä»£ç æ¸…å• 12-10 å…ˆè¡Œå‘ç”ŸåŸåˆ™ç¤ºä¾‹3</span></span><br><span class="line">----------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ“ä½œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">----------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>ä»£ç æ¸…å•12-10çš„ ä¸¤æ¡èµ‹å€¼è¯­å¥ åœ¨ åŒä¸€ä¸ªçº¿ç¨‹ ä¹‹ä¸­ï¼Œ<br>æ ¹æ® ç¨‹åºæ¬¡åºè§„åˆ™ï¼Œ â€œint i=1â€ çš„æ“ä½œ å…ˆè¡Œå‘ç”Ÿäº â€œint j=2â€ï¼Œ<br>ä½†æ˜¯ â€œint j=2â€çš„ä»£ç å®Œå…¨å¯èƒ½å…ˆè¢« å¤„ç†å™¨ æ‰§è¡Œï¼Œè¿™å¹¶ä¸å½±å“ å…ˆè¡Œå‘ç”ŸåŸåˆ™çš„æ­£ç¡®æ€§ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ è¿™æ¡çº¿ç¨‹ ä¹‹ä¸­æ²¡æœ‰åŠæ³•æ„ŸçŸ¥åˆ°è¿™ç‚¹ã€‚</p><p>ä¸Šé¢ä¸¤ä¸ªä¾‹å­ç»¼åˆèµ·æ¥è¯æ˜äº†ä¸€ä¸ªç»“è®ºï¼šæ—¶é—´å…ˆåé¡ºåº ä¸ å…ˆè¡Œå‘ç”ŸåŸåˆ™ ä¹‹é—´åŸºæœ¬æ²¡æœ‰å¤ªå¤§çš„å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¡¡é‡ å¹¶å‘å®‰å…¨é—®é¢˜ çš„æ—¶å€™ä¸è¦å—åˆ° æ—¶é—´é¡ºåºçš„å¹²æ‰°ï¼Œä¸€åˆ‡å¿…é¡»ä»¥ å…ˆè¡Œå‘ç”ŸåŸåˆ™ ä¸ºå‡†ã€‚</p><h4 id="Javaä¸çº¿ç¨‹"><a href="#Javaä¸çº¿ç¨‹" class="headerlink" title="Javaä¸çº¿ç¨‹"></a>Javaä¸çº¿ç¨‹</h4><p>å¹¶å‘ ä¸ä¸€å®šè¦ ä¾èµ– å¤šçº¿ç¨‹ï¼ˆå¦‚PHPä¸­å¾ˆå¸¸è§çš„ å¤šè¿›ç¨‹å¹¶å‘ï¼‰ï¼Œ<br>ä½†æ˜¯åœ¨Javaé‡Œé¢è°ˆè®º å¹¶å‘ï¼Œå¤§å¤šæ•°éƒ½ä¸ çº¿ç¨‹ è„±ä¸å¼€å…³ç³»ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬è¿™æœ¬ä¹¦æ¢è®¨çš„è¯é¢˜æ˜¯ Javaè™šæ‹Ÿæœºçš„ç‰¹æ€§ï¼Œé‚£è®²åˆ° Javaçº¿ç¨‹ï¼Œæˆ‘ä»¬å°±ä» Javaçº¿ç¨‹ åœ¨ è™šæ‹Ÿæœºä¸­çš„å®ç° å¼€å§‹è®²èµ·ã€‚</p><h5 id="çº¿ç¨‹çš„å®ç°"><a href="#çº¿ç¨‹çš„å®ç°" class="headerlink" title="çº¿ç¨‹çš„å®ç°"></a>çº¿ç¨‹çš„å®ç°</h5><p>æˆ‘ä»¬çŸ¥é“ï¼Œçº¿ç¨‹ æ˜¯æ¯” è¿›ç¨‹ æ›´è½»é‡çº§ çš„ è°ƒåº¦æ‰§è¡Œå•ä½ï¼Œ<br>çº¿ç¨‹çš„å¼•å…¥ ï¼Œå¯ä»¥æŠŠ ä¸€ä¸ªè¿›ç¨‹çš„ èµ„æºåˆ†é… å’Œ æ‰§è¡Œè°ƒåº¦ åˆ†å¼€ï¼Œå„ä¸ªçº¿ç¨‹ æ—¢å¯ä»¥ å…±äº«è¿›ç¨‹èµ„æºï¼ˆå†…å­˜åœ°å€ã€æ–‡ä»¶I/Oç­‰ï¼‰ï¼Œåˆå¯ä»¥ç‹¬ç«‹è°ƒåº¦ï¼ˆçº¿ç¨‹ æ˜¯ CPU è°ƒåº¦ çš„ åŸºæœ¬å•ä½ï¼‰ã€‚</p><p>ä¸»æµçš„ æ“ä½œç³»ç»Ÿ éƒ½æä¾›äº† çº¿ç¨‹å®ç°ï¼ŒJavaè¯­è¨€åˆ™æä¾›äº† åœ¨ä¸åŒç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå¹³å°ä¸‹ å¯¹çº¿ç¨‹æ“ä½œçš„ç»Ÿä¸€å¤„ç†ï¼Œ<br>æ¯ä¸ªå·²ç»æ‰§è¡Œ start()ä¸”è¿˜æœªç»“æŸçš„ java.lang.Threadç±»çš„å®ä¾‹ï¼Œå°±ä»£è¡¨äº† ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>æˆ‘ä»¬æ³¨æ„åˆ° Threadç±»ä¸å¤§éƒ¨åˆ†çš„ Java API æœ‰æ˜¾è‘—çš„åŒºåˆ«ï¼Œ<br>ä»–çš„æ‰€æœ‰å…³é”®æ–¹æ³•éƒ½æ˜¯ å£°æ˜ä¸ºNativeçš„ã€‚</p><p>åœ¨ Java APIä¸­ï¼Œä¸€ä¸ª Native æ–¹æ³• å¾€å¾€æ„å‘³ç€ è¿™ä¸ªæ–¹æ³•æ²¡æœ‰ä½¿ç”¨ æˆ– æ— æ³•ä½¿ç”¨ å¹³å°æ— å…³çš„æ‰‹æ®µæ¥å®ç°ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯ä¸ºäº† æ‰§è¡Œæ•ˆç‡ è€Œä½¿ç”¨ Native æ–¹æ³•ï¼Œ ä¸è¿‡ï¼Œé€šå¸¸ æœ€é«˜æ•ˆç‡çš„æ‰‹æ®µ ä¹Ÿå°±æ˜¯ å¹³å°ç›¸å…³çš„æ‰‹æ®µï¼‰ã€‚</p><p>æ­£å› ä¸ºå¦‚æ­¤ï¼Œä½œè€…æŠŠæœ¬èŠ‚çš„æ ‡é¢˜å®šä¸º â€œçº¿ç¨‹çš„å®ç°â€ è€Œä¸æ˜¯ â€œJavaçº¿ç¨‹çš„å®ç°â€ã€‚</p><p>å®ç°çº¿ç¨‹ ä¸»è¦æœ‰3ä¸­æ–¹å¼ï¼š<br>ä½¿ç”¨ å†…æ ¸çº¿ç¨‹ å®ç°ã€<br>ä½¿ç”¨ ç”¨æˆ·çº¿ç¨‹ å®ç°<br>å’Œä½¿ç”¨ ç”¨æˆ·çº¿ç¨‹ åŠ  è½»é‡çº§è¿›ç¨‹ æ··åˆå®ç°ã€‚</p><h6 id="1-ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°"><a href="#1-ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°" class="headerlink" title="1.ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°"></a>1.ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°</h6><p>å†…æ ¸çº¿ç¨‹ ï¼ˆKernel-Level Threadï¼ŒKLTï¼‰ å°±æ˜¯ç›´æ¥ç”± æ“ä½œç³»ç»Ÿå†…æ ¸ï¼ˆKernelï¼Œä¸‹ç§°å†…æ ¸ï¼‰æ”¯æŒçš„çº¿ç¨‹ï¼Œ<br>è¿™ç§çº¿ç¨‹ ç”± å†…æ ¸ æ¥å®Œæˆ çº¿ç¨‹åˆ‡æ¢ï¼Œ<br>å†…æ ¸ é€šè¿‡æ“çºµ è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰å¯¹ çº¿ç¨‹ è¿›è¡Œ è°ƒåº¦ ï¼Œ<br>å¹¶è´Ÿè´£å°† çº¿ç¨‹çš„ä»»åŠ¡ æ˜ å°„åˆ°å„ä¸ª å¤„ç†å™¨ ä¸Šã€‚</p><p>æ¯ä¸ª å†…æ ¸çº¿ç¨‹ å¯ä»¥è§†ä¸º å†…æ ¸ çš„ä¸€ä¸ªåˆ†èº«ï¼Œ<br>è¿™æ · æ“ä½œç³»ç»Ÿ å°±æœ‰èƒ½åŠ› åŒæ—¶å¤„ç†å¤šä»¶äº‹æƒ…ï¼Œæ”¯æŒå¤šçº¿ç¨‹ çš„ å†…æ ¸ å°±å«åš å¤šçº¿ç¨‹å†…æ ¸ï¼ˆMulti-Threads Kernelï¼‰ã€‚</p><p>ç¨‹åº ä¸€èˆ¬ä¸ä¼šç›´æ¥å»ä½¿ç”¨ å†…æ ¸çº¿ç¨‹ï¼Œè€Œæ˜¯å»ä½¿ç”¨ å†…æ ¸çº¿ç¨‹ çš„ä¸€ç§é«˜çº§æ¥å£â€”-è½»é‡çº§è¿›ç¨‹ï¼ˆLight Weight Processï¼ŒLWPï¼‰ï¼Œ<br>è½»é‡çº§è¿›ç¨‹ å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è®²çš„ çº¿ç¨‹ï¼Œ<br>ç”±äº æ¯ä¸ªè½»é‡çº§è¿›ç¨‹ éƒ½æœ‰ä¸€ä¸ª å†…æ ¸çº¿ç¨‹ æ”¯æŒï¼Œå› æ­¤åªæœ‰å…ˆæ”¯æŒ å†…æ ¸çº¿ç¨‹ï¼Œæ‰èƒ½æœ‰ è½»é‡çº§è¿›ç¨‹ã€‚</p><p>è¿™ç§ è½»é‡çº§è¿›ç¨‹ ä¸ å†…æ ¸çº¿ç¨‹ ä¹‹é—´ 1:1çš„å…³ç³» ç§°ä¸º ä¸€å¯¹ä¸€çš„çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚å›¾12-3æ‰€ç¤ºã€‚</p><p>ï¼ˆå®æ´»å®è¯´ï¼Œè¿™ä¸ªå›¾å¤ªéš¾äº†ğŸ™ƒğŸ™ƒğŸ™ƒæˆ‘ç”»ä¸å‡ºğŸ™ƒğŸ™ƒğŸ™ƒï¼‰</p><p>ç”±äº å†…æ ¸çº¿ç¨‹ çš„æ”¯æŒï¼Œæ¯ä¸ª è½»é‡çº§è¿›ç¨‹ éƒ½æˆä¸ºä¸€ä¸ª ç‹¬ç«‹çš„ è°ƒåº¦å•å…ƒï¼Œ<br>å³ä½¿æœ‰ä¸€ä¸ª è½»é‡çº§è¿›ç¨‹ åœ¨ç³»ç»Ÿè°ƒç”¨ä¸­ é˜»å¡äº†ï¼Œä¹Ÿä¸ä¼šå½±å“ æ•´ä¸ªè¿›ç¨‹ç»§ç»­å·¥ä½œï¼Œ<br>ä½†æ˜¯ è½»é‡çº§è¿›ç¨‹ å…·æœ‰å®ƒçš„å±€é™æ€§ï¼š<br>é¦–å…ˆï¼Œç”±äºæ˜¯åŸºäº å†…æ ¸çº¿ç¨‹ å®ç°çš„ï¼Œæ‰€ä»¥å„ç§çº¿ç¨‹æ“ä½œï¼Œå¦‚ åˆ›å»ºã€ææ„åŠåŒæ­¥ï¼Œéƒ½éœ€è¦è¿›è¡Œ ç³»ç»Ÿè°ƒç”¨ã€‚<br>è€Œç³»ç»Ÿè°ƒç”¨çš„ä»£ä»·ç›¸å¯¹è¾ƒé«˜ï¼Œéœ€è¦åœ¨ ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰å’Œå†…æ ¸æ€ï¼ˆKernel Modeï¼‰ ä¸­ æ¥å›åˆ‡æ¢ã€‚<br>å…¶æ¬¡ï¼Œæ¯ä¸ªè½»é‡çº§è¿›ç¨‹ éƒ½éœ€è¦æœ‰ä¸€ä¸ª å†…æ ¸çº¿ç¨‹ çš„æ”¯æŒï¼Œå› æ­¤ è½»é‡çº§è¿›ç¨‹ è¦æ¶ˆè€—ä¸€å®šçš„ å†…æ ¸èµ„æºï¼ˆå¦‚ å†…æ ¸çº¿ç¨‹ çš„ æ ˆç©ºé—´ï¼‰ï¼Œ<br>å› æ­¤ ä¸€ä¸ªç³»ç»Ÿ æ”¯æŒè½»é‡çº§è¿›ç¨‹ çš„ æ•°é‡ æ˜¯æœ‰é™çš„ã€‚</p><h6 id="2-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°"><a href="#2-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°" class="headerlink" title="2.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°"></a>2.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°</h6><p>ä» å¹¿ä¹‰ ä¸Šæ¥è®²ï¼Œä¸€ä¸ªçº¿ç¨‹ åªè¦ä¸æ˜¯ å†…æ ¸çº¿ç¨‹ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯ ç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼ŒUTï¼‰ï¼Œ<br>å› æ­¤ï¼Œä»è¿™ä¸ªå®šä¹‰ä¸Šæ¥è®²ï¼Œè½»é‡çº§è¿›ç¨‹ ä¹Ÿå±äº ç”¨æˆ·çº¿ç¨‹ï¼Œä½† è½»é‡çº§è¿›ç¨‹ çš„å®ç° å§‹ç»ˆæ˜¯å»ºç«‹åœ¨ å†…æ ¸ä¹‹ä¸Šçš„ï¼Œè®¸å¤šæ“ä½œéƒ½è¦è¿›è¡Œ ç³»ç»Ÿè°ƒç”¨ï¼Œæ•ˆç‡ä¼šå—åˆ°é™åˆ¶ã€‚</p><p>è€Œ ç‹­ä¹‰çš„ ç”¨æˆ·çº¿ç¨‹ æŒ‡çš„æ˜¯ å®Œå…¨å»ºç«‹åœ¨ ç”¨æˆ·ç©ºé—´çš„ çº¿ç¨‹åº“ ä¸Šï¼Œç³»ç»Ÿå†…æ ¸ ä¸èƒ½æ„ŸçŸ¥ çº¿ç¨‹å­˜åœ¨çš„å®ç°ã€‚</p><p>ç”¨æˆ·çº¿ç¨‹ çš„ å»ºç«‹ã€åŒæ­¥ã€é”€æ¯å’Œè°ƒåº¦ å®Œå…¨åœ¨ ç”¨æˆ·æ€ ä¸­å®Œæˆï¼Œä¸éœ€è¦ å†…æ ¸çš„å¸®åŠ©ã€‚</p><p>å¦‚æœç¨‹åº å®ç°å¾—å½“ï¼Œè¿™ç§çº¿ç¨‹ ä¸éœ€è¦åˆ‡æ¢åˆ° å†…æ ¸æ€ï¼Œå› æ­¤æ“ä½œ å¯ä»¥ä½¿ éå¸¸å¿«é€Ÿä¸”ä½æ¶ˆè€—çš„ï¼Œ<br>ä¹Ÿå¯ä»¥æ”¯æŒè§„æ¨¡æ›´å¤§çš„çº¿ç¨‹æ•°é‡ï¼Œéƒ¨åˆ†é«˜æ€§èƒ½ æ•°æ®åº“ä¸­çš„å¤šçº¿ç¨‹ å°±æ˜¯ç”± ç”¨æˆ·çº¿ç¨‹ å®ç°çš„ã€‚<br>è¿™ç§ è¿›ç¨‹ ä¸ ç”¨æˆ·çº¿ç¨‹ ä¹‹é—´ 1:N çš„å…³ç³» ç§°ä¸º ä¸€å¯¹å¤šçš„çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚å›¾12-4æ‰€ç¤ºã€‚</p><p>ï¼ˆä¸ç”»å›¾äº†è‡ªå·±å»ä¹°ä¹¦çœ‹çœ‹ğŸ™ƒğŸ™ƒğŸ™ƒï¼‰</p><p>ä½¿ç”¨ ç”¨æˆ·çº¿ç¨‹ çš„ ä¼˜åŠ¿ åœ¨äº ä¸éœ€è¦ç³»ç»Ÿå†…æ ¸æ”¯æ´ï¼ŒåŠ£åŠ¿ ä¹Ÿåœ¨äº æ²¡æœ‰ç³»ç»Ÿå†…æ ¸çš„æ”¯æ´ï¼Œæ‰€æœ‰çš„ çº¿ç¨‹æ“ä½œ éƒ½éœ€è¦ ç”¨æˆ·ç¨‹åº è‡ªå·±å¤„ç†ã€‚</p><p>çº¿ç¨‹çš„ åˆ›å»ºã€åˆ‡æ¢å’Œè°ƒåº¦ éƒ½æ˜¯éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œè€Œä¸”ç”±äº æ“ä½œç³»ç»Ÿ åªæŠŠ å¤„ç†å™¨èµ„æº åˆ†é…åˆ° è¿›ç¨‹ï¼Œ<br>é‚£è¯¸å¦‚ â€œé˜»å¡å¦‚ä½•å¤„ç†â€ã€â€˜å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­å¦‚ä½•å°†çº¿ç¨‹æ˜ å°„åˆ°å…¶ä»–å¤„ç†å™¨ä¸Šâ€œè¿™ç±»é—®é¢˜è§£å†³èµ·æ¥å°†ä¼š å¼‚å¸¸å›°éš¾ï¼Œç”šè‡³ä¸å¯èƒ½å®Œæˆã€‚</p><p>è¨€è€Œä½¿ç”¨ ç”¨æˆ·çº¿ç¨‹å®ç°çš„ç¨‹åº ä¸€èˆ¬éƒ½æ¯”è¾ƒå¤æ‚ï¼Œé™¤äº†ä»¥å‰åœ¨ä¸æ”¯æŒå¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼ˆå¦‚DOSï¼‰çš„å¤šçº¿ç¨‹ç¨‹åº ä¸ å°‘æ•°æœ‰ç‰¹æ®Šéœ€æ±‚çš„ç¨‹åºå¤–ï¼Œ<br>ç°åœ¨ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹çš„ç¨‹åºè¶Šæ¥è¶Šå°‘äº†ï¼ŒJavaã€Rubyç­‰è¯­è¨€éƒ½æ›¾ç»ä½¿ç”¨è¿‡ç”¨æˆ·çº¿ç¨‹ï¼Œæœ€ç»ˆåˆéƒ½æ”¾å¼ƒä½¿ç”¨å®ƒã€‚</p><blockquote><p>æ­¤å¤„è®²çš„â€œå¤æ‚â€ä¸â€œç¨‹åºè‡ªå·±å®Œæˆçº¿ç¨‹æ“ä½œâ€ï¼Œå¹¶ä¸é™åˆ¶ ç¨‹åºä¸­ å¿…é¡»ç¼–å†™äº†å¤æ‚çš„å®ç°ç”¨æˆ·çº¿ç¨‹çš„ä»£ç ï¼Œ<br>ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹çš„ç¨‹åºï¼Œå¾ˆå¤šéƒ½ä¾èµ–ç‰¹å®šçš„çº¿ç¨‹åº“æ¥å®ŒæˆåŸºæœ¬çš„çº¿ç¨‹æ“ä½œï¼Œè¿™äº›å¤æ‚æ€§ éƒ½ å°è£…åœ¨ çº¿ç¨‹åº“ ä¹‹ä¸­ã€‚</p></blockquote><p>ï¼ˆğŸ™ƒğŸ™ƒğŸ™ƒè¡¨ç¤ºåƒæˆ‘è¿™ç§ä¿—äººä¼°è®¡ä¸€è¾ˆå­éƒ½ç”¨ä¸åˆ°ç”¨æˆ·çº¿ç¨‹ä»¥åŠå†…æ ¸çº¿ç¨‹ï¼Œè€Œä¸”ä¼°è®¡æˆ‘ç”¨åˆ°äº†æˆ‘ä¹Ÿä¸çŸ¥é“ï¼‰</p><h6 id="3-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°"><a href="#3-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°" class="headerlink" title="3.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°"></a>3.ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°</h6><p>çº¿ç¨‹ é™¤äº† ä¾èµ– å†…æ ¸çº¿ç¨‹ å®ç° å’Œ å®Œå…¨ç”± ç”¨æˆ·ç¨‹åº è‡ªå·±å®ç° ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§å°† å†…æ ¸çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹ ä¸€èµ·ä½¿ç”¨çš„å®ç°æ–¹å¼ã€‚</p><p>åœ¨è¿™ç§æ··åˆå®ç°ä¸‹ï¼Œæ—¢å­˜åœ¨ ç”¨æˆ·çº¿ç¨‹ï¼Œä¹Ÿå­˜åœ¨ è½»é‡çº§è¿›ç¨‹ã€‚</p><p>ç”¨æˆ·çº¿ç¨‹ è¿˜æ˜¯å®Œå…¨å»ºç«‹åœ¨ ç”¨æˆ·ç©ºé—´ ä¸­ï¼Œå› æ­¤ ç”¨æˆ·çº¿ç¨‹ çš„ åˆ›å»ºã€åˆ‡æ¢ã€ææ„ç­‰æ“ä½œä¾ç„¶å»‰ä»·ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒ å¤§è§„æ¨¡çš„ç”¨æˆ·çº¿ç¨‹å¹¶å‘ã€‚</p><p>è€Œæ“ä½œç³»ç»Ÿæä¾›æ”¯æŒçš„ è½»é‡çº§è¿›ç¨‹ åˆ™ä½œä¸ºç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹ä¹‹é—´çš„ æ¡¥æ¢ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ å†…æ ¸æä¾›çš„çº¿ç¨‹è°ƒåº¦åŠŸèƒ½åŠå¤„ç†å™¨æ˜ å°„ï¼Œ<br>å¹¶ä¸” ç”¨æˆ·çº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ è¦é€šè¿‡ è½»é‡çº§çº¿ç¨‹ æ¥å®Œæˆï¼Œå¤§å¤§é™ä½äº† æ•´ä¸ªçº¿ç¨‹ è¢«å®Œå…¨é˜»å¡ çš„é£é™©ã€‚</p><p>åœ¨è¿™ç§ æ··åˆæ¨¡å¼ä¸­ï¼Œç”¨æˆ·çº¿ç¨‹å’Œè½»é‡çº§è¿›ç¨‹ çš„æ•°é‡ æ˜¯ ä¸å®šçš„ï¼Œå³ä¸º N:M çš„å…³ç³»ï¼Œå¦‚å›¾12-5æ‰€ç¤ºï¼Œè¿™ç§å°±æ˜¯ å¤šå¯¹å¤šçš„çº¿ç¨‹æ¨¡å‹ã€‚</p><p>è®¸å¤š UNIXç³»åˆ— çš„ æ“ä½œç³»ç»Ÿï¼Œ å¦‚ Solarisã€HP-UX ç­‰éƒ½æä¾›äº† N:M çš„çº¿ç¨‹æ¨¡å‹ å®ç°ã€‚</p><h6 id="4-Javaçº¿ç¨‹çš„å®ç°"><a href="#4-Javaçº¿ç¨‹çš„å®ç°" class="headerlink" title="4.Javaçº¿ç¨‹çš„å®ç°"></a>4.Javaçº¿ç¨‹çš„å®ç°</h6><p>Javaçº¿ç¨‹ åœ¨ JDK1.2 ä¹‹å‰ï¼Œæ˜¯åŸºäºç§°ä¸º â€œç»¿è‰²çº¿ç¨‹â€ï¼ˆGreen Threadsï¼‰çš„ ç”¨æˆ·çº¿ç¨‹ å®ç°çš„ï¼Œ<br>è€Œåœ¨ JDK1.2 ä¸­ï¼Œçº¿ç¨‹æ¨¡å‹ æ›¿æ¢ä¸º åŸºäºæ“ä½œç³»ç»Ÿ åŸç”Ÿçº¿ç¨‹æ¨¡å‹ æ¥å®ç°ã€‚</p><p>å› æ­¤ï¼Œåœ¨ç›®å‰çš„JDKç‰ˆæœ¬ä¸­ï¼Œæ“ä½œç³»ç»Ÿ æ”¯æŒæ€æ ·çš„ çº¿ç¨‹æ¨¡å‹ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Š å†³å®šäº† Javaè™šæ‹Ÿæœºçš„çº¿ç¨‹ æ˜¯æ€æ · æ˜ å°„çš„ï¼Œ<br>è¿™ç‚¹åœ¨ ä¸åŒçš„å¹³å°å•† æ²¡æœ‰åŠæ³• è¾¾æˆä¸€è‡´ï¼Œè™šæ‹Ÿæœºè§„èŒƒ ä¸­ä¹Ÿå¹¶æœªé™å®š Javaçº¿ç¨‹ éœ€è¦ä½¿ç”¨å“ªç§ çº¿ç¨‹æ¨¡å‹ æ¥å®ç°ã€‚</p><p>çº¿ç¨‹æ¨¡å‹ åªå¯¹ çº¿ç¨‹çš„ å¹¶å‘è§„æ¨¡å’Œæ“ä½œæˆæœ¬ äº§ç”Ÿå½±å“ï¼Œå¯¹Javaç¨‹åºçš„ ç¼–ç å’Œè¿è¡Œè¿‡ç¨‹ æ¥è¯´ï¼Œè¿™äº›å·®å¼‚éƒ½æ˜¯é€æ˜çš„ã€‚</p><p>å¯¹äº Sun JDKæ¥è¯´ï¼Œå®ƒçš„ Windowsç‰ˆæœ¬å’ŒLinuxç‰ˆéƒ½æ˜¯ä½¿ç”¨ ä¸€å¯¹ä¸€çš„çº¿ç¨‹æ¨¡å‹ å®ç°çš„ï¼Œ<br>ä¸€æ¡Javaçº¿ç¨‹ å°± æ˜ å°„åˆ° ä¸€æ¡è½»é‡çº§è¿›ç¨‹ä¹‹ä¸­ï¼Œå› ä¸º Windowså’ŒLinux ç³»ç»Ÿæä¾›çš„çº¿ç¨‹æ¨¡å‹å°±æ˜¯ ä¸€å¯¹ä¸€çš„ã€‚</p><blockquote><p>Windowsä¸‹ç”± çº¤ç¨‹åŒ…ï¼ˆFiber Packageï¼‰ï¼ŒLinuxä¸‹ä¹Ÿæœ‰ NGPTï¼ˆåœ¨2.4å†…æ ¸çš„å¹´ä»£ï¼‰æ¥å®ç° N:M æ¨¡å‹ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ²¡æœ‰æˆä¸ºä¸»æµã€‚</p></blockquote><p>è€Œåœ¨ Solariså¹³å° ä¸­ï¼Œ<br>ç”±äº æ“ä½œç³»ç»Ÿ çš„ çº¿ç¨‹ç‰¹æ€§ å¯ä»¥åŒæ—¶ æ”¯æŒ  ä¸€å¯¹ä¸€ï¼ˆé€šè¿‡Bound Threadsæˆ–Alternate Libthread å®ç°ï¼‰åŠ å¤šå¯¹å¤šï¼ˆé€šè¿‡ LWP/Thread Based Synchronization å®ç°ï¼‰ çš„çº¿ç¨‹æ¨¡å‹ï¼Œ<br>å› æ­¤åœ¨ Solaris ç‰ˆçš„JDKä¸­ ä¹Ÿå¯¹åº”æä¾›äº† ä¸¤ä¸ªå¹³å°ä¸“æœ‰çš„ è™šæ‹Ÿæœºå‚æ•°ï¼š -XX:+UseLWPSynchronization(é»˜è®¤å€¼) å’Œ -XX:+UseBoundThreads æ¥æ˜ç¡®æŒ‡å®šè™šæ‹Ÿæœºä½¿ç”¨å“ªç§ çº¿ç¨‹æ¨¡å‹ã€‚</p><h5 id="Javaçº¿ç¨‹è°ƒåº¦"><a href="#Javaçº¿ç¨‹è°ƒåº¦" class="headerlink" title="Javaçº¿ç¨‹è°ƒåº¦"></a>Javaçº¿ç¨‹è°ƒåº¦</h5><p>çº¿ç¨‹è°ƒåº¦ æ˜¯æŒ‡ ç³»ç»Ÿ ä¸º çº¿ç¨‹ åˆ†é… å¤„ç†å™¨ä½¿ç”¨æƒ çš„è¿‡ç¨‹ï¼Œ<br>ä¸»è¦è°ƒåº¦æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ ååŒå¼çº¿ç¨‹è°ƒåº¦ï¼ˆCooperative Threads-Schedulingï¼‰ å’Œ æŠ¢å å¼çº¿ç¨‹è°ƒåº¦ï¼ˆPreemptive Threads-Schedulingï¼‰ã€‚</p><p>å¦‚æœä½¿ç”¨ ååŒå¼è°ƒåº¦çš„å¤šçº¿ç¨‹ç³»ç»Ÿï¼Œçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´ ç”± çº¿ç¨‹æœ¬èº« æ¥æ§åˆ¶ï¼Œçº¿ç¨‹ æŠŠ è‡ªå·±çš„å·¥ä½œæ‰§è¡Œå®Œäº†ä¹‹åï¼Œè¦ä¸»åŠ¨é€šçŸ¥ ç³»ç»Ÿ åˆ‡æ¢åˆ° å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸Šã€‚</p><p>ååŒå¼å¤šçº¿ç¨‹ çš„ æœ€å¤§å¥½å¤„ æ˜¯ å®ç°ç®€å•ï¼Œè€Œä¸”ç”±äº çº¿ç¨‹è¦æŠŠè‡ªå·±çš„äº‹æƒ…å¹²å®Œåæ‰ä¼šè¿›è¡Œ çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢æ“ä½œ å¯¹ çº¿ç¨‹è‡ªå·±æ˜¯å¯çŸ¥çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆ çº¿ç¨‹åŒæ­¥ çš„é—®é¢˜ã€‚</p><p>Luaè¯­è¨€ä¸­çš„ â€œååŒä¾‹ç¨‹â€ å°±æ˜¯è¿™ç±»å®ç°ã€‚</p><p>å®ƒçš„ åå¤„ ä¹Ÿå¾ˆæ˜æ˜¾ï¼šçº¿ç¨‹æ‰§è¡Œæ—¶é—´ ä¸å¯æ§åˆ¶ï¼Œç”šè‡³å¦‚æœä¸€ä¸ªçº¿ç¨‹ç¼–å†™ æœ‰é—®é¢˜ï¼Œ ä¸€ç›´ä¸å‘ŠçŸ¥ç³»ç»Ÿè¿›æ€§ çº¿ç¨‹åˆ‡æ¢ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼š ä¸€ç›´é˜»å¡ åœ¨é‚£é‡Œã€‚</p><p>å¾ˆä¹…ä»¥å‰çš„ Windows3.xç³»ç»Ÿ å°±æ˜¯ä½¿ç”¨ ååŒå¼ æ¥å®ç° å¤šè¿›ç¨‹å¤šä»»åŠ¡ çš„ï¼Œç›¸å½“ä¸ç¨³å®šï¼Œä¸€ä¸ªè¿›ç¨‹ åšæŒä¸è®©å‡º CPU æ‰§è¡Œæ—¶é—´ å°±å¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿ å´©æºƒã€‚</p><p>å¦‚æœä½¿ç”¨ æŠ¢å å¼è°ƒåº¦çš„å¤šçº¿ç¨‹ç³»ç»Ÿï¼Œé‚£ä¹ˆ æ¯ä¸ªçº¿ç¨‹ å°†ç”± ç³»ç»Ÿ æ¥åˆ†é… æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸ç”± çº¿ç¨‹æœ¬èº« æ¥å†³å®šï¼ˆåœ¨Javaä¸­ï¼ŒThread.yield()å¯ä»¥è®©å‡ºæ‰§è¡Œæ—¶é—´ï¼Œä½†æ˜¯è¦è·å–æ‰§è¡Œæ—¶é—´çš„è¯ï¼Œçº¿ç¨‹æœ¬èº«æ˜¯æ²¡æœ‰ä»€ä¹ˆåŠæ³•çš„ï¼‰ã€‚</p><p>åœ¨è¿™ç§å®ç° çº¿ç¨‹è°ƒåº¦ çš„æ–¹å¼ä¸‹ï¼Œçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´ æ˜¯ ç³»ç»Ÿ å¯æ§çš„ï¼Œä¹Ÿä¸ä¼šæœ‰ ä¸€ä¸ªçº¿ç¨‹ å¯¼è‡´ æ•´ä¸ªè¿›ç¨‹é˜»å¡ çš„é—®é¢˜ï¼Œ<br>Javaä½¿ç”¨çš„ çº¿ç¨‹è°ƒåº¦æ–¹å¼ å°±æ˜¯ æŠ¢å å¼è°ƒåº¦ã€‚</p><blockquote><p>åœ¨JDKåç»­ç‰ˆæœ¬ä¸­ æœ‰å¯èƒ½ä¼šæä¾› åç¨‹ï¼ˆCoroutinesï¼‰æ–¹å¼ æ¥è¿›è¡Œ å¤šä»»åŠ¡å¤„ç†ï¼Œç›¸å…³èµ„æ–™å¯å‚è§ï¼š<a href="http://wikis.sum.com/display/mlvm/Coroutinesã€‚" target="_blank" rel="noopener">http://wikis.sum.com/display/mlvm/Coroutinesã€‚</a></p></blockquote><p>ä¸å‰é¢æ‰€è¯´çš„ Windows3.x çš„ä¾‹å­ç›¸å¯¹ï¼Œåœ¨ Windows9x/NT å†…æ ¸ä¸­å°±æ˜¯ä½¿ç”¨ æŠ¢å å¼ æ¥å®ç° å¤šçº¿ç¨‹çš„ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å‡ºäº†é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ ä»»åŠ¡ç®¡ç†å™¨ æŠŠè¿™ä¸ª è¿›ç¨‹ â€œæ€æ‰â€ï¼Œè€Œä¸è‡³äºå¯¼è‡´ ç³»ç»Ÿå´©æºƒã€‚</p><p>è™½ç„¶ Javaçº¿ç¨‹è°ƒåº¦ æ˜¯ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„ï¼Œ<br>ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ â€œå»ºè®®â€ ç³»ç»Ÿç»™æŸäº› çº¿ç¨‹ å¤šåˆ†é…ä¸€ç‚¹ æ‰§è¡Œæ—¶é—´ï¼Œå¦å¤–çš„ä¸€äº›çº¿ç¨‹åˆ™å¯ä»¥å°‘åˆ†é…ä¸€ç‚¹â€”â€”è¿™ä¸€é¡¹æ“ä½œå¯ä»¥é€šè¿‡è®¾ç½® çº¿ç¨‹ä¼˜å…ˆçº§ æ¥å®Œæˆã€‚</p><p>Javaè¯­è¨€ ä¸€å…±è®¾ç½®äº† 10ä¸ªçº§åˆ« çš„ çº¿ç¨‹ä¼˜å…ˆçº§ï¼ˆ Thread.MIN_PRIORITY è‡³ Thread.MAX_PRIORITY ï¼‰ï¼Œåœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¤„äº Ready çŠ¶æ€æ—¶ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„ çº¿ç¨‹ è¶Šå®¹æ˜“è¢« ç³»ç»Ÿ é€‰æ‹©æ‰§è¡Œã€‚</p><p>ä¸è¿‡ï¼Œçº¿ç¨‹ä¼˜å…ˆçº§ å¹¶ä¸æ˜¯ å¤ªé è°±ï¼ŒåŸå› æ˜¯ Javaçš„çº¿ç¨‹ æ˜¯é€šè¿‡ æ˜ å°„åˆ° ç³»ç»Ÿçš„ åŸç”Ÿçº¿ç¨‹ ä¸Šæ¥å®ç°çš„ï¼Œ<br>æ‰€ä»¥ çº¿ç¨‹è°ƒåº¦ æœ€ç»ˆè¿˜æ˜¯å–å†³äº æ“ä½œç³»ç»Ÿï¼Œè™½ç„¶ç°åœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿéƒ½æä¾› çº¿ç¨‹ä¼˜å…ˆçº§ çš„æ¦‚å¿µï¼Œ<br>ä½†æ˜¯å¹¶ä¸è§å¾—èƒ½ä¸ Javaçº¿ç¨‹çš„ä¼˜å…ˆçº§ ä¸€ä¸€å¯¹åº”ï¼Œ<br>å¦‚Solarisä¸­ æœ‰ 2147483648ï¼ˆ2^32ï¼‰ä¸­ä¼˜å…ˆçº§ï¼Œä½†Windowsä¸­å°±åªæœ‰7ä¸­ï¼Œæ¯”Javaçº¿ç¨‹ä¼˜å…ˆçº§å¤šçš„ç³»ç»Ÿè¿˜å¥½è¯´ï¼Œä¸­é—´ç•™ä¸‹ä¸€ç‚¹ç©ºä½å°±å¯ä»¥äº†ï¼Œ<br>ä½†æ¯”Javaçº¿ç¨‹ä¼˜å…ˆçº§å°‘çš„ç³»ç»Ÿï¼Œå°±ä¸å¾—ä¸å‡ºç°å‡ ä¸ª ä¼˜å…ˆçº§ç›¸åŒçš„æƒ…å†µäº†ã€‚</p><p>è¡¨12-1 æ˜¾ç¤ºäº† Javaçº¿ç¨‹ä¼˜å…ˆçº§ ä¸ Windowsçº¿ç¨‹ä¼˜å…ˆçº§ ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œ<br>Windowså¹³å°çš„JDKä¸­ ä½¿ç”¨äº†é™¤ THREAD_PRIORITY_IDLE ä¹‹å¤–çš„å…¶ä½™6ç§çº¿ç¨‹ä¼˜å…ˆçº§ã€‚</p><table>  <thead>    <tr>      <th colspan="2">è¡¨ 12-1 Javaçº¿ç¨‹ä¼˜å…ˆçº§ä¸Windowsçº¿ç¨‹ä¼˜å…ˆçº§ä¹‹é—´çš„å¯¹åº”å…³ç³»</th>    </tr>  </thead>  <tr>    <th>Javaçº¿ç¨‹ä¼˜å…ˆçº§</th>    <th>Windowsçº¿ç¨‹ä¼˜å…ˆçº§</th>  </tr>  <tr>    <td>1ï¼ˆThread.MIN_PRIORITYï¼‰</td>    <td>THREAD_PRIORITY_LOWEST</td>  </tr>    <tr>    <td>2</td>    <td>THREAD_PRIORITY_LOWEST</td>  </tr>    <tr>    <td>3</td>    <td>THREAD_PRIORITY_BELOW_NORMAL</td>  </tr>   <tr>    <td>4</td>    <td>THREAD_PRIORITY_BELOW_NORMAL</td>  </tr>   <tr>    <td>5</td>    <td>THREAD_PRIORITY_NORMAL</td>  </tr>   <tr>    <td>6</td>    <td>THREAD_PRIORITY_ABOVE_NORMAL</td>  </tr>    <tr>    <td>7</td>    <td>THREAD_PRIORITY_ABOVE_NORMAL</td>  </tr>    <tr>    <td>8</td>    <td>THREAD_PRIORITY_HIGHEST</td>  </tr>   <tr>    <td>9</td>    <td>THREAD_PRIORITY_HIGHEST</td>  </tr>   <tr>    <td>10ï¼ˆThread.MAX_PRIORITYï¼‰</td>    <td>THREAD_PRIORITY_CRITICAL</td>  </tr></table><p>ä¸Šæ–‡è¯´åˆ° â€œçº¿ç¨‹ä¼˜å…ˆçº§å¹¶ä¸æ˜¯å¤ªé è°±â€ï¼Œä¸ä»…ä»…æ˜¯è¯´ åœ¨ä¸€äº›å¹³å°ä¸Š ä¸åŒçš„ä¼˜å…ˆçº§ å®é™…ä¼šå˜å¾—ç›¸åŒ è¿™ä¸€ç‚¹ï¼Œè¿˜æœ‰å…¶ä»–æƒ…å†µ è®©æˆ‘ä»¬ä¸èƒ½å¤ªä¾èµ– ä¼˜å…ˆçº§ï¼š<br>ä¼˜å…ˆçº§å¯èƒ½ä¼šè¢« ç³»ç»Ÿ è‡ªè¡Œæ”¹å˜ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨Windowsç³»ç»Ÿä¸­ å­˜åœ¨ä¸€ä¸ªç§°ä¸º â€œä¼˜å…ˆçº§æ¨è¿›å™¨â€(Priority Boostingï¼Œå½“ç„¶å®ƒå¯ä»¥è¢«å…³é—­æ‰)çš„åŠŸèƒ½ï¼Œ<br>å®ƒçš„å¤§è‡´ä½œç”¨å°±æ˜¯ å½“ç³»ç»Ÿ å‘ç° ä¸€ä¸ªçº¿ç¨‹ æ‰§è¡Œå¾— ç‰¹åˆ«â€œå‹¤å¥‹åŠªåŠ›â€çš„è¯ï¼Œå¯èƒ½ä¼šè¶Šè¿‡ çº¿ç¨‹ä¼˜å…ˆçº§ å»ä¸ºå®ƒ åˆ†é…æ‰§è¡Œæ—¶é—´ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨ç¨‹åºä¸­ é€šè¿‡ ä¼˜å…ˆçº§ æ¥å®Œå…¨å‡†ç¡®åœ° åˆ¤æ–­ä¸€ç»„çŠ¶æ€éƒ½ä¸º Readyçš„çº¿ç¨‹ å°†ä¼šå…ˆæ‰§è¡Œå“ªä¸€ä¸ªã€‚</p><h5 id="çŠ¶æ€è½¬æ¢"><a href="#çŠ¶æ€è½¬æ¢" class="headerlink" title="çŠ¶æ€è½¬æ¢"></a>çŠ¶æ€è½¬æ¢</h5><p>Javaè¯­è¨€ å®šä¹‰äº† 5ä¸­çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ ä»»æ„ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œ ä¸€ä¸ªçº¿ç¨‹åªèƒ½ æœ‰ä¸”åªæœ‰ å…¶ä¸­çš„ä¸€ç§çŠ¶æ€ï¼Œè¿™5ç§çŠ¶æ€åˆ†åˆ«å¦‚ä¸‹ã€‚</p><p>æ–°å»ºï¼ˆNewï¼‰ï¼šåˆ›å»ºå å°šæœªå¯åŠ¨ çš„çº¿ç¨‹ å¤„äºè¿™ç§ çŠ¶æ€ã€‚</p><p>è¿è¡Œï¼ˆRunnableï¼‰ï¼šRunnableåŒ…æ‹¬äº† æ“ä½œç³»ç»Ÿ çº¿ç¨‹çŠ¶æ€ä¸­çš„ Runningå’ŒReadyï¼Œä¹Ÿå°±æ˜¯å¤„äºæ­¤çŠ¶æ€çš„ çº¿ç¨‹ æœ‰å¯èƒ½æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½æ­£åœ¨ç­‰å¾…ç€ CPU ä¸ºå®ƒåˆ†é…æ‰§è¡Œæ—¶é—´ã€‚</p><p>æ— é™æœŸç­‰å¾…ï¼ˆWaitingï¼‰ï¼šå¤„äºè¿™ç§çŠ¶æ€çš„ çº¿ç¨‹ ä¸ä¼šè¢« åˆ†é…CPUæ‰§è¡Œæ—¶é—´ï¼Œå®ƒä»¬è¦ç­‰å¾…è¢« å…¶ä»–çº¿ç¨‹ æ˜¾å¼åœ° å”¤é†’ã€‚<br>ä»¥ä¸‹æ–¹æ³•ä¼šè®©çº¿ç¨‹é™·å…¥æ— é™æœŸçš„ç­‰å¾…çŠ¶æ€ï¼š</p><ul><li>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•</li><li>æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•</li><li>LockSupport.park() æ–¹æ³•</li></ul><p>é™æœŸç­‰å¾…ï¼ˆTimed Waitingï¼‰ï¼šå¤„äºè¿™ç§çŠ¶æ€çš„ çº¿ç¨‹ ä¹Ÿä¸ä¼šè¢«åˆ†é… CPUæ‰§è¡Œæ—¶é—´ï¼Œä¸è¿‡ æ— éœ€ç­‰å¾…è¢«å…¶ä»–çº¿ç¨‹ æ˜¾å¼åœ° å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹å å®ƒä»¬ä¼šç”±ç³»ç»Ÿ è‡ªåŠ¨å”¤é†’ã€‚<br>ä»¥ä¸‹æ–¹æ³•ä¼šè®©çº¿ç¨‹ è¿›å…¥ é™æœŸç­‰å¾… çŠ¶æ€ï¼š</p><ul><li>Thread.sleep()æ–¹æ³•</li><li>è®¾ç½®äº† Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•</li><li>è®¾ç½®äº† Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•</li><li>LockSupport.parkNanos()æ–¹æ³•</li><li>LockSupport.parkUtil()æ–¹æ³•</li></ul><p>é˜»å¡ï¼ˆBlockedï¼‰ï¼šçº¿ç¨‹è¢« é˜»å¡ äº†ï¼Œ<br>â€œé˜»å¡çŠ¶æ€â€ä¸â€œç­‰å¾…çŠ¶æ€â€ çš„åŒºåˆ«æ˜¯ï¼š<br>â€œé˜»å¡çŠ¶æ€â€åœ¨ç­‰å¾…ç€è·å–åˆ°ä¸€ä¸ª æ’ä»–é”ï¼Œè¿™ä¸ªäº‹ä»¶ å°†åœ¨ å¦å¤–ä¸€ä¸ªçº¿ç¨‹ æ”¾å¼ƒè¿™ä¸ªé”çš„æ—¶å€™ å‘ç”Ÿï¼›<br>è€Œ â€œç­‰å¾…çŠ¶æ€â€ åˆ™æ˜¯åœ¨ ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…å”¤é†’åŠ¨ä½œçš„å‘ç”Ÿã€‚<br>åœ¨ç¨‹åºç­‰å¾…è¿›å…¥ åŒæ­¥åŒºåŸŸ çš„æ—¶å€™ï¼Œçº¿ç¨‹å°†è¿›å…¥è¿™ç§çŠ¶æ€ã€‚</p><p>ç»“æŸï¼ˆTerminatedï¼‰ï¼šå·²ç»ˆæ­¢ çº¿ç¨‹ çš„ çº¿ç¨‹çŠ¶æ€ï¼Œçº¿ç¨‹å·²ç» ç»“æŸæ‰§è¡Œã€‚</p><p>ä¸Šè¿°5ç§çŠ¶æ€ åœ¨é‡åˆ° ç‰¹å®šäº‹ä»¶ å‘ç”Ÿçš„æ—¶å€™ å°†ä¼š äº’ç›¸è½¬æ¢ï¼Œå®ƒä»¬çš„ è½¬æ¢å…³ç³» å¦‚å›¾12-6 æ‰€ç¤ºã€‚</p><h5 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h5><p>æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆäº†è§£äº† è™šæ‹ŸæœºJavaå†…å­˜æ¨¡å‹ çš„ç»“æ„åŠæ“ä½œï¼Œ<br>ç„¶åè®²è§£äº† åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ åœ¨ Javaå†…å­˜æ¨¡å‹ ä¸­çš„ä½“ç°ï¼Œ<br>æœ€åä»‹ç»äº† å…ˆè¡Œå‘ç”ŸåŸåˆ™ çš„è§„åˆ™åŠä½¿ç”¨ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜äº†è§£äº† çº¿ç¨‹ åœ¨ Javaè¯­è¨€ä¹‹ä¸­ æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p>å…³äº â€œé«˜æ•ˆå¹¶å‘â€ è¿™ä¸ªè¯é¢˜ï¼Œåœ¨æœ¬ç« ä¸­ ä¸»è¦ä»‹ç»äº† è™šæ‹Ÿæœºå¦‚ä½•å®ç°â€œå¹¶å‘â€ï¼Œåœ¨ç¬¬13ç« ä¸­ï¼Œæˆ‘ä»¬çš„ä¸»è¦å…³æ³¨ç‚¹å°†æ˜¯ è™šæ‹Ÿæœºå¦‚ä½•å®ç°â€œé«˜æ•ˆâ€ï¼Œ<br>åŠ è™šæ‹Ÿæœºå¯¹æˆ‘ä»¬ç¼–å†™çš„å¹¶å‘ä»£ç  æä¾›äº†ä»€ä¹ˆæ ·çš„ ä¼˜åŒ–æ‰‹æ®µã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot;&gt;&lt;a href=&quot;#æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot; class=&quot;headerlink&quot; title=&quot;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&quot;&gt;&lt;/a&gt;æ·±å…¥javaè™šæ‹Ÿæœº-ç¬¬äº”éƒ¨åˆ†-é«˜æ•ˆå¹¶å‘&lt;/h2&gt;&lt;h3 i
      
    
    </summary>
    
    
      <category term="è™šæ‹Ÿæœº" scheme="https://fengshana.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="è™šæ‹Ÿæœº" scheme="https://fengshana.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£java8</title>
    <link href="https://fengshana.github.io/2020/05/24/%E9%9D%A2%E8%AF%95/%E3%80%90JDK8%E3%80%91%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java8/"/>
    <id>https://fengshana.github.io/2020/05/24/%E9%9D%A2%E8%AF%95/%E3%80%90JDK8%E3%80%91%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3java8/</id>
    <published>2020-05-24T01:25:20.568Z</published>
    <updated>2020-05-24T18:16:31.285Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1w4411e7T8" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1w4411e7T8</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1w4411e7T8&quot; target=&quot;_bl
      
    
    </summary>
    
    
      <category term="java" scheme="https://fengshana.github.io/categories/java/"/>
    
    
      <category term="java" scheme="https://fengshana.github.io/tags/java/"/>
    
      <category term="jdk1.8" scheme="https://fengshana.github.io/tags/jdk1-8/"/>
    
  </entry>
  
  <entry>
    <title>Javaé¢è¯•çƒ­ç‚¹é—®é¢˜ï¼ŒsynchronizedåŸç†å‰–æä¸ä¼˜åŒ–</title>
    <link href="https://fengshana.github.io/2020/05/22/%E9%9D%A2%E8%AF%95/%E3%80%90%E9%94%81%E3%80%91Java%E9%9D%A2%E8%AF%95%E7%83%AD%E7%82%B9%E9%97%AE%E9%A2%98%EF%BC%8Csynchronized%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%E4%BC%98%E5%8C%96/"/>
    <id>https://fengshana.github.io/2020/05/22/%E9%9D%A2%E8%AF%95/%E3%80%90%E9%94%81%E3%80%91Java%E9%9D%A2%E8%AF%95%E7%83%AD%E7%82%B9%E9%97%AE%E9%A2%98%EF%BC%8Csynchronized%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%E4%BC%98%E5%8C%96/</id>
    <published>2020-05-22T14:17:09.479Z</published>
    <updated>2020-05-26T14:44:07.816Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1aJ411V763?from=search&amp;seid=6293835933701781647" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1aJ411V763?from=search&amp;seid=6293835933701781647</a>  </p><p>è§‚çœ‹äº†è¿™ä¸ªè§†é¢‘ä¹‹åï¼Œæˆ‘å»ºè®®å•ŠğŸ˜‰ï¼Œå¯ä»¥å»çœ‹ä¸‹é‚£ä¸ªã€Š<strong>æ·±å…¥javaè™šæ‹Ÿæœº</strong>ã€‹è¿™æœ¬ä¹¦ï¼Œå› ä¸ºè¿™ä¸ªè¯¾è®²çš„å†…å®¹è·Ÿè¿™æœ¬ä¹¦å½“ä¸­çš„<strong>ç¬¬13ç«  çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</strong>ï¼Œå†…å®¹ååˆ†ç›¸ä¼¼ï¼›æ‰€ä»¥æˆ‘è®¤ä¸ºå¯ä»¥å½“åšæ˜¯è¯¾åå¤ä¹ ä¹¦çš„é‚£ç§ï¼›<br>æˆ‘ä¹Ÿæ˜¯ç»è¿‡äº†å¯¹æ¯”ä¸¤è€…çš„å†…å®¹æ‰è¿™ä¹ˆè§‰å¾—ï¼›å› ä¸ºçœŸçš„å¾ˆç›¸ä¼¼ï¼›åŒ…æ‹¬åé¢ä¸¾çš„stringçš„é‚£ä¸ªä¾‹å­ï¼›<br>ä¸ºäº†æˆ‘æ›´æ·±åˆ»çš„è®°å¿†ï¼›æˆ‘å†³å®šæˆ‘è¿˜æ˜¯ä»”ç»†çœ‹ä¸€éè¿™ä¸€éƒ¨åˆ†å†…å®¹ï¼›<br>ï¼ˆç°åœ¨çœ‹æ¥å…¶å®å°±æ˜¯<strong>ç¬¬äº”éƒ¨åˆ† é«˜æ•ˆå¹¶å‘</strong> è·Ÿè¯¥è¯¾ç¨‹è§†é¢‘è®²çš„ éå¸¸éå¸¸ç›¸åŒäº†ï¼›ï¼‰</p><h2 id="è¯¾ç¨‹ä»‹ç»"><a href="#è¯¾ç¨‹ä»‹ç»" class="headerlink" title="è¯¾ç¨‹ä»‹ç»"></a>è¯¾ç¨‹ä»‹ç»</h2><h2 id="å¯è§æ€§é—®é¢˜"><a href="#å¯è§æ€§é—®é¢˜" class="headerlink" title="å¯è§æ€§é—®é¢˜"></a>å¯è§æ€§é—®é¢˜</h2><h2 id="åŸå­æ€§é—®é¢˜"><a href="#åŸå­æ€§é—®é¢˜" class="headerlink" title="åŸå­æ€§é—®é¢˜"></a>åŸå­æ€§é—®é¢˜</h2><h2 id="æœ‰åºæ€§é—®é¢˜"><a href="#æœ‰åºæ€§é—®é¢˜" class="headerlink" title="æœ‰åºæ€§é—®é¢˜"></a>æœ‰åºæ€§é—®é¢˜</h2><h2 id="è®¡ç®—æœºç»“æ„"><a href="#è®¡ç®—æœºç»“æ„" class="headerlink" title="è®¡ç®—æœºç»“æ„"></a>è®¡ç®—æœºç»“æ„</h2><h2 id="javaå†…å­˜æ¨¡å‹"><a href="#javaå†…å­˜æ¨¡å‹" class="headerlink" title="javaå†…å­˜æ¨¡å‹"></a>javaå†…å­˜æ¨¡å‹</h2><h2 id="ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’è¿‡ç¨‹"><a href="#ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’è¿‡ç¨‹" class="headerlink" title="ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’è¿‡ç¨‹"></a>ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’è¿‡ç¨‹</h2><h2 id="synchronizedä¿è¯åŸå­æ€§"><a href="#synchronizedä¿è¯åŸå­æ€§" class="headerlink" title="synchronizedä¿è¯åŸå­æ€§"></a>synchronizedä¿è¯åŸå­æ€§</h2><h2 id="synchronizedä¿è¯å¯è§æ€§"><a href="#synchronizedä¿è¯å¯è§æ€§" class="headerlink" title="synchronizedä¿è¯å¯è§æ€§"></a>synchronizedä¿è¯å¯è§æ€§</h2><h2 id="synchronizedä¿è¯æœ‰åºæ€§"><a href="#synchronizedä¿è¯æœ‰åºæ€§" class="headerlink" title="synchronizedä¿è¯æœ‰åºæ€§"></a>synchronizedä¿è¯æœ‰åºæ€§</h2><h2 id="synchronizedçš„å¯é‡å…¥ç‰¹æ€§"><a href="#synchronizedçš„å¯é‡å…¥ç‰¹æ€§" class="headerlink" title="synchronizedçš„å¯é‡å…¥ç‰¹æ€§"></a>synchronizedçš„å¯é‡å…¥ç‰¹æ€§</h2><h2 id="synchronizedçš„ä¸å¯ä¸­æ–­æ€§"><a href="#synchronizedçš„ä¸å¯ä¸­æ–­æ€§" class="headerlink" title="synchronizedçš„ä¸å¯ä¸­æ–­æ€§"></a>synchronizedçš„ä¸å¯ä¸­æ–­æ€§</h2><h2 id="javapåæ±‡ç¼–å­¦ä¹ synchronizedçš„åŸç†"><a href="#javapåæ±‡ç¼–å­¦ä¹ synchronizedçš„åŸç†" class="headerlink" title="javapåæ±‡ç¼–å­¦ä¹ synchronizedçš„åŸç†"></a>javapåæ±‡ç¼–å­¦ä¹ synchronizedçš„åŸç†</h2><h2 id="é¢è¯•é¢˜ï¼šsynchronizedä¸Lockçš„åŒºåˆ«"><a href="#é¢è¯•é¢˜ï¼šsynchronizedä¸Lockçš„åŒºåˆ«" class="headerlink" title="é¢è¯•é¢˜ï¼šsynchronizedä¸Lockçš„åŒºåˆ«"></a>é¢è¯•é¢˜ï¼šsynchronizedä¸Lockçš„åŒºåˆ«</h2><h2 id="æ·±å…¥JVMæºç -monitorç›‘è§†å™¨é”"><a href="#æ·±å…¥JVMæºç -monitorç›‘è§†å™¨é”" class="headerlink" title="æ·±å…¥JVMæºç -monitorç›‘è§†å™¨é”"></a>æ·±å…¥JVMæºç -monitorç›‘è§†å™¨é”</h2><h2 id="æ·±å…¥JVMæºç -monitorç«äº‰"><a href="#æ·±å…¥JVMæºç -monitorç«äº‰" class="headerlink" title="æ·±å…¥JVMæºç -monitorç«äº‰"></a>æ·±å…¥JVMæºç -monitorç«äº‰</h2><h2 id="æ·±å…¥JVMæºç -monitorç­‰å¾…"><a href="#æ·±å…¥JVMæºç -monitorç­‰å¾…" class="headerlink" title="æ·±å…¥JVMæºç -monitorç­‰å¾…"></a>æ·±å…¥JVMæºç -monitorç­‰å¾…</h2><h2 id="æ·±å…¥JVMæºç -monitoré‡Šæ”¾"><a href="#æ·±å…¥JVMæºç -monitoré‡Šæ”¾" class="headerlink" title="æ·±å…¥JVMæºç -monitoré‡Šæ”¾"></a>æ·±å…¥JVMæºç -monitoré‡Šæ”¾</h2><h2 id="æ·±å…¥JVMæºç -monitoræ˜¯é‡é‡çº§é”"><a href="#æ·±å…¥JVMæºç -monitoræ˜¯é‡é‡çº§é”" class="headerlink" title="æ·±å…¥JVMæºç -monitoræ˜¯é‡é‡çº§é”"></a>æ·±å…¥JVMæºç -monitoræ˜¯é‡é‡çº§é”</h2><h2 id="synchronizedä¼˜åŒ–-CAS-AtomicIntegerä½¿ç”¨"><a href="#synchronizedä¼˜åŒ–-CAS-AtomicIntegerä½¿ç”¨" class="headerlink" title="synchronizedä¼˜åŒ–_CAS_AtomicIntegerä½¿ç”¨"></a>synchronizedä¼˜åŒ–_CAS_AtomicIntegerä½¿ç”¨</h2><h2 id="synchronizedä¼˜åŒ–-CASåŸç†"><a href="#synchronizedä¼˜åŒ–-CASåŸç†" class="headerlink" title="synchronizedä¼˜åŒ–_CASåŸç†"></a>synchronizedä¼˜åŒ–_CASåŸç†</h2><h2 id="synchronizedä¼˜åŒ–é”å‡çº§è¿‡ç¨‹"><a href="#synchronizedä¼˜åŒ–é”å‡çº§è¿‡ç¨‹" class="headerlink" title="synchronizedä¼˜åŒ–é”å‡çº§è¿‡ç¨‹"></a>synchronizedä¼˜åŒ–é”å‡çº§è¿‡ç¨‹</h2><h2 id="synchronizedä¼˜åŒ–-å¯¹è±¡çš„å¸ƒå±€"><a href="#synchronizedä¼˜åŒ–-å¯¹è±¡çš„å¸ƒå±€" class="headerlink" title="synchronizedä¼˜åŒ–-å¯¹è±¡çš„å¸ƒå±€"></a>synchronizedä¼˜åŒ–-å¯¹è±¡çš„å¸ƒå±€</h2><h2 id="synchronizedä¼˜åŒ–-åå‘é”"><a href="#synchronizedä¼˜åŒ–-åå‘é”" class="headerlink" title="synchronizedä¼˜åŒ–-åå‘é”"></a>synchronizedä¼˜åŒ–-åå‘é”</h2><h2 id="synchronizedä¼˜åŒ–-è½»é‡çº§é”"><a href="#synchronizedä¼˜åŒ–-è½»é‡çº§é”" class="headerlink" title="synchronizedä¼˜åŒ–-è½»é‡çº§é”"></a>synchronizedä¼˜åŒ–-è½»é‡çº§é”</h2><h2 id="synchronizedä¼˜åŒ–-è‡ªæ—‹é”"><a href="#synchronizedä¼˜åŒ–-è‡ªæ—‹é”" class="headerlink" title="synchronizedä¼˜åŒ–-è‡ªæ—‹é”"></a>synchronizedä¼˜åŒ–-è‡ªæ—‹é”</h2><h2 id="synchronizedä¼˜åŒ–-é”æ¶ˆé™¤"><a href="#synchronizedä¼˜åŒ–-é”æ¶ˆé™¤" class="headerlink" title="synchronizedä¼˜åŒ–-é”æ¶ˆé™¤"></a>synchronizedä¼˜åŒ–-é”æ¶ˆé™¤</h2><h2 id="synchronizedä¼˜åŒ–-é”ç²—åŒ–"><a href="#synchronizedä¼˜åŒ–-é”ç²—åŒ–" class="headerlink" title="synchronizedä¼˜åŒ–-é”ç²—åŒ–"></a>synchronizedä¼˜åŒ–-é”ç²—åŒ–</h2><h2 id="å¹³æ—¶å†™ä»£ç å¦‚ä½•å¯¹synchronizedä¼˜åŒ–"><a href="#å¹³æ—¶å†™ä»£ç å¦‚ä½•å¯¹synchronizedä¼˜åŒ–" class="headerlink" title="å¹³æ—¶å†™ä»£ç å¦‚ä½•å¯¹synchronizedä¼˜åŒ–"></a>å¹³æ—¶å†™ä»£ç å¦‚ä½•å¯¹synchronizedä¼˜åŒ–</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1aJ411V763?from=search&amp;
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="synchronized" scheme="https://fengshana.github.io/tags/synchronized/"/>
    
      <category term="é”" scheme="https://fengshana.github.io/tags/%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>æµç¨‹å›¾-markdownç¾äººé±¼ğŸ§œâ€â™€ï¸å›¾è¡¨</title>
    <link href="https://fengshana.github.io/2020/05/21/%E9%9A%8F%E7%AC%94/%E3%80%90%E6%B5%81%E7%A8%8B%E5%9B%BE%E3%80%91%E7%BE%8E%E4%BA%BA%E9%B1%BC/"/>
    <id>https://fengshana.github.io/2020/05/21/%E9%9A%8F%E7%AC%94/%E3%80%90%E6%B5%81%E7%A8%8B%E5%9B%BE%E3%80%91%E7%BE%8E%E4%BA%BA%E9%B1%BC/</id>
    <published>2020-05-20T19:31:58.233Z</published>
    <updated>2020-05-20T23:12:46.656Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒŸğŸŒŸğŸŒŸ<br>ğŸ˜„åˆšåˆšæ‰¾åˆ°ä¸¤ä¸ªæ‰¾è¡¨æƒ…åŒ…Emojiçš„åœ°æ–¹ï¼Œå˜¿å˜¿ğŸ˜‰ï¼Œç»ˆäºå¯ä»¥ä¸ç”¨æ˜¯é¢œæ–‡å­—äº†ğŸ˜‰ï¼›ï¼ˆåˆšåˆšè¯•äº†æœ‰äº›ååº”ä¸å‡ºæ¥â€¦ğŸ™ƒ,ä½†æ˜¯å¯ä»¥è¿›è¡Œcopyï¼Œpasteå•Šå“ˆå“ˆå“ˆğŸ§™â€â™€ï¸ ğŸ§™â€â™€ï¸ ğŸ§™â€â™€ï¸ ï¼‰<br>å‚è€ƒblog: <a href="https://segmentfault.com/q/1010000021180710/" target="_blank" rel="noopener">https://segmentfault.com/q/1010000021180710/</a></p><ul><li>ğŸ’« <a href="https://unicode.org/emoji/charts/full-emoji-list.html" target="_blank" rel="noopener">https://unicode.org/emoji/charts/full-emoji-list.html</a></li><li>ğŸ’« <a href="https://emoji.muan.co/" target="_blank" rel="noopener">https://emoji.muan.co/</a></li><li>ğŸ’« <a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">https://www.webfx.com/tools/emoji-cheat-sheet/</a></li></ul><hr><p>å‚è€ƒblog: <a href="http://kkpattern.github.io/2015/05/15/Embed-Chart-in-Jekyll.html" target="_blank" rel="noopener">http://kkpattern.github.io/2015/05/15/Embed-Chart-in-Jekyll.html</a></p><p>mermaid.full.min.js:  </p><ul><li><p>ä½¿ç”¨çš„æ˜¯ï¼š<a href="https://www.bootcdn.cn/mermaid/0.2.4/" target="_blank" rel="noopener">https://www.bootcdn.cn/mermaid/0.2.4/</a> </p></li><li><p><a href="https://cdn.bootcdn.net/ajax/libs/mermaid/0.2.4/mermaid.full.min.js" target="_blank" rel="noopener">https://cdn.bootcdn.net/ajax/libs/mermaid/0.2.4/mermaid.full.min.js</a></p></li><li><p>æˆ‘æ˜¯é‡‡ç”¨çš„hexoçš„nextä¸»é¢˜æ‰€ä»¥æ‰¾åˆ°è‡ªå·±çš„ theme/next/layout/layout.swig å½“ä¸­è¿›è¡Œç¼–è¾‘</p>  <figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">set</span></span> html_class = 'theme-next ' + theme.scheme %&#125;</span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">if</span></span> theme.motion.enable %&#125;</span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">set</span></span> html_class = html_class + ' use-motion' %&#125;</span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">endif</span></span> %&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">class</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123; html_class | lower &#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">lang</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123; config.language &#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">include</span></span> '_partials/head.swig' %&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">title</span>&gt;</span></span><span class="template-tag">&#123;% <span class="name"><span class="keyword">block</span></span> title %&#125;</span><span class="template-tag">&#123;% <span class="name"><span class="keyword">endblock</span></span> %&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="keyword">include</span></span> '_third-party/analytics/index.swig' %&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/minigrid@3.1.1/dist/minigrid.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/photos/photos.css"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/photos/photo.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--æŠŠscriptç²˜åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†--&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/mermaid/0.2.4/mermaid.full.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">........</span></span><br></pre></td></tr></table></figure></li></ul><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†æµç¨‹å›¾äº†ï¼›ç»ˆäºä¸ç”¨å‚»é€¼å¼æˆªå›¾æˆ–è€…è‡ªå·±ç”»äº†ï¼›å®³ï¼›  </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"mermaid"</span>&gt;</span><br><span class="line">graph TD;</span><br><span class="line">    A<span class="comment">--&gt;B;</span></span><br><span class="line">    A<span class="comment">--&gt;C;</span></span><br><span class="line">    B<span class="comment">--&gt;D;</span></span><br><span class="line">    C<span class="comment">--&gt;D;</span></span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ”¾åœ¨äº†ä»£ç å—<code>å†…å®¹</code>å½“ä¸­æ˜¾ç¤ºï¼›<br>ä¸‹é¢å°±æ˜¯ä¸Šè¿°ä»£ç ç›´æ¥ç²˜åœ¨äº†markdownæ–‡ä»¶å½“ä¸­ç„¶åæ˜¾ç¤ºå‡ºæ¥çš„å†…å®¹ï¼›</p><div class="mermaid">graph TD;    A-->B;    A-->C;    B-->D;    C-->D;</div><p>ç°åœ¨å¾—å¥½å¥½å­¦å­¦æ€ä¹ˆç”»æµç¨‹å›¾äº†ï¼›å“ˆå“ˆå“ˆå“ˆ<del>~</del></p><p>æ’å…¥ä¸€ä¸‹<strong>æµç¨‹å›¾mermaidè¯­æ³•</strong>ï¼Œ<br>å‚è€ƒblog ğŸ‘‡</p><ul><li><a href="https://www.jianshu.com/p/9810ba886955" target="_blank" rel="noopener">https://www.jianshu.com/p/9810ba886955</a></li><li><a href="https://blog.csdn.net/wangyaninglm/article/details/52887045" target="_blank" rel="noopener">https://blog.csdn.net/wangyaninglm/article/details/52887045</a></li></ul><p><strong>æ–¹å‘æ§åˆ¶</strong></p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æµç¨‹å›¾åˆ†ä¸ºç«–å‘å’Œæ¨ªå‘ä¸¤å¤§ç±»ï¼Œç«–å‘åŒ…æ‹¬è‡ªä¸Šè€Œä¸‹å’Œè‡ªä¸‹è€Œä¸Šä¸¤ç§é¡ºåºï¼Œæ¨ªå‘åŒ…æ‹¬ä»å³åˆ°å·¦å’Œä»å·¦åˆ°å³ä¸¤ç§é¡ºåºã€‚</span><br><span class="line">å…¶å¯¹åº”è¯­æ³•åˆ†åˆ«ä¸ºï¼šgraph TB/graph BT/graph RL/graph LRã€‚</span><br><span class="line"></span><br><span class="line">TB - <span class="built_in">top</span> <span class="built_in">bottom</span>ï¼ˆè‡ªä¸Šè€Œä¸‹ï¼‰</span><br><span class="line">BT - <span class="built_in">bottom</span> <span class="built_in">top</span>ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰</span><br><span class="line">RL - <span class="built_in">right</span> <span class="built_in">left</span>ï¼ˆä»å³åˆ°å·¦ï¼‰</span><br><span class="line">LR - <span class="built_in">left</span> <span class="built_in">right</span>ï¼ˆä»å·¦åˆ°å³ï¼‰</span><br><span class="line">TD: é»˜è®¤æ–¹å‘ï¼Œä»ä¸Šåˆ°ä¸‹</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸‹ï¼›</p><div class="mermaid">graph LR;    subgraph      A[h_user user:id:3506728370       :name ]-->B[æ˜¥æ™š];    C[h_user user:id:3506728370       :fans ]-->D[12210862];    E[h_user user:id:3506728370       :blogs ]-->F[83];    end</div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ğŸŒŸğŸŒŸğŸŒŸ&lt;br&gt;ğŸ˜„åˆšåˆšæ‰¾åˆ°ä¸¤ä¸ªæ‰¾è¡¨æƒ…åŒ…Emojiçš„åœ°æ–¹ï¼Œå˜¿å˜¿ğŸ˜‰ï¼Œç»ˆäºå¯ä»¥ä¸ç”¨æ˜¯é¢œæ–‡å­—äº†ğŸ˜‰ï¼›ï¼ˆåˆšåˆšè¯•äº†æœ‰äº›ååº”ä¸å‡ºæ¥â€¦ğŸ™ƒ,ä½†æ˜¯å¯ä»¥è¿›è¡Œcopyï¼Œpasteå•Šå“ˆå“ˆå“ˆğŸ§™â€â™€ï¸ ğŸ§™â€â™€ï¸ ğŸ§™â€â™€ï¸ ï¼‰&lt;br&gt;å‚è€ƒblog: &lt;a href=&quot;https://seg
      
    
    </summary>
    
    
      <category term="éšç¬”" scheme="https://fengshana.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="æµç¨‹å›¾" scheme="https://fengshana.github.io/tags/%E6%B5%81%E7%A8%8B%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>MicroservicesGuide-èµ°è¿‘å¾®æœåŠ¡è¯æ±‡</title>
    <link href="https://fengshana.github.io/2020/05/16/%E9%9D%A2%E8%AF%95/%E3%80%90MICROSERVICES%E3%80%91MicroservicesGuide-%E8%B5%B0%E8%BF%91%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AF%8D%E6%B1%87/"/>
    <id>https://fengshana.github.io/2020/05/16/%E9%9D%A2%E8%AF%95/%E3%80%90MICROSERVICES%E3%80%91MicroservicesGuide-%E8%B5%B0%E8%BF%91%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AF%8D%E6%B1%87/</id>
    <published>2020-05-16T08:17:39.710Z</published>
    <updated>2020-05-18T17:35:18.018Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Microservices-Guide-å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»"><a href="#Microservices-Guide-å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»" class="headerlink" title="Microservices Guide å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»"></a>Microservices Guide å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»</h2><p>æˆ‘è§‰å¾—æˆ‘å¯¹æœ‰é“è¯å…¸çš„ç¿»è¯‘æœ‰ç‚¹è¿·â€¦..<br>æ„Ÿè§‰æ€ªæ€ªçš„ï¼›  </p><p><strong>software</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">so : f : t : wa : re ( è‹± /ËˆsÉ’ftweÉ™(r)/  )</span><br><span class="line">n. è½¯ä»¶</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ è½¯ä»¶ï¼›è½¯ä»¶ï¼›è½¯ä»¶ï¼›è½¯è®¾å¤‡</span><br><span class="line">Software è½¯ä»¶ï¼›è½¯ä»¶ï¼›è½¯ä»¶ï¼›è½¯è®¾å¤‡</span><br><span class="line">free software è‡ªç”±è½¯ä»¶ï¼›è‡ªç”±è½¯ä½“ï¼›å…è´¹è½¯ä»¶ï¼›è‡ªåœ¨è½¯ä»¶</span><br><span class="line">software framework è½¯ä»¶æ¡†æ¶ï¼›è½¯ä½“æ¡†æ¶ï¼›è½¯ä»¶æ¶æ„</span><br><span class="line">software development è½¯ä»¶å¼€å‘</span><br><span class="line">software design è½¯ä»¶è®¾è®¡ï¼›è½¯ä»¶å¼€å‘</span><br><span class="line">software<span class="built_in"> system </span>è½¯ä»¶ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p><strong>development</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">de</span> : <span class="string">ve : lo : p : men : t ( è‹± /dÉªËˆvelÉ™pmÉ™nt/  )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">å‘å±•ï¼›å¼€å‘ï¼›å‘è‚²ï¼›ä½å®…å°åŒºï¼ˆä¸“æŒ‡ç”±åŒä¸€å¼€å‘å•†å¼€å‘çš„ï¼‰ï¼›[æ‘„]æ˜¾å½±</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">developments</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å¼€å‘ï¼›å‘å±•ï¼›å‘è‚²ï¼›è¿›åŒ–ï¼›</span></span><br><span class="line"><span class="attr">Development</span> <span class="string">å¼€å‘ï¼›å‘å±•ï¼›å‘è‚²ï¼›è¿›åŒ–</span></span><br><span class="line"><span class="attr">Software</span> <span class="string">Development è½¯ä»¶å¼€å‘ï¼›è½¯ä½“å¼€å‘ï¼›è½¯ä»¶å‘å±•ï¼›è½¯ä»¶ç ”å‘</span></span><br><span class="line"><span class="attr">Career</span> <span class="string">Development ç”Ÿæ¶¯è§„åˆ’ï¼›èŒä¸šè§„åˆ’ï¼›ç”Ÿæ¶¯å‘å±•ï¼›äº‹ä¸šå‘å±•</span></span><br><span class="line"><span class="attr">sustainable</span> <span class="string">development å¯æŒç»­å‘å±•</span></span><br><span class="line"><span class="attr">economic</span> <span class="string">development ç»æµå‘å±•ï¼›ç»æµå¼€å‘</span></span><br><span class="line"><span class="attr">with</span> <span class="string">the development of éšç€ ... å‘å±•</span></span><br></pre></td></tr></table></figure><p><strong>young</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">young</span> <span class="string">( è‹± /jÊŒÅ‹/ )</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">å¹´è½»çš„ï¼›åˆæœŸçš„ï¼›æ²¡æœ‰ç»éªŒçš„</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">å¹´è½»äººï¼›ï¼ˆåŠ¨ç‰©çš„ï¼‰å´½ï¼Œä»”</span></span><br><span class="line"><span class="meta">æ¯”è¾ƒçº§</span> <span class="string">younger</span></span><br><span class="line"><span class="meta">æœ€é«˜çº§</span> <span class="string">youngest</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">youngs</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å¹´è½»äººï¼›é’å¹´ç‰ˆï¼›æ¨æ ¼</span></span><br><span class="line"><span class="attr">Young</span> <span class="string">å¹´è½»äººï¼›é’å¹´ç‰ˆï¼›æ¨æ ¼</span></span><br><span class="line"><span class="attr">Neil</span> <span class="string">Young å°¼å°” æ¨ï¼›å°¼å°”æ¨</span></span><br><span class="line"><span class="attr">Brigham</span> <span class="string">Young æ¨ç™¾ç¿°ï¼›æ¨ç™¾ç¿°å¤§å­¦ï¼›</span></span><br></pre></td></tr></table></figure><p><strong>profession</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">p</span> : <span class="string">ro : fe : ssion ( è‹± /prÉ™ËˆfeÊƒn/ )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">èŒä¸šï¼›ä¸“ä¸šï¼›å£°æ˜ï¼›å®£å¸ƒï¼›è¡¨ç™½</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">professions</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">èŒä¸šï¼›ä¸“ä¸šï¼›ä¸“ä¸šï¼›è¡Œä¸š</span></span><br><span class="line"><span class="attr">profession</span> <span class="string">èŒä¸šï¼›ä¸“ä¸šï¼›ä¸“ä¸šï¼›è¡Œä¸š</span></span><br><span class="line"><span class="attr">caring</span> <span class="string">profession æŠ¤ç†è¡Œä¸šï¼›ç…§é¡¾ä»–äººçš„èŒä¸š</span></span><br><span class="line"><span class="attr">Profession</span> <span class="string">informationization è¡Œä¸šä¿¡æ¯åŒ–</span></span><br><span class="line"><span class="attr">profession</span> <span class="string">of å®£ç§°ï¼ˆæ„Ÿæƒ…ã€ä¿¡å¿µç­‰ï¼‰ï¼›è¡¨ç™½</span></span><br><span class="line"><span class="attr">legal</span> <span class="string">profession æ³•å¾‹ç•Œï¼›æ³•å¾‹ä¸“ä¸š</span></span><br><span class="line"><span class="attr">medical</span> <span class="string">profession åŒ»ç–—èŒä¸š</span></span><br></pre></td></tr></table></figure><p><strong>still</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">s</span> : <span class="string">t : ill ( è‹± /stÉªl/  )</span></span><br><span class="line"><span class="meta">adv.</span> <span class="string">ä»ç„¶ï¼›æ›´ï¼›é™æ­¢åœ°</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">é™æ­¢çš„ï¼›ä¸åŠ¨çš„ï¼›å¯‚é™çš„ï¼›å¹³é™çš„ï¼›ä¸èµ·æ³¡çš„</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">å¯‚é™ï¼›å‰§ç…§ï¼›è’¸é¦å®¤</span></span><br><span class="line"><span class="meta">conj.</span> <span class="string">ä»ç„¶ï¼›ä½†æ˜¯ï¼›å°½ç®¡å¦‚æ­¤</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">è’¸é¦ï¼›ä½¿...é™æ­¢ï¼›ä½¿....å¹³é™ä¸‹æ¥</span></span><br><span class="line"><span class="meta">vi.</span> <span class="string">é™æ­¢ï¼›å¹³é™ï¼›è’¸é¦</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">é™æ­¢ï¼›ä»ç„¶ï¼›è’¸é¦é‡œï¼›ä¾ç„¶</span></span><br><span class="line"><span class="attr">still</span> <span class="string">é™æ­¢ï¼›ä»ç„¶ï¼›è’¸é¦é‡œï¼›ä¾ç„¶</span></span><br><span class="line"><span class="attr">still</span> <span class="string">camera é™ç‰©ç…§ç›¸æœºï¼›é™ç‰©æ‘„å½±é›†ï¼›æ‹ç…§æœº</span></span><br><span class="line"><span class="attr">Still</span> <span class="string">wine é™æ­¢è‘¡è„é…’ï¼›é™æ€è‘¡è„é…’ï¼›æ— æ°”è‘¡è„é…’ï¼›å¹³é™è‘¡è„é…’</span></span><br><span class="line"><span class="attr">still</span> <span class="string">on ä»åœ¨è¿›è¡Œ</span></span><br><span class="line"><span class="attr">still</span> <span class="string">remains ä»ç„¶æ˜¯</span></span><br><span class="line"><span class="attr">sit</span> <span class="string">still å®‰é™åœ°åç€</span></span><br></pre></td></tr></table></figure><p><strong>learning</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lear</span> : <span class="string">ning ( è‹± /ËˆlÉœËnÉªÅ‹/  )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">å­¦ä¹ ï¼›å­¦é—®</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">å­¦ä¹ ï¼ˆlearnçš„ç°åœ¨åˆ†è¯ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å­¦ä¹ ï¼›å­¦ä¹ ï¼›å­¦é—®ï¼›çŸ¥è¯†</span></span><br><span class="line"><span class="attr">learning</span> <span class="string">å­¦ä¹ ï¼›å­¦ä¹ ï¼›å­¦é—®ï¼›çŸ¥è¯†</span></span><br><span class="line"><span class="attr">ensemble</span> <span class="string">learning é›†æˆå­¦ä¹ ï¼›å›´ç»•ä¸­å¿ƒç‚¹çš„åˆ’åˆ†ï¼›ç»„åˆç®—æ³•</span></span><br><span class="line"><span class="attr">Blended</span> <span class="string">Learning æ··åˆå¼å­¦ä¹ ï¼›æ··åˆå­¦ä¹ ï¼›æ··åˆå¼æ•™å­¦</span></span><br><span class="line"><span class="attr">learning</span> <span class="string">English å­¦ä¹ è‹±è¯­</span></span><br><span class="line"><span class="attr">higher</span> <span class="string">learning n. é«˜ç­‰æ•™è‚²ï¼›é«˜æ·±å­¦é—®ï¼›ï¼ˆç”µå½±åç§°ï¼‰æ ¡å›­å¤§å†²çª</span></span><br><span class="line"><span class="attr">language</span> <span class="string">learning è¯­è¨€å­¦ä¹ </span></span><br></pre></td></tr></table></figure><p><strong>techniques</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">te</span> : <span class="string">chi : ni : qu : es ( chi è¯» k çš„éŸ³ï¼›qu è¯» k çš„éŸ³ï¼› è‹± /tekËˆni:ks/ )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">æŠ€æœ¯ï¼ˆtechniqueçš„å¤æ•°ï¼‰ï¼›æ–¹æ³•ï¼›æŠ€å·§</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">æŠ€æ³•ï¼›æŠ€æœ¯ï¼›æŠ€å·§ï¼›ç½‘ç«™æ¶æ„</span></span><br><span class="line"><span class="attr">Techniques</span> <span class="string">æŠ€æ³•ï¼›æŠ€æœ¯ï¼›æŠ€å·§ï¼›ç½‘ç«™æ¶æ„</span></span><br><span class="line"><span class="attr">Sampling</span> <span class="string">techniques é‡‡æ ·æŠ€æœ¯ï¼›æŠ½æ ·æŠ€æœ¯ï¼›å–æ ·æŠ€æœ¯ï¼›é‡‡æ ·å¦™æŠ€</span></span><br><span class="line"><span class="attr">Metallographic</span> <span class="string">Techniques é‡‘ç›¸æŠ€æœ¯</span></span><br><span class="line"><span class="attr">application</span> <span class="string">Techniques æ¶‚è£…æŠ€æœ¯</span></span><br><span class="line"><span class="attr">selling</span> <span class="string">techniques æ¨é”€æŠ€æœ¯</span></span><br><span class="line"><span class="attr">motivational</span> <span class="string">techniques æ¿€åŠ±æŠ€èƒ½ï¼›æ¿€åŠ±æ–¹æ³•ï¼ˆmotivational technique çš„å¤æ•°ï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>building</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bu </span>: il : ding ( è‹± /Ëˆ<span class="keyword">bÉªldÉªÅ‹/ </span> )</span><br><span class="line"><span class="symbol">n.</span> å»ºç­‘ï¼›å»ºç­‘ç‰©</span><br><span class="line"><span class="symbol">v.</span> å»ºç­‘ï¼›å»ºç«‹ï¼›å¢åŠ ï¼ˆ<span class="keyword">buildçš„ingå½¢å¼ï¼‰</span></span><br><span class="line"><span class="keyword">å¤æ•° </span><span class="keyword">buildings</span></span><br><span class="line"><span class="keyword">ç½‘ç»œé‡Šä¹‰ </span>å»ºç­‘ç‰©ï¼›å¤§æ¥¼ï¼›å·æ¥¼ï¼›æˆ¿å±‹</span><br><span class="line"><span class="keyword">building </span>å»ºç­‘ç‰©ï¼›å¤§æ¥¼ï¼›å·æ¥¼ï¼›æˆ¿å±‹</span><br><span class="line"><span class="symbol">green</span> <span class="keyword">building </span>ç»¿è‰²å»ºç­‘ï¼›ç»¿è‰²ç”Ÿæ€å»ºç­‘ï¼›ç»¿è‰²ä¿®å»º</span><br><span class="line"><span class="symbol">Chrysler</span> <span class="keyword">Building </span>å…‹è±æ–¯å‹’å¤§å¦ï¼›å…‹è±æ–¯å‹’å¤§æ¥¼ï¼›ç¾å›½å…‹è±æ–¯å‹’å¤§å¦ï¼›å…‹è±æ–¯å‹’</span><br><span class="line"><span class="keyword">building </span>up å»ºé€ ï¼›è£…é…ï¼›å †ç„Šï¼›å»ºç«‹å¢é•¿</span><br><span class="line"><span class="symbol">office</span> <span class="keyword">building </span>åŠå…¬å¤§æ¥¼ï¼ˆç­‰äºoffice <span class="keyword">blockï¼‰</span></span><br><span class="line"><span class="keyword">building </span>material å»ºç­‘ææ–™</span><br></pre></td></tr></table></figure><p><strong>tools</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">too : l : s ( è‹± /tuËlz/  )</span><br><span class="line">n. [è®¡]å·¥å…·ï¼Œå·¥å…·èœå•ï¼›å·¥å…·ç®±ï¼ˆtoolçš„å¤æ•°å½¢å¼ï¼‰</span><br><span class="line">v. ç”¨å·¥å…·åŠ å·¥<span class="built_in">..</span>. (toolçš„ç¬¬ä¸‰äººç§°å•æ•°å½¢å¼)</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ å·¥å…·ï¼›åˆ€å…·ï¼›é¢æ¿ï¼›å·¥å…·æ </span><br><span class="line">Tools å·¥å…·ï¼›åˆ€å…·ï¼›é¢æ¿ï¼›å·¥å…·æ </span><br><span class="line">Game Tools æ¸¸æˆå¸¸ç”¨å·¥å…·ï¼›æ¸¸æˆå¸¸ç”¨æ”¯æŒå·¥å…·é›†åˆï¼›æ¸¸æˆå¼€å‘å·¥å…·ï¼›æ¸¸æˆå·¥å…·</span><br><span class="line">Debugging Tools è°ƒè¯•å·¥å…·ï¼›ç¿Ÿå·¥å…·ï¼›æ’é”™å·¥å…·ï¼›é™¤é”™å·¥å…·ï¼›</span><br><span class="line">hardware tools äº”é‡‘å·¥å…·ï¼›æ—¥ç”¨äº”é‡‘</span><br><span class="line">new tools æ–°å·¥å…·</span><br><span class="line">machines <span class="keyword">and</span> tools æœºå…·</span><br></pre></td></tr></table></figure><p><strong>effectively</strong></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">e : <span class="type">ffe</span> : <span class="type">c</span> : <span class="type">ti</span> : <span class="type">ve</span> : <span class="type">ly</span> ( è‹± /ÉªËˆfektÉªvli/ )</span><br><span class="line">adv. æœ‰æ•ˆåœ°ï¼›ç”Ÿæ•ˆåœ°ï¼›æœ‰åŠ›åœ°ï¼›å®é™…ä¸Š</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ æœ‰æ•ˆåœ°ï¼›èµ·ä½œç”¨åœ°ï¼›å®é™…ä¸Šï¼›æœ‰ç”¨åœ°</span><br><span class="line">effectively æœ‰æ•ˆåœ°ï¼›èµ·ä½œç”¨åœ°ï¼›å®é™…ä¸Šï¼›æœ‰ç”¨åœ°</span><br><span class="line">effectively grounded ç›´æ¥æ¥åœ°ï¼›æœ‰æ•ˆè¢«æ¥åœ°ï¼›æœ‰æ•ˆæ¥åœ°ï¼›æœ‰æ•ˆæ¥åœ°çš„</span><br><span class="line"><span class="keyword">use</span> effectively æœ‰æ•ˆåˆ©ç”¨ï¼›æœ‰æ•ˆåœ°åˆ©ç”¨</span><br></pre></td></tr></table></figure><p><strong>involved</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">in</span> : <span class="string">vol : ve : d (ve è¯» v çš„éŸ³ è‹± /ÉªnËˆvÉ’lvd/  )</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">æœ‰å…³çš„ï¼›å·å…¥çš„ï¼›å¤æ‚çš„</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">æ¶‰åŠï¼›ä½¿å‚ä¸ï¼›åŒ…å«ï¼ˆinvolveçš„è¿‡å»æ—¶å’Œè¿‡å»åˆ†è¯ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å·å…¥ï¼›æ¶‰æ¡ˆï¼›æ¶‰è¶³ï¼›æ‰€æ¶‰åŠ</span></span><br><span class="line"><span class="attr">Involved</span> <span class="string">å·å…¥ï¼›æ¶‰æ¡ˆï¼›æ¶‰è¶³ï¼›æ‰€æ¶‰åŠ</span></span><br><span class="line"><span class="attr">parties</span> <span class="string">involved äº¤æ¢ä¸­çš„å„æ–¹ï¼›å½“äº‹äººï¼›å½“äº‹è€…ï¼›äº’æ¢ä¸­çš„å„æ–¹</span></span><br><span class="line"><span class="attr">get</span> <span class="string">involved ä»‹å…¥ï¼›åŠ å…¥æˆ‘ä»¬ï¼›é¡¹ç›®ä»‹ç»ï¼›å‚ä¸</span></span><br><span class="line"><span class="attr">involved</span> <span class="string">in æ¶‰åŠï¼›åŒ…å«ï¼›ç‰µæ¶‰è¿›...</span></span><br><span class="line"><span class="attr">involved</span> <span class="string">with æ¶‰åŠï¼›ä¸...æœ‰å…³è”</span></span><br><span class="line"><span class="attr">get</span> <span class="string">involved in æ¶‰åŠï¼›å·å…¥</span></span><br></pre></td></tr></table></figure><p><strong>activity</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">a</span> : <span class="string">c : ti : vi : ty ( è‹± /Ã¦kËˆtÉªvÉ™ti/ )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">æ´»åŠ¨ï¼›è¡ŒåŠ¨ï¼›æ´»è·ƒ</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">activities</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">æ´»åŠ¨ï¼›æ´»æ€§ï¼›æ´»åº¦ï¼›æ´»åŠ¨</span></span><br><span class="line"><span class="attr">Activity</span> <span class="string">æ´»åŠ¨ï¼›æ´»æ€§ï¼›æ´»åº¦ï¼›æ´»åŠ¨</span></span><br><span class="line"><span class="attr">logistics</span> <span class="string">activity ç‰©æµæ´»åŠ¨ï¼›ç‰©æµ</span></span><br><span class="line"><span class="attr">physical</span> <span class="string">activity ä½“åŠ›æ´»åŠ¨ï¼›ä½“è‚²æ´»åŠ¨ï¼›ä½“èƒ½æ´»åŠ¨</span></span><br><span class="line"><span class="attr">economic</span> <span class="string">activity ç»æµæ´»åŠ¨</span></span><br><span class="line"><span class="attr">catalytic</span> <span class="string">activity å‚¬åŒ–æ´»æ€§</span></span><br><span class="line"><span class="attr">physical</span> <span class="string">activity èº«ä½“æ´»åŠ¨ï¼›ä½“è‚²æ´»åŠ¨ï¼›ä½“åŠ›æ´»åŠ¨</span></span><br></pre></td></tr></table></figure><p><strong>over</strong></p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">o : v : er ( è‹± /ËˆÉ™ÊŠvÉ™(r)/  )</span><br><span class="line">adv. å€’ä¸‹ï¼›ç¿»è½¬ï¼›ç©¿è¿‡ï¼›å®Œå…¨è¦†ç›–ï¼›ä»¥ä¸Šï¼›å¤§äºï¼›å†ï¼›ç»“æŸï¼›æ”¹å˜ï¼›å®Œæ¯•ï¼›ä»”ç»†åœ°</span><br><span class="line">prep. åœ¨<span class="params">...</span>ä¸Šé¢ï¼›ä»<span class="params">...</span>ä¸Šæ–¹ï¼›ç©¿è¶Šï¼›åœ¨<span class="params">...</span>çš„å¦ä¸€è¾¹ï¼›åœ¨<span class="params">...</span>çš„è¿œç«¯ï¼›ä»<span class="params">...</span>è½ä¸‹ï¼›éåŠï¼›å¤šäºï¼›åœ¨<span class="params">...</span>æœŸé—´ï¼›æ¸¡è¿‡ï¼›ç”±äºï¼›å…³äºï¼›åˆ©ç”¨ï¼›é€šè¿‡ï¼›å£°éŸ³å¤§äºï¼›é«˜äºï¼›çº§åˆ«åœ¨<span class="params">...</span>ä¹‹ä¸Šï¼›ä¼˜å…ˆäºï¼›è¶…è¿‡</span><br><span class="line">n. ï¼ˆæ¿çƒï¼‰ä¸€è½®æŠ•çƒ</span><br><span class="line">adj. å€’ä¸‹çš„ï¼›æŠ˜èµ·æ¥çš„ï¼›ç»“æŸçš„ï¼›å‰©ä¸‹çš„</span><br><span class="line">v. è¶Šè¿‡</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ ç»“æŸï¼›è¶Šè¿‡ï¼›è¶…è¿‡</span><br><span class="line">over ç»“æŸï¼›è¶Šè¿‡ï¼›è¶…è¿‡</span><br><span class="line">hand over ç§»äº¤ï¼›äº¤å‡ºï¼›è®©ä¸</span><br><span class="line">Over There é‚£æ—¶é‚£åœ°ï¼›åœ¨é‚£è¾¹ï¼›åœ¨é‚£é‡Œï¼›é‚£è¾¹</span><br><span class="line"><span class="literal">all</span> over åˆ°å¤„ï¼›éåŠï¼›æµ‘èº«ï¼›å…¨éƒ¨ç»“æŸ</span><br><span class="line">over there adv. åœ¨é‚£é‡Œ</span><br><span class="line">over <span class="literal">and</span> over åå¤ï¼›å†ä¸‰</span><br></pre></td></tr></table></figure><p><strong>decades</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">n.</span> <span class="string">æ•°åå¹´ï¼ˆdecadeçš„å¤æ•°ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">åå¹´ï¼›å‡ åå¹´ï¼›å‡ åå¹´æ¥ï¼›å°é˜¶</span></span><br><span class="line"><span class="attr">decades</span> <span class="string">åå¹´ï¼›å‡ åå¹´ï¼›å‡ åå¹´æ¥ï¼›å°é˜¶</span></span><br><span class="line"><span class="attr">Mixed</span> <span class="string">Decades æŸæŸå¹´ä»£é£</span></span><br><span class="line"><span class="attr">Frogger</span> <span class="string">Decades é’è›™è¿‡æ²³çºªå¿µç‰ˆ</span></span><br><span class="line"><span class="attr">over</span> <span class="string">the past decade åœ¨è¿‡å»çš„åå¹´é‡Œ</span></span><br></pre></td></tr></table></figure><p><strong>writing</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wri</span> : <span class="string">ting ( è‹± /ËˆraÉªtÉªÅ‹/  )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">ä¹¦å†™ï¼›å†™ä½œæŠ€èƒ½ï¼›è‘—ä¹¦ç«‹è¯´ï¼›å†™ä½œçš„èŒä¸šï¼›ä½œå“ï¼›è‘—ä½œï¼›æ–‡å­—ï¼›ç¬”è¿¹</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">ä¹¦å†™ï¼›å†™ä½œï¼ˆwriteçš„ç°åœ¨åˆ†è¯ï¼‰</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">writings</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å†™ä½œï¼›ä¹¦å†™ï¼›æ–‡å­—</span></span><br><span class="line"><span class="attr">Writing</span> <span class="string">å†™ä½œï¼›ä¹¦å†™ï¼›æ–‡å­—</span></span><br><span class="line"><span class="attr">Nature</span> <span class="string">Writing è‡ªç„¶å†™ä½œï¼›è‡ªç„¶ä¹¦å†™ï¼›è‡ªç„¶æ–‡å­¦</span></span><br><span class="line"><span class="attr">English</span> <span class="string">Writing è‹±è¯­å†™ä½œï¼›è‹±æ–‡å†™ä½œï¼›è‹±æ–‡ä¹¦é¢è¡¨è¾¾ï¼›å†™ä½œ</span></span><br><span class="line"><span class="attr">in</span> <span class="string">writing ä¹¦é¢ï¼›ä¹¦é¢çš„ï¼›ç”¨ä¹¦é¢å†™</span></span><br><span class="line"><span class="attr">writing</span> <span class="string">ability å†™ä½œèƒ½åŠ›ï¼›ä¹¦å†™èƒ½åŠ›</span></span><br><span class="line"><span class="attr">writing</span> <span class="string">skill å†™ä½œæŠ€å·§ï¼›ä¹¦å†™æŠ€èƒ½ï¼›ç¬”å¤´</span></span><br></pre></td></tr></table></figure><p><strong>in the last two</strong></p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æœ€åä¸¤ä¸ª</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">the</span> <span class="keyword">last</span> <span class="literal">two</span> months åœ¨è¿‡å»çš„ä¸¤ä¸ªæœˆï¼›åœ¨æœ€åä¸¤ä¸ªæœˆ</span><br><span class="line">In <span class="keyword">the</span> <span class="keyword">last</span> <span class="literal">two</span> years åœ¨æœ€åä¸¤å¹´ä¸­</span><br><span class="line">In <span class="keyword">the</span> <span class="keyword">last</span> <span class="literal">two</span> decades åœ¨æœ€è¿‘äºŒåå¹´</span><br></pre></td></tr></table></figure><p><strong>website</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">we</span> : <span class="string">b : si : te ( è‹± /ËˆwebsaÉªt/ )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">ç½‘ç«™ï¼ˆå…¨çƒèµ„è®¯ç½‘çš„ä¸»æœºç«™ï¼‰</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">websites</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">ç½‘ç«™ï¼›ç½‘å€ï¼›ç½‘ç«™å»ºè®¾ï¼›ç«™ç‚¹</span></span><br><span class="line"><span class="attr">Website</span> <span class="string">ç½‘ç«™ï¼›ç½‘å€ï¼›ç½‘ç«™å»ºè®¾ï¼›ç«™ç‚¹</span></span><br><span class="line"><span class="attr">Website</span> <span class="string">Design ç½‘ç«™è®¾è®¡ï¼›ç½‘é¡µè®¾è®¡ï¼›ç½‘ç«™å»ºè®¾ï¼›å“ç‰Œç½‘ç«™å½¢è±¡è®¾è®¡</span></span><br><span class="line"><span class="attr">Website</span> <span class="string">Promotion ç½‘ç«™æ¨å¹¿ï¼›ç½‘ç«™æ¨å¹¿å¸¸è¯†ï¼›ç½‘ç«™æ¨å¹¿çŸ¥è¯†ï¼›ä¼ä¸šç½‘ç«™ç½‘ç»œæ¨å¹¿ï¼›</span></span><br><span class="line"><span class="attr">website</span> <span class="string">design ç½‘ç«™è®¾è®¡</span></span><br><span class="line"><span class="attr">website</span> <span class="string">promotion ç½‘ç«™æ¨å¹¿</span></span><br><span class="line"><span class="attr">website</span> <span class="string">development ç½‘ç«™å¼€å‘ï¼›ç½‘é¡µè®¾è®¡</span></span><br></pre></td></tr></table></figure><p><strong>patterns</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pa</span> : <span class="string">tter : n : s</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">æ¨¡å¼ï¼ˆpatternçš„å¤æ•°å½¢å¼ï¼‰</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">æ‘¹åˆ¶ï¼›ç”¨å›¾æ¡ˆè£…é¥°ï¼›å¤å†™ï¼ˆpatternçš„ç¬¬ä¸‰äººç§°å•æ•°å½¢å¼ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">èŠ±æ ·ï¼›æ¨¡å‹ï¼›æœ¨æ¨¡ï¼›å½¢æ€</span></span><br><span class="line"><span class="attr">patterns</span> <span class="string">èŠ±æ ·ï¼›æ¨¡å‹ï¼›æœ¨æ¨¡ï¼›å½¢æ€</span></span><br><span class="line"><span class="attr">fashionable</span> <span class="string">patterns èŠ±è‰²å…¥æ—¶ï¼›èŠ±æ ·è¿›æ—¶ï¼›æ—¶å°šæ¨¡å¼ï¼›èŠ±æ ·å…¥æ—¶</span></span><br><span class="line"><span class="attr">Corrective</span> <span class="string">Patterns è°ƒæ•´æµªå½¢æ€ï¼›è°ƒå‰‚æµªå½¢æ€</span></span><br><span class="line"><span class="attr">development</span> <span class="string">patterns å‘å±•æ¨¡å¼</span></span><br></pre></td></tr></table></figure><p><strong>practices</strong></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">p :</span> <span class="string">ra :</span> <span class="string">c :</span> <span class="string">ti :</span> <span class="string">ce :</span> s ( è‹± <span class="regexp">/ËˆprÃ¦ktÉªsÉªs/</span>  )</span><br><span class="line">n. å®è·µï¼ˆpractice çš„å¤æ•°ï¼‰ï¼›ç»ƒä¹ </span><br><span class="line">v. ç»ƒä¹ ï¼ˆpracticeçš„ç¬¬ä¸‰äººç§°å•æ•°å½¢å¼ï¼‰</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ å®¢æˆ·ä¸“åŒºï¼›ä¸šåŠ¡ä¸­å¿ƒ</span><br><span class="line">Practices å®¢æˆ·ä¸“åŒºï¼›ä¸šåŠ¡ä¸­å¿ƒ</span><br><span class="line">Disciplinazy Practices æƒ©æˆ’æ€§æªæ–½ï¼›æ€§æªæ–½</span><br><span class="line">Agricultural practices å†œä¸šæ–¹å¼ï¼›è€•ä½œæ–¹æ³•ï¼›å†œä¸šæ–¹æ³•</span><br><span class="line">cultural practices æ–‡åŒ–å®è·µï¼›æ ½åŸ¹æŠ€æœ¯</span><br><span class="line">foreign corrupt practices act åå›½å¤–è¡Œè´¿æ³•è§„</span><br></pre></td></tr></table></figure><p><strong>easier</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ea</span> : <span class="string">si : er ( è‹± /'iËzÉªÉ™/  )</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">æ›´ç®€å•ï¼›å®¹æ˜“äº›ï¼ˆeasy çš„æ¯”è¾ƒçº§å½¢å¼ï¼‰ï¼›è¾ƒæ—©çš„</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">çŸ¥æ˜“è¡Œéš¾ï¼›æ›´ç®€å•ï¼›æ›´å®¹æ˜“çš„ï¼›æ›´ä¾¿æ·</span></span><br><span class="line"><span class="attr">Easier</span> <span class="string">çŸ¥æ˜“è¡Œéš¾ï¼›æ›´ç®€å•ï¼›æ›´å®¹æ˜“çš„ï¼›æ›´ä¾¿æ·</span></span><br><span class="line"><span class="attr">EASIER</span> <span class="string">RIDER æ›´é€é¥çš„éª‘å£«</span></span><br><span class="line"><span class="attr">Work</span> <span class="string">easier å·¥ä½œæ¯”è¾ƒè½»æ¾</span></span><br><span class="line"><span class="attr">easier</span> <span class="string">said than done è¯´æ¥å®¹æ˜“åšèµ·æ¥éš¾</span></span><br><span class="line"><span class="attr">make</span> <span class="string">life easier æ—¥å­ä¼šè¿‡å¾—æ›´æ½‡æ´’ï¼›ç”Ÿæ´»å˜å¾—æ›´åŠ èˆ’é€‚</span></span><br></pre></td></tr></table></figure><p><strong>useful</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">u</span> : <span class="string">se : ful ( è‹± /ËˆjuËsfl/  )</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">æœ‰ç”¨çš„ï¼›æœ‰ç›Šçš„ï¼›æœ‰å¸®åŠ©çš„</span></span><br><span class="line"><span class="meta">æ¯”è¾ƒçº§</span> <span class="string">more usefulï¼›</span></span><br><span class="line"><span class="meta">æœ€é«˜çº§</span> <span class="string">most useful</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">æœ‰ç”¨çš„ï¼›æœ‰ç›Šï¼›è½¯ç¢Ÿé€šè½¯ä»¶ï¼›æœ‰æ•ˆçš„</span></span><br><span class="line"><span class="attr">useful</span> <span class="string">æœ‰ç”¨çš„ï¼›æœ‰ç›Šï¼›è½¯ç¢Ÿé€šè½¯ä»¶ï¼›æœ‰æ•ˆçš„</span></span><br><span class="line"><span class="attr">Useful</span> <span class="string">numbers å¸¸ç”¨ç”µè¯å·ç ï¼›å¸¸ç”¨ç”µè¯ï¼›å¸¸ç”¨å¾·å¾‹é£å·ç ï¼›ç»å¸¸ä½¿ç”¨ç”µè¯å·å¤´</span></span><br><span class="line"><span class="attr">useful</span> <span class="string">resistance æœ‰ç›Šé˜»åŠ›</span></span><br><span class="line"><span class="attr">be</span> <span class="string">useful to å¯¹...æœ‰ç”¨ï¼›å…·æœ‰...ç”¨é€”</span></span><br><span class="line"><span class="attr">useful</span> <span class="string">life ä½¿ç”¨å¯¿å‘½ï¼›æœ‰æ•ˆæœŸ</span></span><br><span class="line"><span class="attr">useful</span> <span class="string">data æœ‰ç”¨æ•°æ®å’Œèµ„æ–™</span></span><br></pre></td></tr></table></figure><p><strong>began</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">be </span>: gan ( è‹± /<span class="keyword">bÉªËˆÉ¡Ã¦n/ </span>)</span><br><span class="line"><span class="symbol">v.</span> å¼€å§‹ï¼›åˆ›å»ºï¼›ç€æ‰‹äºï¼ˆ<span class="keyword">beginçš„è¿‡å»å¼ï¼‰</span></span><br><span class="line"><span class="keyword">ç½‘ç»œé‡Šä¹‰ </span>å¼€å§‹ï¼›è´åŠ ï¼›å¼€å§‹äº†ï¼›æ‰å¼€å§‹ï¼›</span><br><span class="line"><span class="keyword">began </span>å¼€å§‹ï¼›è´åŠ ï¼›å¼€å§‹äº†ï¼›æ‰å¼€å§‹</span><br><span class="line"><span class="keyword">Began </span>menopause å¼€å§‹æ›´å¹´æœŸ</span><br><span class="line"><span class="symbol">Passion</span> <span class="keyword">began </span>ç¿»è¯‘å…¬å¸å¼€å§‹</span><br><span class="line"><span class="keyword">begin </span>with ä»¥...å¼€å§‹ï¼›å¼€å§‹äº...</span><br><span class="line"><span class="keyword">begin </span>at å‡ ç‚¹å¼€å§‹ï¼›ä»..å¼€å§‹</span><br><span class="line"><span class="keyword">begin </span>again é‡æ–°å¼€å§‹ï¼›é‡åš</span><br></pre></td></tr></table></figure><p><strong>place</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">p</span> : <span class="string">la : ce ( è‹± /pleÉªs/  )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">åœ°æ–¹ï¼›ä½æ‰€ï¼›åº§ä½</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">æ”¾ç½®ï¼›ä»»å‘½ï¼›å¯„äºˆ</span></span><br><span class="line"><span class="meta">vi.</span> <span class="string">ååˆ—å‰èŒ…ï¼›å–å¾—åæ¬¡</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">placed</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">placed</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">placing</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">places</span></span><br><span class="line"><span class="meta">ç¬¬ä¸‰äººç§°å•æ•°</span> <span class="string">places</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">æ¸ é“ï¼›åœ°æ–¹ï¼›æ”¾ç½®ï¼›åœ°ç‚¹</span></span><br><span class="line"><span class="attr">Place</span> <span class="string">æ¸ é“ï¼›åœ°æ–¹ï¼›æ”¾ç½®ï¼›åœ°ç‚¹</span></span><br><span class="line"><span class="attr">Lanham</span> <span class="string">Place æœ—è±ªåŠï¼›æœ—è±ªé…’åº—ï¼›æœ—è±ªåŠå•†åœºï¼›æœ—è±ªé…’åº—</span></span><br><span class="line"><span class="attr">Martin</span> <span class="string">Place é©¬ä¸å¹¿åœºï¼›ç‰›ï¼›ç«è½¦ç«™</span></span><br><span class="line"><span class="attr">in</span> <span class="string">place é€‚å½“ï¼›é€‚å½“çš„ï¼›åœ¨é€‚å½“çš„åœ°æ–¹ï¼›åœ¨é€‚å½“çš„ä½ç½®</span></span><br><span class="line"><span class="attr">place</span> <span class="string">in å®‰æ’ï¼›æ”¾ç½®</span></span><br><span class="line"><span class="attr">take</span> <span class="string">place å‘ç”Ÿï¼›ä¸¾è¡Œ</span></span><br></pre></td></tr></table></figure><p><strong>publish</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pub</span> : <span class="string">li : sh ( è‹± /ËˆpÊŒblÉªÊƒ/  )</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">å‡ºç‰ˆï¼›å‘è¡¨ï¼›å…¬å¸ƒ</span></span><br><span class="line"><span class="meta">vi.</span> <span class="string">å‡ºç‰ˆï¼›å‘è¡Œï¼›åˆŠå°</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">published</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">published</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">publishing</span></span><br><span class="line"><span class="meta">ç¬¬ä¸‰äººç§°å•æ•°</span> <span class="string">publishes</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å‡ºç‰ˆï¼›å…¬å¸ƒï¼›å‘å¸ƒ</span></span><br><span class="line"><span class="attr">publish</span> <span class="string">å‡ºç‰ˆï¼›å…¬å¸ƒï¼›å‘å¸ƒ</span></span><br><span class="line"><span class="attr">publish</span> <span class="string">connections å‘å¸ƒè¿æ¥</span></span><br><span class="line"><span class="attr">Publish</span> <span class="string">Entry å‘å¸ƒé¡¹ï¼›å®£å¸ƒé¡¹</span></span><br></pre></td></tr></table></figure><p><strong>articles</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ar</span> : <span class="string">ti : cle : s</span></span><br><span class="line"><span class="attr">n.[è¯­]æ–‡ç« ï¼›ç‰©å“ï¼›[æ³•]æ¡æ¬¾ï¼ˆarticleçš„å¤æ•°ï¼‰ï¼›[è¯­]å† è¯</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">ä½¿å—åè®®æ¡æ¬¾çš„çº¦æŸï¼›æŒ‡æ§ï¼ˆarticleçš„ä¸‰å•å½¢å¼ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å† è¯ï¼›æ–‡ç« ï¼›å„æ¡ï¼›æœ¬åˆŠ</span></span><br><span class="line"><span class="attr">Articles</span> <span class="string">å† è¯ï¼›æ–‡ç« ï¼›å„æ¡ï¼›æœ¬åˆŠ</span></span><br><span class="line"><span class="attr">Instant</span> <span class="string">Articles å³æ—¶æ–‡ç« ï¼›æ–°é—»å¿«è¯»ï¼›å³æ—¶æ–‡æ±‡ï¼›æ–‡ç« å¿«æ‰‹</span></span><br><span class="line"><span class="attr">Plastic</span> <span class="string">Articles å¡‘æ–™åˆ¶å“ï¼›å¡‘æ–™ä»¶ï¼›æ•´å½¢ç¯‡ï¼›ä¸»è¦è¿›å£å•†å“è‹±æ–‡</span></span><br><span class="line"><span class="attr">articles</span> <span class="string">of association å…¬å¸ç« ç¨‹ï¼›ç»„ç»‡ç« ç¨‹</span></span><br><span class="line"><span class="attr">articles</span> <span class="string">for daily use ç”Ÿæ´»ç”¨å“</span></span><br><span class="line"><span class="attr">original</span> <span class="string">articles åŸä½œï¼›ç ”ç©¶æ–‡ç« </span></span><br></pre></td></tr></table></figure><p><strong>colleagues</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">co</span> : <span class="string">lle : gu : es</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">åŒäº‹ï¼›åŒè¡Œï¼ˆcolleagueçš„å¤æ•°ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">åŒä»ï¼›åŒäººï¼›åŒäº‹ï¼›åŒäº‹ä¹‹é—´</span></span><br><span class="line"><span class="attr">Colleagues</span> <span class="string">åŒä»ï¼›åŒäººï¼›åŒäº‹ï¼›åŒäº‹ä¹‹é—´</span></span><br><span class="line"><span class="attr">Visiting</span> <span class="string">Colleagues æ‹œè®¿åŒäº‹ï¼›é€ è®¿åŒäº‹</span></span><br><span class="line"><span class="attr">Complimenting</span> <span class="string">Colleagues èµç¾åŒäº‹ï¼›èµèª‰åŒäº‹</span></span><br></pre></td></tr></table></figure><p><strong>joined</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jo</span> : <span class="string">in : ed ( è‹± /dÊ’É”ind/  )</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">åŠ å…¥ï¼›å‚åŠ ï¼ˆjoinçš„è¿‡å»å¼ï¼›è¿‡å»åˆ†è¯ï¼‰ï¼›[è®¡]è¿æ¥</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">åŠ å…¥ï¼›å®¢æˆ·ç•™è¨€ï¼›è¿æ¥ï¼›æ‹›ç”Ÿç®€ç« </span></span><br><span class="line"><span class="attr">joined</span> <span class="string">åŠ å…¥ï¼›å®¢æˆ·ç•™è¨€ï¼›è¿æ¥ï¼›æ‹›ç”Ÿç®€ç« </span></span><br><span class="line"><span class="attr">JOINED</span> <span class="string">Strategy è¿æ¥ç­–ç•¥</span></span><br><span class="line"><span class="attr">joined</span> <span class="string">field å°†ä¸¤ä¸ªè¡¨ä¸­è¿æ¥å­—æ®µ</span></span><br><span class="line"><span class="attr">join</span> <span class="string">hands æºæ‰‹ï¼›è”æ‰‹ï¼›é½å¿ƒååŠ›</span></span><br><span class="line"><span class="attr">join</span> <span class="string">in åŠ å…¥ï¼›å‚åŠ </span></span><br><span class="line"><span class="attr">join</span> <span class="string">hands with æ¡æ‰‹ï¼›åŒ...è”åˆ</span></span><br></pre></td></tr></table></figure><p><strong>ThoughtWorks</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>role</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ro : le ( è‹± /rÉ™ÊŠl/  )</span><br><span class="line">n. è§’è‰²ï¼›ä»»åŠ¡</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ è§’è‰²ï¼›ä½œç”¨ï¼›ç¤¾ä¼šè§’è‰²ï¼›ä»»åŠ¡</span><br><span class="line"><span class="keyword">Role</span> <span class="title">è§’è‰²ï¼›ä½œç”¨ï¼›ç¤¾ä¼šè§’è‰²ï¼›ä»»åŠ¡</span></span><br><span class="line"><span class="title">role</span> playing è§’è‰²æ‰®æ¼”ï¼›è§’è‰²æ‰®æ¼”æ³•ï¼›èŒèƒ½æ¼”ä¹ ï¼›è§’è‰²è¡¨æ¼”</span><br><span class="line"><span class="keyword">role</span> <span class="title">model</span> è¡Œä¸ºæ¦œæ ·ï¼›è§’è‰²æ¨¡å‹ï¼›æ¦œæ ·ï¼›æ¨¡èŒƒ</span><br><span class="line"><span class="keyword">role</span> <span class="title">of</span> ....çš„è§’è‰²</span><br><span class="line">play an important <span class="keyword">role</span> <span class="title">èµ·åˆ°é‡è¦ä½œç”¨</span></span><br><span class="line"><span class="title">leading</span> <span class="keyword">role</span> <span class="title">ä¸»å¯¼ä½œç”¨ï¼›ä¸»å¯¼åœ°ä½</span></span><br></pre></td></tr></table></figure><p><strong>learn</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lear</span> : <span class="string">n ( è‹± /lÉœËn/  )</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">å­¦ä¹ ï¼›å¾—çŸ¥ï¼›è®¤è¯†åˆ°</span></span><br><span class="line"><span class="meta">vi.</span> <span class="string">å­¦ä¹ ï¼›è·æ‚‰</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">learned æˆ– learnt</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">learned æˆ– learnt</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">learning</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å­¦ä¼šï¼›å¾—çŸ¥</span></span><br><span class="line"><span class="attr">Learn</span> <span class="string">å­¦ä¼šï¼›å¾—çŸ¥</span></span><br><span class="line"><span class="attr">learn</span> <span class="string">about äº†è§£ï¼›å¾—çŸ¥ï¼›è·æ‚‰ï¼›å¬åˆ°</span></span><br><span class="line"><span class="attr">learn</span> <span class="string">of å¬åˆ°ï¼›è·æ‚‰ï¼›è·æ‚‰çš„äº‹ï¼›å¬è¯´</span></span><br><span class="line"><span class="attr">learn</span> <span class="string">from å‘...å­¦ä¹ </span></span><br><span class="line"><span class="attr">learn</span> <span class="string">English å­¦ä¹ è‹±è¯­</span></span><br><span class="line"><span class="attr">learn</span> <span class="string">about äº†è§£ï¼›å­¦ä¹ </span></span><br></pre></td></tr></table></figure><p><strong>deliver</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">de</span> : <span class="string">li : ver ( è‹± /dÉªËˆlÉªvÉ™(r)/  )</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">äº¤ä»˜ï¼›å‘è¡¨ï¼›é€’é€ï¼›é‡Šæ”¾ï¼›ç»™äºˆï¼ˆæ‰“å‡»ï¼‰ï¼›ç»™...æ¥ç”Ÿ</span></span><br><span class="line"><span class="meta">vi.</span> <span class="string">å®ç°ï¼›ä¼ é€ï¼›å±¥è¡Œï¼›æŠ•é€’</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">æŠ•çƒ</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">delivered</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">delivered</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">delivering</span></span><br><span class="line"><span class="meta">ç¬¬ä¸‰äººç§°å•æ•°</span> <span class="string">delivers</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">æŠ•é€’ï¼›äº¤ä»˜ï¼›å‘å‡ºï¼›å‘è¡¨</span></span><br><span class="line"><span class="attr">deliver</span> <span class="string">æŠ•é€’ï¼›äº¤ä»˜ï¼›å‘å‡ºï¼›å‘è¡¨</span></span><br><span class="line"><span class="attr">deliver</span> <span class="string">value ä»·å€¼ä¼ é€’ï¼›ä¼ é€’ä»·å€¼</span></span><br><span class="line"><span class="attr">Deliver</span> <span class="string">Hope ä¼ é€’å¸Œæœ›ï¼›é€’é€å¸Œæœ›</span></span><br><span class="line"><span class="attr">deliver</span> <span class="string">the goods äº¤è´§ï¼›å±¥è¡Œè¯ºè¨€</span></span><br><span class="line"><span class="attr">deliver</span> <span class="string">a speech å‘è¡¨æ¼”è®²ï¼›å‘è¡¨è®²è¯</span></span><br></pre></td></tr></table></figure><p><strong>clients</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">c : lien : ts</span><br><span class="line">n. é¡¾å®¢ï¼›å®¢æˆ·ç«¯ï¼›å§”æ‰˜æ–¹ï¼ˆclientçš„å¤æ•°ï¼‰ï¼›æ•‘æµå¯¹è±¡ï¼›åº”å—è´¦æ¬¾</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ å®¢æˆ·ï¼›å®¢æˆ·ç«¯ï¼›æ¡ˆä¾‹ï¼›åˆä½œå®¢æˆ·</span><br><span class="line">Clients å®¢æˆ·ï¼›å®¢æˆ·ç«¯ï¼›æ¡ˆä¾‹ï¼›åˆä½œå®¢æˆ·</span><br><span class="line">major clients å¤§å®¢æˆ·ï¼›ä¸»è¦å®¢æˆ·ï¼›å®¢æˆ·</span><br><span class="line">Entertaining Clients æ‹›å¾…å®¢æˆ·ï¼›æ¬¾å¾…å®¢æˆ·ï¼›å®´è¯·å®¢æˆ·ï¼›æ¥å¾…å®¢æˆ·</span><br><span class="line">client<span class="built_in"> service </span>å®¢æˆ·æœåŠ¡ï¼›å‘å§”æ‰˜éƒ¨é—¨æä¾›æœåŠ¡</span><br><span class="line">client base å®¢æˆ·ç¾¤ï¼›åŸºæœ¬é¡¾å®¢</span><br><span class="line">client side å®¢æˆ·ç«¯ï¼›ä½¿ç”¨ç«¯</span><br></pre></td></tr></table></figure><p><strong>pass</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pa</span> : <span class="string">ss ( è‹± /pÉ‘Ës/  )</span></span><br><span class="line"><span class="meta">v.</span> <span class="string">é€šè¿‡ï¼›ç»è¿‡ï¼›æ²¿æŸæ–¹å‘å‰è¿›ï¼›ä½¿è¾¾åˆ°ï¼ˆæŸä½ç½®ï¼‰ï¼›ä¼ é€’ï¼›ä¼ çƒï¼›é—ç•™ç»™ï¼›è¶…è¿‡ï¼›å˜åŒ–ï¼›æ¨ç§»ï¼›åº¦è¿‡ï¼›ç»ˆæ­¢ï¼›å‡ ä¸ªï¼›ç»è¡¨å†³é€šè¿‡ï¼ˆæ³•å¾‹ç­‰ï¼‰ï¼›å…è®¸ï¼›å®£å¸ƒï¼›è¿‡ï¼›æ’æ³„ï¼›æµé€šï¼›æ”¾å¼ƒ</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">åŠæ ¼ï¼›ç»è¿‡ï¼›é€šè¡Œè¯ï¼›é“è·¯ï¼Œå±±å£ï¼›ä¼ çƒï¼›é£è·ƒï¼›é˜¶æ®µï¼›é±¼é“ï¼›ï¼ˆæ¡¥ç‰Œï¼‰ä¸å«ï¼›ï¼ˆå‡»å‰‘ä¸­çš„ï¼‰æˆ³åˆºï¼›å˜æˆæ³•ï¼›ï¼ˆè®¡ç®—æœºï¼‰ä¸€æ¬¡æµè§ˆ</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">passed</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">passed</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">passing</span></span><br><span class="line"><span class="meta">ç¬¬ä¸‰äººç§°å•æ•°</span> <span class="string">passes</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">ä¼ çƒï¼›é€šè¿‡ï¼›ç»è¿‡ï¼›ä¼ é€’</span></span><br><span class="line"><span class="attr">Pass</span> <span class="string">ä¼ çƒï¼›é€šè¿‡ï¼›ç»è¿‡ï¼›ä¼ é€’</span></span><br><span class="line"><span class="attr">scissor</span> <span class="string">pass äº¤å‰ä¼ çƒï¼›äº¤ç»‡ä¼ çƒï¼›ç©¿æ’ä¼ çƒï¼›ä¼ çƒ</span></span><br><span class="line"><span class="attr">Khyber</span> <span class="string">Pass å¼€ä¼¯å°”å±±å£ï¼›å¼€ä¼¯å°”é€šé“ï¼›å’–å–±ç‹</span></span><br><span class="line"><span class="attr">pass</span> <span class="string">through ç©¿è¿‡....ï¼›é€šè¿‡...</span></span><br><span class="line"><span class="attr">come</span> <span class="string">to pass å®ç°ï¼›å‘ç”Ÿ</span></span><br><span class="line"><span class="attr">pass</span> <span class="string">on ä¼ é€’ï¼›ç»§ç»­ï¼›å»ä¸–</span></span><br></pre></td></tr></table></figure><p><strong>wider</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wi</span> : <span class="string">d : er ( è‹± /waÉªdÉ™(r)/  )</span></span><br><span class="line"><span class="meta">adj.</span> <span class="string">å®½çš„ï¼›å¹¿é˜”çš„ï¼ˆwideçš„æ¯”è¾ƒçº§å½¢å¼ï¼‰</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">å¿«å°”è¾¾ï¼›ä¸–ç•Œå‘å±•ç»æµç ”ç©¶æ‰€ï¼›å®½çš„</span></span><br><span class="line"><span class="attr">WIDER</span> <span class="string">å¿«å°”è¾¾ï¼›ä¸–ç•Œå‘å±•ç»æµç ”ç©¶æ‰€ï¼›å®½çš„</span></span><br><span class="line"><span class="attr">wider</span> <span class="string">margin è¾ƒå¤§å·®å¹…ï¼›ä¿åˆ©</span></span><br><span class="line"><span class="attr">wider</span> <span class="string">spreading æ›´å¤§çš„ç©¿ç”µ</span></span><br></pre></td></tr></table></figure><p><strong>industry</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">in</span> : <span class="string">du : s : try ( è‹± /ËˆÉªndÉ™stri/  )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">äº§ä¸šï¼›å·¥ä¸šï¼›å‹¤å‹‰</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">industries</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">äº§ä¸šï¼›å·¥ä¸šï¼›èŒä¸šï¼›è¡Œä¸š</span></span><br><span class="line"><span class="attr">industry</span> <span class="string">äº§ä¸šï¼›å·¥ä¸šï¼›èŒä¸šï¼›è¡Œä¸š</span></span><br><span class="line"><span class="attr">water</span> <span class="string">industry æ°´åˆ©äº§ä¸šï¼›æ°´äº§ä¸šï¼›æ°´å·¥ä¸š</span></span><br><span class="line"><span class="attr">automobile</span> <span class="string">industry æ±½è½¦å·¥ä¸šï¼›æ±½è½¦äº§ä¸šï¼›æ±½è½¦ä¸šï¼›æ±½è½¦åˆ¶é€ ä¸š</span></span><br><span class="line"><span class="attr">industry</span> <span class="string">and commerce å·¥å•†ä¸š</span></span><br><span class="line"><span class="attr">chemical</span> <span class="string">industry åŒ–å­¦å·¥ä¸š</span></span><br><span class="line"><span class="attr">manufacturing</span> <span class="string">industry åˆ¶é€ ä¸šï¼›åˆ¶é€ å·¥ä¸š</span></span><br></pre></td></tr></table></figure><p><strong>site</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">si</span> : <span class="string">te ( è‹± /saÉªt/ )</span></span><br><span class="line"><span class="meta">n.</span> <span class="string">åœ°ç‚¹ï¼›ä½ç½®ï¼›åœºæ‰€</span></span><br><span class="line"><span class="meta">vt.</span> <span class="string">è®¾ç½®ï¼›ä¸º...é€‰å€</span></span><br><span class="line"><span class="meta">è¿‡å»å¼</span> <span class="string">sited</span></span><br><span class="line"><span class="meta">è¿‡å»åˆ†è¯</span> <span class="string">sited</span></span><br><span class="line"><span class="meta">ç°åœ¨åˆ†è¯</span> <span class="string">siting</span></span><br><span class="line"><span class="meta">å¤æ•°</span> <span class="string">sites</span></span><br><span class="line"><span class="meta">ç¬¬ä¸‰äººç§°å•æ•°</span> <span class="string">sites</span></span><br><span class="line"><span class="meta">ç½‘ç»œé‡Šä¹‰</span> <span class="string">ç«™ç‚¹ï¼›åœºåœ°ï¼›ç°åœºï¼›åœºæ‰€</span></span><br><span class="line"><span class="attr">Site</span> <span class="string">ç«™ç‚¹ï¼›åœºåœ°ï¼›ç°åœºï¼›åœºæ‰€</span></span><br><span class="line"><span class="attr">Site</span> <span class="string">planning æ•·åœ°è®¡åˆ’ï¼›æ€»å¹³é¢è®¾è®¡ï¼›åœºåœ°è§„åˆ’</span></span><br><span class="line"><span class="attr">Site</span> <span class="string">Selection é€‰å€ï¼›åŸºåœ°é€‰æ‹©ï¼›åœºåœ°é€‰æ‹©</span></span><br><span class="line"><span class="attr">web</span> <span class="string">site ç½‘é¡µï¼›ç½‘å€</span></span><br><span class="line"><span class="attr">on</span> <span class="string">site ç°åœºï¼›åŸåœ°ï¼›åŸä½</span></span><br><span class="line"><span class="attr">construction</span> <span class="string">site å»ºç­‘å·¥åœ°ï¼›æ–½å·¥åœºåœ°</span></span><br></pre></td></tr></table></figure><p><strong>developed</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">de : ve : lo : p : ed ( è‹± /dÉªËˆvelÉ™pt/ )</span><br><span class="line">adj. å‘è¾¾çš„ï¼ˆå›½å®¶æˆ–åœ°åŒºï¼‰ï¼›æˆç†Ÿçš„</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ å‘è¾¾ï¼›è‡ªä¸»å¼€å‘ï¼›ç ”åˆ¶å‡ºï¼›æˆç†Ÿçš„</span><br><span class="line">Developed å‘è¾¾ï¼›è‡ªä¸»å¼€å‘ï¼›ç ”åˆ¶å‡ºï¼›æˆç†Ÿçš„</span><br><span class="line">developed countries å‘è¾¾å›½å®¶ï¼›å·²å¼€å‘å›½å®¶ï¼›å·²å‘å±•å›½å®¶ï¼›å‘è¾¾å›½å®¶æˆ–å·¥ä¸šåŒ–å›½å®¶</span><br><span class="line">developed dimension å±•å¼€å°ºå¯¸</span><br><span class="line">developed country n.å‘è¾¾å›½å®¶</span><br><span class="line">developed<span class="built_in"> area </span>[è®¡]å±•å¼€é¢ç§¯</span><br><span class="line">less developed æ¬ å‘è¾¾åœ°åŒºï¼›ä¸å‘è¾¾çš„</span><br></pre></td></tr></table></figure><p><strong>respected</strong></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">re :</span> <span class="string">s :</span> <span class="string">pe :</span> <span class="string">c :</span> <span class="string">te :</span> d ( è‹± <span class="regexp">/ri'spektid/</span>  )</span><br><span class="line">adj. å—å°Šæ•¬çš„</span><br><span class="line">v. å°Šæ•¬ï¼›é‡è§†ï¼ˆrespectçš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ï¼‰</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ æ¨å´‡ï¼›å—å°Šæ•¬çš„ï¼›å¾·é«˜æœ›é‡ï¼›å—äººå°Šæ•¬</span><br><span class="line">Respected æ¨å´‡ï¼›å—å°Šæ•¬çš„ï¼›å¾·é«˜æœ›é‡ï¼›å—äººå°Šæ•¬</span><br><span class="line">Are respected å¾ˆå—å°Šæ•¬</span><br><span class="line">Respected person å¾·é«˜æœ›é‡çš„äºº</span><br><span class="line">respected ideas å…¬è®¤ç†è®ºï¼›æƒå¨ç†è®º</span><br><span class="line">be respected <span class="keyword">as</span> è¢«å°Šä¸º...</span><br></pre></td></tr></table></figure><p><strong>platform</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">p : la : t : <span class="keyword">for</span> : m ( è‹± /ËˆplÃ¦tfÉ”Ëm/  )</span><br><span class="line">n. å¹³å°ï¼›æœˆå°ï¼›ç«™å°ï¼›å›ï¼›è®²å°ï¼›åšåº•æ¾ç³•é‹</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ å¹³å°ï¼›ç«™å°ï¼›å°ï¼›å¹³å°</span><br><span class="line">platform å¹³å°ï¼›ç«™å°ï¼›å°ï¼›å¹³å°</span><br><span class="line">side platform ä¾§å¼ç«™å°ï¼›ä¾§å¼æœˆå°ï¼›ä¾§å‘å¼ç«™å°ï¼›ä¾§å‘æ”¶å‰²å°</span><br><span class="line">fixed platform å›ºå®šå¹³å°ï¼›å›ºå®šå¼å¹³å°ï¼›å›ºå®šå¼é’»äº•å¹³å°</span><br><span class="line">service platform å·¥ä½œå°ï¼›æ“ä½œå¹³å°</span><br><span class="line">offshore platform æµ·ä¸Šå¹³å°ï¼›è¿‘æµ·å¹³å°</span><br><span class="line">open platform å¼€æ”¾å¹³å°</span><br></pre></td></tr></table></figure><p><strong>edited</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">e</span> : <span class="keyword">di</span> :<span class="keyword">te</span> : <span class="keyword">d</span> ( è‹± /'<span class="keyword">ed</span>ÉªtÉª<span class="keyword">d</span>/  )</span><br><span class="line">adj. ç¼–è¾‘è¿‡çš„</span><br><span class="line">v. ç¼–è¾‘ï¼›æ ¡è®¢ï¼›å‰ªæ¥ï¼›ä¸»ç¼–ï¼ˆ<span class="keyword">edit</span>çš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ï¼‰</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ ç¼–è¾‘è¿‡çš„ï¼›ç¼–è¾‘ï¼›åˆ†é’Ÿï¼›å·²ç¼–è¾‘</span><br><span class="line">Edited ç¼–è¾‘è¿‡çš„ï¼›ç¼–è¾‘ï¼›åˆ†é’Ÿï¼›å·²ç¼–è¾‘</span><br><span class="line">Edited Books ç¼–è¾‘ä¹¦ç±</span><br><span class="line">SpinnBox Edited æ—‹è½¬æ–¹å—</span><br><span class="line"><span class="keyword">edit</span> box [è®¡]ç¼–è¾‘æ¡†</span><br><span class="line"><span class="keyword">edit</span> mode [è®¡]ç¼–è¾‘æ–¹å¼</span><br><span class="line"><span class="keyword">edit</span> <span class="keyword">window</span> ç¼–è¾‘çª—å£</span><br></pre></td></tr></table></figure><p><strong>published</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">adj. å·²å‘å¸ƒçš„</span><br><span class="line">v. å‡ºç‰ˆï¼›å‘è¡Œï¼ˆpublishçš„è¿‡å»å¼ï¼‰</span><br><span class="line">ç½‘ç»œé‡Šä¹‰ åˆŠç™»ï¼›åˆŠå‡ºï¼›åˆŠå‘ï¼›åˆŠè½½</span><br><span class="line">Published åˆŠç™»ï¼›åˆŠå‡ºï¼›åˆŠå‘ï¼›åˆŠè½½</span><br><span class="line">published<span class="built_in"> interface </span>å·²å‘å¸ƒæ¥å£ï¼›å‘å¸ƒæ¥å£</span><br><span class="line">published angle é¢„å®š</span><br><span class="line">published price å›¾ä¹¦é›¶å”®ä»·ï¼›å®šä»·ï¼›å…¬å¸ƒä»·æ ¼</span><br></pre></td></tr></table></figure><p><strong>ThoughtWorkers</strong></p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">**others**</span><br></pre></td></tr></table></figure><p>  o : ther : s ( è‹± /ËˆÊŒÃ°É™(r)z/   )<br>  pron. å…¶ä»–äºº<br>  ç½‘ç»œé‡Šä¹‰ å…¶å®ƒï¼›å…¶ä»–ï¼›å…¨éƒ¨ä¿¡æ¯ï¼›å…¶ä»–ç»„ä»¶ä¿å…»<br>  Others å…¶ä»–ï¼›å…¶å®ƒï¼›å…¨éƒ¨ä¿¡æ¯ï¼›å…¶ä»–ç»„ä»¶ä¿å…»<br>  the others å°å²›æƒŠé­‚ï¼›ç¥é¬¼ç¬¬å…­æ„Ÿï¼›å…¶å®ƒ<br>  Introduce Others å…ˆå®¹åˆ«äºº<br>  each other å½¼æ­¤ï¼›äº’ç›¸<br>  on the other å¦ä¸€æ–¹é¢<br>  on the other hand å¦ä¸€æ–¹é¢</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*reach*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  rea : ch (  è‹± /riËtÊƒ/ )<br>  vi. è¾¾åˆ°ï¼›å»¶ä¼¸ï¼›ä¼¸å‡ºæ‰‹ï¼›ä¼ å¼€<br>  vt. è¾¾åˆ°ï¼›å½±å“ï¼›æŠµè¾¾ï¼›ä¼¸å‡º<br>  n. èŒƒå›´ï¼›å»¶ä¼¸ï¼›æ²³æ®µï¼›æ¨ªé£è¡Œé©¶<br>  ç¬¬ä¸‰äººç§°å•æ•° reaches<br>  è¿‡å»å¼ reached<br>  è¿‡å»åˆ†è¯ reached<br>  ç°åœ¨åˆ†è¯ reaching<br>  ç½‘ç»œé‡Šä¹‰ åˆ°è¾¾ï¼›è¾¾åˆ°ï¼›åˆ°è¾¾ç‡ï¼›åŒ–å­¦å“æ³¨å†Œ<br>  Reach åˆ°è¾¾ï¼›è¾¾åˆ°ï¼›åˆ°è¾¾ç‡ï¼›åŒ–å­¦å“æ³¨å†Œ<br>  Reach Me ä¹¦ç¼˜å¯»è¸ªï¼›æŠ“ä½æˆ‘ï¼›è¯·ä¸æˆ‘è”ç³»ï¼›è”ç³»æˆ‘<br>  reach out ä¼¸å‡ºï¼›æä¾›æ´åŠ©ï¼›æ¥çº³æˆ‘<br>  reach out vt. ä¼¸å‡º<br>  reach for ä¼¸æ‰‹å»æ‹¿<br>  reach an agreement è¾¾æˆåè®®ï¼›å–å¾—ä¸€è‡´æ„è§ï¼›è¾¾æˆå…±è¯†</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*audience*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  au : di : en : ce ( è‹± /ËˆÉ”ËdiÉ™ns/  )<br>  n. è§‚ä¼—ï¼›å¬ä¼—ï¼›è¯»è€…ï¼›æ¥è§ï¼›æ­£å¼ä¼šè§ï¼›æ‹œä¼š<br>  ç½‘ç»œé‡Šä¹‰ è§‚ä¼—ï¼›å¬ä¼—ï¼›å—ä¼—ï¼›é˜…å¬äºº<br>  Audience è§‚ä¼—ï¼›å¬ä¼—ï¼›å—ä¼—ï¼›é˜…å¬äºº<br>  target audience ç›®æ ‡è§‚ä¼—ï¼›ç›®æ ‡æ¶ˆè´¹è€…ï¼›ç›®æ ‡å¤§ä¼—ï¼›ç›®æ ‡å—ä¼—<br>  Audience area å¬ä¼—åŒºï¼›çœ‹å°åŒºï¼›è§‚ä¼—åŒº<br>  target audience ç›®æ ‡å—ä¼—ï¼›ç›®æ ‡è§‚ä¼—ï¼›ç›®æ ‡å®¢æˆ·<br>  audience rating n. æ”¶è§†ç‡ï¼›è¯•å¬ç‡<br>  mass audience å¤§ä¼—å—ä¼—</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*material*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  ma : te : ri : al ( è‹± /mÉ™ËˆtÉªÉ™riÉ™l/  )<br>  n. ææ–™ï¼›ç”¨å…·ï¼›ï¼ˆæœ‰æŒ‡æ˜ç‰¹å¾çš„ï¼‰äººæ‰ï¼›ç´ æï¼›æ›²ç›®ï¼›å¸ƒæ–™<br>  adj. ç‰©è´¨çš„ï¼›èº«ä½“éœ€è¦çš„ï¼›å’Œæ¨ç†å†…å®¹ç›¸å…³çš„ï¼›é‡è¦çš„ï¼›ï¼ˆè¯æ®æˆ–äº‹å®ï¼‰å†³å®šæ€§çš„ï¼›å®¢è§‚å­˜åœ¨çš„ï¼›ç‰©æ¬²çš„<br>  n. (Material)(æ„ã€ç¾)å¦ˆç‰¹åŠ›å¨…ä¸½ï¼ˆäººåï¼‰<br>  å¤æ•° materials<br>  ç½‘ç»œé‡Šä¹‰ æè´¨ï¼›ææ–™ï¼›ç‰©æ–™ï¼›èµ„æ–™<br>  Material æè´¨ï¼›ææ–™ï¼›ç‰©æ–™ï¼›èµ„æ–™<br>  Material Girl ç‰©è´¨å¥³å­©ï¼›æ‹œé‡‘å¥³å­©ï¼›ç‰©è´¨å¥³éƒï¼›æ‹œé‡‘å¥³éƒ<br>  insulating material éš”çƒ­ææ–™ï¼›ç»çƒ­ææ–™ï¼›ç»ç¼˜ç‰©<br>  raw material åŸæ–™<br>  teaching material æ•™å­¦å†…å®¹ï¼›æ•™å­¦èµ„æ–™<br>  new material æ–°ææ–™</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*MicroServices*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  Mi: cro : Ser : vi : ce : s<br>  å¾®æœåŠ¡ï¼›<br>  å¾®æœåŠ¡æ¶æ„<br>  ç½‘ç»œé‡Šä¹‰ å¾®æœåŠ¡ï¼›å¾®æœåŠ¡æ¶æ„<br>  Microservices å¾®æœåŠ¡ï¼›å¾®æœåŠ¡æ¶æ„<br>  cognitive microservices è®¤çŸ¥å¾®æœåŠ¡ï¼›è®¤è¯å¾®æœåŠ¡<br>  Microservices Architecture å¾®æœåŠ¡æ¶æ„</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*Guide*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  gui : de  ( è‹± /É¡aÉªd/ )<br>  n. æŒ‡å—ï¼›å‘å¯¼ï¼›å…¥é—¨ä¹¦ï¼›<br>  vt. å¼•å¯¼ï¼›å¸¦é¢†ï¼›æ“çºµï¼›<br>  vi. æ‹…ä»»å‘å¯¼ï¼›<br>  n.(Guide)äººåï¼›ï¼ˆæ³•ã€è‘¡ï¼‰å‰å¾·<br>  è¿‡å»å¼ guidedï¼›<br>  è¿‡å»åˆ†è¯ guidedï¼›<br>  ç°åœ¨åˆ†è¯ guidingï¼›<br>  å¤æ•° guidesï¼›<br>  ç¬¬ä¸‰äººç§°å•æ•° guidesï¼›<br>  ç½‘ç»œé‡Šä¹‰ å¯¼æ¸¸ã€æŒ‡å¯¼ã€æŒ‡å—ã€é¢†é˜Ÿ<br>  Guide å¯¼æ¸¸ï¼›æŒ‡å¯¼ï¼›æŒ‡å—ï¼›é¢†é˜Ÿï¼›<br>  guide post è·¯æ ‡ï¼›å¼•å¯¼æŸ±ï¼›å¯¼æŸ±ï¼›å¯¼æ†<br>  User Guide è¯´æ˜ä¹¦ï¼›ç”¨æˆ·æŒ‡å—ï¼›ç”¨æˆ·æ“ä½œæ‰‹å†Œ</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*In short*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  æ€»ä¹‹ï¼›<br>  ç®€è¨€ä¹‹ï¼›<br>  ç½‘ç»œé‡Šä¹‰ ç®€è¨€ä¹‹ï¼›æ€»ä¹‹ï¼›ç®€è€Œè¨€ä¹‹ï¼›ç®€å•åœ°è¯´<br>  in short ç®€è¨€ä¹‹ï¼›æ€»ä¹‹ï¼›ç®€è€Œè¨€ä¹‹ï¼›ç®€å•åœ°è¯´<br>  in the short term ä»çŸ­æœŸæ¥çœ‹<br>  in a short time ä¸ä¹…ï¼›åœ¨çŸ­æ—¶é—´å†…</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*architectural*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  ar : chi : te : c : tur : alï¼ˆchiè¯»kiçš„éŸ³ï¼Œè‹± /ËŒÉ‘ËkÉªËˆtektÊƒÉ™rÉ™l/  ï¼‰<br>  adj. å»ºç­‘å­¦çš„ï¼›å»ºç­‘ä¸Šçš„ï¼›ç¬¦åˆå»ºç­‘æ³•çš„<br>  ç½‘ç»œé‡Šä¹‰ å»ºç­‘ï¼›å»ºç­‘è®¾è®¡ï¼›å»ºç­‘æè´¨ï¼›å»ºç­‘å­¦çš„<br>  architectural å»ºç­‘ï¼›å»ºç­‘è®¾è®¡ï¼›å»ºç­‘æè´¨ï¼›å»ºç­‘å­¦çš„<br>  architectural style å»ºç­‘é£æ ¼ï¼›å»ºç­‘å½¢å¼ï¼›æ¶æ„é£æ ¼<br>  Architectural acoustics å»ºç­‘å£°å­¦ï¼›å»ºç­‘éŸ³å“ï¼›æ„ç­‘å£°å­¦ï¼›å»ºç­‘éŸ³å“å­¦</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*style*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  s : ty : le  ï¼ˆ è‹± /staÉªl/ ï¼‰<br>  n. é£æ ¼ï¼›æ—¶å°šï¼›ç±»å‹ï¼›å­—ä½“<br>  vt. è®¾è®¡ï¼›ç§°å‘¼ï¼›ä½¿åˆæ½®æµ<br>  vi. è®¾è®¡å¼æ ·ï¼›ç”¨åˆ»åˆ€ä½œè£…é¥°ç”»<br>  n. (Style)äººåï¼›ï¼ˆè‹±ï¼‰æ–¯æ³°å°”<br>  è¿‡å»å¼ styledï¼›<br>  è¿‡å»åˆ†è¯ styledï¼›<br>  ç°åœ¨åˆ†è¯ stylingï¼›<br>  å¤æ•° stylesï¼›<br>  ç¬¬ä¸‰äººç§°å•æ•° stylesï¼›<br>  ç½‘ç»œé‡Šä¹‰ é£æ ¼ï¼›æ ·å¼ï¼›æ¬¾å¼ï¼›ä½œé£<br>  style é£æ ¼ï¼›æ ·å¼ï¼›æ¬¾å¼ï¼›ä½œé£<br>  Style ä½œé£<br>  Text Style å­—ä½“æ ·å¼ï¼›å­—å¸ƒå±€ï¼›æ–‡å­—æ ·å¼ï¼›æ–‡å­—å¸ƒå±€</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="number">*a</span>pproach <span class="keyword">to</span>**</span><br></pre></td></tr></table></figure><p>  a : pp : roa : ch  ï¼ˆ è‹± /É™ËˆprÉ™ÊŠtÊƒ/  ï¼‰<br>  æ¥è¿‘ï¼›çº¦ç­‰äºï¼›é€šå¾€â€¦çš„æ–¹æ³•<br>  ç½‘ç»œé‡Šä¹‰ çº¦ç­‰äºï¼›æ¥è¿‘ï¼›ç±»ä¼¼ï¼›åŠæ³•ï¼›<br>  approach to çº¦ç­‰äºï¼›æ¥è¿‘ï¼›ç±»ä¼¼ï¼›åŠæ³•<br>  approach h to criticality æ¥è¿‘ä¸´ç•Œ<br>  approach h to åšæŸäº‹çš„æ–¹æ³•ï¼›çº¦ç­‰äºï¼›æ¥è¿‘ï¼›å¯¹â€¦çš„æ€åº¦</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*developing*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  de : ve : lo : ping  ï¼ˆ è‹± /dÉªËˆvelÉ™pÉªÅ‹/  ï¼‰<br>  adj. å‘å±•ä¸­çš„ï¼›ç”Ÿé•¿çš„ï¼›å˜åŒ–çš„<br>  n. å‘å±•<br>  v. å‘å±•ï¼›æˆé•¿ï¼›äº§ç”Ÿï¼›æ„Ÿå—ï¼›ä½¿ï¼ˆæ‘„å½±èƒ¶ç‰‡ï¼‰æ˜¾å½±ï¼ˆdevelopçš„ç°åœ¨åˆ†è¯ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ å‘å±•ï¼›å‘å±•ä¸­çš„ï¼›æ˜¾å½±ï¼›å¼€å‘<br>  Developing å‘å±•ï¼›å‘å±•ä¸­çš„ï¼›æ˜¾å½±ï¼›å¼€å‘<br>  developing trend å‘å±•è¶‹åŠ¿ï¼›å‘å±•èµ°å‘ï¼›è¶‹åŠ¿<br>  developing machine æ´—ç‰‡æœºï¼›æ˜¾å½±æœºï¼›å¤´å½±æœºï¼ˆè¿™ä¸ªå¤´ï¼Ÿæˆ‘æŠ„çš„æœ‰é“è¯å…¸ä¸Šçš„ï¼‰ï¼›æ˜¾è‰²æœº</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*single*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  sin : gle ï¼ˆ è‹± /ËˆsÉªÅ‹É¡l/ ï¼‰<br>  adj. å•ä¸€çš„ï¼›å•èº«çš„ï¼›å•ç¨‹çš„<br>  n. ä¸€ä¸ªï¼›å•æ‰“ï¼›å•ç¨‹ç¥¨<br>  vt. é€‰å‡º<br>  vi. å‡»å‡ºä¸€å’å®‰æ‰“<br>  è¿‡å»å¼ singled<br>  è¿‡å»åˆ†è¯ singled<br>  ç°åœ¨åˆ†è¯ singling<br>  å¤æ•° singles<br>  ç¬¬ä¸‰äººç§°å•æ•° singles<br>  ç½‘ç»œé‡Šä¹‰ æœªå©šï¼›ä¸€å’å®‰æ‰“ï¼›å•æ›²ï¼›å•ä¸€çš„ï¼›<br>  single æœªå©šï¼›ä¸€å’å®‰æ‰“ï¼›å•æ›²ï¼›å•ä¸€çš„<br>  single market ç»Ÿä¸€å¸‚åœºï¼›åŒ—äº¬å¸‚åœºï¼›å•ä¸€å¸‚åœºï¼›åŒä¸€å¸‚åœº<br>  single parent å•äº²å®¶åº­ï¼›å•äº²ï¼›å•çˆ¶ååŒï¼›å•äº²æ¯äº²</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="built_in">application</span>**</span><br></pre></td></tr></table></figure><p>  a : pp : li : ca : tion ï¼ˆ è‹± /ËŒÃ¦plÉªËˆkeÉªÊƒn/  ï¼‰<br>  n. åº”ç”¨ï¼›ç”³è¯·ï¼›åº”ç”¨ç¨‹åºï¼›æ•·ç”¨ï¼›ï¼ˆå¯¹äº‹ç‰©ã€å­¦ä¹ ç­‰ï¼‰æŠ•å…¥<br>  ç½‘ç»œé‡Šä¹‰ ç”¨é€”ï¼›åº”ç”¨è½¯ä»¶ï¼›åº”ç”¨<br>  APPLICATION ç”¨é€”ï¼›åº”ç”¨è½¯ä»¶ï¼›åº”ç”¨<br>  application fee ç”³è¯·è´¹ï¼›æŠ¥åè´¹ï¼›ç”³è¯·è´¹ç”¨ï¼›ç™»è®°è´¹<br>  patent application ä¸“åˆ©ç”³è¯·ï¼›ä¸“åˆ©ç”³è¯·ä¹¦ï¼›ä¸“åˆ©å£°è¯·ï¼›ä¸“åˆ©ç”³è¯·è¯´æ˜ä¹¦</p><p>  patent<br>  pa : ten : t  ï¼ˆè‹± /â€˜pÃ¦t(É™)nt; â€˜peÉªt(É™)nt/ï¼‰<br>  n. ä¸“åˆ©æƒï¼›ä¸“åˆ©è¯ï¼›ä¸“åˆ©å“ï¼›<br>  adj. ä¸“åˆ©çš„ï¼›ç‰¹è®¸ç”Ÿäº§æˆ–é”€å”®çš„ï¼›æ˜¾è‘—çš„ï¼›å…¬å¼€çš„ï¼›ï¼ˆè„‰ç®¡ç­‰ï¼‰å¼€æ”¾çš„<br>  v. å–å¾—â€¦çš„ä¸“åˆ©æƒï¼›æˆäºˆä¸“åˆ©<br>  å¤æ•° patents<br>  è¿‡å»å¼ patented<br>  è¿‡å»åˆ†è¯ patented<br>  ç°åœ¨åˆ†è¯ patenting<br>  ç¬¬ä¸‰äººç§°å•æ•° patents<br>  ç½‘ç»œé‡Šä¹‰ ä¸“åˆ©æƒï¼›ä¸“åˆ©ï¼›ä¸“åˆ©å“ï¼›ç§‘æŠ€ç©å…·<br>  patent ä¸“åˆ©æƒï¼›ä¸“åˆ©ï¼›ä¸“åˆ©å“ï¼›ç§‘æŠ€ç©å…·<br>  patent family ä¸“åˆ©æ—ï¼›åŒæ—ä¸“åˆ©<br>  patent attorney ä¸“åˆ©å¾‹å¸ˆï¼›ä¸“åˆ©ä»£ç†äººï¼›ç§°ä¸ºä¸“åˆ©æ³•åŠ¡äººå‘˜</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">**a suite of**</span></span><br></pre></td></tr></table></figure><p>  s : ui : teï¼ˆuiè¯»wiçš„éŸ³ï¼Œ è‹± /swiËt/ ï¼‰<br>  ä¸€ç³»åˆ—<br>  ç½‘ç»œé‡Šä¹‰ ä¸€å¥—ï¼›ä¸€æ•´ç»„ï¼›è¯¦ç»†ç¿»è¯‘ï¼ˆè¯¦ç»†ç¿»è¯‘&gt;&gt;a suite of ä¸€ç³»åˆ—ï¼›ä¸€å¥—â€¦ï¼‰<br>  a suite of ä¸€å¥—ï¼›ä¸€æ•´ç»„ï¼›è¯¦ç»†ç¿»è¯‘<br>  a suite of racks ä¸€å¥—æœºæ¶<br>  a suite of paintings ä¸€ç»„ä»ä¸åŒè§’åº¦å’Œå±‚æ¬¡åæ˜ åŒä¸€ä¸­å¿ƒæ€æƒ³å’Œé¢˜æçš„ç»˜ç”»</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*small*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  s : ma : ll  ï¼ˆ è‹± /smÉ”Ël/  ï¼‰<br>  adj. å°‘çš„ï¼Œå°çš„ï¼›å¾®å¼±çš„ï¼›å‡ ä¹æ²¡æœ‰çš„ï¼›ä¸é‡è¦çš„ï¼›å¹¼å°çš„<br>  adv. å°å°åœ°ï¼›å‘é„™åœ°<br>  n. å°ä»¶ç‰©å“ï¼›çŸ®å°çš„äºº<br>  n. ï¼ˆSmallï¼‰äººåï¼›ï¼ˆè‹±ï¼‰æ–¯è«å°”<br>  ç½‘ç»œé‡Šä¹‰ å°çš„ï¼›å°å‹çš„ï¼›å°ç ï¼›å¡ç‰‡çº¸è‹±å›½æ ‡å‡†<br>  small å°çš„ï¼›å°å‹çš„ï¼›å°ç ï¼›å¡ç‰‡çº¸è‹±å›½æ ‡å‡†<br>  small intestine å°è‚ <br>  small incision å°åˆ‡å£ï¼›éš§é“åˆ‡å£ï¼›å¾®åˆ›ï¼›å¾®å°åˆ‡å£</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*services*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  s : er : vi : ce : s  ï¼ˆ è‹± /â€˜sÉ™:visis/ ï¼‰<br>  n. æœåŠ¡ï¼›æœåŠ¡é¡¹ç›®ï¼ˆserviceå¤æ•°å½¢å¼ï¼‰<br>  v. æœåŠ¡ï¼ˆserviceçš„ç¬¬ä¸‰äººç§°å•æ•°ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ æœåŠ¡ï¼›æœåŠ¡é¡¹ç›®ï¼›æœåŠ¡èŒƒå›´ï¼›æœåŠ¡ä¸š<br>  Services æœåŠ¡ï¼›æœåŠ¡é¡¹ç›®ï¼›æœåŠ¡èŒƒå›´ï¼›æœåŠ¡ä¸š<br>  Services æœåŠ¡<br>  Web Services ç½‘ç»œæœåŠ¡ï¼›WebæœåŠ¡ï¼›åº”ç”¨</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="keyword">each</span>**</span><br></pre></td></tr></table></figure><p>  ea : ch  ï¼ˆ è‹± /iËtÊƒ/  ï¼‰<br>  det. ï¼ˆä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„äººæˆ–ç‰©ä¸­ï¼‰å„è‡ª<br>  pron. ï¼ˆä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„äººæˆ–ç‰©ä¸­ï¼‰æ¯ä¸ª<br>  adv. æ¯ä¸ªåœ°<br>  adj. å„è‡ªçš„<br>  ç½‘ç»œé‡Šä¹‰ æ¯ä¸ªï¼›å„è‡ªï¼›æ¯æ¬¡ï¼›æ¯ä¸€<br>  Each æ¯ä¸ªï¼›å„è‡ªï¼›æ¯æ¬¡ï¼›æ¯ä¸€<br>  each other äº’ç›¸ï¼›å½¼æ­¤ï¼›ç›¸äº’ï¼›å–é•¿è¡¥çŸ­<br>  Each line æ¯è¡Œ</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="built_in">running</span>**</span><br></pre></td></tr></table></figure><p>  run : ning  ï¼ˆ è‹± /ËˆrÊŒnÉªÅ‹/  ï¼‰<br>  n. è¿è½¬ï¼›èµ›è·‘ï¼›æµå‡º<br>  adj. è¿ç»­çš„ï¼›æµåŠ¨çš„ï¼›è·‘è€…çš„ï¼Œè¿è½¬ç€çš„<br>  v. è·‘ï¼›è¿è½¬ï¼ˆrunçš„ingå½¢å¼ï¼‰ï¼›è¡Œé©¶<br>  n. (Running)äººåï¼›ï¼ˆè‹±ï¼‰æœ—å®<br>  ç½‘ç»œé‡Šä¹‰ è·‘æ­¥ï¼›è·‘ï¼›ç£¨åˆï¼›è¿è¡Œ<br>  running è·‘æ­¥ï¼›è·‘ï¼›ç£¨åˆï¼›è¿è¡Œ<br>  Running Man è¿‡å…³æ–©å°†ï¼›å¥”è·‘å§å…„å¼Ÿï¼›è½è·‘è€çˆ¸ï¼›å¥”è·‘çš„ç”·äºº<br>  running shoes è·‘æ­¥é‹ï¼›æ…¢è·‘é‹ï¼›ç«èµ°é‹</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*own*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  o : wn ï¼ˆ è‹± /É™ÊŠn/  ï¼‰<br>  vt. æ‹¥æœ‰ï¼›æ‰¿è®¤<br>  vi. æ‰¿è®¤<br>  adj. è‡ªå·±çš„ï¼›ç‰¹æœ‰çš„<br>  n. è‡ªå·±çš„<br>  n.ï¼ˆOwnï¼‰äººåï¼›ï¼ˆé˜¿æ‹‰ä¼¯ï¼‰å¥¥æ©ï¼ˆæˆ‘å°±æœè¿™äº›äººåï¼Œä¸ä¼šè¯»æ˜¯å§ï¼Œè¯»è¿™ä¸ªä¸­æ–‡å¼è¯‘éŸ³äººåå°±ä¼šè¯»äº†ï¼‰</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="built_in">process</span>**</span><br></pre></td></tr></table></figure><p>  p : ro : ce : ss  (  è‹± /prÉ™Ëˆses; (for n.) ËˆprÉ™ÊŠses/ )<br>  n. ï¼ˆä¸ºè¾¾åˆ°æŸä¸€ç›®æ ‡çš„ï¼‰è¿‡ç¨‹ï¼›ï¼ˆè‡ªç„¶å˜åŒ–çš„ï¼‰å·¥ç¨‹ï¼›å·¥è‰ºæµç¨‹ï¼›è¯‰è®¼ç¨‹åºï¼›ä¼ ç¥¨ï¼›çªèµ·ï¼›è¿›å±•ï¼›ï¼ˆå‘å‹ï¼‰ç›´å‘å¼<br>  v. åŠ å·¥ï¼›å®¡æ ¸ï¼›å¤„ç†ï¼ˆæ•°æ®ï¼‰ï¼›é˜Ÿåˆ—è¡Œè¿›ï¼›å†²å°ï¼ˆç…§ç‰‡ï¼‰ï¼›æŠŠï¼ˆå¤´å‘ï¼‰å¼„æˆç›´å‘<br>  adj. ç»è¿‡ç‰¹æ®ŠåŠ å·¥çš„ï¼›ç…§ç›¸æ¿çš„ï¼›æŸ“å°æ³•çš„<br>  ç¬¬ä¸‰äººç§°å•æ•° processes<br>  è¿‡å»å¼ processed<br>  è¿‡å»åˆ†è¯ processed<br>  ç°åœ¨åˆ†è¯ processing<br>  å¤æ•° processes<br>  ç½‘ç»œé‡Šä¹‰ è¿›ç¨‹ï¼›æµç¨‹ï¼›è¿‡ç¨‹<br>  process è¿›ç¨‹ï¼›æµç¨‹ï¼›è¿‡ç¨‹<br>  Process Management è¿›ç¨‹ç®¡ç†ï¼›è¿‡ç¨‹ç®¡ç†ï¼›æµç¨‹ç®¡ç†ï¼›è¿›ç¨‹ç®¡ç†<br>  Background Process åå°è¿›ç¨‹ï¼›èƒŒæ™¯ç¨‹åºï¼›èƒŒæ™¯å¤„ç†ç¨‹åº</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*communicating*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  com : mu : ni : ca : ting ( è‹± /kÉ™â€™mjÊŠnÉ™,keÉªtÉªÅ‹/ )<br>  adj. ï¼ˆæˆ¿é—´ï¼‰ç›¸åŒçš„ï¼Œç›¸è¿çš„<br>  v. äº¤æµï¼›ä¼ é€’ï¼›ä¼ æ’­ï¼ˆcommunicateçš„ç°åœ¨åˆ†è¯ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ æ²Ÿé€šï¼›äº¤æµï¼›é€šä¿¡çš„äº’é€šçš„ï¼›äº¤æµä¸é€šè®¯<br>  Communicating æ²Ÿé€šï¼›äº¤æµï¼›é€šä¿¡çš„äº’é€šçš„ï¼›äº¤æµä¸é€šè®¯<br>  communicating vessels è¿é€šå™¨ï¼›è¿é€šç®¡<br>  Communicating junctions é€šè®¯è¿æ¥</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*lightweight*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  li : ght : wei : ght ( è‹± /ËˆlaÉªtweÉªt/ )<br>  n. è½»é‡çº§ï¼ˆæ‹³å‡»æ‰‹ï¼‰ï¼›æ¯”é€šå¸¸é‡é‡è½»çš„äººæˆ–ä¸œè¥¿ï¼›æ— è¶³è½»é‡çš„äººï¼ˆæˆ–äº‹ï¼‰<br>  adj. è½»é‡çš„ï¼›ç»™äººå°è±¡ä¸æ·±çš„ï¼›æ— è¶³è½»é‡çš„ï¼›æ¯”é€šå¸¸é‡é‡è½»çš„ï¼›æµ…è–„çš„ï¼›<br>  ç½‘ç»œé‡Šä¹‰ è½»é‡çº§ï¼›è½»èº«çš„ï¼›è½»é‡ï¼›è½»é‡åŒ–ï¼›<br>  lightweight è½»é‡çº§ï¼›è½»èº«çš„ï¼›è½»é‡ï¼›è½»é‡åŒ–<br>  lightweight è½»å¡«æ–™ï¼›è½»è´¨æ€å’Œæ–™<br>  lightweight cover è½»å‹ä¸Šç›–ï¼›é¿é›·ä¿æŠ¤</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*mechanisms*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  me : cha : ni : sm : sï¼ˆcha è¯» ke çš„éŸ³ï¼Œè‹± /â€˜mekÉ™nÉªzÉ™mz/ ï¼‰<br>  n. æœºåˆ¶ï¼›[è®¡]æœºæ„ï¼ˆmechanismçš„å¤æ•°ï¼‰ï¼›æœºæ¢°ï¼›[æœº]æœºæ„å­¦<br>  ç½‘ç»œé‡Šä¹‰ å‘ç—…æœºåˆ¶ï¼›å‘ç”Ÿæœºåˆ¶ï¼›æœºåˆ¶ï¼›æœºæ„<br>  Mechanisms å‘ç—…æœºåˆ¶ï¼›å‘ç”Ÿæœºåˆ¶ï¼›æœºåˆ¶ï¼›æœºæ„<br>  interaction mechanisms äº’åŠ¨æœºåˆ¶ï¼›ä½œç”¨æœºåˆ¶<br>  resistant mechanisms è€è¯æœºåˆ¶ï¼›æŠ—ç—…æœºåˆ¶</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*often*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  o : f : ten ( è‹± /ËˆÉ’fn; ËˆÉ’ftÉ™n/  )<br>  adv. å¸¸å¸¸ï¼›æ—¶å¸¸ï¼›å¾€å¾€ï¼Œå¤§å¤š<br>  æ¯”è¾ƒçº§ more often æˆ– oftenerï¼›<br>  æœ€é«˜çº§ most often æˆ– oftenest<br>  ç½‘ç»œé‡Šä¹‰ ç»å¸¸ï¼›å¸¸å¸¸ï¼›æ—¶å¸¸ï¼›å¸¸æœ‰<br>  Often è¿›åœºï¼›å¸¸å¸¸ï¼›æ—¶å¸¸ï¼›å¸¸æœ‰<br>  more often æ›´ç»å¸¸ï¼›ç»å¸¸ï¼›æ›´å¤šçš„æ—¶å€™ï¼›æ›´å¤š<br>  OFT OFTen å¸¸å¸¸ï¼›å†ä¸‰</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*HTTP*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  H : T : T : P ( è‹± /ËŒeÉªtÊƒ tiË tiË ËˆpiË/  )<br>  abbr. è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyper Text Transfer Protocolï¼‰<br>  ç½‘ç»œé‡Šä¹‰ è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyper Text Transfer Protocolï¼‰ï¼›ç½‘ç«™ï¼›å¹³å°ï¼›è¶…æ–‡æœ¬ä¼ é€åè®®</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*resource*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  re : sou : r : ce ( è‹± /rÉªËˆsÉ”Ës; rÉªËˆzÉ”Ës/  )<br>  n. èµ„æºï¼Œè´¢åŠ›ï¼›åŠæ³•ï¼›æ™ºè°‹<br>  vi. å‘â€¦æä¾›èµ„é‡‘<br>  ç½‘ç»œé‡Šä¹‰ èµ„æºï¼›èµ„æºç±»å‹ï¼›è´¢åŠ›ï¼›åŠæ³•<br>  Resource èµ„æºï¼›èµ„æºç±»å‹ï¼›è´¢åŠ›ï¼›åŠæ³•<br>  human resource äººåŠ›èµ„æºï¼›æ¿€åŠ±ï¼›äººäº‹éƒ¨<br>  computational resource è®¡ç®—èµ„æº</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*API*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  A : P : I ( /ËŒeÉª piË ËˆaÉª/  )<br>  abbr. ç©ºæ°”æ±¡æŸ“æŒ‡æ•°ï¼ˆAir Pollution Indexï¼‰ï¼›åº”ç”¨ç¨‹åºç•Œé¢ï¼ˆApplication Program Interfaceï¼‰ï¼›ç²¾ç¡®ä½ç½®æŒ‡ç¤ºå™¨ï¼ˆAccurate Position Indicatorï¼‰ï¼›ç¾å›½çŸ³æ²¹å­¦ä¼šï¼ˆAmerican Petroleum Instituteï¼‰ï¼›è‡ªåŠ¨å‘éŸ³æ•™å­¦æœºï¼ˆAutomated Pronunciation Instructorï¼‰<br>  ç½‘ç»œé‡Šä¹‰ ç¾å›½çŸ³æ²¹åä¼šï¼›åº”ç”¨ç¨‹åºæ¥å£ï¼›ç¾å›½çŸ³æ²¹å­¦ä¼šï¼›åº”ç”¨ç¼–ç¨‹æ¥å£<br>  API ç¾å›½çŸ³æ²¹åä¼šï¼›åº”ç”¨ç¨‹åºæ¥å£ï¼›ç¾å›½çŸ³æ²¹å­¦ä¼šï¼›åº”ç”¨ç¼–ç¨‹æ¥å£<br>  Windows API ä½¿ç”¨ï¼›è°ƒç”¨ï¼›å…³äºè¿›ç¨‹æ“ä½œçš„ï¼›å…³äºçº¿ç¨‹æ“ä½œçš„<br>  Google API è°·æ­Œåº”ç”¨ç•Œé¢ï¼›åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼›ç½‘å€äºŒç»´ç ç”Ÿæˆå‡½æ•°ï¼›åº”ç”¨ç¨‹åºæ¥å£</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*these*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  th : e : se ( è‹± /Ã°iËz/  )<br>  det. è¿™äº›ï¼ˆthisçš„å¤æ•°ï¼‰<br>  pron. è¿™äº›ï¼ˆthisçš„å¤æ•°ï¼‰<br>  adj. è¿™äº›çš„ï¼ˆthisçš„å¤æ•°ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ è¿™äº›ï¼Œæ­¤ç­‰ï¼›å¤æ•°ï¼›è¿™äº›ä¸ª<br>  These è¿™äº›ï¼›æ­¤ç­‰ï¼›å¤æ•°ï¼›è¿™äº›ä¸ª<br>  Know these çŸ¥å…¶ç„¶ï¼›åˆ°çŸ¥å…¶ç„¶<br>  These payments è¥å…»è´¹</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*built*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  bu : il : t ( è‹± /bÉªlt/ )<br>  v. å»ºé€ ï¼Œå»ºç«‹ï¼›é€æ­¥å¢å¼ºï¼›æŠŠâ€¦åµŒå…¥ï¼ˆå¢™å£ã€ç‰©ä½“ç­‰ï¼‰ï¼ˆbuildçš„è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ï¼‰<br>  adj. æœ‰â€¦ä½“æ ¼çš„ï¼›èº«æ®µä¼˜ç¾çš„ï¼›â€¦.å»ºæˆçš„<br>  ç½‘ç»œé‡Šä¹‰ å»ºèµ·ï¼›æ¯”ä¼˜ä¸½ï¼›å»ºæœ‰ï¼›å»ºå¥½<br>  Built å»ºèµ·ï¼›æ¯”ä¼˜ä¸½ï¼›å»ºæœ‰ï¼›å»ºå¥½<br>  Built NY æ¯”ä¼˜ä¸½<br>  BLT Built å»ºé€ ï¼›åˆ¶ä½œ<br>  built in å®‰è£…åœ¨é‡Œé¢çš„ï¼›è£…å…¥çš„ï¼›æœºå†…çš„<br>  built up ç»„åˆ<br>  built on ä»¥â€¦ä½œåŸºç¡€</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="keyword">around</span>**</span><br></pre></td></tr></table></figure><p>  a : roun : d ( è‹± /É™ËˆraÊŠnd/  )<br>  adv. åœ¨å››å‘¨ï¼›æœå¯¹ç«‹é¢ï¼›åˆ°å¤„ï¼›æ¼«æ— ç›®çš„çš„ï¼›åœ¨é™„è¿‘ï¼›å¤§çº¦ï¼›å›´ç»•ï¼›ä»¥åœ†å‘¨è®¡ç®—ï¼›ç°æœ‰ï¼›è½¬å¼¯<br>  prep. å›´ç»•ï¼›åœ¨é‚£è¾¹ï¼›ç»•ç€ï¼›åŒâ€¦ä¸€è‡´ï¼›åˆ°å¤„ï¼›ä»¥ï¼ˆå·²æåŠç‰©ï¼‰ä¸ºä¸­å¿ƒï¼›è¿‚å›<br>  ç½‘ç»œé‡Šä¹‰ å›´ç»•ï¼›å››å¤„ï¼›åœ¨å‘¨å›´ï¼›å¤§çº¦<br>  Around å›´ç»•ï¼›å››å¤„ï¼›åœ¨å‘¨å›´ï¼›å¤§çº¦ï¼›<br>  come around è‹é†’ï¼›é¡ºä¾¿æ¥è®¿ï¼›æ¥è®¿ï¼›å¤åŸ<br>  stick around åœ¨é™„è¿‘é€—ç•™æˆ–ç­‰å¾…ï¼›åœ¨é™„è¿‘ç­‰ç€ï¼›åœ¨é‚»è¿‘å‹¾ç•™æˆ–ç­‰å€™ï¼›é€—ç•™<br>  all round å‘¨å›´ï¼›åˆ°å¤„ï¼Œå››å¤„<br>  around here é™„è¿‘ï¼›åœ¨è¿™å‘¨å›´<br>  go around å››å¤„èµ°åŠ¨ï¼›ä¾›åº”ï¼›ï¼ˆæ¶ˆæ¯ï¼‰æµä¼ </p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*business*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  bu : si : ne : ss ( è‹± /ËˆbÉªznÉ™s/ )<br>  n. å•†ä¸šï¼Œäº¤æ˜“ï¼›ç”Ÿæ„ï¼›äº‹åŠ¡ï¼Œä¸šåŠ¡ï¼›èŒä¸šï¼Œè¡Œä¸šï¼›<br>  ç½‘ç»œé‡Šä¹‰ å•†ä¸šï¼›ç”Ÿæ„ï¼›ä¼ä¸šï¼›ä¸šåŠ¡<br>  Business å•†ä¸šï¼›ç”Ÿæ„ï¼›ä¼ä¸šï¼›ä¸šåŠ¡<br>  Business ä¸šåŠ¡<br>  business cycle å•†ä¸šå‘¨æœŸï¼›ç»æµå‘¨æœŸï¼›å•†ä¸šå‘¨æœŸï¼›æ™¯æ°”å¾ªç¯<br>  business card åç‰‡ï¼›å•†åŠ¡åç‰‡<br>  in business ç»å•†ï¼›åœ¨ç»è¥ï¼›åœ¨å•†ç•Œ<br>  business philosophy ç»è¥ç†å¿µï¼Œç»è¥å“²å­¦</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*capabilities*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  ca : pa : bi : li : ti : es ( è‹± /ËŒkeÉªpÉ™ËˆbÉªlÉ™tÉªs/  )<br>  n. èƒ½åŠ›ï¼ˆcapabilityçš„å¤æ•°ï¼‰ï¼›åŠŸèƒ½ï¼›æ€§èƒ½<br>  ç½‘ç»œé‡Šä¹‰ èƒ½åŠ›ï¼›åŠŸèƒ½ï¼›æƒé™ï¼›è´£ä»»<br>  capabilities èƒ½åŠ›ï¼›åŠŸèƒ½ï¼›æƒé™ï¼›è´£ä»»<br>  economic capabilities ç»æµå®åŠ›ï¼›ç»æµèƒ½åŠ›<br>  defense capabilities é˜²å«ä½œæˆ˜èƒ½åŠ›ï¼›é˜²åŠ¡èƒ½åŠ›ï¼›é˜²å«åŠŸèƒ½ï¼›<br>  process capability åŠ å·¥èƒ½åŠ›ï¼›å·¥åºèƒ½åŠ›<br>  design capability è®¾è®¡èƒ½åŠ›</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*independently*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  in : de : pen : den : t : ly ( è‹± /ËŒÉªndÉªËˆpendÉ™ntli/  )<br>  adv. ç‹¬ç«‹åœ°ï¼›è‡ªç«‹åœ°<br>  ç½‘ç»œé‡Šä¹‰ å„è‡ªåœ°ï¼›ç‹¬ç«‹åœ°ï¼›ç‹¬è‡ªåœ°ï¼›è‡ªç«‹åœ°<br>  independently å„è‡ªåœ°ï¼›ç‹¬ç«‹åœ°ï¼›ç‹¬è‡ªåœ°ï¼›è‡ªç«‹åœ°<br>  think independently ç‹¬ç«‹æ€è€ƒï¼›ç‹¬ç«‹çš„æ€è€ƒ<br>  living independently ç‹¬ç«‹ç”Ÿæ´»<br>  independently of ç‹¬ç«‹äºâ€¦ä¹‹å¤–ï¼›ä¸â€¦æ— å…³</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*deployable*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  de : p : lo : y : a : ble<br>  adj. å¯å¼€å±•çš„<br>  ç½‘ç»œé‡Šä¹‰ å¯å¼€å±•çš„ï¼›æ•£æ’­æ€§<br>  deployable å¯å¼€å±•æ€§çš„ï¼›æ•£æ’­æ€§<br>  Deployable Structures æŠ˜å ç»“æ„ï¼›å¯å±•ç»“æ„<br>  deployable joint è¿åŠ¨å…³èŠ‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*fully*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  fu : lly ( è‹± /ËˆfÊŠli/  )<br>  adv. å……åˆ†åœ°ï¼›å®Œå…¨åœ°ï¼›å½»åº•åœ°<br>  n. (Fully)äººåï¼›ï¼ˆæ³•ï¼‰è²åˆ©<br>  ç½‘ç»œé‡Šä¹‰ å®Œå…¨åœ°ï¼›å½»åº•åœ°ï¼›å……åˆ†åœ°ï¼›ååˆ†åœ°<br>  fully å®Œå…¨åœ°ï¼›å½»åº•åœ°ï¼›å……åˆ†åœ°ï¼›ååˆ†åœ°<br>  FULLY OPENING å…¨å¼€å£ï¼›å…¨å¯é½¿ï¼›é½é—­å£<br>  fully  secured è¶³é¢æ‹…ä¿ï¼›å…¨é¢æ‹…ä¿<br>  fully automatic å…¨è‡ªåŠ¨çš„<br>  fully integrated å®Œå…¨æ•´åˆ<br>  fully loaded æ»¡è½½</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="built_in">auto</span>mated**</span><br></pre></td></tr></table></figure><p>  au : to : ma : te : d ( è‹± /ËˆÉ”ËtÉ™ËŒmeÉªtÉªd/  )<br>  adj. è‡ªåŠ¨åŒ–çš„ï¼›æœºæ¢°åŒ–çš„<br>  v. è‡ªåŠ¨åŒ–ï¼ˆautomateçš„è¿‡å»åˆ†è¯ï¼‰ï¼›è‡ªåŠ¨æ“ä½œ<br>  ç½‘ç»œé‡Šä¹‰ è‡ªåŠ¨åŒ–çš„ï¼›è‡ªåŠ¨çš„ï¼›æœºæ¢°åŒ–çš„ï¼›è‡ªåŠ¨åŒ–<br>  automated è‡ªåŠ¨åŒ–çš„ï¼›è‡ªåŠ¨çš„ï¼›æœºæ¢°åŒ–çš„ï¼›è‡ªåŠ¨åŒ–<br>  automated design è‡ªåŠ¨è®¾è®¡ï¼›è‡ªåŠ¨åŒ–è®¾è®¡ï¼›è‡ªåŠ¨æƒ³è±¡<br>  Automated inspection è‡ªåŠ¨åŒ–æ£€éªŒï¼›è‡ªåŠ¨æ£€éªŒ<br>  automated machine è‡ªåŠ¨åŒ–æœºæ¢°ï¼›è‡ªåŠ¨åŒ–çš„æœºå™¨<br>  automated teller machine è‡ªåŠ¨æŸœå‘˜æœº<br>  automated welding è‡ªåŠ¨ç„Šæ¥</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*deployment*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  de : p : lo : y : men : t ( è‹± /dÉªËˆplÉ”ÉªmÉ™nt/ )<br>  n. è°ƒåº¦ï¼Œéƒ¨ç½²<br>  å¤æ•° deployments<br>  ç½‘ç»œé‡Šä¹‰ éƒ¨ç½²ï¼›å±•å¼€ï¼›å‘å¸ƒï¼›å¸ƒé˜²<br>  Deployment éƒ¨ç½²ï¼Œå±•å¼€ï¼›å‘å¸ƒï¼›å¸ƒé˜²<br>  Deployment Editors éƒ¨ç½²ç¼–è¾‘å™¨ï¼›å®‰æ’ç¼–çº‚å™¨<br>  Resources deployment èµ„æºé…ç½®<br>  disposition n.è°ƒåº¦ï¼Œéƒ¨ç½²</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*machinery*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  ma  chi : ne : ry ( è‹± /mÉ™ËˆÊƒiËnÉ™ri/  )<br>  n. æœºæ¢°ï¼›æœºå™¨ï¼›æœºæ„ï¼›æœºæ¢°è£…ç½®<br>  ç½‘ç»œé‡Šä¹‰ æœºæ¢°ï¼›æœºå™¨ï¼›æœºå…·<br>  machinery æœºæ¢°ï¼›æœºå™¨ï¼›æœºå…·<br>  packaging machinery åŒ…è£…æœºæ¢°ï¼›åŒ…è£…è®¾å¤‡ï¼›åŒ…è£…æœºå™¨ï¼›æ”¾å¤§å™¨<br>  Electrical Machinery ç”µæœºå­¦ï¼›ç”µåŠ›æœºæ¢°ï¼›ç”µæœºï¼›ç”µæœºé©±åŠ¨<br>  machinery and equipment æœºå™¨åŠè®¾å¤‡<br>  construction machinery å»ºç­‘æœºæ¢°ï¼›æ–½å·¥æœºæ¢°<br>  agricultural machinery å†œä¸šæœºæ¢°</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*there*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  the : re ( è‹± /Ã°eÉ™(r)/  )<br>  adv. åœ¨é‚£é‡Œï¼›åœ¨é‚£è¾¹ï¼›åœ¨é‚£ç‚¹ä¸Šï¼›<br>  int. ä½ ç§<br>  n. é‚£ä¸ªåœ°æ–¹<br>  ç½‘ç»œé‡Šä¹‰ é‚£é‡Œï¼›åœ¨é‚£é‡Œï¼›é‚£å„¿ï¼›é‚£<br>  There é‚£é‡Œï¼›åœ¨é‚£é‡Œï¼›é‚£å„¿ï¼›é‚£<br>  Always There æ°¸é©»ï¼›å®ˆå€™ä¸€ç”Ÿï¼›åˆ°çº¦å®šçš„é‚£æ—¶ï¼›æ€»åœ¨æˆ‘èº«æ—<br>  There be å¥å‹ï¼›çš„å¥å­ç»“æ„ï¼›å­˜åœ¨å¥ï¼›ç»“æ„<br>  out there åˆ°æˆ˜åœºï¼›åœ¨é‚£é‡Œ<br>  over there adv. åœ¨é‚£é‡Œ<br>  go there å»é‚£é‡Œ</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*bare*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  b : are ( è‹± /beÉ™(r)/ )<br>  adj. ç©ºçš„ï¼›èµ¤è£¸çš„ï¼›æ— é®è”½çš„<br>  vt. éœ²å‡ºï¼›ä½¿èµ¤è£¸<br>  n. (Bare)äººåï¼›ï¼ˆè‹±ï¼‰è´å°”<br>  æ¯”è¾ƒçº§ barer<br>  æœ€é«˜çº§ barest<br>  è¿‡å»å¼ bared<br>  è¿‡å»åˆ†è¯ bared<br>  ç°åœ¨åˆ†è¯ baring<br>  ç½‘ç»œé‡Šä¹‰ èµ¤è£¸çš„ï¼›å…‰å…‰ï¼›èµ¤è£¸ï¼›ä»…ä»…çš„<br>  bare èµ¤è£¸çš„ï¼›å…‰å…‰ï¼›è£¸éœ²ï¼›ä»…ä»…çš„<br>  bare mass è£¸è´¨é‡<br>  bare machine è£¸æœºï¼›ç¡¬ä»¶è®¡ç®—æœºï¼›è£¸æœº<br>  bare of vt. å‡ ä¹æ²¡æœ‰ï¼Œç¼ºä¹<br>  lay bare æ­å‘ï¼Œæš´éœ²ï¼›å…¬å¼€<br>  bare feet èµ¤è„šï¼›å…‰è„šï¼›å…‰ç€è„š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*minimum*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  mi : ni : mum ( è‹± /ËˆmÉªnÉªmÉ™m/ )<br>  n. æœ€å°å€¼ï¼›æœ€ä½é™åº¦ï¼›æœ€å°åŒ–ï¼›æœ€å°é‡<br>  adj.æœ€å°çš„ï¼›æœ€ä½çš„<br>  å¤æ•° minimums æˆ– minima<br>  ç½‘ç»œé‡Šä¹‰ æœ€å°çš„ï¼›æœ€ä½ï¼›èµ·ç ï¼›æœ€å°é‡<br>  minimum æœ€å°çš„ï¼›æœ€ä½ï¼›èµ·ç ï¼›æœ€å°é‡<br>  minimum charge æœ€ä½è´¹ç”¨ï¼›æœ€ä½è¿è´¹ï¼›æœ€ä½æ”¶è´¹<br>  minimum balance æœ€å°åº“å­˜ä½™é‡ï¼›æœ€ä½ä½™é¢ï¼›å­˜æ¬¾é™åˆ¶ï¼›æŠŠè´¹ç”¨å‡åˆ°æœ€ä½é™åº¦</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="keyword">bare </span>minimum of**</span><br></pre></td></tr></table></figure><p>  æœ€ä½é™åº¦çš„<br>  ç½‘ç»œé‡Šä¹‰ Bare Minimum Of Expense æœ€ä½æ”¯å‡º</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*centralized*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  cen : tra : li : ze : d ( è‹± /â€˜sentrÉ™laÉªzd/  )<br>  adj. é›†ä¸­çš„ï¼›ä¸­å¤®é›†æƒçš„<br>  v. é›†ä¸­ï¼ˆcentralizeçš„è¿‡å»åˆ†è¯ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ é›†ä¸­çš„ï¼Œä¸­å¤®é›†æƒçš„ï¼›ä¸€è‡´<br>  Centralized é›†ä¸­çš„ï¼›ä¸­å¤®é›†æƒçš„ï¼›ä¸€è‡´<br>  centralized control é›†ä¸­æ§åˆ¶ï¼›ä¸­å¤®æ§åˆ¶ï¼›é›†ä¸­æ§åˆ¶æ–¹å¼ï¼›ä¸­å¿ƒæ§åˆ¶<br>  Centralized Monitoring é›†ä¸­ç›‘æ§ï¼›ä¸­åŒ–ç›‘æŸ¥<br>  centralized management é›†ä¸­å¼ç®¡ç†ï¼›é›†æƒç®¡ç†<br>  centralized control é›†ä¸­æ§åˆ¶<br>  centralized processing é›†ä¸­å¼å¤„ç†</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*management*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  ma : na : ge : men : t ( è‹± /ËˆmÃ¦nÉªdÊ’mÉ™nt/  )<br>  n. ç®¡ç†ï¼›ç®¡ç†äººå‘˜ï¼›ç®¡ç†éƒ¨é—¨ï¼›æ“çºµï¼›ç»è¥æ‰‹æ®µ<br>  å¤æ•° managements<br>  ç½‘ç»œé‡Šä¹‰ ç®¡ç†ï¼›ç»è¥ï¼›ç®¡ç†å­¦ï¼›ç®¡ç†å±‚ï¼›<br>  Management ç®¡ç†ï¼›ç»è¥ï¼›ç®¡ç†å­¦ï¼›ç®¡ç†å±‚<br>  Management Accounting ç®¡ç†ä¼šè®¡ï¼›ç®¡ç†ä¼šè®¡å­¦ï¼›æ²»ç†ä¼šè®¡ï¼›ä¼šè®¡ç®¡ç†<br>  performance management ç»©æ•ˆç®¡ç†ï¼›ä¸šç»©ç®¡ç†ï¼›æ€§èƒ½ç®¡ç†<br>  management system ç®¡ç†ç³»ç»Ÿï¼›ç»è¥è´£ä»»åˆ¶<br>  quality management è´¨é‡ç®¡ç†<br>  project management é¡¹ç›®ç®¡ç†ï¼›ä¸“æ¡ˆç®¡ç†</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*written*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  wri : tten ( è‹± /ËˆrÉªtn/  )<br>  adj. ä¹¦é¢çš„ï¼Œæˆæ–‡çš„ï¼Œæ–‡å­—çš„<br>  v. å†™ï¼ˆwritençš„è¿‡å»åˆ†è¯ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ å†™æˆï¼›å†™ç»™ï¼›ä¹¦é¢ï¼›æˆæ–‡<br>  Written å†™æˆï¼›å†™ç»™ï¼›ä¹¦é¢ï¼›æˆæ–‡<br>  written English ä¹¦é¢è‹±è¯­ï¼›ä¹¦é¢è¯­ï¼›ä¹¦é¢è¡¨è¾¾ï¼›è‹±è¯­ä¹¦é¢è¯­<br>  written notice ä¹¦é¢é€šçŸ¥ï¼›é¢é€šçŸ¥ï¼›ä¹¦é¢é€šçŸ¥<br>  written by ç”±â€¦æ‰€å†™<br>  written english ä¹¦é¢è‹±è¯­<br>  written consent ä¹¦é¢åŒæ„ï¼›åŒæ„ä¹¦</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*different*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  di : ffe : ren : t ( è‹± /ËˆdÉªfrÉ™nt/  )<br>  adj. ä¸åŒçš„ï¼›ä¸ªåˆ«çš„ï¼›ä¸ä¼—ä¸åŒçš„<br>  ç½‘ç»œé‡Šä¹‰ ä¸åŒï¼›å·®å¼‚ï¼›ä¸¤æ ·<br>  Different ä¸åŒï¼›å·®å¼‚ï¼›ä¸¤æ ·<br>  different from ä¸åŒäºï¼›ä¸¤å›äº‹ï¼›ä¸åŒï¼›åŒºåˆ«äº<br>  Different Seasons å››å­£å¥‡è°­ï¼›ä¸åŒçš„å­£èŠ‚ï¼›è‚–ç”³å…‹çš„æ•‘èµï¼›ä¸åŒå­£èŠ‚<br>  different from ä¸â€¦ä¸åŒï¼Œä¸åŒäº<br>  different kinds ä¸åŒçš„ç§ç±»<br>  in different ways ä»¥ä¸åŒæ–¹å¼ï¼›ç”¨ä¸åŒæ–¹æ³•ï¼›é€šè¿‡ä¸åŒçš„æ–¹å¼</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*programming*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  pro : g : ram : ming ( è‹± /ËˆprÉ™ÊŠÉ¡rÃ¦mÉªÅ‹/  )<br>  n. è®¾è®¡ï¼›è§„åˆ’ï¼›ç¼–åˆ¶ç¨‹åºï¼›[è®¡]ç¨‹åºç¼–åˆ¶<br>  ç½‘ç»œé‡Šä¹‰ ç¼–ç¨‹ï¼›ç¨‹åºè®¾è®¡ï¼›ç¼–ç¨‹ï¼›ç¨‹åºç¼–åˆ¶<br>  programming ç¼–ç¨‹ï¼›ç¨‹åºè®¾è®¡ï¼›ç¼–ç¨‹ï¼›ç¨‹åºç¼–åˆ¶<br>  Linear Programming çº¿æ€§è§„åˆ’ï¼›ç¬¬äºŒåä¹ç« ï¼›çº¿æ€§ç¨‹åºç¼–åˆ¶ï¼›çº¿æ€§è§„åˆ’æ³•<br>  generic programming æ³›å‹ï¼›æ³›å‹ç¼–ç¨‹ï¼›ç¨‹åºè®¾è®¡ï¼›ç±»å±ç¼–ç¨‹<br>  linear programming n. çº¿æ€§è§„åˆ’<br>  programming language ç¼–ç¨‹è¯­è¨€ï¼›ç¨‹åºè®¾è®¡è¯­è¨€<br>  dynamic programming åŠ¨æ€è§„åˆ’ï¼›åŠ¨æ€ç¨‹åºè®¾è®¡</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*languages*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  lan : g : ua : ge : s ( ç¾ /â€˜lÃ¦Å‹gwÉªdÊ’/ )<br>  n. è¯­ç³»ï¼Œè¯­ç§ï¼›è¯­è¨€æ–‡å­—ï¼ˆlanguageå¤æ•°ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ è¯­æ–‡ï¼›è¯­è¨€ï¼›è¯­è¨€èƒ½åŠ›ï¼›è¯­è¨€å­¦<br>  Languages è¯­æ–‡ï¼›è¯­è¨€ï¼›è¯­è¨€èƒ½åŠ›ï¼›è¯­è¨€å­¦<br>  altaic languages é˜¿å°”æ³°è¯­ç³»ï¼›é˜¿å°”æ³°è¯­è¨€<br>  Uralic languages ä¹Œæ‹‰å°”è¯­ç³»<br>  modern languages ç°ä»£è¯­è¨€ï¼ˆmodern languageçš„å¤æ•°ï¼‰<br>  foreign languages school å¤–è¯­å­¦æ ¡<br>  romance languages ç½—æ›¼æ–¯è¯­ï¼ˆç”±æ‹‰ä¸è¯­æ¼”å˜è€Œæˆçš„è¯­è¨€ï¼‰</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="keyword">use</span>**</span><br></pre></td></tr></table></figure><p>  u : se ( è‹± /juËz/  )<br>  n. ä½¿ç”¨ï¼›ç”¨é€”ï¼›å‘æŒ¥<br>  vt. åˆ©ç”¨ï¼›è€—è´¹<br>  vi. ä½¿ç”¨ï¼Œè¿ç”¨<br>  n.(Use)äººåï¼›ï¼ˆå¾·ï¼‰ä¹Œæ³½<br>  è¿‡å»å¼ used<br>  è¿‡å»åˆ†è¯ used<br>  ç°åœ¨åˆ†è¯ using<br>  å¤æ•° uses<br>  ç¬¬ä¸‰äººç§°å•æ•° using<br>  ç½‘ç»œé‡Šä¹‰ ä½¿ç”¨ï¼›ç”¨é€”ï¼›åˆ©ç”¨ï¼›åº”ç”¨<br>  use ä½¿ç”¨ï¼›ç”¨é€”ï¼›åˆ©ç”¨ï¼›åº”ç”¨<br>  use up ç”¨å®Œï¼›ç”¨å…‰ï¼›è€—å°½<br>  Use Case ç”¨ä¾‹ï¼›ç”¨ä¾‹å›¾<br>  make use of ä½¿ç”¨ï¼›åˆ©ç”¨<br>  in use åœ¨ä½¿ç”¨ä¸­<br>  of use æœ‰ç”¨</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**<span class="class"><span class="keyword">data</span>**</span></span><br></pre></td></tr></table></figure><p>  da : ta ( è‹± /ËˆdeÉªtÉ™; ËˆdÉ‘ËtÉ™/  )<br>  n. æ•°æ®ï¼ˆdatumçš„å¤æ•°ï¼‰ï¼›èµ„æ–™<br>  n. (Data)äººåï¼›(æ—¥)é©®å¤ª (å§“)ï¼›(å°ã€è‘¡)è¾¾å¡”<br>  ç½‘ç»œé‡Šä¹‰ æ•°æ®ï¼›èµ„æ–™ï¼›æ•°æ®åŒºï¼›å‚è€ƒæ•°æ®<br>  data æ•°æ®ï¼›èµ„æ–™ï¼›æ•°æ®åŒºï¼›å‚è€ƒæ•°æ®<br>  Data Center æ•°æ®ä¸­å¿ƒï¼›èµ„æ–™ä¸­å¿ƒï¼›æ•°æ®äº¤äº’ä¸­å¿ƒ<br>  data collection æ•°æ®æ”¶é›†ï¼›æ•°æ®é‡‡é›†ï¼›æ•°æ®æœé›†ï¼›æœé›†èµ„æ–™<br>  data processing æ•°æ®å¤„ç†<br>  experimental data å®éªŒæ•°æ®ï¼›è¯•éªŒæ•°æ®<br>  data mining æ•°æ®æŒ–æ˜æŠ€æœ¯ï¼ˆå³æŒ‡ä»èµ„æ–™ä¸­å‘æ˜å’¨è¯¢æˆ–çŸ¥è¯†ï¼‰</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*storage*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  s : to : ra : ge ( è‹± /ËˆstÉ”ËrÉªdÊ’/  )<br>  n. å­˜å‚¨ï¼›ä»“åº“ï¼›è´®è—æ‰€<br>  å¤æ•° storages<br>  ç½‘ç»œé‡Šä¹‰ å­˜å‚¨ï¼›å‚¨å­˜ï¼›ä¿ç®¡ï¼›è´®è—ï¼›<br>  Storage å­˜å‚¨ï¼›å‚¨å­˜ï¼›ä¿ç®¡ï¼›è´®è—<br>  storage room è¡Œæä»“ï¼›å‚¨ç‰©å®¤ï¼›å‚¨è—å®¤ï¼›è´®è—å®¤<br>  cold storage å†·è—ï¼›å†·è—åº“ï¼›å†·åº“ï¼›å†·è—å…¬å¸<br>  data storage æ•°æ®å­˜å‚¨<br>  storage system å­˜å‚¨ç³»ç»Ÿï¼›å­˜å‚¨å™¨å­˜å‚¨ç³»ç»Ÿ<br>  energy storage è“„èƒ½ï¼›èƒ½é‡å‚¨å­˜ï¼›å‚¨èƒ½å™¨</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*<span class="strong">*technologies*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure><p>  te : ch : no : lo : gi : es (  ç¾ /tÉ›kâ€™nÉ‘lÉ™dÊ’i/  )<br>  n. æŠ€æœ¯ï¼›ç§‘æŠ€ï¼ˆtechnologyçš„å¤æ•°ï¼‰<br>  ç½‘ç»œé‡Šä¹‰ å§“ï¼›ç§‘æŠ€<br>  Technologies å§“ï¼›ç§‘æŠ€<br>  Agilent Technologies å®‰æ·ä¼¦ç§‘æŠ€å…¬å¸ï¼›å®‰æ·ä¼¦ç§‘æŠ€æœ‰é™å…¬å¸ï¼›å®‰æ·ä¼¦<br>  United Technologies è”åˆæŠ€æœ¯ï¼›è”åˆæŠ€æœ¯å…¬å¸ï¼›è”åˆç§‘æŠ€ï¼›è”åˆç§‘æŠ€å…¬å¸<br>  united technologies è”åˆç§‘æŠ€ï¼ˆè´¢å¯Œ500å¼ºå…¬å¸ä¹‹ä¸€ï¼Œæ€»éƒ¨æ‰€åœ¨åœ°ç¾å›½ï¼Œä¸»è¦ç»è¥èˆªç©ºèˆªå¤©ï¼‰<br>  cleaner technologies å‡€åŒ–æŠ€æœ¯ï¼›æ¸…æ´æŠ€æœ¯<br>  lucent technologies ç¾å›½æœ—è®¯ç§‘æŠ€å…¬å¸ï¼ˆè´¢å¯Œ500å¼ºå…¬å¸ä¹‹ä¸€ï¼‰<br>```</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Microservices-Guide-å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»&quot;&gt;&lt;a href=&quot;#Microservices-Guide-å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»&quot; class=&quot;headerlink&quot; title=&quot;Microservices Guide å¾®æœåŠ¡æŒ‡å—è¯æ±‡å¯¼è¯»&quot;&gt;&lt;/a
      
    
    </summary>
    
    
      <category term="MICROSERVICES" scheme="https://fengshana.github.io/categories/MICROSERVICES/"/>
    
    
      <category term="MICROSERVICES" scheme="https://fengshana.github.io/tags/MICROSERVICES/"/>
    
      <category term="è¯æ±‡" scheme="https://fengshana.github.io/tags/%E8%AF%8D%E6%B1%87/"/>
    
  </entry>
  
  <entry>
    <title>è¿™ä¸–é—´ï¼Œå”¯æœ‰é’æ˜¥ä¸æ¢¦æƒ³ä¸å¯è¾œè´Ÿ</title>
    <link href="https://fengshana.github.io/2020/05/16/%E5%BF%83%E6%83%85/%E8%BF%99%E4%B8%96%E9%97%B4%EF%BC%8C%E5%94%AF%E6%9C%89%E9%9D%92%E6%98%A5%E4%B8%8E%E6%A2%A6%E6%83%B3%E4%B8%8D%E5%8F%AF%E8%BE%9C%E8%B4%9F/"/>
    <id>https://fengshana.github.io/2020/05/16/%E5%BF%83%E6%83%85/%E8%BF%99%E4%B8%96%E9%97%B4%EF%BC%8C%E5%94%AF%E6%9C%89%E9%9D%92%E6%98%A5%E4%B8%8E%E6%A2%A6%E6%83%B3%E4%B8%8D%E5%8F%AF%E8%BE%9C%E8%B4%9F/</id>
    <published>2020-05-15T16:13:48.915Z</published>
    <updated>2020-05-15T17:54:49.083Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1j4411j79x/?spm_id_from=trigger_reload" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1j4411j79x/?spm_id_from=trigger_reload</a>  </p><blockquote><p>è¡¡æ°´ä¸­å­¦â€œå­¦éœ¸â€åŠ±å¿—æ¼”è®²ï¼šè¿™ä¸–é—´ï¼Œå”¯æœ‰é’æ˜¥ä¸æ¢¦æƒ³ä¸å¯è¾œè´Ÿ</p></blockquote><p>è¿™ä¸ªæ˜¯ä»–çš„æ ‡é¢˜æŒºå¥½çš„ï¼›<br>è¿™ä¸ªæ˜¯æˆ‘å¦¹å¦¹ä»‹ç»æˆ‘å»çœ‹çš„ï¼Œå¥¹ä»¬ç­ä¸Šæˆäººç¤¼çœ‹äº†è¿™ä¸ªå½“æ—¶æ²¡çœ‹å®Œï¼Œç„¶ååé¢å‘çƒ§å›å®¶æŠŠå®ƒåˆå®Œæ•´çš„çœ‹äº†ä¸€éï¼›æˆ‘çœ‹äº†ï¼Œç„¶åæœ¬æ¥æ˜¯æ˜¨å¤©çœ‹çš„ï¼Œå‡†å¤‡å†™äº›ä»€ä¹ˆçš„ï¼›å› ä¸ºæ˜¨å¤©ä¸€å¤©é¢è¯•äº†ä¸¤è½®ï¼Œæœ‰ç‚¹ç´¯ï¼›ç„¶åç¡äº†æ˜¨å¤©ç¡çš„å¾ˆå¥½ï¼›  </p><p>å¦¹å¦¹ï¼š å¼ é”¡é”‹<br>å¦¹å¦¹ï¼šåŸæ¥æˆ‘å¸¸å¸¸æƒ³ï¼Œåˆ«äººå°Šé‡æˆ‘ï¼Œæ˜¯å› ä¸ºæˆ‘å¾ˆä¼˜ç§€ï¼›å¯æ˜¯åˆ°äº†è¡¡ä¸­æ‰å‘ç°ï¼Œåˆ«äººå°Šé‡æˆ‘ï¼Œæ˜¯å› ä¸ºåˆ«äººå¾ˆä¼˜ç§€ï¼Œè¿™æ˜¯è¡¡ä¸­å­¦å­ç‹¬æœ‰çš„é’æ˜¥é­…åŠ›ã€‚  </p><p>æˆ‘è·Ÿæˆ‘å¦¹çš„å…³ç³»ï¼Œæ˜¯ä¸€ç§ååˆ†å¹³ç­‰çš„å…³ç³»ï¼Œå°±æ¯”å¦‚è¯´æ¨èæˆ‘æˆ–è€…è¯´å®‰åˆ©æˆ‘çœ‹æŸä¸ªè§‰å¾—æ„ä¹‰éå¸¸å¤§çš„ä¸€ä¸ªè§†é¢‘ä»€ä¹ˆçš„ï¼›æˆ–è€…æ˜¯â€¦.æ€»ä¹‹æˆ‘è®¤ä¸ºæˆ‘ç°åœ¨å’Œå®¶äººä¹‹é—´çš„ä¸€ä¸ªç›¸å¤„çš„ä¸€ä¸ªæ¨¡å¼å°±æ˜¯ä¸å®¶äººéƒ½æ˜¯ä¸€ä¸ªå¹³ç­‰çš„ä¸€ä¸ªçŠ¶æ€ï¼›æˆ‘å¯ä»¥å‘Šè¯‰ä½ æˆ‘ç°åœ¨çš„ä¸€ä¸ªçŠ¶æ€ï¼›ä½ ä¹Ÿå‘æˆ‘å€¾è¯‰ä½ çš„å¿ƒå£°ï¼›æˆ‘è§‰å¾—è¿™ç§çŠ¶æ€éå¸¸çš„å¥½ï¼›å¥½äº†ä¸æ‰¯äº†ï¼›  </p><p>è¿™ä¸ªè§†é¢‘æ˜¨å¤©çœ‹åˆ°åé¢å…¶å®æˆ‘æ³ªç›®äº†ã€‚<br>æ‰“åŠ¨äººå¿ƒçš„åœ°æ–¹å¯èƒ½åœ¨äºçš„ç¡®æœ‰äº›è¯æˆ³ä¸­å¿ƒåäº†ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘çš„å¿ƒåº•è¿˜ä¸å¤Ÿåšå¼ºåšç¡¬å§ã€‚ç„¶åå®¹æ˜“æ„ŸåŠ¨çš„ç¼˜æ•…ã€‚  </p><p>æ€»çš„æ¥è¯´æˆ‘å¸Œæœ›æˆ‘ï¼Œæˆ‘è®¤è¯†æˆ‘çˆ±çš„äººçˆ±æˆ‘çš„äººä¸ç®¡å¹´é¾„å¤šå°‘å²ä½™ç”Ÿéƒ½èƒ½å¤Ÿæœç€è‡ªå·±çš„ä¸€ä¸ªç›®æ ‡è€ŒåŠªåŠ›å¥‹æ–—è¿½é€ç€ã€‚  </p><p>ä¸‹é¢æ˜¯çœ‹è§†é¢‘çš„ä»–çš„ä¸€ä¸ªæ¼”è®²çš„å†…å®¹ï¼›æˆ‘ä¹Ÿæ˜¯ä¸€è¾¹å¬ä¸€è¾¹å†™ï¼›å¯¹äº†å…¶å®æˆ‘å‘ç°ï¼Œå°±æ˜¯åœ¨bç«™ä¸Šé¢å…¶å®æ¯å¤©æœ‰50ä¸Šä¸‹å·¦å³çš„äººåœ¨çœ‹è¿™ä¸ªè§†é¢‘ï¼›å…¶å®ä»–çš„è¿™åœºæ¼”è®²å¸¦æ¥çš„åŠ›é‡ä¹Ÿæ˜¯å¾ˆå¤§çš„ï¼Œèƒ½å¤Ÿåšåˆ°ä¸€ç§å°±æ˜¯æ­£é¢ç§¯æå‘ä¸Šåœ¨è‡ªå·±å¤„äºä½ç³œæˆ–è€…æ˜¯è¿·èŒ«çš„è¿™æ ·ä¸€ç§çŠ¶æ€ä¸‹ï¼Œç„¶åç»™äººä¸€ç§å°±æ˜¯æ­£ç¡®çš„è¿™æ ·ä¸€ä¸ªæ–¹å‘æŒ‡å¼•çš„ä½œç”¨æ˜¯éå¸¸å€¼å¾—å­¦ä¹ çš„ï¼›  </p><p>æˆ‘ä¹Ÿæ˜¯å…¶ä¸­çš„å—ç›Šè€…å³ä½¿æˆ‘å½“å‰å·²ç»ç¦»å¼€å­¦æ ¡çš„ç”Ÿæ´»æ­¥å…¥ç¤¾ä¼šäº†ã€‚  </p><p>å¥½äº†ä¸å¤šè¯´äº†ï¼Œæˆ‘è¿™äººå°±æ˜¯å®¹æ˜“æ¯”è¾ƒè¯å¤šæœ‰ä¸ªæ—¶å€™è‡ªå·±è·Ÿè‡ªå·±è¯´è¯éƒ½èƒ½è¯´å¾—ç¡ä¸ç€è§‰ã€‚å®³ï¼Œæ„äººã€‚(ï½¡â€¢Ë‡â€¸Ë‡â€¢ï½¡)  </p><p>å¯¹äº†ï¼Œå»ºè®®è¯·ä½¿ç”¨åŸé€Ÿåº¦è¿›è¡Œæ’­æ”¾ï¼Œä¸è¦å¿«è¿›ã€‚ï¼ˆæ›´æœ‰æ„Ÿè§‰ï¼‰  </p><h2 id="æ¼”è®²ç¨¿"><a href="#æ¼”è®²ç¨¿" class="headerlink" title="æ¼”è®²ç¨¿"></a>æ¼”è®²ç¨¿</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">å°Šæ•¬çš„è€å¸ˆï¼Œäº²çˆ±çš„åŒå­¦ä»¬ï¼Œå¤§å®¶å¥½ï¼ï¼ˆæ­¤æ—¶ä»–é èº¬<span class="number">90</span>åº¦ï¼Œä¸é”™å°ä¼™å­ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆ~~~ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘æ˜¯<span class="number">838</span>ç­çš„å¼ é”¡é”‹ã€‚</span><br><span class="line"></span><br><span class="line">ç›¸ä¿¡å¾ˆå¤šåŒå­¦åº”è¯¥è®¤è¯†æˆ‘ï¼Œåœ¨å¤§å®¶çœ¼é‡Œï¼Œæˆ‘æ‰®æ¼”æ›´å¤šçš„é€šå¸¸æ˜¯ä¸ªè°æ˜Ÿçš„è§’è‰²ã€‚  </span><br><span class="line"></span><br><span class="line">å¯æ˜¯å¤§å®¶ä¼¼ä¹å¿˜è®°äº†ï¼Œåœ¨æˆ‘è¿™çœ‹ä¼¼ç‹‚é‡ï¼Œå®åˆ™ç‹‚é‡çš„å¤–è¡¨ä¸‹ï¼ˆä¸å“¦è€é˜¿å§¨è§‰å¾—ä½ é•¿çš„æŒºæ¸…ç§€çš„å“¦å“ˆå“ˆå“ˆå“ˆï¼‰ï¼Œä¹Ÿéšè—ç€ä¸€é¢—æ†§æ†¬é˜³å…‰çš„å¿ƒã€‚ï¼ˆå¾ˆå¥½ï¼‰</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œæˆ‘ç«™åœ¨è¿™é‡Œï¼Œä¸å¤§å®¶åˆ†äº«å…³äºå­¦ä¹ ï¼Œï¼ˆæ­¤å¤„åº”è¯¥åŠ ä¸ªé€—å·ï¼Œä¸ç„¶å°±å˜æˆäº†â€œå­¦ä¹ æˆ‘çš„çœ‹æ³•â€ emmï¼‰æˆ‘çš„çœ‹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘æ¼”è®²çš„ä¸»é¢˜æ˜¯ï¼šé’æ˜¥ä¸æ¢¦æƒ³ã€‚  </span><br><span class="line"></span><br><span class="line">è¯è¯´è¿™ä¸–é—´ï¼Œå”¯æœ‰é’æ˜¥ä¸æ¢¦æƒ³ä¸å¯è¾œè´Ÿã€‚  </span><br><span class="line"></span><br><span class="line">èŠ±å¼€æ­£å¥½ï¼Œå¾®é£ä¸ç‡¥ï¼Œï¼ˆæˆ‘é‚£å¥é˜³å…‰æ­£å¥½å¾®é£ä¸ç‡¥ä¹Ÿæ˜¯å–è‡ªè¿™é‡Œå“ˆå“ˆå“ˆå“ˆï¼‰æˆ‘ä»¬æ‰¬å¸†ï¼Œèµ·èˆªã€‚  </span><br><span class="line"></span><br><span class="line">é¦–å…ˆï¼Œé’æ˜¥ï¼Œé’æ˜¥æ˜¯ä»€ä¹ˆé¢œè‰²çš„ï¼Ÿ  </span><br><span class="line"></span><br><span class="line">æ˜¯äº”æœˆçš„èŠ±æµ·ï¼Œç¿çƒ‚æ— æ¯”ï¼›æ˜¯æµ·è¾¹çš„æµªèŠ±ï¼Œæ°¸ä¸åœæ¯ï¼›æ˜¯ä»²å¤çš„éª„é˜³ï¼Œæ¿€æƒ…å››å°„ã€‚  </span><br><span class="line"></span><br><span class="line">é’æ˜¥åœ¨è¡¡ä¸­ï¼Œæ˜¯ç»šä¸½å¤šå½©çš„ï¼›  </span><br><span class="line"></span><br><span class="line">åŸæ¥å•Šï¼Œæˆ‘å¸¸å¸¸æƒ³ï¼Œåˆ«äººå°Šé‡æˆ‘ï¼Œæ˜¯å› ä¸ºï¼Œæˆ‘å¾ˆä¼˜ç§€ã€‚  </span><br><span class="line"></span><br><span class="line">å¯æ˜¯ï¼Œåˆ°äº†è¡¡ä¸­æ‰å‘ç°ï¼Œåˆ«äººå°Šé‡æˆ‘ï¼Œæ˜¯å› ä¸ºï¼Œåˆ«äººå¾ˆä¼˜ç§€ã€‚  </span><br><span class="line"></span><br><span class="line">è¿™ï¼Œæ˜¯è¡¡ä¸­å­¦å­ï¼Œç‹¬æœ‰çš„ï¼Œé’æ˜¥é­…åŠ›ï¼  </span><br><span class="line"></span><br><span class="line">åŒæ ·ï¼Œæ­£å€¼é’æ˜¥ï¼Œæˆ‘ä»¬æœ‰çŠ¯é”™çš„æƒåˆ©ã€‚  </span><br><span class="line"></span><br><span class="line">è®°å¾—ç¬¬ä¸€æ¬¡äº¤æ”¹é”™æœ¬ï¼Œæˆ‘é—®è€å¸ˆè¦æ”¹å¤šå°‘ï¼Ÿï¼ˆå¥½äº†ï¼Œä»–åœ¨è®²è¿°ä»–çš„äºŒè´§ç»å†äº†ï¼Œè·Ÿæˆ‘æœ‰çš„ä¸€æ¯”ï¼‰</span><br><span class="line"></span><br><span class="line">è€å¸ˆè¯´ï¼Œæ ¹æ®ä¸ªäººæƒ…å†µï¼Œåœ¨ç²¾ä¸åœ¨å¤šã€‚  </span><br><span class="line"></span><br><span class="line">å“¦å‘œï¼Ÿ  </span><br><span class="line"></span><br><span class="line">æ˜¯å—ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è¿™å¯æ˜¯æ‚¨è¯´çš„ã€‚</span><br><span class="line"></span><br><span class="line">è¯´æ—¶è¿Ÿé‚£æ—¶å¿«ï¼Œæˆ‘é¡¿æ—¶ç»½æ”¾äº†ä¸€ä¸ªè€€çœ¼çš„ç¬‘å®¹ã€‚ï¼ˆè¿™ä¸ªç¬‘å®¹å¯ä»¥æƒ³è±¡ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘å¿ƒä¸åœ¨ç„‰ï¼Œè‰è‰äº†äº‹ã€‚</span><br><span class="line"></span><br><span class="line">å¯æ˜¯ï¼Œæ”¹é”™å‘ä¸‹æ¥æ—¶å´æ˜¯ï¼Œä¸€ç‰‡ä¸‡ç´«åƒçº¢çš„æ ·å­ã€‚  </span><br><span class="line"></span><br><span class="line">ä¸Šé¢ï¼Œæœ‰è¯¦ç»†çš„æ‰¹æ³¨ï¼Œè¯„è¯­æ˜¯è¿™æ ·çš„ï¼šè¿™ä¸ªæ”¹é”™æ”¹çš„ä¸é”™ï¼Œæœ‰äº›é¢˜æ”¹ç€æ”¹ç€å°±é”™äº†ã€‚ï¼ˆå”‰å“Ÿè¿™ä¸ªè€å¸ˆå¾ˆçš®å“¦ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬è€å¸ˆé’æ˜¥æ´»æ³¼çš„åŠ›é‡ï¼Œå°±è¿™æ ·è®©å­¦ä¹ ç”Ÿæ´»å¦™è¶£æ¨ªç”Ÿã€‚  </span><br><span class="line"></span><br><span class="line">å…¶æ¬¡ï¼Œæ˜¯è¿™é‡Œé’æ˜¥çš„å­¦ä¹ æ°›å›´ï¼ˆå…¶å®ä»–è¿™é‡Œåœé¡¿äº†ä¸€å®šæ—¶é—´ï¼Œå°±æ˜¯ç­‰ç€ä¸‹é¢çš„åŒå­¦æ¸æ¸é™ä¸‹æ¥ç„¶åå†è¯´è¯ï¼Œå—¯ï¼ŒæŒºå¥½çš„ï¼‰ï¼Œå½“ä½ æ»¡çœ¼ï¼Œéƒ½æ˜¯è¿½æ±‚å“è¶Šçš„å­—æ ·æ—¶ï¼Œä¾¿ä¹Ÿï¼Œæ²¡ç†ç”±è½åäº†ã€‚  </span><br><span class="line"></span><br><span class="line">ï¼ˆå¥½äº†ï¼ŒäºŒè´§çš„è‡ªé»‘å¼€å§‹äº†ï¼‰è¿æˆ‘è¿™ä¸ªï¼Œè¢«åŒå­¦ä»¬èª‰ä¸ºï¼šå¤å¨œæ‹‰é»‘æš—ä¹‹ç¥çš„äººï¼Œä¹Ÿï¼Œæ—©å·²ç»ï¼Œåœ¨å‰å¾€å“è¶Šçš„è·¯ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘å–œæ¬¢ï¼Œåœ¨æŸä¸ªè¯¾é—´ç¢ç£¨é‚£äº›ï¼Œä¼˜é›…çš„ï¼Œç¾ä¸½çš„æ•°å­¦é¢˜ã€‚ï¼ˆçš„ç¡®ï¼Œå¦‚æœçœŸçš„è§‰å¾—è¯¶è¿™ä¸ªçš„ç¡®ååˆ†æœ‰è¶£ï¼Œå…¶å®æ˜¯ä¼šæ…¢æ…¢çš„æ²‰ä¸‹å»çœŸæ­£å–œæ¬¢ä¸Šè¿™äº›ä»¥å‰è§‰å¾—æ¯ç‡¥ä¹å‘³çš„ä¸œè¥¿ã€‚æ¯”å¦‚è¯´æ•°æ®ç»“æ„ï¼‰</span><br><span class="line"></span><br><span class="line">ï¼ˆå¥½äº†ï¼ŒäºŒè´§é•¿å¸ä¸€å£æ°”ï¼Œå“ˆå“ˆï¼‰å°ä¸œè¥¿ï¼ŒçœŸåˆ«è‡´ã€‚ï¼ˆä»–è¿™é‡Œåˆåœ¨ç­‰ä¸‹é¢çš„å£°éŸ³é™ä¸‹æ¥ä¸€ç‚¹ç„¶åæ‰å¼€å§‹è¯´è¯ï¼Œä¸é”™ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘å–œæ¬¢ï¼Œåœ¨æŸå¤©æ¸…æ™¨å¤´æ˜è„‘èƒ€æ—¶ï¼Œå›æƒ³åˆšåˆšå­¦è¿‡çš„ï¼Œç³»ç»Ÿå‘½åæ³•ã€‚  </span><br><span class="line"></span><br><span class="line">å“‡ï¼Œè¿™ä¸€ç¬é—´æœ‰ä¸€ç™¾ä¸‡ä¸ªå¯èƒ½ã€‚  </span><br><span class="line"></span><br><span class="line">æˆ‘å–œæ¬¢ï¼ŒæŸå¤©æ™šä¸Šèººåœ¨åºŠä¸Šï¼Œå›æƒ³æ›¾ç»èƒŒè¿‡çš„è€å­ï¼Œâ€œçŸ¥äººè€…æ™ºï¼Œè‡ªçŸ¥è€…æ˜ã€‚åœ£äººè€…æœ‰åŠ›ï¼Œè‡ªèƒœè€…å¼ºã€‚â€ æˆ‘å¥½å›°å•Šâ€¦â€¦</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒï¼Œæ¢¦æƒ³ã€‚</span><br><span class="line"></span><br><span class="line">æœ‰ä¸€æ¡è·¯ï¼ŒäººçƒŸç¨€å°‘å¯¸æ­¥éš¾è¡Œï¼Œä½†æ˜¯ï¼Œå´ä¸å¾—ä¸åšæŒå‰è¿›ï¼Œå› ä¸ºå®ƒçš„å°½å¤´ï¼Œç§ç€æ¢¦æƒ³ã€‚ï¼ˆè¿™ä¸ªæ—¶å€™æˆ‘æƒ³åˆ°äº†ä¸€é¦–çº¯éŸ³ä¹å¯ä»¥åœä¸‹å°±æ˜¯å«å•¥æ¥ç€ the right pathï¼›ç„¶åé€šè¿‡è¿™é¦–çº¯éŸ³ä¹ï¼Œæˆ‘ä¹Ÿå‘ç°äº†ä¸€é¦–æ„ä¹‰éå¸¸å¯¹äºæˆ‘è€Œè¨€éå¸¸å¥½çš„ä¸€é¦–å°è¯—ï¼›é»„è‰²çš„æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯ æˆ‘é€‰æ‹©äº†äººè¿¹æ›´å°‘çš„ä¸€æ¡ ä»æ­¤å†³å®šäº†æˆ‘ä¸€ç”Ÿçš„é“è·¯ï¼›åŒæ ·ä¹Ÿé€ç»™ä½ ä»¬ï¼›æœ‰ä¸ªæ—¶å€™å¬çº¯éŸ³ä¹ï¼Œå…¶å®ä¹Ÿæ˜¯åœ¨å¬è‡ªå·±å†…å¿ƒçš„å£°éŸ³ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">åŒå­¦ä»¬ï¼Œä½ çš„æ¢¦æƒ³æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæˆ‘ä»¥å‰å¯èƒ½ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘ç°åœ¨çŸ¥é“äº†ï¼Œä¹ŸçŸ¥é“æˆ‘å‰è¿›çš„æ–¹å‘æ˜¯ä»€ä¹ˆäº†ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">ç›¸ä¿¡ï¼Œå¾ˆå¤šäººçš„å›ç­”éƒ½ä¼šæ˜¯æ¸…åŒ—è¿™æ ·çš„é¡¶å°–åæ ¡ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬é€‰æ‹©å®ƒä»¬ä¸ä»…ä»…å› ä¸ºå®ƒä»¬æ˜¯åæ ¡ï¼Œè¿˜å› ä¸ºå®ƒä»¬åè½çš„åŸå¸‚ï¼Œå®ƒä»¬ç¾ä¸½çš„ä¼ è¯´ã€‚  </span><br><span class="line"></span><br><span class="line">å¯¹äºç—´è¿·äºåœ°ç†å­¦ç§‘çš„æˆ‘æ¥è¯´ï¼Œå¤–é¢çš„ä¸–ç•Œï¼Œå¤–é¢çš„åŸå¸‚å°±æ˜¯æˆ‘çš„æ¢¦æƒ³ã€‚  </span><br><span class="line"></span><br><span class="line">è¿™é‡Œï¼Œå¹¿ä¸œï¼Œå¯¹å¤–å¼€æ”¾çš„å‰æ²¿ï¼Œæˆ‘æŠŠå®ƒåšæˆå¡è´´éšèº«æºå¸¦ï¼›</span><br><span class="line"></span><br><span class="line">è¿™é‡Œï¼Œä¸Šæµ·ï¼Œå…¨ä¸­å›½æœ€å¤§çš„åŸå¸‚ï¼Œæˆ‘æŠŠå®ƒæ‹æˆç…§ç‰‡è´´åœ¨è¯¾æ¡Œä¸Šï¼›  </span><br><span class="line"></span><br><span class="line">è¿™é‡Œï¼Œè¥¿å®‰ï¼Œå¤§å”ä¸å¤œåŸï¼Œæˆ‘åšæ¢¦éƒ½ä¼šæƒ³èµ·å®ƒã€‚</span><br><span class="line"></span><br><span class="line">çœ‹å®Œè¿™äº›ï¼Œä¸çŸ¥é“åŒå­¦ä»¬å¿ƒé‡Œæœ‰ä»€ä¹ˆæ„Ÿè§¦ï¼›ï¼ˆæ„Ÿè§¦å˜›ï¼Œä¹Ÿæœ‰çš„ï¼Œæˆ‘ä¹Ÿæƒ³å»å¤–é¢çš„ä¸–ç•Œå¤šçœ‹çœ‹å¤šèµ°èµ°å¤šç»å†ï¼‰</span><br><span class="line"></span><br><span class="line">æ­¤åˆ»ï¼Œä½ çš„å¿ƒé‡Œæ˜¯å¦å……æ»¡äº†å¯¹æœªæ¥çš„æ¸´æœ›ï¼Ÿ</span><br><span class="line"></span><br><span class="line">æˆ‘é—®åŒå­¦ä»¬ä¸€ä¸ªé—®é¢˜ï¼Œè¯·å¤§å®¶ä¼¸å‡ºå³æ‰‹ã€‚</span><br><span class="line"></span><br><span class="line">çœ‹ï¼Œå®ƒåƒä»€ä¹ˆï¼Ÿï¼ˆä»–ä¸¾èµ·äº†å³æ‰‹ï¼Œè¯´å®è¯å—ï¼Ÿåƒæ‰‹ï¼‰</span><br><span class="line"></span><br><span class="line">åƒå³æ‰‹ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è¿™éƒ½è¢«ä½ å‘ç°äº†å—ï¼Ÿï¼ˆä¸é”™å•Šï¼Œéƒ½å¾ˆçš®ï¼Œå“ˆå“ˆå“ˆå“ˆï¼‰</span><br><span class="line"></span><br><span class="line">åŒå­¦ä»¬ï¼Œæœç„¶è§å¤šè¯†å¹¿å•Šï¼ï¼ˆé‚£æ˜¯é‚£æ˜¯ï¼Œè°¦è™šä¸€ç‚¹ï¼Œè‡ªå·±äººçŸ¥é“å°±è¡Œï¼‰</span><br><span class="line"></span><br><span class="line">è¯·å¤§å®¶ï¼Œäº”æŒ‡å¹¶æ‹¢ï¼Œæ”¾äºè…°é—´ï¼Œæ…¢æ…¢é«˜ä¸¾ï¼Œä¸¾è¿‡å¤´é¡¶ï¼Œå¼ å¼€ã€‚</span><br><span class="line"></span><br><span class="line">æˆåŠŸäº†å—ï¼Ÿé‚£æ­å–œä½ ï¼ä½ ç»™è‡ªå·±ï¼Œæ”¾äº†ä¸ªçƒŸèŠ±ã€‚ï¼ˆä¸é”™çš„å°ä¼™å­ï¼Œå“ˆå“ˆå“ˆå“ˆï¼‰</span><br><span class="line"></span><br><span class="line">å¯æ˜¯ï¼ŒçƒŸèŠ±è™½ç¾ï¼Œè½¬ç¬å³é€ã€‚ï¼ˆæˆ‘è¿™ä¸ªçƒŸèŠ±ä¸å¤ªç¾ï¼Œäº”æŒ‡å¤ªçŸ­äº†çœ‹ä¸å‡ºæ¥çƒŸèŠ±çš„æ ·å­ï¼‰</span><br><span class="line"></span><br><span class="line">ç°åœ¨ï¼Œè¯·åŒå­¦ä»¬ä¼¸å‡ºä½ çš„çƒŸèŠ±ï¼ŒæŠŠå®ƒæ”¥æˆæ‹³ã€‚</span><br><span class="line"></span><br><span class="line">å¤§å®¶çœ‹ï¼Œå®ƒåˆåƒä»€ä¹ˆï¼Ÿï¼ˆåƒçŸ³å¤´ï¼‰</span><br><span class="line"></span><br><span class="line">å¥½ï¼Œæˆ‘ä»¬ä¸è¦å†æ¥äº†ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">è¯·å¤§å®¶æŠŠä½ çš„å³æ‹³ç½®äºä½ çš„è€³è¾¹ï¼Œå¦‚æœä½ èƒ½æ¸…æ¥šåœ°å¬åˆ°è„‰æçš„å¾‹åŠ¨ï¼Œé‚£ä¹ˆæˆ‘å‘Šè¯‰ä½ ï¼šè¿™ï¼Œæ˜¯ç”Ÿå‘½ã€‚  </span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬æ¢¦æƒ³å¾ˆç¾ï¼Œå¾ˆè¿œå¤§ï¼›</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯åªæœ‰æŠŠæŒæ¡æˆæ‹³ï¼Œç”¨å°½å…¨åŠ›ï¼ŒæŒ¥å‘ç”Ÿæ´»ï¼Œè¿™æ ·ï¼Œæ‰æ˜¯é’æ˜¥è·¯ä¸Šï¼Œè¯¥æœ‰çš„å§¿æ€ã€‚ï¼ˆä¸é”™ï¼Œå¥½æ ·çš„ï¼Œæˆ‘æ€ä¹ˆæ„Ÿè§‰æˆ‘åœ¨ï¼Œï¼Œåˆ›å»ºæˆ‘è‡ªå·±çš„å¼¹å¹•ã€‚ã€‚ã€‚ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">åŒå­¦ä»¬ï¼Œä½ ï¼Œæœ‰æ²¡æœ‰æ„Ÿåˆ°ä¸€ç§éœ‡æ’¼ï¼Ÿ</span><br><span class="line"></span><br><span class="line">ç›¸ä¿¡ï¼Œå¾ˆå¤šäººéƒ½ä¼šè·Ÿæˆ‘ä¸€æ ·ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç§å¿µæƒ³ã€‚</span><br><span class="line"></span><br><span class="line">ä¸€ç§å‘è‡ªå†…å¿ƒï¼Œç”±å†…è€Œå¤–çš„ï¼Œå¯¹åŸå¸‚ï¼Œå¯¹æœªæ¥çš„æ¸´æœ›ã€‚</span><br><span class="line"></span><br><span class="line">å°‘å¹´ä»¬æ—©å·²ä¸æƒ³æ‹˜æ³¥äºè¿™é‡Œï¼Œåªèƒ½åœ¨æ‰€è°“ï¼ŒæŠ–éŸ³ã€ç”µå½±é‡Œï¼Œå»è§‚æœ›åˆ«äººçš„ç”Ÿæ´»ã€‚ï¼ˆæ˜¯çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯è¿‡å¥½è‡ªå·±çš„ç”Ÿæ´»ï¼Œè€Œä¸æ˜¯å»ç¾¡æ…•åˆ«äººï¼Œå…¶å®è‡ªå·±ä¹Ÿå¯ä»¥ï¼‰</span><br><span class="line"></span><br><span class="line">å¯æ˜¯ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬å°±åªèƒ½åšé‚£ä¸ªèº²åœ¨é˜´æš—çš„è§’è½é‡Œï¼Œæ–°é²œçš„èˆå°ä¹‹ä¸Šï¼Œå…‰é²œäº®ä¸½çš„åˆ«äººçš„é‚£ä¸ªï¼Œå‘å¾®çš„äººã€‚</span><br><span class="line"></span><br><span class="line">è¿™æ ·ä¸è¡Œã€‚</span><br><span class="line"></span><br><span class="line">ä¸€ç‚¹å„¿éƒ½ä¸å¥½ç©ã€‚ï¼ˆæˆ‘ä¹Ÿè§‰å¾—ï¼Œå› ä¸ºä½ ä¸è§‰å¾—å¹²å·´å·´çš„çœ‹ç€åˆ«äººçš„ç”Ÿæ´»ï¼Œåªä¼šè®©è‡ªå·±emmè§‰å¾—è‡ªå·±çš„ç”Ÿæ´»å¹¶æ²¡æœ‰ï¼Œæ€ä¹ˆè¯´å‘¢å¦‚æœè‡ªå·±çš„ä¸‰è§‚å¹¶ä¸æ˜¯æ‘†çš„å¾ˆæ­£çš„è¯ï¼Œå°±ä¼šäº§ç”Ÿä¸€ç§æ”€æ¯”çš„è¿™æ ·ä¸€ç§å¿ƒç†æƒ…ç»ªï¼Œè¿™æ ·æ˜¯éå¸¸ä¸å¥½çš„ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬ï¼Œä¼šèµ°å‡ºå»ï¼Œé¡ºå¢ƒä¹Ÿå¥½é€†å¢ƒä¹Ÿå¥½ï¼Œäººç”Ÿï¼Œæœ¬å°±æ˜¯ä¸€åœºä¸ç§ç§å›°éš¾æ— ä¼‘æ— å°½çš„æ–—äº‰ï¼Œä¸€åœºï¼Œæ•Œä¼—æˆ‘å¯¡çš„æ–—äº‰ã€‚ï¼ˆå§æ§½ï¼Œä»–è¿™é‡Œå¥½åƒå¿µé”™äº†ï¼Œå¿µæˆäº†æ•Œå¯¡æ•Œä¼—çš„æ–—äº‰ï¼Œä½†æ˜¯å½“å‰ä»–å¹¶æ²¡æœ‰å°±æ˜¯å› ä¸ºè¿™ä¸ªç‚¹çš„å¤±è¯¯è€Œåé¢æ¼”è®²çš„ä¸å¥½ï¼Œè¿™ä¸€ç‚¹å¾ˆå¥½å…¶å®ï¼Œé¢å¯¹å¤±è¯¯å¹¶ä¸æ…Œå¼ è€Œæ˜¯é¡ºåˆ©çš„æ¥å…¥ä¸‹ä¸€å¥è¯è¿™æ ·å­ï¼Œä¸é”™å°ä¼™å­ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘æ›¾æŠŠè‡ªå·±å‘å¾€çš„å¤§å­¦çƒ­çˆ±çš„åŸå¸‚ï¼Œæ‹æˆç…§ç‰‡è´´åœ¨è¯¾æ¡Œä¸Šï¼Œæ¯å½“æˆ‘ç²¾ç–²åŠ›ç«­æ—¶ï¼Œéƒ½è¦çœ‹ä¸€ä¸‹å®ƒï¼ˆæ–¹ä¾¿æ‰¾å›è‡ªå·±å½“åˆçš„ä¿¡å¿µä¸ä¼šæ„Ÿåˆ°è¿·èŒ«çš„è¿™æ ·ä¸€ç§æ–¹å¼ï¼Œå…¶å®ä¹Ÿæ˜¯å¼•å¯¼è‡ªå·±èµ°å‡ºä½è½çš„è¿™æ ·ä¸€ç§æƒ…ç»ªæˆ–è€…è¯´é¿å…ä½è½ï¼›å…¶å®æˆ‘ä¹Ÿæœ‰ï¼Œå°±æ˜¯å†™ä¸€äº›è¯ç„¶åç»å¸¸å»çœ‹ï¼Œé¼“åŠ±è‡ªå·±çš„è¿™æ ·ä¸€ç§æ–¹å¼ï¼‰ï¼Œç„¶åè´¨é—®è‡ªå·±ï¼Œå°±è¿™æ ·å•¦ï¼Œä½ å°±è¿™ç‚¹ä¸œè¥¿ï¼Ÿï¼ˆæ˜¯çš„ï¼Œæˆ‘ä¹Ÿè¿™æ ·å‚»é€¼å¼è‡ªå˜²ï¼‰ä½ çœŸçš„çœŸçš„åˆ°äº†æœ€åæ­‡æ–¯åº•é‡Œä¸èƒ½åšæŒçš„åœ°æ­¥äº†å—ï¼Ÿ</span><br><span class="line"></span><br><span class="line">ä½ çš„ç†æƒ³æ˜¯è¯—ï¼Œç†æƒ³æ˜¯æ¢¦ï¼Œç†æƒ³æ˜¯è¿œæ–¹çš„ç”°é‡ï¼Œæ˜¯ç©¿è¶Šä¸–ç•Œçš„æ—…è¡Œï¼</span><br><span class="line"></span><br><span class="line">ä½†ç°åœ¨ä½ èƒ½åšçš„æ‰€æœ‰ï¼Œåªæ˜¯ï¼ŒæŠŠæ‰‹æ¡ç´§ï¼ï¼ˆå—¯ï¼‰</span><br><span class="line"></span><br><span class="line">åšç§¯è–„å‘ï¼ï¼ˆå—¯ï¼‰</span><br><span class="line"></span><br><span class="line">ä½ ï¼Œåªæœ‰ä»˜å‡ºï¼ï¼ˆå—¯ï¼‰</span><br><span class="line"></span><br><span class="line">ä»˜å‡ºä½ çš„æ—¶é—´ï¼ŒèµŒä¸Šä½ çš„å°Šä¸¥ï¼Œæ‹¿å‡ºä½ çš„å…¨éƒ¨ï¼ä½ çš„everything!ï¼ˆå—¯ï¼Œæ˜¯çš„ï¼ŒåŠªåŠ›äº†æ‰æœ‰æ”¶è·ï¼Œä¸åŠªåŠ›ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼‰</span><br><span class="line"></span><br><span class="line">å½“åˆ«äººæ‰“æ¸¸æˆæ—¶ä½ åœ¨å­¦ä¹ ï¼Œå½“åˆ«äººç¡æ‡’è§‰æ—¶ä½ åœ¨å­¦ä¹ ï¼Œä½ å«ç€æ³ªåœ¨æ·±å¤œé‡Œèˆè¹ˆï¼Œåœ¨å›å¿†é‡Œå¥”è·‘ï¼ï¼ˆå…¶å®è¿™å¥è¯å¥½åƒæ‰æ˜¯æ‰“åŠ¨æˆ‘çš„ç‚¹ï¼Œå°±æ˜¯å¬äº†è¿™äº›è¯å¾ˆå®¹æ˜“å°±è”æƒ³åˆ°ä»¥å‰è‡ªå·±åŠªåŠ›åšæŒçš„ä¸€äº›ç”»é¢è¿™æ ·å­ï¼‰</span><br><span class="line"></span><br><span class="line">æ²¡æœ‰äººï¼Œåœ¨å¹´å°‘æ—¶æƒ³æˆä¸ºä¸€ä¸ªæ™®é€šäººã€‚</span><br><span class="line"></span><br><span class="line">å°½ç®¡ç”Ÿæ´»ï¼Œå®ƒä¼šå‰¥å¤ºä½ çš„æ‰€çˆ±è·µè¸ä½ çš„å°Šä¸¥ï¼ŒæŠŠä½ è¸©åœ¨è„šä¸‹éä½“é³ä¼¤ã€‚</span><br><span class="line"></span><br><span class="line">ä½†ä½ ï¼Œæ€èƒ½ï¼Œå€’ä¸‹ï¼ï¼ˆä½†æˆ‘ï¼Œæ€èƒ½ï¼Œå€’ä¸‹ï¼ï¼‰</span><br><span class="line"></span><br><span class="line">ä½ çš„èº«åï¼Œæ˜¯æŒšçˆ±çš„äººï¼›</span><br><span class="line"></span><br><span class="line">é‚£äº›å—è¿‡çš„ä¼¤éƒ½å°†æˆä¸ºä½ çš„å‹‹ç« ï¼Œéƒ½æ˜¯ä½ ï¼Œé€ç»™æœªæ¥çš„è‡ªå·±æœ€å¥½çš„ç¤¼ç‰©ï¼ï¼ˆæ˜¯çš„ï¼Œå°±åƒæ˜¯æˆ‘ä¹‹å‰è¯´ï¼Œemmï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿæˆä¸ºæœªæ¥çš„è‡ªå·±çš„ä¸€å—å«è„šçŸ³/è¸è„šçŸ³ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘ï¼Œä¹Ÿæœ‰æ¢¦æƒ³å•Šï¼ï¼ˆæˆ‘çš„æ¢¦æƒ³æ˜¯ï¼Œåœ¨javaå¼€å‘è¿™ä¸€è¡Œå½“ä¸­æ…¢æ…¢çš„æ²‰æ·€è‡ªå·±ï¼Œé‡è§æ›´å¤šæ›´å¥½çš„äººï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘å‘Šè¯‰è‡ªå·±ï¼Œæ€»æœ‰ä¸€å¤©ï¼Œæˆ‘ä¼šç«™åœ¨é‡‘è‰²çš„èˆå°ä¸Šï¼Œèšå…‰ç¯æ‰“å‘æˆ‘ï¼Œæ‘„åƒæœºå¯¹å‡†æˆ‘ï¼Œæ‰€æœ‰äººçš„ç›®å…‰æ³¨è§†ç€æˆ‘ï¼Œæˆ‘èƒ½ç«™åœ¨å°ä¸Šä¾ƒä¾ƒè€Œè°ˆã€‚æ­¤åˆ»ï¼Œä¸–ç•Œåªæœ‰æˆ‘ä¸€äººï¼ï¼ˆemmä¸é”™ï¼‰</span><br><span class="line"></span><br><span class="line">æˆ‘è¦è®©å¹³æ—¥é‡Œè½»è”‘æˆ‘çš„å¯¹æ‰‹çŸ¥é“ï¼Œæˆ‘è¦è®©ä»–ä»¬äº²å£è¯´å‡ºé‚£ä¸‰ä¸ªå­—ï¼šï¼ˆæˆ‘çˆ±ä½ ï¼Ÿå¯¹ä¸èµ·ï¼Ÿæˆ‘æ¨ä½ ï¼Ÿæˆ‘å¯èƒ½å¹³æ—¶emmè‚¥çš‚å»çœ‹å¤šäº†ï¼Ÿï¼‰</span><br><span class="line"></span><br><span class="line">ä½ ï¼Œèµ¢äº†ï¼ï¼ˆå‰å®³ï¼‰</span><br><span class="line"></span><br><span class="line">å¦‚æœè¯´ï¼Œé’æ˜¥ï¼Œæ˜¯è¶³è¿¹ï¼Œé‚£æ¢¦æƒ³ï¼Œä¸€å®šï¼Œå«åšè¿œæ–¹ã€‚</span><br><span class="line"></span><br><span class="line">è¯·åŒå­¦ä»¬ç›¸ä¿¡ï¼Œç”Ÿæ´»æ˜æœ—ï¼Œä¸‡ç‰©å¯çˆ±ï¼›ï¼ˆæ˜¯çš„ï¼Œæˆ‘ç¡®å®ç›¸ä¿¡ç€è¿™å¥è¯ï¼‰</span><br><span class="line"></span><br><span class="line">äººé—´å€¼å¾—ï¼Œæœªæ¥å¯æœŸã€‚ï¼ˆæ˜¯çš„ï¼Œäººé—´å€¼å¾—ï¼Œæœªæ¥å¯æœŸï¼ï¼‰</span><br><span class="line"></span><br><span class="line">ï¼ˆåŠ æ²¹ï¼Œè¯¶æˆ‘åˆšæŠŠç½‘é¡µç»™å‰æ‰äº†ï¼Œä»–ç»“å°¾å…¶å®å¥½åƒä¹ŸåŒæ ·æ˜¯é èº¬äº†<span class="number">90</span>åº¦ï¼Œä¸é”™ã€‚å°ä¼™å­ã€‚ï¼‰</span><br></pre></td></tr></table></figure><h2 id="æœªé€‰æ‹©çš„è·¯"><a href="#æœªé€‰æ‹©çš„è·¯" class="headerlink" title="æœªé€‰æ‹©çš„è·¯"></a>æœªé€‰æ‹©çš„è·¯</h2><p>ä»å‰å¯èƒ½è§‰å¾—åäººåè¨€åªä¼šå‘ç”Ÿåœ¨åäººèº«ä¸Šï¼Œå…¶å®åäººä¹Ÿåªæ˜¯å°†è‡ªå·±çš„æ‰€æ„Ÿè¡¨è¾¾äº†å‡ºæ¥ï¼›æ¥çº¾è§£è‡ªå·±çš„æŸä¸€ç§æƒ…ç»ªè€Œå·²ï¼›å…¶å®å¾ˆå¤šçš„æ—¶å€™å»è¯»æŸä¸€é¦–å°è¯—æŸä¸€å¥ç»å…¸åå¥å†è”æƒ³ä¸€ä¸‹è‡ªå·±çš„ç”Ÿæ´»ï¼Œå¾ˆå¤šçš„æ—¶å€™æ˜¯çš„ç¡®æœ‰å¾ˆå¤§çš„ä¸€ä¸ªå…±åŒä¹‹å¤„çš„ã€‚<br>è¿™å°±æ˜¯å…±é¸£å§ã€‚<br>å°†è‡ªå·±çš„è¡¨è¾¾é€šè¿‡æ–‡å­—çš„å½¢å¼æ¸©æŸ”çš„è¡¨è¾¾äº†å‡ºæ¥ã€‚  </p><p>å¥½äº†ä¸è¯´äº†ï¼Œä»Šå¤©é¢è¯•é—®äº†å¾®æœåŠ¡ï¼Œæˆ‘ç›´æ¥è¯´æˆ‘ä¸ä¼šã€‚ç°åœ¨æŒ¨æ‰“çš„æ—¶å€™åˆ°äº†ã€‚å»çœ‹ä¹¦å»äº†ã€‚  </p><p>å¯¹äº†ï¼Œè¯»è¿™é¦–å°è¯—çš„æ—¶å€™ï¼Œbgmåˆ‡æ¢æˆ <strong>the right path</strong>è·Ÿé…å“¦~ï¼ˆthe right pathå…¶å®æœ‰æ®µæ—¶é—´ï¼Œåœ¨å»å¹´å§ï¼Œæˆ‘å¾ªç¯äº†å¾ˆä¹…ï¼Œå› ä¸ºæœ¬èº«å»å¹´æ˜¯ä¸€ä¸ªå®³æ€•æˆé•¿ä½†åˆæ¸´æœ›æˆé•¿ï¼Œè¿·èŒ«çš„ä¸€ä¸ªçŠ¶æ€ï¼ŒæŒºä¸§çš„ï¼Œæ‰€ä»¥è¯´ï¼Œè¿™ä¸ªæ—¶å€™è¦ä¹ˆæ‰¾æœ‹å‹å€¾è¯‰è¦ä¹ˆï¼Œå¬çº¯éŸ³ä¹é™ä¸‹å¿ƒæ¥å¬å¬è‡ªå·±å¿ƒåº•çš„å£°éŸ³ã€‚å»ºè®®ä¸€å®šè¦å°†è¿™ç§æƒ…ç»ªæ’è§£å‡ºæ¥ï¼Œä¸è¦å‹æŠ‘è‡ªå·±ï¼Œä¸å¥½ï¼Œå› ä¸ºç»å†è¿‡ï¼Œæ‰€ä»¥çŸ¥é“ï¼Œå»å­¦ä¼šå¦è¯šå­¦ä¼šæ€ä¹ˆæ ·å»æ¥å—å®¹çº³è‡ªå·±ã€‚å¸Œæœ›çœ‹æ–‡çš„é“å‹ä»¬ä¹Ÿèƒ½åƒæ¼”è®²äººä¸€æ ·ï¼Œæˆ–è®¸æ˜¯æ­¤åˆ»æˆ–è®¸æ˜¯æœªæ¥çš„æŸä¸€ä¸ªæ—¶é—´ç‚¹èƒ½å¤Ÿæ…¢æ…¢ç»½æ”¾å±äºè‡ªå·±çš„é‚£ä¸€æ˜Ÿå…‰äº®ã€‚ï¼‰  </p><p>è¯¶è¯¶è¯¶æˆ‘çªç„¶å‘ç°ï¼Œæˆ‘æ‹çš„è¿™ä¸ªç…§ç‰‡è·Ÿæˆ‘è¿™ä¸ªé€‰æ‹©çš„è·¯ï¼Œæœ‰ç‚¹ç›çš„è¿™æ ·ä¸€ä¸ªä½œç”¨ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œä½ çœ‹ï¼Œè¿™æ—¶å€™æˆ‘ä»Šå¤©æ‹çš„äº‘ï¼Œå¾ˆæ¼‚äº®ï¼Œä¸åƒä¸€æ¡é“è·¯å—ï¼Ÿå“ˆå“ˆå“ˆå¯èƒ½æ˜¯æˆ‘æƒ³å¤šäº†å“ˆå“ˆå“ˆå“ˆã€‚  </p><p>å¥½äº†è¯ä¸å¤šè¯´æˆ‘æ’¤äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">ã€Šæœªé€‰æ‹©çš„è·¯ã€‹</span><br><span class="line"></span><br><span class="line">ç½—ä¼¯ç‰¹ å¼—ç½—æ–¯ç‰¹</span><br><span class="line"></span><br><span class="line">é»„è‰²çš„æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯ï¼Œ</span><br><span class="line"></span><br><span class="line">å¯æƒœæˆ‘ä¸èƒ½åŒæ—¶å»æ¶‰è¶³ï¼Œ</span><br><span class="line"></span><br><span class="line">æˆ‘åœ¨é‚£è·¯å£ä¹…ä¹…ä¼«ç«‹ï¼Œ</span><br><span class="line"></span><br><span class="line">æˆ‘å‘ç€ä¸€æ¡è·¯æç›®æœ›å»ï¼Œ</span><br><span class="line"></span><br><span class="line">ç›´åˆ°å®ƒæ¶ˆå¤±åœ¨ä¸›æ—æ·±å¤„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä½†æˆ‘å´é€‰æ‹©äº†å¦å¤–ä¸€æ¡è·¯ï¼Œ</span><br><span class="line"></span><br><span class="line">å®ƒè’è‰å‡„å‡„ï¼Œååˆ†å¹½å¯‚ï¼Œ</span><br><span class="line"></span><br><span class="line">æ˜¾å¾—æ›´è¯±äººï¼Œæ›´ç¾ä¸½ï¼›</span><br><span class="line"></span><br><span class="line">è™½ç„¶åœ¨è¿™ä¸¤æ¡å°è·¯ä¸Šï¼Œ</span><br><span class="line"></span><br><span class="line">éƒ½å¾ˆå°‘ç•™ä¸‹æ—…äººçš„è¶³è¿¹ï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è™½ç„¶é‚£å¤©æ¸…æ™¨è½å¶æ»¡åœ°ï¼Œ</span><br><span class="line"></span><br><span class="line">ä¸¤æ¡è·¯éƒ½æœªç»è„šå°æ±¡æŸ“ã€‚</span><br><span class="line"></span><br><span class="line">å•Šï¼Œç•™ä¸‹ä¸€æ¡è·¯ç­‰æ”¹æ—¥å†è§ï¼</span><br><span class="line"></span><br><span class="line">ä½†æˆ‘çŸ¥é“è·¯å¾„å»¶ç»µæ— å°½å¤´ï¼Œ</span><br><span class="line"></span><br><span class="line">ææ€•æˆ‘éš¾ä»¥å†è¿”å›ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¹Ÿè®¸å¤šå°‘å¹´ååœ¨æŸä¸ªåœ°æ–¹ï¼Œ</span><br><span class="line"></span><br><span class="line">æˆ‘å°†è½»å£°å¹æ¯æŠŠå¾€äº‹å›é¡¾ï¼š</span><br><span class="line"></span><br><span class="line">ä¸€ç‰‡æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯ï¼Œ</span><br><span class="line"></span><br><span class="line">è€Œæˆ‘é€‰æ‹©äº†äººè¿¹æ›´å°‘çš„ä¸€æ¡ï¼Œ</span><br><span class="line"></span><br><span class="line">ä»æ­¤å†³å®šäº†æˆ‘ä¸€ç”Ÿçš„é“è·¯ã€‚</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1j4411j79x/?spm_id_from
      
    
    </summary>
    
    
      <category term="å¿ƒæƒ…" scheme="https://fengshana.github.io/categories/%E5%BF%83%E6%83%85/"/>
    
    
      <category term="å¿ƒæƒ…" scheme="https://fengshana.github.io/tags/%E5%BF%83%E6%83%85/"/>
    
  </entry>
  
  <entry>
    <title>112èŠ‚Rediså…¥é—¨åˆ°ç²¾é€šã€é»‘é©¬ç¨‹åºå‘˜ã€‘</title>
    <link href="https://fengshana.github.io/2020/05/13/%E9%9D%A2%E8%AF%95/%E3%80%90REDIS%E3%80%91112%E8%8A%82Redis%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%90%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98%E3%80%91/"/>
    <id>https://fengshana.github.io/2020/05/13/%E9%9D%A2%E8%AF%95/%E3%80%90REDIS%E3%80%91112%E8%8A%82Redis%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%90%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98%E3%80%91/</id>
    <published>2020-05-13T13:49:09.207Z</published>
    <updated>2020-05-22T11:55:45.807Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹è§†é¢‘: <a href="https://www.bilibili.com/video/BV1CJ411m7Gc?from=search&amp;seid=17203994801277039493" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1CJ411m7Gc?from=search&amp;seid=17203994801277039493</a></p><h2 id="112èŠ‚Rediså…¥é—¨åˆ°ç²¾é€šã€é»‘é©¬ç¨‹åºå‘˜ã€‘"><a href="#112èŠ‚Rediså…¥é—¨åˆ°ç²¾é€šã€é»‘é©¬ç¨‹åºå‘˜ã€‘" class="headerlink" title="112èŠ‚Rediså…¥é—¨åˆ°ç²¾é€šã€é»‘é©¬ç¨‹åºå‘˜ã€‘"></a>112èŠ‚Rediså…¥é—¨åˆ°ç²¾é€šã€é»‘é©¬ç¨‹åºå‘˜ã€‘</h2><h3 id="è¯¾ç¨‹å®‰æ’"><a href="#è¯¾ç¨‹å®‰æ’" class="headerlink" title="è¯¾ç¨‹å®‰æ’"></a>è¯¾ç¨‹å®‰æ’</h3><h4 id="Windowsç¯å¢ƒè¿›è¡Œè®²è§£"><a href="#Windowsç¯å¢ƒè¿›è¡Œè®²è§£" class="headerlink" title="Windowsç¯å¢ƒè¿›è¡Œè®²è§£"></a>Windowsç¯å¢ƒè¿›è¡Œè®²è§£</h4><ol><li>RedisåŸºç¡€</li></ol><ul><li>Rediså…¥é—¨</li><li>æ•°æ®ç±»å‹ï¼ˆæ•°æ®çš„å­˜å‚¨æ ¼å¼ï¼‰</li><li>é€šç”¨å‘½ä»¤</li><li>Jedisï¼ˆJavaå¦‚ä½•è¿æ¥redisä»¥åŠæ“ä½œredisï¼‰</li></ul><h4 id="Linuxç¯å¢ƒå®æ“ï¼ˆå®æ“æ€§å®ç”¨æ€§å¼ºï¼‰"><a href="#Linuxç¯å¢ƒå®æ“ï¼ˆå®æ“æ€§å®ç”¨æ€§å¼ºï¼‰" class="headerlink" title="Linuxç¯å¢ƒå®æ“ï¼ˆå®æ“æ€§å®ç”¨æ€§å¼ºï¼‰"></a>Linuxç¯å¢ƒå®æ“ï¼ˆå®æ“æ€§å®ç”¨æ€§å¼ºï¼‰</h4><ol start="2"><li>Redisé«˜çº§</li></ol><ul><li>æŒä¹…åŒ–</li><li>redis.conf</li><li>äº‹åŠ¡</li><li>é›†ç¾¤</li></ul><ol start="3"><li>Redisåº”ç”¨</li></ol><ul><li>ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ</li></ul><h3 id="rediså…¥é—¨-NoSQLä»‹ç»"><a href="#rediså…¥é—¨-NoSQLä»‹ç»" class="headerlink" title="rediså…¥é—¨-NoSQLä»‹ç»"></a>rediså…¥é—¨-NoSQLä»‹ç»</h3><h4 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h4><ul><li>Redisç®€ä»‹</li><li>Redisçš„ä¸‹è½½ä¸å®‰è£…</li><li>Redisçš„åŸºæœ¬æ“ä½œ</li></ul><h4 id="ä¸­å›½è¢«ä¸–ç•Œé»‘çš„æœ€æƒ¨çš„ä¸€å¤©"><a href="#ä¸­å›½è¢«ä¸–ç•Œé»‘çš„æœ€æƒ¨çš„ä¸€å¤©" class="headerlink" title="ä¸­å›½è¢«ä¸–ç•Œé»‘çš„æœ€æƒ¨çš„ä¸€å¤©"></a>ä¸­å›½è¢«ä¸–ç•Œé»‘çš„æœ€æƒ¨çš„ä¸€å¤©</h4><p>2007å¹´10æœˆ30æ—¥ï¼ŒåŒ—äº¬å¥¥è¿ä¼šé—¨ç¥¨é¢å‘å¢ƒå†…å…¬ä¼—ç¬¬äºŒé˜¶æ®µé¢„å”®æ­£å¼å¯åŠ¨ã€‚<br>ä¸Šåˆä¸€å¼€å§‹ï¼Œå…¬ä¼—æäº¤ç”³è¯·ç©ºå‰è¸Šè·ƒã€‚<br>ä¸Šåˆ9æ—¶è‡³10æ—¶ï¼Œå®˜æ–¹ç¥¨åŠ¡ç½‘ç«™çš„<font style="color:red">æµè§ˆé‡</font>è¾¾åˆ°äº†<font style="color:red">800ä¸‡æ¬¡</font>ï¼Œç¥¨åŠ¡å‘¼å«ä¸­å¿ƒçƒ­çº¿ä»9æ—¶è‡³10æ—¶çš„<font style="color:red">å‘¼å…¥é‡</font>è¶…è¿‡äº†<font style="color:red">380ä¸‡äººæ¬¡</font>ã€‚<br>ç”±äºç¬é—´è®¿é—®æ•°é‡è¿‡å¤§ï¼ŒæŠ€æœ¯ç³»ç»Ÿåº”å¯¹ä¸ç•…ï¼Œé€ æˆå¾ˆå¤šç”³è´­è€…æ— æ³•åŠæ—¶æäº¤ç”³è¯·ï¼Œä¸ºæ­¤èƒŒæ™¯å¥¥ç»„å§”ç¥¨åŠ¡ä¸­å¿ƒå¯¹å¹¿å¤§å…¬ä¼—æœªèƒ½åŠæ—¶ã€ä¾¿æ·åœ°å®ç°å¥¥è¿é—¨ç¥¨é¢„å®šè¡¨ç¤ºæ­‰æ„ã€‚  </p><p>äººå¤ªå¤šï¼ˆå…¨ä¸–ç•Œçš„å†²å‡»ï¼‰  </p><h4 id="ä¸å¯å›é¿çš„é—®é¢˜"><a href="#ä¸å¯å›é¿çš„é—®é¢˜" class="headerlink" title="ä¸å¯å›é¿çš„é—®é¢˜"></a>ä¸å¯å›é¿çš„é—®é¢˜</h4><p>å¥¥è¿ä¼šé—¨ç¥¨é¢„å”®ç³»ç»Ÿå¼€æ”¾ç¬¬ä¸€å¤©ï¼Œä¸Šåˆ9ç‚¹æ­£å¼å¼€å§‹å”®ç¥¨åˆ°ä¸­åˆ12ç‚¹ï¼Œ3ä¸ªå°æ—¶å†…ï¼Œç¥¨åŠ¡ç½‘ç«™è¢«æµè§ˆæ¬¡æ•°è¾¾åˆ°<font style="color:red">2000ä¸‡æ¬¡</font>ã€‚  </p><h4 id="ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™"><a href="#ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™" class="headerlink" title="ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™"></a>ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™</h4><p>æ˜¥è¿ï¼Œåˆ‡è‚¤ä¹‹ç—›ï¼ˆä¸€èˆ¬ä¸¤ç§çŠ¶æ€ï¼šæ­£åœ¨èµ°å‘å´©æºƒçš„è·¯ä¸Šorå´©æºƒï¼‰ï¼š <strong>ç›˜ç‚¹12306ï¼š ä¸€ä¸ªæ€»åœ¨â€œå´©æºƒä¸­â€çš„ç¥å¥‡ç½‘ç«™</strong><br><strong>æ·˜å®å´©å®Œ12306å´© è¿ç€4å¤©ï¼Œæ¯å¤©éƒ½æœ‰å¹³å°å´©æºƒâ€¦..</strong>  </p><p>å¯¹åº”çš„é—®é¢˜ç‚¹éƒ½æ˜¯è®¿é—®é‡æ¯”è¾ƒå¤§ï¼›  </p><h4 id="å¤§å‹ç¿»è½¦ç°åœº"><a href="#å¤§å‹ç¿»è½¦ç°åœº" class="headerlink" title="å¤§å‹ç¿»è½¦ç°åœº"></a>å¤§å‹ç¿»è½¦ç°åœº</h4><p><strong>äº¬ä¸œä¿ƒé”€çˆ†æœåŠ¡å™¨ åˆ˜å¼ºä¸œï¼šå†æä¸€æ¬¡</strong></p><ul><li>äººå‘˜è¿‡å¤š</li><li>è®¿é—®é‡æ¯”è¾ƒå¤§</li><li>æµé‡è¿‡å¤§</li></ul><h4 id="é—®é¢˜ç°è±¡"><a href="#é—®é¢˜ç°è±¡" class="headerlink" title="é—®é¢˜ç°è±¡"></a>é—®é¢˜ç°è±¡</h4><p><strong>è¡¨å±‚ç°è±¡</strong></p><ul><li><strong>æµ·é‡ç”¨æˆ·</strong></li><li><strong>é«˜å¹¶å‘</strong>ï¼ˆæ‰€æœ‰äººä¸€å—è¿›æ¥è®¿é—®ç½‘ç«™ï¼Œç½‘ç«™æ‰›ä¸ä½ï¼‰</li></ul><p><strong>æ ¸å¿ƒé—®é¢˜</strong></p><h4 id="ç½ªé­ç¥¸é¦–â€”â€“å…³ç³»å‹æ•°æ®åº“"><a href="#ç½ªé­ç¥¸é¦–â€”â€“å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="ç½ªé­ç¥¸é¦–â€”â€“å…³ç³»å‹æ•°æ®åº“"></a>ç½ªé­ç¥¸é¦–â€”â€“å…³ç³»å‹æ•°æ®åº“</h4><p>æ•°æ®è®¿é—®ä¸­å½±å“å› ç´ ï¼š  </p><ul><li><strong>æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹</strong><ul><li>æ•°æ®åº“æ˜¯ä¿å­˜åœ¨ç£ç›˜ä¸Šçš„ï¼Œè€Œç£ç›˜çš„IOæ€§èƒ½ä¹Ÿå°±æ˜¯è¯»å†™æ€§èƒ½ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½ä¸‹ï¼›</li><li>CPUçš„æ•°æ®äº¤æ¢æ˜¯å’Œé«˜é€Ÿç¼“å­˜Cacheæ¥åšï¼›</li><li>Cacheçš„æ•°æ®äº¤æ¢å’Œå†…å­˜åšï¼›</li><li>å†…å­˜çš„æ•°æ®äº¤æ¢å’Œç¡¬ç›˜åšï¼›</li><li>æä¾›åŸºç¡€æ•°æ®çš„è¿™äº›ä¿¡æ¯åœ¨ç¡¬ç›˜ä¸Šå­˜å‚¨ï¼›è€Œä¸”æ˜¯ä¸€å±‚ä¸€å±‚çš„å¾€ä¸Šè¿›è¡Œä¼ é€’ï¼›å¯¼è‡´æ€§èƒ½ä½ä¸‹ï¼›</li></ul></li><li><strong>æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤</strong><ul><li>æ•°æ®åº“ä¸­æ•°æ®çš„å­˜å‚¨æ ¼å¼ï¼›</li><li>æ•°æ®åº“ä¸ä»…ä»…å­˜å‚¨æ•°æ®ï¼›æ›´å¤šçš„è¿˜éœ€è¦è¿›è¡Œæè¿°æ•°æ®å…³ç³»ï¼ˆè¡¨ä¸è¡¨ä¹‹é—´çš„å¤šå…³è”ï¼‰ï¼›ï¼ˆå‘ˆç°ç½‘çŠ¶å…³è”ï¼Œå‰åäº¤å‰ï¼Œé”™ç»¼å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼‰</li></ul></li></ul><h4 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h4><h5 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h5><ul><li>é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ï¼ˆé’ˆå¯¹IOæ€§èƒ½å·®ï¼‰ â€”â€”- å†…å­˜å­˜å‚¨</li><li>å»é™¤æ•°æ®é—´å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ â€”â€”â€“ ä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®</li></ul><p>NoSQL: å³ <strong>Not-Only SQL</strong> ï¼ˆ<strong>æ³›æŒ‡</strong>éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œï¼ˆ<strong>å®šä½</strong>ï¼‰ä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„<strong>è¡¥å……</strong>ï¼›<br>ï¼ˆ<br>æ•°æ®è¿˜æ˜¯å¾—å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œ<br>ä¸èƒ½å°†å…¨éƒ¨çš„æ•°æ®ç§»åˆ°å†…å­˜å½“ä¸­å»ï¼›<br>å†…å­˜å½“ä¸­çš„æ•°æ®è¿˜æ˜¯ä»ç¡¬ç›˜å½“ä¸­æ¥ï¼›<br>æ‰€ä»¥NoSQLçš„å®šä½æ˜¯è¡¥å……ï¼›<br>ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Not</span> <span class="string">ä¸ï¼›  </span></span><br><span class="line"><span class="attr">Only</span> <span class="string">ä»…ä»…ï¼›åªæ˜¯ï¼›  </span></span><br><span class="line"><span class="attr">Not</span> <span class="string">Only ä¸ä»…ä»…ï¼Œä¸åªæ˜¯ï¼›</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæŒ‡å‘çš„å³ä¸ºåšäº‹æƒ…ä¸èƒ½å¤Ÿä»…ä»…åªç”¨SQLï¼›ä¸æ•°æ®å­˜å‚¨è®¿é—®çš„ç±»ä¼¼çš„<strong>æ³›æŒ‡</strong>ç§°ä½œæ˜¯NoSQLï¼›  </p><p>ä½œç”¨ï¼š åº”å¯¹åŸºäº<strong>æµ·é‡ç”¨æˆ·</strong>å’Œæµ·é‡æ•°æ®å‰æä¸‹çš„æ•°æ®å¤„ç†é—®é¢˜ï¼ˆ<strong>é«˜å¹¶å‘</strong>ï¼‰ï¼›</p><p>é’ˆå¯¹çš„æ˜¯å¤§é‡ç”¨æˆ·å¯¹å¤§é‡æ•°æ®è®¿é—®å‡ºç°çš„ä¸€ä¸ªé›†ä¸­çš„å¤§é‡è®¿é—®ä»è€Œå‡ºç°çš„é—®é¢˜ï¼›<br>å°‘é‡æ•°æ®å°‘é‡ç”¨æˆ·ä¾æ—§å¯ä»¥ä½¿ç”¨ä½†æ˜¯æœªå…æœ‰ç‚¹æ€é¸¡ç„‰ç”¨ç‰›åˆ€çš„æ„æ€ï¼›  </p><p>æ‰€ä»¥ä¸€å®šå¾—å®šä¹‰å¥½NoSQLæ˜¯ç”¨æ¥å¹²å˜›çš„ï¼›å®ƒæ˜¯å¯¹äºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……èµ·åˆ°è¯¥åšç”¨ï¼›  </p><p><strong>NoSQLç‰¹å¾</strong>ï¼š<br>ï¼ˆç‰¹å¾éƒ½æ˜¯ç›¸å¯¹çš„ï¼›æ²¡æœ‰ç»å¯¹çš„ç‰¹å¾ï¼›å…´è®¸å†è¿‡å‡ å¹´å°±æ˜¯æ™®éæ€§çš„ä¸€ä¸ªç‰¹ç‚¹äº†ï¼‰</p><ul><li><strong>å¯æ‰©å®¹ï¼Œå¯ä¼¸ç¼©</strong>ï¼›</li><li><strong>å¤§æ•°æ®</strong>é‡ä¸‹<strong>é«˜æ€§èƒ½</strong></li><li><strong>çµæ´»</strong>çš„<strong>æ•°æ®ç±»å‹</strong>ï¼ˆèƒ½å…¼å®¹æ•°æ®åº“ä¸­çš„æ•°æ®ï¼‰</li><li><strong>é«˜å¯ç”¨</strong>ï¼ˆä¸<strong>é›†ç¾¤</strong>ç›¸å…³è¿›è¡Œäº†è§£ï¼‰</li></ul><h5 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h5><p>å¸¸è§çš„<strong>NoSQLæ•°æ®åº“</strong>è§£å†³æ–¹æ¡ˆï¼š  </p><ul><li><font style="color:red;font-weight:bolder;">Redis</font></li><li>memcache</li><li>HBase</li><li>MongoDB</li></ul><p>å·²ç»åœ¨å¸‚åœºä¸Šå­˜ç•™äº†ä¸€å®šæ—¶é—´äº†ï¼›å¹¶ä¸æ˜¯æ–°å‡ºæ¥çš„è¿™æ ·ä¸€ç§æŠ€æœ¯ï¼›<br>é’ˆå¯¹çš„ä¸åŒåœºæ™¯ï¼›æ‰€ä½“ç°çš„ä»·å€¼ä¸ä¸€æ ·ï¼›  </p><h5 id="è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ä¸ºä¾‹ï¼‰"><a href="#è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ä¸ºä¾‹ï¼‰" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ä¸ºä¾‹ï¼‰"></a>è§£å†³æ–¹æ¡ˆï¼ˆç”µå•†åœºæ™¯ä¸ºä¾‹ï¼‰</h5><p><strong>MySQL</strong>  </p><ol><li>å•†å“åŸºæœ¬ä¿¡æ¯</li></ol><ul><li>åç§°</li><li>ä»·æ ¼</li><li>å‚å•†</li></ul><p><strong>MongoDB</strong>  </p><p>é«˜é€Ÿå¤„ç†ï¼Œä¸“ç”¨ä½œæ–‡æ¡£å¤„ç†çš„åœ°æ–¹ï¼›  </p><ol start="2"><li>å•†å“é™„åŠ ä¿¡æ¯</li></ol><ul><li>æè¿°</li><li>è¯¦æƒ…</li><li>è¯„è®º</li></ul><p><strong>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</strong></p><ol start="3"><li>å›¾ç‰‡ä¿¡æ¯</li></ol><p><strong>ESã€Luceneã€solr</strong></p><ol start="4"><li>æœç´¢å…³é”®å­—</li></ol><p><strong>Redisã€memcacheã€tair</strong>  </p><ol start="5"><li><strong>çƒ­ç‚¹</strong>ä¿¡æ¯(<strong>è®¿é—®æ€§è¾ƒé«˜</strong>)</li></ol><ul><li><strong>é«˜é¢‘</strong></li><li><strong>æ³¢æ®µæ€§</strong></li></ul><p>Redisæ‰€å¤„ä½ç½®ï¼š  </p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">ï¼ˆå•†å“è¯„ä»·ä¿¡æ¯ï¼‰|<span class="string">  </span>|<span class="string">        ï¼ˆçƒ­ç‚¹ä¿¡æ¯å­˜å‚¨ï¼‰</span>|<span class="string">  </span>|<span class="string">              </span>|<span class="string">    ï¼ˆæœç´¢å…³é”®å­—åŠå…¨æ–‡æ£€ç´¢ï¼‰</span>|<span class="string">  </span>|<span class="string">                         </span>|<span class="string"> </span>|<span class="string">ï¼ˆå•†å“å›¾ç‰‡ï¼‰</span></span><br><span class="line"><span class="string">-----------------------    ----------------------           </span>|<span class="string">                -----------------------          ----------------------</span></span><br><span class="line">|<span class="string"> MongoDBé›†ç¾¤ï¼ˆæ–‡æ¡£ï¼‰ </span>|<span class="string">     </span>|<span class="string"> Redisé›†ç¾¤ï¼ˆç¼“å­˜ï¼‰ </span>|<span class="string">            </span>|<span class="string">                </span>|<span class="string"> Solré›†ç¾¤ï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰</span>|<span class="string">           </span>|<span class="string"> FastDFSé›†ç¾¤ï¼ˆå›¾ç‰‡ï¼‰</span>|</span><br><span class="line">-----------------------    ----------------------           |<span class="string">                -----------------------          ----------------------</span></span><br><span class="line"><span class="string">-------------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">-------------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="string">    </span>|<span class="string">              </span>|<span class="string">              </span>|<span class="string">              </span>|<span class="string">              </span>|<span class="string">              </span>|</span><br><span class="line">---------      ---------      ---------      ---------      ---------      ---------</span><br><span class="line">|<span class="string"> MySQL </span>|<span class="string">      </span>|<span class="string"> MySQL </span>|<span class="string">      </span>|<span class="string"> MySQL </span>|<span class="string">      </span>|<span class="string"> MySQL </span>|<span class="string">      </span>|<span class="string"> MySQL </span>|<span class="string">      </span>|<span class="string"> MySQL </span>|</span><br><span class="line">---------      ---------      ---------      ---------      ---------      ---------</span><br><span class="line">                                      åŸºæœ¬ä¿¡æ¯å­˜å‚¨</span><br></pre></td></tr></table></figure><h3 id="rediså…¥é—¨-redisç®€ä»‹"><a href="#rediså…¥é—¨-redisç®€ä»‹" class="headerlink" title="rediså…¥é—¨-redisç®€ä»‹"></a>rediså…¥é—¨-redisç®€ä»‹</h3><p>æ¦‚å¿µï¼š<font style="color:red;font-weight:bolder;">Redisï¼ˆRemote Dictionary Serverï¼‰</font>æ˜¯ç”¨<strong>Cè¯­è¨€</strong>å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½<font style="color:red;font-weight:bolder;">é”®å€¼å¯¹ï¼ˆkey-valueï¼‰</font>æ•°æ®åº“ã€‚  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Remote è¿œç¨‹ï¼›  </span><br><span class="line">Dictionary å­—å…¸ï¼›ï¼ˆæä¾›åŠŸèƒ½ï¼‰  </span><br><span class="line">Server æœåŠ¡ï¼›</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºJavaå½“ä¸­çš„ä¸€ç§ç»“æ„ã€å­˜å‚¨æ¨¡å‹Mapï¼›<br>æ¯”å¦‚è¯´åå­—å¯¹åº”äººï¼›<br>ï¼ˆä½†æ˜¯å¥½åƒä¸å¤ªé€‚åˆï¼Œèº«ä»½è¯å·å¯¹åº”äººå¯èƒ½è¿˜å¥½ä¸€ç‚¹ï¼‰<br>è¿™å°±å±äºä¸€ä¸ªé”®å€¼å¯¹ï¼›<br>Rediså°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ•°æ®åº“ï¼›<br>Rediså½“ä¸­å­˜æ”¾çš„æ•°æ®å°±æ˜¯ä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼è¿™æ ·å­ï¼›<br>ä¸åƒæ¥è§¦çš„MySQLæ•°æ®åº“ï¼›ï¼ˆæ•°æ®åº“ã€æ•°æ®è¡¨ã€è®°å½•è¡Œã€å€¼ï¼‰ï¼›<br>è€ŒRedisæ˜¯ä¸€ä¸ªé”®åˆ™å¯¹åº”ä¸€ä¸ªå–å€¼ï¼›è¿™ä¹Ÿæ˜¯å…¶æ€§èƒ½é«˜çš„ä¸€ä¸ªåŸå› ï¼›ï¼ˆä¸€ä¸ªåç§°å¯¹åº”ä¸€ä¸ªå€¼ï¼‰  </p><p>äº†è§£äº†Redisæ˜¯ä»€ä¹ˆä¹‹åä¸‹é¢å°±æ¥è¯´è¯´Redisçš„ç‰¹å¾äº†ï¼›  </p><h4 id="ç‰¹å¾"><a href="#ç‰¹å¾" class="headerlink" title="ç‰¹å¾"></a>ç‰¹å¾</h4><ol><li>æ•°æ®é—´<strong>æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»</strong>ï¼ˆä¹Ÿç®—æ˜¯å…³ç³»å‹æ•°æ®åº“çš„å¼±åŠ¿ï¼‰</li><li>å†…éƒ¨é‡‡ç”¨<strong>å•çº¿ç¨‹</strong>æœºåˆ¶è¿›è¡Œå·¥ä½œï¼ˆä¸ä¼šæ‰‹è„‘å¹¶ç”¨ï¼Œæ“ä½œåŸå­æ€§å¼ºå°±èƒ½ä¿è¯å¾ˆå¤šå®‰å…¨æ€§çš„ä¸œè¥¿ï¼‰</li><li><strong>é«˜æ€§èƒ½</strong>ã€‚å®˜æ–¹æä¾›æµ‹è¯•æ•°æ®ï¼Œ50ä¸ªå¹¶å‘æ‰§è¡Œ 100 000 ä¸ªè¯·æ±‚ï¼Œè¯»çš„é€Ÿåº¦æ˜¯110000 æ¬¡/s ï¼Œ å†™çš„é€Ÿåº¦æ˜¯ 81000 æ¬¡/sã€‚</li><li><strong>å¤šæ•°æ®ç±»å‹</strong>æ”¯æŒ</li></ol><ul><li><strong>å­—ç¬¦ä¸²</strong>ç±»å‹ <strong>string</strong></li><li><strong>åˆ—è¡¨</strong>ç±»å‹ <strong>list</strong></li><li><strong>æ•£åˆ—</strong>ç±»å‹ <strong>hash</strong></li><li><strong>é›†åˆ</strong>ç±»å‹ <strong>set</strong></li><li><strong>æœ‰åºé›†åˆ</strong>ç±»å‹ <strong>sorted_set</strong></li></ul><ol start="5"><li><strong>æŒä¹…åŒ–</strong>æ”¯æŒã€‚å¯ä»¥è¿›è¡Œ<strong>æ•°æ®ç¾éš¾æ¢å¤</strong>ï¼ˆæ•°æ®åœ¨å†…å­˜å½“ä¸­è¿›è¡Œå­˜å‚¨ï¼Œå¿…å®šä¼šæœ‰çŸ­ç”µçš„æƒ…å†µï¼Œä¸‡ä¸€åœ¨å†…å­˜ä¸­å­˜å‚¨çš„æŸäº›é‡è¦æ•°æ®ä¸€æ—¦æ²¡äº†å¯å’‹åŠï¼›è¿™å°±å¾ˆå°´å°¬äº†ï¼›æ‰€ä»¥åšäº†ä¸ªæ•°æ®ç¾éš¾æ¢å¤å¤„ç†ï¼‰  </li></ol><h4 id="Redisçš„åº”ç”¨"><a href="#Redisçš„åº”ç”¨" class="headerlink" title="Redisçš„åº”ç”¨"></a>Redisçš„åº”ç”¨</h4><ul><li>ä¸º<strong>çƒ­ç‚¹æ•°æ®åŠ é€ŸæŸ¥è¯¢</strong>ï¼ˆä¸»è¦åœºæ™¯ï¼‰ï¼Œå¦‚çƒ­ç‚¹å•†å“ã€çƒ­ç‚¹æ–°é—»ã€çƒ­ç‚¹èµ„è®¯ã€æ¨å¹¿ç­‰é«˜è®¿é—®é‡ä¿¡æ¯ç­‰ï¼›ï¼ˆè¿™ä¸ªæ•°æ®å¿…ç„¶æˆä¸ºçƒ­ç‚¹ï¼‰  </li><li><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼Œå¦‚ç§’æ€ã€æŠ¢è´­ã€è´­ç¥¨æ’é˜Ÿç­‰ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li><li><strong>å³æ—¶ä¿¡æ¯æŸ¥è¯¢</strong>ï¼Œå¦‚ä¸ªä½æ’è¡Œæ¦œã€å„ç±»ç½‘ç«™è®¿é—®ç»Ÿè®¡ã€å…¬äº¤åˆ°ç«™ä¿¡æ¯ã€åœ¨çº¿äººæ•°ä¿¡æ¯ï¼ˆèŠå¤©å®¤ã€ç½‘ç«™ï¼‰ã€è®¾å¤‡ä¿¡å·ç­‰ï¼›ï¼ˆåˆ·æ–°é€Ÿåº¦å¿«ï¼ŒåŒ…æ‹¬ç¼“å­˜ç­‰æŠ€æœ¯ï¼Œä¿è¯å…¶å®æ—¶æ€§ï¼›ï¼‰</li><li><strong>æ—¶æ•ˆæ€§ä¿¡æ¯æ§åˆ¶</strong>ï¼Œå¦‚éªŒè¯ç æ§åˆ¶ï¼ˆ5åˆ†é’Ÿã€30åˆ†é’Ÿæœ‰æ•ˆç­‰ï¼‰ã€æŠ•ç¥¨æ§åˆ¶ç­‰ï¼›ï¼ˆæ—¶æ•ˆæ€§å¯ä»¥ä½¿ç”¨redisåšæ§åˆ¶ï¼‰</li><li><strong>åˆ†å¸ƒå¼æ•°æ®å…±äº«</strong>ï¼Œå¦‚åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„sessionåˆ†ç¦»</li><li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong></li><li><strong>åˆ†å¸ƒå¼é”</strong></li></ul><h3 id="rediså…¥é—¨-redisä¸‹è½½å®‰è£…ä¸æœåŠ¡å¯åŠ¨"><a href="#rediså…¥é—¨-redisä¸‹è½½å®‰è£…ä¸æœåŠ¡å¯åŠ¨" class="headerlink" title="rediså…¥é—¨-redisä¸‹è½½å®‰è£…ä¸æœåŠ¡å¯åŠ¨"></a>rediså…¥é—¨-redisä¸‹è½½å®‰è£…ä¸æœåŠ¡å¯åŠ¨</h3><p>ç›®å½•ï¼š  </p><ul><li>Redisç®€ä»‹</li><li><font style="color:red;">Redisçš„ä¸‹è½½ä¸å®‰è£…</font></li><li>Redisçš„åŸºæœ¬æ“ä½œ</li></ul><h4 id="Redis-çš„ä¸‹è½½"><a href="#Redis-çš„ä¸‹è½½" class="headerlink" title="Redis çš„ä¸‹è½½"></a>Redis çš„ä¸‹è½½</h4><ul><li>Linuxï¼ˆé€‚ç”¨äºä¼ä¸šåŠå¼€å‘ï¼‰<ul><li>Redisé«˜çº§å¼€å§‹ä½¿ç”¨</li><li>ä»¥4.0ç‰ˆæœ¬ä½œä¸ºä¸»ç‰ˆæœ¬</li></ul></li><li>Windowsç‰ˆæœ¬ï¼ˆé€‚åˆé›¶åŸºç¡€å­¦ä¹ ï¼‰<ul><li>Rediså…¥é—¨ä½¿ç”¨</li><li>ä»¥3.2ç‰ˆæœ¬ä¸ºä¸»ç‰ˆæœ¬</li><li>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/MSOpenTech/redis/tags" target="_blank" rel="noopener">https://github.com/MSOpenTech/redis/tags</a></li><li>é€‰æ‹©æ­¤ç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100" target="_blank" rel="noopener">https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100</a></li><li>ä¸‹è½½ç±»å‹ï¼š<a href="https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100" target="_blank" rel="noopener">https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100</a></li></ul></li></ul><p>Rediså®‰è£…ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«ç®€å•ï¼›ç»¿è‰²ç‰ˆè½¯ä»¶ï¼›è§£å‹ç¼©ä¸‹å³å¯ï¼›  </p><ul><li>é…ç½®ç›¸å…³<ul><li>redis.windows.conf</li><li>redis.windows-service.conf</li></ul></li><li>æ–‡æ¡£(è¯´æ˜æ€§å†…å®¹)<ul><li>Redis on Windows RElease Note.docx</li><li>Redis on Windows.docx</li><li>Windows Service Documentation.docx</li></ul></li><li>ä¸»è¦çœ‹çš„æ–‡ä»¶ï¼ˆexeæ–‡ä»¶ï¼‰<ul><li>redis-benchmark.exe<ul><li>redis-benchmark.exeç”¨äºæ¥åšæ€§èƒ½æµ‹è¯•ä½¿ç”¨</li></ul></li><li>redis-check-aof.exe<ul><li>ä½œç”¨ï¼šredis-check-aof.exeç”¨äºåšæŒä¹…åŒ–ä½¿ç”¨</li></ul></li><li>redis-cli.exe<ul><li>å…¨ç§°redis-clientï¼›</li></ul></li><li>redis-server.exe<ul><li>å¯åŠ¨redisçš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼›</li><li>å¯åŠ¨å®Œäº†ä¹‹åå°±ç›¸å½“äºmysqlå¯äº†ä¸€ä¸ªæœåŠ¡å™¨ç±»ä¼¼ï¼›</li><li>ä½†æ˜¯å¦‚æœæ˜¯éœ€è¦å»æ“ä½œè¿™ä¸ªredisæ•°æ®åº“å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯å¦å¤–ä¸€ä¸ªexeå¯æ‰§è¡Œæ–‡ä»¶redis-cli.exe</li></ul></li></ul></li><li>ç›®å‰ä½¿ç”¨å¾—åˆ°çš„å³redis-server.exeä»¥åŠredis-cli.exe</li></ul><p>ä½¿ç”¨å³ï¼š<strong>åŒå‡»è¿è¡Œredis-server.exe</strong> æ–‡ä»¶å³å¯ï¼›  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># è¿›ç¨‹å·ä»¥åŠå½“å‰å¯åŠ¨çš„æ—¶é—´ï¼›</span><br><span class="line">[<span class="number">2460</span>] <span class="number">24</span> Sep <span class="number">13</span>:<span class="number">11</span>:<span class="number">03.987</span></span><br><span class="line"></span><br><span class="line"># è­¦å‘Šæ²¡æœ‰æŒ‡å®šé…ç½®æ–‡ä»¶ï¼›å½“å‰ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„é…ç½®æ–‡ä»¶</span><br><span class="line"># Warning: no config file specified, using the <span class="keyword">default</span> config.</span><br><span class="line"></span><br><span class="line"># ä¸ºäº†æŒ‡å®šé…ç½®æ–‡ä»¶æ‰€ä½¿ç”¨çš„çš„é…ç½®æ–‡ä»¶ä½ç½®</span><br><span class="line"># In order to specify a config file use F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>\redis-server.exe /path/to/redis.conf</span><br><span class="line"></span><br><span class="line"># redisç‰ˆæœ¬ ä»¥åŠemm å¤šå°‘ä½çš„æ˜¯</span><br><span class="line">Redis <span class="number">3.2</span><span class="number">.100</span> (<span class="number">00000000</span>/<span class="number">0</span>) <span class="number">64</span> bit</span><br><span class="line"></span><br><span class="line"># rediså½“å‰çš„ç«¯å£å·ï¼ˆrediså¯¹å¤–æä¾›æœåŠ¡ï¼Œæ‰€ä½¿ç”¨çš„çš„ç«¯å£å·æ˜¯<span class="number">6379</span>ï¼›ipåœ°å€å³æœ¬æœº<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="keyword">or</span> localhostï¼‰</span><br><span class="line">Port: <span class="number">6379</span></span><br><span class="line"></span><br><span class="line"># rediså½“å‰æ‰€å¯åŠ¨æ—¶çš„è¿›ç¨‹ process idå·</span><br><span class="line"># æ¯å¯åŠ¨ä¸€ä¸ªredisæœåŠ¡å°±ç›¸å½“äºæ˜¯ Redis redis=new Redis(); newäº†ä¸€ä¸ªRediså¯¹è±¡ä¸€æ ·</span><br><span class="line"># é‚£ä¹ˆä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªå®ä¾‹ï¼›é‚£ä¹ˆè¿™ä¸ªPIDå¯ä»¥è¯´æ˜¯è¿™ä¸ªå®ä¾‹çš„ID</span><br><span class="line"># æµ‹è¯•ï¼šå°†å½“å‰çš„è¿™ä¸ªåŒå‡»å‡ºæ¥çš„redis-server.exeè¿›è¡Œå…³é—­ï¼Œé‡æ–°åŒå‡»redis-server.exeæ—¶ä¼šå‘ç° PIDä¼šå‘ç”Ÿæ”¹å˜ä¸º<span class="number">13028</span>æˆ–è€…æ˜¯å…¶ä»–çš„æ•°å€¼</span><br><span class="line"># å¦‚æœæƒ³è¦æœ‰ä¸¤ä¸ªredis-serverçš„æœåŠ¡å¦‚ä½•å¤„ç†ï¼›åŒå‡»ä¸€æ¬¡redis-serverå†åŒå‡»ä¸€æ¬¡æ˜¯æ²¡æœ‰ç”¨çš„ï¼›è¿™æ ·çš„åšæ³•å¯¼è‡´çš„ç»“æœæ˜¯ç¬¬äºŒæ¬¡åŒå‡»çš„æ—¶å€™ä¼šå‡ºç°é—ªé€€ç°è±¡åŸå› å°±æ˜¯ç«¯å£<span class="number">6379</span>è¢«å ï¼›å³å› ä¸ºå·²ç»å­˜åœ¨äº†ä¸€ä¸ªredisæœåŠ¡äº†ï¼Œè€Œå­˜åœ¨çš„è¯¥redisæœåŠ¡çš„ç«¯å£å·æ˜¯<span class="number">6379</span></span><br><span class="line"># è¿™ä¸ªæ—¶å€™å°±è¦å»å¦å¤–ç”Ÿæˆä¸€ä¸ªredis.conf é…ç½®æ–‡ä»¶ï¼›ä¿®æ”¹å…¶ç«¯å£ä¸ºå…¶ä»–çš„å€¼ï¼›ä¸æœ¬æœºä¸Šç«¯å£å·æ•°å€¼ä¸å†²çªçš„ä¸€ä¸ªå€¼</span><br><span class="line"></span><br><span class="line">PID: <span class="number">2460</span></span><br><span class="line"></span><br><span class="line">      http:<span class="comment">//redis.io</span></span><br><span class="line"></span><br><span class="line"># ä»¥ä¸‹ä¸ºredisæœåŠ¡ç«¯çš„æ‰§è¡Œæ—¥å¿—</span><br><span class="line"># å›å¤´å»æ“ä½œäº†redis-cli.exeï¼›é‚£ä¹ˆå°±å°†ä¼šåœ¨redis-server.exeè¯¥cmdæ‰“æœåŠ¡ç«¯æ—¥å¿—ï¼›å“å‘€ï¼›å°±æ˜¯ä¸€ä¸ªæœåŠ¡ç«¯åå°ï¼›redis-cli.exeå°±æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯åˆ«çº ç»“äº†ï¼›</span><br><span class="line">[<span class="number">13028</span>] <span class="number">24</span> Sep <span class="number">13</span>:<span class="number">11</span>:<span class="number">59</span>:<span class="number">345</span> # Server started. Redis version <span class="number">3.2</span><span class="number">.100</span></span><br><span class="line">[<span class="number">13028</span>] <span class="number">24</span> Sep <span class="number">13</span>:<span class="number">11</span>:<span class="number">59.345</span> * The server <span class="keyword">is</span> now ready to accept connections on port <span class="number">6379</span></span><br></pre></td></tr></table></figure><p>redisçš„å®¢æˆ·ç«¯ï¼Œ<strong>åŒå‡»è¿è¡Œredis-cli.exe</strong> æ–‡ä»¶å³å¯ï¼›ï¼ˆåœ¨æ­¤å¤„å°±èƒ½å¤Ÿå»æ“ä½œè¿æ¥æœåŠ¡ç«¯ï¼Œæ“ä½œçš„æ–¹å¼æ˜¯å‘½ä»¤è¡Œå¼çš„ï¼‰  </p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0.0.1:6379</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…Redis"><a href="#å®‰è£…Redis" class="headerlink" title="å®‰è£…Redis"></a>å®‰è£…Redis</h4><p>æ ¸å¿ƒæ–‡ä»¶ï¼š  </p><ul><li>redis-server.exe æœåŠ¡å™¨å¯åŠ¨å‘½ä»¤</li><li>redis-cli.exe å‘½ä»¤è¡Œå®¢æˆ·ç«¯</li><li>redis.windows.conf redisæ ¸å¿ƒé…ç½®æ–‡ä»¶</li><li>redis-benchmark.exe æ€§èƒ½æµ‹è¯•å·¥å…·</li><li>redis-check-aof.exe AOFæ–‡ä»¶ä¿®å¤å·¥å…·</li><li>redis-check-dump.exe RDBæ–‡ä»¶æ£€æŸ¥å·¥å…·ï¼ˆå¿«ç…§æŒä¹…åŒ–æ–‡ä»¶ï¼‰</li></ul><h4 id="å¯åŠ¨Redis"><a href="#å¯åŠ¨Redis" class="headerlink" title="å¯åŠ¨Redis"></a>å¯åŠ¨Redis</h4><p>æœåŠ¡å™¨å¯åŠ¨ä½¿ç”¨redis-server.exe<br>å®¢æˆ·ç«¯è¿æ¥ä½¿ç”¨redis-cli.exe  </p><p>æˆ–è€…é€šè¿‡CMD å‘½ä»¤æç¤ºç¬¦æ¥è¿›è¡Œå¯åŠ¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼›<br>windows+rè°ƒèµ·CMDï¼›</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\ASUS&gt;f:</span><br><span class="line"></span><br><span class="line">F:\&gt;cd Redis</span><br><span class="line"></span><br><span class="line">F:\Redis&gt;cd Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span></span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„å­ç›®å½•</span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;dir</span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;redis-server</span><br><span class="line"></span><br><span class="line">--------------------------------------------</span><br><span class="line"></span><br><span class="line"># å†è°ƒèµ·ä¸€ä¸ªCMDå‘½ä»¤æç¤ºç¬¦ shellç«¯</span><br><span class="line">C:\Users\ASUS&gt;f:</span><br><span class="line"></span><br><span class="line">F:\&gt;cd Redis</span><br><span class="line"></span><br><span class="line">F:\Redis&gt;cd Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span></span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„å­ç›®å½•</span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;dir</span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;redis-cli</span><br></pre></td></tr></table></figure><h3 id="rediså…¥é—¨-redisåŸºç¡€æ“ä½œ"><a href="#rediså…¥é—¨-redisåŸºç¡€æ“ä½œ" class="headerlink" title="rediså…¥é—¨-redisåŸºç¡€æ“ä½œ"></a>rediså…¥é—¨-redisåŸºç¡€æ“ä½œ</h3><p>ç›®å½•Contents:  </p><ul><li>Redisç®€ä»‹</li><li>Redisçš„ä¸‹è½½ä¸å®‰è£…</li><li>Redisçš„åŸºæœ¬æ“ä½œ</li></ul><h4 id="å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ"><a href="#å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ" class="headerlink" title="å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ"></a>å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ</h4><ul><li>åŠŸèƒ½æ€§å‘½ä»¤</li><li>æ¸…é™¤å±å¹•ä¿¡æ¯</li><li>å¸®åŠ©ä¿¡æ¯æŸ¥é˜…</li><li>é€€å‡ºæŒ‡ä»¤</li></ul><p>redis-å­˜æ”¾æ•°æ®(ç”¨äºå®¢æˆ·ç«¯æ“ä½œæŒ‡ä»¤)  </p><h5 id="ä¿¡æ¯æ·»åŠ -å¾€é‡Œæ”¾"><a href="#ä¿¡æ¯æ·»åŠ -å¾€é‡Œæ”¾" class="headerlink" title="ä¿¡æ¯æ·»åŠ (å¾€é‡Œæ”¾)"></a>ä¿¡æ¯æ·»åŠ (å¾€é‡Œæ”¾)</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> key <span class="built_in">value</span> [EX <span class="built_in">seconds</span>] [PX <span class="built_in">milliseconds</span>] [NX|XX]</span><br></pre></td></tr></table></figure><ul><li>åŠŸèƒ½<blockquote><p>è®¾ç½® keyï¼Œvalue æ•°æ®</p></blockquote></li><li>å‘½ä»¤<blockquote><p><strong>set</strong> key value</p></blockquote></li><li>èŒƒä¾‹<blockquote><p>set name laowang</p></blockquote></li></ul><h5 id="ä¿¡æ¯æŸ¥è¯¢-å¾€å¤–å–"><a href="#ä¿¡æ¯æŸ¥è¯¢-å¾€å¤–å–" class="headerlink" title="ä¿¡æ¯æŸ¥è¯¢(å¾€å¤–å–)"></a>ä¿¡æ¯æŸ¥è¯¢(å¾€å¤–å–)</h5><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">get</span> <span class="built_in">key</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼›å¦‚æœ key ä¸å­˜åœ¨ï¼Œå°†è¿”å› nil(ç©º)  </p><ul><li>åŠŸèƒ½<blockquote><p>æ ¹æ® key æŸ¥è¯¢å¯¹åº”çš„ valueï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›ç©ºï¼ˆnilï¼‰</p></blockquote></li><li>å‘½ä»¤<blockquote><p><strong>get</strong> key</p></blockquote></li><li>èŒƒä¾‹<blockquote><p>get name</p></blockquote></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">F:\&gt;cd Redis</span><br><span class="line"></span><br><span class="line">F:\Redis&gt;cd Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span></span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;redis-cli</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">set</span> name laowang</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> name</span><br><span class="line"><span class="string">"laowang"</span></span><br><span class="line"></span><br><span class="line"># å–ä¸€ä¸ªä¸å­˜åœ¨çš„key</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> names</span><br><span class="line">(nil)</span><br><span class="line"></span><br><span class="line"># åœ¨rediså½“ä¸­è¿›è¡Œæ¸…é™¤å±å¹•æŒ‡ä»¤</span><br><span class="line">clear</span><br><span class="line"># åœ¨windowsï¼Œå³cmdä¸‹ä½¿ç”¨ cls è¿›è¡Œæ¸…å±</span><br></pre></td></tr></table></figure><h5 id="æ¸…é™¤å±å¹•ä¿¡æ¯"><a href="#æ¸…é™¤å±å¹•ä¿¡æ¯" class="headerlink" title="æ¸…é™¤å±å¹•ä¿¡æ¯"></a>æ¸…é™¤å±å¹•ä¿¡æ¯</h5><ul><li>åŠŸèƒ½<blockquote><p>æ¸…é™¤å±å¹•ä¸­çš„ä¿¡æ¯</p></blockquote></li><li>å‘½ä»¤<blockquote><p>clear</p></blockquote></li></ul><h5 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h5><ul><li>åŠŸèƒ½<blockquote><p>è·å–å‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼Œè·å–ç»„ä¸­æ‰€æœ‰å‘½ä»¤ä¿¡æ¯åç§°</p></blockquote></li><li>å‘½ä»¤<blockquote><p>help å‘½ä»¤å<br>  help @ç»„å</p></blockquote></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"># å¦‚æœæƒ³è¦çœ‹ <span class="keyword">set</span> æŒ‡ä»¤å¦‚ä½•ä½¿ç”¨åˆ™è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¡Œ</span><br><span class="line"></span><br><span class="line">F:\&gt;cd Redis</span><br><span class="line"></span><br><span class="line">F:\Redis&gt;cd Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span></span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;redis-cli</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help <span class="keyword">get</span></span><br><span class="line"></span><br><span class="line">  GET key # å‘½ä»¤æ ¼å¼ï¼›å³æŒ‡ä»¤</span><br><span class="line">  summary: Get the value of a key # åŠŸèƒ½æè¿°ï¼›æ€»ç»“æè¿°ï¼Œè·å–ä¸€ä¸ªkeyæ‰€å¯¹åº”çš„å–å€¼</span><br><span class="line">  since: <span class="number">1.0</span><span class="number">.0</span> # å‡ºç°ç‰ˆæœ¬ï¼›æœ€æ—©çš„åœ¨<span class="number">1.0</span><span class="number">.0</span>ç‰ˆæœ¬å°±æœ‰æ­¤å‘½ä»¤ï¼›å½“å‰ç‰ˆæœ¬ä¸º<span class="number">3.2</span><span class="number">.100</span> è¯¥ç‰ˆæœ¬</span><br><span class="line">  group: <span class="built_in">string</span> # æ‰€å±ç¾¤ç»„ï¼›è¿™ä¸ªå‘½ä»¤å±äºä¸€ä¸ªç¾¤ç»„ï¼›è¯¥ç¾¤ç»„åç§°å«åš<span class="built_in">string</span>ï¼›</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help</span><br><span class="line">redis-cli <span class="number">3.2</span><span class="number">.100</span></span><br><span class="line">To <span class="keyword">get</span> help about Redis commands type:</span><br><span class="line">      # å¯ä»¥å»è·å–ä¸€ä¸ªåˆ—è¡¨å‘½ä»¤</span><br><span class="line">      # å¯ä»¥è·å–å¾—åˆ°&lt;group&gt;åœ¨è¿™ä¸ªç¾¤ç»„å½“ä¸­çš„æ‰€æœ‰å‘½ä»¤</span><br><span class="line">      # å³æ¯”å¦‚è¯´ help @<span class="built_in">string</span> å¯ä»¥è·å–å¾—åˆ°åœ¨<span class="built_in">string</span>è¯¥ç¾¤ç»„å½“ä¸­çš„æ‰€æœ‰å‘½ä»¤</span><br><span class="line">      <span class="string">"help @&lt;group&gt;"</span> to <span class="keyword">get</span> a list of commands <span class="keyword">in</span> &lt;group&gt;</span><br><span class="line"></span><br><span class="line">      # help å‘½ä»¤åç§°å³å¯ä»¥è·å–å¾—åˆ°çš„æ˜¯æœ‰å…³äºè¯¥å‘½ä»¤çš„æ‰€æœ‰å¸®åŠ©ä¿¡æ¯</span><br><span class="line">      <span class="string">"help &lt;command&gt;"</span> <span class="keyword">for</span> help on &lt;command&gt;</span><br><span class="line"></span><br><span class="line">      #å¯ä»¥è·å–ä¸€ä¸ªåˆ—è¡¨å¯èƒ½å¸®åŠ©çš„æç¤º</span><br><span class="line">      <span class="string">"help &lt;tab&gt;"</span> to <span class="keyword">get</span> a list of possible help topics</span><br><span class="line"></span><br><span class="line">      # quitå³ç”¨äºé€€å‡º</span><br><span class="line">      <span class="string">"quit"</span> to exit</span><br><span class="line"></span><br><span class="line">To <span class="keyword">set</span> redis-cli perferences:</span><br><span class="line">      <span class="string">":set hints"</span> enable online hints</span><br><span class="line">      <span class="string">":set nohints"</span> disable online hints</span><br><span class="line">Set your preferences <span class="keyword">in</span> ~/.redisclirc</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help <span class="keyword">set</span></span><br><span class="line"></span><br><span class="line">  SET key value [EX seconds] [PX milliseconds] [NX|XX]</span><br><span class="line">  summary: Set the <span class="built_in">string</span> value of a key</span><br><span class="line">  since: <span class="number">1.0</span><span class="number">.0</span></span><br><span class="line">  group: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"># tab x <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @generic</span><br><span class="line"># tab x <span class="number">2</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @<span class="built_in">string</span></span><br><span class="line"># tab x <span class="number">3</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @list</span><br><span class="line"># tab x <span class="number">4</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @<span class="keyword">set</span></span><br><span class="line"># tab x <span class="number">5</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @sorted_set</span><br><span class="line"># tab x <span class="number">6</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @hash</span><br><span class="line"># tab x <span class="number">7</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @pubsub</span><br><span class="line"># tab x <span class="number">8</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @transactions</span><br><span class="line"># tab x <span class="number">9</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @connection</span><br><span class="line"># tab x <span class="number">10</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @server</span><br><span class="line"># tab x <span class="number">11</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @scripting</span><br><span class="line"># tab x <span class="number">12</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @hyperloglog</span><br><span class="line"># tab x <span class="number">13</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @cluster</span><br><span class="line"># tab x <span class="number">14</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @geo</span><br><span class="line"># tab x <span class="number">15</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @APPEND</span><br><span class="line"># tab x <span class="number">16</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @AUTH</span><br><span class="line"># tab x <span class="number">17</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BGREWRITEAOF</span><br><span class="line"># tab x <span class="number">18</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BGSAVE</span><br><span class="line"># tab x <span class="number">19</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BITCOUNT</span><br><span class="line"># tab x <span class="number">20</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BITFIELD</span><br><span class="line"># tab x <span class="number">21</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BITOP</span><br><span class="line"># tab x <span class="number">22</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BITPOS</span><br><span class="line"># tab x <span class="number">23</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BLPOP</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BRPOP</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @BRPOPLPUSH</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT GETNAME</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT KILL</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT LIST</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT REPLY</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT SETNAME</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; help @CLIENT ADDSLOTS</span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line"># (æˆ‘åœ¨å¹²ä»€ä¹ˆå‚»é€¼äº‹ï¼Œæˆ‘ä»¥ä¸ºæœ‰å°½å¤´ï¼Œåœ¨è¿™é‡Œä¸€ç›´tab * n)</span><br></pre></td></tr></table></figure><h5 id="é€€å‡ºå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ¨¡å¼"><a href="#é€€å‡ºå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="é€€å‡ºå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ¨¡å¼"></a>é€€å‡ºå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ¨¡å¼</h5><ul><li>åŠŸèƒ½<blockquote><p>é€€å‡ºå®¢æˆ·ç«¯</p></blockquote></li><li>å‘½ä»¤<blockquote><p>quit<br>  exit<br>  &lt;ESC &gt;</p></blockquote></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨cmdå½“ä¸­è¿›è¡Œæ‰“å¡redis-cliï¼›ç„¶åæŒ‰é”®escï¼›é€€å‡ºåˆ°dosçª—å£ä¸‹</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br><span class="line"></span><br><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><h5 id="Rediså…¥é—¨"><a href="#Rediså…¥é—¨" class="headerlink" title="Rediså…¥é—¨"></a>Rediså…¥é—¨</h5><ol><li>Redisç®€ä»‹ï¼ˆNoSQLæ•°æ®åº“ï¼›é€šè¿‡ä»¥key-valueçš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼‰</li><li>Redisçš„ä¸‹è½½ä¸å®‰è£…ï¼ˆç»¿è‰²ç‰ˆæœ¬ï¼›å®¹æ˜“å®‰è£…ï¼›å½“å‰æ˜¯windowsç¯å¢ƒ3.2.100ç‰ˆæœ¬ï¼›åæœŸåŸºäºlinuxç¯å¢ƒ4.0ç‰ˆæœ¬æ¥è¿›è¡Œå®æ“ï¼‰</li><li>Redisçš„åŸºæœ¬æ“ä½œ<blockquote><ul><li>set/get(è®¾ç½®é”®å€¼ä¸å–å€¼)</li><li>clearï¼ˆæ¸…å±ï¼‰</li><li>helpï¼ˆè·å–å¸®åŠ©ä¿¡æ¯ï¼‰</li></ul></blockquote></li></ol><h3 id="æ•°æ®ç±»å‹-æ•°æ®ç±»å‹ç®€ä»‹"><a href="#æ•°æ®ç±»å‹-æ•°æ®ç±»å‹ç®€ä»‹" class="headerlink" title="æ•°æ®ç±»å‹-æ•°æ®ç±»å‹ç®€ä»‹"></a>æ•°æ®ç±»å‹-æ•°æ®ç±»å‹ç®€ä»‹</h3><h4 id="è¯¾ç¨‹å®‰æ’-1"><a href="#è¯¾ç¨‹å®‰æ’-1" class="headerlink" title="è¯¾ç¨‹å®‰æ’"></a>è¯¾ç¨‹å®‰æ’</h4><h5 id="è¯¾ç¨‹è®¡åˆ’"><a href="#è¯¾ç¨‹è®¡åˆ’" class="headerlink" title="è¯¾ç¨‹è®¡åˆ’"></a>è¯¾ç¨‹è®¡åˆ’</h5><h6 id="Windowsç¯å¢ƒ"><a href="#Windowsç¯å¢ƒ" class="headerlink" title="Windowsç¯å¢ƒ"></a>Windowsç¯å¢ƒ</h6><ol><li>redisåŸºç¡€<ul><li>Rediså…¥é—¨</li><li>æ•°æ®ç±»å‹</li><li>é€šç”¨å‘½ä»¤</li><li>Jedis</li></ul></li></ol><h6 id="linuxç¯å¢ƒ"><a href="#linuxç¯å¢ƒ" class="headerlink" title="linuxç¯å¢ƒ"></a>linuxç¯å¢ƒ</h6><ol start="2"><li><p>Redisé«˜çº§</p><ul><li>æŒä¹…åŒ–</li><li>redis.conf</li><li>äº‹åŠ¡</li><li>é›†ç¾¤</li></ul></li><li><p>Redisåº”ç”¨</p><ul><li>ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ</li></ul></li></ol><h4 id="Redisæ•°æ®ç±»å‹"><a href="#Redisæ•°æ®ç±»å‹" class="headerlink" title="Redisæ•°æ®ç±»å‹"></a>Redisæ•°æ®ç±»å‹</h4><h5 id="ç›®å½•Contents"><a href="#ç›®å½•Contents" class="headerlink" title="ç›®å½•Contents"></a>ç›®å½•Contents</h5><ul><li><font style="color:red;">æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»</font></li><li>string</li><li>hash</li><li>list</li><li>set</li><li>sorted_set</li><li>æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹</li></ul><h4 id="ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§"><a href="#ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§" class="headerlink" title="ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§"></a>ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§</h4><p>ä¸ºä»€ä¹ˆè®¾è®¡äº†äº”ç§æ•°æ®ç±»å‹ï¼ˆstringï¼Œlistï¼Œhashï¼Œsetï¼Œsorted_setï¼‰ï¼Œå³è¿™äº”ç§æ•°æ®ç±»å‹çš„å‰ä¸–ä»Šç”Ÿï¼›  </p><p>ä¸€å®šæ˜¯å‘ç°æŸä¸€ç§æ•°æ®å®ƒéœ€è¦å­˜å…¥åˆ°rediså½“ä¸­äº†ï¼›å†å°†è¿™ç§æ•°æ®çš„ç‰¹å¾æŠ½å‡ºæ¥ï¼›ç„¶ååšæˆä¸€ç§æ•°æ®ç±»å‹ï¼›ä¹Ÿå°±æ˜¯è¯´ç”¨åˆ°å“ªä¸€ç§å°±åšå“ªä¸€ç§ï¼›<br>ç„¶åæ€»ä¹‹åˆ°ç°åœ¨æ€»ç»“å‡ºæ¥äº†5ç§è¶³å¤Ÿä½¿ç”¨äº†å³è¶³å¤Ÿæ—¥å¸¸å¼€å‘äº†ï¼›<br>å¦‚æœæœ‰æ–°éœ€æ±‚æ¥äº†åˆéœ€è¦æ–°çš„æ•°æ®ç±»å‹ï¼›å³åé¢å†å»åŠ æ–°çš„æ•°æ®ç±»å‹è®¾è®¡æ–°çš„æ•°æ®ç±»å‹å³å¯ï¼›<br>ä¸”redisçš„æ•°æ®ç±»å‹å¹¶ä¸åªæœ‰è¿™äº”ç§æ•°æ®ç±»å‹ï¼ˆstringï¼Œlistï¼Œhashï¼Œsetï¼Œsorted_setï¼‰ï¼Œåé¢è¿˜ä¼šç»§ç»­ä»‹ç»å…¶ä»–çš„ä¸€äº›æ•°æ®ç±»å‹ï¼›  </p><p>æ€»ä¹‹è¿˜æ˜¯è¦å›æ¥åˆ†æä¸šåŠ¡æƒ…å†µï¼›é€šè¿‡å…·ä½“çš„ä¸šåŠ¡æƒ…å†µæ‰¾åˆ°åˆé€‚çš„æ•°æ®ç±»å‹è¿›è¡Œå­˜å‚¨æ•°æ®ï¼›<br>redisæœ€åˆå®šä½çš„æ˜¯ä½œä¸ºç¼“å­˜ä½¿ç”¨çš„ï¼›é‚£ä¹ˆç¼“å­˜å½“ä¸­æ”¾ä»€ä¹ˆï¼Œè¿™ä¸ªå°±å¾ˆå…³é”®ï¼›</p><h5 id="ä½œä¸ºç¼“å­˜ä½¿ç”¨"><a href="#ä½œä¸ºç¼“å­˜ä½¿ç”¨" class="headerlink" title="ä½œä¸ºç¼“å­˜ä½¿ç”¨"></a>ä½œä¸ºç¼“å­˜ä½¿ç”¨</h5><ol><li>åŸå§‹ä¸šåŠ¡åŠŸèƒ½è®¾è®¡ï¼ˆåº”ç”¨åœºæ™¯ï¼šç§’æ€ï¼‰<ul><li>ç§’æ€</li><li>äº¬ä¸œ618</li><li>å¤©çŒ«åŒåä¸€äº’åŠ¨</li><li>12306æ’é˜Ÿè´­ç¥¨</li></ul></li><li>è¿è¥å¹³å°ç›‘æ§åˆ°çš„çªå‘é«˜é¢‘è®¿é—®æ•°æ®<ul><li>çªå‘æ—¶æ”¿è¦é—»ï¼Œè¢«å¼ºåŠ¿å…³æ³¨å›´è§‚(å¨±ä¹å…«å¦é˜µ-ä¸æ˜çœŸç›¸çš„åƒç“œç¾¤ä¼—ï¼Œä¸èƒ½é¢„æœŸé¢„è®¡å…¶æˆä¸ºçƒ­ç‚¹æ¶ˆæ¯çƒ­ç‚¹æ–°é—»ï¼Œä½†æ˜¯å¯ä»¥è¿›è¡Œå¹³å°å¯¹å…¶ç›‘æ§å¤„ç†ï¼Œå¹³å°ç›‘æ§åˆ°å…¶ï¼ˆæœªè¢«é¢„æœŸæˆä¸ºçƒ­ç‚¹çš„ä¿¡æ¯ï¼‰è¢«é«˜é¢‘æ¬¡è®¿é—®)</li></ul></li><li>é«˜é¢‘ã€å¤æ‚çš„ç»Ÿè®¡æ•°æ®ï¼ˆåº”ç”¨åœºæ™¯ï¼šç›´æ’­åœ¨çº¿äººæ•°ï¼‰<ul><li>åœ¨çº¿äººæ•°</li><li>æŠ•ç¥¨æ’è¡Œæ¦œï¼ˆå¥³å›¢ç”·å›¢ç»™äººæŠ•ç¥¨å®æ—¶åˆ·æ–°ï¼‰</li></ul></li></ol><h5 id="é™„åŠ åŠŸèƒ½"><a href="#é™„åŠ åŠŸèƒ½" class="headerlink" title="é™„åŠ åŠŸèƒ½"></a>é™„åŠ åŠŸèƒ½</h5><p>æ¯”å¦‚è¯´å®¢æˆ·é‡çªç„¶å˜å¤šä»200ä¸ªçš„è®¿é—®é‡å®¢æˆ·åˆ°ä»¥ä¸‡ä¸ºå•ä½çš„å®¢æˆ·ï¼›ï¼ˆé«˜å¹¶å‘ï¼Œæœºå™¨æ”¯æ’‘ä¸ä½ï¼‰  </p><p>ç³»ç»ŸåŠŸèƒ½ä¼˜åŒ–æˆ–å‡çº§</p><ul><li>å•æœåŠ¡å™¨å‡çº§é›†ç¾¤</li><li>Sessionç®¡ç†</li><li>Tokenç®¡ç†</li></ul><h5 id="Redisæ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼‰"><a href="#Redisæ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼‰" class="headerlink" title="Redisæ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼‰"></a>Redisæ•°æ®ç±»å‹ï¼ˆ5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼‰</h5><p>å¯ä»¥ä¸javaå½“ä¸­çš„æ•°æ®ç±»å‹è¿›è¡Œä¸€ä¸‹ç±»æ¯”è®°å¿†ï¼›å®ƒä»¬æœ‰å¾ˆå¤šçš„ç›¸ä¼¼ä¹‹å¤„ï¼›  </p><ul><li>string        String</li><li>hash          HashMap</li><li>list          LinkedList</li><li>set           HashSet</li><li>sorted_set    TreeSet</li></ul><h3 id="æ•°æ®ç±»å‹-stringåŸºæœ¬æ“ä½œ"><a href="#æ•°æ®ç±»å‹-stringåŸºæœ¬æ“ä½œ" class="headerlink" title="æ•°æ®ç±»å‹-stringåŸºæœ¬æ“ä½œ"></a>æ•°æ®ç±»å‹-stringåŸºæœ¬æ“ä½œ</h3><h4 id="ç›®å½•Contents-1"><a href="#ç›®å½•Contents-1" class="headerlink" title="ç›®å½•Contents"></a>ç›®å½•Contents</h4><ul><li>æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»</li><li>string</li><li>hash</li><li>list</li><li>set</li><li>sorted_set</li><li>æ•°æ®ç±»å‹å®è·µæ¡ˆä¾‹</li></ul><h4 id="redis-æ•°æ®å­˜å‚¨æ ¼å¼"><a href="#redis-æ•°æ®å­˜å‚¨æ ¼å¼" class="headerlink" title="redis æ•°æ®å­˜å‚¨æ ¼å¼"></a>redis æ•°æ®å­˜å‚¨æ ¼å¼</h4><p>å¯¹äºredisæ¥è¯´ï¼Œé‡Œé¢å­˜å‚¨æ•°æ®æ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼›</p><ul><li>redis è‡ªèº«æ˜¯ä¸€ä¸ª Mapï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨ <font style="color:red;font-weight:bolder;">key: value</font> çš„å½¢å¼è¿›è¡Œå­˜å‚¨</li><li><font style="color:red;font-weight:bolder;">æ•°æ®ç±»å‹</font> æŒ‡çš„æ˜¯ å­˜å‚¨çš„æ•°æ® çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ value éƒ¨åˆ†çš„ç±»å‹ï¼Œkey éƒ¨åˆ†æ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²</li><li></li></ul><p>è¿™ä¸ªkeyï¼Œåç§°æ˜¯ç”¨æ¥è®¿é—®è¿™ä¸ªæ•°æ®ä½¿ç”¨çš„ï¼›</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Redis å­˜å‚¨ç©ºé—´</span><br><span class="line"></span><br><span class="line">å·¦è¾¹ä¸ºkey(æ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²)    å³è¾¹ä¸ºvalue</span><br><span class="line">---------------------------------------------</span><br><span class="line">|  name |                   |    laowang   |</span><br><span class="line">---------------------------------------------</span><br><span class="line"></span><br><span class="line">---------------------------------------------</span><br><span class="line">|  age  |                   |    101       |</span><br><span class="line">---------------------------------------------</span><br><span class="line"></span><br><span class="line">---------------------------------------------</span><br><span class="line">|  åç§°  |                  |    æ•°æ®     |</span><br><span class="line">---------------------------------------------</span><br><span class="line"></span><br><span class="line">---------------------------------------------</span><br><span class="line">|  key  |                   |    value     |</span><br><span class="line">---------------------------------------------</span><br></pre></td></tr></table></figure><h4 id="string-ç±»å‹"><a href="#string-ç±»å‹" class="headerlink" title="string ç±»å‹"></a>string ç±»å‹</h4><ul><li>å­˜å‚¨çš„æ•°æ®ï¼šå•ä¸ªæ•°æ®ï¼Œæœ€ç®€å•ï¼ˆæœ€å¸¸ç”¨ï¼‰çš„æ•°æ®å­˜å‚¨ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®å­˜å‚¨ç±»å‹</li><li>å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜ä¸€ä¸ªæ•°æ®</li><li>å­˜å‚¨å†…å®¹ï¼šé€šå¸¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥æ•´æ•°çš„å½¢å¼å±•ç¤ºï¼Œå¯ä»¥ä½œä¸ºæ•°å­—æ“ä½œä½¿ç”¨ï¼ˆä½†æ˜¯ä»ç„¶æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Redis å­˜å‚¨ç©ºé—´</span><br><span class="line"></span><br><span class="line">---------------------------------------------</span><br><span class="line">|  key1  |------------------&gt;|    laowang   |</span><br><span class="line">---------------------------------------------</span><br><span class="line">|  key1  |------------------&gt;|   4006184000 |</span><br><span class="line">---------------------------------------------</span><br></pre></td></tr></table></figure></li></ul><h4 id="string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h4><ul><li>æ·»åŠ /ä¿®æ”¹æ•°æ®<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="built_in">key</span> <span class="built_in">value</span></span><br></pre></td></tr></table></figure></li><li>è·å–æ•°æ®<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">get</span> <span class="keyword">value</span></span><br></pre></td></tr></table></figure></li><li>åˆ é™¤æ•°æ®<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">del</span> <span class="built_in">key</span></span><br></pre></td></tr></table></figure></li></ul><p>ç»ƒä¹ ï¼š  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">F:\Redis\Redis-x64<span class="number">-3.2</span><span class="number">.100</span><span class="number">-6379</span>&gt;redis-cli</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">set</span> name laowang</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> name</span><br><span class="line"><span class="string">"laowang"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">set</span> age <span class="number">11111</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> age</span><br><span class="line"><span class="string">"11111"</span></span><br><span class="line"></span><br><span class="line"># åˆ é™¤è¯¥æ•°æ®åˆ™è¯¥æ•°æ®ä»rediså½“ä¸­ä¸å†æœ‰äº†ï¼›</span><br><span class="line"># åˆ é™¤å®Œæˆä¹‹åè¿”å› (<span class="built_in">int</span>eger) <span class="number">1</span> ä»£è¡¨åˆ é™¤æˆåŠŸï¼›</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; del age</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">1</span></span><br><span class="line"></span><br><span class="line"># è¿™ä¸ªæ—¶å€™redisçš„å†…å­˜å½“ä¸­å°±ä¸å­˜åœ¨è¯¥key: ageï¼›value: <span class="number">11111</span> è¯¥æ•°æ®äº†ï¼›</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> age</span><br><span class="line">(nil)</span><br><span class="line"></span><br><span class="line"># å½“å†å»è¿›è¡Œåˆ é™¤ä¸€ä¸ªrediså†…å­˜å½“ä¸­ä¸å­˜åœ¨çš„æ•°æ®</span><br><span class="line"># è¿™ä¸ªæ—¶å€™å°±è¿”å› (<span class="built_in">int</span>eger)<span class="number">0</span> ï¼›è¡¨ç¤ºåˆ é™¤å¤±è´¥ï¼›</span><br><span class="line"># åœ¨rediså½“ä¸­ï¼Œæ“ä½œå¦‚æœæ˜¯ä»¥æˆåŠŸå¤±è´¥ä¸ºæ ‡è¯†çš„è¯ï¼›éƒ½æ˜¯ä½¿ç”¨çš„(<span class="built_in">int</span>eger) <span class="number">1</span> / (<span class="built_in">int</span>eger) <span class="number">0</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; del age</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">0</span></span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span> m æ˜¯ å•è¯ Multiple[è‹± /ËˆmÊŒltÉªpl/] çš„ç®€å†™</span><br><span class="line"># <span class="number">2.</span> adj. å¤šé‡çš„ï¼›å¤šæ ·çš„ï¼›è®¸å¤šçš„ï¼›n. å€æ•°ï¼›[ç”µ]å¹¶è”ï¼›å¤æ•° multiples</span><br><span class="line"># <span class="number">3.</span> å°±æ˜¯å¤šä¸ªçš„æ„æ€ï¼Œmsetä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªé”®å€¼ï¼›mgetä¸€æ¬¡æ€§å–å¤šä¸ªå€¼å‡ºæ¥ï¼›</span><br><span class="line"># <span class="number">4.</span> ä»¥åŠåŸæ¥å¦‚æœå­˜åœ¨è¯¥keyä»¥åŠè¯¥keyæ‰€å¯¹åº”çš„å–å€¼ï¼›åˆ™å¦‚æœå†æ¬¡è®¾ç½®msetï¼›å°±å°†å‘ç”Ÿè¦†ç›–åŸæ¥keyçš„å–å€¼</span><br><span class="line"># <span class="number">5.</span> é€šè¿‡mgetè¿›è¡Œå–å‡ºä¸€ä¸ªä¸å­˜åœ¨çš„keyæ—¶åŒæ ·è¿”å›nilï¼›</span><br><span class="line"># <span class="number">6.</span> æ ¼å¼: mset key1 value1 key2 value2 ...</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mset a <span class="number">1</span> b <span class="number">2</span> c <span class="number">3</span> d <span class="number">4</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> a</span><br><span class="line"><span class="string">"1"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> b</span><br><span class="line"><span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> c</span><br><span class="line"><span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> d</span><br><span class="line"><span class="string">"4"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget a b c d</span><br><span class="line"><span class="number">1</span>) <span class="string">"1"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"2"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"3"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"4"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mset a <span class="number">111</span> b <span class="number">222</span> c <span class="number">333</span> d <span class="number">444</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget a b c d</span><br><span class="line"><span class="number">1</span>) <span class="string">"111"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"222"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"333"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"444"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget a e c d</span><br><span class="line"><span class="number">1</span>) <span class="string">"111"</span></span><br><span class="line"><span class="number">2</span>) (nil)</span><br><span class="line"><span class="number">3</span>) <span class="string">"333"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"444"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget z i p</span><br><span class="line"><span class="number">1</span>) (nil)</span><br><span class="line"><span class="number">2</span>) (nil)</span><br><span class="line"><span class="number">3</span>) (nil)</span><br></pre></td></tr></table></figure></li><li>è·å–å¤šä¸ªæ•°æ®<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æ ¼å¼ï¼šmget key1 key2 ...</span><br><span class="line"></span><br><span class="line"><span class="number">127.0.0.1:6379</span>&gt; set a <span class="number">11111</span></span><br><span class="line">OK</span><br></pre></td></tr></table></figure></li><li>è·å–æ•°æ®å­—ç¬¦ä¸ªæ•°ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ ¼å¼ï¼šstrlen key</span><br><span class="line"></span><br><span class="line"># a è¯¥keyçš„valueæœ‰<span class="number">5</span>ä¸ªå­—ç¬¦ï¼ˆé•¿åº¦ï¼‰</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; strlen a</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; strlen name</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">7</span></span><br></pre></td></tr></table></figure></li><li>è¿½åŠ ä¿¡æ¯åˆ°åŸå§‹ä¿¡æ¯åéƒ¨ï¼ˆå¦‚æœåŸå§‹ä¿¡æ¯å­˜åœ¨å°±è¿½åŠ ï¼Œå¦åˆ™æ–°å»ºï¼‰<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># æ ¼å¼ï¼šappend key value</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> a</span><br><span class="line"><span class="string">"11111"</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; append a <span class="number">22222</span></span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> a</span><br><span class="line"><span class="string">"1111122222"</span></span><br><span class="line"></span><br><span class="line"># appendä¸€ä¸ªåœ¨rediså†…å­˜å½“ä¸­å¹¶ä¸å­˜åœ¨çš„keyä¹Ÿä¼šæˆåŠŸï¼›å³ä¸å­˜åœ¨åˆ™æ–°å»ºï¼›</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; append laowang <span class="number">999999</span></span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">6</span></span><br><span class="line"></span><br><span class="line"># å½“è¿™ä¸ªå˜é‡å¯¹åº”çš„å­˜å‚¨å€¼å¦‚æœå­˜åœ¨åˆ™è¿½åŠ ï¼›ä¸å­˜åœ¨åˆ™æ–°å»º</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; <span class="keyword">get</span> laowang</span><br><span class="line"><span class="string">"999999"</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ•°æ®ç±»å‹-å•æŒ‡ä»¤æ“ä½œä¸å¤šæŒ‡ä»¤æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘"><a href="#æ•°æ®ç±»å‹-å•æŒ‡ä»¤æ“ä½œä¸å¤šæŒ‡ä»¤æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘" class="headerlink" title="æ•°æ®ç±»å‹-å•æŒ‡ä»¤æ“ä½œä¸å¤šæŒ‡ä»¤æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘"></a>æ•°æ®ç±»å‹-å•æŒ‡ä»¤æ“ä½œä¸å¤šæŒ‡ä»¤æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘</h3><h4 id="string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ-1"><a href="#string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ-1" class="headerlink" title="string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h4><p>å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œå¦‚ä½•é€‰æ‹©<br>ï¼ˆä»€ä¹ˆæ—¶å€™ç”¨setæ›´å¥½ï¼›ä»€ä¹ˆæ—¶å€™ç”¨msetæ›´å¥½ï¼‰</p><h4 id="å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘"><a href="#å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘" class="headerlink" title="å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘"></a>å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘</h4><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="built_in">key</span> <span class="built_in">value</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"><span class="built_in">vs</span></span><br></pre></td></tr></table></figure><p>mset key1 value1 key2 value2 â€¦</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åŒºåˆ«ï¼š  </span><br><span class="line"></span><br><span class="line">* <span class="built_in">set</span>ä¸€æ¬¡æ€§åªèƒ½è®¾ç½®ä¸€ä¸ª<span class="built_in">key</span>çš„å–å€¼<span class="built_in">value</span></span><br><span class="line">* msetä¸€æ¬¡æ€§åªèƒ½è®¾ç½®å¤šä¸ª<span class="built_in">key</span>çš„å–å€¼<span class="built_in">value</span></span><br><span class="line">* <span class="built_in">get</span>ä¸mgetåŒç†</span><br><span class="line"></span><br><span class="line">ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹</span><br></pre></td></tr></table></figure><hr><p>|           |â€”â€”â€“setâ€”-ã€‹|          |<br>| åº”ç”¨æœåŠ¡å™¨ |                | RedisæœåŠ¡|<br>|           |ã€Šâ€”â€”resultâ€”|          |</p><hr><p>ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ•´ä¸ªè¿‡ç¨‹<br>é¦–å…ˆæŒ‡ä»¤åˆ°è¾¾ä»¥åå‘é€ç»™redis;<br>redisæ‹¿åˆ°æŒ‡ä»¤ä»¥åï¼›ç»“æŸå®ŒæŠŠç»“æœè¿”å›ç»™æœåŠ¡å™¨ï¼›<br>é‚£ä¹ˆåœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼›<br>æœ‰è¿™ä¹ˆå‡ ä¸ªåœ°æ–¹æ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„ï¼›</p><ol><li>setæŒ‡ä»¤ä»åº”ç”¨æœåŠ¡å™¨å‘é€åˆ°redisæœåŠ¡è¿™ä¸ªè¿‡ç¨‹æ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„</li><li>åˆ°è¾¾redisæœåŠ¡ï¼Œæ‰§è¡ŒæŒ‡ä»¤åŒæ ·æ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„</li><li>é‚£ä¹ˆredisè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®å›å»åˆ°åº”ç”¨æœåŠ¡å™¨ä¹Ÿæ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„ï¼›</li></ol><p>é‚£ä¹ˆå¦‚æœæ˜¯ä¸‰ä¸ªæŒ‡ä»¤çš„è¯ï¼›é‚£ä¹ˆä¸Šè¿°è¿‡ç¨‹å°†ä¼šæ˜¯ä¸€ä¸ªO(n)çš„è¿‡ç¨‹å³ä¸Šè¿°è¿‡ç¨‹æ‰§è¡Œ3éï¼›</p><ol><li>å‘é€æŒ‡ä»¤ x 3</li><li>æ‰§è¡ŒæŒ‡ä»¤ x 3</li><li>è¿”å›ç»“æœ x 3<br>é‚£ä¹ˆå…¶æ€»æ‰§è¡Œæ—¶é—´ä¸ºå¤šå°‘ï¼Ÿ<br>å‡å®šæŒ‡ä»¤å‘é€ä¸æŒ‡ä»¤è¿”å›çš„æ—¶é—´ä¸€æ ·é‚£ä¹ˆæ€»æ‰§è¡Œæ—¶é—´ä¸ºï¼š</li></ol><p>å•æŒ‡ä»¤ï¼ˆsetï¼‰3æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹æ—¶é—´ä¸º<br>å‘é€è¿”å›æ—¶é—´ x 6 + æ‰§è¡Œæ—¶é—´ x 3</p><p>å¦‚æœæ˜¯å¤šæŒ‡ä»¤ï¼ˆmsetï¼‰3æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ä¸º<br>å‘é€è¿”å›æ—¶é—´ x 2 + æ‰§è¡Œæ—¶é—´ x 3</p><p>å‡è¡¡ä¸€ä¸‹å‘é€æ—¶é•¿å’Œæ‰§è¡Œæ—¶é•¿ä¹‹é—´çš„å…³ç³»ï¼›<br>å‡å¦‚è¯´å½“å‰éœ€è¦æ“ä½œ50ï¼ˆå¤§æ•°æ®é‡ï¼‰ä¸ªæ•°æ®ï¼›setä¸msetçš„æ•ˆç‡å·®è·ï¼›<br>æ²¡æœ‰æ˜ç¡®çš„ç»“è®ºè¯´ä»€ä¹ˆæ—¶å€™ç”¨setä»€ä¹ˆæ—¶å€™ç”¨msetï¼›<br>éƒ½æ˜¯ç»“åˆå…·ä½“çš„ä¸šåŠ¡æƒ…å†µæ‰èƒ½ä½œå‡ºé€‰æ‹©å‡ºæ›´é€‚åˆæŸä¸ªä¸šåŠ¡åœºæ™¯ä¸‹çš„æŒ‡ä»¤ï¼›</p><p>å¦‚æœä¸€æ¬¡å‘é€å®Œæ‰€æ¶ˆè€—çš„æ—¶é•¿æ‰§è¡Œå®Œçš„æ—¶é•¿éå¸¸çš„å¤§çš„è¯ï¼Œé‚£ä¹ˆå¯¹äºå•çº¿ç¨‹çš„ç¯å¢ƒæ¥è¯´å¹¶ä¸é€‚ç”¨ï¼›æ‰€ä»¥è¯´é¢å¯¹è¿™ç§æƒ…å†µä¸€å®šéœ€è¦åŠæ—¶åˆ‡å‰²ï¼›</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### æ•°æ®ç±»å‹-æ•°å€¼å¢å‡æ“ä½œ</span><br><span class="line"></span><br><span class="line">#### string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</span><br><span class="line"></span><br><span class="line">##### ä¸šåŠ¡åœºæ™¯</span><br><span class="line"></span><br><span class="line">åœ¨å¼€å‘å½“ä¸­ï¼Œéšç€ä¸šåŠ¡è¿›è¡Œæ•°æ®é‡ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼›ä¸€å¼ è¡¨èƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®é‡ä¸èƒ½å¤Ÿè®©å…¶æ— é™æçš„è¿›è¡Œæ‰©å¼ ï¼›å¦åˆ™ä¼šéå¸¸å½±å“æŸ¥è¯¢æ•ˆç‡ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™é‡‡å–çš„æ–¹å¼å°±æ˜¯å°†ä¸€å¼ æ•°æ®é‡å¤§çš„è¡¨åˆ‡å‰²åˆ†å‰²æˆå‡ å¼ å°è¡¨ï¼›ç”šè‡³å°†ä¸€ä¸ªåº“å½“ä¸­çš„è¡¨åˆ†æ•£åˆ°å‡ ä¸ªåº“è¿™æ ·çš„å¤„ç†æ“ä½œï¼›é‚£ä¹ˆè¿™å¯¹åº”çš„æ“ä½œå³åˆ†åº“åˆ†è¡¨ï¼›</span><br><span class="line">åœ¨è¿™é‡Œä¸è€ƒè™‘åˆ†åº“é—®é¢˜ä»…ä»…è€ƒè™‘åˆ†è¡¨é—®é¢˜ï¼›</span><br><span class="line">é‚£ä¹ˆè¡¨æœ‰äº†è€Œè¡¨ä¸­çš„idæ˜¯ä¸€ä¸ªä¸€ä¸ªè¿ç»­è‡ªå¢çš„ï¼›</span><br><span class="line">é‚£ä¹ˆå¦‚æœå°†è¿™äº›æ•°æ®åˆ†åˆ°åˆ«çš„è¡¨å½“ä¸­ï¼›</span><br><span class="line">å°±å°†ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼›æ¯ä¸€ä¸ªè¡¨æ§åˆ¶è‡ªå·±çš„ä¸»é”®è‡ªå¢ï¼›ä¼šå‡ºç°é—®é¢˜ï¼›å³ä¸»é”®é‡å¤ï¼›</span><br><span class="line">äºæ˜¯å°±éœ€è¦å»è§£å†³ä¸»é”®é‡å¤çš„é—®é¢˜ï¼›</span><br><span class="line"></span><br><span class="line">å¤§å‹ä¼ä¸šåŠåº”ç”¨ä¸­ï¼Œåˆ†è¡¨æ“ä½œæ˜¯åŸºæœ¬æ“ä½œï¼Œä½¿ç”¨å¤šå¼ è¡¨å­˜å‚¨åŒç±»å‹æ•°æ®ï¼›</span><br><span class="line">ä½†æ˜¯å¯¹åº”çš„ä¸»é”® id å¿…é¡»ä¿è¯ç»Ÿä¸€æ€§ï¼Œä¸èƒ½é‡å¤ã€‚</span><br><span class="line">Oracleæ•°æ®åº“å…·æœ‰ sequence è®¾å®šï¼ˆæœ‰åºåˆ—çš„æ¦‚å¿µæ‰€ä»¥å¯ä»¥è§£å†³åˆ†è¡¨æ—¶ä¸»é”®é‡å¤é—®é¢˜ï¼‰ï¼Œå¯ä»¥è§£å†³è¯¥é—®é¢˜ã€‚</span><br><span class="line">ä½†æ˜¯ MySQL æ•°æ®åº“å¹¶ä¸å…·æœ‰ç±»ä¼¼çš„æœºåˆ¶ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³ï¼Ÿ</span><br><span class="line"></span><br><span class="line">æŠŠåŸæ¥çš„è¡¨åˆ†æˆè‹¥å¹²å¼ è¡¨ä¹‹åï¼›åªè¦ä¿è¯ä¸€ç‚¹ï¼›æ‰€æœ‰çš„ä¸»é”®idä¸é‡å¤å³å¯ï¼›  </span><br><span class="line">è¿™ä¸ªä¸»é”®idåŸæœ¬ç”±æ•°æ®åº“æ§åˆ¶ç°åœ¨ç”±å…¶ä»–æœåŠ¡è¿›è¡Œæ§åˆ¶ï¼›</span><br><span class="line"></span><br><span class="line">##### è§£å†³æ–¹æ¡ˆ</span><br><span class="line"></span><br><span class="line">* è®¾ç½®æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</span><br></pre></td></tr></table></figure><p>  incr key<br>  incrby key increment<br>  incrbyfloat key increment<br>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>è®¾ç½®æ•°å€¼æ•°æ®å‡å°‘æŒ‡å®šèŒƒå›´çš„å€¼</span><br></pre></td></tr></table></figure><br>  decr key<br>  decrby key decrement<br>  <figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ“ä½œï¼›å¦‚æœè¯¥å­—ç¬¦ä¸²çš„å–å€¼æ˜¯ä¸€ä¸ªçº¯æ•°å­—ï¼›</span><br><span class="line">é‚£ä¹ˆå¯¹å…¶è¿›è¡Œ+<span class="number">1</span>ï¼ˆincrementï¼‰/<span class="number">-1</span>ï¼ˆdecrementï¼‰æ“ä½œ</span><br></pre></td></tr></table></figure><br>127.0.0.1:6379&gt; set num 1<br>OK</p><p>127.0.0.1:6379&gt; incr num<br>(integer) 2</p><p>127.0.0.1:6379&gt; get num<br>â€œ2â€</p><p>127.0.0.1:6379&gt; incr num<br>(integer) 3</p><p>127.0.0.1:6379&gt; incr num<br>(integer) 4</p><p>127.0.0.1:6379&gt; get num<br>â€œ4â€</p><p>127.0.0.1:6379&gt; decr num<br>(integer) 3</p><p>127.0.0.1:6379&gt; get num<br>â€œ3â€</p><h1 id="æŸ¥çœ‹-incrby-å‘½ä»¤è¯¦ç»†"><a href="#æŸ¥çœ‹-incrby-å‘½ä»¤è¯¦ç»†" class="headerlink" title="æŸ¥çœ‹ incrby å‘½ä»¤è¯¦ç»†"></a>æŸ¥çœ‹ incrby å‘½ä»¤è¯¦ç»†</h1><p>127.0.0.1:6379&gt; help incrby</p><p>  INCRBY key increment</p><h1 id="ä¸ºä¸€ä¸ªkeyå¢åŠ ä¸€ä¸ªæ•´æ•°å€¼ï¼›by-the-given-amount-ç”¨ç»™å®šçš„å€¼è¿›è¡Œå¢åŠ ï¼›"><a href="#ä¸ºä¸€ä¸ªkeyå¢åŠ ä¸€ä¸ªæ•´æ•°å€¼ï¼›by-the-given-amount-ç”¨ç»™å®šçš„å€¼è¿›è¡Œå¢åŠ ï¼›" class="headerlink" title="ä¸ºä¸€ä¸ªkeyå¢åŠ ä¸€ä¸ªæ•´æ•°å€¼ï¼›by the given amount ç”¨ç»™å®šçš„å€¼è¿›è¡Œå¢åŠ ï¼›"></a>ä¸ºä¸€ä¸ªkeyå¢åŠ ä¸€ä¸ªæ•´æ•°å€¼ï¼›by the given amount ç”¨ç»™å®šçš„å€¼è¿›è¡Œå¢åŠ ï¼›</h1><h1 id="å³é»˜è®¤incr-æ˜¯-1ï¼›decr-æ˜¯-1"><a href="#å³é»˜è®¤incr-æ˜¯-1ï¼›decr-æ˜¯-1" class="headerlink" title="å³é»˜è®¤incr æ˜¯+1ï¼›decr æ˜¯ -1"></a>å³é»˜è®¤incr æ˜¯+1ï¼›decr æ˜¯ -1</h1><h1 id="è€Œincrby-ä¸-decrby-åˆ™æ˜¯è®©å®ƒ-nï¼›æˆ–è€…æ˜¯è®©å®ƒ-nï¼›"><a href="#è€Œincrby-ä¸-decrby-åˆ™æ˜¯è®©å®ƒ-nï¼›æˆ–è€…æ˜¯è®©å®ƒ-nï¼›" class="headerlink" title="è€Œincrby ä¸ decrby åˆ™æ˜¯è®©å®ƒ +nï¼›æˆ–è€…æ˜¯è®©å®ƒ -nï¼›"></a>è€Œincrby ä¸ decrby åˆ™æ˜¯è®©å®ƒ +nï¼›æˆ–è€…æ˜¯è®©å®ƒ -nï¼›</h1><p>  summary: Increment the integer value of a key by the given amount<br>  since: 1.0.0<br>  group: string</p><p>127.0.0.1:6379&gt; incrby num 10<br>(integer) 13</p><p>127.0.0.1:6379&gt; get num<br>â€œ13â€</p><p>127.0.0.1:6379&gt; decrby num 2<br>(integer) 11</p><p>127.0.0.1:6379&gt; get num<br>â€œ11â€</p><h1 id="incrbyfloat-floatåˆ™ä¸å°æ•°æœ‰å…³ï¼›"><a href="#incrbyfloat-floatåˆ™ä¸å°æ•°æœ‰å…³ï¼›" class="headerlink" title="incrbyfloat floatåˆ™ä¸å°æ•°æœ‰å…³ï¼›"></a>incrbyfloat floatåˆ™ä¸å°æ•°æœ‰å…³ï¼›</h1><p>127.0.0.1:6379&gt; incrbyfloat num 0.5<br>â€œ11.5â€</p><p>127.0.0.1:6379&gt; get num<br>â€œ11.5â€</p><p>127.0.0.1:6379&gt; incrbyfloat num 0.00000000009<br>â€œ11.500000000089999â€</p><p>127.0.0.1:6379&gt; get num<br>â€œ11.500000000089999â€</p><h1 id="å°è¯•-incrby-æ·»åŠ çš„incrementä¸ºfloatç±»å‹å–å€¼"><a href="#å°è¯•-incrby-æ·»åŠ çš„incrementä¸ºfloatç±»å‹å–å€¼" class="headerlink" title="å°è¯• incrby æ·»åŠ çš„incrementä¸ºfloatç±»å‹å–å€¼"></a>å°è¯• incrby æ·»åŠ çš„incrementä¸ºfloatç±»å‹å–å€¼</h1><p>127.0.0.1:6379&gt; incrby num 0.9</p><h1 id="æŠ¥é”™ï¼›é”™è¯¯å€¼ä¸æ˜¯ä¸€ä¸ªintegerç±»å‹å–å€¼æˆ–è€…è¶…å‡ºå…¶èŒƒå›´å–å€¼"><a href="#æŠ¥é”™ï¼›é”™è¯¯å€¼ä¸æ˜¯ä¸€ä¸ªintegerç±»å‹å–å€¼æˆ–è€…è¶…å‡ºå…¶èŒƒå›´å–å€¼" class="headerlink" title="æŠ¥é”™ï¼›é”™è¯¯å€¼ä¸æ˜¯ä¸€ä¸ªintegerç±»å‹å–å€¼æˆ–è€…è¶…å‡ºå…¶èŒƒå›´å–å€¼"></a>æŠ¥é”™ï¼›é”™è¯¯å€¼ä¸æ˜¯ä¸€ä¸ªintegerç±»å‹å–å€¼æˆ–è€…è¶…å‡ºå…¶èŒƒå›´å–å€¼</h1><p>(error) ERR value is not an integer or out of range</p><h1 id="å³-incrã€incrbyã€decrã€decrbyä¸“ç”¨äºæ“ä½œæ•´æ•°ï¼›incrbyfloatç”¨äºæ“ä½œå°æ•°"><a href="#å³-incrã€incrbyã€decrã€decrbyä¸“ç”¨äºæ“ä½œæ•´æ•°ï¼›incrbyfloatç”¨äºæ“ä½œå°æ•°" class="headerlink" title="å³ incrã€incrbyã€decrã€decrbyä¸“ç”¨äºæ“ä½œæ•´æ•°ï¼›incrbyfloatç”¨äºæ“ä½œå°æ•°"></a>å³ incrã€incrbyã€decrã€decrbyä¸“ç”¨äºæ“ä½œæ•´æ•°ï¼›incrbyfloatç”¨äºæ“ä½œå°æ•°</h1><h1 id="éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šincrby-ä¸-decrby-åé¢çš„å–å€¼-incrementä¸-decrementå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼›"><a href="#éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šincrby-ä¸-decrby-åé¢çš„å–å€¼-incrementä¸-decrementå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼›" class="headerlink" title="éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šincrby ä¸ decrby åé¢çš„å–å€¼ incrementä¸ decrementå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼›"></a>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šincrby ä¸ decrby åé¢çš„å–å€¼ incrementä¸ decrementå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ï¼›</h1><p>127.0.0.1:6379&gt; set num1 1<br>OK</p><h1 id="num1-1-1-1-0"><a href="#num1-1-1-1-0" class="headerlink" title="( + num1 ) + ( - 1 ) = 1 - 1 = 0"></a>( + num1 ) + ( - 1 ) = 1 - 1 = 0</h1><p>127.0.0.1:6379&gt; incrby num1 -1<br>(integer) 0</p><p>127.0.0.1:6379&gt; get num1<br>â€œ0â€</p><h1 id="num1-1-0-1-1"><a href="#num1-1-0-1-1" class="headerlink" title="( + num1 ) + ( 1 ) = 0 + 1 = 1"></a>( + num1 ) + ( 1 ) = 0 + 1 = 1</h1><p>127.0.0.1:6379&gt; incrby num1 1<br>(integer) 1</p><p>127.0.0.1:6379&gt; get num1<br>â€œ1â€</p><h1 id="num1-2-1-2-1"><a href="#num1-2-1-2-1" class="headerlink" title="( + num1 ) + ( - 2 ) = 1 - 2 = -1"></a>( + num1 ) + ( - 2 ) = 1 - 2 = -1</h1><p>127.0.0.1:6379&gt; incrby num1 -2<br>(integer) -1</p><h1 id="num1-2-1-2-3"><a href="#num1-2-1-2-3" class="headerlink" title="( + num1 ) + ( - 2 ) = -1 - 2 = -3"></a>( + num1 ) + ( - 2 ) = -1 - 2 = -3</h1><p>127.0.0.1:6379&gt; decrby num1 2<br>(integer) -3</p><p>127.0.0.1:6379&gt; get num1<br>â€œ-3â€</p><h1 id="num1-1-3-3-3-3-0"><a href="#num1-1-3-3-3-3-0" class="headerlink" title="( + num1 ) + ( - 1 ) = -3 - ( -3 ) = -3 + 3 = 0"></a>( + num1 ) + ( - 1 ) = -3 - ( -3 ) = -3 + 3 = 0</h1><p>127.0.0.1:6379&gt; decrby num1 -3<br>(integer) 0</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### <span class="type">string</span>ä½œä¸ºæ•°å€¼æ“ä½œ</span><br><span class="line"></span><br><span class="line">* <span class="type">string</span>åœ¨rediså†…éƒ¨å­˜å‚¨é»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°å¢å‡ç±»å‹æ“ä½œincrã€decræ—¶å°±ä¼šè½¬å˜æˆæ•°å€¼å‹è¿›è¡Œè®¡ç®—ï¼›(å½’æ ¹ç»“åº•å…¶è¿˜æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²)</span><br><span class="line">* redisæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé‡‡ç”¨å•çº¿ç¨‹å¤„ç†æ‰€æœ‰ä¸šåŠ¡ï¼Œå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œçš„ï¼›å› æ­¤æ— éœ€è€ƒè™‘å¹¶å‘å¸¦æ¥çš„æ•°æ®ï¼›</span><br><span class="line">* æ³¨æ„ï¼š&lt;font style=<span class="string">"color:red;"</span>&gt;æŒ‰æ•°å€¼è¿›è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼ï¼Œæˆ–åˆ™è¶…è¶Šäº†redisæ•°å€¼ä¸Šé™èŒƒå›´ï¼Œå°†æŠ¥é”™&lt;/font&gt;ã€‚</span><br><span class="line"><span class="number">9</span> <span class="number">22</span> <span class="number">33</span>  <span class="number">7203</span> <span class="number">6854</span> <span class="number">77</span> <span class="number">5807</span> ï¼ˆjavaä¸­longå‹æ•°æ®æœ€å¤§å–å€¼ï¼ŒLong.MAX_VALUEï¼‰</span><br></pre></td></tr></table></figure><h1 id="1-ç¬¬ä¸€ç§æƒ…å†µï¼šåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼"><a href="#1-ç¬¬ä¸€ç§æƒ…å†µï¼šåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼" class="headerlink" title="1. ç¬¬ä¸€ç§æƒ…å†µï¼šåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼"></a>1. ç¬¬ä¸€ç§æƒ…å†µï¼šåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼</h1><p>  127.0.0.1:6379&gt; set num2 abc<br>  OK<br>  127.0.0.1:6379&gt; incr num2<br>  (error) ERR value is not an integer or out of range</p><h1 id="2-ç¬¬äºŒç§æƒ…å†µï¼Œè¶…è¶Šredisæ•°å€¼ä¸Šé™èŒƒå›´"><a href="#2-ç¬¬äºŒç§æƒ…å†µï¼Œè¶…è¶Šredisæ•°å€¼ä¸Šé™èŒƒå›´" class="headerlink" title="2. ç¬¬äºŒç§æƒ…å†µï¼Œè¶…è¶Šredisæ•°å€¼ä¸Šé™èŒƒå›´"></a>2. ç¬¬äºŒç§æƒ…å†µï¼Œè¶…è¶Šredisæ•°å€¼ä¸Šé™èŒƒå›´</h1><p>  127.0.0.1:6379&gt; incrby num2 11111111111111111111111111111111111111111111111111111111111111<br>  (error) ERR value is not an integer or out of range<br>  <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; **Tips <span class="number">1</span>:**</span><br><span class="line">  * redisç”¨äºæ§åˆ¶æ•°æ®åº“è¡¨ä¸»é”®idï¼Œä¸ºæ•°æ®åº“è¡¨ä¸»é”®æä¾›ç”Ÿæˆç­–ç•¥ï¼Œä¿éšœæ•°æ®åº“è¡¨çš„ä¸»é”®å”¯ä¸€æ€§</span><br><span class="line">  * æ­¤æ–¹æ¡ˆé€‚ç”¨äºæ‰€æœ‰æ•°æ®åº“ï¼Œä¸”æ”¯æŒæ•°æ®åº“é›†ç¾¤</span><br><span class="line"></span><br><span class="line">### æ•°æ®ç±»å‹-æ•°æ®æ—¶æ•ˆæ€§è®¾ç½®</span><br><span class="line"></span><br><span class="line">#### string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</span><br><span class="line"></span><br><span class="line">##### ä¸šåŠ¡åœºæ™¯</span><br><span class="line"></span><br><span class="line">* â€œæœ€å¼ºå¥³ç”Ÿâ€ å¯åŠ¨æµ·é€‰æŠ•ç¥¨ï¼Œåªèƒ½é€šè¿‡å¾®ä¿¡æŠ•ç¥¨ï¼Œæ¯ä¸ªå¾®ä¿¡å·æ¯<span class="number">4</span>ä¸ªå°æ—¶åªèƒ½æŠ•<span class="number">1</span>ç¥¨ï¼›</span><br><span class="line">* ç”µå•†å•†å®¶å¼€å¯çƒ­é—¨å•†å“æ¨èï¼Œçƒ­é—¨å•†å“ä¸èƒ½ä¸€ç›´å¤„äºçƒ­é—¨æœŸï¼Œæ¯ç§å•†å“çƒ­é—¨æœŸç»´æŒ<span class="number">3</span>å¤©ï¼Œ<span class="number">3</span>å¤©åè‡ªåŠ¨å–æ¶ˆçƒ­é—¨ï¼›</span><br><span class="line">* æ–°é—»ç½‘ç«™ä¼šå‡ºç°çƒ­ç‚¹æ–°é—»ï¼Œçƒ­ç‚¹æ–°é—»æœ€å¤§çš„ç‰¹å¾æ˜¯æ—¶æ•ˆæ€§ï¼Œå¦‚ä½•è‡ªåŠ¨æ§åˆ¶çƒ­ç‚¹æ–°é—»çš„æ—¶æ•ˆæ€§</span><br></pre></td></tr></table></figure><br>news_id: HB314790725 3åˆ†é’Ÿæ—¶æ•ˆæ€§ï¼š03:00ï¼ˆè¿›è¡Œå€’æ•°è®¡æ—¶ï¼‰<br>                                 â†“ â†“ â†“<br>news_id: HB314790725 3åˆ†é’Ÿæ—¶æ•ˆæ€§ï¼š00:00</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### è§£å†³æ–¹æ¡ˆ</span><br><span class="line"></span><br><span class="line">* è®¾ç½®æ•°æ®å…·æœ‰æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸ(æ•°æ®èƒ½æ´»å¤šä¹…ï¼Œæ¯”å¦‚ä¸‰åˆ†é’Ÿã€äº”åˆ†é’Ÿä¹‹ç±»çš„éªŒè¯ç æ—¶æ•ˆæ€§)</span><br></pre></td></tr></table></figure><h1 id="1-è¿™ä¸¤ä¸ªå‘½ä»¤çš„å·®åˆ«åœ¨äºç”Ÿå‘½å‘¨æœŸçš„å•ä½ä¸åŒ"><a href="#1-è¿™ä¸¤ä¸ªå‘½ä»¤çš„å·®åˆ«åœ¨äºç”Ÿå‘½å‘¨æœŸçš„å•ä½ä¸åŒ" class="headerlink" title="1. è¿™ä¸¤ä¸ªå‘½ä»¤çš„å·®åˆ«åœ¨äºç”Ÿå‘½å‘¨æœŸçš„å•ä½ä¸åŒ"></a>1. è¿™ä¸¤ä¸ªå‘½ä»¤çš„å·®åˆ«åœ¨äºç”Ÿå‘½å‘¨æœŸçš„å•ä½ä¸åŒ</h1><h1 id="2-setexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º-ç§’seconds"><a href="#2-setexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º-ç§’seconds" class="headerlink" title="2. setexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º ç§’seconds"></a>2. setexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º ç§’seconds</h1><h1 id="3-psetexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º-æ¯«ç§’milliseconds"><a href="#3-psetexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º-æ¯«ç§’milliseconds" class="headerlink" title="3. psetexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º æ¯«ç§’milliseconds"></a>3. psetexå‘½ä»¤çš„æ—¶é—´å•ä½ä¸º æ¯«ç§’milliseconds</h1><h1 id="æ ¼å¼ï¼šsetex-key-seconds-value"><a href="#æ ¼å¼ï¼šsetex-key-seconds-value" class="headerlink" title="æ ¼å¼ï¼šsetex key seconds value"></a>æ ¼å¼ï¼šsetex key seconds value</h1><h1 id="æ ¼å¼ï¼špsetex-key-milliseconds-value"><a href="#æ ¼å¼ï¼špsetex-key-milliseconds-value" class="headerlink" title="æ ¼å¼ï¼špsetex key milliseconds value"></a>æ ¼å¼ï¼špsetex key milliseconds value</h1><p>  #ç¤ºä¾‹(10ç§’åè¿‡æœŸ)ï¼š<br>  127.0.0.1:6379&gt; setex tel 10 1<br>  OK<br>  127.0.0.1:6379&gt; get tel<br>  â€œ1â€<br>  127.0.0.1:6379&gt; get tel<br>  â€œ1â€<br>  127.0.0.1:6379&gt; get tel<br>  (nil)<br>  127.0.0.1:6379&gt;</p><h1 id="å¦‚æœåœ¨-setex-ä¹‹åé‡æ–°å¯¹åŒä¸€ä¸ªé”®è¿›è¡Œ-set-key-valueï¼›åˆ™setexå‘½ä»¤æ‰€æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå°†ä¸å†èµ·ä½œç”¨"><a href="#å¦‚æœåœ¨-setex-ä¹‹åé‡æ–°å¯¹åŒä¸€ä¸ªé”®è¿›è¡Œ-set-key-valueï¼›åˆ™setexå‘½ä»¤æ‰€æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå°†ä¸å†èµ·ä½œç”¨" class="headerlink" title="å¦‚æœåœ¨ setex ä¹‹åé‡æ–°å¯¹åŒä¸€ä¸ªé”®è¿›è¡Œ set key valueï¼›åˆ™setexå‘½ä»¤æ‰€æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå°†ä¸å†èµ·ä½œç”¨"></a>å¦‚æœåœ¨ setex ä¹‹åé‡æ–°å¯¹åŒä¸€ä¸ªé”®è¿›è¡Œ set key valueï¼›åˆ™setexå‘½ä»¤æ‰€æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå°†ä¸å†èµ·ä½œç”¨</h1><p>  127.0.0.1:6379&gt; setex tel 10 1<br>  OK<br>  127.0.0.1:6379&gt; set tel 2<br>  OK<br>  127.0.0.1:6379&gt; get tel<br>  â€œ2â€<br>  127.0.0.1:6379&gt;<br>  <figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; **Tips <span class="number">2</span>:**</span><br><span class="line"></span><br><span class="line">* redis æ§åˆ¶æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡æ•°æ®æ˜¯å¦å¤±æ•ˆæ§åˆ¶ä¸šåŠ¡è¡Œä¸ºï¼Œé€‚ç”¨äºæ‰€æœ‰å…·æœ‰æ—¶æ•ˆæ€§é™å®šæ§åˆ¶çš„æ“ä½œ</span><br><span class="line"></span><br><span class="line">### keyçš„å‘½åè§„èŒƒ</span><br><span class="line"></span><br><span class="line">#### <span class="built_in">string</span> ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</span><br><span class="line"></span><br><span class="line">* æ•°æ®æ“ä½œä¸æˆåŠŸçš„åé¦ˆä¸æ•°æ®æ­£å¸¸æ“ä½œä¹‹é—´çš„å·®å¼‚</span><br><span class="line">  â‘  è¡¨ç¤ºè¿è¡Œç»“æ„æ˜¯å¦æˆåŠŸ</span><br><span class="line">    * ï¼ˆ<span class="built_in">int</span>egerï¼‰<span class="number">0</span> ---&gt; <span class="literal">false</span> å¤±è´¥</span><br><span class="line">    * ï¼ˆ<span class="built_in">int</span>egerï¼‰<span class="number">1</span> ---&gt; <span class="literal">true</span>  æˆåŠŸ</span><br><span class="line">  </span><br><span class="line">  â‘¡ è¡¨ç¤ºè¿è¡Œç»“æœå€¼</span><br><span class="line">    * ï¼ˆ<span class="built_in">int</span>egerï¼‰<span class="number">3</span> ---&gt; <span class="number">3</span>ä¸ª</span><br><span class="line">    * ï¼ˆ<span class="built_in">int</span>egerï¼‰<span class="number">1</span> ---&gt; <span class="number">1</span>ä¸ª</span><br><span class="line">* æ•°æ®æœªè·å–åˆ°</span><br><span class="line">  â‘ ï¼ˆnilï¼‰ç­‰åŒäº<span class="literal">null</span>ï¼Œä¸å­˜åœ¨</span><br><span class="line">* æ•°æ®æœ€å¤§å­˜å‚¨é‡</span><br><span class="line">  â‘  <span class="number">512</span>MBï¼ˆä¸Šé™ï¼‰</span><br><span class="line">* æ•°æ®è®¡ç®—æœ€å¤§èŒƒå›´ï¼ˆjavaä¸­çš„longçš„æœ€å¤§å€¼ï¼‰</span><br><span class="line">  â‘  <span class="number">9</span> <span class="number">22</span> <span class="number">33</span> <span class="number">7203</span> <span class="number">6854</span> <span class="number">7758</span> <span class="number">07</span></span><br><span class="line">  â‘  <span class="number">-9</span> <span class="number">22</span> <span class="number">33</span> <span class="number">7203</span> <span class="number">6854</span> <span class="number">7758</span> <span class="number">07</span></span><br><span class="line">  â‘¢ æ¯” <span class="number">9</span> <span class="number">22</span> <span class="number">33</span> <span class="number">7203</span> <span class="number">6854</span> <span class="number">7758</span> <span class="number">07</span>è¿˜è¦å¤§ï¼›æ¯”<span class="number">-9</span> <span class="number">22</span> <span class="number">33</span> <span class="number">7203</span> <span class="number">6854</span> <span class="number">7758</span> <span class="number">07</span>è¿˜è¦å°ï¼›åˆ™æŠ›å‡ºå¼‚å¸¸Errorï¼›</span><br><span class="line"></span><br><span class="line">#### <span class="built_in">string</span> ç±»å‹åº”ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line">##### ä¸šåŠ¡åœºæ™¯</span><br><span class="line"></span><br><span class="line">ä¸»é¡µé«˜é¢‘è®¿é—®ä¿¡æ¯æ˜¾ç¤ºæ§åˆ¶ï¼Œä¾‹å¦‚æ–°æµªå¾®åšå¤§Vä¸»é¡µæ˜¾ç¤ºç²‰ä¸æ•°ä¸å¾®åšæ•°é‡ï¼›  </span><br><span class="line"></span><br><span class="line">è¿™ç§æ•°æ®å¦‚ä½•æ”¾å…¥åˆ°rediså½“ä¸­æ€æ ·è¿›è¡Œå­˜å‚¨ï¼Ÿ</span><br><span class="line"></span><br><span class="line">##### è§£å†³æ–¹æ¡ˆ</span><br><span class="line"></span><br><span class="line">* åœ¨redisä¸­ä¸ºå¤§Vç”¨æˆ·è®¾å®šç”¨æˆ·ä¿¡æ¯ï¼Œä»¥ç”¨æˆ·ä¸»é”®å’Œå±æ€§å€¼ä½œä¸ºkeyï¼Œåå°è®¾å®šå®šæ—¶åˆ·æ–°ç­–ç•¥å³å¯</span><br></pre></td></tr></table></figure></p><h1 id="è¡¨åï¼šä¸»é”®åï¼šä¸»é”®å€¼ï¼šå±æ€§å"><a href="#è¡¨åï¼šä¸»é”®åï¼šä¸»é”®å€¼ï¼šå±æ€§å" class="headerlink" title="è¡¨åï¼šä¸»é”®åï¼šä¸»é”®å€¼ï¼šå±æ€§å"></a>è¡¨åï¼šä¸»é”®åï¼šä¸»é”®å€¼ï¼šå±æ€§å</h1><p>  eg:  user:id:3506728370:fans         â€”&gt;     12210947<br>  eg:  user:id:3506728370:blogs        â€”&gt;     6164<br>  eg:  user:id:3506728370:focuss       â€”&gt;     83</p><p>  127.0.0.1:6379&gt; set user:id:00789:fans 123456789<br>  OK</p><p>  127.0.0.1:6379&gt; set user:id:00789:blogs 789<br>  OK</p><p>  127.0.0.1:6379&gt; set user:id:00789 {id:00789,blogs:789,,fans:123456789}<br>  OK</p><p>  127.0.0.1:6379&gt; incr user:id:00789:fans<br>  (integer) 123456790</p><h1 id="æ˜¯ç›´æ¥å­˜å‚¨å±æ€§å–å€¼è¿˜æ˜¯é€šè¿‡jsonæ–¹å¼å“ªä¸€ç§æ¯”è¾ƒå¥½ï¼›"><a href="#æ˜¯ç›´æ¥å­˜å‚¨å±æ€§å–å€¼è¿˜æ˜¯é€šè¿‡jsonæ–¹å¼å“ªä¸€ç§æ¯”è¾ƒå¥½ï¼›" class="headerlink" title="æ˜¯ç›´æ¥å­˜å‚¨å±æ€§å–å€¼è¿˜æ˜¯é€šè¿‡jsonæ–¹å¼å“ªä¸€ç§æ¯”è¾ƒå¥½ï¼›"></a>æ˜¯ç›´æ¥å­˜å‚¨å±æ€§å–å€¼è¿˜æ˜¯é€šè¿‡jsonæ–¹å¼å“ªä¸€ç§æ¯”è¾ƒå¥½ï¼›</h1><h1 id="ç¬¬ä¸€ç§å¯ä»¥å–ç¬¬äºŒç§ä¹Ÿå¯ä»¥å–å‡ºï¼›"><a href="#ç¬¬ä¸€ç§å¯ä»¥å–ç¬¬äºŒç§ä¹Ÿå¯ä»¥å–å‡ºï¼›" class="headerlink" title="ç¬¬ä¸€ç§å¯ä»¥å–ç¬¬äºŒç§ä¹Ÿå¯ä»¥å–å‡ºï¼›"></a>ç¬¬ä¸€ç§å¯ä»¥å–ç¬¬äºŒç§ä¹Ÿå¯ä»¥å–å‡ºï¼›</h1><h1 id="ç¬¬ä¸€ç§æ”¹å˜æ•°æ®ä¼šè¦æ–¹ä¾¿ä¸€äº›ï¼›"><a href="#ç¬¬ä¸€ç§æ”¹å˜æ•°æ®ä¼šè¦æ–¹ä¾¿ä¸€äº›ï¼›" class="headerlink" title="ç¬¬ä¸€ç§æ”¹å˜æ•°æ®ä¼šè¦æ–¹ä¾¿ä¸€äº›ï¼›"></a>ç¬¬ä¸€ç§æ”¹å˜æ•°æ®ä¼šè¦æ–¹ä¾¿ä¸€äº›ï¼›</h1><h1 id="ç¬¬äºŒç§ä¸€æ”¹å…¨æ”¹ï¼›ä¸¤è€…æ²¡æœ‰è¯´å¥½åéœ€è¦çœ‹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æƒ…å†µã€ä¸šåŠ¡åœºæ™¯è€Œå®šã€é€‰æ‹©ï¼›"><a href="#ç¬¬äºŒç§ä¸€æ”¹å…¨æ”¹ï¼›ä¸¤è€…æ²¡æœ‰è¯´å¥½åéœ€è¦çœ‹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æƒ…å†µã€ä¸šåŠ¡åœºæ™¯è€Œå®šã€é€‰æ‹©ï¼›" class="headerlink" title="ç¬¬äºŒç§ä¸€æ”¹å…¨æ”¹ï¼›ä¸¤è€…æ²¡æœ‰è¯´å¥½åéœ€è¦çœ‹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æƒ…å†µã€ä¸šåŠ¡åœºæ™¯è€Œå®šã€é€‰æ‹©ï¼›"></a>ç¬¬äºŒç§ä¸€æ”¹å…¨æ”¹ï¼›ä¸¤è€…æ²¡æœ‰è¯´å¥½åéœ€è¦çœ‹å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æƒ…å†µã€ä¸šåŠ¡åœºæ™¯è€Œå®šã€é€‰æ‹©ï¼›</h1><p>  127.0.0.1:6379&gt;</p>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>åœ¨redisä¸­ä»¥jsonæ ¼å¼å­˜å‚¨å¤§Vç”¨æˆ·ä¿¡æ¯ï¼Œå®šæ—¶åˆ·æ–°ï¼ˆä¹Ÿå¯ä»¥ï¼‰</span><br></pre></td></tr></table></figure><p>  eg:  user:id:3506728370         â€”&gt;     {id:3506728370,name:æ˜¥æ™š,fans:123456789,blogs:6164,focus:83}<br>  <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt; **Tips3:**</span><br><span class="line"></span><br><span class="line">* redisåº”ç”¨äºå„ç§ç»“æ„å‹å’Œéç»“æ„å‹é«˜çƒ­è¯»æ•°æ®è®¿é—®åŠ é€Ÿ</span><br><span class="line"></span><br><span class="line">#### keyçš„è®¾ç½®çº¦å®š</span><br><span class="line"></span><br><span class="line">* æ•°æ®åº“ä¸­çš„çƒ­ç‚¹æ•°æ®keyå‘½ä»¤æƒ¯ä¾‹</span><br></pre></td></tr></table></figure></p><hr><pre><code>è¡¨å ï¼šä¸»é”®å ï¼šä¸»é”®å€¼   ï¼šå­—æ®µå</code></pre><hr><pre><code>eq1 : order :   id  : 29437595 : name</code></pre><hr><pre><code>eq2 : equip :   id  : 390472345: type</code></pre><hr><pre><code>eq3 : news  :   id  : 202004150: title</code></pre><hr>  <figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">rediså½“ä¸­çš„å¤§æ•°æ®è¿˜æ˜¯æ¥è‡ªäºæ•°æ®åº“ï¼ˆmysqlï¼‰ï¼›ä¹Ÿæœ‰å°éƒ¨åˆ†ä¸æ˜¯æ¥è‡ªäºæ•°æ®åº“ï¼›  </span><br><span class="line"></span><br><span class="line">### æ•°æ®ç±»å‹-hashç±»å‹ä»‹ç»ä¸åŸºæœ¬æ“ä½œ</span><br><span class="line"></span><br><span class="line">#### ç›®å½•Contents</span><br><span class="line"></span><br><span class="line">* æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»</span><br><span class="line">* string</span><br><span class="line">* hash</span><br><span class="line">* list</span><br><span class="line">* set</span><br><span class="line">* sorted_set</span><br><span class="line"></span><br><span class="line">#### hashç±»å‹</span><br><span class="line"></span><br><span class="line">##### å­˜å‚¨çš„ç–‘æƒ‘</span><br><span class="line"></span><br><span class="line">* stringå½“ä¸­ä»¥jsonæ–¹å¼å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼›</span><br></pre></td></tr></table></figure><hr><p>| h_user user:id:3506728370 |â€”â€”â€“&gt;| {name:æ˜¥æ™š, fans:12210862, blogs:6164, focus:83}|</p><hr><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(å–å‡ºæ•°æ®è¿˜è¡Œï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ•°æ®å°±æ˜¾å¾—ç¬¨æ‹™)  </span><br><span class="line"></span><br><span class="line">å¯¹äºä¸Šè¿°æ“ä½œï¼›å¯¹è±¡ç±»å‹æ•°æ®çš„å­˜å‚¨å¦‚æœå…·æœ‰æ¯”è¾ƒ**é¢‘ç¹çš„æ›´æ–°éœ€æ±‚æ“ä½œ**ä¼šæ˜¾å¾—ç¬¨é‡  </span><br><span class="line">é‚£ä¹ˆæ­¤æ—¶é’ˆå¯¹è¿™ç§æ¯”è¾ƒé¢‘ç¹çš„æ›´æ–°éœ€æ±‚æ“ä½œè½¬æ¢æˆ<span class="built_in">string</span>ä»¥å±æ€§å•ä¸ªè¿›è¡Œå­˜å‚¨å–å€¼æ–¹å¼åˆ™ä»–ä»¬è¿™å‡ ä¸ªæ•°æ®æ˜¯åˆ†æ•£åˆ†ç¦»çš„ï¼š</span><br></pre></td></tr></table></figure><hr><p>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€“         |<br>|| h_user user:id:3506728370       :name |â€”â€”â€“&gt;|  æ˜¥æ™š  |          |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€“         |<br>|                                                                      |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”        |<br>|| h_user user:id:3506728370       :fans |â€”â€”â€“&gt;| 12210862 |        |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”        |<br>|                                                                      |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”         â€”â€”â€”â€“        |<br>|| h_user user:id:3506728370       :blogs |â€”â€”â€“&gt;|  83     |        |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”         â€”â€”â€”â€“        |</p><hr><pre><code>|       |       ||       |       ||       |       |â†“       â†“       â†“</code></pre><hr><p>|                              â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“  |<br>|                              |                                    |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”â€“         â€”â€”â€”       |  |<br>|| h_user user:id:3506728370   |   :name |â€”â€”â€“&gt;|  æ˜¥æ™š  |       |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”-         â€”â€”â€”-       |  |<br>|                              |                                    |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”-         â€”â€”â€”â€”     |  |<br>|| h_user user:id:3506728370   |   :fans |â€”â€”â€“&gt;| 12210862 |     |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”-         â€”â€”â€”â€”     |  |<br>|                              |                                    |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”â€“         â€”â€”â€“        |  |<br>|| h_user user:id:3506728370   |   :blogs |â€”â€”â€“&gt;|  83 |         |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|â€”â€”â€”â€“         â€”â€”â€“        |  |<br>|                              |                                    |  |<br>|                              â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>                   |       |       |<br>                   |       |       |<br>                   |       |       |<br>                   â†“       â†“       â†“<br>#æ¢ç»“æ„ï¼›å·¦è¾¹ä¸»é”®åˆä¸€ï¼›å³è¾¹å°†å±æ€§å¯¹ä¸Šå…¶å€¼æ”¾ä¸€å—ï¼›redisä¸ºé”®å€¼å¯¹æ•°æ®åº“ï¼›ç±»ä¼¼äºredisé‡Œé¢æ”¾redisçš„æ„æ€ï¼›ğŸ˜‚ï¼›å¯¹åº”çš„æ•°æ®è¿˜æ˜¯value</p><hr><p>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“  |<br>|                                               | å­˜å‚¨ç©ºé—´                           |  |<br>|                                               |   â€”â€”â€“         â€”â€”â€”-      |  |<br>|                                               |   | name |         |  æ˜¥æ™š  |      |  |<br>|                                               |   â€”â€”â€“         â€”â€”â€”-      |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“                  |                                    |  |<br>|| h_user user:id:3506728370 |â€”â€”â€”â€”â€”â€“&gt;|   â€”â€”â€“         â€”â€”â€”â€”    |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“                  |   | fans |         | 12210862 |    |  |<br>|                                               |   â€”â€”â€“         â€”â€”â€”â€”    |  |<br>|                                               |                                    |  |<br>|                                               |   â€”â€”â€”         â€”â€”â€“       |  |<br>|                                               |   | blogs |         |  83  |       |  |<br>|                                               |   â€”â€”â€”         â€”â€”â€“       |  |<br>|                                               |                                    |  |<br>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“  |</p><hr><pre><code>|       |       ||       |       ||       |       |â†“       â†“       â†“</code></pre><hr><p>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ - |<br>|                                               | å­˜å‚¨ç©ºé—´ï¼ˆå³è¾¹çš„è¯¥ç»“æ„å³hashï¼‰                             |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|                                               |   |  field  |  name |         |  value  |  æ˜¥æ™š  |        |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-       |                                                          |  |<br>||   key    | h_user user:id:3506728370 |â€”â€”&gt;|   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€”-    |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-       |   |  field  |  fans |         |  value  |  12210862 |    |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€”-    |  |<br>|                                               |                                                          |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|                                               |   |  field  |  blogs |         |  value  |  83  |        |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|                                               |                                                          |  |<br>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”  |</p><hr><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æˆ–è€…è¯´keyå¯¹åº”çš„ä¸å†æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°æ®äº†ï¼›è€Œæ˜¯ä¸€å †æ•°æ®ï¼›</span><br><span class="line">è€Œè¿™ä¸€å¯¹æ•°æ®å®ƒçš„æ•´ä½“ç»“æ„å’Œå‰é¢æ‰€çœ‹çš„é‚£ä¸ªç»“æ„æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼›è¿™å°±æ˜¯æ‰€è°“çš„hashç±»å‹ï¼›</span><br><span class="line"></span><br><span class="line">#### hashç±»å‹</span><br><span class="line"></span><br><span class="line">* æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå¯¹ä¸€ç³»åˆ—å­˜å‚¨çš„æ•°æ®è¿›è¡Œç¼–ç»„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå…¸å‹åº”ç”¨å­˜å‚¨å¯¹è±¡ä¿¡æ¯ï¼›ï¼ˆå¯ä»¥ç†è§£ä¸ºæ˜¯rediså½“ä¸­çš„å°å‹redisï¼‰</span><br><span class="line">* éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªé”®å€¼å¯¹æ•°æ®ï¼›</span><br></pre></td></tr></table></figure><hr><p>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ - |<br>|                                               | hashå­˜å‚¨ç©ºé—´                                              |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”-       |  |<br>|                                               |   |      field1     |          |      value1     |       |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”-       |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-       |                                                          |  |<br>||                key                   |â€”â€”&gt;|   â€”â€”â€”â€”â€”â€”â€“        â€”â€”â€”â€”â€”â€”â€”-     |  |<br>|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-       |   |      field2     |          |      value2     |       |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“        â€”â€”â€”â€”â€”â€”â€”-     |  |<br>|                                               |                                                          |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|                                               |   |      field3      |         |      value3     |       |  |<br>|                                               |   â€”â€”â€”â€”â€”â€”â€“         â€”â€”â€”â€”â€”â€”â€“      |  |<br>|                                               |                                                          |  |<br>|                                               â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”  |</p><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">hash</span>åº•å±‚å…¶å®ä¸ºä¸€ä¸ª<span class="built_in">hash</span>è¡¨çš„å­˜å‚¨ç»“æ„ï¼›  </span><br><span class="line"><span class="built_in">hash</span>å­˜å‚¨ç»“æ„ä¼˜åŒ–ï¼š  </span><br><span class="line"></span><br><span class="line">* å¦‚æœfieldæ•°é‡è¾ƒå°‘ï¼Œå­˜å‚¨ç»“æ„ä¼˜åŒ–ä¸ºç±»æ•°ç»„ï¼ˆè¿˜ä¸æ˜¯çœŸæ•°ç»„ï¼‰ç»“æ„</span><br><span class="line">* å¦‚æœfieldæ•°é‡è¾ƒå¤šï¼Œå­˜å‚¨ç»“æ„ä½¿ç”¨HashMapç»“æ„</span><br><span class="line"></span><br><span class="line"><span class="comment">#### hash ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">* æ·»åŠ /ä¿®æ”¹æ•°æ®(å±æ€§å­˜åœ¨åˆ™è¿›è¡Œä¿®æ”¹ï¼›å±æ€§ä¸å­˜åœ¨åˆ™è¿›è¡Œæ–°å¢)</span><br></pre></td></tr></table></figure><p>  hset key field value<br>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>è·å–æ•°æ®</span><br></pre></td></tr></table></figure><br>  hget key field<br>  hgetall key<br>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>åˆ é™¤æ•°æ®</span><br></pre></td></tr></table></figure><br>  hdel key field1 [field2 â€¦]<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br></pre></td></tr></table></figure></p><h1 id="è®¾ç½®å€¼"><a href="#è®¾ç½®å€¼" class="headerlink" title="è®¾ç½®å€¼"></a>è®¾ç½®å€¼</h1><p>127.0.0.1:6379&gt; hset user name laowang<br>(integer) 1<br>127.0.0.1:6379&gt; hset user age 100<br>(integer) 1<br>127.0.0.1:6379&gt; hset user gender girl<br>(integer) 1</p><h1 id="å°†å€¼å…¨éƒ¨å–å‡º"><a href="#å°†å€¼å…¨éƒ¨å–å‡º" class="headerlink" title="å°†å€¼å…¨éƒ¨å–å‡º"></a>å°†å€¼å…¨éƒ¨å–å‡º</h1><p>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œageâ€<br>4) â€œ100â€<br>5) â€œgenderâ€<br>6) â€œgirlâ€</p><h1 id="è¿›è¡Œå•ä¸ªå–å€¼"><a href="#è¿›è¡Œå•ä¸ªå–å€¼" class="headerlink" title="è¿›è¡Œå•ä¸ªå–å€¼"></a>è¿›è¡Œå•ä¸ªå–å€¼</h1><p>127.0.0.1:6379&gt; hget user name<br>â€œlaowangâ€<br>127.0.0.1:6379&gt; hget user gender<br>â€œgirlâ€<br>127.0.0.1:6379&gt; hget user age<br>â€œ100â€</p><h1 id="è¿›è¡Œåˆ é™¤å±æ€§"><a href="#è¿›è¡Œåˆ é™¤å±æ€§" class="headerlink" title="è¿›è¡Œåˆ é™¤å±æ€§"></a>è¿›è¡Œåˆ é™¤å±æ€§</h1><p>127.0.0.1:6379&gt; hdel user gender<br>(integer) 1<br>127.0.0.1:6379&gt; hdel user age name<br>(integer) 2<br>127.0.0.1:6379&gt; hdel user age<br>(integer) 0<br>127.0.0.1:6379&gt; hgetall user<br>(empty list or set)</p><h1 id="è®¾ç½®å€¼ï¼›é‡æ–°èµ‹å€¼åˆ™è¦†ç›–åŸæ¥å­˜åœ¨çš„å€¼"><a href="#è®¾ç½®å€¼ï¼›é‡æ–°èµ‹å€¼åˆ™è¦†ç›–åŸæ¥å­˜åœ¨çš„å€¼" class="headerlink" title="è®¾ç½®å€¼ï¼›é‡æ–°èµ‹å€¼åˆ™è¦†ç›–åŸæ¥å­˜åœ¨çš„å€¼"></a>è®¾ç½®å€¼ï¼›é‡æ–°èµ‹å€¼åˆ™è¦†ç›–åŸæ¥å­˜åœ¨çš„å€¼</h1><p>127.0.0.1:6379&gt; hset user name laowang<br>(integer) 1<br>127.0.0.1:6379&gt; hset user name laoli<br>(integer) 0<br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaoliâ€<br>127.0.0.1:6379&gt; hset user name laowang<br>(integer) 0<br>127.0.0.1:6379&gt; hget user name<br>â€œlaowangâ€</p><h1 id="æŸ¥çœ‹é•¿åº¦ï¼›æ£€æŸ¥çš„æ˜¯fieldçš„æ•°é‡ï¼›"><a href="#æŸ¥çœ‹é•¿åº¦ï¼›æ£€æŸ¥çš„æ˜¯fieldçš„æ•°é‡ï¼›" class="headerlink" title="æŸ¥çœ‹é•¿åº¦ï¼›æ£€æŸ¥çš„æ˜¯fieldçš„æ•°é‡ï¼›"></a>æŸ¥çœ‹é•¿åº¦ï¼›æ£€æŸ¥çš„æ˜¯fieldçš„æ•°é‡ï¼›</h1><p>127.0.0.1:6379&gt; hlen user<br>(integer) 1</p><h1 id="æ£€æŸ¥fieldæ˜¯å¦å­˜åœ¨ï¼›0ä¸å­˜åœ¨ï¼›1å­˜åœ¨"><a href="#æ£€æŸ¥fieldæ˜¯å¦å­˜åœ¨ï¼›0ä¸å­˜åœ¨ï¼›1å­˜åœ¨" class="headerlink" title="æ£€æŸ¥fieldæ˜¯å¦å­˜åœ¨ï¼›0ä¸å­˜åœ¨ï¼›1å­˜åœ¨"></a>æ£€æŸ¥fieldæ˜¯å¦å­˜åœ¨ï¼›0ä¸å­˜åœ¨ï¼›1å­˜åœ¨</h1><p>127.0.0.1:6379&gt; hexists user gender<br>(integer) 0<br>127.0.0.1:6379&gt; hexists user name<br>(integer) 1</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### æ•°æ®ç±»å‹-hashæ‰©å±•æ“ä½œä¸ä½¿ç”¨æ³¨æ„äº‹é¡¹</span><br><span class="line"></span><br><span class="line">#### hash ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ</span><br><span class="line"></span><br><span class="line">(keyå½“ä¸­çš„fieldä¸ä¼šè¿›è¡Œé‡å¤ï¼Œå°±å¦‚æœé‡å¤è®¾ç½®ç›¸åŒçš„fieldå°†ä¼šå‘ç”Ÿè¦†ç›–ï¼›è€Œä¸åŒçš„fieldæ‰€å¯¹åº”çš„æ˜¯å…è®¸ç›¸åŒå€¼å­˜åœ¨çš„)</span><br></pre></td></tr></table></figure><p>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œ101.09â€<br>5) â€œageâ€<br>6) â€œ101.09â€<br>127.0.0.1:6379&gt; hset user name laoli<br>(integer) 0<br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaoliâ€<br>3) â€œgenderâ€<br>4) â€œ101.09â€<br>5) â€œageâ€<br>6) â€œ101.09â€</p><p>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œgirlâ€<br>5) â€œageâ€<br>6) â€œ101.09â€<br>127.0.0.1:6379&gt; hset user gender 101.09<br>(integer) 0<br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œ101.09â€<br>5) â€œageâ€<br>6) â€œ101.09â€</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">* </span>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„å­—æ®µåæˆ–å­—æ®µå€¼</span><br></pre></td></tr></table></figure><p>  hkeys key<br>  hvals key<br>  <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>è®¾ç½®æŒ‡å®šå­—æ®µçš„æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</span><br></pre></td></tr></table></figure><br>  hincrby key field increment<br>  hincrbyfloat key field increment<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br></pre></td></tr></table></figure><br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œgirlâ€<br>5) â€œageâ€<br>6) â€œ100â€<br>127.0.0.1:6379&gt; hkeys user</p><p>1) â€œnameâ€<br>2) â€œgenderâ€<br>3) â€œageâ€<br>127.0.0.1:6379&gt; hvals user</p><p>1) â€œlaowangâ€<br>2) â€œgirlâ€<br>3) â€œ100â€<br>127.0.0.1:6379&gt; hincrby user age 1<br>(integer) 101<br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œgirlâ€<br>5) â€œageâ€<br>6) â€œ101â€<br>127.0.0.1:6379&gt; hincrbyfloat user age 0.09<br>â€œ101.09â€<br>127.0.0.1:6379&gt; hgetall user</p><p>1) â€œnameâ€<br>2) â€œlaowangâ€<br>3) â€œgenderâ€<br>4) â€œgirlâ€<br>5) â€œageâ€<br>6) â€œ101.09â€</p><p>127.0.0.1:6379&gt; hset user2 name laowang<br>(integer) 1</p><h1 id="è¿”å›å½¢å¼éƒ½æ˜¯é€šè¿‡åˆ—è¡¨çš„å½¢å¼è¿›è¡Œè¿”å›"><a href="#è¿”å›å½¢å¼éƒ½æ˜¯é€šè¿‡åˆ—è¡¨çš„å½¢å¼è¿›è¡Œè¿”å›" class="headerlink" title="è¿”å›å½¢å¼éƒ½æ˜¯é€šè¿‡åˆ—è¡¨çš„å½¢å¼è¿›è¡Œè¿”å›"></a>è¿”å›å½¢å¼éƒ½æ˜¯é€šè¿‡åˆ—è¡¨çš„å½¢å¼è¿›è¡Œè¿”å›</h1><p>127.0.0.1:6379&gt; hkeys user2</p><p>1) â€œnameâ€</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">#### hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>hashç±»å‹ä¸‹çš„valueåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¸å…è®¸å­˜å‚¨å…¶ä»–æ•°æ®ç±»å‹ï¼Œä¸å…è®¸åµŒå¥—ç°è±¡ã€‚å¦‚æœæ•°æ®æœªè·å–åˆ°ï¼Œå¯¹åº”çš„å€¼ä¸ºï¼ˆnilï¼‰</span><br><span class="line"><span class="bullet">* </span>æ¯ä¸ªhash å¯ä»¥å­˜å‚¨2^32 - 1 ä¸ªé”®å€¼å¯¹ï¼›ï¼ˆä¸Šé™ï¼‰</span><br><span class="line"><span class="bullet">* </span>hashç±»å‹ååˆ†è´´è¿‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ·»åŠ åˆ é™¤å¯¹è±¡å±æ€§ã€‚ä½†æ˜¯hashè®¾è®¡åˆè¡·<span class="strong">**ä¸æ˜¯ä¸ºäº†å­˜å‚¨å¤§é‡å¯¹è±¡è€Œè®¾è®¡**</span>çš„ï¼Œ<span class="strong">**åˆ‡è®°ä¸å¯æ»¥ç”¨**</span>ï¼Œ<span class="strong">**æ›´ä¸å¯ä»¥å°†hashä½œä¸ºå¯¹è±¡åˆ—è¡¨ä½¿ç”¨**</span>(éšç€å­˜å‚¨å¤§é‡å¯¹è±¡ï¼Œé‚£ä¹ˆæ•ˆç‡å°†ä¼šé™ä½)ï¼›</span><br><span class="line"><span class="bullet">* </span>hgetall æ“ä½œå¯ä»¥è·å–å…¨éƒ¨å±æ€§ï¼Œå¦‚æœå†…éƒ¨fieldè¿‡å¤šï¼Œéå†æ•´ä½“æ•°æ®æ•ˆç‡å°±ä¼šä½ï¼Œæœ‰å¯èƒ½æˆä¸ºæ•°æ®è®¿é—®ç“¶é¢ˆã€‚ï¼ˆæ¯æ¬¡æŸ¥è¯¢çš„æ—¶å€™æœ€å¥½æ˜¯è¦å“ªä¸ªæŸ¥è¯¢é‚£ä¸ªå³ä½¿ç”¨hget key fieldè¿™ç§æ–¹å¼ï¼›å› ä¸ºæœ‰äº›æ—¶å€™æ‹¿å‡ºä¸€äº›ä¸éœ€è¦çš„æ•°æ®æœ‰ä¸ªæ—¶å€™ä¼šå¾ˆå½±å“æ•ˆç‡ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="section">### æ•°æ®ç±»å‹-hashå®ç°è´­ç‰©è½¦</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### hash ç±»å‹åº”ç”¨åœºæ™¯</span></span><br><span class="line"></span><br><span class="line"><span class="section">##### ä¸šåŠ¡åœºæ™¯</span></span><br><span class="line"></span><br><span class="line">ç”µå•†ç½‘ç«™è´­ç‰©è½¦è®¾è®¡ä¸å®ç°  </span><br><span class="line"></span><br><span class="line">ï¼ˆäº¬ä¸œç”µå•†ç½‘ç«™è´­ç‰©è½¦ï¼‰  </span><br><span class="line"></span><br><span class="line">åˆ†æï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>ä¸åŒç”¨æˆ·çš„è´­ç‰©è½¦æ˜¯å…±ç”¨è¿˜æ˜¯å„ç”¨ä¸ªçš„ï¼ˆæ¯ä¸ªç”¨æˆ·çš„idå¯ä»¥è¿›è¡ŒåŒºåˆ†ï¼‰ï¼›</span><br><span class="line"><span class="bullet">2. </span>ä¸€ä¸ªè´­ç‰©è½¦ä¸­æ˜¯ä¸€æ ·å•†å“è¿˜æ˜¯å¤šæ ·å•†å“?</span><br><span class="line"><span class="bullet">3. </span>ä¸€ä¸ªå•†å“å­˜åœ¨æœ‰å¯¹åº”è´­ä¹°çš„æ•°é‡ï¼›</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶:  </span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>å¯ä»¥ä½¿ç”¨  ç”¨æˆ·id:key  ï¼Œå³ç”¨æˆ·idä½œä¸ºkeyï¼›</span><br><span class="line"><span class="bullet">2. </span>ç”¨ç”¨æˆ·æ‰€ä¹°çš„å•†å“ç¼–å·ä½œä¸ºfieldï¼Œå³ å•†å“id:fieldï¼›</span><br><span class="line"><span class="bullet">3. </span>é‚£ä¹ˆå¯¹åº”çš„valueå³è¯¥å•†å“æ‰€è´­ä¹°çš„æ•°é‡ï¼Œå³ æ•°é‡:valueï¼›</span><br><span class="line"><span class="bullet">4. </span>é‚£ä¹ˆæ­¤æ—¶ç»“æ„å®Œæˆã€‚</span><br><span class="line"></span><br><span class="line">é—®é¢˜ï¼š è´­ç‰©è½¦æ‰€å¯¹åº”çš„æ“ä½œï¼Œrediså½“ä¸­çš„hashæ˜¯å¦æ”¯æŒï¼Ÿ  </span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>å•†å“æ•°é‡çš„è¯»å–ï¼šå–å€¼ï¼šhget</span><br><span class="line"><span class="bullet">2. </span>å•†å“æ•°é‡çš„å¢åŠ ã€è®¾ç½®ï¼šå¢åŠ :hincrbyï¼›è®¾ç½®:hset</span><br><span class="line"><span class="bullet">3. </span>åˆ é™¤è´­ç‰©è½¦ä¸­æŸä¸€å•†å“: åˆ é™¤:hdel</span><br><span class="line"><span class="bullet">4. </span>å…¨é€‰è·å–å¾—åˆ°å…¨éƒ¨çš„å•†å“ï¼šå…¨é€‰:hgetall</span><br><span class="line"><span class="bullet">5. </span>è·å–å•†å“æ€»æ•°é‡: æ€»é‡:hlen</span><br><span class="line"></span><br><span class="line"><span class="section">##### ä¸šåŠ¡åˆ†æ</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>ä»…åˆ†æè´­ç‰©è½¦çš„rediså­˜å‚¨æ¨¡å‹</span><br><span class="line"><span class="bullet">  * </span>æ·»åŠ ã€æµè§ˆã€æ›´æ”¹æ•°é‡ã€åˆ é™¤ã€æ¸…ç©º</span><br><span class="line"><span class="bullet">* </span>è´­ç‰©è½¦ä¸æ•°æ®åº“é—´æŒä¹…åŒ–åŒæ­¥ï¼ˆä¸è®¨è®ºï¼‰</span><br><span class="line"><span class="bullet">* </span>è´­ç‰©è½¦ä¸è®¢å•é—´å…³ç³»ï¼ˆä¸è®¨è®ºï¼‰</span><br><span class="line"><span class="bullet">  * </span>æäº¤è´­ç‰©è½¦ï¼šè¯»å–æ•°æ®ç”Ÿæˆè®¢å•</span><br><span class="line"><span class="bullet">  * </span>å•†å®¶ä¸´æ—¶ä»·æ ¼è°ƒæ•´ï¼šéš¶å±äºè®¢å•çº§åˆ«</span><br><span class="line"><span class="bullet">* </span>æœªç™»å½•ç”¨æˆ·è´­ç‰©è½¦ä¿¡æ¯å­˜å‚¨ï¼ˆä¸è®¨è®ºï¼‰</span><br><span class="line"><span class="bullet">  * </span>cookieå­˜å‚¨</span><br><span class="line"></span><br><span class="line"><span class="section">##### è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>ä»¥å®¢æˆ·idä½œä¸ºkeyï¼Œæ¯ä½å®¢æˆ·åˆ›å»ºä¸€ä¸ªhashå­˜å‚¨ç»“æ„å­˜å‚¨å¯¹åº”çš„è´­ç‰©è½¦ä¿¡æ¯</span><br><span class="line"><span class="bullet">* </span>å°†å•†å“ç¼–å·ä½œä¸ºfieldï¼Œè´­ä¹°æ•°é‡ä½œä¸ºvalueè¿›è¡Œå­˜å‚¨</span><br><span class="line"><span class="bullet">* </span>æ·»åŠ å•†å“ï¼Œè¿½åŠ å…¨æ–°çš„fieldä¸value</span><br><span class="line"><span class="bullet">* </span>æµè§ˆï¼šéå†hash</span><br><span class="line"><span class="bullet">* </span>æ›´æ”¹æ•°é‡ï¼šè‡ªå¢/è‡ªå‡ï¼Œè®¾ç½®valueå€¼</span><br><span class="line"><span class="bullet">* </span>åˆ é™¤å•†å“ï¼šåˆ é™¤field</span><br><span class="line"><span class="bullet">* </span>æ¸…ç©ºï¼šåˆ é™¤field</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br></pre></td></tr></table></figure><p>127.0.0.1:6379&gt; hmset 001 g01 100 g02 200<br>OK<br>127.0.0.1:6379&gt; hmset 002 g02 1 g04 7 g06 100<br>OK<br>127.0.0.1:6379&gt; hset 001 g03 9<br>(integer) 1<br>127.0.0.1:6379&gt; hgetall 001</p><p>1) â€œg01â€<br>2) â€œ100â€<br>3) â€œg02â€<br>4) â€œ200â€<br>5) â€œg03â€<br>6) â€œ9â€<br>127.0.0.1:6379&gt; hdel 001 g01<br>(integer) 1<br>127.0.0.1:6379&gt; hgetall 001</p><p>1) â€œg02â€<br>2) â€œ200â€<br>3) â€œg03â€<br>4) â€œ9â€<br>127.0.0.1:6379&gt; hincrby 001 g03 1<br>(integer) 10<br>127.0.0.1:6379&gt; hgetall 001</p><p>1) â€œg02â€<br>2) â€œ200â€<br>3) â€œg03â€<br>4) â€œ10â€</p><pre><code>##### å½“å‰è®¾è®¡æ˜¯å¦åŠ é€Ÿäº†è´­ç‰©è½¦çš„å‘ˆç°å½“å‰ä»…ä»…æ˜¯å°†æ•°æ®å­˜å‚¨åˆ°äº†redisä¸­ï¼Œå¹¶æ²¡æœ‰èµ·åˆ°åŠ é€Ÿçš„ä½œç”¨ï¼Œå•†å“ä¿¡æ¯è¿˜éœ€è¦äºŒæ¬¡æŸ¥è¯¢æ•°æ®åº“è´­ç‰©è½¦åˆ°åº•çœ‹åˆ°çš„æ˜¯ä»€ä¹ˆï¼Œç¬¬ä¸€ä¸ªå•†å“idæ˜¯ä»€ä¹ˆ?  å•†å“ä¿¡æ¯è¿˜å¿…é¡»äºŒæ¬¡å»æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼›å½“å‰çš„è¿™ç§æ–¹æ¡ˆæŸ¥çœ‹è´­ç‰©è½¦åªæ˜¯å­˜è´­ç‰©è½¦ï¼Œå¹¶æ²¡æœ‰æé«˜æ•ˆç‡ï¼›##### åˆ†æè¦è§£å†³çš„é—®é¢˜* æ¯æ¡è´­ç‰©è½¦ä¸­çš„å•†å“è®°å½•ä¿å­˜æˆä¸¤æ¡field### hashå®ç°æŠ¢è´­### æ•°æ®ç±»å‹-listç±»å‹ä»‹ç»ä¸åŸºæœ¬æ“ä½œ### æ•°æ®ç±»å‹-listé˜»å¡æ•°æ®è·å–### æ•°æ®ç±»å‹-listæ‰©å±•æ“ä½œåˆ é™¤æ•°æ®### æ•°æ®ç±»å‹-listå®ç°æ—¥å¿—æ¶ˆæ¯é˜Ÿåˆ—### æ•°æ®ç±»å‹-setç±»å‹ä»‹ç»ä¸åŸºæœ¬æ“ä½œ### æ•°æ®ç±»å‹-setæ“ä½œéšæœºæ•°æ®### æ•°æ®ç±»å‹-setæ•°æ®äº¤å¹¶å·®æ“ä½œ### æ•°æ®ç±»å‹-setå®ç°æƒé™æ ¡éªŒ### æ•°æ®ç±»å‹-setå®ç°ç½‘ç«™è®¿é—®é‡ç»Ÿè®¡### æ•°æ®ç±»å‹-setå®ç°é»‘ç™½åå•### setç±»å‹ä»‹ç»ä¸åŸºæœ¬æ“ä½œ### æ•°æ®ç±»å‹-sorted_setåŸºæœ¬æ“ä½œï¼ˆ2ï¼‰### æ•°æ®ç±»å‹-sorted_setå®ç°æ’è¡Œæ¦œ### setå®ç°æ—¶æ•ˆæ€§ä»»åŠ¡ç®¡ç†### setå¸¦æœ‰æƒé‡çš„ä»»åŠ¡ç®¡ç†### æ•°æ®ç±»å‹-æ¡ˆä¾‹-æŒ‰æ¬¡ç»“ç®—çš„æœåŠ¡æ§åˆ¶### æ•°æ®ç±»å‹-æ¡ˆä¾‹-å¾®ä¿¡æ¥æ”¶æ¶ˆæ¯é¡ºåºæ§åˆ¶### é€šç”¨æŒ‡ä»¤-keyåŸºæœ¬æ“ä½œ### é€šç”¨æŒ‡ä»¤-keyæ—¶æ•ˆæ€§æ§åˆ¶æ“ä½œ### é€šç”¨æŒ‡ä»¤-keyæŸ¥è¯¢æ“ä½œ### é€šç”¨æŒ‡ä»¤-keyå…¶ä»–æ“ä½œ### é€šç”¨æŒ‡ä»¤-dbåŸºæœ¬æ“ä½œ### é€šç”¨æŒ‡ä»¤-dbå…¶ä»–æ“ä½œ### jedis-jedisç®€ä»‹### jedis-helloworldï¼ˆjedisç‰ˆï¼‰### jedis-jediså¸¸è§„æ“ä½œæ¼”ç¤º### jedis-ä¸šåŠ¡è¯·æ±‚æ¬¡æ•°æ§åˆ¶æ¡ˆä¾‹éœ€æ±‚åˆ†æ### jedis-ç¨‹åºç»“æ„æ­å»º### jedis-ç¨‹åºä»£ç å®ç°### jedis-å·¥å…·ç±»åˆ¶ä½œ### jedis-å¯è§†åŒ–å®¢æˆ·ç«¯ä»‹ç»### linuxç¯å¢ƒå®‰è£…redis-åŸºäºLinuxå®‰è£…redis### linuxç¯å¢ƒå®‰è£…redis-æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡### linuxç¯å¢ƒå®‰è£…redis-æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨æœåŠ¡### linuxç¯å¢ƒå®‰è£…redis-é…ç½®æ–‡ä»¶å¯åŠ¨ç›®å½•ç®¡ç†### æŒä¹…åŒ–-æŒä¹…åŒ–ç®€ä»‹#### è¯¾ç¨‹å®‰æ’##### è¯¾ç¨‹è®¡åˆ’&gt; Windowsç¯å¢ƒ1. RedisåŸºç¡€  * Rediså…¥é—¨  * æ•°æ®ç±»å‹  * é€šç”¨å‘½ä»¤  * Jedis&gt; Linux ç¯å¢ƒ2. Redisé«˜çº§  * Rediså®‰è£…  * æŒä¹…åŒ–  * äº‹åŠ¡  * åˆ é™¤ç­–ç•¥  * redis.conf  * é«˜çº§æ•°æ®ç±»å‹3. Redisé›†ç¾¤4. ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ#### ç›®å½•Contents* æŒä¹…åŒ–ç®€ä»‹* RDB* AOF* RDBä¸AOFåŒºåˆ«* æŒä¹…åŒ–åº”ç”¨åœºæ™¯é¦–å…ˆä»€ä¹ˆæ˜¯æŒä¹…åŒ–ï¼Ÿé’ˆå¯¹rediså½“ä¸­çš„æŒä¹…åŒ–æ–¹æ¡ˆè¿›è¡Œé€ä¸€è®²è§£ï¼Œå¹¶å¯¹æ–¹æ¡ˆä¹‹é—´è¿›è¡Œä¸€ä¸ªæ¯”å¯¹ï¼›#### æ„å¤–çš„æ–­ç”µå†™è®ºæ–‡çš„æ—¶å€™æ–­ç”µäº†ã€‚#### â€œè‡ªåŠ¨å¤‡ä»½â€å…¶å®æ˜¯å°†å†…å­˜å½“ä¸­çš„æ•°æ®ä¸åœ¨ç¡¬ç›˜å½“ä¸­çš„æ•°æ®åšäº†ä¸€ä¸ªå…³è”ã€‚### æŒä¹…åŒ–-saveæŒ‡ä»¤### æŒä¹…åŒ–-RDBç›¸å…³é…ç½®### æŒä¹…åŒ–-æ•°æ®æ¢å¤è¿‡ç¨‹æ¼”ç¤º### æŒä¹…åŒ–-saveæŒ‡ä»¤å·¥ä½œåŸç†### æŒä¹…åŒ–-bgsaveæŒ‡ä»¤ä¸å·¥ä½œåŸç†### æŒä¹…åŒ–-saveé…ç½®ä¸å·¥ä½œåŸç†### æŒä¹…åŒ–-RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”ä¸ä¼˜ç¼ºç‚¹åˆ†æ### æŒä¹…åŒ–-AOFç®€ä»‹### æŒä¹…åŒ–-AOFæŒä¹…åŒ–ç­–ç•¥åŸºæœ¬æ“ä½œ### æŒä¹…åŒ–-AOFé‡å†™æ¦‚å¿µä¸å‘½ä»¤æ‰§è¡Œ### æŒä¹…åŒ–-AOFè‡ªåŠ¨é‡å†™é…ç½®### æŒä¹…åŒ–-AOFé‡å†™å·¥ä½œåŸç†### æŒä¹…åŒ–-RDBä¸AOFæ–¹æ¡ˆå¯¹æ¯”### æŒä¹…åŒ–-æŒä¹…åŒ–åº”ç”¨åœºæ™¯åˆ†æ### äº‹åŠ¡-redisäº‹åŠ¡ç®€ä»‹### äº‹åŠ¡-äº‹åŠ¡çš„åŸºæœ¬æ“ä½œï¼ˆå®šä¹‰ï¼Œå–æ¶ˆï¼Œæ‰§è¡Œï¼‰### äº‹åŠ¡-äº‹åŠ¡çš„å·¥ä½œæµç¨‹### äº‹åŠ¡-äº‹åŠ¡æ“ä½œçš„æ³¨æ„äº‹é¡¹### äº‹åŠ¡-é”### äº‹åŠ¡-æ­»é”è§£å†³æ–¹æ¡ˆ### åˆ é™¤ç­–ç•¥-è¿‡æœŸæ•°æ®çš„æ¦‚å¿µ### åˆ é™¤ç­–ç•¥-è¿‡æœŸæ•°æ®çš„åº•å±‚å­˜å‚¨ç»“æ„### åˆ é™¤ç­–ç•¥-å®šæ—¶åˆ é™¤ä¸æƒ°æ€§åˆ é™¤### åˆ é™¤ç­–ç•¥-å®šæœŸåˆ é™¤### åˆ é™¤ç­–ç•¥-é€å‡ºç­–ç•¥### æœåŠ¡å™¨é…ç½®-redis.confé…ç½®### é«˜çº§æ•°æ®ç±»å‹-bitmapsä»‹ç»ä¸åŸºæœ¬æ“ä½œ### é«˜çº§æ•°æ®ç±»å‹-bitmapsæ‰©å±•æ“ä½œ### é«˜çº§æ•°æ®ç±»å‹-HyperLogLog### é«˜çº§æ•°æ®ç±»å‹-CEO### ä¸»ä»å¤åˆ¶-ä¸»ä»å¤åˆ¶ç®€ä»‹### ä¸»ä»å¤åˆ¶-ä¸»ä»å¤åˆ¶çš„ä½œç”¨### ä¸»ä»å¤åˆ¶-ä¸»ä»å¤åˆ¶çš„ä¸‰ä¸ªé˜¶æ®µ### ä¸»ä»å¤åˆ¶-å·¥ä½œæµç¨‹ï¼ˆ1ï¼‰å»ºç«‹è¿æ¥é˜¶æ®µ### ä¸»ä»å¤åˆ¶-æ­å»ºä¸»ä»ç»“æ„### ä¸»ä»å¤åˆ¶-å·¥ä½œæµç¨‹ï¼ˆ2ï¼‰æ•°æ®åŒæ­¥é˜¶æ®µï¼ˆç®€ï¼‰### ä¸»ä»å¤åˆ¶-æ•°æ®åŒæ­¥é˜¶æ®µæ³¨æ„äº‹é¡¹### ä¸»ä»å¤åˆ¶-è¿è¡Œid(runid)### ä¸»ä»å¤åˆ¶-å¤åˆ¶ç¼“å†²åŒºä¸åç§»é‡### ä¸»ä»å¤åˆ¶-å·¥ä½œæµç¨‹ï¼ˆ2ï¼‰æ•°æ®åŒæ­¥ä¸å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼ˆå…¨ï¼‰### ä¸»ä»å¤åˆ¶-å¿ƒè·³æœºåˆ¶ä¸å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹### ä¸»ä»å¤åˆ¶-å¸¸è§é—®é¢˜ï¼ˆ1ï¼‰### ä¸»ä»å¤åˆ¶-å¸¸è§é—®é¢˜ï¼ˆ2ï¼‰### ä¸»ä»å¤åˆ¶-å¸¸è§é—®é¢˜ï¼ˆ3ï¼‰### å“¨å…µ-å“¨å…µç®€ä»‹### å“¨å…µ-å“¨å…µç»“æ„æ­å»º### å“¨å…µ-å·¥ä½œåŸç†ï¼ˆ1ï¼‰### å“¨å…µ-å·¥ä½œåŸç†ï¼ˆ2ï¼‰### å“¨å…µ-å·¥ä½œåŸç†ï¼ˆ3ï¼‰### é›†ç¾¤-é›†ç¾¤ç®€ä»‹### é›†ç¾¤-é›†ç¾¤å­˜å‚¨ç»“æ„è®¾è®¡### é›†ç¾¤-clusteré›†ç¾¤æ­å»º### é›†ç¾¤-è®¾ç½®ä¸è·å–æ•°æ®### é›†ç¾¤-ä¸»ä»ä¸‹çº¿ä¸ä¸»ä»åˆ‡æ¢### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-ç¼“å­˜é¢„çƒ­### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-ç¼“å­˜é›ªå´©### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-ç¼“å­˜å‡»ç©¿### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-ç¼“å­˜ç©¿é€### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-æ€§èƒ½æŒ‡æ ‡ç›‘æ§### ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ-æ€§èƒ½æŒ‡æ ‡ç›‘æ§å‘½ä»¤</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹è§†é¢‘: &lt;a href=&quot;https://www.bilibili.com/video/BV1CJ411m7Gc?from=search
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="redis" scheme="https://fengshana.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>ç¼“å­˜å››å¤§é—®é¢˜</title>
    <link href="https://fengshana.github.io/2020/05/12/%E9%9D%A2%E8%AF%95/%E3%80%90REDIS%E3%80%91redis%E7%BC%93%E5%AD%984%E5%A4%A7%E9%97%AE%E9%A2%98/"/>
    <id>https://fengshana.github.io/2020/05/12/%E9%9D%A2%E8%AF%95/%E3%80%90REDIS%E3%80%91redis%E7%BC%93%E5%AD%984%E5%A4%A7%E9%97%AE%E9%A2%98/</id>
    <published>2020-05-12T14:42:25.316Z</published>
    <updated>2020-05-18T17:33:06.384Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1gZ4y1s7Aw" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1gZ4y1s7Aw</a></p><p>ä¹‹å‰è¿™ä¸ªçš„è§†é¢‘ä¸‹æ¶äº†ï¼Œæˆ‘å°±æ²¡åŠæ³•å†å›è¿‡å¤´å»å†çœ‹ä¸€éï¼›ç°åœ¨çŸ¥é“äº†ï¼Œä¸€è¾¹çœ‹ä¸€å®šå¾—ä¸€å®šå¾—åšç¬”è®°ã€‚ä¸ç„¶ä¸‹æ¬¡æ‚„æ‚„åœ°æ²¡æœ‰äº†ã€‚æƒ³å“­éƒ½æ²¡åœ°æ–¹ã€‚  </p><h2 id="ç¼“å­˜ç©¿é€è¯¦è§£åŠå®æˆ˜"><a href="#ç¼“å­˜ç©¿é€è¯¦è§£åŠå®æˆ˜" class="headerlink" title="ç¼“å­˜ç©¿é€è¯¦è§£åŠå®æˆ˜"></a>ç¼“å­˜ç©¿é€è¯¦è§£åŠå®æˆ˜</h2><ol><li><strong>å¦‚ä½•ä½¿ç”¨ç¼“å­˜ï¼Ÿ</strong></li></ol><p>ï¼ˆæ€è·¯ååˆ†ç®€å•ï¼‰</p><p>controllerå±‚(å¯¹äºæ•°æ®çš„è®¿é—®)ï¼š  </p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">OrderService orderService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function">Integer <span class="title">insertOrder</span><span class="params">(Order order)</span></span>&#123; <span class="function"><span class="keyword">return</span> orderService.<span class="title">insertOrder</span><span class="params">(order)</span></span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/updateOrder"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function">Integer <span class="title">updateOrder</span><span class="params">(Order order)</span></span>&#123; <span class="function"><span class="keyword">return</span> orderService.<span class="title">updateOrder</span><span class="params">(order)</span></span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºä¸€æ¡æ•°æ®çš„è®¿é—®ï¼›é€šè¿‡idè¿›è¡ŒæŸ¥è¯¢æ•°æ®ï¼›</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/selectid"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function">R <span class="title">selectOrderById</span><span class="params">(Integer id)</span></span>&#123; <span class="function"><span class="keyword">return</span> orderService.<span class="title">selectOrderById</span><span class="params">(id)</span></span>;&#125;</span><br></pre></td></tr></table></figure><p>serviceå±‚ï¼š  </p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.xxx.testcache.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="params">...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> interface OrderService&#123;</span><br><span class="line">  <span class="built_in">Integer</span> insertOrder(<span class="keyword">Order</span> <span class="keyword">order</span>);</span><br><span class="line"></span><br><span class="line">  R selectOrderById(<span class="built_in">Integer</span> id);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="keyword">Order</span>&gt; selectOrderAll();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Integer</span> updateOrder(<span class="keyword">Order</span> <span class="keyword">order</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>service implï¼ˆå®ç°ï¼‰å±‚ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">  <span class="comment">//ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜ï¼Œå³æŸ¥è¯¢redisï¼›</span></span><br><span class="line">  <span class="comment">//valueOperationsè¿™ä¸ªå¯¹è±¡ä¸“é—¨é’ˆå¯¹äºrediså½“ä¸­Stringç±»å‹çš„ä¸€ä¸ªæ“ä½œï¼›</span></span><br><span class="line">  <span class="comment">//valueOperationsæ˜¯ä¸SpringBootæ•´åˆä¹‹åçš„ä¸€ä¸ªå¯¹è±¡ï¼›valueOperationsçš„ä¸Šçº§å³ä¸ºredisï¼›</span></span><br><span class="line">  <span class="comment">//valueOperationsä¸“ç”¨äºæ“ä½œå­—ç¬¦ä¸²Stringç±»å‹ï¼›</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="comment">//å¦‚æœç¼“å­˜å½“ä¸­å­˜åœ¨è¯¥å¯¹è±¡åˆ™ç›´æ¥è¿”å›ï¼›</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦åˆ™å¦‚æœç¼“å­˜å½“ä¸­ä¸å­˜åœ¨è¯¥å¯¹è±¡åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼›</span></span><br><span class="line">  <span class="comment">//æŸ¥è¯¢æ•°æ®åº“ä¹‹åï¼Œå†å°†è¯¥æ•°æ®åŠ å…¥åˆ°ç¼“å­˜å½“ä¸­ï¼›</span></span><br><span class="line">  <span class="comment">//æ–¹ä¾¿ä¸‹ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™æ›´å¤ŸæŸ¥è¯¢å¾—åˆ°è¯¥è®°å½•ï¼Œè¯¥å¯¹è±¡ï¼›</span></span><br><span class="line">  <span class="comment">//ç„¶åè¿”å›ç»™å‰ç«¯</span></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">      <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;finally&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦‚æœæ•°æ®åº“ä¹ŸæŸ¥è¯¢ä¸åˆ°ï¼›åˆ™è¿”å›å‰ç«¯ï¼šæ— æ­¤æ•°æ®</span></span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ€è·¯ç®€å•ï¼šç¼“å­˜å½“ä¸­æœ‰åˆ™è¿”å›è¯¥è®°å½•ç»™å‰ç«¯ï¼›ç¼“å­˜å½“ä¸­æ²¡æœ‰åˆ™å†æŸ¥è¯¢æ•°æ®åº“ï¼›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapperå±‚ï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.xxx.testcache.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="params">...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> interface OrderMapper&#123;</span><br><span class="line">  </span><br><span class="line">    @<span class="keyword">Select</span>(<span class="string">"insert into t_order (id,name) values (#&#123;id&#125;, #&#123;name&#125;)"</span>)</span><br><span class="line">    <span class="built_in">Integer</span> insertOrder(<span class="keyword">Order</span> <span class="keyword">order</span>);</span><br><span class="line"></span><br><span class="line">    @<span class="keyword">Select</span>(<span class="string">"select * from t_order where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="keyword">Order</span> selectOrderById(<span class="built_in">Integer</span> id);</span><br><span class="line"></span><br><span class="line">    @<span class="keyword">Select</span>(<span class="string">"select * from t_order"</span>)</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="keyword">Order</span>&gt; selectOrderAll();</span><br><span class="line"></span><br><span class="line">    @Update(<span class="string">"update t_order set  `name`=#&#123;name&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="built_in">Integer</span> updateOrder(<span class="keyword">Order</span> <span class="keyword">order</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼Ÿ</strong></li></ol><p>ï¼ˆ1ï¼‰<strong>æé«˜æ€§èƒ½</strong>ï¼›  </p><p><strong>æŸ¥è¯¢redisæ¯”æŸ¥è¯¢æ•°æ®åº“å¿«</strong>ï¼›<br>ç°åœ¨çš„nosqlæ•°æ®åº“ä¸€èˆ¬å¤šç”¨ä¸ºredisï¼›<br>é‚£ä¹ˆå…³ç³»å‹æ•°æ®åº“ä¸€èˆ¬å¤šç”¨ä¸ºmysqlï¼›<br>æ‰€ä»¥å½“å‰ä¸¾ä¾‹å…³ç³»å‹æ•°æ®åº“ä»¥mysqlä¸ºä¸»ï¼›<br>éå…³ç³»å‹æ•°æ®åº“ä»¥redisä¸ºä¸»è¿›è¡Œè®²è§£ï¼›  </p><p>ï¼ˆ2ï¼‰<strong>ä¿æŠ¤æ•°æ®åº“</strong>ï¼›  </p><p>å¦‚æœæ²¡æœ‰ç¼“å­˜redisï¼Œåˆ™æ¯ä¸€æ¬¡è¯·æ±‚éƒ½å°†è¦å»è®¿é—®æ•°æ®åº“ï¼›<br>é‚£ä¹ˆç”±æ­¤ä¹Ÿå°±é€ æˆäº†<strong>æ•°æ®åº“çš„è®¿é—®å‹åŠ›</strong>ï¼›<br>ç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å¤§å…¬å¸å½“ä¸­ï¼Œå…¶è®¿é—®é‡ç‰¹åˆ«ç‰¹åˆ«å¤šçš„ï¼›<br>é‚£ä¹ˆå¦‚æœæ­¤æ—¶æ‰€æœ‰çš„æŸ¥è¯¢è¯·æ±‚éƒ½å»å¾€æ•°æ®åº“çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨æ•°æ®åº“çš„å‹åŠ›ä¹Ÿæ˜¯éå¸¸å¤§çš„ï¼›<br>æ‰€ä»¥å½“ä½¿ç”¨ç¼“å­˜ä¹‹åï¼›å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†ç¼“å­˜åˆ™ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚éƒ½å°†ä¼šåœ¨[ <strong>å‘½ä¸­ç¼“å­˜</strong> ]è¯¥æ­¥éª¤æ—¶è¿›è¡Œè¿”å›ç»™å‰ç«¯ï¼ˆå°±ä¸å†å»è®¿é—®æ•°æ®åº“äº†ï¼‰ï¼›<br>ç¬¬ä¸€æ¬¡æŸ¥è¯¢å°†æŸ¥è¯¢æ•°æ®åº“ï¼›ç¬¬äºŒæ¬¡æŸ¥è¯¢å°±ä¸å†ä¼šå»æŸ¥è¯¢æ•°æ®åº“äº†è€Œæ˜¯ä¼šå»æŸ¥è¯¢ç¼“å­˜ï¼›  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢ç¼“å­˜</span></span><br><span class="line">Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line"><span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">  <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬å¯¹äºåŠ å…¥åˆ°ç¼“å­˜å½“ä¸­çš„æ•°æ®ï¼Œä¼šåŠ ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼›<br>æ¯”å¦‚å½“å‰æœ‰ä¸€ä¸ªä¿ƒé”€æ´»åŠ¨ï¼Œéœ€è¦å–å‡ºå•†å“ï¼›<br>ä¸”è¯¥å•†å“çš„ä¿ƒé”€æ—¶é—´åªåšä¸‰å¤©ï¼›<br>é‚£ä¹ˆå°±å¯ä»¥ç»™è¯¥å•†å“æ•°æ®çš„ç¼“å­˜æ•°æ®è®¾ç½®ä¸€ä¸ªä¸‰å¤©çš„è¿‡æœŸæ—¶é—´ï¼›<br><strong>ä¸€èˆ¬ä¼šç»™ç¼“å­˜å½“ä¸­çš„æ•°æ®è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´</strong>ï¼›  </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br></pre></td></tr></table></figure><p>æ­¤æ®µä»£ç å³æ™®é€šç¨‹åºå‘˜æ‰€å†™ä»£ç ï¼›<br>å¦‚æœè¯¥æ®µä»£ç åœ¨ä¸­å°å‹å…¬å¸å­˜åœ¨é—®é¢˜ä¸å¤§ï¼›<br>ä½†æ˜¯å¦‚æœè¯¥æ®µä»£ç æ”¾åœ¨å¤§å…¬å¸å½“ä¸­ï¼Œè¯¥æ®µä»£ç å°±ä¸èƒ½å¤Ÿè¿™æ ·å†™äº†ï¼›  </p><p>å› ä¸ºå¤§å…¬å¸å½“ä¸­è¦æ±‚ç‰¹åˆ«é«˜ï¼ˆâ•®(â•¯â–½â•°)â•­ï¼‰ï¼›  </p><p>ä¸”è¯¥æ®µä»£ç å½“ä¸­å­˜åœ¨ç¼“å­˜ä¸‰å¤§é—®é¢˜ä¸­çš„ä¸¤å¤§é—®é¢˜æ²¡æœ‰è§£å†³ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯<strong>ç¼“å­˜ç©¿é€</strong>ï¼›ç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯<strong>ç¼“å­˜å‡»ç©¿</strong>ï¼›</p><ol start="3"><li><strong>ç¼“å­˜æœ‰ä¸‰ä¸ªé—®é¢˜ï¼Ÿ</strong>  </li></ol><p>ï¼ˆ1ï¼‰ <strong>ç¼“å­˜ç©¿é€</strong></p><p>æŒ‡çš„æ˜¯ <strong>æŸ¥è¯¢æ•°æ®åº“å’Œç¼“å­˜å½“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®</strong>ï¼ˆ<strong>æŸ¥è¯¢çš„ä¸ºç©ºæ•°æ®</strong>ï¼‰</p><p>ï¼ˆå½“å‰æµ‹è¯•åº“å½“ä¸­çš„æ•°æ®ä»…ä»…åªæœ‰8æ¡æ•°æ®ï¼›ä½†æ˜¯ç°åœ¨æŸ¥è¯¢æ•°æ®idä¸º2000çš„æ•°æ®è®°å½•ï¼‰</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//id</span>ä¸º2000çš„è¯¥æ•°æ®åœ¨æµ‹è¯•åº“å½“ä¸­å¹¶ä¸å­˜åœ¨</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:500</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"æŸ¥è¯¢æ— æœ"</span>&#125;</span><br><span class="line"><span class="string">//</span>å°½ç®¡æŸ¥è¯¢æ— æœï¼›ä½†æ˜¯è¯¥æ“ä½œï¼Œå³æŸ¥è¯¢idä¸º2000çš„è¯¥æ“ä½œä¾ç„¶æŸ¥è¯¢äº†æ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>å‰é¢è¯´æŸ¥è¯¢ç¼“å­˜ï¼Œæ˜¯ä¸ºäº†ä¿æŠ¤æ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>ä½†æ˜¯ç°åœ¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œè¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™æ¯ä¸€æ¬¡éƒ½è¿›è¡ŒæŸ¥è¯¢äº†æ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>ç”±äºæ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨è¯¥æ•°æ®è®°å½•è¡Œï¼Œé‚£ä¹ˆç¼“å­˜å½“ä¸­ä¹Ÿè‚¯å®šä¸ä¼šå­˜åœ¨æœ‰è¯¥æ•°æ®è®°å½•è¡Œ</span><br><span class="line"></span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1001</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1001</span>, <span class="string">"name"</span>:<span class="string">"ç‹æ˜­å›"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜ä»£ç åˆ†æï¼š<br>1ã€ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜ï¼ŒæŸ¥è¯¢æ— æœä¹‹åï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼›<br>2ã€æ•°æ®åº“ä¹ŸæŸ¥è¯¢ä¸åˆ°åˆ™æŸ¥è¯¢æ— æœï¼›<br>3ã€åœ¨æ•°æ®è®°å½•è¡Œåœ¨æ•°æ®åº“å½“ä¸­è®°å½•ä¸ºç©ºè¯¥æƒ…å†µä¸‹ï¼Œè¯¥æ®µä»£ç æ¯ä¸€æ¬¡éƒ½å°†ä¼šå»æŸ¥è¯¢æ•°æ®åº“ï¼›  </p><p>å½“å‰å¸‚é¢ä¸Šæœ‰<strong>ä¸¤ç§è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜çš„æ–¹æ¡ˆ</strong>ï¼š</p><p>ï¼ˆ1ï¼‰<strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>ï¼šä»£ç ç®€å•ï¼Œæ•ˆæœä¸å¥½<br>ï¼ˆ2ï¼‰<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼šä»£ç å¤æ‚ï¼Œæ•ˆæœå¾ˆå¥½ï¼ˆä¸€èˆ¬ç”¨<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼‰</p><p><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>çš„å®ç°æ€è·¯ï¼š</p><p>å½“å»æŸ¥è¯¢ä¸€æ¡åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨çš„æ•°æ®è®°å½•è¡Œçš„æ—¶å€™ï¼›<br>ä¸ç®¡è¯¥æ•°æ®è®°å½•è¡Œåœ¨æ•°æ®åº“å½“ä¸­æŸ¥è¯¢å¾—åˆ°æˆ–è€…æŸ¥è¯¢ä¸åˆ°ï¼Œéƒ½å°†è¯¥ä¿¡æ¯äº¤ç»™ç¼“å­˜ï¼›  </p><p>service implï¼ˆå®ç°ï¼‰å±‚ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å‡ºæ¥çš„å¯¹è±¡è¿›è¡Œåˆ¤æ–­æ˜¯å¦å…¶å®ä¾‹å±äºç©ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span>( redisObj instanceOf NullValueResultDO)&#123;</span><br><span class="line">      <span class="comment">//å¦‚æœå±äºç©ºå¯¹è±¡åˆ™ç›´æ¥è¿”å›æŸ¥è¯¢æ— æœè¯¥å“åº”ç»“æœ</span></span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">      <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ­¤å¤„æ·»åŠ elseåˆ¤æ–­ï¼Œå½“è¯¥æ•°æ®è®°å½•è¡Œåœ¨æ•°æ®åº“å½“ä¸­æŸ¥è¯¢ä¸åˆ°çš„æ—¶å€™çš„å¤„ç†æ“ä½œ</span></span><br><span class="line">        <span class="comment">//å¦‚æœæ•°æ®åº“å½“ä¸­æŸ¥è¯¢ä¸åˆ°ï¼Œé‚£ä¹ˆæ­¤æ—¶ä½¿ç”¨ä¸€ä¸ªç©ºå¯¹è±¡åŠ å…¥åˆ°ç¼“å­˜å½“ä¸­å»ï¼›</span></span><br><span class="line">        <span class="comment">//å½“åŠ å…¥çš„å†…å®¹ä¸ºç©ºå¯¹è±¡çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ¯æ¬¡æŸ¥è¯¢å¼€å¤´çš„æ—¶å€™ä¹Ÿå°±åŒæ ·éœ€è¦åˆ¤æ–­ï¼›æ˜¯å¦ä¸ºç©ºå¯¹è±¡ï¼Œå¦‚æœä¸ºç©ºå¯¹è±¡åˆ™ç›´æ¥è¿”å›å‰ç«¯æŸ¥è¯¢æ— æœï¼›å°±å°†ä¸å†å»è¿›è¡ŒæŸ¥è¯¢æ•°æ®åº“è¿™ä¸€æ“ä½œäº†ï¼›</span></span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, <span class="keyword">new</span> <span class="constructor">NullValueResultDO()</span>, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">//åŠ å…¥ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;finally&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç©ºå¯¹è±¡</strong> NullValueResultDO(æ— å±æ€§):</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.testcache.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NullValueResultDO</span>&#123;</span></span><br><span class="line">  <span class="comment">//private String name;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ•°æ®è®°å½•è¡Œåœ¨æ•°æ®åº“å½“ä¸­ä¸ºç©ºçš„æƒ…å†µåˆ†æï¼š<br><strong>1ã€</strong> ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜å½“ä¸­æ²¡æœ‰å‘½ä¸­ï¼Œå³ç¼“å­˜å½“ä¸­ä¸å­˜åœ¨è¯¥æ•°æ®è®°å½•ï¼›</p><p><strong>2ã€</strong> æ­¤æ—¶æŸ¥è¯¢æ•°æ®åº“ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­å‘ç°è¯¥æ•°æ®è¡Œä¸ºç©ºï¼›åˆ™å°†è¯¥ä¸€ä¸ªç©ºå¯¹è±¡åŠ å…¥åˆ°ç¼“å­˜å½“ä¸­ï¼Œå…¶idä¸ºæŸ¥è¯¢çš„å†…å®¹ï¼Œå…¶å€¼ä¸ºç©ºå¯¹è±¡ï¼›åˆ™æ­¤æ—¶è¿›è¡Œè¿”å›</p><p><strong>3ã€</strong> ç¬¬äºŒæ¬¡è¿›è¡ŒæŸ¥è¯¢ç¼“å­˜ï¼ŒåŒæ ·æŸ¥è¯¢çš„æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­æ•°æ®è®°å½•è¡Œä¸ºç©ºï¼›<br>åˆ™æ­¤æ—¶å…ˆè¿›è¡ŒæŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜å½“ä¸­å­˜åœ¨è¯¥æ•°æ®è®°å½•è¡Œï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨idä¸ºæŸ¥è¯¢idçš„è®°å½•å€¼ï¼›<br>åˆ™æ­¤æ—¶å½“ç¼“å­˜å‘½ä¸­ä¹‹åè¿›è¡Œåˆ¤æ–­ç¼“å­˜çš„è¯¥å®ä¾‹æ˜¯å¦ä¸ºç©ºå¯¹è±¡;<br>å¦‚æœä¸ºç©ºå¯¹è±¡åˆ™ç›´æ¥è¿”å›æŸ¥è¯¢æ— æœå¦åˆ™è¿”å›æŸ¥è¯¢æ•°æ®ï¼›</p><p><strong>ç¼“å­˜ç©¿é€</strong>è¯¥ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ˆ<strong>ç¼“å­˜ç©ºå¯¹è±¡</strong>ï¼‰çš„<strong>æ•ˆæœä¸ºä»€ä¹ˆä¸å¥½</strong>ï¼Ÿ<br>åŸå› ï¼š</p><ul><li>æ¯ä¸€æ¬¡æ¢<strong>ä¸åŒçš„æŸ¥è¯¢</strong>ï¼Œä¸”æ¯ä¸€æ¬¡ä¸åŒçš„æŸ¥è¯¢ï¼ˆå³idä¸åŒï¼‰æ˜çŸ¥è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­æŸ¥è¯¢ä¸åˆ°ï¼›ä½†æ˜¯<strong>éƒ½è¿˜æ˜¯ä¼šå»æŸ¥è¯¢ä¸€æ¬¡</strong>ï¼›</li><li>ç¼“å­˜ç©ºå¯¹è±¡è§£å†³çš„é—®é¢˜æ˜¯<strong>ä¸€ä¸ªkey</strong>ï¼ˆå³ä¸€ä¸ªidï¼‰<strong>å¯¹å…¶è¿›è¡Œå¤šæ¬¡è®¿é—®</strong>çš„è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼ˆå½“è¿‡æœŸæ—¶é—´å¤±æ•ˆåˆ™åˆå°†ä¼šå»æŸ¥è¯¢ä¸€éæ•°æ®åº“ï¼‰ï¼›</li><li>å¦‚æœå­˜åœ¨æŸ¥è¯¢æ•°æ®ä¸ºå¤§é‡ç©ºæ•°æ®åˆ™å°†ä¼šå¯¼è‡´rediså½“ä¸­<strong>å­˜åœ¨æœ‰å¤§é‡çš„ç©ºå¯¹è±¡</strong>ï¼ˆç©ºæ•°æ®ï¼‰ï¼ˆæ¶æ„å¤§è§„æ¨¡æŸ¥è¯¢æ˜çŸ¥é“æ•°æ®åº“å½“ä¸­ä¸ºè®°å½•è¡Œä¸ºç©ºçš„æ•°æ®ï¼ˆç©ºæ•°æ®ï¼‰ï¼›ï¼‰å¼Šç«¯å°±åœ¨äº<strong>å ç”¨redisçš„å†…å­˜</strong>ï¼›</li></ul><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//id</span>ä¸º2000çš„è¯¥æ•°æ®åœ¨æµ‹è¯•åº“å½“ä¸­å¹¶ä¸å­˜åœ¨</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:500</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"æŸ¥è¯¢æ— æœ"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>æ­¤æ—¶å“åº”çš„å†…å®¹æ˜¯æŸ¥è¯¢çš„ç¼“å­˜å½“ä¸­çš„æ•°æ®ï¼›</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>æ­¤æ—¶å“åº”çš„å†…å®¹æ˜¯æŸ¥è¯¢çš„ç¼“å­˜å½“ä¸­çš„æ•°æ®ï¼›</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>æ­¤æ—¶å“åº”çš„å†…å®¹æ˜¯æŸ¥è¯¢çš„ç¼“å­˜å½“ä¸­çš„æ•°æ®ï¼›</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2000  </span><br><span class="line"><span class="string">//</span>æ­¤æ—¶å“åº”çš„å†…å®¹æ˜¯æŸ¥è¯¢çš„ç¼“å­˜å½“ä¸­çš„æ•°æ®ï¼›</span><br><span class="line"></span><br><span class="line"><span class="params">---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2002</span><br><span class="line"><span class="string">//</span>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜å½“ä¸­ä¸å­˜åœ¨çš„å†…å®¹å°±å°†ä¼šå»æŸ¥è¯¢ä¸€éæ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:500</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"æŸ¥è¯¢æ— æœ"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2003</span><br><span class="line"><span class="string">//</span>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜å½“ä¸­ä¸å­˜åœ¨çš„å†…å®¹å°±å°†ä¼šå»æŸ¥è¯¢ä¸€éæ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:500</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"æŸ¥è¯¢æ— æœ"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2004</span><br><span class="line"><span class="string">//</span>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ç¼“å­˜å½“ä¸­ä¸å­˜åœ¨çš„å†…å®¹å°±å°†ä¼šå»æŸ¥è¯¢ä¸€éæ•°æ®åº“ï¼›</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:500</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"æŸ¥è¯¢æ— æœ"</span>&#125;</span><br></pre></td></tr></table></figure><p>è°·æ­Œæœ‰ä¸€ä¸ªæ¡†æ¶å«åš <strong>Guava</strong>ï¼›åœ¨è¿™ä¸ª <strong>Guava</strong> æ¡†æ¶å½“ä¸­å·²ç»å†™å¥½äº†<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼›å³å·²ç»æä¾›äº†<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼›ç¼ºé™·åœ¨äº <strong>Guava</strong> æ¡†æ¶å½“ä¸­çš„è¯¥<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ä¸æ”¯æŒåˆ†å¸ƒå¼ï¼›</p><p><strong>å¸ƒéš†è¿‡æ»¤å™¨åº”ç”¨</strong></p><p>mavenå®‰è£…ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>27.0.1-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›<br>è°ƒç”¨å…¶é™æ€æ–¹æ³•å°±å¯ä»¥ç›´æ¥åˆ›å»ºå‡ºä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ï¼›<br>å¦‚æœå¯¹å¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰è®¤è¯†çš„é“å‹ï¼Œå¯ä»¥å°†å¸ƒéš†è¿‡æ»¤å™¨ç†è§£ä¸ºä¸€ä¸ªArrayListé›†åˆï¼Œå°±ç†è§£ä¸ºjavaå½“ä¸­çš„ä¸€ä¸ªé›†åˆå³å¯ï¼›  </p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBloomFilter</span>&#123;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="built_in">size</span> = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//size         é¢„è®¡è¦æ’å…¥å¤šå°‘æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">//fpp          å®¹é”™ç‡--&gt;å‡ºç°è¯¯åˆ¤çš„æ¦‚ç‡æ˜¯å¤šå°‘</span></span><br><span class="line"><span class="comment">//bloomFilter  ä½æ•°ç»„</span></span><br><span class="line"><span class="comment">//list         åˆ›å»ºçš„æ˜¯objectæ•°ç»„</span></span><br><span class="line"><span class="comment">//bit          æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½æ•°ç»„  21äº¿  JVMå†…å­˜     æ•°æ®ä¸ä¼šè¿›è¡ŒæŒä¹…åŒ–  256M</span></span><br><span class="line"><span class="comment">//redis   42äº¿  rediså†…å­˜   redisçš„æŒä¹…åŒ–æ•°æ®   512M==42äº¿ä½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bit[]</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), <span class="built_in">size</span>, <span class="number">0.001</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//List list = new ArrayList();</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Integer[] integers = new Integer[Integer.MAX_VALUE];</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//å½“å‰è¯¥å¾ªç¯ä¼šç”Ÿæˆ1~100,0000 å½“ä¸­æ‰€æœ‰çš„æ•°å€¼ï¼›</span></span><br><span class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; = <span class="built_in">size</span> ; i++ )&#123;</span><br><span class="line">    <span class="comment">//å°†è¿™äº›1~100,0000çš„æ•°å€¼å…¨éƒ¨æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨bloomFilter(é›†åˆ)å½“ä¸­</span></span><br><span class="line">    bloomFilter.<span class="built_in">put</span>(i);</span><br><span class="line">    <span class="comment">//bloomFilter.put("è€ç‹");</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  List&lt;Integer&gt; <span class="built_in">list</span> = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">10000</span>);</span><br><span class="line">  <span class="comment">//æ•…æ„å–10000ä¸ªä¸åœ¨è¿‡æ»¤å™¨é‡Œçš„å€¼ï¼Œçœ‹çœ‹æœ‰å¤šå°‘ä¸ªä¼šè¢«è®¤ä¸ºåœ¨è¿‡æ»¤å™¨é‡Œ</span></span><br><span class="line">  <span class="comment">//size + 10000 = 100,0000+1000;</span></span><br><span class="line">  <span class="comment">//size + 20000 = 100,0000+2000;</span></span><br><span class="line">  <span class="comment">//è¯¥æ•°å€¼è‚¯å®šå¤§äº100,0000ï¼›è‚¯å®šä¸ç¬¬ä¸€æ¬¡å¾ªç¯å½“ä¸­çš„æ•°å€¼ç›¸åŒï¼›</span></span><br><span class="line">  <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="built_in">size</span> + <span class="number">10000</span> ; i &lt; <span class="built_in">size</span> + <span class="number">20000</span> ; i++ )&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒç”¨è¯¥æ•°å€¼iåœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ï¼›å¦‚æœå­˜åœ¨åˆ™åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼›å¦åˆ™ä¸åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼›</span></span><br><span class="line">    <span class="comment">//ä¹‹å‰å°†å¸ƒéš†è¿‡æ»¤å™¨æ¯”å–»ä¸ºjavaå½“ä¸­çš„ArrayListé›†åˆï¼›</span></span><br><span class="line">    <span class="comment">//åˆ™å½“å‰æœŸæœ›çš„æ˜¯ï¼šæ­¤æ—¶å½“å‰è¯¥å¾ªç¯å½“ä¸­æ˜¯ä¸ä¼šä»»ä½•ä¸€ä¸ªæ•°å€¼åŠ å…¥åˆ°è¯¥å¸ƒéš†è¿‡æ»¤å™¨bloomFilterå½“ä¸­å»çš„ï¼Œä¹Ÿå°±æ˜¯è¯¥ArrayListé›†åˆå½“ä¸­å»ï¼›</span></span><br><span class="line">    <span class="keyword">if</span>(bloomFiilter.mightContain(i))&#123;<span class="comment">//è¯¯åˆ¤</span></span><br><span class="line">      <span class="built_in">list</span>.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  System.out.<span class="built_in">println</span>(<span class="string">"è¯¯åˆ¤çš„æ•°é‡ï¼š"</span>+<span class="built_in">list</span>.<span class="built_in">size</span>);</span><br><span class="line">  <span class="comment">//å“åº”ä¸ºï¼š10</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¸ƒéš†è¿‡æ»¤å™¨ç¡®ç¡®å®å®æ˜¯ä¸€ä¸ªé›†åˆå¯¹è±¡</li><li>å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ä»…å­˜åœ¨ä¸¤ä¸ªæ–¹æ³•ï¼Œ<ul><li>ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯put(Object obj);ï¼ˆå°†æ•°æ®å–å€¼åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ï¼‰ï¼›</li><li>ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯mightContain(Object obj);ï¼ˆåˆ¤æ–­æ•°æ®å–å€¼æ˜¯å¦åœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­å­˜åœ¨ï¼‰</li></ul></li><li>åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„æ•°æ®æ— æ³•è¢«ä¿®æ”¹(update)è¢«åˆ é™¤(delete)è¢«å–å‡ºæ¥(get)ï¼›åªèƒ½å¤Ÿè¿›è¡Œæ·»åŠ (put)ä»¥åŠåˆ¤æ–­æ˜¯å¦å­˜åœ¨(mightContain);</li><li>mightContain è¯¥æ–¹æ³•æœ‰å¯èƒ½åˆ¤æ–­å¤±è¯¯ï¼›</li><li>æ­¤æ—¶ç†è§£å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç‰¹æ®Šçš„é›†åˆå¯¹è±¡ï¼›</li></ul><p>å®šä¹‰å¸ƒéš†è¿‡æ»¤å™¨ä»…éœ€è¦åšï¼ˆå®šä¹‰ï¼‰ï¼š<br>(1) size é¢„è®¡è¦æ’å…¥å¤šå°‘æ•°æ®ï¼ˆé¢„è®¡æ’å…¥é‡ï¼‰<br>(2) fpp  å®¹é”™ç‡ï¼ˆ<strong>False positive probability</strong>ï¼‰â€”&gt;å‡ºç°è¯¯åˆ¤çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼ˆå³ä¸Šè¿°å½“ä¸­è¯¯åˆ¤çš„æ¬¡æ•°æ˜¯å¯ä»¥ç”±è‡ªå·±å®šä¹‰çš„ï¼›å®¹é”™ç‡æ˜¯ç™¾åˆ†ä¹‹ç™¾ä¼šæœ‰çš„ï¼›ä¸èƒ½å®šä¹‰ä¸º0ï¼›å¦‚æœå®šä¹‰ä¸º0å°±å°†ä¼šæŠ±é”™ï¼‰</p><p>è¯¯åˆ¤ï¼šä¼ ä¸€ä¸ªkeyåˆ°è¯¥å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆâ€œArrayListâ€ï¼‰å½“ä¸­è¿›è¡Œåˆ¤æ–­ï¼›è¯¥æ•°æ®æ˜¯å¦å­˜åœ¨ï¼ˆmightContainï¼‰åœ¨è¯¥å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ï¼›è€Œè¯¥æ–¹æ³•mightContainæœ‰å¯èƒ½ä¼šåˆ¤æ–­å¤±è¯¯ï¼›è€Œå¯¼è‡´ä¸å­˜åœ¨åœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„keyä¹Ÿè¢«åˆ¤æ–­å‡ºå­˜åœ¨åœ¨è¯¥å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­äº†ï¼›ï¼ˆæ˜æ˜ä¸å­˜åœ¨ï¼Œæœ‰å¯èƒ½ä¼šè¢«åˆ¤æ–­ä¸ºå­˜åœ¨ï¼‰  </p><p>åˆ¤æ–­çš„è¯¥<strong>å®¹é”™ç‡</strong>å–å€¼<strong>è¶Šä½</strong>ï¼›å…¶åº•å±‚çš„<strong>å†…å­˜æ¶ˆè€—</strong>åˆ™å°†<strong>è¶Šå¤§</strong>ï¼›<br>è€Œ<strong>å®¹é”™ç‡</strong>å–å€¼<strong>è¶Šé«˜</strong>ï¼›åˆ™<strong>å†…å­˜å¼€é”€</strong>åˆ™<strong>å°</strong>ï¼›</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">private</span> static <span class="built_in">int</span> size = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> static BloomFilter&lt;Integer&gt; bloomFilter=<span class="module-access"><span class="module"><span class="identifier">BloomFilter</span>.</span></span>create(<span class="module-access"><span class="module"><span class="identifier">Funnels</span>.</span></span>integer<span class="constructor">Funnel()</span>,size, <span class="number">0.001</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ­¤æ—¶ç¬¬ä¸€æ¬¡æ‰“å°å‡ºç°çš„è¯¯åˆ¤æ¬¡æ•°ä¸º10æ¬¡ï¼›</span></span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">  <span class="keyword">private</span> static <span class="built_in">int</span> size = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> static BloomFilter&lt;Integer&gt; bloomFilter=<span class="module-access"><span class="module"><span class="identifier">BloomFilter</span>.</span></span>create(<span class="module-access"><span class="module"><span class="identifier">Funnels</span>.</span></span>integer<span class="constructor">Funnel()</span>,size, <span class="number">0.1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ­¤æ—¶ç¬¬äºŒæ¬¡æ‰“å°å‡ºç°çš„è¯¯åˆ¤æ¬¡æ•°ä¸º1033æ¬¡ï¼›</span></span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">  <span class="keyword">private</span> static <span class="built_in">int</span> size = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> static BloomFilter&lt;Integer&gt; bloomFilter=<span class="module-access"><span class="module"><span class="identifier">BloomFilter</span>.</span></span>create(<span class="module-access"><span class="module"><span class="identifier">Funnels</span>.</span></span>integer<span class="constructor">Funnel()</span>,size, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ­¤æ—¶ç¬¬äºŒæ¬¡æ‰“å°å‡ºç°çš„æŠ›å‡ºå¼‚å¸¸ï¼ŒæŠ¥é”™ï¼›</span></span><br><span class="line">  <span class="comment">//å³å¸ƒéš†è¿‡æ»¤å™¨çš„å®¹é”™ç‡ä¸èƒ½ä¸º0</span></span><br><span class="line">  <span class="comment">//java.lang.ExceptionInInitializerError</span></span><br><span class="line">  <span class="comment">//Caused by: java.lang.IllegalArgumentException:False positive probability(0.0) must be &gt; 0.0</span></span><br></pre></td></tr></table></figure><p><strong>å¸ƒéš†è¿‡æ»¤å™¨åŸç†</strong><br>å¸ƒéš†è¿‡æ»¤å™¨çš„åº•å±‚å®ç°ä¾èµ–äºbitæ•°ç»„ï¼›<br>1ä¸ªå­—èŠ‚byteä¸º8ä½ï¼›<br>1024ä¸ªå­—èŠ‚ä¸º1Mï¼›<br>æ‰€ä»¥å…¶å•ä½æ˜¯å¾ˆå°ï¼›<br>512M=524288byte</p><p>ç”±äºä½æ•°ç»„ï¼Œå³byteåªæœ‰ä¸€ä½ï¼›æ‰€ä»¥å…¶å–å€¼å°±åªèƒ½å¤Ÿæ˜¯0å’Œ1ï¼›<br>é»˜è®¤è¯¥æ•°ç»„å½“ä¸­çš„ç™½è‰²æ ¼å­å–å€¼valueå…¨éƒ¨ä¸º0ï¼›è€Œè“è‰²æ ¼å­å–å€¼valueä¸º1ï¼›</p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANXy93sfkaGWRUBapr9y3pHbtQ6yRyawhbsd7*AS4G1K*c*Gb56IM9A4pA41f7IAo4fIom1PvvFF11WuEdaLRX51c!/r" alt="å¸ƒéš†è¿‡æ»¤å™¨"></p><p>å·¦è¾¹å³ä¸ºå¾€å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­è¿›è¡Œputæ–¹æ³•æ“ä½œçš„ç»“æœï¼ˆæŠŠæ•°æ®åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ï¼‰ï¼›</p><p>é‚£ä¹ˆå…¶ä½æ•°ç»„å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼›<br>å˜åŒ–çš„è¡¨ç°æœ‰ï¼š</p><ul><li>è¯¥å¸ƒéš†è¿‡æ»¤å™¨å…¶æ•°ç»„å½“ä¸­æ‰€æœ‰çš„keyå–å€¼valueé»˜è®¤éƒ½ä¸º0</li><li>å½“æ·»åŠ å®Œä¸€æ¡æ•°æ®ï¼ˆâ€œè€ç‹â€ï¼‰ä¹‹åï¼Œå°±ä¼šå‡ºç°ä¸‰ä¸ªæ ¼å­ï¼Œå˜æˆé»„è‰²ï¼›ä¹Ÿå°±ä»£è¡¨ç€ï¼Œè¯¥ä¸‰ä¸ªæ ¼å­æ‰€å¤„indexä½ç½®ï¼ˆå¯ä»¥ä¸ä¸º3ä¸ªï¼Œåªæ˜¯è¯´è¯¥å›¾ç»è¿‡è®¡ç®—å¾—ä¸º3ä¸ªï¼ˆä¸¾ä¸ªä¾‹å­ä¸è¦å½“çœŸï¼‰ï¼›<ul><li>ä¸ºä»€ä¹ˆè¢«è®¡ç®—å‡ºæ¥ä¸º3ä¸ªindexä½ç½®çš„æ ¼å­è¢«æ”¹æˆäº†1ï¼›</li><li>å…¶å®ä¹Ÿå¯ä»¥æ”¹ä¸‹ï¼Œå°†å…¶æ”¹æˆ10ä¸ªindexä½ç½®è¢«æ”¹é¢œè‰²ä¸ºé»„è‰²ï¼Œå³å°†é»˜è®¤å–å€¼0æ”¹æˆ1ï¼‰ï¼Œå…¶valueå€¼è¢«æ”¹å˜ç§°ä¸º1äº†ï¼›é»˜è®¤ä¸º0ï¼›</li></ul></li><li>å¦‚ä½•ä¿®æ”¹çš„å‘¢ï¼Ÿ<ul><li>ä¸Šè¿°ä¸º3ä¸ªindexä½ç½®è¢«æ”¹å˜é¢œè‰²ä¸ºé»„è‰²ï¼Œå³å°†é»˜è®¤å–å€¼æ”¹å˜ä¸º1ï¼›</li><li>é‚£ä¹ˆæ­¤æ—¶å¯ä»¥è®¤ä¸ºæ˜¯3ä¸ªhashå‡½æ•°å¯¹è¯¥åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„è¯¥å–å€¼â€œè€ç‹â€è¿›è¡Œäº†hashï¼›</li><li>é‚£ä¹ˆ3ä¸ªhashå‡½æ•°å¯¹â€œè€ç‹â€è¯¥å–å€¼è¿›è¡Œäº†hashä¹‹åï¼Œå°±ä¼šå¾—åˆ°æœ‰ä¸€ä¸ªæ•°å­—ï¼›</li><li>æ‰“ä¸ªæ¯”æ–¹ï¼šhash(â€œè€ç‹â€)=1212121ï¼›hashæŸä¸€å­—ç¬¦ä¸²éƒ½å°†å¾—åˆ°ä¸€ä¸ªæ•°å€¼ï¼›</li><li>é€šè¿‡hashè·å–çš„åˆ°ä¸€ä¸ªæ•°å€¼ä¹‹åï¼Œåœ¨å¯¹è¯¥å¸ƒéš†è¿‡æ»¤å™¨è¯¥æ•°ç»„çš„é•¿åº¦è¿›è¡Œ<strong>å–ä½™</strong>ï¼›</li><li>æ¯”å¦‚è¯´è¯¥å¸ƒéš†è¿‡æ»¤å™¨è¯¥æ•°ç»„çš„é•¿åº¦æ˜¯40ï¼›</li><li>é‚£ä¹ˆå°±ä¼šå°†å¯¹â€œè€ç‹â€è¿›è¡Œhashå¾—åˆ°çš„æ•°å€¼ å¯¹ è¯¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„çš„é•¿åº¦è¿›è¡Œ å–ä½™ï¼›å³1212121%40=3ï¼›ï¼ˆè¯¥3æ˜¯éšæ„æé€ çš„ï¼›ä¸è¦å½“çœŸï¼›åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼‰</li><li>é‚£ä¹ˆæ­¤æ—¶å¸ƒéš†è¿‡æ»¤å™¨å°±å°†ä¼šå°†indexå–å€¼ä¸º3çš„è¯¥ä½ç½®çš„é»˜è®¤å–å€¼0æ”¹ä¸º1ï¼›</li><li>æ­¥éª¤ï¼šé¦–å…ˆå¯¹åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨çš„æ•°å€¼è¿›è¡Œhashï¼Œç»è¿‡hashä¹‹åå°±ä¼šå¾—åˆ°ä¸€ä¸ªæ•°å€¼ï¼›å°†è¯¥æ•°å€¼è¿›è¡Œå–ä½™è¯¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„çš„é•¿åº¦å¾—åˆ°çš„æ•°å€¼å°±æ˜¯åœ¨è¯¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­çš„ä¸€ä¸ªä¸‹æ ‡ï¼›åˆ™å°†è¯¥ä¸‹æ ‡çš„é»˜è®¤å–å€¼0è¿›è¡Œä¿®æ”¹ä¸º1ï¼›</li><li>å½“å‰ä¸ºä»€ä¹ˆä¼šæœ‰3ä¸ªä¸åŒçš„ä½ç½®è¢«æ”¹å˜é¢œè‰²ä¸ºé»„è‰²å‘¢ï¼ˆå³æ”¹å˜é»˜è®¤å–å€¼ä¸º1ï¼‰?åŸå› å°±åœ¨äºæœ‰3ä¸ªä¸åŒçš„hashå‡½æ•°ï¼Œå­˜åœ¨æœ‰ä¸åŒçš„hashå‡½æ•°åˆ™å°†æœ‰3ä¸ªä¸åŒä½ç½®çš„æ•°ç»„indexè¢«æ”¹å˜é»˜è®¤å–å€¼0ä¸º1ï¼›ï¼ˆé€šè¿‡hashå‡½æ•°å¯¹åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„å–å€¼è¿›è¡Œhashå¾—åˆ°ä¸‹æ ‡ä½ç½®å†è¿›è¡Œå–ä½™æ•°ç»„é•¿åº¦å¾—åˆ°åœ¨è¯¥æ•°ç»„å½“ä¸­çš„ä¸‹æ ‡indexä½ç½®ï¼‰</li><li>ä½¿ç”¨äº†3ä¸ªä¸åŒçš„hashå‡½æ•°å¯¹è¯¥put(Object obj) objå¯¹è±¡è¿›è¡Œäº†hash</li><li>hashç®—æ³•å­˜åœ¨æœ‰å¤šä¸ªï¼Œæ¯”å¦‚è¯´hash32ï¼Œhash16â€¦(éƒ½æ˜¯è¿›è¡Œhashï¼Œåªæ˜¯hashçš„å‡½æ•°ä¸ä¸€æ ·ï¼›ä¸ºä»€ä¹ˆæ˜¯ä¸‰ä¸ªä¸åŒçš„hashå‘¢ï¼Ÿå¯ä»¥æ˜¯10ä¸ª100ä¸ªnä¸ªä¸åŒçš„hashï¼›è‡ªå·±è®¾å®šï¼›è‡ªå·±å–œæ¬¢å°±å¥½ï¼›å–œæ¬¢å¤šå°‘ä¸ªå°±å¤šå°‘ä¸ª)</li><li>hashå‡½æ•°å¤šå¹¶ä¸ä¸€å®šå¯¼è‡´å®¹é”™ç‡ä½ï¼Œåªèƒ½è¯´æ˜¯ä¸€ç§å› ç´ ï¼›</li></ul></li></ul><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX1IOvYMzL*IGr4hMfNmq0SLpSUjWiYQqv*cQR*MK3kZarTxU*24HFj0FaxTXP9dLIO.fiVY2eH4cPYFmojOxc8M!/r" alt="å¸ƒéš†è¿‡æ»¤å™¨mightContainåˆ¤æ–­æ˜¯å¦å­˜åœ¨"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX1nwjJZCSD2X9riQotNbwt9nUD*060h1sSAaCk5hI9WOQJEcFG3tGpPrepg4ztfFPKkDeVMefdqHGj9ns7B99jw!/r" alt="å¸ƒéš†è¿‡æ»¤å™¨putæ–¹æ³•"></p><p>ä½æ•°ç»„ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰å½“ä¸­é»˜è®¤å…¨éƒ¨ä¸º0ï¼Œå½“æ—¶å½“æ’å…¥çš„æ•°æ®é‡è¿‡å¤§ï¼Œå³ä½æ•°ç»„å½“ä¸­å°†æœ‰å¤§éƒ¨åˆ†åŸæœ¬é»˜è®¤å–å€¼ä¸º0çš„indexå°†è¢«æ”¹å˜å–å€¼ä¸º1ï¼›</p><p>å½“å‰æ’å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„æ•°æ®æœ‰21æ¡æ•°æ®è®°å½•è¡Œï¼š<br>1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€10ã€11ã€12ã€13ã€14ã€15ã€16ã€17ã€18ã€19ã€20ã€è€ç‹</p><p><strong>å¯èƒ½å­˜åœ¨ï¼ˆè¯¯åˆ¤çš„åŸå› ï¼‰</strong><br>ï¼ˆ1ï¼‰å½“è¿›è¡ŒæŸ¥æ‰¾â€œè€ç‹â€æ—¶ï¼Œæ˜¯å¯ä»¥æŸ¥æ‰¾å¾—åˆ°çš„ï¼›<br>ï¼ˆ2ï¼‰å½“è¿›è¡ŒæŸ¥æ‰¾ 1 æ—¶ï¼Œæ˜¯å¯ä»¥æŸ¥æ‰¾å¾—åˆ°çš„ï¼›  </p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANXw6xgVJROJh3BJY6xFr9VJp6l4Zz7Pw*B3XR97Ym8Flrt07pQJDvc4W*10SFkqDBy5AkMwUaqHzOjviy6g9514Q!/r" alt="bloomFilteræ’å…¥æ•°æ®é‡å¤§è¿›è¡Œæ•°æ®åˆ¤æ–­æ—¶"></p><p>ï¼ˆ3ï¼‰å½“è¿›è¡ŒæŸ¥æ‰¾ 111 æ—¶ï¼Œä¹Ÿæ˜¯å¯ä»¥æŸ¥æ‰¾å¾—åˆ°çš„ï¼›æ­¤æ—¶å°±å‡ºç°äº†<strong>è¯¯åˆ¤</strong>ï¼›<br>è¯¥å–å€¼111å¹¶ä¸æ˜¯åŠ å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„æ•°å€¼ï¼›<br>è€Œæ˜¯21æ¡æ•°æ®æ·»åŠ é€šè¿‡3ä¸ªä¸åŒçš„hashå–ä½™æ•°ç»„é•¿åº¦å¾—åˆ°å„ä¸ªä¸åŒçš„åœ¨æ•°ç»„å½“ä¸­çš„ä¸‹æ ‡ä½ç½®indexï¼›<br>æ°å·§å°±å°† 111 è¯¥å–å€¼è¿›è¡Œ3ä¸ªä¸åŒçš„hashå‡½æ•°å¾—å‡ºçš„3ä¸ªä¸åŒçš„æ•°å€¼å–ä½™æ•°ç»„é•¿åº¦å¾—åˆ°çš„3ä¸ªä¸åŒä½ç½®ä¸‹æ ‡indexçš„é»˜è®¤å–å€¼0è¿›è¡Œäº†æ”¹å€¼ä¸º1ï¼›<br>è€Œ111è¯¥æ•°å€¼çš„ä¸‰ä¸ªåœ¨å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­indexä¸‹æ ‡ä½ç½®å–å€¼é»˜è®¤ä¸º0è¢«ä¿®æ”¹ä¸º1ï¼›<br>å¹¶éæ˜¯111è¿›è¡ŒmightContainæ—¶è¿›è¡Œä¿®æ”¹çš„ï¼›<br>è€Œæ˜¯å½“æ·»åŠ 21æ¡æ•°æ®è®°å½•æ—¶è¿›è¡Œä¿®æ”¹çš„ï¼›<br>ä¹Ÿå°±æ˜¯å½“[<strong>å› ç´ 1</strong>]æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œå¦‚æœ[<strong>å› ç´ 2</strong>]æœ‰å¤šä¸ªhashå‡½æ•°ï¼ˆ<strong>hashå†²çª</strong>ï¼‰ï¼Œé‚£ä¹ˆå¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­å°±å¯èƒ½å­˜åœ¨å¤šä¸ªä¸‹æ ‡ä½ç½®indexçš„å–å€¼ç”±0æ”¹å˜ä¸º1çš„è¿™ç§æƒ…å†µï¼›  </p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX6G6Nkh9oP4j1AI.xWFqKAqs9pJ6hpqT9bcebJgsD1MnDW3AU*HyNTcnfjGcwoSGm1Y5nNUuczxo97CBCFXTZsA!/r" alt="bloomFilteræ’å…¥æ•°æ®é‡å¤§è¯¯åˆ¤æƒ…å†µçš„äº§ç”Ÿ"></p><p>1ã€ä¸ºä»€ä¹ˆå¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰å–å‡ºçš„æ–¹æ³•å³getæ–¹æ³•ï¼›â€”&gt;å› ä¸ºå…¶å¸ƒéš†è¿‡æ»¤å™¨åº•å±‚æ²¡æœ‰è¿›è¡Œä¿å­˜å…¶åŠ å…¥åˆ°å¸ƒéš†é¡¾è™‘å™¨å½“ä¸­çœŸå®çš„å–å€¼ï¼›åªæœ‰ä½æ•°ç»„ï¼›<br>2ã€å¸ƒéš†è¿‡æ»¤å™¨ä¹Ÿæ²¡æœ‰deleteæ–¹æ³•ï¼›â€”&gt;ç”±äºåœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­è¯¥ä½æ•°ç»„å½“ä¸­å…¶ä¸‹æ ‡ä½ç½®indexè¦åˆ é™¤çš„ä½ç½®å…¶ä½ç½®ï¼ŒåŒä¸€ä¸ªä½ç½®ä¹Ÿæœ‰å¯èƒ½æ˜¯å…¶ä»–æ•°å€¼æ‰€å çš„ä¸‹æ ‡ä½ï¼›ï¼ˆ<strong>hashå†²çª</strong>ï¼‰ï¼›å¦‚æœå°†è¯¥ä¸‹æ ‡ä½ç½®indexçš„å–å€¼æ”¹ä¸º0ï¼›é‚£ä¹ˆä¹Ÿå°†ä¼šå½±å“å…¶ä»–çš„æ•°å€¼çš„ä¸‹æ ‡å–å€¼ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼›å½“å…¶ä»–çš„æ•°æ®è¿›è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ—¶ï¼ŒåŸæœ¬å…¶ä»–æ•°æ®çš„ä¸‹æ ‡ä½ç½®indexå–å€¼ä¸º1ï¼›å½“å‰å› ä¸ºæœ‰éœ€è¦è¦è¿›è¡Œåˆ é™¤çš„æ•°æ®æ‰€ä»¥å¯¹è¯¥å¸ƒéš†è¿‡æ»¤å™¨çš„ä¸‹æ ‡ä½ç½®indexå–å€¼è¿›è¡Œæ›´æ”¹ä¸ºä»1å˜ä¸º0ï¼›å…¶ä»–æ•°æ®çš„ä¸‹æ ‡ä½ç½®ä¸å½“å‰è¦åˆ é™¤çš„æ•°æ®çš„ä¸‹æ ‡ä½ç½®ç›¸æ’ç›¸åŒäº†ï¼ˆ<strong>hashå†²çª</strong>ï¼‰ï¼›å¦‚æœå½“å‰è¦åˆ é™¤çš„æ•°æ®å°†è¯¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­ä¸‹æ ‡ä½ç½®çš„å–å€¼æ”¹ä¸ºäº†0ï¼›åˆ™å…¶ä»–æ•°æ®ä¸‹æ¬¡è¿›è¡ŒmightContainåˆ¤æ–­çš„æ—¶å€™å°†ä¼šè¢«åˆ¤æ–­ä¸ºä¸å­˜åœ¨ï¼›æ‰€ä»¥å¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰åˆ é™¤deleteè¯¥æ–¹æ³•ï¼›<br>3ã€å¸ƒéš†è¿‡æ»¤å™¨ä¸ºä»€ä¹ˆä¼šå‡ºç°è¯¯åˆ¤ï¼Ÿâ€”&gt;<strong>è¯¯åˆ¤</strong>çš„ç¼˜æ•…å°±åœ¨äºå­˜åœ¨<strong>hashå†²çª</strong>  </p><p><strong>å‡ºç°è¯¯åˆ¤çš„æ¦‚ç‡ï¼Œå³å®¹é”™ç‡ä¸ä»€ä¹ˆå› ç´ æœ‰å…³ï¼Ÿ</strong>  </p><ul><li><strong>æ•°ç»„é•¿åº¦</strong></li><li><strong>hashç®—æ³•çš„ä¸ªæ•°</strong></li></ul><p><strong>ï¼ˆ1ï¼‰</strong>é¦–å…ˆï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯è‚¯å®šä¼šå½±å“å®¹é”™ç‡çš„ï¼›å¦‚æœæ•°ç»„çš„é•¿åº¦æ˜¯100,0000ï¼›åŒæ ·æ˜¯æ·»åŠ 21æ¡æ•°æ®ï¼›é‚£ä¹ˆè¯¯åˆ¤çš„æ¦‚ç‡å°±ä¸ä¼šåˆè¿™ä¹ˆé«˜äº†ï¼ˆå³111ä¸å­˜åœ¨çš„æ•°æ®ä¹Ÿèƒ½å¤Ÿåˆ¤æ–­mightContainä¸ºå­˜åœ¨ï¼‰ï¼›æ‰€ä»¥æ•°ç»„çš„é•¿åº¦æ˜¯ä¸€ä¸ªå½±å“è¯¯åˆ¤çš„å› ç´ ï¼›<br><strong>ï¼ˆ2ï¼‰</strong>ç¬¬äºŒï¼Œhashç®—æ³•çš„ä¸ªæ•°ï¼›å¦‚æœæ•°ç»„çš„é•¿åº¦æ˜¯100,0000ï¼›ä¸”è¯¥å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­å­˜åœ¨æœ‰10ä¸ªhashç®—æ³•<br>(ä¸åŒhashå‡½æ•°è¶Šå¤šï¼Œåˆ™è¯¯åˆ¤çš„æ¦‚ç‡è¶Šå°ï¼Œå³ä¸åŒhashå‡½æ•°ä¸ªæ•°è¶Šå¤šï¼Œå³ç®—çš„åœ¨å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­çš„ä¸‹æ ‡ä½ç½®è¶Šå¤šï¼Œè€Œåªæœ‰å½“æ»¡è¶³ç®—å‡ºæ¥çš„æ‰€æœ‰çš„ä¸‹æ ‡ä½ç½®çš„å–è‡ªä¸º1ï¼Œæ‰å°†è¿”å›å¯èƒ½å­˜åœ¨ï¼›å¦åˆ™åªè¦æ»¡è¶³æœ‰ä¸€ä¸ªç®—å‡ºæ¥çš„indexå…¶ä¸‹æ ‡å–å€¼ä¸ä¸º1ï¼Œå³ä¸º0çš„è¿™ç§æƒ…å†µåˆ™è¿”å›ç»å¯¹ä¸å­˜åœ¨ï¼›)ï¼Œ</p><p>ï¼ˆä¸åŒhashä¸ªæ•°å‡½æ•°å–ä½™æ•°ç»„é•¿åº¦æ‰€å¾—å‡ºçš„ä½ç½®å¿…é¡»æ˜¯å…¨éƒ¨ä¸º1æ‰èƒ½å¤Ÿåˆ¤æ–­å…¶å€¼<br>[å³åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨åœ¨å¸ƒéš†è¿‡æ»¤å½“ä¸­]å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ï¼›<br>å³å­˜åœ¨æœ‰3ä¸ªä¸åŒçš„hashå‡½æ•°ï¼ŒæŸ¥è¯¢æ•°å€¼117ï¼›<br>å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­ä»…åªæœ‰2ä¸ªä½ç½®å¯è¯æ˜è¯¥117å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­ï¼Œå³è¿™ä¸¤ä¸ªä¸‹æ ‡ä½ç½®å–å€¼valueä¸º1ï¼Œè¿˜æœ‰ä¸€ä¸ªindex valueä¸º0ï¼›<br>è€Œhashä¸ªæ•°æœ‰3ä¸ªï¼Œæ­¤æ—¶èƒ½å¤Ÿè¯æ˜çš„åªæœ‰2ä¸ªï¼Œæ‰€ä»¥åˆ¤æ–­ä¸ºç»å¯¹ä¸å­˜åœ¨ï¼›<br>å³åªæœ‰å½“æŸ¥è¯¢çš„æ•°å€¼é€šè¿‡nä¸ªä¸åŒçš„hashç®—æ³•åœ¨å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­éœ€è¦æœ‰nä¸ªä¸åŒä¸‹æ ‡åœ°å€çš„indexå…¶å–å€¼valueå¿…é¡»å…¨éƒ¨ä¸º1ï¼›<br>æ‰èƒ½å¤Ÿåˆ¤æ–­ä¸ºå¯èƒ½å­˜åœ¨åœ¨è¯¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­ï¼›å¦åˆ™åˆ¤æ–­ä¸ºç»å¯¹ä¸å­˜åœ¨ï¼›ï¼‰</p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX1loeM8HGC*c1AuLK0zUPiHTgZ1ljiSnfjWcgvZCtpiFflSI8eyoV.J9xxKSa2wiJDTtvnfmwuqphXXn4wPQ7B4!/r" alt="bloomFilteræ•°æ®é‡åˆ¤æ–­mightContainç»å¯¹ä¸å­˜åœ¨çš„æƒ…å†µ"></p><p>å³å¦‚æœæ•°ç»„é•¿åº¦è¶Šå°ï¼›è€Œä¸åŒçš„hashå‡½æ•°ä¸ªæ•°è¶Šå¤šï¼›<br>åˆ™å®¹é”™ç‡å°±å°†ä¼šå¢å¤§<br>ï¼ˆå³è¯¯åˆ¤çš„å‡ ç‡å¢å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ•°ç»„é•¿åº¦å°çš„æƒ…å†µä¸‹ï¼Œè€Œhashå‡½æ•°å¤šï¼Œå³ç®—å‡ºæ¥çš„åœ¨å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­çš„ä¸‹æ ‡ä½ç½®è¶Šå¤šï¼Œå³è¿™äº›ç®—å‡ºæ¥çš„ä¸‹æ ‡ä½ç½®çš„å–å€¼å°±éƒ½å°†ä¼šè¢«æ”¹ä¸º1ï¼Œåˆ°æ—¶å€™å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„å½“ä¸­çš„ä¸‹æ ‡ä½ç½®indexå°±å°†ä¼šæœ‰å¤§é‡å–å€¼å˜åŠ¨ç”±0å˜ä¸º1ï¼›è¿™æ ·å°±ä¼šå¢å¤§è¯¯åˆ¤çš„å‡ ç‡ï¼Œä¹Ÿå°±æ˜¯è¯´å®¹é”™ç‡ä¹Ÿå°±å¢å¤§äº†ï¼›ï¼‰</p><p>æ‰€ä»¥è¯´ï¼›è·Ÿæ•°ç»„çš„é•¿åº¦ä»¥åŠhashå‡½æ•°çš„ä¸ªæ•°å¿…é¡»è¦é…åˆä½¿ç”¨æ‰èƒ½å¤Ÿè¾¾åˆ°å¸ƒéš†è¿‡æ»¤å™¨æœ€å¥½çš„æ•ˆæœï¼›ï¼ˆhashå‡½æ•°çš„ä¸ªæ•°å¿…é¡»è¦ä¸æ•°ç»„é•¿åº¦ç›¸åŒ¹é…ï¼›ï¼‰</p><p>numBits å³Google Guavaæ¡†æ¶ä¸­åˆ›å»ºå‡ºæ¥çš„ä½æ•°ç»„çš„é•¿åº¦ï¼›<br>sizeï¼š100,0000ï¼ˆé¢„è®¡æ’å…¥æ•°å€¼è®°å½•è¡Œï¼‰ï¼Œfppï¼š0.001ï¼ˆå®¹é”™ç‡ï¼‰===(åˆ›å»ºå‡ºæ¥)===&gt;numBitsï¼š14377587ï¼ˆä½æ•°ç»„é•¿åº¦ï¼‰ï¼ŒnumHashFunctionï¼š10ï¼ˆhashå‡½æ•°çš„ä¸ªæ•°ï¼‰</p><p>sizeï¼š100,0000ï¼ˆé¢„è®¡æ’å…¥æ•°å€¼è®°å½•è¡Œï¼‰ï¼Œfppï¼š0.1ï¼ˆå®¹é”™ç‡ï¼‰===(åˆ›å»ºå‡ºæ¥)===&gt;numBitsï¼š4792539ï¼ˆä½æ•°ç»„é•¿åº¦ï¼‰ï¼ŒnumHashFunctionï¼š3ï¼ˆhashå‡½æ•°çš„ä¸ªæ•°ï¼‰</p><ul><li>hashä¸ªæ•°è¶Šå¤šï¼ˆå®¹é”™ç‡è¶Šé«˜ï¼‰ï¼Œè¿ç®—å¼€é”€è¶Šå¤§ï¼›ï¼ˆæ€§èƒ½å’Œå®¹é”™ç‡ä¹‹é—´å–ä¸€ä¸ªï¼‰ï¼›  </li><li>è¦æ€§èƒ½é«˜åˆ™hashä¸ªæ•°å°‘ç‚¹ï¼›è¦å‡†ç¡®ç‡è¶Šé«˜åˆ™hashä¸ªæ•°è¶Šå¤šåˆ™å®¹é”™ç‡è¶Šé«˜ï¼›<br>å®¹é”™ç‡ä½å¥½è¿˜æ˜¯é«˜å¥½?çœ‹å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼›</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Preconditions</span>.</span></span>check<span class="constructor">NotNull(<span class="params">strategy</span>)</span>;</span><br><span class="line"><span class="keyword">if</span>(expectedInsertions<span class="operator"> == </span><span class="number">0L</span>)&#123;</span><br><span class="line">  expectedInsertions = <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//numBits ä½æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">//expectInsertions é¢„è®¡æ’å…¥å¸ƒéš†è¿‡æ»¤å™¨æ•°ç»„çš„æ•°æ®é‡</span></span><br><span class="line"><span class="comment">//fpp å®¹é”™ç‡ï¼ˆåˆ¤æ–­å‡ºé”™çš„æ¦‚ç‡ï¼‰</span></span><br><span class="line">long numBits = optimal<span class="constructor">NumOfBits(<span class="params">expectedInsertions</span>, <span class="params">fpp</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hashå‡½æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="built_in">int</span> numHashFunctions = optimal<span class="constructor">NumOfHashFunctions(<span class="params">expectedInsertions</span>, <span class="params">numBits</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//numBitsä¸numHashFunctions éœ€è¦è¿›è¡Œé…åˆä½¿ç”¨ï¼Œä¸€èµ·ä½¿ç”¨æ›´ä½³å“¦~</span></span><br><span class="line"><span class="comment">//åªéœ€è¦å…³æ³¨é¢„è®¡æ’å…¥å¸ƒéš†è¿‡æ»¤å™¨æ•°æ®è®°å½•è¡Œä¸å®¹é”™ç‡å³å¯ï¼›ä½æ•°ç»„é•¿åº¦ä¸hashå‡½æ•°ä¸ªæ•°ä¸éœ€è¦è¿›è¡Œå…³å¿ƒï¼›å› ä¸º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">BloomFilter(<span class="params">new</span> LockFreeBitArray(<span class="params">numBits</span>)</span>, numHashFunctions, funnel, strategy);</span><br><span class="line">&#125;catch(IllegalArgumentException var10)&#123;</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * long n   é¢„è®¡æ’å…¥æ•°æ®é‡</span></span><br><span class="line"><span class="comment">  * double m å®¹é”™ç‡</span></span><br><span class="line"><span class="comment">  * description ç®—å‡ºhashå‡½æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">@VisibleForTesting</span><br><span class="line">static <span class="built_in">int</span> optimal<span class="constructor">NumOfHashFunctions(<span class="params">long</span> <span class="params">n</span>,<span class="params">double</span> <span class="params">m</span>)</span>&#123;</span><br><span class="line">  return <span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>max(<span class="number">1</span>, (<span class="built_in">int</span>)<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>round( double(m)<span class="operator"> / </span>(double)n<span class="operator"> * </span><span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>log(<span class="number">2.0</span>D) ) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * long n   é¢„è®¡æ’å…¥æ•°æ®é‡</span></span><br><span class="line"><span class="comment">  * double p å®¹é”™ç‡</span></span><br><span class="line"><span class="comment">  * description ç®—å‡ºä½æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">@VisibleForTesting</span><br><span class="line">static long optimal<span class="constructor">NumOfBits(<span class="params">long</span> <span class="params">n</span>,<span class="params">double</span> <span class="params">p</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(p<span class="operator"> == </span><span class="number">0.0</span>D)&#123;</span><br><span class="line">    p = <span class="number">4.9E-324</span>D;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (long)((double)(-n)<span class="operator"> * </span><span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>log(p)<span class="operator"> / </span>(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>log(<span class="number">2.0</span>D)<span class="operator"> * </span><span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>log(<span class="number">2.0</span>D) ) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªå·±æ‰‹å†™<strong>åˆ†å¸ƒå¼çš„å¸ƒéš†è¿‡æ»¤å™¨</strong></p><p>æ‰‹å†™å¸ƒéš†è¿‡æ»¤å™¨ä¹‹å‰ï¼›æ€ä¹ˆæ¥å®ç°ï¼›</p><ul><li>éœ€è¦æœ‰ä¸€ä¸ªä½æ•°ç»„<ul><li>è¯¥ä½æ•°ç»„å¦‚ä½•æ¥çš„å‘¢?</li><li>å…¶å®rediså½“ä¸­ä¹Ÿå­˜åœ¨æœ‰å¸ƒéš†è¿‡æ»¤å™¨ï¼›rediså½“ä¸­çš„ä½æ•°ç»„ï¼›rediså½“ä¸­çš„ä½æ•°ç»„å“ªé‡Œæ¥ï¼›å³é¦–å…ˆrediså½“ä¸­éœ€è¦å­˜åœ¨è¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„ï¼›</li></ul></li></ul><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FLUSHALL</span><br><span class="line"></span><br><span class="line"><span class="built_in">keys</span> *</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> laowang abc #<span class="built_in">key</span>:laowangï¼›<span class="built_in">value</span>:abc</span><br><span class="line"></span><br><span class="line"># <span class="built_in">set</span> apiåº•å±‚å¦‚ä½•å¦‚ä½•å­˜å‚¨<span class="built_in">value</span>çš„å–å€¼ï¼ˆredisåº•å±‚å¦‚ä½•æ¥å­˜å‚¨è¯¥<span class="built_in">key</span>ï¼šlaowangçš„å–å€¼<span class="built_in">value</span> abcçš„ï¼Ÿï¼‰</span><br><span class="line"># redisåº•å±‚è¿›è¡Œå­˜å‚¨<span class="built_in">key</span>çš„å–å€¼<span class="built_in">value</span>æ˜¯é€šè¿‡ä½æ•°ç»„æ¥è¿›è¡Œå­˜å‚¨çš„ï¼›</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå°† abc è¯¥å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶å–å€¼ï¼›</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/**</span></span><br><span class="line">  <span class="string">*</span>  <span class="string">a</span> <span class="string">~</span> <span class="string">z</span> <span class="number">97</span> <span class="string">~</span> <span class="number">122</span></span><br><span class="line">  <span class="string">*</span>  <span class="string">ç¬¬</span> <span class="number">33</span> <span class="string">~</span> <span class="number">126</span> <span class="string">å·ï¼ˆå…±</span> <span class="number">94</span> <span class="string">ä¸ªï¼‰æ˜¯å­—ç¬¦ï¼Œå…¶ä¸­ç¬¬</span> <span class="number">48</span> <span class="string">~</span> <span class="number">57</span> <span class="string">å·ä¸º</span> <span class="number">0</span> <span class="string">~</span> <span class="number">9</span> <span class="string">è¿™åä¸ªé˜¿æ‹‰ä¼¯æ•°å­—</span></span><br><span class="line">  <span class="string">*/</span></span><br><span class="line"><span class="string">public</span> <span class="string">static</span> <span class="string">void</span> <span class="string">main(String[]</span> <span class="string">args)&#123;</span></span><br><span class="line">  <span class="string">toBinary("abc");//</span> <span class="number">24</span><span class="string">---999</span>   <span class="number">0</span>   <span class="number">1000</span>  <span class="number">1</span></span><br><span class="line">  <span class="string">//æ‰“å°ç»“æœä¸º</span> <span class="number">1100001</span> <span class="number">1100010</span> <span class="number">1100011</span></span><br><span class="line">  <span class="string">//1100001å’Œ1100010ç±»ä¼¼ï¼Œå…¶å®åœ¨äºŒè¿›åˆ¶å½“ä¸­aå’Œbåªéœ€è¦å°†ç¬¬å…­ä½å’Œç¬¬ä¸ƒä½è°ƒæ¢ä¸€ä¸‹é¡ºåºå³å¯ï¼›</span></span><br><span class="line">  <span class="string">//redisç”¨ä½æ•°ç»„ï¼ŒäºŒè¿›åˆ¶çš„æ–¹å¼æ¥è¿›è¡Œä¿å­˜set</span> <span class="string">keyæ‰€å¯¹åº”çš„valueå–å€¼</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>éªŒè¯redisä½¿ç”¨ä½æ•°ç»„ï¼ˆäºŒè¿›åˆ¶ï¼‰è¿›è¡Œä¿å­˜keyçš„å–å€¼value;</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">setbit laowang <span class="number">6</span> <span class="number">1</span> # è®¾ç½®keyä¸ºlaowangå…¶valueå€¼çš„äºŒè¿›åˆ¶ä½ï¼›è®¾ç½®å…¶valueå€¼çš„äºŒè¿›åˆ¶ä½çš„ç¬¬<span class="number">6</span>ä½å–å€¼ä¸º<span class="number">1</span>ï¼›</span><br><span class="line"></span><br><span class="line">setbit laowang <span class="number">7</span> <span class="number">0</span> # è®¾ç½®keyä¸ºlaowangå…¶valueå€¼çš„äºŒè¿›åˆ¶ä½ï¼›è®¾ç½®å…¶valueå€¼çš„äºŒè¿›åˆ¶ä½çš„ç¬¬<span class="number">7</span>ä½å–å€¼ä¸º<span class="number">0</span>ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">get</span> laowang # è·å–rediså½“ä¸­keyä¸ºlaowangçš„å–å€¼value</span><br><span class="line">#å½“å‰å“åº”ä¸º â€œbbcâ€</span><br><span class="line"></span><br><span class="line"># åŸæœ¬key:laowangå­˜å‚¨çš„valueå–å€¼ä¸ºï¼šabc</span><br><span class="line"># abc åœ¨redisåº•å±‚å­˜å‚¨ç»“æ„ä¸ºä½æ•°ç»„ï¼Œå³äºŒè¿›åˆ¶æ•°å€¼ï¼›å³ä¸º<span class="number">1100001</span> <span class="number">1100010</span> <span class="number">1100011</span></span><br><span class="line"># å½“å‰setbitè¿™ä¸¤ä¸ªæ“ä½œå³å°† <span class="number">1100001</span> <span class="number">1100010</span> è¿™ä¸¤ä¸ªè¿›è¡Œäº†ä¿®æ”¹ä¸º <span class="number">11000011</span> <span class="number">1100011</span></span><br><span class="line"># æ‰€ä»¥rediså†æ¬¡æŸ¥è¯¢çš„æ—¶å€™å…¶å–å€¼å˜ä¸ºäº† â€œbbcâ€</span><br></pre></td></tr></table></figure><p>åœ¨rediså½“ä¸­ï¼ŒStringç±»å‹çš„valueå€¼å…¶åœ¨redisåº•å±‚ï¼Œå°±æ˜¯é€šè¿‡ä½æ•°ç»„æ¥è¿›è¡Œä¿å­˜å­˜å‚¨çš„ï¼›<br>åœ¨åº•å±‚å½“ä¸­ï¼Œå½“å‰â€œabcâ€ or â€œbbcâ€ å…¶åœ¨redisåº•å±‚å½“ä¸­ä½æ•°é•¿åº¦ä¸º 3 * 8 = 24 ä½ï¼›<br>åº•å±‚çš„ä½æ•°ç»„çš„é•¿åº¦åªæœ‰è¿™ä¹ˆé•¿ï¼›</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">setbit laowang <span class="number">1000</span> <span class="number">0</span> # è®¾ç½®è¿›è¡Œä¿®æ”¹keyä¸ºlaowang å…¶valueå€¼åœ¨redisåº•å±‚çš„ä½æ•°ç»„ï¼ˆäºŒè¿›åˆ¶ï¼‰çš„ç¬¬<span class="number">1000</span>ä¸ªä½ç½®ï¼Œå³ä¸‹æ ‡ä¸º<span class="number">999</span>çš„è¿™ä¸ªä½ç½®indexä¿®æ”¹å–å€¼ä¸º<span class="number">0</span>ï¼›</span><br><span class="line"># å½“æ—¶å½“å‰ key:laowang è¯¥valueå€¼åœ¨redisåº•å±‚çš„å…¶ä½æ•°ç»„é•¿åº¦æ˜¯æ²¡æœ‰<span class="number">1000</span>çš„ï¼›</span><br><span class="line"># åœ¨javaå½“ä¸­ï¼Œæ‰§è¡Œsetbit laowang <span class="number">1000</span> <span class="number">0</span> å°±å°†ä¼šé€ æˆæ•°ç»„è¶Šç•Œ</span><br><span class="line"># é‚£ä¹ˆåœ¨rediså½“ä¸­ï¼Œå½“è¿›è¡Œè®¾ç½®ç¬¬<span class="number">1000</span>ä¸ªä½ç½®ä¸Šå–å€¼ä¸º<span class="number">0</span>æ—¶ï¼Œabc è¯¥valueå­—ç¬¦ä¸²åœ¨redisåº•å±‚çš„ä½æ•°ç»„ï¼ˆäºŒè¿›åˆ¶ï¼‰æ˜¯å¦‚ä½•ä¿å­˜çš„å°±ä¾ç„¶æ˜¯å¦‚ä½•ä¿å­˜ï¼Œå³ä¾ç„¶ä¿å­˜ä¸º<span class="number">1100001</span> <span class="number">1100010</span> <span class="number">1100011</span>ï¼›</span><br><span class="line"># redisåº•å±‚ä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹çš„æ“ä½œï¼›å³abcçš„ä½æ•°ç»„é•¿åº¦ä¸º<span class="number">24</span>ï¼›æ‰€å æ®çš„indexä¸º<span class="number">0</span> ~ <span class="number">23</span>ï¼Œå³å‰é¢indexä¸º <span class="number">0</span> ~ <span class="number">23</span>æ—¶ï¼Œå­˜å‚¨äºŒè¿›åˆ¶å€¼ä¾ç„¶ä¸º <span class="number">1100001</span> <span class="number">1100010</span> <span class="number">1100011</span> ï¼› é‚£ä¹ˆå³ä»indexä¸º<span class="number">24</span>å¼€å§‹åˆ°<span class="number">999</span>ï¼Œè¿™ä¹‹é—´åˆ™å…¨éƒ¨ç”¨<span class="number">0</span>è¿›è¡Œä»£æ›¿ï¼›ï¼ˆindexä¸º<span class="number">999</span>å³ä¸ºç¬¬<span class="number">1000</span>ä¸ªä½ç½®çš„indexï¼‰</span><br><span class="line">#setbit laowang <span class="number">1000</span> <span class="number">1</span> #å³indexä¸º<span class="number">24</span>åˆ°<span class="number">998</span>å…¨éƒ¨ä¸º<span class="number">0</span>ï¼Œè€Œä¸‹æ ‡ä¸º<span class="number">999</span>ï¼ˆå³ç¬¬<span class="number">1000</span>ä¸ªä½ç½®ï¼‰çš„å–å€¼ä¸º<span class="number">1</span>ï¼›</span><br><span class="line"># ä¸­é—´æ‰©å®¹çš„å–å€¼å…¨éƒ¨ä½¿ç”¨ <span class="number">0</span> è¿™ä¸€é»˜è®¤å–å€¼æ¥è¿›è¡Œä»£æ›¿ï¼›</span><br><span class="line"></span><br><span class="line">get laowang<span class="comment">;</span></span><br><span class="line"><span class="comment">#æ­¤æ—¶å“åº”ä¸ºâ€œbbc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\\x00\x00\x00\x00\x00\x00\x00\x00\x00....â€</span></span><br><span class="line"><span class="comment">#redisåº•å±‚è¿›è¡Œæ‰©å®¹ï¼Œæ‰©å®¹å…¶é»˜è®¤å–å€¼ä¸º0ï¼›å³æ‰©å®¹æ—¶æ˜¯æ‰©å®¹çš„ä½æ•°ç»„ï¼Œå› ä¸ºå…¶äºŒè¿›åˆ¶å…¨éƒ¨æ˜¯0ï¼›è€Œè½¬åŒ–å‡ºæ¥ä¹‹åå°±æ˜¯è¯¥ç»“æœ</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½æ•°ç»„å·²ç»æ‰¾åˆ°äº†ï¼Œä¸”è¿˜èƒ½å¤Ÿè¿›è¡Œè‡ªåŠ¨æ‰©å®¹ï¼›ä¹Ÿå°±æ˜¯redisåº•å±‚å¯¹Stringç±»å‹æ“ä½œset key valueè¿™ä¸€apiï¼Œåº•å±‚æ‰€ä½¿ç”¨çš„çš„æ•°æ®ç»“æ„ï¼ˆä½æ•°ç»„ï¼‰ï¼›</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">setbit laowang666 <span class="number">10000</span> <span class="number">0</span></span><br><span class="line"><span class="meta"># key:laowang666 ; value: ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªlengthä¸º 10000 çš„ä½æ•°ç»„ï¼›å¹¶ä¸”å…¶åº•å±‚çš„valueå€¼ä¸º 0(äºŒè¿›åˆ¶å–è‡ª)ï¼›å³åˆ°ç¬¬10000ä½ç½®ä¹‹å‰äºŒè¿›åˆ¶æ•°å€¼å…¨éƒ¨æ˜¯0ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># åœ¨rediså½“ä¸­ç§°ä¹‹ä¸º ä½å›¾ï¼›æœ¬è´¨è¿˜æ˜¯å±äºStringç±»å‹ï¼›</span></span><br><span class="line"><span class="meta"># redisç‰ˆæœ¬5.0.5</span></span><br><span class="line">keys *</span><br><span class="line"><span class="meta"># laowang666</span></span><br><span class="line"><span class="meta"># laowang</span></span><br></pre></td></tr></table></figure><p>å®ç°</p><p>application.yml  </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span></span><br><span class="line"><span class="attr">bloom:</span></span><br><span class="line">  <span class="attr">filter:</span></span><br><span class="line">    <span class="attr">expectedInsertions:</span> <span class="number">1000</span></span><br><span class="line">    <span class="attr">fpp:</span> <span class="number">0.</span><span class="string">001F</span></span><br></pre></td></tr></table></figure><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.testcache.<span class="built_in">filter</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line">#ConfigurationProperties è‡ªåŠ¨è£…é…å±æ€§</span><br><span class="line">@ConfigurationProperties(<span class="string">"bloom.filter"</span>)</span><br><span class="line">@Component</span><br><span class="line"><span class="keyword">public</span> class RedisBloomFilter&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é¢„è®¡æ’å…¥é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> expectedInsertions;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è¯¯åˆ¤ç‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> fpp;</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//bitæ•°ç»„é•¿åº¦</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> numBits;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//hashå‡½æ•°æ•°é‡</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> numHashFunctions;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">long</span> getExpectedInsertions()&#123;<span class="keyword">return</span> expectedInsertions;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> setExpectedInsertions(<span class="keyword">long</span> expectedInsertions)&#123;<span class="keyword">this</span>.expectedInsertions = expectedInsertions;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">double</span> getFpp()&#123;<span class="keyword">return</span> fpp;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> setFpp(<span class="keyword">double</span> fpp)&#123;<span class="keyword">this</span>.fpp = fpp;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//@PostConstruct</span></span><br><span class="line">  <span class="comment">//å³Springå®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™</span></span><br><span class="line">  <span class="comment">//åœ¨è¯¥ç±»è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°±å°†ä¼šå›è°ƒè¯¥æ–¹æ³•initï¼›å¯¹numBitsä»¥åŠnumHashFunctionsè¿›è¡Œåˆå§‹åŒ–å€¼</span></span><br><span class="line">  @PostConstruct</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> init()&#123;</span><br><span class="line">    <span class="keyword">this</span>.numBits = optimalNumOfBits(expectedInsertions, fpp);</span><br><span class="line">    <span class="keyword">this</span>.numHashFunctions = optimalNumOfHashFunctions(expectedInsertions, fpp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—hashå‡½æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * long n   é¢„è®¡æ’å…¥æ•°æ®é‡</span></span><br><span class="line"><span class="comment">  * double m å®¹é”™ç‡</span></span><br><span class="line"><span class="comment">  * description ç®—å‡ºhashå‡½æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">//@VisibleForTesting</span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">int</span> optimalNumOfHashFunctions(<span class="keyword">long</span> n,<span class="keyword">double</span> m)&#123;</span><br><span class="line">  <span class="keyword">return</span> Math.<span class="built_in">max</span>(<span class="number">1</span>, (<span class="built_in">int</span>)Math.<span class="built_in">round</span>( <span class="keyword">double</span>(m) / (<span class="keyword">double</span>)n * Math.<span class="built_in">log</span>(<span class="number">2.0</span>D) ) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—bitæ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * long n   é¢„è®¡æ’å…¥æ•°æ®é‡</span></span><br><span class="line"><span class="comment">  * double p å®¹é”™ç‡</span></span><br><span class="line"><span class="comment">  * description ç®—å‡ºä½æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">//@VisibleForTesting</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">long</span> optimalNumOfBits(<span class="keyword">long</span> n,<span class="keyword">double</span> p)&#123;</span><br><span class="line">  <span class="keyword">if</span>(p == <span class="number">0.0</span>D)&#123;</span><br><span class="line">    p = <span class="number">4.9E-324</span>D;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">long</span>)((<span class="keyword">double</span>)(-n) * Math.<span class="built_in">log</span>(p) / (Math.<span class="built_in">log</span>(<span class="number">2.0</span>D) * Math.<span class="built_in">log</span>(<span class="number">2.0</span>D) ) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * åˆ¤æ–­ keys æ˜¯å¦å­˜åœ¨äºé›†åˆï¼Œ</span></span><br><span class="line"><span class="comment">  * æ˜¯ åˆ™è¿”å› true</span></span><br><span class="line"><span class="comment">  * å¦ åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">boolean</span> isExists(<span class="keyword">String</span> <span class="built_in">key</span>)&#123;</span><br><span class="line">    <span class="keyword">long</span>[] indexs = getIndexs(<span class="built_in">key</span>);</span><br><span class="line">    List list = redisTemplate.executePipelined(<span class="keyword">new</span> RedisCallback&lt;<span class="keyword">Object</span>&gt;()&#123;</span><br><span class="line"></span><br><span class="line">      @Nullable</span><br><span class="line">      @Override</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">Object</span> doInRedis(RedisConnection redisConnection) <span class="keyword">throws</span> DataAccessException&#123;</span><br><span class="line">        redisConnection.openPipeline();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">long</span> index : indexs)&#123;</span><br><span class="line">          redisConnection.getBit(<span class="string">"bf:laowang"</span>.getBytes(),index);</span><br><span class="line">        &#125;</span><br><span class="line">        redisConnection.close();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> !list.contains(<span class="keyword">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å°† key å­˜å…¥ redis bitmap ä½å›¾</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> put(<span class="keyword">String</span> <span class="built_in">key</span>)&#123;<span class="comment">// è€ç‹laowang</span></span><br><span class="line">  <span class="keyword">long</span>[] indexs = getIndexs(<span class="built_in">key</span>);</span><br><span class="line">  redisTemplate.executePipeline(<span class="keyword">new</span> RedisCallback&lt;<span class="keyword">Object</span>&gt;()&#123;</span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">Object</span> doInRedis(RedisConnection redisConnection) <span class="keyword">throws</span> DataAccessException&#123;</span><br><span class="line">      redisConnection.openPipeline();<span class="comment">//æ‰“å¼€ç®¡é“ï¼Œæé«˜æ•ˆç‡</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">long</span> index:indexs)&#123;</span><br><span class="line">        redisConnection.setBit(<span class="string">"bf:laowang"</span>.getBytes(), index, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//setbit laowang 7262 1</span></span><br><span class="line">        <span class="comment">//æ­¤æ—¶keyå†™æ­»ï¼›</span></span><br><span class="line">        <span class="comment">//indexå°†ä¿®æ”¹çš„åŠ¨æ€çš„indexä¸‹æ ‡ä½ç½®ï¼›</span></span><br><span class="line">        <span class="comment">//0ä»£è¡¨falseï¼›1ä»£è¡¨trueï¼›å³ä¸æ‰©å®¹é»˜è®¤ä¸º0ä¿®æ”¹å–å€¼ä¸º1åšæ³•ä¸€è‡´ï¼›åœ¨rediså½“ä¸­0æ˜¯ä½æ•°ç»„è¿›è¡Œæ‰©å®¹æ—¶çš„é»˜è®¤å€¼ï¼›1åˆ™ä¸ºputè¿›æ¥çš„æ•°æ®å…¶ä½ç½®ä¸‹æ ‡indexå°±éœ€è¦æ”¹å˜è¯¥indexä¸Šçš„å–å€¼0å˜æˆ1ï¼›åœ¨javaå½“ä¸­trueå³ä»£è¡¨1ï¼›falseå³ä»£è¡¨0</span></span><br><span class="line">      &#125;</span><br><span class="line">      redisConnection.close();</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ ¹æ® key è·å– bitmap ä¸‹æ ‡ï¼› ä¸€ä¸ªhashå‡½æ•°å¯¹ 20+1  20+2 3ä¸ªä¸åŒçš„hashå‡½æ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span>[] getIndexs(<span class="keyword">String</span> <span class="built_in">key</span>)&#123; <span class="comment">//laowang è€ç‹</span></span><br><span class="line">    <span class="keyword">long</span> hash1 = hash(<span class="built_in">key</span>);</span><br><span class="line">    <span class="keyword">long</span> hash2 = hash1 &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">long</span>[] result = <span class="keyword">new</span> <span class="keyword">long</span>[numHashFunctions]; <span class="comment">// 10</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="built_in">int</span> i = <span class="number">0</span> ; i &lt; numHashFunctions ; i++ )&#123; <span class="comment">//numHashFunctions hashå‡½æ•°çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">long</span> combinedHash = hash1 + i * hash2;</span><br><span class="line">    <span class="comment">//i åŠ¨æ€å€¼ï¼Œæ‰€ä»¥2ä¸ªä¸åŒçš„hashå†åŠ ä¸Šè¯¥ä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å€¼iåˆ™å°†ä¼šæœ‰ä¸‰ä¸ªä¸åŒçš„å–å€¼</span></span><br><span class="line">    <span class="comment">//å¼•ç”¨ä¸‰ä¸ªä¸åŒçš„hashç®—æ³•å¯¹åŒä¸€ä¸ªå­—ç¬¦ä¸²keyè¿›è¡Œè¿ç®—ä¹Ÿå¯ä»¥çš„ï¼›</span></span><br><span class="line">    <span class="keyword">if</span>(combinedHash &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        combinedHash = ^combinedHash;</span><br><span class="line">    &#125;</span><br><span class="line">    result[i] = combinedHash % numBits;<span class="comment">//å¯¹æ•°ç»„çš„é•¿åº¦numBitsè¿›è¡Œå–ä½™</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">expectedInsertions</span> = <span class="number">1000</span></span><br><span class="line"><span class="attr">fpp</span> = <span class="number">0.001</span></span><br><span class="line"><span class="attr">numBits</span> = <span class="number">14377</span></span><br><span class="line"><span class="attr">numHashFunctions</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">key</span> = <span class="string">"1001"</span></span><br><span class="line"><span class="attr">indexs</span> = &#123;long[<span class="number">10</span>]@<span class="number">7667</span>&#125;</span><br><span class="line"><span class="attr">0</span> = <span class="number">7262</span></span><br><span class="line"><span class="attr">1</span> = <span class="number">6438</span></span><br><span class="line"><span class="attr">2</span> = <span class="number">5614</span></span><br><span class="line"><span class="attr">3</span> = <span class="number">4790</span></span><br><span class="line"><span class="attr">4</span> = <span class="number">3966</span></span><br><span class="line"><span class="attr">5</span> = <span class="number">3142</span></span><br><span class="line"><span class="attr">6</span> = <span class="number">2318</span></span><br><span class="line"><span class="attr">7</span> = <span class="number">1494</span></span><br><span class="line"><span class="attr">8</span> = <span class="number">670</span></span><br><span class="line"><span class="attr">9</span> = <span class="number">14223</span></span><br><span class="line"><span class="comment"># 0 ~ 9 ï¼š10ä¸ªä¸‹æ ‡</span></span><br></pre></td></tr></table></figure><p>RedisDataInit</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.testcache.datainit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisDataInit</span>&#123;</span></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  OrderService orderService;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  RedisBloomFilter redisBloomFilter;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@PostConstruct</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> init()&#123;</span><br><span class="line">    List&lt;Order&gt; orders = orderService.selectOrderAll();</span><br><span class="line">    <span class="keyword">for</span>(Order <span class="string">order:</span>orders)&#123;</span><br><span class="line">      redisBloomFilter.put(String.valueOf(order.getId));<span class="comment">//è®¢å•è¡¨çš„id</span></span><br><span class="line">      <span class="comment">//å°†è®¢å•è¡¨ä¸­çš„idæ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿›è¡ŒæŸ¥è¯¢</p><p>service implï¼ˆå®ç°ï¼‰å±‚ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è§£å†³ç¼“å­˜ç©¿é€</span></span><br><span class="line">  <span class="comment">//å¦‚æœå¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­å­˜åœ¨idåˆ™è¯´æ˜æ•°æ®åº“å½“ä¸­å­˜åœ¨è¯¥æ¡è®°å½•ï¼›åˆ™å¯ä»¥ç»§ç»­å¾€ä¸‹èµ°</span></span><br><span class="line">  <span class="comment">//è¿”å›falseè¯´æ˜å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­å¹¶ä¸å­˜åœ¨è¯¥idä¹Ÿå°±è¯´æ˜æ•°æ®åº“ä»¥åŠç¼“å­˜å½“ä¸­éƒ½ä¸ä¼šæœ‰è¯¥æ¡æ•°æ®id</span></span><br><span class="line">  <span class="comment">//æ­¤å¤„å¸ƒéš†è¿‡æ»¤å™¨ç”±äºå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µä¹Ÿå°±æ˜¯å®¹é”™ç‡ï¼›ä½†æ˜¯ç°åœ¨åº”ç”¨çš„åœºæ™¯æ˜¯ç¼“å­˜ç©¿é€ä¹Ÿå°±æ˜¯é¿å…å»è¿›è¡ŒæŸ¥è¯¢æ•°æ®åº“ï¼›è€Œå¸ƒéš†è¿‡æ»¤å™¨è¯¯åˆ¤çš„ç»“æœä¹Ÿå°±æ˜¯ä»…ä»…è®©æ•°æ®åº“å¤šæŸ¥ä¸€æ¬¡è€Œå·²ï¼›æ‰€ä»¥è®¾æƒ³ä¸‹å¦‚æœæœ‰100000ä¸ªæ¶æ„æŸ¥è¯¢ç©ºå¯¹è±¡è¯·æ±‚ï¼›é‚£ä¹ˆç›¸æ¯”äº100000ä¸ªæ¶æ„æŸ¥è¯¢ç©ºå¯¹è±¡è¯·æ±‚è€Œè¨€ï¼Œå¸ƒéš†è¿‡æ»¤å™¨åˆ™è¦æ˜¾å¾—ååˆ†ä¼˜è¶Šäº†ï¼›å³ä¾¿æ˜¯å­˜åœ¨æœ‰è¯¯åˆ¤ä¹Ÿæ¯”100000å¥½ï¼›ä¹Ÿéœ€è¦çœ‹å®¹é”™ç‡çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼›</span></span><br><span class="line">  <span class="keyword">if</span> (!bloomFilter.is<span class="constructor">Exist(String.<span class="params">valueOf</span>(<span class="params">id</span>)</span>))&#123;</span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"éæ³•è®¿é—®"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">      <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;finally&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">localhost<span class="function">:8080</span>/selectid?id=2002</span><br><span class="line"><span class="string">//</span>ç”±äºæœ‰å¸ƒéš†è¿‡æ»¤å™¨çš„å­˜åœ¨å°†ä¸ä¼šå»è¿›è¡ŒæŸ¥è¯¢redisç¼“å­˜ä¹Ÿä¸ä¼šå»æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:600</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"éæ³•è®¿é—®"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2003</span><br><span class="line"><span class="string">//</span>ç”±äºæœ‰å¸ƒéš†è¿‡æ»¤å™¨çš„å­˜åœ¨å°†ä¸ä¼šå»è¿›è¡ŒæŸ¥è¯¢redisç¼“å­˜ä¹Ÿä¸ä¼šå»æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:600</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"éæ³•è®¿é—®"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=2004</span><br><span class="line"><span class="string">//</span>ç”±äºæœ‰å¸ƒéš†è¿‡æ»¤å™¨çš„å­˜åœ¨å°†ä¸ä¼šå»è¿›è¡ŒæŸ¥è¯¢redisç¼“å­˜ä¹Ÿä¸ä¼šå»æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line"><span class="string">//</span>è¯¥æ•°æ®åœ¨æ•°æ®åº“å½“ä¸­ä¸å­˜åœ¨ï¼›</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:600</span> , <span class="string">"data"</span>:&#123;&#125;, <span class="string">"msg"</span>:<span class="string">"éæ³•è®¿é—®"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="params">------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1001</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1001</span>, <span class="string">"name"</span>:<span class="string">"è€ç‹1"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1002</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1002</span>, <span class="string">"name"</span>:<span class="string">"è€ç‹2"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1003</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1003</span>, <span class="string">"name"</span>:<span class="string">"è€ç‹3"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1004</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1004</span>, <span class="string">"name"</span>:<span class="string">"è€ç‹4"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br><span class="line">localhost<span class="function">:8080</span>/selectid?id=1005</span><br><span class="line"><span class="string">//</span>å“åº”ï¼š&#123;<span class="string">"code"</span><span class="function">:200</span> , <span class="string">"data"</span>:&#123;<span class="string">"id"</span><span class="function">:1005</span>, <span class="string">"name"</span>:<span class="string">"è€ç‹5"</span>&#125;, <span class="string">"msg"</span>:<span class="string">"OK"</span>&#125;</span><br></pre></td></tr></table></figure><p>å¤æ‚ï¼š</p><ul><li>ç»´æŠ¤éº»çƒ¦</li><li>å¾€æ•°æ®åº“å½“ä¸­è¿›è¡Œæ·»åŠ æ•°æ®æ—¶ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¾€å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­è¿›è¡Œæ·»åŠ putï¼›ä¸ç„¶çš„å°±å°±ä¼šè¢«å¸ƒéš†è¿‡æ»¤å™¨å½“åšæ˜¯éæ³•è¯·æ±‚è¢«æ‹¦æˆªä¸‹æ¥ï¼›</li><li>å¦‚æœè®¢å•è¡¨å½“ä¸­å­˜åœ¨10ä¸‡çš„æ•°æ®ï¼›åˆ é™¤äº†8ä¸‡çš„æ•°æ®é‡ï¼›ç°åœ¨ä»…å‰©ä¸‹2ä¸‡çš„æ•°æ®é‡ï¼›ä½†æ˜¯å¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰åŠæ³•è¿›è¡Œåˆ é™¤ï¼›è¿™ä¸ªæ—¶å€™å°±éœ€è¦è¿›è¡Œè€ƒè™‘é‡å»ºå¸ƒéš†è¿‡æ»¤å™¨å³é‡æ–°åˆå§‹åŒ–è¯¥å¸ƒéš†è¿‡æ»¤å™¨ï¼›å³ä»å¤´åˆ°å°¾çš„å†å»è·‘ä¸€è¾¹putæ–¹æ³•ï¼Œå³åˆé‡æ–°å°†è®¢å•è¡¨å½“ä¸­çš„è®°å½•è¿›è¡ŒæŸ¥è¯¢å‡ºæ¥å°†å…¶order idé‡æ–°putå…¥å¸ƒéš†è¿‡æ»¤å™¨å½“ä¸­</li><li>è¿™ä¸ªé‡å»ºå¸ƒéš†è¿‡æ»¤å™¨å¾—ä½¿ç”¨å®šæ—¶ä»»åŠ¡æ¥è¿›è¡Œï¼›å®šæ—¶ä»»åŠ¡å¤šå°‘åˆé€‚éœ€è¦çœ‹åˆ é™¤çš„æ•°æ®é‡å¤§å°å¤šä¸å¤šï¼›</li></ul><h2 id="ç¼“å­˜å‡»ç©¿è¯¦è§£åŠå®æˆ˜"><a href="#ç¼“å­˜å‡»ç©¿è¯¦è§£åŠå®æˆ˜" class="headerlink" title="ç¼“å­˜å‡»ç©¿è¯¦è§£åŠå®æˆ˜"></a>ç¼“å­˜å‡»ç©¿è¯¦è§£åŠå®æˆ˜</h2><p>ä¸Šè¿°ä»£ç å­˜åœ¨ä¸¤å¤§é—®é¢˜ï¼Œä¸€æ˜¯ç¼“å­˜ç©¿é€ï¼›äºŒæ˜¯ç¼“å­˜å‡»ç©¿ï¼›<br>ç¼“å­˜å‡»ç©¿é—®é¢˜ä¹Ÿå°±æ˜¯å¯¹äºçƒ­ç‚¹æ•°æ®è®¿é—®çš„é—®é¢˜ï¼›</p><p><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šåœ¨æŸ¥è¯¢æ—¶ï¼Œæ•°æ®åº“æœ‰æ•°æ®ï¼Œç¼“å­˜å½“ä¸­æ²¡æœ‰ï¼ˆæ•°æ®åˆšå¥½å¤±æ•ˆï¼‰ï¼›</p><p>æƒ…å†µåˆ†æï¼š</p><p>ï¼ˆ1ï¼‰è¿™æ¡æ•°æ®æ²¡æœ‰äººè®¿é—®è¿‡ï¼›è¯´æ˜è¯¥æ•°æ®å¹¶éä¸ºçƒ­ç‚¹æ•°æ®ï¼›<br>ï¼ˆ2ï¼‰ä¸€èˆ¬ä¸ºæ•°æ®åˆšå¥½å¤±æ•ˆï¼ˆç”±äºå°†æ•°æ®åŠ å…¥åˆ°ç¼“å­˜å½“ä¸­æ—¶ï¼Œä¼šåŠ å…¥ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼›æ¯”å¦‚è¯¥æ•°æ®å½“å¥½é¢ä¸´è¿‡æœŸæ—¶é—´å¤±æ•ˆï¼Œå³ç†è§£ä¸ºredisè‡ªåŠ¨å°†è¯¥æ•°æ®è¿›è¡Œåˆ é™¤äº†[â€œè‡ªåŠ¨åˆ é™¤â€éœ€è¦åŠ åŒå¼•å·ï¼›æ¶‰åŠåˆ°rediså½“ä¸­çš„ä¸€ä¸ªåˆ é™¤ç‰¹ç‚¹ï¼›å¯ä»¥å…ˆè¿™ä¹ˆè®¤ä¸ºredisç°åœ¨è‡ªåŠ¨å°†è¯¥æ•°æ®è¿›è¡Œäº†åˆ é™¤]ï¼Œä½†æ˜¯æ¥äº†<strong>å¹¶å‘è®¿é—®</strong>ï¼Œç”±äºè¯¥æ•°æ®åˆæ˜¯ä¸€ä¸ªçƒ­ç‚¹æ•°æ®ï¼‰ï¼›</p><p>ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜ç©¿é€æ˜¯ä¸¤ä¸ªä¸åŒçš„é—®é¢˜ï¼›</p><p>æ¨¡æ‹Ÿçƒ­ç‚¹æ•°æ®å¤±æ•ˆè®¿é—®æƒ…å½¢ï¼š</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">keys *</span><br><span class="line"><span class="meta">#laowang666</span></span><br><span class="line"><span class="meta">#laowang</span></span><br><span class="line"><span class="meta">#bf:laowang</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.testcache.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">99</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@org</span>.junit.Test</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">    TicketsRunBle ticketsRunBle = <span class="keyword">new</span> TicketsRunBle();</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">99</span> ; i++)&#123;</span><br><span class="line">      Thread thread = <span class="keyword">new</span> Thread(ticketsRunBle, <span class="string">"çª—å£"</span>);</span><br><span class="line">      thread.start();</span><br><span class="line">      countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.currentThread.join();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TicketsRunBle</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      countDownLatch.await();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    try&#123;</span></span><br><span class="line"><span class="comment">//        Socket socket = new Socket("127.0.0.1", 1333);</span></span><br><span class="line"><span class="comment">//    &#125;catch(IOException e)&#123;</span></span><br><span class="line"><span class="comment">//      e.printStackTrace();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    List&lt;HttpMessageConverter&lt;?&gt;&gt; fastJsonHttpMessageConverters = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    fastJsonHttpMessageConverters.add(<span class="keyword">new</span> FastJsonHttpMessageConverters);</span><br><span class="line">    restTemplate.setMessageConverters(fastJsonHttpMessageConverters);</span><br><span class="line">    R forObject = restTemplate.getForObject(<span class="string">"http://localhost:8080/selectid?id=1001"</span>,R<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(forObject);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³å¯ä»¥è®¤ä¸ºè¯¥æ®µä»£ç è¢«99ä¸ªäººï¼ˆçº¿ç¨‹ï¼‰åŒæ—¶æ‰§è¡Œï¼›</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//99ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œå¸ƒéš†è¿‡æ»¤å™¨çš„åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> (!bloomFilter.is<span class="constructor">Exist(String.<span class="params">valueOf</span>(<span class="params">id</span>)</span>))&#123;</span><br><span class="line">     return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"éæ³•è®¿é—®"</span>)</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//99ä¸ªçº¿ç¨‹åŒæ—¶æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line"> Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//å½“çƒ­ç‚¹æ•°æ®å¤±æ•ˆæ—¶ï¼Œåˆ™æ­¤æ—¶redisObjåˆ™ä¸ºç©º</span></span><br><span class="line"> <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line"> <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">   <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">   return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//æ‰€ä»¥æ­¤æ—¶å°±ä¼šæœ‰99ä¸ªçº¿ç¨‹åŒæ—¶å»æŸ¥è¯¢æ•°æ®åº“ï¼›</span></span><br><span class="line"> <span class="keyword">try</span>&#123;</span><br><span class="line">     Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">     <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">       valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;finally&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br></pre></td></tr></table></figure><p>å³ä¸Šè¿°ä»£ç å°†ä¼šæœ‰99æ¬¡è¿›è¡ŒæŸ¥è¯¢æ•°æ®åº“çš„è®°å½•ï¼›</p><p>è§£å†³æ–¹æ¡ˆ<br>ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œå³æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰è¿›è¡ŒåŠ é”ï¼›<br>OrderServiceImpl</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">valueOperations valueOperations;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">CacheTemplate cacheTemplate;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">RedisBloomFilter RedisBloomFilter;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line"><span class="keyword">private</span> RedisLock redisLock;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">SendMessageUtil sendMessageUtil;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public Integer insert<span class="constructor">Order(Order <span class="params">order</span>)</span>&#123;</span><br><span class="line">  Integer integer = orderMapper.insert<span class="constructor">Order(<span class="params">order</span>)</span>;</span><br><span class="line">  return integer;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//è§£å†³ç¼“å­˜ç©¿é€</span></span><br><span class="line">  <span class="keyword">if</span> (!bloomFilter.is<span class="constructor">Exist(String.<span class="params">valueOf</span>(<span class="params">id</span>)</span>))&#123;</span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"éæ³•è®¿é—®"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="keyword">if</span>( redisObj instanceOf NullValueResultDO)&#123;</span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åœ¨æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰è¿›è¡ŒåŠ é”</span></span><br><span class="line">  redisLock.lock(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">    redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line">    <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">      <span class="keyword">if</span>( redisObj instanceOf NullValueResultDO)&#123;</span><br><span class="line">        return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">      Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">      <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;finally&#123;</span><br><span class="line">        <span class="comment">//è§£é”</span></span><br><span class="line">        redisLock.unlock(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§å¹¶å‘è®¿é—®æ•°æ®åº“æœ€å®¹æ˜“å¯¼è‡´æ•°æ®åº“å´©æ‰ï¼›</p><p>æµ‹è¯•å¹¶æ¨¡æ‹Ÿï¼›</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">keys</span> <span class="string">*</span></span><br><span class="line"><span class="attr">del</span> <span class="string">1001</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä»…ä¼šæœ‰1æ¬¡è®¿é—®æ•°æ®åº“çš„æœºä¼šï¼›<br>åˆ†æï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æ•°æ®åº“</span></span><br><span class="line">public R select<span class="constructor">OrderById(Integer <span class="params">id</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//99ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­è¯¥idæ˜¯å¦éæ³•è®¿é—®</span></span><br><span class="line">  <span class="keyword">if</span> (!bloomFilter.is<span class="constructor">Exist(String.<span class="params">valueOf</span>(<span class="params">id</span>)</span>))&#123;</span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"éæ³•è®¿é—®"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//99ä¸ªçº¿ç¨‹åŒæ—¶æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç”±äºçƒ­ç‚¹æ•°æ®çš„å¤±æ•ˆï¼›æ‰€ä»¥å¯¼è‡´99ä¸ªçº¿ç¨‹åŒæ—¶éƒ½æ²¡æœ‰å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="keyword">if</span>( redisObj instanceOf NullValueResultDO)&#123;</span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç”±äºåœ¨æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰è¿›è¡ŒåŠ é”ï¼Œæ‰€ä»¥æ­¤æ—¶99ä¸ªçº¿ç¨‹å°†ä¼šä¾æ¬¡è¿›è¡ŒæŸ¥è¯¢æ•°æ®åº“æ“ä½œï¼›ï¼ˆå¹¶å‘ï¼‰</span></span><br><span class="line">  <span class="comment">//å³æ­¤æ—¶æœ‰ä¸€ä¸ªçº¿ç¨‹æ‹¿ç€é”è¿›å…¥äº†ä»£ç å—ï¼›è¿˜æœ‰98ä¸ªçº¿ç¨‹åœ¨å¤–é¢ç­‰ç€ï¼›</span></span><br><span class="line">  redisLock.lock(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//ç›¸å½“äº99ä¸ªçº¿ç¨‹ä¸­ç¬¬ä¸€ä¸ªè¿›å…¥ä»£ç å—çš„é‚£ä¸€ä¸ªçº¿ç¨‹ä¼šæŸ¥è¯¢ä¸¤æ¬¡redisç¼“å­˜ï¼›æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼›æŸ¥è¯¢å®Œæˆä¹‹åå°†æ•°æ®åŠ å…¥åˆ°ç¼“å­˜å½“ä¸­å»ï¼›finallyæœ€åè¿›è¡Œè§£é”ï¼›ç´§æ¥ç€98ä¸ªçº¿ç¨‹ç¬¬äºŒä¸ªçº¿ç¨‹åˆä¼šæ‹¿ç€é”è¿›æ¥ï¼›.....</span></span><br><span class="line">      <span class="comment">//è½¬æŠ˜ç‚¹å°±åœ¨è¿™é‡Œï¼›å½“ç¬¬ä¸€ä¸ªè¿›æ¥çš„çº¿ç¨‹å°†æ•°æ®æŸ¥è¯¢å®Œæˆå¹¶åŠ å…¥åˆ°ç¼“å­˜ä¹‹åï¼›åé¢çš„98ä¸ªçº¿ç¨‹å†æ¬¡åˆ°redisç¼“å­˜å½“ä¸­è¿›è¡Œå–å€¼çš„æ—¶å€™é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±èƒ½å¤Ÿæœ‰å€¼è·å–å‡ºæ¥äº†ï¼›ç”±äºç¬¬ä¸€ä¸ªçº¿ç¨‹å·²ç»æŸ¥è¯¢è¿‡æ•°æ®åº“å¹¶å°†å–å€¼åŠ å…¥åˆ°äº†ç¼“å­˜å½“ä¸­å»äº†ï¼›</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//è™½ç„¶æœ‰é”é˜»å¡ï¼Œä½†æ˜¯å´åªæœ‰ä¸€æ¬¡æ“ä½œæ•°æ®åº“æ­¤å¤„ï¼›98ä¸ªçº¿ç¨‹éƒ½å»è¿›è¡Œæ“ä½œç¼“å­˜ï¼›æ‰€ä»¥è¯´è¿™ä¸ªæ•ˆç‡æ˜¯ååˆ†æ˜æ˜¾çš„ï¼›éå¸¸å¿«ï¼›</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">    redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line">    <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">      <span class="keyword">if</span>( redisObj instanceOf NullValueResultDO)&#123;</span><br><span class="line">        return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">      Order order = orderMapper.select<span class="constructor">OrderById(<span class="params">id</span>)</span>;</span><br><span class="line">      <span class="keyword">if</span>(order != null)&#123;</span><br><span class="line">        valueOperations.set(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>, order, <span class="number">10</span>, TimeUnit.MINUTES);<span class="comment">// åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;finally&#123;</span><br><span class="line">        <span class="comment">//è§£é”</span></span><br><span class="line">        redisLock.unlock(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­¤å¤„æ²¡æœ‰ä½¿ç”¨åˆ†å¸ƒå¼é”è€Œæ˜¯ä½¿ç”¨çš„synchronizedåˆ™ï¼›selectOrderByIdæŸ¥è¯¢æ•°æ®ä¸º1001ã€1002ã€1003ã€1004ã€1005æŸ¥è¯¢idä¸åŒï¼ŒæŸ¥è¯¢æ•°æ®å¹¶ä¸ç›¸åŒï¼Œä½†æ˜¯å´è¿˜æ˜¯ä¼šè¢«é˜»å¡ï¼›è¿™ä¸ªæ•ˆç‡å°±å¾ˆä½äº†ï¼›<br>è€Œåˆšåˆšé‚£ç§å¤„ç†æ–¹å¼æ˜¯ï¼šredisLock.lock(String.valueOf(id));æ˜¯å¯¹æŸ¥è¯¢idç›¸åŒï¼›å³è¯¥è¿™ä¸€ç±»éƒ½æ˜¯æŸ¥è¯¢ç›¸åŒåŒä¸€ä¸ªidçš„å¹¶å‘è¯·æ±‚çš„é”ï¼›<br>é’ˆå¯¹çš„æ˜¯å¯¹äºåŒä¸€ä¸ªæŸ¥è¯¢å†…å®¹çš„å¤šä¸ªçº¿ç¨‹è¿›è¡Œé˜»å¡ï¼›<br>è€Œå¯¹äºä¸åŒæŸ¥è¯¢å†…å®¹çš„å¤šä¸ªçº¿ç¨‹æ˜¯è¿›è¡Œåˆ†åˆ«é˜»å¡çš„ï¼›<br>ä¹Ÿå°±æ˜¯è¯´å‡è®¾æœ‰99*2ä¸ªçº¿ç¨‹ï¼Œè¯¥99ä¸ªçº¿ç¨‹éƒ½æ˜¯è¿›è¡ŒæŸ¥è¯¢idä¸º1001çš„æŸ¥è¯¢è¯·æ±‚ï¼›åˆ™redisLockåˆ™å¯¹è¯¥98ä¸ªçº¿ç¨‹è¿›è¡Œé˜»å¡ï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æ‹¿ç€idä¸º1001çš„é”å…ˆè¿›å…¥ä»£ç å—è¿›è¡ŒæŸ¥è¯¢ï¼›ï¼ˆæ­¤æ—¶idä¸º1001çš„æ•°æ®è¿‡æœŸå¤±æ•ˆï¼‰<br>è€Œå¦å¤–99ä¸ªçº¿ç¨‹éƒ½æ˜¯è¿›è¡ŒæŸ¥è¯¢idä¸º1002çš„æŸ¥è¯¢è¯·æ±‚æ‰€ä»¥æ­¤æ—¶è¿™å¦å¤–çš„è¿™99ä¸ªçº¿ç¨‹ï¼ˆæŸ¥è¯¢idä¸º1002çš„è¿™99ä¸ªçº¿ç¨‹ï¼‰ï¼Œä¹Ÿä¼šå­˜åœ¨æœ‰ä¸€ä¸ªçº¿ç¨‹æ‹¿ç€idä¸º1002çš„é”å…ˆè¿›å…¥ä»£ç å—ï¼Œè€Œå…¶ä½™çš„98ä¸ªçº¿ç¨‹åœ¨å¤–ç­‰å€™ï¼Œé˜»å¡ï¼›ï¼ˆæ­¤æ—¶idä¸º1001çš„æ•°æ®è¿‡æœŸå¤±æ•ˆï¼‰</p><p>synchronizedä¸redisLockè¿™ä¸¤è€…é”çš„ç²’åº¦ä¸ä¸€æ ·ï¼›  </p><p>RedisLock</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ThreadLockç”¨äºä¿å­˜æŸä¸ªçº¿ç¨‹å…±äº«å˜é‡</span></span><br><span class="line"><span class="comment">//å¯¹äºåŒä¸€ä¸ªstatic ThreadLoclï¼Œä¸åŒçº¿ç¨‹åªèƒ½ä»ä¸­getï¼Œsetï¼Œremoveè‡ªå·±çš„å˜é‡ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–çš„çº¿ç¨‹</span></span><br><span class="line"><span class="keyword">private</span> ThreadLocal&lt;<span class="keyword">String</span>&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> lock(<span class="keyword">String</span> <span class="built_in">key</span>)&#123;</span><br><span class="line">  <span class="built_in">boolean</span> b = tryLock(<span class="built_in">key</span>);</span><br><span class="line">  <span class="keyword">if</span>(b)&#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      Thread.sleep(<span class="number">50</span>);</span><br><span class="line">  &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  lock(<span class="built_in">key</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> tryLock(<span class="keyword">String</span> <span class="built_in">key</span>)&#123;</span><br><span class="line">  <span class="keyword">String</span> uuid = UUID.randomUUID().toString();</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç å°è£…<br>OrderServiceImpl</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> R selectOrderById(<span class="built_in">Integer</span> id)&#123;</span><br><span class="line">  <span class="keyword">return</span> cacheTemplate.redisFindCache(<span class="built_in">String</span>.valueOf(id), <span class="number">10</span>, TimeUnit.MINUTES, <span class="literal">new</span> CacheLoadble&#123;</span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">Order</span> load()&#123;</span><br><span class="line">      <span class="keyword">return</span> orderMapper.selectOrderById(id);<span class="comment">//æ­¤å¤„ä»…éœ€è¦å†™è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å³å¯</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="params">...</span></span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">List</span>&lt;<span class="keyword">Order</span>&gt; selectOrderAll()&#123; <span class="keyword">return</span> orderMapper.selectOrderAll();&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">Integer</span> updateOrder(<span class="keyword">Order</span> <span class="keyword">order</span>)&#123;</span><br><span class="line">  redisTemplate.delete(<span class="built_in">String</span>.value(<span class="keyword">order</span>.getId()));</span><br><span class="line">  <span class="built_in">Integer</span> <span class="built_in">integer</span> = orderMapper.updateOrder(<span class="keyword">order</span>);</span><br><span class="line">  <span class="keyword">order</span>.setName(<span class="string">"0"</span>);</span><br><span class="line">  sendMessageUtil.placeOrderMessage(<span class="keyword">order</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">integer</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CacheTemplate</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">package com.xxx.testcache.template;</span><br><span class="line"></span><br><span class="line">import ...</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public <span class="keyword">class</span> CacheTemplate&lt;T&gt;&#123;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line"><span class="keyword">private</span> ValueOperations valueOperations;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">RedisBloomFilter redisBloomFilter;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line"><span class="keyword">private</span> Redisson redisson;</span><br><span class="line"></span><br><span class="line"><span class="comment">//private Lock lock = new ReentrantLock();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢ç¼“å­˜  æœ‰     ç›´æ¥è¿”å›å‰ç«¯</span></span><br><span class="line"><span class="comment">//          æ²¡æœ‰   æŸ¥è¯¢æ•°æ®åº“ï¼ŒåŠ å…¥ç¼“å­˜æ”¾å›</span></span><br><span class="line"><span class="comment">//ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜ï¼šä¿æŠ¤æ•°æ®åº“ï¼›æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * key é”®</span></span><br><span class="line"><span class="comment">  * expire è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">  * unit è¿‡æœŸæ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">  * cacheLoadble å›è°ƒæ¥å£æ–¹æ³•</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">public R redis<span class="constructor">FindCache(String <span class="params">key</span>, <span class="params">long</span> <span class="params">expire</span>, TimeUnit <span class="params">unit</span>, CacheLoadble&lt;T&gt; <span class="params">cacheLoadble</span>, <span class="params">boolean</span> <span class="params">b</span>)</span>&#123;</span><br><span class="line"> <span class="comment">//--------------------- ç¼“å­˜ç©¿é€-------------------------------------</span></span><br><span class="line">  <span class="comment">//è§£å†³ç¼“å­˜ç©¿é€</span></span><br><span class="line">  <span class="keyword">if</span>(!bloomFilter.is<span class="constructor">Exist(<span class="params">key</span>)</span>)&#123;</span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(600)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"éæ³•è®¿é—®"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ç¼“å­˜</span></span><br><span class="line">  Object redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------------------ç¼“å­˜å‡»ç©¿--------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">    <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  redisLock.lock(key);</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="comment">//æŸ¥è¯¢ç¼“å­˜ï¼›</span></span><br><span class="line">      redisObj = valueOperations.get(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">id</span>)</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">      <span class="keyword">if</span>(redisObj != null)&#123;</span><br><span class="line">          <span class="comment">//æ­£å¸¸è¿”å›æ•°æ®</span></span><br><span class="line">          return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">     T load = cacheLoadble.load<span class="literal">()</span>;<span class="comment">//æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">if</span>(load != null)&#123;</span><br><span class="line">      valueOperations.set(key, load, expire, <span class="built_in">unit</span>);<span class="comment">//åŠ å…¥ç¼“å­˜</span></span><br><span class="line">      return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(200)</span>.set<span class="constructor">Data(<span class="params">redisObj</span>)</span>.set<span class="constructor">Msg(<span class="string">"OK"</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;finally&#123;</span><br><span class="line">      <span class="comment">//è§£é”</span></span><br><span class="line">      redisLock.unlock(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">key</span>)</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  return <span class="keyword">new</span> <span class="constructor">R()</span>.set<span class="constructor">Code(500)</span>.set<span class="constructor">Data(<span class="params">new</span> NullValueResultDO()</span>).set<span class="constructor">Msg(<span class="string">"æŸ¥è¯¢æ— æœ"</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¼“å­˜é›ªå´©åŠè§£å†³æ–¹æ¡ˆ"><a href="#ç¼“å­˜é›ªå´©åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç¼“å­˜é›ªå´©åŠè§£å†³æ–¹æ¡ˆ"></a>ç¼“å­˜é›ªå´©åŠè§£å†³æ–¹æ¡ˆ</h2><p>ç¼“å­˜é›ªå´©é—®é¢˜ï¼š</p><ol><li>redisæœåŠ¡å™¨æŒ‚äº†</li><li>å¤§éƒ¨åˆ†æ•°æ®å¤±æ•ˆ</li></ol><p>æ¯”å¦‚æœ‰100Wçš„å•†å“æ•°æ®ï¼Œè®¾ç½®çš„è¿‡æœŸæ—¶é—´ç»Ÿä¸€æ˜¯10å¤©ï¼›åˆ™10å¤©åå¤§éƒ¨åˆ†æ•°æ®ç»Ÿä¸€å¤±æ•ˆï¼›è€ŒæŸ¥è¯¢è¯·æ±‚ä¸æ–­ï¼›è¿™ä¸ªæ—¶å€™ä¹Ÿå°±å®¹æ˜“å¯¼è‡´æ•°æ®åº“å´©æ‰ï¼›å³å¼•å‘é›ªå´©é—®é¢˜ï¼›</p><p>(redisç¼“å­˜å‡»ç©¿æŒ‡çš„æ˜¯çƒ­ç‚¹æ•°æ®å¤±æ•ˆè§£å†³çš„æ˜¯å¹¶å‘è¯·æ±‚)</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µçš„å¤„ç†æ–¹å¼ï¼š</p><p>[<strong>è§„é¿</strong>]<br>ï¼ˆ1ï¼‰redisæ­å»ºé«˜å¯ç”¨é›†ç¾¤ï¼ˆclusterï¼‰<br>ï¼ˆ2ï¼‰é”™å¼€æ•°æ®è¿‡æœŸæ—¶é—´</p><p>å¦‚æœå·²ç»å‡ºç°äº†ç¼“å­˜é›ªå´©é—®é¢˜ï¼›åˆ™å¤„ç†æ–¹å¼ä¸ºé™çº§ ç†”æ–­ï¼›</p><h2 id="æ•°æ®ä¸€è‡´æ€§åŠè§£å†³æ–¹æ¡ˆ"><a href="#æ•°æ®ä¸€è‡´æ€§åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ•°æ®ä¸€è‡´æ€§åŠè§£å†³æ–¹æ¡ˆ"></a>æ•°æ®ä¸€è‡´æ€§åŠè§£å†³æ–¹æ¡ˆ</h2><p><strong>ä»€ä¹ˆæ—¶å€™å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</strong></p><ul><li>æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼›<ul><li>å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜<ul><li>ï¼ˆæ­¥éª¤1ï¼‰å…ˆæ›´æ–°æ•°æ®åº“ï¼ˆæ­¥éª¤2ï¼‰å†æ›´æ–°ç¼“å­˜ï¼›<ul><li>å¦‚æœæ­¤æ—¶æ›´æ–°ç¼“å­˜å¤±è´¥ï¼›åˆ™ä¼šå¯¼è‡´æ•°æ®åº“ä¸­æ˜¯æ–°æ•°æ®ï¼Œç¼“å­˜ä¸­æ˜¯æ—§æ•°æ®ï¼Œæ•°æ®å°±å‡ºç°äº†ä¸ä¸€è‡´</li></ul></li><li>1.çº¿ç¨‹Aæ›´æ–°æ•°æ®åº“ï¼›2.çº¿ç¨‹Bæ›´æ–°æ•°æ®åº“ï¼›4.çº¿ç¨‹Aæ›´æ–°ç¼“å­˜ï¼›3.çº¿ç¨‹Bæ›´æ–°ç¼“å­˜ï¼›<ul><li>æ›´æ–°æ•°æ®åº“å¦‚æœå› ä¸ºç½‘ç»œç­‰åŸå› ï¼ŒBå´æ¯”Aæ›´æ—©æ›´æ–°äº†ç¼“å­˜ï¼Œè¿™å°±å¯¼è‡´äº†è„æ•°æ®ï¼ˆä¸ä¸€è‡´ï¼‰</li><li>è§£å†³æ–¹æ¡ˆï¼šå…ˆåˆ é™¤ç¼“å­˜ï¼›å†ä¿®æ”¹æ•°æ®åº“ã€‚å¦‚æœæ•°æ®åº“ä¿®æ”¹å¤±è´¥äº†ï¼Œé‚£ä¹ˆæ•°æ®åº“ä¸­æ˜¯æ—§æ•°æ®ï¼Œç¼“å­˜ä¸­æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæ•°æ®ä¸ä¼šä¸ä¸€è‡´ï¼›å› ä¸ºè¯»çš„æ—¶å€™ç¼“å­˜æ²¡æœ‰ï¼Œåˆ™è¯»æ•°æ®åº“ä¸­æ—§æ•°æ®ï¼Œç„¶åæ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚</li></ul></li><li>è§£å†³æ–¹æ¡ˆä¸€[<strong>å»¶æ—¶åŒåˆ </strong>]ï¼š1.çº¿ç¨‹Aåˆ é™¤ç¼“å­˜ 2.çº¿ç¨‹BæŸ¥è¯¢ç¼“å­˜ï¼Œå‘ç°ä¸ºç©º 3.çº¿ç¨‹BæŸ¥è¯¢æ•°æ®åº“å¹¶åŠ å…¥ç¼“å­˜ 4.çº¿ç¨‹Aæ›´æ–°æ•°æ®åº“ 5.çº¿ç¨‹Aåˆ é™¤ç¼“å­˜ï¼ˆç¬¬äº”æ­¥ä¸€å®šè¦æ‰§è¡ŒæˆåŠŸï¼‰</li><li>è§£å†³æ–¹æ¡ˆäºŒ[<strong>ä¸²è¡ŒåŒ–</strong>]</li></ul></li></ul></li></ul><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX4pgLmAu8VahKl7KcdIHB0TUz5G4e7vKThDgFA4qONmduoQbaGmQQkOcSL4ZRToJCp.Uf19bAH3AwkYd90x7O1U!/r" alt="æ•°æ®ä¸€è‡´æ€§é—®é¢˜1"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX.XryE.7uV.ikOi43KtZHMMeFc5xE9CdpCZxb813hOndwi1w1ZBWEexHrxFZIBZfelNT79b7aY12qTQp7NauUZ8!/r" alt="æ•°æ®ä¸€è‡´æ€§é—®é¢˜2"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX3mOzKCW7tUhJUWL8ztU7xPj*Pe*Joo30G7me5QGmt7Sxi5j5klGAArIsMW*y8bO.byfXwfDCTDh.6x5I.sLatg!/r" alt="æ•°æ®ä¸€è‡´æ€§é—®é¢˜3"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX*S1qKXmK2eYWqUYxPcUsgsF6L*V72VsmLXrkJ.UnQ7ePKGiWhTZhWMp1b6T2ekmO6bUvjPP2Xe6sCMSxuyCrPc!/r" alt="æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆä¸€"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX*S1qKXmK2eYWqUYxPcUsgsF6L*V72VsmLXrkJ.UnQ7ePKGiWhTZhWMp1b6T2ekmO6bUvjPP2Xe6sCMSxuyCrPc!/r" alt="æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆä¸€"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANXzQqwZMYfv*FkdsRt6pLKtRDNNQ8Pv2ce3feyq1.6u.ytk1wClBaFMU15A2dvCGK8aMDt0c6XmLkiGohBxyNLTo!/r" alt="æ•°æ®ä¸€è‡´æ€§æ–¹æ¡ˆäºŒä¸²è¡ŒåŒ–1"></p><p><img src="http://r.photo.store.qq.com/psc?/V13IdniL4CDhqM/TCfiP1YaPeRT4Jil9RANX2CGSzajo.b8bZBcqLFBQeGmscwTpI*sRf3EyyWT3nGZ8bOZlQ82XlsrsHCkd*Z7RoJHLOsDtirE785Nk*g.jaA!/r" alt="æ•°æ®ä¸€è‡´æ€§æ–¹æ¡ˆäºŒä¸²è¡ŒåŒ–2"></p><p>ç¬¬äº”æ­¥ä¸€å®šè¦æ‰§è¡ŒæˆåŠŸï¼Œå®ç°ï¼š<br>StockListeneré‡‡ç”¨äº†å»¶æ—¶é˜Ÿåˆ—ï¼›</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">SendMessageUtil sendMessageUtil;</span><br><span class="line"></span><br><span class="line">@<span class="constructor">RabbitListener(<span class="params">queue</span> = <span class="string">"stock_queue"</span>, <span class="params">containerFactory</span>=<span class="string">"simpleRabbitListenerContainerFactory"</span>)</span></span><br><span class="line">public void get<span class="constructor">StockMessage(Message <span class="params">message</span>, Channel <span class="params">channel</span>)</span> throws Exception&#123;</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"æ¥æ”¶åˆ°äº†æ¶ˆæ¯"</span>+<span class="keyword">new</span> <span class="constructor">String(<span class="params">message</span>.<span class="params">getBody</span>()</span>,<span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line">  Order order = <span class="module-access"><span class="module"><span class="identifier">JSON</span>.</span></span>parse<span class="constructor">Object(<span class="params">new</span> String(<span class="params">message</span>.<span class="params">getBody</span>()</span>,<span class="string">"UTF-8"</span>), <span class="module-access"><span class="module"><span class="identifier">Order</span>.</span></span><span class="keyword">class</span>);</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="comment">//System.out.println(1/0);</span></span><br><span class="line">      redisTemplate.delete(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(Order.<span class="params">getId</span>()</span>));</span><br><span class="line">      channel.basic<span class="constructor">Ack(<span class="params">message</span>.<span class="params">getMessageProperties</span>()</span>.getDeliveryTag,<span class="literal">false</span>);</span><br><span class="line">  &#125;catch(Exception e)&#123;</span><br><span class="line">      <span class="built_in">int</span> count = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>parse<span class="constructor">Int(<span class="params">order</span>.<span class="params">getName</span>()</span>);</span><br><span class="line">      <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(order.get<span class="constructor">Name()</span>);</span><br><span class="line">      channel.basic<span class="constructor">Ack(<span class="params">message</span>.<span class="params">getMessageProperties</span>()</span>.get<span class="constructor">DeliveryTag()</span>, <span class="literal">false</span>);</span><br><span class="line">      <span class="comment">//é‡è¯•5æ¬¡ï¼›å¦‚æœ5æ¬¡ä»ç„¶ä¸æˆåŠŸåˆ™è®°å½•åˆ°æ—¥å¿—ï¼›åˆ°æ—¶å€™äººä¸ºè¿›è¡Œå¤„ç†ï¼ˆäººä¸ºå¹²é¢„ï¼‰ï¼›</span></span><br><span class="line">      <span class="keyword">if</span>(count!=<span class="number">5</span>)&#123;</span><br><span class="line">        count++;</span><br><span class="line">        order.set<span class="constructor">Name(String.<span class="params">valueOf</span>(<span class="params">count</span>)</span>);</span><br><span class="line">        sendMessageUtil.place<span class="constructor">OrderMessage(<span class="params">order</span>)</span>;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      loggerFactory.error(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>value<span class="constructor">Of(<span class="params">order</span>.<span class="params">getId</span>)</span>);</span><br><span class="line">      e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>redis ç‰ˆæœ¬6.0ä¹‹åå³ä¸ºå¤šçº¿ç¨‹ï¼›</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1gZ4y1s7Aw&quot; target=&quot;_bl
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="redis" scheme="https://fengshana.github.io/tags/redis/"/>
    
      <category term="ç¼“å­˜" scheme="https://fengshana.github.io/tags/%E7%BC%93%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>RabbitMQå®æˆ˜æŒ‡å—</title>
    <link href="https://fengshana.github.io/2020/05/12/%E3%80%90RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E3%80%91/RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%9704/"/>
    <id>https://fengshana.github.io/2020/05/12/%E3%80%90RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E3%80%91/RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%9704/</id>
    <published>2020-05-12T03:35:27.484Z</published>
    <updated>2020-05-12T10:23:14.977Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h2><p>ã€ŠRabbitMQå®æˆ˜æŒ‡å—ã€‹ - æœ±å¿ å  </p><h2 id="ç¬¬4ç« -RabbitMQè¿›é˜¶"><a href="#ç¬¬4ç« -RabbitMQè¿›é˜¶" class="headerlink" title="ç¬¬4ç«  RabbitMQè¿›é˜¶"></a>ç¬¬4ç«  RabbitMQè¿›é˜¶</h2><p>å‰ä¸€ç« æ‰€è®²è¿°çš„æ˜¯ä¸€äº›åŸºç¡€çš„æ¦‚å¿µåŠä½¿ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚ <font style="color:red;font-weight:bolder">åˆ›å»ºäº¤æ¢å™¨</font>ã€<font style="color:red;font-weight:bolder">é˜Ÿåˆ—</font>å’Œ<font style="color:red;font-weight:bolder">ç»‘å®šå…³ç³»</font> ç­‰ã€‚  </p><p>ä½†æ˜¯å…¶ä¸­æœ‰è®¸å¤šç»†èŠ‚å¹¶æœªé™ˆè¿°ï¼Œå¯¹ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›â€œå‘â€ä¹Ÿå¹¶æœªæåŠï¼Œä¸€äº›é«˜çº§ç”¨æ³•ä¹Ÿå¹¶æœªå±•ç°ï¼Œæ‰€ä»¥æœ¬ç« çš„å†…å®¹å°±æ˜¯è¦å¼¥è¡¥è¿™äº›ç¼ºæ†¾ã€‚  </p><p>æœ¬ç« ä»¥ <font style="color:red;font-weight:bolder">RabbitMQ</font> åŸºç¡€ä½¿ç”¨çŸ¥è¯†ä¸ºå‰æï¼Œé˜è¿°ä¸€äº›æ ¹æ®ç‰¹è‰²çš„ç»†èŠ‚åŠåŠŸèƒ½ï¼Œä¸ºè¯»è€…æ›´è¿›ä¸€æ­¥åœ°æŒæ¡ <font style="color:red;font-weight:bolder">RabbitMQ</font> æä¾›åŸºå‡†ã€‚</p><h2 id="æ¶ˆæ¯ä½•å»ä½•ä»"><a href="#æ¶ˆæ¯ä½•å»ä½•ä»" class="headerlink" title="æ¶ˆæ¯ä½•å»ä½•ä»"></a>æ¶ˆæ¯ä½•å»ä½•ä»</h2><p>mandatory å’Œimmediate æ˜¯channel.basicPublish æ–¹æ³•ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼Œä»–ä»¬éƒ½æœ‰ å½“æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾ç›®çš„åœ°æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…çš„åŠŸèƒ½ã€‚  </p><p>RabbitMQ æä¾›çš„ å¤‡ä»½äº¤æ¢å™¨ï¼ˆAlternate Exchangeï¼‰ å¯ä»¥ å°†æœªèƒ½è¢«äº¤æ¢å™¨è·¯ç”±çš„æ¶ˆæ¯ï¼ˆæ²¡æœ‰ç»‘å®šé˜Ÿåˆ—æˆ–è€…æ²¡æœ‰åŒ¹é…çš„ç»‘å®šï¼‰å­˜å‚¨èµ·æ¥ï¼Œ è€Œä¸ç”¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚  </p><p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œç‰¹åˆ«å®¹æ˜“å°† mandatory å’Œimmediate è¿™ä¸¤ä¸ªå‚æ•°æ··æ·†ï¼Œè€Œå¯¹äºå¤‡ä»½äº¤æ¢å™¨æ›´æ˜¯ä¸€ç­¹è«å±•ï¼Œæœ¬ç« å¯¹æ­¤ä¸€ä¸€å±•å¼€æ¢è®¨ã€‚  </p><blockquote><p>mandatory</p></blockquote><p>[<br>  adj. å¼ºåˆ¶çš„ï¼›æ‰˜ç®¡çš„ï¼›å‘½ä»¤çš„<br>  n. å—æ‰˜è€…ï¼ˆç­‰äº mandataryï¼‰<br>  å¤æ•° mandatories<br>  ç½‘ç»œé‡Šä¹‰ å¼ºåˆ¶çš„ï¼›å¼ºåˆ¶æ€§ï¼›å‘½ä»¤çš„ï¼›ä¹‰åŠ¡çš„ï¼›<br>  mandatory å¼ºåˆ¶çš„ï¼›å¼ºåˆ¶æ€§ï¼›å‘½ä»¤çš„ï¼›ä¹‰åŠ¡çš„ï¼›<br>  mandatory plan æŒ‡ä»¤æ€§è®¡åˆ’ï¼›å¼ºåˆ¶æ€§è®¡åˆ’ï¼›æŒ‡ä»¤æ€§æ‰“ç®—ï¼›æŒ‡ä»¤æ€§è§„åˆ’ï¼›<br>  mandatory offer å¼ºåˆ¶è¦çº¦ï¼›å¼ºåˆ¶æ€§è¦çº¦ï¼›å¼ºåˆ¶æ€§æ”¶è´­å»ºè®®ï¼›å¼ºåˆ¶æ€§æ”¶è´­ï¼›<br>]</p><blockquote><p>immediate</p></blockquote><p>[<br>  adj. ç«‹å³çš„ï¼›ç›´æ¥çš„ï¼›æœ€æ¥è¿‘çš„ï¼›<br>  ç½‘ç»œé‡Šä¹‰ ç«‹åˆ»ï¼›ç«‹å³çš„ï¼›å³æ—¶ï¼›ç›´æ¥çš„<br>  immediate ç«‹åˆ»ï¼›ç«‹å³çš„ï¼›å³æ—¶ï¼›ç›´æ¥çš„<br>  immediate employer ç›´æ¥é›‡ä¸»<br>  immediate mode ç›´æ¥æ¨¡å¼ï¼›ç«‹å³æ¨¡å¼ï¼›å³æ—¶æ¨¡å¼<br>]</p><h3 id="mandatory-å‚æ•°"><a href="#mandatory-å‚æ•°" class="headerlink" title="mandatory å‚æ•°"></a>mandatory å‚æ•°</h3><p>å½“ mandatory å‚æ•° è®¾ä¸º true æ—¶ï¼Œäº¤æ¢å™¨æ— æ³•æ ¹æ®è‡ªèº«çš„ç±»å‹å’Œè·¯ç”±é”®æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆ RabbitMQ ä¼šè°ƒç”¨ Basic.Return å‘½ä»¤å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…ã€‚  </p><p>å½“ mandatory å‚æ•° è®¾ç½®ä¸º false æ—¶ï¼Œå‡ºç°ä¸Šè¿°æƒ…å½¢ï¼ˆäº¤æ¢å™¨æ— æ³•æ ¹æ®è‡ªèº«çš„ç±»å‹å’Œè·¯ç”±é”®æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„é˜Ÿåˆ—ï¼‰ï¼Œåˆ™æ¶ˆæ¯ç›´æ¥è¢«ä¸¢å¼ƒã€‚  </p><p>é‚£ä¹ˆç”Ÿäº§è€…å¦‚ä½•è·å–åˆ° æ²¡æœ‰è¢«æ­£ç¡®è·¯ç”±åˆ°åˆé€‚é˜Ÿåˆ—çš„æ¶ˆæ¯ å‘¢ï¼Ÿ<br>è¿™æ—¶å€™å¯ä»¥é€šè¿‡è°ƒç”¨ channel.addReturnListener æ¥æ·»åŠ  ReturnListener ç›‘å¬å™¨å®ç°ã€‚  </p><p>ä½¿ç”¨ mandatory å‚æ•°çš„å…³é”®ä»£ç æ¸…å•å¦‚ä¸‹æ‰€ç¤ºï¼š  </p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">channel.basicPublish(</span><br><span class="line">  EXCHANGE_NAME,</span><br><span class="line">  <span class="string">""</span>,</span><br><span class="line">  <span class="keyword">true</span>,</span><br><span class="line">  MessageProperties.PERSISTENT_TEXT_PLAIN,</span><br><span class="line">  <span class="string">"mandatory test"</span>.getBytes()</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  channel.addReturnListener(</span><br><span class="line">    <span class="keyword">new</span> ReturnListener()&#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> handleReturn(</span><br><span class="line">        <span class="built_in">int</span> replyCode,</span><br><span class="line">        <span class="keyword">String</span> replyText,</span><br><span class="line">        <span class="keyword">String</span> exchange,</span><br><span class="line">        <span class="keyword">String</span> routingKey,</span><br><span class="line">        AMQP.BasicProperties basicProperties,</span><br><span class="line">        <span class="built_in">byte</span>[] body</span><br><span class="line">      ) <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">String</span> message = <span class="keyword">new</span> <span class="keyword">String</span>(body);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"Basic.Return è¿”å›çš„ç»“æœæ˜¯ï¼š"</span>+message);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ ç”Ÿäº§è€… æ²¡æœ‰æˆåŠŸåœ°å°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—ï¼Œæ­¤æ—¶ RabbitMQ ä¼šé€šè¿‡ Basic.Return è¿”å› â€œmandatory testâ€ è¿™æ¡æ¶ˆæ¯ï¼Œä¹‹åç”Ÿäº§è€…å®¢æˆ·ç«¯é€šè¿‡ ReturnListener ç›‘å¬åˆ°äº†è¿™ä¸ªæ—¶é—´ï¼Œä¸Šé¢ä»£ç çš„æœ€åè¾“å‡ºåº”è¯¥æ˜¯ â€œBasic.Return è¿”å›çš„ç»“æœæ˜¯ï¼šmandatory testâ€ã€‚  </p><p>ä» AMQP åè®®å±‚é¢æ¥è¯´ï¼Œå…¶å¯¹åº”çš„æµè½¬è¿‡ç¨‹å¦‚å›¾ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string">----------</span>|<span class="string">                              </span>|<span class="string">----------</span>|</span><br><span class="line">|<span class="string"> Producer </span>|<span class="string">                              </span>|<span class="string">  Broker  </span>|</span><br><span class="line">|<span class="string">----------</span>|<span class="string">                              </span>|<span class="string">----------</span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">---------------------------------------------------------------------</span><br><span class="line">     |<span class="string">  æ­¤å¤„çœç•¥ Connection å’Œ Channelçš„å¼€å¯     </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">     |<span class="string">  Basic.Publish--------------------------&gt;</span>|</span><br><span class="line">     |<span class="string">                                          </span>|<span class="string">&lt;-----æ²¡æœ‰è·¯ç”±åˆ°é˜Ÿåˆ—</span></span><br><span class="line"><span class="string">     </span>|<span class="string">&lt;-----------------------------Basic.Return</span>|</span><br><span class="line">     |<span class="string">                  (Basic.Returnä¼šæºå¸¦æ¶ˆæ¯) </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">     |<span class="string">    æ­¤å¤„çœç•¥Connectionå’ŒChannelçš„å…³é—­      </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br><span class="line">     |<span class="string">                                          </span>|</span><br></pre></td></tr></table></figure><h3 id="immediate-å‚æ•°"><a href="#immediate-å‚æ•°" class="headerlink" title="immediate å‚æ•°"></a>immediate å‚æ•°</h3><p>å½“ immediate å‚æ•°è®¾ä¸º trueæ—¶ï¼Œå¦‚æœäº¤æ¢å™¨åœ¨æ¶ˆæ¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç¬”è®°&quot;&gt;&lt;a href=&quot;#ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;ç¬”è®°&quot;&gt;&lt;/a&gt;ç¬”è®°&lt;/h2&gt;&lt;p&gt;ã€ŠRabbitMQå®æˆ˜æŒ‡å—ã€‹ - æœ±å¿ å  &lt;/p&gt;
&lt;h2 id=&quot;ç¬¬4ç« -RabbitMQè¿›é˜¶&quot;&gt;&lt;a href=&quot;#ç¬¬4ç« -Rabbi
      
    
    </summary>
    
    
      <category term="RabbitMQ" scheme="https://fengshana.github.io/categories/RabbitMQ/"/>
    
    
      <category term="ç¬”è®°" scheme="https://fengshana.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="RabbitMQ" scheme="https://fengshana.github.io/tags/RabbitMQ/"/>
    
      <category term="RabbitMQå®æˆ˜æŒ‡å—" scheme="https://fengshana.github.io/tags/RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Redisè®¾è®¡ä¸å®ç°</title>
    <link href="https://fengshana.github.io/2020/05/11/%E3%80%90Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%91/Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B001/"/>
    <id>https://fengshana.github.io/2020/05/11/%E3%80%90Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%91/Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B001/</id>
    <published>2020-05-11T12:26:03.085Z</published>
    <updated>2020-05-12T16:14:33.430Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æŸ¥é˜…äº†å¾ˆå¤šçš„å¦‚ä½•å­¦ä¹ Redisï¼›å‘ç°å¾ˆå¤šäººæ¨èäº†è¿™æœ¬ä¹¦ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹ï¼ˆé»„å¥å®è‘—ï¼‰  </p><p>äºæ˜¯ï¼Œæˆ‘æƒ³çœ‹äº†ï¼›<br>ä¸€å£æ°”åƒä¸æˆä¸€ä¸ªèƒ–å­ï¼›æˆ‘è§‰å¾—å¤šçœ‹ä¹¦è¿˜æŒºå¥½çš„ï¼›<br>å¯¹æŠ€æœ¯å……æ»¡æ•¬ç•ã€‚çªç„¶æœ‰ä¸€ç§è‚ƒç„¶èµ·æ•¬çš„æ„Ÿè§‰ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚<br>æˆ‘ä¸æƒ³å†è¿™ä¹ˆæµ…æ˜¾çš„è¿‡ç€ï¼Œå¹³åº¸ä¹å‘³ï¼Œå•è–„ï¼Œå¥½åƒä»”ç»†ä¸€æƒ³å°±èƒ½çœ‹é€æˆ‘è¿™ä¸€ç”Ÿçš„è½¨è¿¹ã€‚<br>æˆ‘ä¸æƒ³è¿™ä¹ˆæ´»ç€ã€‚æˆ‘å¾—æœ‰è‡ªå·±çš„ä¿¡å¿µï¼Œå¾—æœ‰è‡ªå·±æ‰€åšæŒæ‰€çƒ­çˆ±æ‰€ä¸ºä¹‹å¥‹æ–—ä¸€ç”Ÿçš„ä¸œè¥¿ã€‚<br>æˆ‘ä¸æƒ³ï¼Œåˆ°ä¸€å®šå¹´é¾„ç»“å©šç”Ÿå­ï¼Œåˆ°ä¸€å®šå¹´é¾„ï¼Œæˆä¸ºäº†è‡ªå·±ä¸æƒ³æˆä¸ºçš„äººï¼›  </p><p>redis github: <a href="https://github.com/antirez/redis" target="_blank" rel="noopener">https://github.com/antirez/redis</a>  </p><h2 id="The-Design-and-Implementation-of-Redisï¼ˆRedisè®¾è®¡ä¸å®ç°ï¼‰"><a href="#The-Design-and-Implementation-of-Redisï¼ˆRedisè®¾è®¡ä¸å®ç°ï¼‰" class="headerlink" title="The Design and Implementation of Redisï¼ˆRedisè®¾è®¡ä¸å®ç°ï¼‰"></a>The Design and Implementation of Redisï¼ˆRedisè®¾è®¡ä¸å®ç°ï¼‰</h2><p><strong>Redisè®¾è®¡ä¸å®ç°</strong><br>é»„å¥å® è‘—  </p><p>The Design and Implementation of Redis.  </p><ul><li>ç”±èµ„æ·± Redis æŠ€æœ¯ä¸“å®¶æ’°å†™ï¼Œæ·±å…¥äº†è§£ Redis æŠ€æœ¯è‚ç‰§çš„å¿…è¯»ä¹‹ä½œã€‚</li><li>ä»æºç è§’åº¦è§£æ Redis çš„æ¶æ„è®¾è®¡ã€å®ç°åŸç†å’Œå·¥ä½œæœºåˆ¶ï¼Œä¸ºé«˜æ•ˆä½¿ç”¨ Redis æä¾›åŸç†æ€§æŒ‡å¯¼ã€‚  </li></ul><blockquote><p>design</p></blockquote><p>[<br>  n. è®¾è®¡ï¼›æ„æ€ï¼›è®¾è®¡å›¾æ ·ï¼›è£…é¥°å›¾æ¡ˆï¼›æ‰“ç®—<br>  v. è®¾è®¡ï¼›æ„æ€ï¼›è®¡åˆ’ï¼›åˆ¶é€ ï¼›æ„æ¬²<br>  n.(Design) (å·´ã€å°ã€ä¿„)è¿ªèµ›ï¼ˆäººåï¼‰<br>  å¤æ•° designsï¼›<br>  è¿‡å»å¼ designedï¼›<br>  è¿‡å»åˆ†è¯ designedï¼›<br>  ç°åœ¨åˆ†è¯ designingï¼›<br>  ç¬¬ä¸‰äººç§°å•æ•° designsï¼›<br>  ç½‘ç»œé‡Šä¹‰ è®¾è®¡ã€å¤–è§‚è®¾è®¡ã€å›¾æ¡ˆã€å·¥è‰ºç‰¹è‰²<br>  design è®¾è®¡ï¼›å¤–è§‚è®¾è®¡ï¼›å›¾æ¡ˆï¼›å·¥è‰ºç‰¹è‰²<br>  Fashion Design æ—¶è£…è®¾è®¡ï¼›æ—¶å°šè®¾è®¡ï¼›æœè£…è®¾è®¡ï¼›æœè£…è®¾è®¡ä¸“ä¸š<br>  urban design åŸå¸‚è®¾è®¡ï¼›åŸåŒºè®¾è®¡ï¼›éƒ½å¸‚è®¾è®¡ï¼›åŸå¸‚åŒ–è§„åˆ’<br>]</p><blockquote><p>implementation</p></blockquote><p>[<br>  n.[ è®¡] å®ç°ï¼›å±¥è¡Œï¼›å®‰è£…å¯ç”¨<br>  ç½‘ç»œé‡Šä¹‰ å®ç°ï¼›å®æ–½ï¼›å®ç°ï¼›æ‰§è¡Œ<br>  implementation å®ç°ï¼›å®æ–½ï¼›å®ç°ï¼›æ‰§è¡Œ<br>  base implementation åŸºå®ç°<br>  policy implementation æ”¿ç­–å®æ–½ï¼›æ”¿ç­–æ‰§è¡Œï¼›æ”¿ç­–çš„å®æ–½ï¼›æ”¿ç­–æ‰§è¡Œ<br>]</p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>æœ¬ä¹¦å…¨é¢è€Œå®Œæ•´çš„è®²è§£äº† Redis çš„ å†…éƒ¨æœºåˆ¶ ä¸ å®ç°æ–¹å¼ã€‚  </p><p>å¯¹ Redis çš„å¤§å¤šæ•°å•æœºåŠŸèƒ½ä»¥åŠæ‰€æœ‰å¤šæœºåŠŸèƒ½çš„å®ç°åŸç†è¿›è¡Œäº†ä»‹ç»ã€‚  </p><p>å±•ç¤ºäº†è¿™äº›åŠŸèƒ½çš„ æ ¸å¿ƒæ•°æ®ç»“æ„ ä»¥åŠ å…³é”®çš„ç®—æ³•æ€æƒ³ ï¼Œ å›¾ç¤ºä¸°å¯Œï¼Œæè¿°æ¸…æ™°ï¼Œå¹¶ç»™å‡ºå¤§é‡å‚è€ƒä¿¡æ¯ã€‚  </p><p>é€šè¿‡é˜…è¯»æœ¬ä¹¦ï¼Œè¯»è€…å¯ä»¥å¿«é€Ÿã€æœ‰æ•ˆåœ°äº†è§£ Redis çš„ å†…éƒ¨æ„é€  ä»¥åŠ è¿ä½œæœºåˆ¶ï¼Œæ›´å¥½ã€æ›´é«˜æ•ˆåœ°ä½¿ç”¨ Redisã€‚  </p><p>æœ¬ä¹¦ä¸»è¦åˆ†ä¸ºå››å¤§éƒ¨åˆ†ã€‚  </p><ol><li><strong>ç¬¬ä¸€éƒ¨åˆ†</strong>ï¼šâ€œæ•°æ®ç»“æ„ä¸å¯¹è±¡â€</li></ol><p>ä»‹ç»äº† Redis ä¸­çš„å„ç§ å¯¹è±¡åŠå…¶æ•°æ®ç»“æ„ï¼Œå¹¶è¯´æ˜è¿™äº› æ•°æ®ç»“æ„ å¦‚ä½•å½±å“ å¯¹è±¡çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚</p><ol start="2"><li><strong>ç¬¬äºŒéƒ¨åˆ†</strong>ï¼šâ€œå•æœºæ•°æ®åº“çš„å®ç°â€</li></ol><p>å¯¹ Redis å®ç°å•æœºæ•°æ®åº“çš„æ–¹æ³• è¿›è¡Œäº†ä»‹ç»ï¼ŒåŒ…æ‹¬ æ•°æ®åº“ã€RDBæŒä¹…åŒ–ã€AOFæŒä¹…åŒ–ã€äº‹ä»¶ç­‰ï¼›</p><ol start="3"><li><strong>ç¬¬ä¸‰éƒ¨åˆ†</strong>ï¼šâ€å¤šæœºæ•°æ®åº“çš„å®ç°â€œ</li></ol><p>å¯¹ Redis çš„ Sentinelã€å¤åˆ¶ã€é›†ç¾¤ ä¸‰ä¸ªå¤šæœºåŠŸèƒ½è¿›è¡Œäº†ä»‹ç»ã€‚</p><ol start="4"><li><strong>ç¬¬å››éƒ¨åˆ†</strong>ï¼šâ€ç‹¬ç«‹åŠŸèƒ½çš„å®ç°â€œ</li></ol><p>å¯¹ Redis ä¸­å„ä¸ªç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—è¿›è¡Œäº†ä»‹ç»ï¼Œæ¶‰åŠ å‘å¸ƒä¸è®¢é˜…ã€äº‹åŠ¡ã€Luaè„šæœ¬ã€æ’åºã€äºŒè¿›åˆ¶ä½æ•°ç»„ã€æ…¢æŸ¥è¯¢æ—¥å¿—ã€ç›‘è§†å™¨ç­‰ã€‚  </p><p>æœ¬ä¹¦ä½œè€…ä¸“é—¨ç»´æŠ¤äº† <a href="http://www.redisbook.com" target="_blank" rel="noopener">www.redisbook.com</a> ç½‘ç«™ï¼Œæä¾›å¸¦æœ‰è¯¦ç»†æ³¨é‡Šçš„ Redisæºç ï¼Œä»¥åŠæœ¬ä¹¦ç›¸å…³çš„æ›´æ–°å†…å®¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æŸ¥é˜…äº†å¾ˆå¤šçš„å¦‚ä½•å­¦ä¹ Redisï¼›å‘ç°å¾ˆå¤šäººæ¨èäº†è¿™æœ¬ä¹¦ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹ï¼ˆé»„å¥å®è‘—ï¼‰  &lt;/p&gt;
&lt;p&gt;äºæ˜¯ï¼Œæˆ‘æƒ³çœ‹äº†ï¼›&lt;br&gt;ä¸€å£æ°”
      
    
    </summary>
    
    
      <category term="Redis" scheme="https://fengshana.github.io/categories/Redis/"/>
    
    
      <category term="Redis" scheme="https://fengshana.github.io/tags/Redis/"/>
    
      <category term="ç¬”è®°" scheme="https://fengshana.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Redisè®¾è®¡ä¸å®ç°" scheme="https://fengshana.github.io/tags/Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>Javaç¬”è¯•é¢è¯•-Springæ ¸å¿ƒ</title>
    <link href="https://fengshana.github.io/2020/05/11/Java%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-Spring%E6%A0%B8%E5%BF%83/"/>
    <id>https://fengshana.github.io/2020/05/11/Java%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95-Spring%E6%A0%B8%E5%BF%83/</id>
    <published>2020-05-11T01:56:02.931Z</published>
    <updated>2020-05-11T10:51:31.326Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬”è®°ï¼š<a href="https://blog.csdn.net/huanglei305/article/details/101195116?utm_source=app" target="_blank" rel="noopener">https://blog.csdn.net/huanglei305/article/details/101195116?utm_source=app</a></p><p><font style="color:red;font-weight:bolder;">Spring framework</font> ç®€ç§° <font style="color:red;font-weight:bolder;">Spring</font> , æ˜¯Javaå¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ¡†æ¶ï¼Œåœ°ä½ä»…æ¬¡äº<font style="color:red;font-weight:bolder;">Java API</font> ;  </p><p>å°±è¿è¿‘å‡ å¹´æ¯”è¾ƒæµè¡Œçš„å¾®æœåŠ¡æ¡†æ¶ <font style="color:red;font-weight:bolder;">SpringBoot</font> ï¼Œ ä¹Ÿæ˜¯åŸºäº  <font style="color:red;font-weight:bolder;">Spring</font> å®ç°çš„ï¼Œ <font style="color:red;font-weight:bolder;">SpringBoot</font> çš„è¯ç”Ÿæ˜¯ä¸ºäº†è®©å¼€å‘è€…æ›´æ–¹ä¾¿çš„ä½¿ç”¨ <font style="color:red;font-weight:bolder;">Spring</font> ï¼Œ å› æ­¤ <font style="color:red;font-weight:bolder;">Spring</font> åœ¨javaä½“ç³»ä¸­çš„åœ°ä½å¯è°“é¦–å±ˆä¸€æŒ‡ã€‚</p><h2 id="Spring-ä»‹ç»"><a href="#Spring-ä»‹ç»" class="headerlink" title="Spring ä»‹ç»"></a>Spring ä»‹ç»</h2><p><font style="color:red;font-weight:bolder;">Spring</font> æ˜¯ä¸€ä¸ª <font style="color:red;font-weight:bolder;">å¼€æºæ¡†æ¶</font> ï¼Œ ä¸ºäº†  <font style="color:red;font-weight:bolder;">è§£å†³ä¼ä¸šåº”ç”¨ç¨‹åºå¼€å‘å¤æ‚æ€§</font>  è€Œåˆ›å»ºçš„ï¼Œ <font style="color:red;font-weight:bolder;">Spring</font> çš„æ¦‚å¿µè¯ç”Ÿäº 2002å¹´ï¼Œäº2003å¹´æ­£å¼å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬ Spring Framework 0.9ã€‚</p><p><strong>Spring 1.x</strong><br>æ­¤ç‰ˆæœ¬ä¸»è¦æ˜¯ä¸ºäº†  <font style="color:red;font-weight:bolder;">è§£å†³ä¼ä¸šåº”ç”¨ç¨‹åºå¼€å‘å¤æ‚æ€§</font>  è€Œåˆ›å»ºçš„ï¼Œå½“æ—¶ <font style="color:red;font-weight:bolder;">J2EE</font> åº”ç”¨çš„ç»å…¸æ¶æ„æ˜¯  <font style="color:red;font-weight:bolder;">åˆ†å±‚æ¶æ„</font>ï¼š <font style="color:red;font-weight:bolder;">è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚ã€æŒä¹…å±‚</font>ï¼Œæœ€æµè¡Œçš„ç»„åˆå°±æ˜¯ <font style="color:red;font-weight:bolder;">SSHï¼ˆStrutsã€Springã€Hibernateï¼‰</font>ã€‚</p><p><font style="color:red;font-weight:bolder;">Spring1.x</font> ä»…æ”¯æŒ <font style="color:red;font-weight:bolder;">åŸºäºXMLçš„é…ç½®</font> ï¼Œ ç¡®ä¿ç”¨æˆ· <font style="color:red;font-weight:bolder;">ä»£ç ä¸ä¾èµ–Spring</font>ï¼Œå®ƒä¸»è¦åŒ…å«äº†ä»¥ä¸‹åŠŸèƒ½æ¨¡å—ï¼š <font style="color:red;font-weight:bolder;">aopã€ beansã€ejbã€jdbcã€jndiã€ormã€transationã€validationã€web</font>ç­‰ã€‚</p><p><strong>Spring 2.x</strong><br><font style="color:red;font-weight:bolder;">Spring 2.x</font> çš„æ”¹åŠ¨å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œ ä¸»è¦æ˜¯åœ¨ <font style="color:red;font-weight:bolder;">Spring 1.x</font>çš„åŸºç¡€ä¸Šå¢åŠ äº†å‡ ä¸ªæ–°æ¨¡å—ï¼Œå¦‚ <font style="color:red;font-weight:bolder;">ehcacheã€jmsã€jmxã€scriptingã€stereotype</font> ç­‰ã€‚</p><p><strong>Spring 3.x</strong><br><font style="color:red;font-weight:bolder;">Spring 3.x</font> å¼€å§‹ä¸æ­¢æ”¯æŒ <font style="color:red;font-weight:bolder;">XMLçš„é…ç½®</font> ï¼Œ è¿˜æ‰©å±•äº† <font style="color:red;font-weight:bolder;">åŸºäºJavaç±»çš„é…ç½®</font>ï¼Œ è¿˜å¢åŠ äº† <font style="color:red;font-weight:bolder;">Expressionã€Instructmentã€Tomcatã€oxm</font>ç­‰ç»„ä»¶ï¼Œ åŒæ—¶å°†åŸæ¥çš„ <font style="color:red;font-weight:bolder;">Web</font> ç»†åˆ†ä¸ºï¼š<font style="color:red;font-weight:bolder;">Portletã€Servlet</font>ã€‚</p><p><strong>Spring 4.x</strong><br><font style="color:red;font-weight:bolder;">Spring 4.x</font> æ‰©å……äº† <font style="color:red;font-weight:bolder;">Groovyã€Messagingã€WebMvcã€Tiles2ã€WebSocket</font>ç­‰åŠŸèƒ½ç»„ä»¶ï¼ŒåŒæ—¶ <font style="color:red;font-weight:bolder;">Spring</font> è¿˜é€‚é…äº† <font style="color:red;font-weight:bolder;">Javaç‰ˆæœ¬</font>ï¼Œå…¨é¢æ”¯æŒ <font style="color:red;font-weight:bolder;">Java 8.0ã€Lambdaè¡¨è¾¾å¼</font>ç­‰ã€‚ éšç€ <font style="color:red;font-weight:bolder;">RESTful æ¶æ„é£æ ¼</font>è¢«è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·æ‰€é‡‡ç”¨ï¼Œ <font style="color:red;font-weight:bolder;">Spring 4.x</font> ä¹Ÿæä¾›äº†<font style="color:red;font-weight:bolder;">ResultController ç­‰æ³¨è§£</font> æ–°ç‰¹æ€§ã€‚  </p><p><strong>Spring 5.x</strong><br><font style="color:red;font-weight:bolder;">Spring 5.x</font> ç´§è·Ÿ Java ç›¸å…³æŠ€æœ¯çš„æ›´æ–°è¿­ä»£ï¼Œä¸æ–­é€‚é… <font style="color:red;font-weight:bolder;">Java çš„æ–°ç‰ˆæœ¬</font>ï¼ŒåŒæ—¶ä¸æ–­é‡æ„ä¼˜åŒ–è‡ªèº«æ ¸å¿ƒæ¡†æ¶ä»£ç ï¼Œæ”¯æŒ <font style="color:red;font-weight:bolder;">å‡½æ•°å¼ã€å“åº”å¼ç¼–ç¨‹æ¨¡å‹</font> ç­‰ã€‚  </p><h2 id="Spring-æ ¸å¿ƒ"><a href="#Spring-æ ¸å¿ƒ" class="headerlink" title="Spring æ ¸å¿ƒ"></a>Spring æ ¸å¿ƒ</h2><p><font style="color:red;font-weight:bolder;">Spring æ ¸å¿ƒ</font>  åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">æ§åˆ¶åè½¬ï¼ˆIOCï¼ŒInversion of Controlï¼‰</font></li><li><font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥ï¼ˆDIï¼ŒDependency Injectionï¼‰</font></li><li><font style="color:red;font-weight:bolder;">é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼ŒAspect Oriented Programmingï¼‰</font></li></ul><p><strong>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</strong><br><font style="color:red;font-weight:bolder;">æ§åˆ¶åè½¬ï¼ˆInversion of Control, IOCï¼‰</font> ,é¡¾åæ€ä¹‰æ‰€è°“çš„ <font style="color:red;font-weight:bolder;">æ§åˆ¶åè½¬</font> å°±æ˜¯ <font style="color:red;font-weight:bolder;">æŠŠåˆ›å»ºå¯¹è±¡çš„æƒåˆ©äº¤ç»™æ¡†æ¶å»æ§åˆ¶ï¼Œ è€Œä¸éœ€è¦äººä¸ºçš„å»åˆ›å»º</font>ï¼Œ è¿™æ ·å°±å®ç°äº† <font style="color:red;font-weight:bolder;">å¯æ’æ‹”å¼çš„æ¥å£ç¼–ç¨‹</font> ï¼Œ æœ‰æ•ˆçš„ <font style="color:red;font-weight:bolder;">é™ä½ä»£ç çš„è€¦åˆåº¦ï¼Œé™ä½äº†æ‰©å±•å’Œç»´æŠ¤çš„æˆæœ¬</font>ã€‚<br>æ¯”å¦‚ï¼Œå»æŸåœ°æ—…æ¸¸ä¸å†ç”¨è‡ªå·±äº²è‡ªä¸ºè®¢è´­Aé…’åº—è¿˜æ˜¯Bé…’åº—è€Œå‘æ„äº†ï¼Œåªéœ€è¦æŠŠä½åº—çš„è¿™ä¸ªéœ€æ±‚å‘Šè¯‰ç»™æŸä¸ª æ‰˜ç®¡å¹³å°ï¼Œ è¿™ä¸ªæ‰˜ç®¡å¹³å°å°±ä¼šå¸®æ‚¨è®¢è´­ä¸€ä¸ªæ—¢ä¾¿å®œåˆèˆ’é€‚çš„é…’åº—ï¼Œè€Œè¿™ä¸ªå¸®ä½ è®¢è´­é…’åº—çš„è¡Œä¸ºå°±å¯ä»¥ç§°ä¹‹ä¸º <font style="color:red;font-weight:bolder;">æ§åˆ¶åè½¬</font>ã€‚</p><p><strong>ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong><br><font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥ ï¼ˆDependency Injectionï¼ŒDIï¼‰</font>ï¼Œæ˜¯ <font style="color:red;font-weight:bolder;">ç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»</font> ç”± <font style="color:red;font-weight:bolder;">å®¹å™¨åœ¨è¿è¡ŒæœŸ</font> å†³å®šï¼Œå³ç”± <font style="color:red;font-weight:bolder;">å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­</font>ã€‚<br><font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥</font> çš„ç›®çš„ å¹¶éä¸º è½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸ºäº† <font style="color:red;font-weight:bolder;">æé«˜ç»„ä»¶é‡ç”¨çš„é¢‘ç‡ï¼Œå¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°</font>ã€‚<br>é€šè¿‡ <font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥æœºåˆ¶</font>ï¼Œåªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯ä»¥æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œ å®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚</p><p><strong>IOCå’ŒDIçš„å…³ç³»</strong><br><font style="color:red;font-weight:bolder;">IOC</font> æ˜¯ <font style="color:red;font-weight:bolder;">Spring</font> ä¸­ä¸€ä¸ªæä¸ºé‡è¦çš„<font style="color:red;font-weight:bolder;">æ¦‚å¿µ</font>ï¼Œ è€Œ <font style="color:red;font-weight:bolder;">DI </font>åˆ™æ˜¯ <font style="color:red;font-weight:bolder;">å®ç°IOC</font> çš„ <font style="color:red;font-weight:bolder;">æ–¹æ³•å’Œæ‰‹æ®µ</font>ã€‚  </p><p><strong>ä¾èµ–æ³¨å…¥çš„å¸¸è§å®ç°æ–¹å¼</strong></p><ul><li><font style="color:red;font-weight:bolder;">setter</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">æ„é€ æ–¹æ³•</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">æ³¨è§£</font> æ³¨å…¥</li></ul><ol><li><strong>setter æ³¨å…¥</strong></li></ol><p>Javaä»£ç ï¼š  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">UserController</span>&#123;</span><br><span class="line">  <span class="comment">//æ³¨å…¥ UserService å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">private</span> UserService userService;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">void</span> setUserService(UserService userService)&#123;</span><br><span class="line">    <span class="keyword">this</span>.userService = userService;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>XML é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userController"</span> <span class="attr">class</span>=<span class="string">"com.learning.controller.UserController"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¾èµ–æ³¨å…¥ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">ref</span>=<span class="string">"userService"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.learning.dao.impl.UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Beanæ ‡ç­¾çš„å¸¸ç”¨å±æ€§è¯´æ˜ï¼š</strong></p><ul><li><strong>id</strong>: ä¸ºå®ä¾‹åŒ–å¯¹è±¡ èµ·åç§°ï¼Œ æ ¹æ®idå€¼ å¯ä»¥å¾—åˆ°é…ç½®çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œidå±æ€§çš„åç§°åŸåˆ™ä¸Šå¯ä»¥ä»»æ„å‘½åï¼Œä½†æ˜¯ä¸èƒ½åŒ…å«ä»»ä½•ç‰¹æ®Šç¬¦å·ï¼›</li><li><strong>class</strong>: åˆ›å»ºå¯¹è±¡æ‰€åœ¨ç±»çš„å…¨è·¯å¾„ã€‚</li><li><strong>name</strong>: åŠŸèƒ½å’Œidå±æ€§ä¸€æ ·ï¼Œä½†æ˜¯ç°åœ¨ä¸€èˆ¬ä¸ç”¨ï¼›ä¸idçš„åŒºåˆ«åœ¨äºï¼šnameå±æ€§å€¼é‡Œå¯ä»¥åŒ…å«ç‰¹æ®Šç¬¦å·ï¼Œä½†æ˜¯idä¸å¯ä»¥ï¼›</li><li><strong>scope</strong>ï¼š ä¸€èˆ¬æœ€å¸¸ç”¨çš„æœ‰ä¸¤ä¸ªå€¼ï¼š<br><font style="color:red;font-weight:bolder;">Singletonï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</font>ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œåªåˆ›å»ºbeanè¿™ä¸€ä¸ªç¤ºä¾‹ï¼›<br><font style="color:red;font-weight:bolder;">Prototypeï¼ˆåŸå‹æ¨¡å¼ï¼‰</font>ï¼Œæ¯æ¬¡æ³¨å…¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ï¼Œ<font style="color:red;font-weight:bolder;">Springé»˜è®¤çš„æ˜¯å•ä¾‹æ¨¡å¼</font>ã€‚</li></ul><ol start="2"><li><strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong></li></ol><p>Javaä»£ç ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">UserController</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> UserService userService;</span><br><span class="line">  <span class="keyword">public</span> UserController(UserService userService)&#123;</span><br><span class="line">    <span class="keyword">this</span>.userService = userService;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>XMLé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userController"</span> <span class="attr">class</span>=<span class="string">"com.learning.controller.UserController"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¾èµ–æ³¨å…¥ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">ref</span>=<span class="string">"userService"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.learning.dao.impl.UserServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><strong>æ³¨è§£æ³¨å…¥ï¼š</strong></li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Controller</span></span><br><span class="line">public class UserController&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä½¿ç”¨æ³¨è§£è‡ªåŠ¨æ³¨å…¥</span></span><br><span class="line">  <span class="variable">@Autowired</span></span><br><span class="line">  private UserService userService;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¾èµ–å¯¹è±¡</span></span><br><span class="line"><span class="variable">@Service</span></span><br><span class="line">public class UserService&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font style="color:red;font-weight:bolder;">åˆ›å»ºä¾èµ–å¯¹è±¡</font>çš„å¸¸è§æ³¨è§£ï¼š<br><font style="color:red;font-weight:bolder;">@Component</font>ã€<br><font style="color:red;font-weight:bolder;">@Controller</font>ã€<br><font style="color:red;font-weight:bolder;">@Service</font>ã€<br><font style="color:red;font-weight:bolder;">@Repository</font></p><p>æ€»ç»“ï¼š å¯ä»¥çœ‹å‡º <font style="color:red;font-weight:bolder;">æ³¨è§£çš„æ–¹å¼</font> è¦æ¯” <font style="color:red;font-weight:bolder;">ä¼ ç»Ÿçš„XMLï¼ˆsetterå’Œæ„é€ å™¨æ³¨å…¥ï¼‰</font> æ˜¯å®ç°æ³¨å…¥æ›´ä¸ºæ–¹ä¾¿ï¼ŒåŒæ—¶æ³¨è§£æ–¹å¼ ä¹Ÿæ˜¯å®˜æ–¹åŠ›æ¨çš„ä¾èµ–æ³¨å…¥æœ€ä½³ä½¿ç”¨æ–¹å¼ã€‚</p><p><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼ŒAspect Oriented Programmingï¼‰</strong><br><font style="color:red;font-weight:bolder;">é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect Oriented Programmingï¼ŒAOPï¼‰</font>ï¼›<br>å®ƒå°±å¥½æ¯” å°†ç³»ç»ŸæŒ‰ç…§åŠŸèƒ½åˆ†ç±»ï¼Œæ¯ä¸€ä¸ªç±»åˆ«å°±æ˜¯ä¸€ä¸ªâ€œåˆ‡é¢â€ï¼Œå†é’ˆå¯¹ä¸åŒçš„åˆ‡é¢åˆ¶å®šç›¸åº”çš„è§„åˆ™ï¼Œç±»ä¼¼å¼€å‘æ¨¡å¼è¢«ç§°ä¸º<font style="color:red;font-weight:bolder;">é¢å‘åˆ‡é¢ç¼–ç¨‹</font>ã€‚</p><p><strong>AOPä½¿ç”¨åœºæ™¯</strong></p><ul><li><font style="color:red;font-weight:bolder;">æ—¥å¿—ç³»ç»Ÿ</font></li><li><font style="color:red;font-weight:bolder;">å®‰å…¨ç»Ÿä¸€æ ¡éªŒ</font></li></ul><p><strong>AOPä¼˜ç‚¹</strong></p><ul><li><font style="color:red;font-weight:bolder;">é›†ä¸­å¤„ç†æŸä¸€ç±»é—®é¢˜ï¼Œæ–¹ä¾¿ç»´æŠ¤</font></li><li><font style="color:red;font-weight:bolder;">é€»è¾‘æ›´åŠ æ¸…æ™°</font></li><li><font style="color:red;font-weight:bolder;">é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦</font></li></ul><p><strong>AOPç›¸å…³æ¦‚å¿µ</strong></p><ul><li><strong>Join point</strong>: <font style="color:red;font-weight:bolder;">è¿æ¥ç‚¹</font>ï¼Œç¨‹åºæ‰§è¡ŒæœŸé—´çš„æŸä¸€ä¸ªç‚¹ï¼Œä¾‹å¦‚æ‰§è¡Œæ–¹æ³•æˆ–å¤„ç†å¼‚å¸¸æ—¶å€™çš„ç‚¹ï¼Œåœ¨Spring AOPä¸­ï¼Œè¿æ¥ç‚¹æ€»æ˜¯è¡¨ç¤ºæ–¹æ³•çš„æ‰§è¡Œã€‚</li><li><strong>Advice</strong>: <font style="color:red;font-weight:bolder;">é€šçŸ¥</font>ï¼Œé€šçŸ¥åˆ†ä¸ºæ–¹æ³•æ‰§è¡Œå‰é€šçŸ¥ã€æ–¹æ³•æ‰§è¡Œåé€šçŸ¥ã€ç¯ç»•é€šçŸ¥ç­‰ã€‚è®¸å¤šAOPæ¡†æ¶ï¼ˆåŒ…æ‹¬Springï¼‰éƒ½å°†é€šçŸ¥å»ºæ¨¡ä¸ºæ‹¦æˆªå™¨ï¼Œåœ¨è¿æ¥ç‚¹å‘¨å›´ç»´æŠ¤ä¸€ç³»åˆ—æ‹¦æˆªå™¨ï¼ˆå½¢æˆæ‹¦æˆªå™¨é“¾ï¼‰ï¼Œå¯¹è¿æ¥ç‚¹çš„æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</li><li><strong>PointCut</strong>ï¼š<font style="color:red;font-weight:bolder;">åˆ‡ç‚¹</font>ï¼ŒåŒ¹é…è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰çš„è¡¨è¾¾å¼ï¼Œæ˜¯AOPçš„æ ¸å¿ƒï¼Œå¹¶ä¸”Springé»˜è®¤ä½¿ç”¨AspectJä½œä¸ºåˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯­è¨€ï¼›</li><li><strong>Aspect</strong>ï¼š<font style="color:red;font-weight:bolder;">åˆ‡é¢</font>ï¼Œæ˜¯ä¸€ä¸ªè·¨è¶Šå¤šä¸ªç±»çš„æ¨¡å—åŒ–çš„å…³æ³¨ç‚¹ï¼Œå®ƒæ˜¯é€šçŸ¥ï¼ˆAdviceï¼‰å’Œåˆ‡ç‚¹ï¼ˆPointcutï¼‰åˆèµ·æ¥çš„æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªåˆ‡ç‚¹ï¼ˆPointcutï¼‰ç”¨æ¥åŒ¹é…è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰,ä¹Ÿå°±æ˜¯éœ€è¦å¯¹éœ€è¦æ‹¦æˆªçš„é‚£äº›æ–¹æ³•è¿›è¡Œå®šä¹‰ï¼›</li><li><strong>Target object</strong>ï¼š<font style="color:red;font-weight:bolder;">ç›®æ ‡å¯¹è±¡</font>ï¼Œå¯¹ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢ï¼ˆAspectï¼‰é€šçŸ¥çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è¢«AOPè¿›è¡Œæ‹¦æˆªå¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºï¼ˆä½¿ç”¨é€šçŸ¥ï¼‰çš„å¯¹è±¡ï¼Œä¹Ÿç§°ä¸ºè¢«é€šçŸ¥çš„å¯¹è±¡ã€‚ç”±äºåœ¨AOPé‡Œé¢ä½¿ç”¨è¿è¡Œæ—¶ä»£ç†ï¼Œå› è€Œç›®æ ‡å¯¹è±¡ä¸€ç›´æ˜¯è¢«ä»£ç†çš„å¯¹è±¡ã€‚</li><li><strong>AOP Proxy</strong>ï¼š<font style="color:red;font-weight:bolder;">AOPä»£ç†</font>ï¼Œä¸ºäº†æ˜¯å®ç°åˆ‡é¢ï¼ˆAspectï¼‰åŠŸèƒ½ä½¿ç”¨AOPæ¡†æ¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨Springæ¡†æ¶é‡Œé¢ä¸€ä¸ªAOPä»£ç†æŒ‡çš„æ˜¯JDKè‡ªèº«çš„åŠ¨æ€ä»£ç†æˆ–è€…æ˜¯CGLIBå®ç°çš„åŠ¨æ€ä»£ç†ï¼›</li><li><strong>Weaving</strong>ï¼š<font style="color:red;font-weight:bolder;">æŠŠåˆ‡é¢åŠ å…¥åˆ°å¯¹è±¡ï¼Œå¹¶åˆ›å»ºå‡ºä»£ç†å¯¹è±¡çš„è¿‡ç¨‹</font>ï¼›</li><li><strong>Advisor</strong>ï¼šä¸€ä¸ªAdvisorç›¸å½“äºä¸€ä¸ª<font style="color:red;font-weight:bolder;">å°å‹çš„åˆ‡é¢</font>ï¼Œä¸åŒçš„æ˜¯å®ƒåªæœ‰ä¸€ä¸ªé€šçŸ¥ï¼ˆAdviceï¼‰ï¼ŒAdvisoråœ¨äº‹åŠ¡ç®¡ç†é‡Œé¢ä¼šç»å¸¸é‡åˆ°ã€‚</li></ul><p><strong>AOPä»£ç å®ç°</strong><br>AOPçš„ç¤ºä¾‹å°±ä»¥å¼€è½¦ä¸ºä¾‹ï¼›<br>å¼€è½¦çš„å®Œæˆæµç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>å·¡è§†è½¦ä½“ä»¥åŠå‘¨å›´æƒ…å†µâ€”ã€‹å‘åŠ¨â€”ã€‹å¼€è½¦â€”ã€‹ç†„ç«â€”ã€‹é”è½¦ã€‚<br>å½“ç„¶ï¼Œä¸»è¦çš„ç›®çš„æ˜¯â€œå¼€è½¦â€ï¼Œä½†æ˜¯åœ¨å¼€è½¦ä¹‹å‰å’Œå¼€å®Œè½¦ä¹‹åï¼Œè¦åšä¸€äº›å…¶ä»–çš„å·¥ä½œï¼Œè¿™äº›â€œå…¶ä»–â€çš„å·¥ä½œï¼Œå¯ä»¥ç†è§£ä¸ºAOPç¼–ç¨‹ã€‚  </p><p>1ï¼‰<strong>åˆ›å»ºç±»å’Œæ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.learning.aop;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">driver</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"å¼€è½¦"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ï¼‰<strong>åˆ›å»ºAOPæ‹¦æˆª</strong></p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.learning.aop;</span><br><span class="line"></span><br><span class="line">import org.aspectj.lang.<span class="keyword">annotation</span>.<span class="title">After</span>;</span><br><span class="line">import org.aspectj.lang.<span class="keyword">annotation</span>.<span class="title">Aspect</span>;</span><br><span class="line">import org.aspectj.lang.<span class="keyword">annotation</span>.<span class="title">Before</span>;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">@Aspect</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CarAop</span>&#123;</span></span><br><span class="line">  @Before(<span class="string">"execution(* com.learning.aop.Person.driver())"</span>)</span><br><span class="line">  public void before()&#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">"å·¡è§†è½¦ä½“ä»¥åŠå‘¨å›´æƒ…å†µ"</span>);</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">"å‘åŠ¨"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  @After(<span class="string">"execution(* com.learning.aop.Person.driver())"</span>)</span><br><span class="line">  public void before()&#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">"ç†„ç«"</span>);</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">"é”è½¦"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ï¼‰<strong>XMLé…ç½®æ³¨å…¥æ‰«æåŒ…è·¯å¾„</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.learning"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4ï¼‰<strong>åˆ›å»ºæµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.learning.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonTest</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    ApplicationContext context=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">    Person landlord=context.getBean(<span class="string">"person"</span>,Person<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    landlord.driver();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•ä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å·¡è§†è½¦ä½“ä»¥åŠå‘¨å›´æƒ…å†µ</span><br><span class="line"></span><br><span class="line">å‘åŠ¨</span><br><span class="line"></span><br><span class="line">å¼€è½¦</span><br><span class="line"></span><br><span class="line">ç†„ç«</span><br><span class="line"></span><br><span class="line">é”è½¦</span><br></pre></td></tr></table></figure><p><strong>AspectJ æ³¨è§£</strong> è¯´æ˜ï¼š  </p><ul><li><strong>@Before</strong> <font style="color:red;font-weight:bolder;">å‰ç½®é€šçŸ¥</font>ï¼Œåœ¨è¿æ¥ç‚¹æ–¹æ³•å‰è°ƒç”¨ï¼›</li><li><strong>@Around</strong> <font style="color:red;font-weight:bolder;">ç¯ç»•é€šçŸ¥</font>ï¼Œå®ƒå°†è¦†ç›–åŸæœ‰æ–¹æ³•ï¼Œä½†æ˜¯å…è®¸é€šè¿‡åå°„è°ƒç”¨åŸæœ‰æ–¹æ³•</li><li><strong>@After</strong> <font style="color:red;font-weight:bolder;">åç½®é€šçŸ¥</font>ï¼Œåœ¨è¿æ¥ç‚¹æ–¹æ³•åè°ƒç”¨ï¼›</li><li><strong>@AfterReturning</strong> <font style="color:red;font-weight:bolder;">è¿”å›é€šçŸ¥</font>ï¼Œåœ¨è¿æ¥ç‚¹æ–¹æ³•æ‰§è¡Œå¹¶æ­£å¸¸è¿”å›åè°ƒç”¨ï¼Œè¦æ±‚è¿æ¥ç‚¹æ–¹æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰å‘ç”Ÿä»»ä½•å¼‚å¸¸ã€‚</li><li><strong>@AfterThrowing</strong> <font style="color:red;font-weight:bolder;">å¼‚å¸¸é€šçŸ¥</font>ï¼Œå½“è¿æ¥ç‚¹æ–¹æ³•å¼‚å¸¸æ—¶è°ƒç”¨ï¼›</li></ul><h2 id="ç¬”è¯•é¢è¯•é¢˜"><a href="#ç¬”è¯•é¢è¯•é¢˜" class="headerlink" title="ç¬”è¯•é¢è¯•é¢˜"></a>ç¬”è¯•é¢è¯•é¢˜</h2><ol><li><strong>@Value æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li></ol><p>ç­”ï¼š åŸºäº <font style="color:red;font-weight:bolder;">@Value</font> çš„æ³¨è§£å¯ä»¥ <font style="color:red;font-weight:bolder;">è¯»å– properties é…ç½®æ–‡ä»¶</font>ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Value(<span class="string">"<span class="subst">#&#123;configProperties[<span class="string">'jdbc.username'</span>]&#125;</span>"</span>)</span><br><span class="line">private String userName;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸ºè¯»å–configPropertiesä¸‹çš„jdbc.username é…ç½®</p><ol start="2"><li><strong>Springé€šçŸ¥ç±»å‹æœ‰å“ªäº›ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<br><font style="color:red;font-weight:bolder;">Spring é€šçŸ¥ç±»å‹</font> æ€»å…±æœ‰5ç§ï¼š<br><font style="color:red;font-weight:bolder;">å‰ç½®é€šçŸ¥</font>ã€<br><font style="color:red;font-weight:bolder;">ç¯ç»•é€šçŸ¥</font>ã€<br><font style="color:red;font-weight:bolder;">åç½®é€šçŸ¥</font>ã€<br><font style="color:red;font-weight:bolder;">å¼‚å¸¸é€šçŸ¥</font>ã€<br><font style="color:red;font-weight:bolder;">æœ€ç»ˆé€šçŸ¥</font>ã€‚</p><ul><li><strong>å‰ç½®é€šçŸ¥ï¼ˆBefore Adviceï¼‰</strong>ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œçš„é€šçŸ¥ã€‚åœ¨æŸè¿æ¥ç‚¹ï¼ˆjoin pointï¼‰ä¹‹å‰æ‰§è¡Œçš„é€šçŸ¥ï¼Œä½†è¿™ä¸ªé€šçŸ¥ä¸èƒ½é˜»æ­¢è¿æ¥ç‚¹å‰çš„æ‰§è¡Œï¼ˆé™¤éå®ƒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼‰ã€‚</li><li><strong>ç¯ç»•é€šçŸ¥ï¼ˆAround Adviceï¼‰</strong>ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åéƒ½å¯ä»¥æ‰§è¡Œé¢å¤–ä»£ç çš„é€šçŸ¥ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ˜¯å¦ç»§ç»­æ‰§è¡Œè¿æ¥ç‚¹æˆ–è€…ç›´æ¥è¿”å›ä»–ä»¬è‡ªå·±çš„è¿”å›å€¼æˆ–æŠ›å‡ºå¼‚å¸¸æ¥ç»“æŸæ‰§è¡Œã€‚</li><li><strong>åç½®é€šçŸ¥ï¼ˆAfterï¼ˆfinallyï¼‰Adviceï¼‰</strong>ï¼šç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åï¼ˆæŸè¿æ¥ç‚¹é€€å‡ºçš„æ—¶å€™ï¼‰æ‰§è¡Œçš„é€šçŸ¥ï¼ˆä¸è®ºæ˜¯æ­£å¸¸è¿”å›è¿˜æ˜¯å¼‚å¸¸é€€å‡ºï¼‰</li><li><strong>å¼‚å¸¸åé€šçŸ¥ï¼ˆAfter throwing Adviceï¼‰</strong>ï¼šåœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸é€€å‡ºæ—¶æ‰§è¡Œé€šçŸ¥</li><li><strong>æœ€ç»ˆé€šçŸ¥ï¼ˆAfter returning Adviceï¼‰</strong>ï¼šåœ¨æŸè¿æ¥ç‚¹ï¼ˆjoin pointï¼‰æ­£å¸¸å®Œæˆåæ‰§è¡Œçš„é€šçŸ¥ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼Œæ­£å¸¸è¿”å›ã€‚</li></ul><ol start="3"><li><strong>æ€ä¹ˆç†è§£Springä¸­çš„IOCå®¹å™¨ï¼Ÿ</strong></li></ol><p>ç­”ï¼š <font style="color:red;font-weight:bolder;">Spring IOC</font> å°±æ˜¯ <font style="color:red;font-weight:bolder;">æŠŠåˆ›å»ºå¯¹è±¡çš„æƒåˆ©äº¤ç»™æ¡†æ¶å»æ§åˆ¶ï¼Œè€Œä¸éœ€è¦äººä¸ºçš„å»åˆ›å»º</font>ï¼Œè¿™æ ·å°±å®ç°äº† <font style="color:red;font-weight:bolder;">å¯æ’æ‹”å¼çš„æ¥å£ç¼–ç¨‹</font>ï¼Œ<font style="color:red;font-weight:bolder;">æœ‰æ•ˆçš„é™ä½ä»£ç çš„è€¦åˆåº¦ï¼Œé™ä½äº†æ‰©å±•å’Œç»´æŠ¤çš„æˆæœ¬</font>ã€‚</p><p>æ¯”å¦‚ï¼Œå»æŸåœ°æ—…æ¸¸ä¸å†ç”¨è‡ªå·±äº²è‡ªä¸ºè®¢è´­Aé…’åº—è¿˜æ˜¯Bé…’åº—è€Œå‘æ„äº†ï¼Œåªéœ€è¦æŠŠä½åº—çš„éœ€æ±‚å‘Šè¯‰ç»™æŸä¸ªæ‰˜ç®¡å¹³å°ï¼Œè¿™ä¸ªæ‰˜ç®¡å¹³å°å°±ä¼šå¸®æ‚¨è®¢è´­ä¸€ä¸ªæ—¢ä¾¿å®œåˆèˆ’é€‚çš„é…’åº—ï¼Œè€Œè¿™ä¸ªå¸®ä½ è®¢è´­é…’åº—çš„è¡Œä¸ºå°±å¯ä»¥ç§°ä¹‹ä¸º æ§åˆ¶åè½¬ã€‚</p><ol start="4"><li><strong>æ€ä¹ˆç†è§£ Spring ä¸­çš„ä¾èµ–æ³¨å…¥ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥</font> æ˜¯æŒ‡ <font style="color:red;font-weight:bolder;">ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»</font> ç”±  <font style="color:red;font-weight:bolder;">å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®š</font>ï¼Œå³ç”± <font style="color:red;font-weight:bolder;">å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­</font>ã€‚ä¾èµ–æ³¨å…¥çš„ç›®çš„å¹¶éä¸ºè½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ <font style="color:red;font-weight:bolder;">ä¸ºäº†æå‡ç»„ä»¶é‡ç”¨çš„é¢‘ç‡ï¼Œ å¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°</font>ã€‚ é€šè¿‡ <font style="color:red;font-weight:bolder;">ä¾èµ–æ³¨å…¥æœºåˆ¶</font>ï¼Œåªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚  </p><ol start="5"><li><strong>IOCå’ŒDIæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">IOC(Inversion of Control)</font> æ˜¯ <font style="color:red;font-weight:bolder;">Spring</font> ä¸­ä¸€ä¸ªæä¸ºé‡è¦çš„ <font style="color:red;font-weight:bolder;">æ¦‚å¿µ</font>ï¼Œæä¾›äº†<font style="color:red;font-weight:bolder;">å¯¹è±¡ç®¡ç†</font> çš„åŠŸèƒ½ï¼Œä»è€Œçœå»äº†äººä¸ºåˆ›å»ºéº»çƒ¦ï¼Œè€Œ <font style="color:red;font-weight:bolder;">DI(Dependency Injection)</font> æ­£æ˜¯å®ç° <font style="color:red;font-weight:bolder;">IOC(Inversion of Control)</font> çš„ <font style="color:red;font-weight:bolder;">æ–¹æ³•å’Œæ‰‹æ®µ</font>ã€‚  </p><ol start="6"><li><strong>@Componentå’Œ@Beanæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">@Component</font> å’Œ <font style="color:red;font-weight:bolder;">@Bean</font> çš„ <font style="color:red;font-weight:bolder;">ä½œç”¨å¯¹è±¡</font> ä¸åŒï¼›</p><ul><li><font style="color:red;font-weight:bolder;">@Component</font>ä½œç”¨äº<font style="color:red;font-weight:bolder;">ç±»</font></li><li><font style="color:red;font-weight:bolder;">@Bean</font>ç›´æ¥ä½œç”¨äº<font style="color:red;font-weight:bolder;">æ–¹æ³•</font></li></ul><p><font style="color:red;font-weight:bolder;">@Component</font> é€šå¸¸æ˜¯é€šè¿‡ <font style="color:red;font-weight:bolder;">ç±»è·¯å¾„æ‰«æ</font> æ¥è‡ªåŠ¨ ä¾¦æµ‹å’Œ è£…é… å¯¹è±¡åˆ°Springå®¹å™¨ä¸­ï¼›<br>æ¯”å¦‚<font style="color:red;font-weight:bolder;">@ComponentScan</font> æ³¨è§£å°±æ˜¯å®šä¹‰ æ‰«æè·¯å¾„ä¸­çš„ç±» è£…é… åˆ°Springçš„Beanå®¹å™¨ä¸­ï¼›</p><p><font style="color:red;font-weight:bolder;">@Bean</font> æ³¨è§£æ˜¯å‘Šè¯‰Springè¿™æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œå½“è°ƒç”¨è€…éœ€è¦ç”¨å®ƒçš„æ—¶å€™æŠŠå®ƒç»™è°ƒç”¨è€…ï¼›<br>@Bean æ³¨è§£æ¯” @Componentæ³¨è§£ <font style="color:red;font-weight:bolder;">è‡ªå®šä¹‰æ€§</font> æ›´å¼ºï¼Œå¾ˆå¤šåœ°æ–¹åªèƒ½é€šè¿‡@Beanæ³¨è§£æ¥æ³¨å†ŒBeanï¼Œæ¯”å¦‚å½“å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»éœ€è¦ è£…é… åˆ°Springå®¹å™¨æ—¶ï¼Œåˆ™åªèƒ½é€šè¿‡ @Bean æ¥å®ç°ï¼Œæ¯”å¦‚ä»¥ä¸‹ç¤ºä¾‹ï¼Œåªèƒ½é€šè¿‡@Beanæ³¨è§£æ¥å®ç°ï¼š  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WireThirdLibClass</span></span>&#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ThirdLibClass <span class="title">getThirdLibClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThirdLibClass();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li><strong>Springä¸­Beançš„ä½œç”¨åŸŸæœ‰å‡ ç§ç±»å‹ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springä¸­beançš„ä½œç”¨åŸŸæœ‰å››ç§ç±»å‹</font>ï¼Œå¦‚ä¸‹åˆ—è¡¨ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">å•ä¾‹ï¼ˆSingletonï¼‰</font>: æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œåªåˆ›å»ºbeançš„ä¸€ä¸ªå®ä¾‹ï¼›</li><li><font style="color:red;font-weight:bolder;">åŸå‹ï¼ˆPrototypeï¼‰ï¼š</font> æ¯æ¬¡æ³¨å…¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ï¼›</li><li><font style="color:red;font-weight:bolder;">ä¼šè¯ï¼ˆSessionï¼‰ï¼š</font> æ¯ä¸ªä¼šè¯åˆ›å»ºä¸€ä¸ªbeanå®ä¾‹ï¼Œåªåœ¨Webç³»ç»Ÿä¸­æœ‰æ•ˆï¼›</li><li><font style="color:red;font-weight:bolder;">è¯·æ±‚ï¼ˆRequestï¼‰ï¼š</font> æ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªbeanå®ä¾‹ï¼Œåªåœ¨Webç³»ç»Ÿä¸­æœ‰æ•ˆï¼›</li><li><font style="color:red;font-weight:bolder;">Springé»˜è®¤çš„æ˜¯å•ä¾‹æ¨¡å¼ã€‚</font></li></ul><ol start="8"><li><strong>ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨Beanï¼Ÿ</strong></li></ol><p>ç­”ï¼šå½“ä¸€ä¸ªbeanä»…è¢«ç”¨ä½œå¦ä¸€ä¸ªbeançš„å±æ€§æ—¶ï¼Œå®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨beanï¼Œä¸ºäº†å®šä¹‰innerBeanï¼Œåœ¨Springçš„åŸºäºXMLçš„é…ç½®å…ƒæ•°æ®ä¸­ï¼Œå¯ä»¥åœ¨&lt; property/&gt; æˆ–è€…&lt; constructor-arg/&gt;å…ƒç´ å†…ä½¿ç”¨&lt; bean/&gt;å…ƒç´ ï¼Œå†…éƒ¨beané€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„Scopeä¸€èˆ¬æ˜¯prototypeã€‚  </p><ol start="9"><li><strong>Springæ³¨å…¥æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springçš„æ³¨å…¥æ–¹å¼åŒ…å«ä»¥ä¸‹äº”ç§</font>ï¼š  </p><ul><li><font style="color:red;font-weight:bolder;">setter</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">æ„é€ æ–¹æ³•</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">æ³¨è§£</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">é™æ€å·¥å‚</font> æ³¨å…¥</li><li><font style="color:red;font-weight:bolder;">å®ä¾‹å·¥å‚</font> æ³¨å…¥</li></ul><p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯å‰ä¸‰ç§ï¼Œå®˜æ–¹æ¨èä½¿ç”¨çš„æ˜¯ <font style="color:red;font-weight:bolder;">æ³¨è§£</font> æ³¨å…¥ï¼Œç›¸å¯¹ä½¿ç”¨æ›´ç®€å•ï¼Œç»´æŠ¤æˆæœ¬æ›´ä½ï¼Œæ›´ç›´è§‚ã€‚  </p><ol start="10"><li><strong>åœ¨Springä¸­å¦‚ä½•æ“ä½œæ•°æ®åº“ï¼Ÿ</strong></li></ol><p>ç­”ï¼šåœ¨Springä¸­æ“ä½œæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨Springæä¾›çš„JDBC Templateå¯¹è±¡ï¼›<br>JDBC Templateç±»æä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•ï¼›<br>æ¯”å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼›<br>æ‰§è¡Œè‡ªå®šä¹‰SQLè¯­å¥ï¼›<br>æä¾›äº†è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ç­‰ï¼›</p><p>jdbc template ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–°å¢</span></span><br><span class="line">@GetMapping(<span class="string">"save"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">String</span> save()&#123;</span><br><span class="line">  <span class="built_in">String</span> sql=<span class="string">"INSERT INTO USER(USER_NAME,PASS_WORD) VALUES ('LAOWANG','ADMIN')"</span>;</span><br><span class="line">  int <span class="keyword">rows</span>=jdbcTemplate.update(sql);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"æ‰§è¡ŒæˆåŠŸï¼Œå½±å“"</span>+<span class="keyword">rows</span>+<span class="string">"è¡Œ"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">@GetMapping(<span class="string">"del"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">String</span> del(int id)&#123;</span><br><span class="line">  int <span class="keyword">rows</span>=jdbcTemplate.update(<span class="string">"DELETE FROM USER WHERE ID=?"</span>,id);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"æ‰§è¡ŒæˆåŠŸï¼Œå½±å“"</span>+<span class="keyword">rows</span>+<span class="string">"è¡Œ"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">@GetMapping(<span class="string">"getMapById"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">Map</span> getMapById(<span class="built_in">Integer</span> id)&#123;</span><br><span class="line">  <span class="built_in">String</span> sql=<span class="string">"SELECT * FROM USER WHERE ID=?"</span>;</span><br><span class="line">  <span class="built_in">Map</span> <span class="built_in">map</span>=jdbcTemplate.queryForMap(sql,id);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">map</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="11"><li><strong>Springçš„ JdbcTemplate å¯¹è±¡å’Œ JDBC æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Spring</font>çš„ <font style="color:red;font-weight:bolder;">JdbcTemplate</font>æ˜¯å¯¹<font style="color:red;font-weight:bolder;">JDBC APIçš„å°è£…</font>ï¼Œæä¾›æ›´å¤šçš„åŠŸèƒ½å’Œæ›´ä¾¿åˆ©çš„æ“ä½œï¼Œæ¯”å¦‚<font style="color:red;font-weight:bolder;">JDBC Template </font>æ‹¥æœ‰ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">JDBC Template</font>æ˜¯<font style="color:red;font-weight:bolder;">çº¿ç¨‹å®‰å…¨</font>çš„ï¼›</li><li><font style="color:red;font-weight:bolder;">å®ä¾‹åŒ–</font>æ“ä½œæ¯”è¾ƒ<font style="color:red;font-weight:bolder;">ç®€å•</font>ï¼Œä»…éœ€è¦ä¼ é€’<font style="color:red;font-weight:bolder;">DataSource</font></li><li><font style="color:red;font-weight:bolder;">è‡ªåŠ¨å®Œæˆèµ„æºçš„åˆ›å»ºå’Œé‡Šæ”¾</font>å·¥ä½œï¼›</li><li>åˆ›å»ºä¸€æ¬¡JDBCTemplateï¼Œåˆ°å¤„å¯ç”¨ï¼Œ<font style="color:red;font-weight:bolder;">é¿å…é‡å¤å¼€å‘</font>ã€‚</li></ul><ol start="12"><li><strong>Springæœ‰å‡ ç§å®ç°äº‹åŠ¡çš„æ–¹å¼ï¼Ÿ</strong></li></ol><p>ç­”ï¼šSpringå®ç°äº‹åŠ¡çš„æ–¹å¼æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">ç¼–ç¨‹å¼</font> äº‹åŠ¡ï¼›</li><li><font style="color:red;font-weight:bolder;">å£°æ˜å¼</font> äº‹åŠ¡ï¼›</li></ul><p><font style="color:red;font-weight:bolder;">ç¼–ç¨‹å¼</font> äº‹åŠ¡ï¼š<br>ä½¿ç”¨<font style="color:red;font-weight:bolder;">TransactionTemplate</font>æˆ–<font style="color:red;font-weight:bolder;">Platform TransactionManager</font>å®ç°ï¼Œ<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š  </p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> TransactionTemplate transactionTemplate;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">  <span class="comment">//Springç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå›è°ƒæœºåˆ¶</span></span><br><span class="line">  transactionTemplate.execute(<span class="keyword">new</span> TransactionCallback&lt;Object&gt;)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function">Object <span class="title">doInTransaction</span><span class="params">(TransactionStatus status)</span></span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        userMapper.insertSelective(user);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        <span class="comment">//å¼‚å¸¸ï¼Œè®¾ç½®ä¸ºå›æ»š</span></span><br><span class="line">        status.setRollbackOnly();</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰<font style="color:red;font-weight:bolder;">å¼‚å¸¸</font>ï¼Œè°ƒç”¨<font style="color:red;font-weight:bolder;">status.setRollbackOnly()</font>ï¼Œ<font style="color:red;font-weight:bolder;">å›æ»šäº‹åŠ¡</font>ï¼›<br>å¦åˆ™<font style="color:red;font-weight:bolder;">æ­£å¸¸</font>ï¼Œæ‰§è¡Œ<font style="color:red;font-weight:bolder;">doInTransaction()</font>æ–¹æ³•ï¼Œæ­£å¸¸<font style="color:red;font-weight:bolder;">æäº¤äº‹åŠ¡</font>ã€‚  </p><p>å¦‚æœ<font style="color:red;font-weight:bolder;">äº‹åŠ¡æ§åˆ¶çš„æ–¹æ³•ä¸éœ€è¦è¿”å›å€¼</font>ï¼š<br>å°±å¯ä»¥ä½¿ç”¨<font style="color:red;font-weight:bolder;">TransactionCallbackWithoutResult(TransactionCallbackæ¥å£çš„æŠ½è±¡å®ç°ç±»)</font><br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹:  </p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">  <span class="comment">//Springç¼–ç¨‹å¼äº‹åŠ¡ï¼Œå›è°ƒæœºåˆ¶</span></span><br><span class="line">  transactionTemplate.execute(<span class="keyword">new</span> TransactionCallbackWithoutResult()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">doInTransactionWithoutResult</span><span class="params">(TransactionStatus status)</span></span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        userMapper.insertSelective(user);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        <span class="comment">//å¼‚å¸¸ï¼Œè®¾ç½®ä¸ºå›æ»š</span></span><br><span class="line">        status.setRollbackOnly();</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font style="color:red;font-weight:bolder;">å£°æ˜å¼</font> äº‹åŠ¡ï¼š<br>åº•å±‚æ˜¯å»ºç«‹åœ¨<font style="color:red;font-weight:bolder;">SpringAOPçš„åŸºç¡€</font>ä¸Šï¼›<br>åœ¨æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªï¼›<br>å¹¶åœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹æ‰§è¡Œå‰åˆ›å»ºæ–°äº‹ç‰©æˆ–åŠ å…¥ä¸€ä¸ªå·²å­˜åœ¨äº‹åŠ¡ï¼›<br>æœ€ååœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæ¯•åæ ¹æ®æƒ…å†µè¿›è¡Œæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ï¼›  </p><p><font style="color:red;font-weight:bolder;">å£°æ˜å¼</font> äº‹åŠ¡çš„ä¼˜ç‚¹:<br>ä¸éœ€è¦ç¼–ç¨‹ï¼Œ<font style="color:red;font-weight:bolder;">å‡å°‘äº†ä»£ç çš„è€¦åˆ</font> ï¼Œ<br>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¹¶åœ¨ç›®æ ‡æ–¹æ³•ä¸Šæ·»åŠ  <font style="color:red;font-weight:bolder;">@Transactional æ³¨è§£</font>æ¥å®ç°ï¼›</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Transactional</span><br><span class="line"><span class="built_in">public</span> <span class="type">void</span> save()&#123;</span><br><span class="line">  <span class="keyword">User</span> <span class="keyword">user</span>=<span class="built_in">new</span> <span class="keyword">User</span>("laowang");</span><br><span class="line">  userMapper.insertSelective(<span class="keyword">user</span>);</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">    throw <span class="built_in">new</span> RuntimeException("å¼‚å¸¸");</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ›å‡ºå¼‚å¸¸ï¼Œäº‹åŠ¡å›è‡ªåŠ¨å›æ»šï¼›<br>å¦‚æœæ–¹æ³•æ­£å¸¸æ‰§è¡Œï¼Œåˆ™ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ã€‚</p><ol start="13"><li><strong>Springä¸­çš„AOPçš„åº•å±‚å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Spring AOP</font>çš„åº•å±‚å®ç°åŸç†å°±æ˜¯ <font style="color:red;font-weight:bolder;">åŠ¨æ€ä»£ç†</font>ã€‚</p><p><font style="color:red;font-weight:bolder;">Spring AOPçš„åŠ¨æ€ä»£ç†æœ‰ä¸¤ç§å®ç°æ–¹å¼</font>ï¼š<br>å¯¹äº<font style="color:red;font-weight:bolder;">æ¥å£</font>ä½¿ç”¨çš„æ˜¯<font style="color:red;font-weight:bolder;">JDKè‡ªå¸¦çš„åŠ¨æ€ä»£ç†</font>æ¥å®ç°çš„ï¼›<br>è€Œå¯¹æ¯”<font style="color:red;font-weight:bolder;">éæ¥å£</font>ä½¿ç”¨çš„æ˜¯<font style="color:red;font-weight:bolder;">CGLIBæ¥å®ç°</font>çš„ï¼›</p><ol start="14"><li><strong>Springå£°æ˜å¼äº‹åŠ¡æ— æ•ˆå¯èƒ½çš„åŸå› æœ‰å“ªäº›?</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springå£°æ˜å¼äº‹åŠ¡æ— æ•ˆå¯èƒ½çš„åŸå› </font>å¦‚ä¸‹ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">MySQLä½¿ç”¨çš„æ˜¯MyISAMå­˜å‚¨å¼•æ“</font>ï¼Œè€Œ<font style="color:red;font-weight:bolder;">MyISAMæ˜¯ä¸æ”¯æŒäº‹åŠ¡</font>çš„ï¼›</li><li><font style="color:red;font-weight:bolder;">@Transactionalä½¿ç”¨åœ¨épublicæ–¹æ³•ä¸Š</font>ï¼Œ<font style="color:red;font-weight:bolder;">@Transactionalæ³¨è§£åªèƒ½æ”¯æŒpublicçº§åˆ«</font>ï¼Œå…¶ä»–ç±»å‹å£°æ˜çš„äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼›</li><li><font style="color:red;font-weight:bolder;">@Transactional åœ¨åŒä¸€ä¸ªç±»ä¸­æ— äº‹åŠ¡æ–¹æ³• A() å†…éƒ¨è°ƒç”¨ æœ‰äº‹åŠ¡æ–¹æ³•B()ï¼Œé‚£ä¹ˆæ­¤æ—¶B() äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</font>ã€‚</li></ul><ol start="15"><li><strong>Springä¸­çš„Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springä¸­çš„Beané»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼</font>;<br>Springæ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹Beanè¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†;<br>å› æ­¤<font style="color:red;font-weight:bolder;">é»˜è®¤çš„æƒ…å†µBeanå¹¶éæ˜¯å®‰å…¨</font>çš„;<br>æœ€ç®€å•ä¿è¯Beanå®‰å…¨çš„ä¸¾æªå°±æ˜¯<font style="color:red;font-weight:bolder;">è®¾ç½®Beançš„ä½œç”¨åŸŸä¸ºPrototypeï¼ˆåŸå‹ï¼‰æ¨¡å¼</font>ï¼Œè¿™æ ·æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ–°å»ºä¸€ä¸ªBeanã€‚</p><ol start="16"><li><strong>è¯´ä¸€ä¸‹Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springä¸­Beançš„ç”Ÿå‘½å‘¨æœŸ</font>å¦‚ä¸‹ï¼š</p><p>1ï¼‰<font style="color:red;font-weight:bolder;">å®ä¾‹åŒ–Bean</font>ï¼š<br>å¯¹äºBeanFactoryå®¹å™¨ï¼Œå½“å®¢æˆ·æƒ³å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„Beanæ—¶ï¼Œæˆ–åˆå§‹åŒ–Beançš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œ<br>å®¹å™¨å°±ä¼šè°ƒç”¨createBeanè¿›è¡Œå®ä¾‹åŒ–ã€‚<br>å¯¹äºApplicationContextå®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å–BeanDefinitionå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„Beanã€‚</p><p>2ï¼‰<font style="color:red;font-weight:bolder;">è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰</font>ï¼š<br>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨BeanWrapperå¯¹è±¡ä¸­ï¼Œç´§æ¥ç€Springæ ¹æ®BeanDefinitionä¸­çš„ä¿¡æ¯ä»¥åŠé€šè¿‡BeanWrapperæä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ï¼›</p><p>3ï¼‰<font style="color:red;font-weight:bolder;">å¤„ç†Awareæ¥å£</font>ï¼š<br>Springä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†  xxxAware æ¥å£ï¼Œå¹¶å°†ç›¸å…³ xxxAwareå®ä¾‹æ³¨å…¥ç»™Beanï¼›</p><p>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanNameAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanNameï¼ˆString BeanIdï¼‰æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯Springé…ç½®æ–‡ä»¶ä¸­Beançš„idå€¼ï¼›</p><p>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†BeanFactoryAwareæ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„setBeanFactoryï¼ˆï¼‰æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯Springå·¥å‚è‡ªèº«ï¼›</p><p>å¦‚æœè¿™ä¸ªBeanå·²ç»å®ç°äº†ApplicationContextAwareæ¥å£ï¼Œä¼šè°ƒç”¨setApplicationContextï¼ˆApplicationContextï¼‰æ–¹æ³•ï¼Œä¼ å…¥Springä¸Šä¸‹æ–‡ï¼›</p><p>4ï¼‰<font style="color:red;font-weight:bolder;">BeanPostProcessor</font>ï¼šå¦‚æœæƒ³å¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®©Beanå®ç°BeanPostProcessoræ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨ postProcessBeforeInitialization(Object objï¼ŒString s)æ–¹æ³•ï¼›</p><p>5ï¼‰<font style="color:red;font-weight:bolder;">InitialiingBeanä¸init-method</font>ï¼šå¦‚æœBeanåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†init-methodå±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„åˆå§‹åŒ–æ–¹æ³•ï¼›</p><p>6ï¼‰å¦‚æœè¿™ä¸ªBeanå®ç°äº†BeanPostProcessoræ¥å£ï¼Œå°†ä¼šè°ƒç”¨ postProcessAfterInitializationï¼ˆObject objï¼ŒString sï¼‰æ–¹æ³•ï¼›ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Beanåˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œå› è€Œå¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–è€…ç¼“å­˜æŠ€æœ¯ï¼›</p><p>ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBean å°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªBeanäº†ã€‚</p><p>7ï¼‰<font style="color:red;font-weight:bolder;">DisposableBean</font>ï¼šå½“Beanä¸å†éœ€è¦æ—¶ï¼Œä¼šç»è¿‡æ¸…ç†é˜¶æ®µï¼›å¦‚æœBeanå®ç°äº†DisposableBeanè¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„ destroy()æ–¹æ³•ï¼›</p><p>8ï¼‰<font style="color:red;font-weight:bolder;">destroy-mothod</font>ï¼šæœ€åï¼Œå¦‚æœè¿™ä¸ªBeançš„Springé…ç½®ä¸­é…ç½®äº†destroy-methodå±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„é”€æ¯æ–¹æ³•ã€‚</p><ol start="17"><li><strong>Spring æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Spring ä¼˜ç‚¹</font>å¦‚ä¸‹ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">å¼€æº</font>ã€<font style="color:red;font-weight:bolder;">å…è´¹</font>çš„çƒ­é—¨æ¡†æ¶ï¼Œ<font style="color:red;font-weight:bolder;">ç¨³å®šæ€§é«˜</font>ã€<font style="color:red;font-weight:bolder;">è§£å†³é—®é¢˜æˆæœ¬ä½</font>ï¼›</li><li><font style="color:red;font-weight:bolder;">æ–¹ä¾¿é›†æˆ</font>å„ç§ä¼˜ç§€çš„æ¡†æ¶ï¼›</li><li><font style="color:red;font-weight:bolder;">é™ä½äº†ä»£ç è€¦åˆæ€§</font>ï¼šé€šè¿‡Springæä¾›çš„<font style="color:red;font-weight:bolder;">IOC(Inversion of Control)</font>å®¹å™¨ï¼Œå¯ä»¥å°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº¤ç”±Springè¿›è¡Œæ§åˆ¶ï¼Œé¿å…ç¡¬ç¼–ç æ‰€é€ æˆçš„è¿‡æ¸¡ç¨‹åºè€¦åˆï¼›</li><li><font style="color:red;font-weight:bolder;">æ–¹ä¾¿ç¨‹åºæµ‹è¯•</font>ï¼šåœ¨Springé‡Œï¼Œæµ‹è¯•å˜å¾—éå¸¸ç®€å•ï¼›ä¾‹å¦‚ï¼šSpringå¯¹Junitçš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åºï¼›</li><li><font style="color:red;font-weight:bolder;">é™ä½Java EE API çš„ä½¿ç”¨éš¾åº¦</font>ï¼šSpringå¯¹å¾ˆå¤šéš¾ç”¨çš„Java EE APIï¼ˆå¦‚JDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰æä¾›äº†ä¸€å±‚å°è£…ï¼Œé€šè¿‡Springçš„ç®€æ˜“å°è£…ï¼Œè®©è¿™äº›Java EE APIçš„ä½¿ç”¨éš¾åº¦å¤§ä¸ºé™ä½ï¼›</li></ul><ol start="18"><li><strong>Springå’ŒStrutsçš„åŒºåˆ«ï¼Ÿ</strong></li></ol><p>ç­”ï¼š <font style="color:red;font-weight:bolder;">Springå’ŒStrutsçš„åŒºåˆ«</font>å¦‚ä¸‹ï¼š</p><p><font style="color:red;font-weight:bolder;">Spring ç‰¹æ€§</font>å¦‚ä¸‹ï¼š</p><ul><li>å…·å¤‡<font style="color:red;font-weight:bolder;">IOC(Inversion of Control)/DI(Dependency Injection)ã€AOP(Aspect oriented Programming)</font>ç­‰é€šç”¨èƒ½åŠ›ï¼Œæé«˜ç ”å‘æ•ˆç‡</li><li>é™¤äº†æ”¯æŒWebå±‚å»ºè®¾ä»¥å¤–ï¼Œè¿˜æä¾›äº†äº†J2EEæ•´ä½“æœåŠ¡</li><li>æ–¹ä¾¿ä¸å…¶ä»–ä¸åŒæŠ€æœ¯ç»“åˆä½¿ç”¨ï¼Œå¦‚Hibernateã€Mybatisç­‰</li><li><font style="color:red;font-weight:bolder;">Springæ‹¦æˆªæœºåˆ¶æ˜¯æ–¹æ³•çº§åˆ«</font></li></ul><p><font style="color:red;font-weight:bolder;">Strutsç‰¹æ€§</font>å¦‚ä¸‹ï¼š</p><ul><li>æ˜¯ä¸€ä¸ªåŸºäºMVCæ¨¡å¼çš„ä¸€ä¸ªWebå±‚çš„å¤„ç†</li><li><font style="color:red;font-weight:bolder;">Strutsæ‹¦æˆªæœºåˆ¶æ˜¯ç±»çº§åˆ«</font></li></ul><ol start="19"><li><strong>Springã€SpringBootã€SpringCloudçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li></ol><p>ç­”ï¼š <font style="color:red;font-weight:bolder;">Springã€SpringBootã€SpringCloudçš„åŒºåˆ«</font>å¦‚ä¸‹ï¼š</p><ul><li><font style="color:red;font-weight:bolder;">Spring Framework</font> ç®€ç§° Springï¼Œæ˜¯æ•´ä¸ªSpringç”Ÿæ€çš„åŸºç¡€ï¼›</li><li><font style="color:red;font-weight:bolder;">Spring Boot</font>æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘æ¡†æ¶ï¼›<br>è®©å¼€å‘è€…å¯ä»¥è¿…é€Ÿæ­å»ºä¸€å¥—åŸºäºSpringçš„åº”ç”¨ç¨‹åºï¼›<br>å¹¶ä¸”å°†<font style="color:red;font-weight:bolder;">å¸¸ç”¨çš„Springæ¨¡å—ä»¥åŠç¬¬ä¸‰æ–¹æ¨¡å—</font>ï¼Œå¦‚Mybatisã€Hibernateç­‰éƒ½åšäº†å¾ˆå¥½çš„<font style="color:red;font-weight:bolder;">é›†æˆ</font>ï¼Œåªéœ€è¦ç®€å•çš„é…ç½®å³å¯ä½¿ç”¨ï¼›<br><font style="color:red;font-weight:bolder;">ä¸éœ€è¦ä»»ä½•çš„XMLé…ç½®æ–‡ä»¶</font>ï¼ŒçœŸæ­£åšåˆ°äº†<font style="color:red;font-weight:bolder;">å¼€ç®±å³ç”¨</font>ï¼›<br>åŒæ—¶<font style="color:red;font-weight:bolder;">é»˜è®¤æ”¯æŒJSONæ ¼å¼çš„æ•°æ®</font>ï¼›<br>ä½¿ç”¨Spring Bootè¿›è¡Œ<font style="color:red;font-weight:bolder;">å‰åç«¯åˆ†ç¦»å¼€å‘</font>ä¹Ÿéå¸¸<font style="color:red;font-weight:bolder;">ä¾¿æ·</font>ã€‚</li><li><font style="color:red;font-weight:bolder;">Spring Cloud</font>æ˜¯ä¸€å¥—æ•´åˆäº†<font style="color:red;font-weight:bolder;">åˆ†å¸ƒå¼åº”ç”¨</font> å¸¸ç”¨æ¨¡å—çš„æ¡†æ¶ï¼›<br>ä½¿å¾—å¼€å‘è€…å¯ä»¥å¿«é€Ÿå®ç°<font style="color:red;font-weight:bolder;">å¾®æœåŠ¡åº”ç”¨</font>ã€‚<br>ä½œä¸ºç›®å‰éå¸¸çƒ­é—¨çš„æŠ€æœ¯ï¼Œæœ‰å…³å¾®æœåŠ¡çš„è¯é¢˜æ€»æ˜¯åœ¨å„ç§åœºæ™¯ä¸‹è¢«å¤§å®¶è®¨è®ºï¼›<br>ä¼ä¸šçš„æ‹›è˜ä¿¡æ¯ä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šçš„å‡ºç°å¯¹äºå¾®æœåŠ¡æ¶æ„èƒ½åŠ›çš„è¦æ±‚ã€‚</li></ul><ol start="20"><li><strong>Springä¸­éƒ½æ˜¯ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</strong></li></ol><p>ç­”ï¼š <font style="color:red;font-weight:bolder;">Springä¸­ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼</font>å¦‚ä¸‹ï¼š</p><ul><li><strong>å·¥å‚æ¨¡å¼</strong>ï¼š é€šè¿‡BeanFactoryã€ApplicationContext æ¥åˆ›å»ºbean éƒ½æ˜¯å±äºå·¥å‚æ¨¡å¼ï¼›</li><li><strong>å•ä¾‹ã€åŸå‹æ¨¡å¼</strong>ï¼š åˆ›å»ºbeanå¯¹è±¡ è®¾ç½®ä½œç”¨åŸŸæ—¶ï¼Œå°±å¯ä»¥å£°æ˜Singletonï¼ˆå•ä¾‹æ¨¡å¼ï¼‰ã€Prototypeï¼ˆåŸå‹æ¨¡å¼ï¼‰ï¼›</li><li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šSpringå¯ä»¥å®šä¹‰ä¸€ä¸‹ç›‘å¬ï¼Œå¦‚ApplicationListener å½“æŸä¸ªåŠ¨ä½œè§¦å‘æ—¶å°±ä¼šå‘å‡ºé€šçŸ¥ï¼›</li><li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šAOPæ‹¦æˆªå™¨çš„æ‰§è¡Œï¼›</li><li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šåœ¨åˆ›å»ºä»£ç†ç±»æ—¶ï¼Œå¦‚æœä»£ç†çš„æ¥å£ä½¿ç”¨çš„æ˜¯JDKè‡ªèº«çš„åŠ¨æ€ä»£ç†ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ¥å£ä½¿ç”¨çš„æ˜¯CGLIBå®ç°åŠ¨æ€ä»£ç†ï¼›</li></ul><ol start="22"><li><strong>Springäº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼Ÿ</strong></li></ol><p>ç­”ï¼š<font style="color:red;font-weight:bolder;">Springçš„äº‹åŠ¡éš”ç¦»çº§åˆ«åŒ…å«ä»¥ä¸‹äº”ç§</font>ï¼š</p><ul><li><strong>ISOLATION_DEFAULTï¼ˆisolation defaultï¼‰</strong>: ç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆå°±ç”¨ä»€ä¹ˆï¼›</li><li><strong>ISOLATION_READ_UNCOMMITTEDï¼ˆisolation read uncommittedï¼‰</strong>:<font style="color:red;font-weight:bolder;">æœªæäº¤è¯»</font>ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯ä»¥è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°å¹»è¯»ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ï¼›</li><li><strong>ISOLATION_READ_COMMITTEDï¼ˆisolation read committedï¼‰</strong>: <font style="color:red;font-weight:bolder;">æäº¤è¯»</font>ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆå¹»è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ï¼ŒSQL Serverçš„é»˜è®¤çº§åˆ«ï¼›</li><li><strong>ISOLATION_REPEATABLE_READ( isolation repeatable read)</strong>: <font style="color:red;font-weight:bolder;">å¯é‡å¤åº¦</font>ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQLçš„é»˜è®¤çº§åˆ«ï¼›</li><li><strong>ISOLATION_SERIALIZABLEï¼ˆisolation serializableï¼‰</strong>:<font style="color:red;font-weight:bolder;">åºåˆ—åŒ–</font>ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»ç•Œåˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li></ul><p>é»˜è®¤å€¼æ˜¯ <strong>ISOLATION_DEFAULT</strong> éµå¾ªæ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ï¼›</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬”è®°ï¼š&lt;a href=&quot;https://blog.csdn.net/huanglei305/article/details/101195116?utm_source=app&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="Spring" scheme="https://fengshana.github.io/tags/Spring/"/>
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>MicroservicesGuide-èµ°è¿‘å¾®æœåŠ¡</title>
    <link href="https://fengshana.github.io/2020/05/10/%E9%9D%A2%E8%AF%95/%E3%80%90MICROSERVICES%E3%80%91MicroservicesGuide-%E8%B5%B0%E8%BF%91%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    <id>https://fengshana.github.io/2020/05/10/%E9%9D%A2%E8%AF%95/%E3%80%90MICROSERVICES%E3%80%91MicroservicesGuide-%E8%B5%B0%E8%BF%91%E5%BE%AE%E6%9C%8D%E5%8A%A1/</id>
    <published>2020-05-10T09:54:45.023Z</published>
    <updated>2020-05-18T17:35:14.606Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>Nothing better than a buzy Saturday morning.</p></blockquote><p>ä¸ºä»€ä¹ˆæƒ³è¦ç¿»è¯‘è¿™ç¯‡åšå®¢å‘¢ï¼Œå› ä¸ºä¹Ÿæ˜¯çœ‹äº†bç«™ä¸Šçš„ä¸€ä¸ªå­¦ä¹ springbootçš„ä¸€ä¸ªè§†é¢‘ï¼Œè€Œä¸”æˆ‘ä»Šå¤©é¢è¯•çš„æ—¶å€™äººå®¶é—®äº†å¾®æœåŠ¡æ˜¯ä»€ä¹ˆï¼Œç„¶åç”±æ­¤å¯å¾—æˆ‘ä¸‡åˆ†åæ‚”æ²¡æœ‰å½“æ—¶é€šç¯‡ç¿»è¯‘è¿™ç¯‡åšå®¢ã€‚<br>å¥½äº†ç°åœ¨åæ‚”ä¹ŸæŒ½æ•‘ä¸äº†æˆ‘çš„æ„šä¸å¯åŠäº†ã€‚<br>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1Eg4y187XT" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Eg4y187XT</a><br>å°±æ˜¯è¿™ä¸ªè§†é¢‘å‘Šè¯‰äº†æˆ‘ï¼šæ¨èçœ‹å“¦~<br>ä¸ºäº†ä¸åæ‚”ï¼Œä»¥åæ¯ä»¶äº‹æƒ…ï¼Œèƒ½åšç¬”è®°å°±ä¸€å®šè¦å‹ç€è‡ªå·±åšï¼Œä¸ç„¶ä¼šåæ‚”çš„ï¼›  </p><h2 id="Microservices-Guide-å¾®æœåŠ¡æŒ‡å—ï¼ˆç¿»è¯‘ï¼‰"><a href="#Microservices-Guide-å¾®æœåŠ¡æŒ‡å—ï¼ˆç¿»è¯‘ï¼‰" class="headerlink" title="Microservices Guide å¾®æœåŠ¡æŒ‡å—ï¼ˆç¿»è¯‘ï¼‰"></a>Microservices Guide å¾®æœåŠ¡æŒ‡å—ï¼ˆç¿»è¯‘ï¼‰</h2><p>é“¾æ¥ï¼š<a href="https://www.martinfowler.com/microservices/" target="_blank" rel="noopener">https://www.martinfowler.com/microservices/</a>  </p><blockquote><p>A guide to material on martinfowler.com about microservices.<br><strong>Matin Fowler</strong><br>21 Aug 2019  </p></blockquote><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">martinfowler.comç½‘ç«™å…³äºå¾®æœåŠ¡çš„ä¸€ä¸ªææ–™æŒ‡å—</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">--------------------------------------------------------</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">æœ‰é“è¯å…¸ç¿»è¯‘ï¼š</span></span><br><span class="line"><span class="keyword">martinfowler.com </span>ä¸Šå…³äºå¾®æœåŠ¡çš„ææ–™æŒ‡å—ã€‚</span><br></pre></td></tr></table></figure><h3 id="Microservices-Guide"><a href="#Microservices-Guide" class="headerlink" title="Microservices Guide"></a>Microservices Guide</h3><h4 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>In short , the microservice architectural style is an approach to developing a single application as a <strong>suite of small services</strong> , each <strong>running in its own process</strong>  and communicating with lightweight mechanisms , often an HTTP resource API .<br>These services are <strong>built around business capabilities</strong> and <strong>independently deployable</strong> by fully automated deployment machinery .<br>There is a bare minimum of centralized management of these services , which may be written in different programming languages and use different data storage technologies .<br>â€“ <strong>James Lewis</strong> and <strong>Martin Fowler</strong>ï¼ˆ2014ï¼‰  </p></blockquote><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ç®€è€Œè¨€ä¹‹ï¼Œ</span><br><span class="line">å¾®æœåŠ¡æ¶æ„é£æ ¼ æ˜¯ä¸€ç§è¿‘ä¼¼äº å°†ä¸€ä¸ªå•ä½“åº”ç”¨ç¨‹åºä½œä¸ºä¸€ä¸ªå°å‹æœåŠ¡å¥—ä»¶æ¥è¿›è¡Œå¼€å‘çš„é£æ ¼ï¼Œ</span><br><span class="line">æ¯ä¸€ä¸ªå°å‹æœåŠ¡éƒ½è¿è¡Œåœ¨å®ƒè‡ªèº«çš„è¿›ç¨‹å½“ä¸­ï¼Œ</span><br><span class="line">å¹¶ä¸”é€šè¿‡è½»é‡çº§æœºåˆ¶è¿›è¡Œç›¸äº’é—´çš„äº¤æµï¼Œ</span><br><span class="line">é€šå¸¸æ˜¯ä»¥ä¸€ç§è¶…æ–‡æœ¬ä¼ è¾“åè®®èµ„æºåº”ç”¨ç¼–ç¨‹æ¥å£çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚</span><br><span class="line">è¿™äº›æœåŠ¡éƒ½æ˜¯å›´ç»•ä¸šåŠ¡é€»è¾‘æ¥è¿›è¡Œæ„å»ºçš„å¹¶ä¸”é€šè¿‡å…¨è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥è¿›è¡Œç‹¬ç«‹éƒ¨ç½²ã€‚</span><br><span class="line">æœ€ä½é™åº¦çš„é›†ä¸­å¼ç®¡ç†ç€è¿™äº›æœåŠ¡ï¼ˆè¿™äº›æœåŠ¡çš„é›†ä¸­ç®¡ç†éå¸¸å°‘ï¼‰ï¼Œ</span><br><span class="line">é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ</span><br><span class="line">æˆ–è®¸å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¨‹åºè¯­è¨€è¿›è¡Œç¼–å†™ä»¥åŠä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ã€‚</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------</span><br><span class="line"></span><br><span class="line">æœ‰é“è¯å…¸ç¿»è¯‘ï¼š</span><br><span class="line"></span><br><span class="line">ç®€è€Œè¨€ä¹‹ï¼Œ</span><br><span class="line">å¾®æœåŠ¡ä½“ç³»ç»“æ„é£æ ¼æ˜¯ä¸€ç§å°†å•ä¸ªåº”ç”¨ç¨‹åºä½œä¸ºä¸€ç»„å°æœåŠ¡è¿›è¡Œå¼€å‘çš„æ–¹æ³•ï¼Œ</span><br><span class="line">æ¯ä¸ªå°æœåŠ¡éƒ½åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œå¹¶ä¸è½»é‡çº§æœºåˆ¶<span class="params">(é€šå¸¸æ˜¯HTTPèµ„æºAPI)</span>è¿›è¡Œé€šä¿¡ã€‚</span><br><span class="line">è¿™äº›æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡åŠŸèƒ½æ„å»ºçš„ï¼Œ</span><br><span class="line">å¹¶ä¸”å¯ä»¥é€šè¿‡å®Œå…¨è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æœºåˆ¶ç‹¬ç«‹éƒ¨ç½²ã€‚</span><br><span class="line">è¿™äº›æœåŠ¡çš„é›†ä¸­ç®¡ç†éå¸¸å°‘ï¼Œ</span><br><span class="line">å®ƒä»¬å¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œ</span><br><span class="line">å¹¶ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ã€‚</span><br><span class="line">â€”â€”è©¹å§†æ–¯Â·åˆ˜æ˜“æ–¯å’Œé©¬ä¸Â·ç¦å‹’<span class="params">(<span class="number">2014</span>)</span></span><br></pre></td></tr></table></figure><h3 id="Introduce-Martin-Fowler"><a href="#Introduce-Martin-Fowler" class="headerlink" title="Introduce - Martin Fowler"></a>Introduce - Martin Fowler</h3><p>äº†è§£å¾®æœåŠ¡ä¹‹å‰é¦–å…ˆæ¥çœ‹çœ‹<strong>Martin Fowler</strong>è€çˆ·å­çš„è‡ªæˆ‘ä»‹ç»ï¼›<br>Fowleråˆšè¢«æˆ‘æ‰“æˆäº†Flowerï¼›  </p><p>ç®€ä»‹é“¾æ¥ï¼š<a href="https://www.martinfowler.com" target="_blank" rel="noopener">https://www.martinfowler.com</a>  </p><h4 id="Contents-1"><a href="#Contents-1" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>Software development is a young profession , and we are still learning the techniques and building the tools to do it effectively .<br>Iâ€™ve been involved in this activity for over three decades and in the last two Iâ€™ve been writing on this website about patterns and practives that make it easier to build userful software .<br>The site began as a place to put my own writing , but I also use it to publish articles by my colleagues .  </p></blockquote><blockquote><p>In 2000 , I joined ThoughtWorkds , where my role is to learn about the techniques that weâ€™ve learned to deliver software for our clients , and pass these techniques on to the wider software industry .<br>As this site has developed into a respected platform on software development , Iâ€™ve edited and published articles by me colleagues , both ThoughtWorkers and others , to help useful writing reach a wider audience .  </p></blockquote><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">è½¯ä»¶å‘å±•æ˜¯ä¸€ä¸ªå¹´è½»çš„ä¸“ä¸šæŠ€æœ¯ï¼Œ</span><br><span class="line">å¹¶ä¸”æˆ‘ä»¬æ˜¯ä»ç„¶åœ¨å­¦ä¹ è¿™é—¨æŠ€æœ¯ å’Œ æ„å»ºä¸€äº›å·¥å…·å»æœ‰æ•ˆçš„å®Œæˆå®ƒã€‚</span><br><span class="line">æˆ‘å·²ç»å‚ä¸åˆ°è¿™ä¸€é¡¹æ´»åŠ¨ï¼ˆå·¥ä½œï¼‰å½“ä¸­å·²ç»è¶…è¿‡ä¸‰åå¹´äº†ï¼Œ</span><br><span class="line">å¹¶ä¸”åœ¨æœ€è¿‘ä¸¤å¹´å†…ï¼Œ</span><br><span class="line">æˆ‘åœ¨è¿™ä¸ªç½‘ç«™ç«™ç‚¹ä¸Šå·²ç»ç¼–å†™äº†å…³äºå¦‚ä½•æ›´å®¹æ˜“çš„å»æ„å»ºæœ‰ç”¨çš„è½¯ä»¶çš„ä¸€äº›æ€æƒ³æ¨¡å¼ä»¥åŠç»ƒä¹ æ–¹æ³•ï¼›</span><br><span class="line">è¿™ä¸ªç«™ç‚¹å¼€å§‹æ—¶ä½œä¸ºæ¥å­˜æ”¾æˆ‘è‡ªå·±çš„ä¸€ä¸ªå†™ä½œçš„ä¸€ä¸ªåœ°æ–¹ï¼Œ</span><br><span class="line">ä½†æ˜¯æˆ‘ä¹Ÿä½¿ç”¨è¿™ä¸ªåœ°æ–¹æ¥è¿›è¡Œå‘å¸ƒä¸€äº›é€šè¿‡æˆ‘åŒäº‹ä»¬å†™çš„æ–‡ç« ï¼›</span><br><span class="line"></span><br><span class="line">åœ¨<span class="number">2000</span>å¹´ï¼Œæˆ‘åŠ å…¥åˆ°äº†ThoughtWorksï¼Œ</span><br><span class="line">åœ¨è¿™ä¸ªåœ°æ–¹æˆ‘æ‰®æ¼”çš„è§’è‰²æ˜¯å»å­¦ä¹ è¿™ä¸€é¡¹æŠ€æœ¯ï¼Œ</span><br><span class="line">æˆ‘ä»¬å·²ç»å­¦ä¹ åˆ°å»ä¸ºæˆ‘ä»¬çš„å®¢æˆ·å®ç°è½¯ä»¶ï¼Œ</span><br><span class="line">ä»¥åŠé€šè¿‡è¿™äº›æŠ€æœ¯åœ¨æ›´å¹¿é˜”çš„è½¯ä»¶äº§ä¸šå½“ä¸­ï¼›</span><br><span class="line">è¿™ä¸ªç«™ç‚¹å·²ç»é€æ¸å‘å±•æˆä¸ºä¸€ä¸ªå—äººå°Šæ•¬çš„å¹³å°åœ¨è½¯ä»¶å‘å±•å²å½“ä¸­ï¼Œ</span><br><span class="line">æˆ‘å·²ç»å†™äº†å¾ˆå¤šä»¥åŠå‘å¸ƒäº†å¾ˆå¤šæˆ‘åŒäº‹å†™çš„æ–‡ç« ï¼ŒåŒæ—¶è¿˜æœ‰ThoughtWorkersçš„å‘˜å·¥ä»¥åŠå…¶ä»–äººï¼›</span><br><span class="line">æ¥å¸®åŠ©æœ‰ç”¨çš„å†™ä½œï¼Œå³é€æ¸æˆä¸ºä¸€ä¸ªæœ‰æ·±åº¦çš„å—ä¼—ï¼›</span><br><span class="line"></span><br><span class="line">------------------------------------------------</span><br><span class="line"></span><br><span class="line">æœ‰é“è¯å…¸ç¿»è¯‘ï¼š</span><br><span class="line">è½¯ä»¶å¼€å‘æ˜¯ä¸€ä¸ªå¹´è½»çš„èŒä¸šï¼Œ</span><br><span class="line">æˆ‘ä»¬ä»ç„¶åœ¨å­¦ä¹ æŠ€æœ¯å’Œæ„å»ºå·¥å…·æ¥æœ‰æ•ˆåœ°å®Œæˆå®ƒã€‚</span><br><span class="line">æˆ‘å·²ç»å‚ä¸è¿™é¡¹æ´»åŠ¨è¶…è¿‡<span class="number">30</span>å¹´äº†ï¼Œ</span><br><span class="line">åœ¨è¿‡å»çš„ä¸¤å¹´ä¸­ï¼Œ</span><br><span class="line">æˆ‘ä¸€ç›´åœ¨è¿™ä¸ªç½‘ç«™ä¸Šæ’°å†™å…³äºä½¿æ„å»ºæœ‰ç”¨è½¯ä»¶å˜å¾—æ›´å®¹æ˜“çš„æ¨¡å¼å’Œå®è·µçš„æ–‡ç« ã€‚</span><br><span class="line">è¿™ä¸ªç½‘ç«™ä¸€å¼€å§‹æ˜¯ä¸€ä¸ªæ”¾ç½®æˆ‘è‡ªå·±çš„æ–‡ç« çš„åœ°æ–¹ï¼Œ</span><br><span class="line">ä½†æˆ‘ä¹Ÿç”¨å®ƒæ¥å‘è¡¨æˆ‘åŒäº‹çš„æ–‡ç« ã€‚</span><br><span class="line"><span class="number">2000</span>å¹´ï¼Œæˆ‘åŠ å…¥äº†ThoughtWorksï¼Œ</span><br><span class="line">åœ¨è¿™é‡Œï¼Œæˆ‘çš„èŒè´£æ˜¯å­¦ä¹ æˆ‘ä»¬ä¸ºå®¢æˆ·äº¤ä»˜è½¯ä»¶çš„æŠ€æœ¯ï¼Œ</span><br><span class="line">å¹¶å°†è¿™äº›æŠ€æœ¯ä¼ é€’ç»™æ›´å¹¿æ³›çš„è½¯ä»¶è¡Œä¸šã€‚</span><br><span class="line">éšç€è¿™ä¸ªç½‘ç«™å‘å±•æˆä¸ºä¸€ä¸ªå—äººå°Šæ•¬çš„è½¯ä»¶å¼€å‘å¹³å°ï¼Œ</span><br><span class="line">æˆ‘å·²ç»ç¼–è¾‘å¹¶å‘è¡¨äº†æˆ‘çš„åŒäº‹ä»¬çš„æ–‡ç« ï¼Œ</span><br><span class="line">åŒ…æ‹¬ThoughtWorkerså’Œå…¶ä»–äººï¼Œ</span><br><span class="line">ä»¥å¸®åŠ©æ›´å¹¿æ³›çš„è¯»è€…é˜…è¯»æœ‰ç”¨çš„æ–‡ç« ã€‚</span><br></pre></td></tr></table></figure><h3 id="A-website-on-building-software-effectively"><a href="#A-website-on-building-software-effectively" class="headerlink" title="A website on building software effectively"></a>A website on building software effectively</h3><p>A website on building software effectively</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¸€ä¸ªç½‘ç«™ä¸Šæœ‰æ•ˆåœ°æ„å»ºè½¯ä»¶</span><br><span class="line"></span><br><span class="line"><span class="comment">-------------------------</span></span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªæœ‰æ•ˆå¼€å‘è½¯ä»¶çš„ç½‘ç«™</span><br></pre></td></tr></table></figure><h4 id="Contents-2"><a href="#Contents-2" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>If thereâ€™s a theme that runs through my work and writing on this site , itâ€™s the interplay between the shift towards agile thinking and the technical patterns and practices that make agile software development practical .<br>While specifics of technology change rapidly in our profession , fundamental practices and patterns are more stable .<br>So writing about these allows me to have articles on this site that are several years old but still as relevant as when they were written .  </p></blockquote><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœ è¿™æ˜¯ä¸€ä¸ªä¸»é¢˜ï¼ˆå®šè¯­ï¼šè´¯ç©¿ç€æˆ‘çš„å·¥ä½œç»å†ä»¥åŠåœ¨è¿™ä¸ªç«™ç‚¹ä¸Šçš„æ–‡å­—ï¼‰</span><br><span class="line">é‚£ä¹ˆåœ¨ è½¬å˜æˆæ•æ·å¼æ€ç»´ ä¸ æŠ€æœ¯çš„æ¨¡å¼å’Œä½¿å¾—æ•æ·å¼è½¯ä»¶å¼€å‘ å˜æˆäº‹å® è¿™ä¸¤è€…ä¹‹é—´å…¶å®æ˜¯ç›¸äº’å½±å“çš„ã€‚</span><br><span class="line">å½“ æŠ€æœ¯çš„ç‰¹æ€§ åœ¨æˆ‘ä»¬çš„èŒä¸šè¯¥è¡Œå½“ä¸­ å‘å±•æ”¹å˜ååˆ†è¿…é€Ÿ æ—¶ï¼Œ</span><br><span class="line">åŸºæœ¬çš„å®è·µç»ƒä¹  ä¸ æ¨¡å¼ å°±å˜å¾—éœ€è¦ååˆ†çš„ç‰¢å›ºã€‚</span><br><span class="line">æ‰€ä»¥ç¼–å†™è¿™äº›å…³äº å®¹è®¸æˆ‘åœ¨è¿™ä¸ªç«™ç‚¹ï¼ˆå®šè¯­ï¼šè™½ç„¶æ‰åªæœ‰å‡ å²å³è™½ç„¶æ‰å¼€å§‹å‡ å¹´ï¼Œä½†æ˜¯åªè¦å½“é‡åˆ°ä¸ä¹‹ç›¸å…³çš„ä»–ä»¬å°±éƒ½ä¼šè¢«ä¸€è‡´æŒç»­å†™å…¥è¿›æ¥ï¼‰ä¸Šæ‹¥æœ‰äº†çš„æ–‡ç« ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">---------------------------------------------</span></span><br><span class="line"></span><br><span class="line">æœ‰é“è¯å…¸ç¿»è¯‘ï¼š</span><br><span class="line">å¦‚æœè¯´æˆ‘åœ¨è¿™ä¸ªç«™ç‚¹ä¸Šçš„å·¥ä½œå’Œå†™ä½œä¸­è´¯ç©¿ç€ä¸€ä¸ªä¸»é¢˜ï¼Œé‚£å°±æ˜¯æ•æ·æ€ç»´çš„è½¬å˜ä¸ä½¿æ•æ·è½¯ä»¶å¼€å‘åˆ‡å®å¯è¡Œçš„æŠ€æœ¯æ¨¡å¼å’Œå®è·µä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚</span><br><span class="line">è™½ç„¶æŠ€æœ¯ç»†èŠ‚åœ¨æˆ‘ä»¬çš„èŒä¸šä¸­å˜åŒ–å¾ˆå¿«ï¼Œä½†åŸºæœ¬çš„å®è·µå’Œæ¨¡å¼æ›´åŠ ç¨³å®šã€‚</span><br><span class="line">æ‰€ä»¥å†™è¿™äº›ä¸œè¥¿è®©æˆ‘å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸Šå†™ä¸€äº›æ–‡ç« ï¼Œè¿™äº›æ–‡ç« å·²ç»æœ‰å¥½å‡ å¹´çš„å†å²äº†ï¼Œä½†æ˜¯ä»ç„¶å’Œå½“åˆå†™çš„æ—¶å€™ä¸€æ ·é‡è¦ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>As software becomes more critical to modern business , software needs be able to react quickly to changes ,  allowing new features to be be conceived , developed and put into production rapidly .<br>The techniques of <font style="color:red;font-weight:bolder">agile software development</font> began in the 1990s and became steadily more popular in the last decade .<br>The focus on a flexible approach to planning , which allows software products to change direction as the userâ€™s needs change and as product managers learn more about how to make their users effective .<br>While widely accepted now , agile approaches are not easy , requiring significant skills for a team , but more importantly a culture of open collaboration both within the team and with a teamâ€™s partners .  </p></blockquote><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">å½“è½¯ä»¶ä¸ºäº†ç°åœ¨çš„ä¸šåŠ¡é€»è¾‘å°±è¶Šéœ€è¦æ‰¹è¯„ï¼Œ</span><br><span class="line">è½¯ä»¶éœ€è¦èƒ½å¤Ÿå¿«é€Ÿåœ°å¯¹æ”¹å˜åšå‡ºååº”ï¼Œå…è®¸ä¸€äº›æ–°ç‰¹æ€§è¢«æ„æ€å®ç°ï¼Œå‘å±•ä»¥åŠè¿…é€Ÿåœ°è½å®æˆä¸ºä¸€ä¸ªäº§å“ã€‚</span><br><span class="line">æ•æ·å¼å¼€å‘è½¯ä»¶çš„è¿™é¡¹æŠ€æœ¯å¼€å§‹åœ¨<span class="number">1990</span>å¹´çš„æ—¶å€™ï¼Œç›´åˆ°åœ¨è¿‘åå¹´å†…å¼€å§‹ç¨³å®šåœ°å˜å¾—è¶Šå‘æµè¡Œèµ·æ¥äº†ã€‚</span><br><span class="line">é›†ä¸­äºåœ¨ä¸€ä¸ªçµæ´»æ€§ä¸Šï¼Œç±»ä¼¼äºè§„åˆ’é¢„æœŸä¸­ï¼Œå®ƒå…è®¸è½¯ä»¶äº§å“æ¥è¿›è¡Œå®šå‘çš„æ”¹å˜å½“å®¢æˆ·éœ€è¦è¿›è¡Œæ”¹å˜ä»¥åŠå½“äº§å“ç®¡ç†è€…å­¦åˆ°æ›´å¤šå…³äºå¦‚ä½•è®©ä»–ä»¬çš„å®¢æˆ·å˜å¾—å°è±¡æ·±åˆ»ã€‚</span><br><span class="line">å½“ç°åœ¨è¢«æ›´å¹¿æ³›çš„æ¥å—ï¼Œæ•æ·å¼çš„å¤„ç†æ˜¯å¹¶ä¸å®¹æ˜“çš„ï¼Œå®ƒè¦æ±‚é‡å¤§çš„çš„æŠ€èƒ½å¯¹äºä¸€ä¸ªå›¢é˜Ÿæ¥è¯´ï¼Œä½†æ˜¯æ›´é‡è¦çš„æ˜¯ä¸€ä¸ªå¼€æºåˆä½œçš„æ–‡åŒ–ï¼Œè¿™ä¸¤è€…éƒ½éœ€è¦å›¢é˜Ÿä»¥åŠå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„åä½œã€‚</span><br><span class="line"></span><br><span class="line">----------------------------------------------------</span><br><span class="line"></span><br><span class="line">æœ‰é“è¯å…¸ç¿»è¯‘ï¼š</span><br><span class="line">éšç€è½¯ä»¶åœ¨ç°ä»£å•†ä¸šä¸­å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œ</span><br><span class="line">è½¯ä»¶éœ€è¦èƒ½å¤Ÿå¯¹å˜åŒ–åšå‡ºå¿«é€Ÿååº”ï¼Œ</span><br><span class="line">å…è®¸å¿«é€Ÿæ„æ€ã€å¼€å‘æ–°ç‰¹æ€§å¹¶å°†å…¶æŠ•å…¥ç”Ÿäº§ã€‚</span><br><span class="line">æ•æ·è½¯ä»¶å¼€å‘æŠ€æœ¯å¼€å§‹äº<span class="number">20</span>ä¸–çºª<span class="number">90</span>å¹´ä»£ï¼Œå¹¶åœ¨è¿‡å»åå¹´ä¸­é€æ¸æµè¡Œèµ·æ¥ã€‚</span><br><span class="line">ä»–ä»¬ä¸“æ³¨äºä¸€ç§çµæ´»çš„è®¡åˆ’æ–¹æ³•ï¼Œ</span><br><span class="line">è¿™ç§æ–¹æ³•å…è®¸è½¯ä»¶äº§å“éšç€ç”¨æˆ·éœ€æ±‚çš„å˜åŒ–è€Œæ”¹å˜æ–¹å‘ï¼Œ</span><br><span class="line">å¹¶ä¸”éšç€äº§å“ç»ç†æ›´å¤šåœ°äº†è§£å¦‚ä½•è®©ä»–ä»¬çš„ç”¨æˆ·æ›´æœ‰æ•ˆã€‚</span><br><span class="line">è™½ç„¶æ•æ·æ–¹æ³•ç°åœ¨å·²è¢«å¹¿æ³›æ¥å—ï¼Œ</span><br><span class="line">ä½†å®ƒå¹¶ä¸ç®€å•ï¼Œ</span><br><span class="line">éœ€è¦å›¢é˜Ÿçš„é‡è¦æŠ€èƒ½ï¼Œ</span><br><span class="line">ä½†æ›´é‡è¦çš„æ˜¯å›¢é˜Ÿå†…éƒ¨å’Œå›¢é˜Ÿåˆä½œä¼™ä¼´ä¹‹é—´çš„å¼€æ”¾åä½œæ–‡åŒ–ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>This need to respond fluently to changes has an important impact upon the <font style="color:red;font-weight:bolder">architecture</font> of a software system.<br>The software needs to be built in such a way that it is able to adapt to unexpected changes in features .<br>One of the most important ways to do this is to write clear code , making it easy to understant what the program is supposed to do .<br>This code should be devided into modules which allow developers to understand only the parts of the system they need to make a change .<br>This production code should be supported with automated tests that can detect any errors made when making a change while providing examples of how internal structures are used .<br>Large and complex software efforts may find the <font style="color:red;font-weight:bolder">microservices</font> architectural style helps teams deploy software with less entangling dependencies .  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>Creating software that has a good architecture isnâ€™t something that can be done first time .<br>Like good prose , it needs regular revisions and programmers learn more about what the product needs to do and how best to design the product to achieve its goals .<br><font style="color:red;font-weight:bolder">Refactoring</font> is an essential technique to allow a program to be changed safety .<br>It consists of making small changes that donâ€™t alter the observable behavior of the software .<br>Bt combining lots of small changes , developers can revise the softwareâ€™s structure supporting significant modifications that werenâ€™t planned when the system was first conceived .  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>Software that runs only on a developerâ€™s machine isnâ€™t providing value to the customers of the software .<br>Traditionally releasing software has been a long and complicated process , one that hinders the need to evolve software quickly .<br><font style="color:red;font-weight:bolder">Continuous Delivery</font> uses automation and collaborative workflows to remove this bottleneck , allowing teams to release software as often as the customers demand .<br>For Continuous Delivery to be possible , we need to build in a solid foundation of <font style="color:red;font-weight:bolder">Testing</font> , with a range of automated tests that can give us confidence taht our changes havenâ€™t introduced any bugs .<br>This leads us to integrate testing into programming , which can act to improve our architectural .  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Photostream"><a href="#Photostream" class="headerlink" title="Photostream"></a>Photostream</h3><h3 id="Data-Management"><a href="#Data-Management" class="headerlink" title="Data Management"></a>Data Management</h3><h4 id="Contents-3"><a href="#Contents-3" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>There are many kinds of softeare out there , the kind Iâ€™m primarily engaged is Enterprise Applications .<br>One of the enduring problems we need to tackle in this world is <font style="color:red;font-weight:bolder">data management</font> .<br>The aspectes of data management Iâ€™ve focused on here are how to migrate data stores as their applications respond to changing needs , coping with different contexts across a large enterprice , the role of NoSQL databases , and the broader issues of coping with data that is both Big and Messy .  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Domain-Specific-Languages"><a href="#Domain-Specific-Languages" class="headerlink" title="Domain-Specific Languages"></a>Domain-Specific Languages</h3><h3 id="Contents-4"><a href="#Contents-4" class="headerlink" title="Contents"></a>Contents</h3><blockquote><p>A common problem in complex software systems is how to capture complicated domain logic in a way that programmers can both easily manipulate and also easily communicate to domain experts .<br><font style="color:red;font-weight:bolder">Domain-Specific Languages</font>(DSLs) create a custom language for a particular problem , either with custom parsers or by conventions within a host language .  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Books"><a href="#Books" class="headerlink" title="Books"></a>Books</h3><h4 id="Contents-5"><a href="#Contents-5" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>Iâ€™ve written seven books on software development , including Refactoring , Patterns of Enterprise Application Architectural , and UML Distilled .<br>Iâ€™m also the editor of a signature series for Addison-Wesley that includes five jolt award winners .<br><font style="color:red;font-weight:bolder">My Books Pageâ€¦</font>  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Conference-Talks"><a href="#Conference-Talks" class="headerlink" title="Conference Talks"></a>Conference Talks</h3><h4 id="Contents-6"><a href="#Contents-6" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>Iâ€™m often asked to give talks at conferences , from which Iâ€™ve inferred that Iâ€™m a pretty good speaker - which is ironic since I really hate giving talks .<br>You can form your own opinion of my talks by watching videos of some my conference talks .<br><font style="color:red;font-weight:bolder"> My Videos Pageâ€¦</font>  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Board-Games"><a href="#Board-Games" class="headerlink" title="Board Games"></a>Board Games</h3><h4 id="Contents-7"><a href="#Contents-7" class="headerlink" title="Contents"></a>Contents</h4><blockquote><p>Iâ€™ve long been a fan of board games , I enjoy a game that fully occupies my mind , clearing out all the serious thoughts for a bit , while enjoying the company of good friends .<br>Modern board games saw dramatic improvement in the 1990â€™s with the rise of Eurogames , and I expect many people would be surprised if they havenâ€™t tried any of this new generation .<br>I also appear regularly on <font style="color:red;font-weight:bolder">Heavy Cardboard</font> .<br><font style="color:red;font-weight:bolder">My Board Games pageâ€¦</font>  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Nothing better than a buzy Saturday morning.&lt;/p&gt;
&lt;/blockq
      
    
    </summary>
    
    
      <category term="MICROSERVICES" scheme="https://fengshana.github.io/categories/MICROSERVICES/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="MICROSERVICES" scheme="https://fengshana.github.io/tags/MICROSERVICES/"/>
    
  </entry>
  
  <entry>
    <title>å²ä¸Šæœ€å¥½~ç²¾é€šSpring Boot Cloud - åœ£æ€å›­</title>
    <link href="https://fengshana.github.io/2020/05/10/%E9%9D%A2%E8%AF%95/%E3%80%90SPRINTBOOT%E3%80%91SpringBoot/"/>
    <id>https://fengshana.github.io/2020/05/10/%E9%9D%A2%E8%AF%95/%E3%80%90SPRINTBOOT%E3%80%91SpringBoot/</id>
    <published>2020-05-10T03:36:35.908Z</published>
    <updated>2020-05-24T01:27:10.428Z</updated>
    
    <content type="html"><![CDATA[<p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1Eg4y187XT" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Eg4y187XT</a>  </p><h2 id="å­¦ä¹ æ–¹æ³•è°ˆå¿ƒ"><a href="#å­¦ä¹ æ–¹æ³•è°ˆå¿ƒ" class="headerlink" title="å­¦ä¹ æ–¹æ³•è°ˆå¿ƒ"></a>å­¦ä¹ æ–¹æ³•è°ˆå¿ƒ</h2><p>SpringBootä¸SpringCloudè¿™ä¸¤ä¸ªæ¡†æ¶ï¼Œè¯´æ¡†æ¶æœ‰ç‚¹å°ï¼Œç‰¹åˆ«æ˜¯SpringCloudæ•´ä¸ªçš„ä½“ç³»æ˜¯éå¸¸åºå¤§çš„ï¼›å¯ä»¥è®¤ä¸ºæ˜¯ä¸€æ•´å¥—æŠ€æœ¯æ ˆæˆ–è€…æ˜¯è¯´ç”Ÿæ€åœˆã€‚</p><p>æ–¹æ³•è®ºï¼›å®è§‚æ„ä¹‰ä¸Šå»äº†è§£ï¼›ä»é—®é¢˜çš„æœ¬æºæ¥è¿›è¡Œå‰–æï¼›æœ‰é—®é¢˜å°±å»æŸ¥å®˜æ–¹æ–‡æ¡£ï¼›ä½†æ˜¯å¯¹äºSpringCloudæ¥è¯´ï¼Œå®˜æ–¹æ–‡æ¡£å°±è¿‡äºåºæ‚äº†ï¼›æ•ˆæœå¹¶ä¸æ˜¯ç‰¹åˆ«çš„å¥½ã€‚<br>ä¸€ç§å¥½çš„å­¦ä¹ æ–¹å¼ï¼šé’ˆå¯¹æ€§çš„å»å­¦ä¹ ã€‚<br>åƒSpringCloudï¼Œæ¯æ¬¡å»å­¦ä¹ å…¶å½“ä¸­çš„ä¸€ä¸ªå­é¡¹ç›®çš„æ—¶å€™ï¼Œåˆ™éœ€è¦å¸¦ç€é—®é¢˜ï¼Œå¸¦ç€å¿ƒä¸­çš„ç–‘è™‘è¿™æ ·å­å»å­¦ä¹ ï¼Œå°±å±äºä¸€ç§æ¯”è¾ƒå¥½çš„ä¸€ç§å­¦ä¹ æ–¹å¼ã€‚  </p><p>åœ¨å­¦ä¹ æ¡†æ¶å¼ï¼Œå¦‚ä½•å¾ˆå¥½çš„åˆ‡å…¥è¿›å»ï¼ŒæŒ–æ˜å‡ºæ¥ï¼Œå½¢æˆè‡ªå·±çš„ä¸€æ•´å¥—æŠ€æœ¯ä½“ç³»ï¼šä»å®è§‚/æ–¹æ³•è®ºçš„å±‚é¢ä¸Šæ¥è®²ï¼š<br>å‰ç«¯æ¡†æ¶æ›´è¿­å¿«ã€‚<br>å¦‚ä½•ä¿æŒè‡ªå·±çš„ç«äº‰åŠ›ï¼ˆæŒç»­çš„ä¿æŒè‡ªå·±çš„ç«äº‰åŠ›ï¼‰è¿™æ˜¯æ¯ä¸€ä¸ªå¼€å‘äººå‘˜éƒ½éœ€è¦é¢ä¸´çš„é—®é¢˜ã€‚<br>èŒä¸šè¿½æ±‚å¥‹æ–—ç›®æ ‡ï¼›å¿ƒä¸­éœ€è¦æœ‰ä¸€ç§ç´§è¿«æ„Ÿï¼›å¯¹è‡ªå·±æ‰€ä»äº‹çš„æŠ€æœ¯é¢†åŸŸéœ€è¦æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æŠŠæ¡å’Œç†è§£ã€‚é‚£ä¹ˆè¿™ä¸ªå¾ˆå¥½çš„æŠŠæ¡å’Œç†è§£ä½“ç°åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ<br>é¦–å…ˆå¯¹äºä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€åº”å½“æ¯”è¾ƒç†Ÿç»ƒçš„ç¨‹åº¦ã€‚ç¬¬äºŒï¼Œå¯¹äºä½ æ‰€è§‰å¾—é‡è¦çš„æ¡†æ¶ï¼Œä¸€å®šè¦è¾¾åˆ°ä¸€ç§åŸç†çº§åˆ«çš„ç†è§£å’ŒæŠŠæ§ã€‚è¿™ä¸€ç‚¹ååˆ†é‡è¦ã€‚<br>å†™äº†å¾ˆå¤šä»£ç ï¼Œä¹Ÿåšäº†å¾ˆå¤šçš„é¡¹ç›®ï¼Œä½†æ˜¯å°±æ˜¯è§‰å¾—è‡ªå·±çš„æŠ€æœ¯æ²¡æœ‰èƒ½å¾—åˆ°æé«˜ï¼Œæ˜æ˜¾çš„é•¿è¿›ï¼Œå°±æ„Ÿè§‰è‡ªå·±åœ¨åŸåœ°è¸æ­¥æ—¥å¤ä¸€æ—¥å¹´å¤ä¸€å¹´çš„å·¥ä½œè€Œå·²ã€‚<br>åæ˜ å‡ºæ¥äº†ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å·¥ä½œå½“ä¸­ï¼Œå·¥ä½œæŠ€èƒ½å¯¹äºè‡ªå·±çš„æŠ€èƒ½è¦æ±‚å…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆé«˜ï¼›å¯¹äºä¸­å›½å¤§éƒ¨åˆ†å…¬å¸æ¥è¯´éƒ½ä¸æ˜¯çº¯æŠ€æœ¯å…¬å¸ï¼›<br>çº¯æŠ€æœ¯å…¬å¸æŒ‡çš„æ˜¯ï¼šå…¶æŠ€æœ¯å°±æ˜¯è‡ªå·±å…¬å¸çš„ä¸€ä¸ªæˆå“ï¼›æœ€å…¸å‹çš„ä¾‹å­ï¼Œæ¯”å¦‚è¯´TiDBitï¼ˆè¿™æ˜¯ä¸€ä¸ªæ–°å‹çš„å›½äº§æ•°æ®åº“ï¼‰ï¼Œç±»ä¼¼äºè¿™äº›å‚å•†å®ƒä»¬çš„æˆå“å…¶å®å°±æ˜¯æŠ€æœ¯ï¼Œå®ƒä»¬çš„æŠ€æœ¯å°±æ˜¯å®ƒä»¬çš„æˆå“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶æŠ€æœ¯å°±æ˜¯å…¶æ ¸å¿ƒç«äº‰åŠ›æ ¸å¿ƒç”Ÿäº§åŠ›ã€‚<br>ä½†æ˜¯å¯¹äºå…¶ä»–å¾ˆå¤šçš„äº’è”ç½‘å…¬å¸æ¥è¯´ï¼Œå´ä¸æ˜¯è¿™æ ·çš„æƒ…å†µï¼Œå› ä¸ºæœ‰å…¶æˆå“ï¼Œæœ‰å…¶è‡ªå·±çš„å•†ä¸šæ¨¡å¼ï¼Œè€ŒæŠ€æœ¯æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªæˆå“ï¼Œå®ç°è¿™ä¸ªå•†ä¸šæ¨¡å¼è€Œå¿…é¡»è¦æœ‰çš„ä¸€ç§æ‰‹æ®µï¼›æ¢å¥è¯æ¥è¯´ï¼Œåœ¨è¿™æ ·çš„äº’è”ç½‘å…¬å¸ä¸‹ï¼ŒæŠ€æœ¯å¹¶ä¸æ˜¯å…¶æœ€ä¸ºæ ¸å¿ƒæœ€ä¸ºé‡è¦çš„ä¸€ç§ç”Ÿäº§åŠ›ã€‚ä½†æ˜¯æŠ€æœ¯åˆä¸å¯æˆ–ç¼ºï¼Œè¿™æ˜¯ç»å¤§äº’è”ç½‘å…¬å¸æ‰€é¢ä¸´çš„ä¸€ä¸ªé—®é¢˜ã€‚<br>åœ¨å·¥ä½œå½“ä¸­ï¼Œä¸€æ–¹é¢å¾ˆå¥½çš„å®Œæˆå·¥ä½œï¼Œå¦ä¸€æ–¹é¢èƒ½åœ¨æ—¥å¤ä¸€æ—¥çš„å·¥ä½œå½“ä¸­æé«˜è‡ªå·±çš„æ°´å‡†ï¼Œä¸æ–­çš„æé«˜è‡ªå·±ï¼›å…¶å®è¿™æ˜¯æ‘†åœ¨æ¯ä¸€ä¸ªäººé¢å‰å¾ˆé‡è¦ä¸”ç¦»ä¸å¼€çš„è¯é¢˜ã€‚<br>åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä½œä¸ºä¸€åè½¯ä»¶ä»ä¸šè€…è¯¥å¦‚ä½•å»æå‡è‡ªå·±ï¼Ÿ<br>é¦–å…ˆï¼Œä¸€å®šè¦å…·å¤‡æœ‰çš„è®¤è¯†ï¼šåœ¨å·¥ä½œå½“ä¸­ç”¨æŠ€æœ¯å»å®Œæˆæ¯ä¸€å¤©è‡ªå·±å·¥ä½œå½“ä¸­çš„ä»»åŠ¡ï¼Œè¿™æ˜¯æœ¬èŒå·¥ä½œéœ€è¦è‡ªå·±å»å®Œæˆçš„ï¼›è¿™æ¯«æ— ç–‘é—®ï¼›å…¬å¸èµ‹äºˆè‡ªå·±è–ªæ°´ï¼Œè€Œè‡ªå·±ä¸ºäº†è¿™ä»½è–ªæ°´å»å®Œæˆè¿™äº›è‡ªå·±çš„æœ¬èŒå·¥ä½œï¼Œä»˜è¯¸è‡ªå·±çš„åŠ³åŠ¨åŠ›ï¼ŒæŠŠç›¸åº”çš„å·¥ä½œå»å®Œæˆï¼Œè¿™æ˜¯è‡ªå·±åº”è¯¥å»åšçš„äº‹æƒ…ã€‚<br>å…¬å¸ä»˜ç»™è‡ªå·±å·¥èµ„ï¼Œè€Œè‡ªå·±å¾ˆå¥½çš„å®Œæˆè¿™ä»½æœ¬èŒå·¥ä½œï¼›è¿™æ ·æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼›è€Œä¸”ä¼šå·®è·è¶Šæ¥è¶Šå¤§ï¼›<br>é¦–å…ˆï¼Œç°åœ¨çš„è½¯ä»¶ä»ä¸šè€…è¶Šæ¥è¶Šå¤šï¼›å¦‚ä½•èƒ½å¤Ÿä»è¿™ä¹ˆå¤šçš„è½¯ä»¶ä»ä¸šè€…å½“ä¸­å½¢æˆè‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ä»è€Œè„±é¢–è€Œå‡ºå‘¢ï¼Ÿå…¶å®è¿™æ˜¯å¾ˆè€ƒéªŒä¸€ä¸ªäººçš„å†…åŠ›ä»¥åŠä¸€ä¸ªäººå…¶è®¤çŸ¥æ°´å¹³å’Œæ€ç»´æ°´å‡†çš„è¿™æ ·ä¸€ä»¶äº‹æƒ…ã€‚</p><p>æŒæ¡æœ€ä¸ºåº•å±‚åè€…æ˜¯ä¸€äº›æ ¸å¿ƒçš„æŠ€èƒ½ï¼›æœ€ç«‹ç«¿è§å½±çš„æ–¹å¼ï¼›<br>ç¬¬äºŒè¿™ä¹Ÿæ˜¯èƒ½è®©è‡ªå·±ä»¥ååœ¨å­¦ä¹ æ–°çš„æŠ€æœ¯æ—¶èƒ½å¤Ÿè¶Šæ¥è¶Šå¿«ï¼›è¶Šæ¥è¶Šæ‰å®çš„ä¸€ä¸ªå¿…è¦çš„<br>ä¿è¯ï¼›å½’æ ¹ç»“åº•è¿˜æ˜¯é‚£å¥è¯ï¼›è¦æŒæ¡åº•å±‚æŒæ¡åŸç†æ€§çš„ä¸œè¥¿ï¼›<br>æ—¥å¸¸åšé¡¹ç›®ï¼Œæ¢å¥è¯åˆå«åšèµ¶é¡¹ç›®ï¼›å› ä¸ºé¡¹ç›®æœ‰ä¸ªæˆªæ­¢æ—¥æœŸã€‚<br>åœ¨æ—¶é—´å¾ˆç´§è¿«çš„æƒ…å†µä¸‹ï¼Œå…¶å®æ¯å¤©çš„å·¥ä½œå°±æ˜¯åœ¨èµ¶è¿™ä¸ªé¡¹ç›®è€Œå·²ï¼›æ¯å¤©ä¹Ÿåªæ˜¯å®Œæˆäº†è¿™ä¸ªåŠŸèƒ½è€Œå·²ã€‚å¾ˆå¤šçš„æ—¶å€™å…¶å®è‡ªå·±å¹¶ä¸èƒ½ç†è§£è‡ªå·±æ‰€å†™çš„æ¯ä¸€è¡Œä»£ç çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦è¿™æ ·å­å»å†™ï¼Œå…¶åº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆçš„äº‹æƒ…ï¼Œäº§ç”Ÿäº†ä¸€ç§å•¥æ ·çš„è°ƒç”¨å…³ç³»ã€‚å…‰å»åšé¡¹ç›®æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼›<br>åšé¡¹ç›®æ˜¯å­¦ä¹ æ¡†æ¶ä¸€ç§æœ€ä¸ºè¡Œä¹‹æœ‰æ•ˆçš„ä¸€ç§æ‰‹æ®µï¼›<br>é‚£å¯¹äºè¿™ç§ç»“è®ºï¼Œä½†æ˜¯å¯¹äºè¿™ç‚¹è¿˜æ˜¯è¿œè¿œä¸å¤Ÿï¼Œè¿˜ä¼šå·®å¾ˆå¤šã€‚åœ¨åšé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œå…³æ³¨ç‚¹åœ¨äºå¦‚ä½•èƒ½å¤Ÿåœ¨çŸ­æœŸå†…å°†é¡¹ç›®åšå®Œåšå¥½ï¼›å¦å¤–ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œå¦‚ä½•å°†é¡¹ç›®å½“ä¸­ä½¿ç”¨åˆ°çš„æ¡†æ¶ç†è§£çš„æ·±å…¥ä¸”æ‰å®ã€‚è¿™å…¶å®æ˜¯åœ¨é¡¹ç›®ä¹‹å¤–æ‰€éœ€è¦æ€è€ƒçš„äº‹æƒ…ã€‚<br>éœ€è¦æé«˜è‡ªå·±çš„è®¤çŸ¥ï¼›å¹¶ä¸æ˜¯åšå®Œé¡¹ç›®äº†ä»£è¡¨ä¸€åˆ‡éƒ½å®Œç»“äº†ï¼›</p><p>å¦‚ä½•è®©è‡ªå·±çš„æŠ€æœ¯å¤„äºä¸€ç§é«˜ä½çš„ä¸€ä¸ªè¿™æ ·çš„çŠ¶æ€ï¼šæŒæ¡åŸç†æ€§çš„ä¸œè¥¿ï¼Œå¿…é¡»è¦æŒæ¡åº•å±‚çš„ä¸€äº›å†…å®¹ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿè®©è‡ªå·±ç«‹äºä¸è´¥ä¹‹åœ°ã€‚</p><p>é¢è¯•çš„æ—¶å€™å¾€å¾€ä¼šé—®ä¸€äº›æ¯”è¾ƒåŸºç¡€åŸç†æ€§çš„å†…å®¹ï¼›è¿™äº›å†…å®¹å¯èƒ½ç”¨è¿‡ï¼Œä½†æ˜¯å´æŠ•å…¥å¾ˆå°‘çš„æ—¶é—´å»æ€è€ƒä»–ã€‚æ‰€ä»¥å°±æœ‰äº†éœ€è¦é¢è¯•å»èŠ±æ—¶é—´å‡†å¤‡çš„ç¼˜æ•…ã€‚</p><h2 id="Spring-Bootä¸Cloudæ•´ä½“ä»‹ç»"><a href="#Spring-Bootä¸Cloudæ•´ä½“ä»‹ç»" class="headerlink" title="Spring Bootä¸Cloudæ•´ä½“ä»‹ç»"></a>Spring Bootä¸Cloudæ•´ä½“ä»‹ç»</h2><h2 id="è¯¾ç¨‹å¤§çº²æ·±å…¥è§£è¯»ä¸å‰–æ"><a href="#è¯¾ç¨‹å¤§çº²æ·±å…¥è§£è¯»ä¸å‰–æ" class="headerlink" title="è¯¾ç¨‹å¤§çº²æ·±å…¥è§£è¯»ä¸å‰–æ"></a>è¯¾ç¨‹å¤§çº²æ·±å…¥è§£è¯»ä¸å‰–æ</h2><h2 id="å¾®æœåŠ¡é‡è¦æ¦‚å¿µä¸æƒå¨è§£è¯»"><a href="#å¾®æœåŠ¡é‡è¦æ¦‚å¿µä¸æƒå¨è§£è¯»" class="headerlink" title="å¾®æœåŠ¡é‡è¦æ¦‚å¿µä¸æƒå¨è§£è¯»"></a>å¾®æœåŠ¡é‡è¦æ¦‚å¿µä¸æƒå¨è§£è¯»</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1Eg4y187XT&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.bilibili.com/video/BV1Eg4y187XT&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="SpringBoot" scheme="https://fengshana.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£JVMè™šæ‹Ÿæœº</title>
    <link href="https://fengshana.github.io/2020/05/09/%E9%9D%A2%E8%AF%95/%E3%80%90JVM%E3%80%91%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    <id>https://fengshana.github.io/2020/05/09/%E9%9D%A2%E8%AF%95/%E3%80%90JVM%E3%80%91%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/</id>
    <published>2020-05-09T14:44:24.559Z</published>
    <updated>2020-05-18T17:34:11.797Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è§‚çœ‹ç¬”è®°</p></blockquote><p><a href="https://www.bilibili.com/video/BV1qE411Y7FQ?p=1" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1qE411Y7FQ?p=1</a>  </p><h2 id="å­¦ä¹ æ–¹æ³•è®ºä¸é«˜æ•ˆå­¦ä¹ æ–¹å¼æ¼”è¿›"><a href="#å­¦ä¹ æ–¹æ³•è®ºä¸é«˜æ•ˆå­¦ä¹ æ–¹å¼æ¼”è¿›" class="headerlink" title="å­¦ä¹ æ–¹æ³•è®ºä¸é«˜æ•ˆå­¦ä¹ æ–¹å¼æ¼”è¿›"></a>å­¦ä¹ æ–¹æ³•è®ºä¸é«˜æ•ˆå­¦ä¹ æ–¹å¼æ¼”è¿›</h2><p>JVMï¼šJava virtual Machine  </p><ul><li>ä»äººå»å­¦ä¹ </li><li>ä»äº‹åŠ¡å»å­¦ä¹ </li></ul><p>æ‡‚å¾—å¾ˆå¤šé“ç†ï¼Œå´ä¾ç„¶è¿‡ä¸å¥½è¿™ä¸€ç”Ÿã€‚ã€Šåä¼šæ— æœŸã€‹  </p><p>æŒä¹…åŒ–ï¼šæœ€ç»ˆè½åˆ°ä¸€ä¸ªå­˜å‚¨ä¸Šé¢ã€‚æœ‰è¾“å…¥InputStreamä¸€å®šè¦æœ‰è¾“å‡ºOutputStreamï¼›  </p><p>åˆ»æ„è”ç³»ã€‚  </p><h2 id="JVMå­¦ä¹ æ›²çº¿ä¸ç–‘éš¾ç‚¹å‰–æ"><a href="#JVMå­¦ä¹ æ›²çº¿ä¸ç–‘éš¾ç‚¹å‰–æ" class="headerlink" title="JVMå­¦ä¹ æ›²çº¿ä¸ç–‘éš¾ç‚¹å‰–æ"></a>JVMå­¦ä¹ æ›²çº¿ä¸ç–‘éš¾ç‚¹å‰–æ</h2><p>åº”ç”¨æ¡†æ¶ï¼šSpringã€Spring Bootã€Spring Cloudã€Dubbo etc.  </p><p>JVMï¼šæ¯ç‡¥ï¼Œç†è®ºã€‚  </p><p>åŸºäºjava8ï¼›è®²è§£ï¼›  </p><p>æŠ±æœ‰æ•¬ç•çš„å¿ƒæ€å­¦ä¹ JVMã€‚  </p><p>ä»»é‡è€Œé“è¿œï¼›  </p><h2 id="æ·±å…¥ç†è§£JVMè¯¾ç¨‹å¤§çº²åˆ†æä¸å·¥å…·ä½¿ç”¨"><a href="#æ·±å…¥ç†è§£JVMè¯¾ç¨‹å¤§çº²åˆ†æä¸å·¥å…·ä½¿ç”¨" class="headerlink" title="æ·±å…¥ç†è§£JVMè¯¾ç¨‹å¤§çº²åˆ†æä¸å·¥å…·ä½¿ç”¨"></a>æ·±å…¥ç†è§£JVMè¯¾ç¨‹å¤§çº²åˆ†æä¸å·¥å…·ä½¿ç”¨</h2><h2 id="ç±»åŠ è½½å™¨æ·±å…¥è§£æä¸é˜¶æ®µåˆ†æ"><a href="#ç±»åŠ è½½å™¨æ·±å…¥è§£æä¸é˜¶æ®µåˆ†æ" class="headerlink" title="ç±»åŠ è½½å™¨æ·±å…¥è§£æä¸é˜¶æ®µåˆ†æ"></a>ç±»åŠ è½½å™¨æ·±å…¥è§£æä¸é˜¶æ®µåˆ†æ</h2><h2 id="ç±»çš„åŠ è½½è¿æ¥ä¸åˆå§‹åŒ–è¿‡ç¨‹è¯¦è§£"><a href="#ç±»çš„åŠ è½½è¿æ¥ä¸åˆå§‹åŒ–è¿‡ç¨‹è¯¦è§£" class="headerlink" title="ç±»çš„åŠ è½½è¿æ¥ä¸åˆå§‹åŒ–è¿‡ç¨‹è¯¦è§£"></a>ç±»çš„åŠ è½½è¿æ¥ä¸åˆå§‹åŒ–è¿‡ç¨‹è¯¦è§£</h2><h2 id="å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä¸åç¼–è¯‘åŠåŠ©è®°ç¬¦è¯¦è§£"><a href="#å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä¸åç¼–è¯‘åŠåŠ©è®°ç¬¦è¯¦è§£" class="headerlink" title="å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä¸åç¼–è¯‘åŠåŠ©è®°ç¬¦è¯¦è§£"></a>å¸¸é‡çš„æœ¬è´¨å«ä¹‰ä¸åç¼–è¯‘åŠåŠ©è®°ç¬¦è¯¦è§£</h2><h2 id="ç¼–è¯‘å™¨å¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«ä»¥åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ"><a href="#ç¼–è¯‘å™¨å¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«ä»¥åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ" class="headerlink" title="ç¼–è¯‘å™¨å¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«ä»¥åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ"></a>ç¼–è¯‘å™¨å¸¸é‡ä¸è¿è¡ŒæœŸå¸¸é‡çš„åŒºåˆ«ä»¥åŠæ•°ç»„åˆ›å»ºæœ¬è´¨åˆ†æ</h2><h2 id="æ¥å£åˆå§‹åŒ–è§„åˆ™ä¸ç±»åŠ è½½å™¨å‡†å¤‡èŠ‚ç‚¹å’Œåˆå§‹åŒ–é˜¶æ®µçš„é‡è¦æ„ä¹‰"><a href="#æ¥å£åˆå§‹åŒ–è§„åˆ™ä¸ç±»åŠ è½½å™¨å‡†å¤‡èŠ‚ç‚¹å’Œåˆå§‹åŒ–é˜¶æ®µçš„é‡è¦æ„ä¹‰" class="headerlink" title="æ¥å£åˆå§‹åŒ–è§„åˆ™ä¸ç±»åŠ è½½å™¨å‡†å¤‡èŠ‚ç‚¹å’Œåˆå§‹åŒ–é˜¶æ®µçš„é‡è¦æ„ä¹‰"></a>æ¥å£åˆå§‹åŒ–è§„åˆ™ä¸ç±»åŠ è½½å™¨å‡†å¤‡èŠ‚ç‚¹å’Œåˆå§‹åŒ–é˜¶æ®µçš„é‡è¦æ„ä¹‰</h2><h2 id="ç±»åŠ è½½å™¨æ·±å…¥è§£æä»¥åŠé‡è¦ç‰¹æ€§å‰–æ"><a href="#ç±»åŠ è½½å™¨æ·±å…¥è§£æä»¥åŠé‡è¦ç‰¹æ€§å‰–æ" class="headerlink" title="ç±»åŠ è½½å™¨æ·±å…¥è§£æä»¥åŠé‡è¦ç‰¹æ€§å‰–æ"></a>ç±»åŠ è½½å™¨æ·±å…¥è§£æä»¥åŠé‡è¦ç‰¹æ€§å‰–æ</h2><h2 id="åˆå§‹åŒ–å¯¹äºç±»ä¸æ¥å£çš„å¼‚åŒç‚¹æ·±å…¥è§£æ"><a href="#åˆå§‹åŒ–å¯¹äºç±»ä¸æ¥å£çš„å¼‚åŒç‚¹æ·±å…¥è§£æ" class="headerlink" title="åˆå§‹åŒ–å¯¹äºç±»ä¸æ¥å£çš„å¼‚åŒç‚¹æ·±å…¥è§£æ"></a>åˆå§‹åŒ–å¯¹äºç±»ä¸æ¥å£çš„å¼‚åŒç‚¹æ·±å…¥è§£æ</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è§‚çœ‹ç¬”è®°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1qE411Y7FQ?p=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://w
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="JVMè™šæ‹Ÿæœº" scheme="https://fengshana.github.io/tags/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>Shopping for a TV</title>
    <link href="https://fengshana.github.io/2020/05/09/%E8%8B%B1%E8%AF%AD/lesson4/"/>
    <id>https://fengshana.github.io/2020/05/09/%E8%8B%B1%E8%AF%AD/lesson4/</id>
    <published>2020-05-09T12:35:35.381Z</published>
    <updated>2020-05-09T14:13:58.767Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Learn-amp-Talk-I"><a href="#Learn-amp-Talk-I" class="headerlink" title="Learn &amp; Talk I"></a>Learn &amp; Talk I</h2><h3 id="Chapter-1-Shopping"><a href="#Chapter-1-Shopping" class="headerlink" title="Chapter 1 Shopping"></a>Chapter 1 Shopping</h3><h4 id="Lesson-4-Shopping-for-a-TV"><a href="#Lesson-4-Shopping-for-a-TV" class="headerlink" title="Lesson 4 Shopping for a TV"></a>Lesson 4 Shopping for a TV</h4><blockquote><p>at the bottom of the following pages:T1=teaching instructions;T=teacher;S=student</p></blockquote><h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ul><li><p>part <big>A</big>. Letâ€™s Learn (12 mins)</p></li><li><p>part <big>B</big>. Letâ€™s Talk (12 mins)</p></li><li><p>part <big>C</big>. Review (1 min)</p></li></ul><blockquote><p>Learning Objectives</p></blockquote><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å­¦ä¹ ç›®æ ‡ï¼š</span><br><span class="line"><span class="number">4</span> <span class="built_in">words</span> <span class="keyword">about</span> <span class="string">"shopping for a TV"</span> | <span class="number">4</span>ä¸ªå’Œ<span class="string">"ä¹°ç”µè§†"</span>ç›¸å…³çš„å•è¯</span><br><span class="line">Expressions <span class="keyword">for</span> <span class="string">"shopping for a TV"</span> | <span class="string">"ä¹°ç”µè§†"</span>å¸¸ç”¨è¡¨è¾¾</span><br><span class="line">How <span class="keyword">to</span> talk <span class="keyword">about</span> topics related <span class="keyword">to</span> <span class="string">"shopping for a TV"</span> | è°ˆè®ºå’Œ<span class="string">"ä¹°ç”µè§†"</span>ç›¸å…³çš„è¯é¢˜</span><br></pre></td></tr></table></figure><h2 id="part-A-Letâ€™s-Learn"><a href="#part-A-Letâ€™s-Learn" class="headerlink" title="part A. Letâ€™s Learn"></a>part A. Letâ€™s Learn</h2><h3 id="Vocabulary-4-mins"><a href="#Vocabulary-4-mins" class="headerlink" title="Vocabulary (4 mins)"></a>Vocabulary (4 mins)</h3><table>  <tr>    <td style="font-weight:bolder;color:red;">warranty</td>    <td>a written promise from a company to repair or replace a product that develops a fault within a particular period of time</td>    <td>ä¿ä¿®å•ï¼Œä¿ä¿®å¡ï¼Œä¿ä¿®æœåŠ¡</td>    <td>e.g. The TV has a 3-year <span style="font-weight:bolder;color:red;text-decoration:underline;">warranty</span>.</td>    <td></td>  </tr>   <tr>    <td style="font-weight:bolder;color:red;">best-seller</td>    <td>a new bool or other product that has sold a great number of copies.</td>    <td>çƒ­å–å“ï¼Œç•…é”€å“</td>    <td>e.g. As a writer, he wants to write a <span style="font-weight:bolder;color:red;text-decoration:underline;">best-seller</span>.</td>    <td></td>  </tr>     <tr>    <td style="font-weight:bolder;color:red;">offer</td>    <td>to provide or supply something.</td>    <td>æä¾›</td>    <td>e.g. He <span style="font-weight:bolder;color:red;text-decoration:underline;">offered</span> me a glass of water.</td>    <td></td>  </tr>     <tr>    <td style="font-weight:bolder;color:red;">delivery</td>    <td>the act of taking goods,letters,parcels,etc. to people's houses or places of work</td>    <td>è¿é€ï¼Œé€’é€</td>    <td>e.g. They offer free <span style="font-weight:bolder;color:red;text-decoration:underline;">delivery,</span> so it's a good deal.</td>    <td>deliver(v.) The letter was delivered yesterday,</td>  </tr></table><h3 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h3><h4 id="Role-play-the-dialog-with-your-teacher-twice-and-learn-the-highlighted-expressions-by-heart-å’Œè€å¸ˆä¸€èµ·åˆ†è§’è‰²æœ—è¯»ä¸¤éä¸€ä¸‹å¯¹è¯ã€‚ç†Ÿè®°æ ‡äº®éƒ¨åˆ†çš„çŸ­è¯­å’Œè¡¨è¾¾"><a href="#Role-play-the-dialog-with-your-teacher-twice-and-learn-the-highlighted-expressions-by-heart-å’Œè€å¸ˆä¸€èµ·åˆ†è§’è‰²æœ—è¯»ä¸¤éä¸€ä¸‹å¯¹è¯ã€‚ç†Ÿè®°æ ‡äº®éƒ¨åˆ†çš„çŸ­è¯­å’Œè¡¨è¾¾" class="headerlink" title="Role-play the dialog with your teacher twice,and learn the highlighted expressions by heart.å’Œè€å¸ˆä¸€èµ·åˆ†è§’è‰²æœ—è¯»ä¸¤éä¸€ä¸‹å¯¹è¯ã€‚ç†Ÿè®°æ ‡äº®éƒ¨åˆ†çš„çŸ­è¯­å’Œè¡¨è¾¾"></a>Role-play the dialog with your teacher twice,and learn the highlighted expressions by heart.å’Œè€å¸ˆä¸€èµ·åˆ†è§’è‰²æœ—è¯»ä¸¤éä¸€ä¸‹å¯¹è¯ã€‚ç†Ÿè®°æ ‡äº®éƒ¨åˆ†çš„çŸ­è¯­å’Œè¡¨è¾¾</h4><p>ï¼ˆJohn and Anne are shopping for a TV.ï¼‰  </p><p><strong><em>Anne:</em></strong> How about this one?<br><strong><em>John:</em></strong> I like this brand ,and the price isnâ€™t too high.<br>ï¼ˆThey start to ask the salesperson for information.ï¼‰<br><strong><em>John:</em></strong> <span style="background-color:yellow;font-weight:bolder;">How long is the warranty for this TV?</span><br><strong><em>Salesperson:</em></strong> It comes with a 2-year parts(é›¶ä»¶)<span style="background-color:yellow;font-weight:bolder;">warranty</span>. Itâ€™s also the <span style="background-color:yellow;font-weight:bolder;">best-seller</span> now.<br><strong><em>Anne:</em></strong> <span style="background-color:yellow;font-weight:bolder;">Do you offer free delivery?</span><br><strong><em>Anne:</em></strong> Yes, we do.</p><h2 id="part-B-Letâ€™s-Talk"><a href="#part-B-Letâ€™s-Talk" class="headerlink" title="part B. Letâ€™s Talk"></a>part B. Letâ€™s Talk</h2><h3 id="Conversation"><a href="#Conversation" class="headerlink" title="Conversation"></a>Conversation</h3><h4 id="Suppose-youâ€™re-shopping-for-appliances-Use-th-vocabulary-and-expressions-youâ€™ve-learned-in-part-A-to-complete-the-following-conversation-å‡è®¾ä½ æ­£åœ¨é€‰è´­ç”µå™¨ã€‚è¿ç”¨åœ¨ç¬¬ä¸€éƒ¨åˆ†å­¦åˆ°çš„è¯æ±‡å’Œè¡¨è¾¾å°†ä¸€ä¸‹æƒ…å¢ƒå¯¹è¯è¡¥å……å®Œæ•´"><a href="#Suppose-youâ€™re-shopping-for-appliances-Use-th-vocabulary-and-expressions-youâ€™ve-learned-in-part-A-to-complete-the-following-conversation-å‡è®¾ä½ æ­£åœ¨é€‰è´­ç”µå™¨ã€‚è¿ç”¨åœ¨ç¬¬ä¸€éƒ¨åˆ†å­¦åˆ°çš„è¯æ±‡å’Œè¡¨è¾¾å°†ä¸€ä¸‹æƒ…å¢ƒå¯¹è¯è¡¥å……å®Œæ•´" class="headerlink" title="Suppose youâ€™re shopping for appliances. Use th vocabulary and expressions youâ€™ve learned in part A to complete the following conversation. å‡è®¾ä½ æ­£åœ¨é€‰è´­ç”µå™¨ã€‚è¿ç”¨åœ¨ç¬¬ä¸€éƒ¨åˆ†å­¦åˆ°çš„è¯æ±‡å’Œè¡¨è¾¾å°†ä¸€ä¸‹æƒ…å¢ƒå¯¹è¯è¡¥å……å®Œæ•´"></a>Suppose youâ€™re shopping for appliances. Use th vocabulary and expressions youâ€™ve learned in part A to complete the following conversation. å‡è®¾ä½ æ­£åœ¨é€‰è´­ç”µå™¨ã€‚è¿ç”¨åœ¨ç¬¬ä¸€éƒ¨åˆ†å­¦åˆ°çš„è¯æ±‡å’Œè¡¨è¾¾å°†ä¸€ä¸‹æƒ…å¢ƒå¯¹è¯è¡¥å……å®Œæ•´</h4><blockquote><p>Hints<br><strong><em>delivery</em></strong><br><strong><em>warranty</em></strong><br><strong><em>How long is the warranty for â€¦?</em></strong><br><strong><em>best-seller</em></strong><br><strong><em>offer</em></strong></p></blockquote><p><strong><em>A:</em></strong> Excuse me. <span style="text-decoration:underline;">How along is warranty for</span> this air conditioner(ç©ºè°ƒ) ?<br><strong><em>B:</em></strong> Three years. Itâ€™s the <span style="text-decoration:underline;">best-seller</span> now. We also <span style="text-decoration:underline;">offer</span> free <span style="text-decoration:underline;">delivery</span>.<br><strong><em>A:</em></strong> But thereâ€™s an air conditioner of this brand in the living room of my house,and it doesnâ€™t work very well recently.<br><strong><em>B:</em></strong> Weâ€™ll <span style="text-decoration:underline;">offer</span> free repair(ç»´ä¿®) if itâ€™s still under <span style="text-decoration:underline;">warranty</span>.<br><strong><em>A:</em></strong> Fine.</p><h3 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h3><h4 id="Talk-with-your-teacher-about-the-following-question-Refer-to-the-hints-if-necessary-å’Œè€å¸ˆä¸€èµ·è®¨è®ºä¸€ä¸‹é—®é¢˜ã€‚å¯ä»¥å‚è€ƒæ–¹æ¡†ä¸­çš„æç¤º"><a href="#Talk-with-your-teacher-about-the-following-question-Refer-to-the-hints-if-necessary-å’Œè€å¸ˆä¸€èµ·è®¨è®ºä¸€ä¸‹é—®é¢˜ã€‚å¯ä»¥å‚è€ƒæ–¹æ¡†ä¸­çš„æç¤º" class="headerlink" title="Talk with your teacher about the following question. Refer to the hints if necessary.å’Œè€å¸ˆä¸€èµ·è®¨è®ºä¸€ä¸‹é—®é¢˜ã€‚å¯ä»¥å‚è€ƒæ–¹æ¡†ä¸­çš„æç¤º"></a>Talk with your teacher about the following question. Refer to the hints if necessary.å’Œè€å¸ˆä¸€èµ·è®¨è®ºä¸€ä¸‹é—®é¢˜ã€‚å¯ä»¥å‚è€ƒæ–¹æ¡†ä¸­çš„æç¤º</h4><ol><li>How often do you watch TV? When do you usually watch TV?</li></ol><blockquote><p>Hints:</p></blockquote><p><strong><em>every day / usually / from time to time(å¶å°”) / never â€¦</em></strong><br><strong><em>in the evening(morning ,afternoon) / at the noon / on weekends â€¦</em></strong></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">I often watch TV <span class="keyword">is</span> irregularly scheduled.  </span><br><span class="line">recently, because I watch TV <span class="keyword">with</span> <span class="keyword">my</span> friends when <span class="keyword">my</span> friends <span class="keyword">after</span> their works,we will eat dinner <span class="keyword">and</span> watch TV <span class="keyword">at</span> <span class="keyword">the</span> evening.</span><br><span class="line">I usually watch TV <span class="keyword">at</span> <span class="keyword">the</span> evening <span class="keyword">with</span> <span class="keyword">my</span> friends.</span><br><span class="line">when i am alone,i don't want <span class="keyword">to</span> watch TV.</span><br><span class="line">maybe ,when only myself,i think <span class="keyword">that</span> watching TV don't bring <span class="keyword">me</span> <span class="keyword">some</span> original happy.</span><br><span class="line">i think <span class="keyword">that</span> watching TV <span class="keyword">is</span> seeing <span class="keyword">some</span> famous actors <span class="keyword">and</span> <span class="keyword">some</span> humorous actors acts happy shows.</span><br><span class="line">so i am <span class="keyword">not</span> <span class="keyword">every</span> <span class="built_in">day</span>  <span class="keyword">or</span> usually <span class="keyword">or</span> <span class="keyword">from</span> <span class="built_in">time</span> <span class="keyword">to</span> <span class="built_in">time</span> <span class="keyword">or</span> never ,no ,also ,i am <span class="keyword">not</span> <span class="keyword">in</span> <span class="keyword">the</span> evening ,<span class="keyword">in</span> <span class="keyword">the</span> morning <span class="keyword">or</span> <span class="keyword">in</span> <span class="keyword">the</span> afternoon,<span class="keyword">or</span> <span class="keyword">on</span> weekends, <span class="keyword">and</span> so <span class="keyword">on</span>.</span><br><span class="line">long long ago ,when i was a child,</span><br><span class="line">i like watching TV.</span><br><span class="line">may be ,<span class="keyword">at</span> <span class="keyword">the</span> childhood,<span class="keyword">in</span> <span class="keyword">the</span> tv <span class="keyword">that</span>'s world, have many imagine <span class="keyword">and</span> interesting something <span class="keyword">or</span> someone fascinated <span class="keyword">my</span> eyes.</span><br></pre></td></tr></table></figure><ol start="2"><li>What kind of TV programs(èŠ‚ç›®) do you like ? Why?</li></ol><blockquote><p>Hints:</p></blockquote><p><strong><em>news -&gt; learn whatâ€™s happening around the world â€¦</em></strong><br><strong><em>talk shows(è®¿è°ˆèŠ‚ç›®) -&gt; know more about the life of famous people â€¦</em></strong><br><strong><em>variety shows (ç»¼è‰ºèŠ‚ç›®) -&gt; funny,interesting ,relaxing(ä»¤äººæ”¾æ¾çš„)  â€¦</em></strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i like variety shows, <span class="keyword">because </span><span class="keyword">it's </span>funny ,interesting <span class="keyword">and </span>relaxing.</span><br></pre></td></tr></table></figure><ol start="3"><li>What will you consider(è€ƒè™‘) when buying an appliance(ç”µå™¨)ï¼Ÿ</li></ol><blockquote><p>Hints:</p></blockquote><p><strong><em>brands (what brands?) / prices (how much?) / warranty(how long?) ã€ delivery (free or not?) â€¦.</em></strong></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">i have <span class="keyword">not</span> enough money.</span><br><span class="line">due <span class="keyword">to</span> i have <span class="keyword">not</span> work.</span><br><span class="line">recently,i interviews four <span class="keyword">times</span>.</span><br><span class="line">when <span class="keyword">the</span> interviews process ending, i feel <span class="keyword">my</span> heart <span class="keyword">as</span> <span class="keyword">if</span> <span class="keyword">it</span> <span class="keyword">is</span> slowly sinking.</span><br><span class="line">even though,i look like a child, <span class="keyword">but</span> now,i am <span class="number">21</span> years old.</span><br><span class="line">i work <span class="keyword">from</span> programing. <span class="keyword">in</span> short programing <span class="keyword">is</span> <span class="keyword">it</span>.</span><br><span class="line">so ,<span class="keyword">in</span> <span class="keyword">the</span> short term ,i will <span class="keyword">not</span> consider buy <span class="keyword">some</span> expensive appliance.</span><br><span class="line">except <span class="keyword">for</span> example, a small oscillating fan ,because ,<span class="keyword">the</span> season <span class="keyword">is</span> summer,<span class="keyword">the</span> <span class="built_in">day</span> <span class="keyword">and</span> <span class="keyword">the</span> evening <span class="keyword">is</span> hot. when i have a small oscillating,i feel <span class="keyword">my</span> hand ,foot,hair,leg <span class="keyword">and</span> so <span class="keyword">on</span>,<span class="keyword">is</span> ,emm,<span class="keyword">as</span> <span class="keyword">if</span> a fish live <span class="keyword">the</span> water,especially,when <span class="keyword">after</span> bath shower <span class="keyword">and</span> wash <span class="keyword">my</span> clothes <span class="keyword">and</span> open <span class="keyword">my</span> small oscillating fan,<span class="keyword">the</span> oscillating fan bring <span class="keyword">me</span> <span class="keyword">is</span> this feeling.</span><br></pre></td></tr></table></figure><p>In this lesson,youâ€™ve learned</p><ol start="4"><li>words about â€œbuying appliancesâ€</li></ol><blockquote><p>warranty<br>best-seller<br>offer<br>delivery</p></blockquote><ul><li>commonly used expressions for buying appliances</li></ul><blockquote><p>How long is the warranty for this TV?<br>Do you offer free delivery?</p></blockquote><ul><li>how to talk about TV and other appliances</li></ul><h2 id="Further-Study"><a href="#Further-Study" class="headerlink" title="Further Study"></a>Further Study</h2><h3 id="Listen-and-Learn"><a href="#Listen-and-Learn" class="headerlink" title="Listen and Learn"></a>Listen and Learn</h3><blockquote><p>range hood æŠ½æ²¹çƒŸæœº<br>electric oven ç”µçƒ¤ç®±<br>dishwasher æ´—ç¢—æœº</p></blockquote><ul><li>The soybean milk machine(è±†æµ†æœº)/ juicer(æœæ±æœº) has excellent features such as low cost, complete function,convenient to use and so on.</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Learn-amp-Talk-I&quot;&gt;&lt;a href=&quot;#Learn-amp-Talk-I&quot; class=&quot;headerlink&quot; title=&quot;Learn &amp;amp; Talk I&quot;&gt;&lt;/a&gt;Learn &amp;amp; Talk I&lt;/h2&gt;&lt;h3 id=&quot;Chapt
      
    
    </summary>
    
    
      <category term="è‹±è¯­" scheme="https://fengshana.github.io/categories/%E8%8B%B1%E8%AF%AD/"/>
    
    
      <category term="è‹±è¯­" scheme="https://fengshana.github.io/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>Synchronizedå’ŒReentrantLock</title>
    <link href="https://fengshana.github.io/2020/05/06/%E9%9D%A2%E8%AF%95/%E3%80%90%E9%94%81%E3%80%91Synchronized%E5%92%8CReentrantLock/"/>
    <id>https://fengshana.github.io/2020/05/06/%E9%9D%A2%E8%AF%95/%E3%80%90%E9%94%81%E3%80%91Synchronized%E5%92%8CReentrantLock/</id>
    <published>2020-05-06T15:47:22.985Z</published>
    <updated>2020-05-18T17:35:00.462Z</updated>
    
    <content type="html"><![CDATA[<p>è§‚çœ‹ç¬”è®°: <a href="https://www.bilibili.com/video/BV1dE411r7iy?from=search&amp;seid=2860602863323633916" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1dE411r7iy?from=search&amp;seid=2860602863323633916</a>  </p><p>javaå½“ä¸­çš„é”ï¼Œæ¯”å¦‚è¯´ReentrantLockï¼Œè¿˜æœ‰Synchronizedå…³é”®å­—ï¼›  </p><p>é‡ç‚¹ï¼šsync(synchronizedå…³é”®å­—åŸç†)  </p><p>javaä½“ç³»æœ€éš¾çš„æŠ€æœ¯ç‚¹ä¹‹ä¸€ï¼šsyncï¼›ï¼ˆæ¶‰åŠåˆ°JVMï¼ŒC++æºç ç­‰ï¼‰  </p><ul><li>javaçš„å¯¹è±¡å¸ƒå±€</li><li>syncåº•å±‚å·¥ä½œçš„åŸç†</li><li>syncä¼˜åŒ–åŸç†</li><li>å­¦ä¹ æ–¹æ³•-å­¦ä¹ çš„æ·±åº¦</li></ul><h2 id="javaå¤´çš„ä¿¡æ¯åˆ†æ"><a href="#javaå¤´çš„ä¿¡æ¯åˆ†æ" class="headerlink" title="javaå¤´çš„ä¿¡æ¯åˆ†æ"></a>javaå¤´çš„ä¿¡æ¯åˆ†æ</h2><p><font style="color:orange;font-weight:bold;">é¦–å…ˆä¸ºä»€ä¹ˆè¦å»ç ”ç©¶javaçš„å¯¹è±¡å¤´ï¼Ÿ</font>  </p><p><font style="color:orange;font-weight:bold;">è¿™é‡Œæˆªå–ä¸€å¼ Hotspotçš„æºç å½“ä¸­çš„æ³¨é‡Š</font></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> 64 bits;</span><br><span class="line"><span class="string">//</span> <span class="params">--------</span></span><br><span class="line"><span class="string">//</span> unused: 25 hash<span class="function">:31</span> <span class="params">---</span>&gt;| unused<span class="function">:1</span>   age<span class="function">:4</span>   biased_lock<span class="function">:1</span> lock<span class="function">:2</span> <span class="params">(normal object)</span></span><br><span class="line"><span class="string">//JavaThread</span>*<span class="function">:54</span> epoch<span class="function">:2</span> unused<span class="function">:1</span> age<span class="function">:4</span> biased_lock<span class="function">:1</span> lock<span class="function">:2</span> <span class="params">(biased object)</span></span><br><span class="line"><span class="string">//</span> PromotedObject*<span class="function">:61</span> <span class="params">-----------------</span>&gt;| promo_bits<span class="function">:3</span> <span class="params">-----</span>&gt; <span class="params">(CMS promoted object)</span></span><br><span class="line"><span class="string">.//</span> size<span class="function">:64-------------------------------------------------</span>&gt;| <span class="params">(CMS free block)</span></span><br><span class="line"><span class="string">//</span></span><br></pre></td></tr></table></figure><p>è¿™å¼ å›¾æ¢æˆäººå¯è¯»çš„è¡¨æ ¼å¦‚ä¸‹ï¼š  </p><table>    <tr>        <td colspan="3">Object Header(128 bits)</td>    </tr>    <tr>        <td>Mark Word(64 bits)</td>        <td>Klass Word(64 bits)</td>        <td></td>    </tr>        <tr>        <td>unused:25 | identity_hashcode:31 | unused:1 | age:4 | biased_lock:1 | lock:2 </td>        <td>OOP to metadata object</td>        <td style="color:red;font-weight:bolder;">æ— é”</td>    </tr>    <tr>        <td>thread:54 |       epoch:2        | unused:1 | age:4 | biased_lock:1 | lock:2 </td>        <td>OOP to metadata object</td>        <td style="color:red;font-weight:bolder;">åå‘é”</td>    </tr>      <tr>        <td>ptr_to_lock_record:62                                                    | lock:2 </td>        <td>OOP to metadata object</td>        <td style="color:red;font-weight:bolder;">è½»é‡é”</td>    </tr>    <tr>        <td>ptr_to_heavyweight_monitor:62                                                    | lock:2 </td>        <td>OOP to metadata object</td>        <td style="color:red;font-weight:bolder;">é‡é‡é”</td>    </tr>    <tr>        <td>                                                    | lock:2 </td>        <td>OOP to metadata object</td>        <td style="color:red;font-weight:bolder;">gc</td>    </tr></table><p>æ„æ€æ˜¯ï¼š<font style="color:orange;font-weight:bold;">javaçš„å¯¹è±¡å¤´åœ¨å¯¹è±¡çš„ä¸åŒçŠ¶æ€ä¸‹ä¼šæœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ã€‚</font>  </p><p>ä¸»è¦æœ‰ä¸‰ç§çŠ¶æ€ï¼š<br><font style="color:orange;font-weight:bold;">æ— é”çŠ¶æ€ã€åŠ é”çŠ¶æ€ã€gcæ ‡è®°çŠ¶æ€ã€‚</font>  </p><p>é‚£ä¹ˆå¯ä»¥ç†è§£ <font style="color:orange;font-weight:bold;">javaå½“ä¸­çš„å–é”</font>  å…¶å®å¯ä»¥ç†è§£ä¸ºæ˜¯ï¼š<font style="color:orange;font-weight:bold;">ç»™å¯¹è±¡ä¸Šé”ï¼Œä¹Ÿå°±æ˜¯æ”¹å˜å¯¹è±¡å¤´çš„çŠ¶æ€ã€‚</font>  </p><p><font style="color:orange;font-weight:bold;">å¦‚æœä¸Šé”æˆåŠŸåˆ™è¿›å…¥åŒæ­¥ä»£ç å—ã€‚</font>  </p><p>ä½†æ˜¯javaå½“ä¸­çš„é”æœ‰åˆ†ä¸ºå¾ˆå¤šç§ï¼Œä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºå¤§ä½“åˆ†ä¸ºï¼š<font style="color:orange;font-weight:bold;">åå‘é”ã€è½»é‡é”ã€é‡é‡é”</font>ä¸‰ç§é”çŠ¶æ€ã€‚  </p><p><font style="color:orange;font-weight:bold;">è¿™ä¸‰ç§é”çš„æ•ˆç‡å®Œå…¨ä¸åŒã€‚</font>  </p><p>å…³äºæ•ˆç‡çš„åˆ†æä¼šåœ¨ä¸‹æ–‡åˆ†æï¼Œåªæœ‰åˆç†çš„è®¾è®¡ä»£ç ï¼Œæ‰èƒ½åˆç†çš„åˆ©ç”¨é”</p><p>é‚£ä¹ˆè¿™ä¸‰ç§é”çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ‰€ä»¥ï¼Œéœ€è¦å…ˆç ”ç©¶è¿™ä¸ª <font style="color:orange;font-weight:bold;">å¯¹è±¡å¤´</font>  </p><h2 id="javaå¯¹è±¡çš„å¸ƒå±€ä»¥åŠå¯¹è±¡å¤´çš„å¸ƒå±€"><a href="#javaå¯¹è±¡çš„å¸ƒå±€ä»¥åŠå¯¹è±¡å¤´çš„å¸ƒå±€" class="headerlink" title="javaå¯¹è±¡çš„å¸ƒå±€ä»¥åŠå¯¹è±¡å¤´çš„å¸ƒå±€"></a>javaå¯¹è±¡çš„å¸ƒå±€ä»¥åŠå¯¹è±¡å¤´çš„å¸ƒå±€</h2><ol><li><strong>JOLæ¥åˆ†æjavaçš„å¯¹è±¡å¸ƒå±€</strong></li></ol><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.lock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span>&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        lockTest();<span class="comment">//é—®é¢˜ï¼šç°åœ¨å½“å‰æƒ³è¦å¯¹è¯¥lockTestæ–¹æ³•åšåŒæ­¥å¤„ç†</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡è®¾æ­¤æ—¶lockTestå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›å¦‚ä½•ç”¨æœ€ç®€å•çš„æ–¹å¼æ¥è¿›è¡Œå¤„ç†lockTestæ–¹æ³•çš„åŒæ­¥</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lockTest</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"xxxx"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤„ç†æ–¹å¼ä¸€ï¼šï¼ˆåŠ synchronizedå…³é”®å­—ï¼‰  </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="title">com.lock;</span></span><br><span class="line"></span><br><span class="line">public class Test&#123;</span><br><span class="line"></span><br><span class="line">    static L l=<span class="keyword">new</span> L();//ä¸ºlockæ–°å»ºçš„ä¸“é—¨çš„ä¸€ä¸ªç±»ï¼›ç”±äºlockTestæ–¹æ³•æ˜¯é™æ€çš„ï¼›è¯¥é™æ€æ–¹æ³•å½“ä¸­éœ€è¦ä½¿ç”¨åˆ°è¯¥l å¯¹è±¡ï¼Œæ‰€ä»¥å°†å…¶ç½®ä¸ºstatic</span><br><span class="line"></span><br><span class="line">    static ReentrantLock reentrantLock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line"></span><br><span class="line">        lockTest();//é—®é¢˜ï¼šç°åœ¨å½“å‰æƒ³è¦å¯¹è¯¥lockTestæ–¹æ³•åšåŒæ­¥å¤„ç†</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //å‡è®¾æ­¤æ—¶lockTestå­˜åœ¨çº¿ç¨‹å®‰å…¨åŒæ­¥é—®é¢˜ï¼›å¦‚ä½•å¤„ç†</span><br><span class="line">    public static void lockTest()&#123;</span><br><span class="line">        //<span class="keyword">synchronized</span>()å½“ä¸­éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼›å¯ä»¥ä¼ å¾ˆå¤šï¼›</span><br><span class="line">        //æ¯”å¦‚è¯´åœ¨éé™æ€æ–¹æ³•å½“ä¸­å¯ä»¥ä¼ thisï¼›</span><br><span class="line">        //å¦‚æœæ˜¯é™æ€æ–¹æ³•åˆ™å¯ä»¥ä¼ Test.classï¼›ä¹Ÿå¯ä»¥è¿›è¡Œå¯¹å¯¹è±¡åŠ é”ï¼›</span><br><span class="line">        //æ›´å¤šçš„æ—¶å€™æ˜¯å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥çš„lockç±»L,ä¼ å…¥è¯¥ç±»çš„å¯¹è±¡lï¼Œç»™è¯¥lä¸Šé”ï¼›</span><br><span class="line">        //valatileä¸èƒ½å®ç°åŒæ­¥ï¼›valatileåªèƒ½ç”¨æ¥ä¿è¯è®¿é—®æ—¶çš„å¯è§æ€§ä»¥åŠä¸ä¹±å»æ‰§è¡Œï¼Œä¸åŒæ­¥æ²¡æœ‰å¾ˆå¤§çš„å…³ç³»ï¼›</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">        java å¹¶å‘ç¼–ç¨‹å…¥é—¨çº§åˆ«çš„é—®é¢˜ï¼š  </span><br><span class="line">        <span class="number">1</span>. javaå½“ä¸­æœ‰å“ªäº›é”ï¼Ÿ</span><br><span class="line">        <span class="number">2</span>. <span class="keyword">synchronized</span>(l)&#123;System.<span class="keyword">out</span>.println(<span class="string">"xxxx"</span>);&#125; å½“å‰è¯¥ä»£ç é”çš„æ˜¯ä»€ä¹ˆï¼Ÿé”çš„æ˜¯ä»£ç å—ï¼Ÿè¿˜æ˜¯é”lå¯¹è±¡ï¼Ÿ</span><br><span class="line"></span><br><span class="line">        javaå½“ä¸­çš„é”ï¼šæ¯”å¦‚è¯´å…¬å¹³é”ã€éå…¬å¹³é”ã€è¯»å†™é”ã€å…±äº«é”ã€äº’æ–¥é”ã€è‡ªæ—‹é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”....</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span>(l)&#123;System.<span class="keyword">out</span>.println(<span class="string">"xxxx"</span>);&#125; è¿™æ®µä»£ç æœ¬è´¨ä¸Šçš„è¯­ä¹‰æ˜¯ä»€ä¹ˆ?<span class="keyword">synchronized</span>å…³é”®å­—é”ä½çš„æ˜¯ä»£ç å—è¿˜æ˜¯lè¯¥å¯¹è±¡ï¼Ÿ<span class="keyword">synchronized</span>æ­¤æ—¶é”çš„æ˜¯è¯¥l å¯¹è±¡ï¼›</span><br><span class="line">        ç»™è¯¥l å¯¹è±¡è¿›è¡Œä¸Šé”ï¼›</span><br><span class="line">        è¯¥<span class="keyword">synchronized</span>æ˜¯å¦‚ä½•ç»™è¯¥ l å¯¹è±¡è¿›è¡Œä¸Šé”çš„ï¼Ÿ</span><br><span class="line">        */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">        reentrantLockä¸<span class="keyword">synchronized</span>éƒ½æ˜¯é”ï¼Œä½†æ˜¯è¿™ä¸¤æŠŠé”æ˜¯æœ‰åŒºåˆ«çš„ï¼›</span><br><span class="line">        <span class="keyword">synchronized</span>æ˜¯javaçš„å†…ç½®é”ï¼›</span><br><span class="line">        è€ŒreentrantLockæ˜¯JUCå¹¶å‘åŒ…ä¸‹æä¾›çš„é”ï¼›</span><br><span class="line">        è¿™ä¸¤ä¸ªé”éƒ½èƒ½å®ŒæˆåŒæ ·çš„åŠŸèƒ½ï¼šè®©é”ä¹‹é—´çš„ä»£ç å—è¿›è¡ŒåŒæ­¥æ‰§è¡Œï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®ï¼›</span><br><span class="line">        å½“å‰é—®é¢˜åœ¨äºï¼šå¦‚æœé‡‡ç”¨ReentrantLockè°ƒç”¨lock()æ–¹æ³•çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“ç†è§£ä¸ºï¼šå°±æ˜¯ç»™è¿™ä¸ª<span class="keyword">new</span>å‡ºæ¥çš„reentrantLockå¯¹è±¡å»ä¸Šé”ï¼›</span><br><span class="line">        é‚£ä¹ˆä»ä»£ç å½“ä¸­å¦‚ä½•æ¥ç†è§£å‘¢ï¼Ÿ</span><br><span class="line">        å› ä¸ºåœ¨reentrantLockè¿™ä¸ªå¯¹è±¡å½“ä¸­ï¼Œæœ‰ä¸€ä¸ªå˜é‡:</span><br><span class="line">        public void lock()&#123;</span><br><span class="line">            sync.lock();</span><br><span class="line">            /**</span><br><span class="line">            sync.lock();<span class="comment">--&gt;</span></span><br><span class="line">            <span class="keyword">abstract</span> static class Sync extends AbstractQueueSynchronizer&#123;</span><br><span class="line">                <span class="keyword">abstract</span> void lock();</span><br><span class="line">            &#125;<span class="comment">---&gt;</span></span><br><span class="line">            static final class FairSync extends Sync&#123;</span><br><span class="line">                final void lock()&#123;</span><br><span class="line">                    acquire(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="comment">-----&gt;</span></span><br><span class="line">            public final void acquire(int arg)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!tryAcquire(arg)&amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE),arg))</span><br><span class="line">                selfInterrupt();</span><br><span class="line">            &#125;<span class="comment">----&gt;</span></span><br><span class="line">            //<span class="keyword">protected</span> boolean tryAcquire(int arg)&#123;</span><br><span class="line">            //    throw <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">            //&#125;</span><br><span class="line">            <span class="keyword">protected</span> final boolean tryAcquire(int acquires)&#123;</span><br><span class="line">                final Thread current = Thread.currentThread();</span><br><span class="line">                int c = getState();</span><br><span class="line">                <span class="keyword">if</span>(c==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!hasQueuedPredecessors() &amp;&amp;</span><br><span class="line">                        //compareAndSetState CASæ“ä½œ</span><br><span class="line">                        //å³å°†getState()<span class="comment">---&gt;private volatile int state;å½“ä¸­çš„stateå˜é‡ï¼Œå¦‚æœå–å€¼ä¸º0åˆ™æ”¹ä¸º1ï¼›</span></span><br><span class="line">                        compareAndSetState(<span class="number">0</span>,acquires))&#123;</span><br><span class="line">                            setExclusiveOwnerThread(current);</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(current == getExclusiveOwnerThread())&#123;</span><br><span class="line">                    int nextc = c+ acquires;</span><br><span class="line">                    <span class="keyword">if</span>(nextc &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                        throw <span class="keyword">new</span> Error(<span class="string">"Maximum lock count exceeded"</span>);</span><br><span class="line">                    setState(nextc);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            */</span><br><span class="line">        &#125;</span><br><span class="line">        */</span><br><span class="line"></span><br><span class="line">        //æ•´ä¸ªreentrantLockä»£ç reentrantLock.lock()è¯¥è¡Œä»£ç çš„æœ¬è´¨æ„ä¹‰å³ä¸ºå»æ”¹å˜reentrantLockå¯¹è±¡å½“ä¸­çš„ä¸€ä¸ªå±æ€§å«åšstateï¼›å°†å…¶æ”¹æˆ<span class="number">1</span>ï¼›å¦‚æœèƒ½å¤Ÿä¿®æ”¹å±æ€§å–å€¼ä¸º<span class="number">1</span>æˆåŠŸè¯´æ˜ä¸Šé”æˆåŠŸï¼›å¦‚æœæ²¡æœ‰ä¿®æ”¹å±æ€§å–å€¼ä¸º<span class="number">1</span>æˆåŠŸåˆ™ä¸Šé”å¤±è´¥</span><br><span class="line">        //æ‰€ä»¥è¯´ç»™è¯¥å¯¹è±¡reentrantLockåŠ é”ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡reentrantLockå½“ä¸­å°±éœ€è¦æœ‰ä¸€ä¸ªæ ‡è¯†ï¼Œæ ‡è¯†å­˜åœ¨çš„å«ä¹‰å³æ˜¯å¦åŠ é”æˆåŠŸï¼›</span><br><span class="line">        reentrantLock.lock();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"zzzzzz"</span>);</span><br><span class="line">        reentrantLock.unlock();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span>(l)&#123;</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"xxxx"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è§‚çœ‹ç¬”è®°: &lt;a href=&quot;https://www.bilibili.com/video/BV1dE411r7iy?from=search&amp;amp;seid=2860602863323633916&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https
      
    
    </summary>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
      <category term="é¢è¯•" scheme="https://fengshana.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="é”" scheme="https://fengshana.github.io/tags/%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>å…¨é¢æ·±å…¥è®²è§£MySQLæ•°æ®åº“ä¼˜åŒ–</title>
    <link href="https://fengshana.github.io/2020/04/24/%E9%9D%A2%E8%AF%95/%E3%80%90MYSQL%E3%80%91%E5%85%A8%E9%9D%A2%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"/>
    <id>https://fengshana.github.io/2020/04/24/%E9%9D%A2%E8%AF%95/%E3%80%90MYSQL%E3%80%91%E5%85%A8%E9%9D%A2%E6%B7%B1%E5%85%A5%E8%AE%B2%E8%A7%A3MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/</id>
    <published>2020-04-24T02:40:04.420Z</published>
    <updated>2020-05-18T17:31:47.062Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è§‚çœ‹ç¬”è®°ï¼š<a href="https://www.bilibili.com/video/BV1fJ41127Rj?from=search&amp;seid=13531213796559959972" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1fJ41127Rj?from=search&amp;seid=13531213796559959972</a>  </p><p>æœ¬è¯¾ç¨‹ä½œä¸ºMySQLé«˜çº§è¯¾ç¨‹ï¼Œä¸»è¦è®²è§£äº†ï¼š  </p><ul><li>MySQLä¸­çš„è§†å›¾/å­˜å‚¨è¿‡ç¨‹/è§¦å‘å™¨/ç´¢å¼•ç­‰å¯¹è±¡çš„ä½¿ç”¨</li><li>å¸¸è§çš„SQLè¯­å¥ä¼˜åŒ–çš„æŠ€å·§</li><li>åº”ç”¨ä¼˜åŒ–</li><li>æ•°æ®åº“ä¼˜åŒ–</li><li>æ•°æ®åº“æ—¥å¿—</li></ul><p>ç­‰æ–¹é¢çš„çŸ¥è¯†ï¼Œå¹¶é€šè¿‡ç»¼åˆæ¡ˆä¾‹ï¼Œå¯¹è¯¾ç¨‹ä¸­çš„çŸ¥è¯†è¿›è¡Œä¸€ä¸ªæ•´åˆåº”ç”¨ã€‚  </p><p>æœ¬è¯¾ç¨‹æ—¨åœ¨é€šè¿‡MySQlé«˜çº§éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥åœ¨æ»¡è¶³ç°æœ‰ä¸šåŠ¡éœ€æ±‚åŸºç¡€ä¸Šï¼Œå¯¹MySQLåº•å±‚çš„ä½“ç³»ç»“æ„ï¼ŒåŠåº•å±‚çš„ä¼˜åŒ–æœ‰ä¸€ä¸ªæ·±å…¥çš„ç†è§£ï¼Œå¯¹ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½è¿›è¡Œæå‡ã€‚  </p><h2 id="è¯¾ç¨‹å†…å®¹ä»‹ç»"><a href="#è¯¾ç¨‹å†…å®¹ä»‹ç»" class="headerlink" title="è¯¾ç¨‹å†…å®¹ä»‹ç»"></a>è¯¾ç¨‹å†…å®¹ä»‹ç»</h2><blockquote><p>Mysqlé«˜çº§-day01</p></blockquote><p>MySQLé«˜çº§è¯¾ç¨‹ç®€ä»‹</p><ol><li>Linuxç³»ç»Ÿå®‰è£…MySQL</li><li>ç´¢å¼•</li><li>è§†å›¾</li><li>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</li><li>è§¦å‘å™¨</li></ol><h3 id="MySQLé«˜çº§è¯¾ç¨‹ç®€ä»‹"><a href="#MySQLé«˜çº§è¯¾ç¨‹ç®€ä»‹" class="headerlink" title="MySQLé«˜çº§è¯¾ç¨‹ç®€ä»‹"></a>MySQLé«˜çº§è¯¾ç¨‹ç®€ä»‹</h3><table>    <tr>      <th>åºå·</th>      <th>Day01</th>      <th>Day02</th>      <th>Day03</th>      <th>Day04</th>    </tr>    <tr>      <td>1</td>      <td>Linuxç³»ç»Ÿå®‰è£…MySQL</td>      <td>ä½“ç³»ç»“æ„</td>      <td>åº”ç”¨ä¼˜åŒ–</td>      <td>MySQLå¸¸ç”¨å·¥å…·</td>    </tr>    <tr>      <td>2</td>      <td>ç´¢å¼•</td>      <td>å­˜å‚¨å¼•æ“</td>      <td>æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–</td>      <td>MySQLæ—¥å¿—</td>    </tr>    <tr>      <td>3</td>      <td>è§†å›¾</td>      <td>ä¼˜åŒ–SQLæ­¥éª¤</td>      <td>å†…å­˜ç®¡ç†åŠä¼˜åŒ–</td>      <td>MySQlä¸»ä»å¤åˆ¶</td>    </tr>    <tr>      <td>4</td>      <td>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</td>      <td>ç´¢å¼•ä½¿ç”¨</td>      <td>MySQLé”é—®é¢˜</td>      <td>ç»¼åˆæ¡ˆä¾‹</td>    </tr>    <tr>      <td>5</td>      <td>è§¦å‘å™¨</td>      <td>SQLä¼˜åŒ–</td>      <td>å¸¸ç”¨SQLæŠ€å·§</td>      <td></td>    </tr></table><h2 id="Linuxä¸Šå®‰è£…MySQL"><a href="#Linuxä¸Šå®‰è£…MySQL" class="headerlink" title="Linuxä¸Šå®‰è£…MySQL"></a>Linuxä¸Šå®‰è£…MySQL</h2><h3 id="ä¸‹è½½Linuxå®‰è£…åŒ…"><a href="#ä¸‹è½½Linuxå®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½Linuxå®‰è£…åŒ…"></a>ä¸‹è½½Linuxå®‰è£…åŒ…</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/dev.mysql.com/downloads</span><span class="regexp">/mysql/</span><span class="number">5.7</span>.html<span class="comment">#downloads</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h3><ol><li>å¸è½½centosä¸­é¢„å®‰è£…çš„mysql</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep -i mysql # æŸ¥è¯¢æœåŠ¡å™¨å½“ä¸­mysqlçš„å®‰è£…åŒ…æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ˜¾ç¤ºå‡ºå­˜åœ¨å®‰è£…åŒ…çš„åç§°</span><br><span class="line"></span><br><span class="line">rpm -e mysql-libs<span class="number">-5.1</span><span class="number">.71</span><span class="number">-1.e16</span>.x86_64 --nodeps # å¯¹å·²å­˜åœ¨çš„å®‰è£…åŒ…(mysql-libs<span class="number">-5.1</span><span class="number">.71</span><span class="number">-1.e16</span>.x86_64)è¿›è¡Œå¸è½½</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸Šä¼ mysqlçš„å®‰è£…åŒ…</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alt + p -------&gt;put E:/tset/MySQL<span class="number">-5.6</span><span class="number">.22</span><span class="number">-1.e16</span>.i686.rpm-bundle.tarï¼ˆMySQLå®‰è£…åŒ…çš„ç›®å½•ï¼‰</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨SecureCRTè¿œç¨‹è¿æ¥æœåŠ¡å™¨å·¥å…·ï¼Œalt+på‘½ä»¤è¿›å…¥sftpæ¨¡å¼ï¼›å†æ‰§è¡Œput ï¼ˆMySQLå®‰è£…åŒ…çš„ç›®å½•ï¼‰[ ä¸Šä¼  ]</span><br></pre></td></tr></table></figure><ol start="3"><li>è§£å‹mysqlçš„å®‰è£…åŒ…</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir mysql</span><br><span class="line"></span><br><span class="line">tar -xvf MySQL-<span class="number">5.6</span>.<span class="number">22</span>-<span class="number">1</span><span class="selector-class">.e16</span><span class="selector-class">.i686</span><span class="selector-class">.rpm-bundle</span><span class="selector-class">.tar</span> -c /root/mysql</span><br></pre></td></tr></table></figure><ol start="4"><li>å®‰è£…ä¾èµ–åŒ…</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…ç¬¬ä¸‰æ–¹çš„ä¾èµ–åº“ï¼›yum -y åœ¨çº¿å®‰è£…éœ€è¿æ¥ç½‘ç»œ</span><br><span class="line">yum -y install libaio.so<span class="number">.1</span> libgc_s.so<span class="number">.1</span> libstdc++.so<span class="number">.6</span> libncurses.so<span class="number">.5</span> --setopt=protected_multilib=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">yum update listdc++<span class="number">-4.4</span><span class="number">.7</span><span class="number">-4.e16</span>.x86_64 # æ›´æ–°ç¬¬ä¸‰æ–¹ç±»åŒ…</span><br></pre></td></tr></table></figure><ol start="5"><li>å®‰è£…mysql-client</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">MySQL-client-5</span><span class="selector-class">.6</span><span class="selector-class">.22-1</span><span class="selector-class">.e16</span><span class="selector-class">.i686</span><span class="selector-class">.rpm</span></span><br></pre></td></tr></table></figure><ol start="6"><li>å®‰è£…mysql-server</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rpm</span> <span class="selector-tag">-ivh</span> <span class="selector-tag">MySQL-server-5</span><span class="selector-class">.6</span><span class="selector-class">.22-1</span><span class="selector-class">.e16</span><span class="selector-class">.i686</span><span class="selector-class">.rpm</span></span><br></pre></td></tr></table></figure><blockquote><p>Linux</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ipconfig</span> <span class="comment"># æŸ¥çœ‹æœ¬æœºipåœ°å€ï¼Œå†…ç½‘åœ°å€</span></span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨åŠç™»å½•MySQL"><a href="#å¯åŠ¨åŠç™»å½•MySQL" class="headerlink" title="å¯åŠ¨åŠç™»å½•MySQL"></a>å¯åŠ¨åŠç™»å½•MySQL</h2><blockquote><p>å¯åŠ¨mysqlå‘½ä»¤</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysql status # æŸ¥çœ‹mysqlæœåŠ¡çŠ¶æ€</span><br><span class="line">service mysql start # å¯åŠ¨mysqlæœåŠ¡</span><br><span class="line">service mysql stop # åœæ­¢mysqlæœåŠ¡</span><br></pre></td></tr></table></figure><blockquote><p>ç™»å½•mysql</p></blockquote><p>mysql å®‰è£…å®Œæˆä¹‹åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºå¯†ç ï¼Œå¹¶ä¸”ä¿å­˜åœ¨ä¸€ä¸ªå¯†ç æ–‡ä»¶ä¸­ï¼š/root/.mysql_secretï¼›  </p><blockquote><p>æŸ¥çœ‹éšæœºå¯†ç </p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/root/</span>.mysql_secret</span><br></pre></td></tr></table></figure><blockquote><p>ç™»å½•å‘½ä»¤</p></blockquote><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"><span class="meta"># -u æŒ‡çš„æ˜¯ç”¨æˆ·</span></span><br><span class="line"><span class="meta"># -p æŒ‡çš„æ˜¯è¯¥ç”¨æˆ·æ‰€å¯¹åº”çš„å¯†ç </span></span><br></pre></td></tr></table></figure><blockquote><p>ç™»å½•ä¹‹åï¼Œä¿®æ”¹å¯†ç å‘½ä»¤</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span> = <span class="keyword">password</span>(<span class="string">'itcast'</span>);</span><br><span class="line"><span class="comment"># itcastå³æ˜æ–‡å¯†ç </span></span><br></pre></td></tr></table></figure><blockquote><p>æˆæƒè¿œç¨‹è®¿é—®</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'root'</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'itcast'</span>;</span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure><blockquote><p>é˜²ç«å¢™</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables status # æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span><br><span class="line">service iptables stop # å…³é—­é˜²ç«å¢™</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•-æ¦‚è¿°"><a href="#ç´¢å¼•-æ¦‚è¿°" class="headerlink" title="ç´¢å¼• - æ¦‚è¿°"></a>ç´¢å¼• - æ¦‚è¿°</h2><p>MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼š  </p><p>ç´¢å¼•ï¼ˆindexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰ã€‚<br>åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚<br>å¦‚ä¸‹é¢çš„ç¤ºæ„å›¾æ‰€ç¤ºï¼š  </p><p>å·¦è¾¹æ˜¯æ•°æ®åº“ï¼Œä¸€å…±æœ‰ä¸¤åˆ—ä¸ƒæ¡è®°å½•ï¼Œæœ€å·¦è¾¹çš„æ˜¯æ•°æ®è®°å½•çš„ç‰©ç†åœ°å€ï¼ˆæ³¨æ„é€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•åœ¨ç£ç›˜ä¸Šä¹Ÿä¸æ˜¯ä¸€å®šç‰©ç†ç›¸é‚»çš„ï¼‰ã€‚  </p><p>ä¸ºäº†åŠ å¿«Col2çš„æŸ¥æ‰¾ï¼Œå¯ä»¥ç»´æŠ¤å³è¾¹æ‰€ç¤ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹åˆ†åˆ«åŒ…å«ç´¢å¼•é”®å€¼å’Œä¸€ä¸ªæŒ‡å‘å¯¹åº”æ•°æ®è®°å½•ç‰©ç†åœ°å€çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥è¿ç”¨äºŒå‰æŸ¥æ‰¾å¿«é€Ÿåå»åˆ°ç›¸åº”æ•°æ®ã€‚  </p><p>ä¸€èˆ¬æ¥è¯´ç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ç”¨æ¥æä¾›æ€§èƒ½çš„æœ€å¸¸ç”¨çš„å·¥å…·ã€‚  </p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mspaint</span> <span class="comment"># windowsæ‰“å¼€ç”»æ¿</span></span><br></pre></td></tr></table></figure><table>  <tr>    <td>ç‰©ç†åœ°å€</td>    <td>Col1</td>    <td>Col2</td>  </tr>  <tr>    <td>0x07</td>    <td>1</td>    <td>34</td>  </tr>  <tr>    <td>0x56</td>    <td>2</td>    <td>77</td>  </tr>  <tr>    <td>0x6A</td>    <td>3</td>    <td>5</td>  </tr>  <tr>    <td>0xF3</td>    <td>4</td>    <td>91</td>  </tr>  <tr>    <td>0x90</td>    <td>5</td>    <td>22</td>  </tr>  <tr>    <td>0x77</td>    <td>6</td>    <td>59</td>  </tr>  <tr>    <td>0xD1</td>    <td>7</td>    <td>3</td>  </tr></table><p>å½“å‰è¯¥ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼›åœ¨æ•°æ®åº“è¡¨çš„å·¦ä¾§å±•ç¤ºçš„æ˜¯æ¯ä¸€æ¡è®°å½•çš„ä¸€ä¸ªç‰©ç†åœ°å€ï¼›å³ä¾§åˆ™æ˜¯ä¸¤åˆ—ï¼›ä¸€åˆ—å­—æ®µCol1æ˜¯åºå·ï¼›Col2å­—æ®µæ•°æ®å¯ä»¥è®¤ä¸ºå°±æ˜¯ä¸»é”®æ•°æ®ï¼›æ•°æ®åº“è¡¨ç»“æ„æœ‰äº†ï¼Œæ¥ä¸‹æ¥æŸ¥è¯¢æ•°æ®ï¼›  </p><p>ï¼ˆ1ï¼‰ç¬¬ä¸€ç§æƒ…å†µï¼šæŸ¥è¯¢ä¸»é”®Col2ä¸º34çš„æ•°æ®ï¼›å› ä¸ºè¿™ä¸ªæ—¶å€™åªå­˜åœ¨è¡¨ï¼Œæ²¡æœ‰è®¾ç½®ç´¢å¼•è¿™äº›æ–¹ä¾¿æŸ¥è¯¢çš„æ•°æ®ç»“æ„ï¼›æ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±ä¼šåœ¨è¡¨å½“ä¸­è‡ªä¸Šè€Œä¸‹çš„è¿›è¡Œéå†ï¼›è¿™ä¸ªæ—¶å€™å°±ä¼šå»éå†åˆ°ç¬¬ä¸€ä¸ªï¼Œå‘ç°ç¬¬ä¸€ä¸ªçš„ä¸»é”®idï¼ŒCol2çš„å€¼å°±æ˜¯34ï¼›æ­¤æ—¶å³æ‹¿åˆ°æ•°æ®ï¼›è¿™æ ·çš„è¯åªéœ€è¦æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼›è€Œä¸”æŸ¥è¯¢ç¬¬ä¸€æ¡è®°å½•å°±æ˜¯ï¼Œé‚£ä¹ˆè¿™æ ·çš„è¯æŸ¥è¯¢é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼›è¿™åªæ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼›  </p><p>ï¼ˆ2ï¼‰ç¬¬äºŒç§æƒ…å†µï¼šæŸ¥è¯¢ä¸»é”®Col2 idä¸º91çš„è®°å½•è¡Œæ•°æ®ï¼›é‚£ä¹ˆè¿˜æ˜¯éœ€è¦è‡ªä¸Šè€Œä¸‹ä»idä¸º34çš„è®°å½•è¡Œæ•°æ®å¼€å§‹éå†ï¼›é‚£ä¹ˆç¬¬ä¸€æ¡è®°å½•ä¸æ˜¯ï¼›ç¬¬äºŒæ¡è®°å½•ä¸æ˜¯ï¼›ç¬¬ä¸‰æ¡è®°å½•ä¹Ÿä¸æ˜¯ï¼›ç›´åˆ°ç¬¬å››æ¡è®°å½•çš„æ—¶å€™å‘ç°æ•°æ®è¡Œidæ˜¯91ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä¹Ÿå°±æ˜¯éœ€è¦å»éå†åˆ—è¡¨4æ¬¡ï¼ŒæŸ¥è¯¢4æ¬¡æ‰èƒ½å¤Ÿå¾—åˆ°ç»“æœï¼›  </p><p>ï¼ˆ3ï¼‰ç¬¬ä¸‰ç§æƒ…å†µï¼šæŸ¥è¯¢ä¸»é”®Col2 idä¸º3çš„è®°å½•è¡Œæ•°æ®ï¼›è¿™ä¸ªæ—¶å€™å†æ¥çœ‹ï¼Œå¦‚æœè¯´éå†æŸ¥è¯¢çš„å…ƒç´ idæ˜¯3ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä¾ç„¶æ˜¯ä»ä¸Šå¾€ä¸‹è¿›è¡Œéå†ï¼Œä¸€ç›´éå†åˆ°åˆ—è¡¨çš„æœ€åº•éƒ¨ï¼›æ‰èƒ½å°†3æŸ¥æ‰¾å‡ºæ¥ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±ç›¸å½“äºéœ€è¦è¿›è¡Œä¸€ä¸ªå…¨è¡¨æ‰«æçš„è¿™æ ·ä¸€ä¸ªæ“ä½œï¼›å¯¹äºå½“å‰è¯¥è¡¨å½“ä¸­åªæœ‰6ã€7æ¡æ•°æ®ï¼›ä½†æ˜¯å¦‚æœåœ¨å®é™…å¼€å‘å½“ä¸­æ•°æ®é‡æ¯”è¾ƒå¤§ï¼›ä¸€å¼ è¡¨å½“ä¸­å­˜å‚¨äº†å‡ ç™¾ä¸‡ä¸Šåƒä¸‡çš„è®°å½•ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¦‚æœåªæœ‰è¡¨ä¸­çš„è®°å½•ï¼Œè€Œæ²¡æœ‰ç´¢å¼•çš„è¯ï¼›è¿™ä¸ªæ—¶å€™å°±ä¼šé€ æˆä¸€ç§ç°è±¡ï¼Œåœ¨æŸ¥æ‰¾çš„æ—¶å€™ä»ä¸Šå¾€ä¸‹è¿›è¡Œæ•´è¡¨æ‰«æï¼Œæ‰€ä»¥è¿™ç§æŸ¥è¯¢æ•ˆç‡æ˜¯éå¸¸æ…¢çš„ï¼›  </p><p>ä»¥ä¸Šå°±æ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼Œå³æ²¡æœ‰å»ºç«‹ç´¢å¼•çš„æƒ…å†µï¼›æŸ¥è¯¢æ•ˆç‡å¾ˆæ…¢ï¼›  </p><p>ä¸‹é¢åˆ†ææœ‰äº†ç´¢å¼•ä¹‹åï¼Œåˆæ˜¯å¦‚ä½•è¿›è¡ŒæŸ¥æ‰¾çš„ï¼›<br>æ­¤æ—¶æœ‰äº†è¡¨ç»“æ„è¿˜éœ€è¦å¯¹è¡¨ç»“æ„å½“ä¸­çš„å­—æ®µè¿›è¡Œå»ºç«‹ç´¢å¼•ï¼›ç´¢å¼•å°±æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼›é‚£ä¹ˆæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨æ•°æ®ç»“æ„æ¥è¡¨ç¤ºè¿™ç§è¡¨å½“ä¸­çš„ç´¢å¼•ï¼›è¿™é‡Œä½¿ç”¨ä¸€ç§æ•°æ®ç»“æ„äºŒå‰æ ‘ï¼›  </p><p>æ—¢ç„¶æ˜¯äºŒå‰æ ‘ï¼›é‚£ä¹ˆäºŒå‰æ ‘å½“ä¸­çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯34ï¼›å³æ ¹èŠ‚ç‚¹ï¼›34å³ä½œä¸ºå½“å‰è¯¥æ ‘çŠ¶ç»“æ„çš„æ ¹ç»“ç‚¹ï¼›<br>æ¥ä¸‹æ¥ç¬¬äºŒè¡Œè®°å½•æ˜¯77ï¼›å¯¹äºäºŒå‰æ ‘æ¥è¯´ï¼ŒäºŒå‰æ ‘æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼›å³å½“æ ¹ç»“ç‚¹å·²ç»å­˜åœ¨çš„æ—¶å€™ï¼Œå†æ’å…¥ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼›åˆ™éœ€è¦å°†ä¸‹ä¸€ä¸ªç»“ç‚¹çš„æ•°å€¼ä¸æ ¹ç»“ç‚¹çš„æ•°å€¼è¿›è¡Œæ¯”è¾ƒå¤§å°ï¼›å¦‚æœæ¯”æ ¹ç»“ç‚¹å°åˆ™æ”¾åœ¨å·¦è¾¹ï¼Œç§°ä¹‹ä¸ºç”Ÿæˆä¸€ä¸ªå·¦å­æ ‘ï¼›å¦‚æœæ¯”æ ¹ç»“ç‚¹å¤§åˆ™æ”¾åœ¨å³è¾¹ï¼Œç§°ä¹‹ä¸ºç”Ÿæˆä¸€ä¸ªå³å­æ ‘ï¼Œä½œä¸ºå³å­æ ‘å­˜åœ¨ï¼›è¿™ä¸ªæ—¶å€™77æ˜¯æ¯”34è¦å¤§çš„ï¼Œæ‰€ä»¥æ”¾åœ¨34çš„å³è¾¹ï¼Œå³77ä¸º34æ ¹ç»“ç‚¹çš„ä¸€ä¸ªå­èŠ‚ç‚¹ï¼›<br>æ¥ä¸‹æ¥ç¬¬ä¸‰è¡Œæ˜¯5ï¼Œéœ€è¦å¯¹5ä¹Ÿè¦è¿›è¡Œæ’å…¥åˆ°äºŒå‰æ ‘è¯¥æ•°æ®ç»“æ„å½“ä¸­ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œä¸34æ ¹ç»“ç‚¹è¿›è¡Œæ¯”è¾ƒçš„ï¼›æ­¤æ—¶5æ¯”34è¦å°ï¼›é‚£ä¹ˆåˆ™æ”¾åœ¨æ ¹ç»“ç‚¹34çš„å·¦è¾¹ï¼Œæ‰€ä»¥æ­¤æ—¶34æ ¹ç»“ç‚¹åˆæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹5ï¼›<br>å½“5æ’å…¥åˆ°äºŒå‰æ ‘ç»“æ„å½“ä¸­ä¹‹åï¼Œæ¥ç€ä¸‹ä¸€è¡Œè®°å½•91ï¼›åˆ™é¦–å…ˆå°†91ä¸34æ ¹ç»“ç‚¹è¿›è¡Œæ¯”è¾ƒå¤§å°ï¼›æ˜¾ç„¶91æ¯”34è¦å¤§ï¼Œåˆ™å¤„äºæ ¹ç»“ç‚¹34çš„å³è¾¹ï¼›å½“å‰ä½¿ç”¨çš„æ˜¯äºŒå‰æ ‘çš„è¿™ç§æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸€ä¸ªç»“ç‚¹æœ€å¤šéƒ½åªèƒ½æœ‰2ä¸ªåˆ†æ”¯ï¼›æ‰€ä»¥ç§°ä¹‹ä¸ºäºŒå‰æ ‘ï¼›æ‰€ä»¥å½“æ­¤æ—¶34æ ¹ç»“ç‚¹å·²ç»æœ‰äº†ä¸¤ä¸ªåˆ†æ”¯ä¹‹åï¼Œé‚£ä¹ˆæ­¤æ—¶91æ¯”34å¤§ï¼Œä½†æ˜¯34çš„å³è¾¹å·²ç»æœ‰å…ƒç´ 77äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™91å°±éœ€è¦å»å’Œ77å»è¿›è¡Œæ¯”è¾ƒï¼›77ä¸91è¿›è¡Œæ¯”è¾ƒï¼Œ91æ˜¾ç„¶è¦å¤§ï¼Œæ‰€ä»¥æ”¾åœ¨77çš„å³ä¾§ï¼Œä½œä¸º77çš„ä¸€ä¸ªå³å­èŠ‚ç‚¹å­˜åœ¨ï¼›<br>æ¥ä¸‹æ¥æ˜¯ç¬¬5è¡Œè®°å½•æ•°æ®é›†22ï¼›22æ¯”34å°ï¼Œæ˜¾ç„¶è¦æ”¾åœ¨æ ¹ç»“ç‚¹çš„å·¦ä¾§ï¼›ä½†æ˜¯æ ¹ç»“ç‚¹çš„å·¦ä¾§å·²ç»æœ‰å·¦å­èŠ‚ç‚¹ä¹Ÿå°±æ˜¯5ï¼›é‚£ä¹ˆæ­¤æ—¶22å°±å»ä¸5è¿›è¡Œæ¯”è¾ƒï¼Œæ˜¾ç„¶22æ¯”5å¤§ï¼›ä¹Ÿå°±æ”¾åœ¨5çš„å³è¾¹ï¼›ç§°ä¸º5çš„å³å­ç»“ç‚¹ï¼›<br>æœ€åè¿˜å‰©ä¸‹æœ€åä¸¤æ¡è®°å½•ï¼Œä¸€ä¸ªæ˜¯59ä¸€ä¸ªæ˜¯3ï¼›å¿«é€Ÿè¿‡ä¸€ä¸‹ï¼›59é¦–å…ˆå’Œ34è¿™ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼›æ˜¾ç„¶59æ¯”34å¤§éœ€è¦æ”¾åœ¨34çš„å³ä¾§ï¼›ç„¶34å·²ç»æœ‰å³å­ç»“ç‚¹77äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™59å’Œ77è¿›è¡Œæ¯”è¾ƒï¼›æ˜¾ç„¶77å¤§äº59ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å°†59æ”¾ç½®åœ¨77çš„å·¦ä¾§ï¼Œå¶å­ç»“ç‚¹91çš„å·¦è¾¹ï¼Œæˆä¸º77çš„å·¦å­èŠ‚ç‚¹ï¼›åŒç†æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ3ä¹Ÿæ˜¯åŒæ ·çš„æ–¹å¼ï¼›3ä¸34è¿›è¡Œæ¯”è¾ƒï¼›æ˜¾ç„¶3æ¯”34è¦å°ï¼›ç„¶æ­¤æ—¶34æ˜¯å­˜åœ¨æœ‰å·¦å­èŠ‚ç‚¹5çš„ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å°†3ä¸5è¿›è¡Œæ¯”è¾ƒï¼›æ˜¾ç„¶3æ¯”5è¦å°ï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼›å°±æŠŠ3æ”¾åœ¨5çš„å·¦ä¾§ï¼›æˆä¸º5çš„å·¦å­èŠ‚ç‚¹ï¼Œå¶å­ç»“ç‚¹22çš„å·¦ä¾§ï¼›<br>æ­¤æ—¶åˆ°æ­¤ä¸ºæ­¢äºŒå‰æ ‘å·²ç»æ„å»ºå®Œæ¯•ï¼›äºŒå‰æ ‘æ„å»ºå®Œæ¯•ä¹‹åå†æ¥è¿›è¡Œåˆ†æï¼›æ„å»ºäº†ä¸€æ£µäºŒå‰æ ‘ä¹‹åå°±èƒ½å¤Ÿæé«˜æŸ¥è¯¢æ•ˆç‡å—ï¼Ÿ<br>ï¼ˆæˆ‘è®¤ä¸ºï¼›åœ¨äºŒå‰æ ‘ä¸€å®šçš„æ·±åº¦ä¸‹ï¼ŒäºŒå‰æ ‘ä¾ç„¶ä¼šå­˜åœ¨æŸ¥è¯¢æ•ˆç‡æ…¢çš„æƒ…å†µï¼›ï¼‰<br>äºŒå‰æ ‘æ„å»ºå¥½äº†ä¹‹åï¼Œå†æ¥è¿›è¡Œæœç´¢ï¼›å¦‚æœæŒ‰ç…§åˆšæ‰çš„æŸ¥è¯¢æƒ…å†µï¼›å…ˆè¿›è¡Œæœç´¢34è¿™ä¸€æ•°å€¼ï¼›æœç´¢äºŒå‰æ ‘ï¼›é‚£ä¹ˆå°±éœ€è¦åˆ°ç´¢å¼•çš„ç»“æ„äºŒå‰æ ‘çš„æ•°æ®ç»“æ„å½“ä¸­æ¥è¿›è¡Œæœç´¢ï¼›åœ¨è¿›è¡ŒäºŒå‰æ ‘æœç´¢çš„æ—¶å€™ï¼Œæ˜¯ä»æ ¹ç»“ç‚¹å¤„å¼€å§‹è¿›è¡ŒæŸ¥è¯¢åŒ¹é…æ•°å€¼ï¼›å³æ ‘çŠ¶ç»“æ„å½“ä¸­æœ€é¡¶å±‚çš„è¿™ä¸€èŠ‚ç‚¹å³ä¸ºæ ¹ç»“ç‚¹ï¼›æœ€åº•å±‚çš„ç»“ç‚¹ï¼Œå³3ã€22ã€59ã€91è¿™å››ä¸ªç»“ç‚¹ç§°ä¹‹ä¸ºå¶å­ç»“ç‚¹ï¼›é‚£ä¹ˆäºŒå‰æ ‘çš„æœç´¢æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹è¿›è¡Œæœç´¢çš„ï¼›èµ°æ ¹ç»“ç‚¹34ï¼›è¿™ä¸ªæ—¶å€™å°±å·²ç»å°†34æŸ¥è¯¢åˆ°äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç›´æ¥è¿›è¡Œè¿”å›å³å¯ï¼›ä½†æ˜¯å¦‚æœè¿™ä¸€å—å½“ä¸­æŸ¥è¯¢çš„å¹¶ä¸æ˜¯34è€Œæ˜¯3ï¼›é‚£ä¹ˆæ­¤æ—¶ä»ç„¶å…ˆä¼šå»æœç´¢æ ¹ç»“ç‚¹34ï¼Œå°†è¦æŸ¥è¯¢æœç´¢çš„å€¼3å»ä¸æ ¹èŠ‚ç‚¹34è¿›è¡Œæ¯”è¾ƒï¼›å‘ç°3æ¯”æ ¹ç»“ç‚¹è¦å°ï¼›æ‰€ä»¥æ­¤æ—¶å°±ä¼šå»æ ¹ç»“ç‚¹çš„å·¦ä¾§ï¼Œå³å·¦å­æ ‘å½“ä¸­å»è¿›è¡ŒæŸ¥æ‰¾3ï¼›äºŒå‰æ ‘å½“ä¸­æ ¹ç»“ç‚¹çš„å·¦è¾¹çš„ç§°ä¹‹ä¸ºå·¦å­æ ‘ï¼›å³è¾¹åˆ™ç§°ä¹‹ä¸ºå³å­æ ‘ï¼›é‚£ä¹ˆåœ¨å·¦å­æ ‘å½“ä¸­é€šè¿‡3å»è·Ÿæ ¹ç»“ç‚¹çš„å·¦å­èŠ‚ç‚¹5è¿›è¡Œæ¯”è¾ƒï¼Œé‚£ä¹ˆæ­¤æ—¶5æ¯”3è¦å¤§ï¼›æ‰€ä»¥ç´§æ¥ç€ï¼Œè®©3å»è·Ÿç»“ç‚¹5çš„å·¦å­èŠ‚ç‚¹3å»è¿›è¡Œæ¯”è¾ƒï¼›æ‰€ä»¥åœ¨è¿™ä¸ªæ—¶å€™å°±æ‰¾åˆ°äº†3è¿™ä¸ªå…ƒç´ ï¼›<br>è€Œæ‰¾åˆ°äº†3ä¹‹åï¼ŒäºŒå‰æ ‘çš„è¿™ç§æ•°æ®ç»“æ„æ˜¯å¦‚ä½•å…³è”åˆ°è¡¨å½“ä¸­å…·ä½“è¡Œæ•°å½“ä¸­çš„å…·ä½“æ•°æ®çš„å‘¢ï¼Ÿ<br>è¿™ä¸ªæ—¶å€™å°±éœ€è¦çœ‹ç¬”è®°å½“ä¸­æåˆ°çš„ä¸€å¥è¯ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</span><br></pre></td></tr></table></figure><p>é‚£ä¹Ÿå°±æ„å‘³ç€ï¼ŒäºŒå‰æ ‘è¿™ç§æ•°æ®ç»“æ„å½“ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹éƒ½æ˜¯éœ€è¦æŒ‡å‘å…·ä½“è¡¨å½“ä¸­å…·ä½“è¡Œæ•°çš„å…·ä½“æ•°æ®ï¼›<br>é‚£ä¹ˆä»åˆšæ‰çš„æŸ¥è¯¢è§„å¾‹å½“ä¸­ä»ä¸Šè€Œä¸‹è¿›è¡ŒæŸ¥æ‰¾3ï¼Œåˆ™ä»æ ¹ç»“ç‚¹34åˆ°å·¦å­èŠ‚ç‚¹5ï¼Œå†ä»5åˆ°5çš„å·¦å­èŠ‚ç‚¹3æŸ¥æ‰¾åˆ°äº†3è¿™ä¸€å…ƒç´ çš„æŒ‡å‘/å¼•ç”¨å³å¯æ‰¾åˆ°åœ¨å…·ä½“æŸè¡¨å½“ä¸­çš„å…·ä½“æŸä¸€è¡Œçš„æ•°æ®ï¼›é‚£ä¹ˆè¿™æ ·çš„è¯å°±æŸ¥æ‰¾åˆ°äº†æ•°æ®ï¼›  </p><table>  <tr>    <td>ç‰©ç†åœ°å€</td>    <td>Col1</td>    <td>Col2</td>  </tr>  <tr>    <td>0x07</td>    <td>1</td>    <td>34</td>  </tr>  <tr>    <td>0x56</td>    <td>2</td>    <td>77</td>  </tr>  <tr>    <td>0x6A</td>    <td>3</td>    <td>5</td>  </tr>  <tr>    <td>0xF3</td>    <td>4</td>    <td>91</td>  </tr>  <tr>    <td>0x90</td>    <td>5</td>    <td>22</td>  </tr>  <tr>    <td>0x77</td>    <td>6</td>    <td>59</td>  </tr>  <tr>    <td>0xD1</td>    <td>7</td>    <td>3</td>  </tr></table><blockquote><p>åˆ†æï¼šæ²¡æœ‰å»ºç«‹ç´¢å¼•çš„è¡¨ä¸å»ºç«‹äº†ç´¢å¼•çš„è¡¨å½“ä¸­ï¼Œå»ºç«‹äº†ç´¢å¼•ä¹‹åæ€§èƒ½çš„ä¸€ä¸ªæå‡ï¼›</p></blockquote><ul><li><p>æ²¡æœ‰å»ºç«‹ç´¢å¼•çš„è¡¨ï¼šåœ¨æ²¡æœ‰å»ºç«‹ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯è¦è¿›è¡ŒæŸ¥è¯¢æ•°æ®å…ƒç´ 3ï¼›é‚£ä¹ˆåˆ™éœ€è¦æŠŠæ•´å¼ è¡¨å½“ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦è¿›è¡Œéå†ä¸€éå³å…¨è¡¨æ‰«æï¼Œç›´åˆ°æ‰¾åˆ°3è¿™ä¸ªidæ•°æ®ï¼›  </p></li><li><p>å»ºç«‹äº†ç´¢å¼•çš„è¡¨ï¼šå¦‚æœæ˜¯åœ¨å»ºç«‹äº†ç´¢å¼•çš„è¿™ç§æƒ…å†µä¹‹ä¸‹ï¼›é‚£ä¹ˆåŒæ ·è¿˜æ˜¯æŸ¥æ‰¾å…ƒç´ 3ï¼›åªéœ€è¦æŸ¥æ‰¾ç¬¬ä¸€æ¬¡34ï¼›ç¬¬äºŒæ¬¡5ï¼›ç¬¬ä¸‰æ¬¡3å³å¯ï¼›ä¸‰æ¬¡å³å¯ï¼›é‚£ä¹ˆè¿™æ ·çš„è¯è¿™ä¸ªæ—¶å€™é€šè¿‡ç´¢å¼•ç”±äºŒå‰æ ‘è¿™ç§æ•°æ®ç»“æ„å®ç°çš„è¯å°±ä¸å†éœ€è¦å»éå†æ•´å¼ è¡¨çš„æ•°æ®äº†ï¼›é€šè¿‡äºŒå‰æ ‘è¿™ç§æ•°æ®ç»“æ„å°±å¯ä»¥å¿«é€Ÿçš„å®šä½åˆ°3è¿™ä¸ªæŸ¥è¯¢çš„æ•°æ®å…ƒç´ ï¼›é‚£ä¹ˆè¿™å°±æ˜¯ç´¢å¼•ï¼›ç´¢å¼•çš„ç›®çš„å³åœ¨äºå¿«é€Ÿçš„æ¥æŸ¥æ‰¾æ•°æ®ï¼›  </p></li></ul><h2 id="ç´¢å¼•-ä¼˜åŠ¿å’ŒåŠ£åŠ¿"><a href="#ç´¢å¼•-ä¼˜åŠ¿å’ŒåŠ£åŠ¿" class="headerlink" title="ç´¢å¼• - ä¼˜åŠ¿å’ŒåŠ£åŠ¿"></a>ç´¢å¼• - ä¼˜åŠ¿å’ŒåŠ£åŠ¿</h2><blockquote><p>ä¼˜åŠ¿<br>1ï¼‰ ç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ç´¢å¼•ï¼Œæé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬ï¼›<br>2ï¼‰ é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—ï¼›  </p></blockquote><blockquote><p>åŠ£åŠ¿<br>1ï¼‰å®é™…ä¸Šç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¸­ä¿å­˜äº†ä¸»é”®ä¸ç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“ç±»çš„è®°å½•ï¼Œç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„ï¼›ï¼ˆå¹¶ä¸æ”¾åœ¨å†…å­˜å½“ä¸­è€Œæ˜¯æ”¾åœ¨ç£ç›˜å½“ä¸­ï¼Œç´¢å¼•å ç”¨ç£ç›˜ç©ºé—´ï¼‰<br>2ï¼‰è™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼ŒåŒæ—¶å´ä¹Ÿé™ä½äº†æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡ŒINSERTã€UPDATEã€DELETEï¼ˆéƒ½éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ï¼Œä¹Ÿå°±æ˜¯ç›¸å…³å®ç°è¯¥ç´¢å¼•çš„æ•°æ®ç»“æ„å½“ä¸­å­˜å‚¨çš„æ•°æ®ä¹Ÿè¦è¿›è¡Œå˜åŠ¨ï¼‰ã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQLä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶æ¯æ¬¡æ›´æ–°æ·»åŠ äº†ç´¢å¼•åˆ—çš„å­—æ®µï¼Œéƒ½ä¼šå› ä¸ºæ›´æ–°æ‰€å¸¦æ¥çš„çš„é”®å€¼å˜åŒ–åçš„ç´¢å¼•ä¿¡æ¯ã€‚ï¼ˆæ‰€ä»¥ç´¢å¼•çš„å­—æ®µå¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ä¹Ÿä¼šå½±å“åˆ°æ€§èƒ½ï¼‰  </p></blockquote><h2 id="ç´¢å¼•-ç´¢å¼•ç»“æ„"><a href="#ç´¢å¼•-ç´¢å¼•ç»“æ„" class="headerlink" title="ç´¢å¼• - ç´¢å¼•ç»“æ„"></a>ç´¢å¼• - ç´¢å¼•ç»“æ„</h2><p>ç´¢å¼•æ˜¯åœ¨MySQLçš„å­˜å‚¨å¼•æ“å±‚ä¸­å®ç°çš„ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨å±‚å®ç°çš„ã€‚  </p><p>æ‰€ä»¥æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•éƒ½ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼›ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å­˜å‚¨å¼•æ“éƒ½æ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹ã€‚  </p><p>MySQLç›®å‰æä¾›äº†ä»¥ä¸‹4ä¸­ç´¢å¼•ï¼š  </p><ul><li>BTREEç´¢å¼•ï¼šæœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†ç´¢å¼•éƒ½æ”¯æŒBæ ‘ç´¢å¼•ï¼›</li><li>HASHç´¢å¼•ï¼šåªæœ‰Memoryå¼•æ“æ”¯æŒï¼Œä½¿ç”¨åœºæ™¯ç®€å•ï¼ˆåˆšåˆšçœ‹äº†ä¸‹æˆ‘å½“å‰MySQLæ•°æ®åº“ç°åœ¨InnoDBä¹Ÿæ”¯æŒHASHå“¦ï¼‰ï¼›</li><li>R-treeç´¢å¼•ï¼ˆç©ºé—´ç´¢å¼•ï¼‰ï¼šç©ºé—´ç´¢å¼•æ˜¯MyISAMå¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘ï¼Œä¸åšç‰¹åˆ«ä»‹ç»ï¼›</li><li>Full-textï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰ï¼šå…¨æ–‡ç´¢å¼•ä¹Ÿæ˜¯MyISAMçš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºå…¨æ–‡ç´¢å¼•ï¼ŒInnoDBä»MySQL5.6ç‰ˆæœ¬å¼€å§‹æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼›  </li></ul><p>è¿™ä¸ªç»Ÿè®¡åº”è¯¥ä¹Ÿæœ‰äº›æ—¶å€™äº†ï¼›ä¸æ˜¯ä¸€å®šæ­£ç¡®çš„å“¦ï¼›éœ€è¦ç»“åˆå½“å‰ä¸åŒç‰ˆæœ¬çš„MySQLæ¥è¯´æ˜ï¼›æˆ‘è¿˜æ˜¯è´´ä¸€ä¸‹å§ï¼›  </p><h3 id="MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ"><a href="#MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ" class="headerlink" title="MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ"></a>MyISAMã€InnoDBã€Memoryä¸‰ç§å­˜å‚¨å¼•æ“å¯¹å„ç§ç´¢å¼•ç±»å‹çš„æ”¯æŒ</h3><table>  <tr>    <th>ç´¢å¼•</th>    <th>InnoDBå¼•æ“</th>    <th>MyISAMå¼•æ“</th>    <th>Memoryå¼•æ“</th>  </tr>  <tr>    <td>BTREEç´¢å¼•</td>    <td>æ”¯æŒ</td>    <td>æ”¯æŒ</td>    <td>æ”¯æŒ</td>  </tr>  <tr>    <td>HASHç´¢å¼•</td>    <td>ä¸æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>    <td>æ”¯æŒ</td>  </tr>  <tr>    <td>R-treeç´¢å¼•</td>    <td>ä¸æ”¯æŒ</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>  </tr>  <tr>    <td>Full-textç´¢å¼•</td>    <td>5.6ç‰ˆæœ¬ä¹‹åæ”¯æŒ</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>  </tr></table><p>å¹³å¸¸æ‰€è¯´çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ï¼Œéƒ½æ˜¯æŒ‡B+æ ‘ï¼ˆå¤šè·¯æœç´¢æ ‘ï¼Œå¹¶ä¸ä¸€å®šæ˜¯äºŒå‰çš„ï¼‰ç»“æ„ç»„ç»‡çš„ç´¢å¼•ã€‚<br>å…¶ä¸­èšé›†ç´¢å¼•ã€å¤åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•é»˜è®¤éƒ½æ˜¯ä½¿ç”¨B+treeæ ‘ç´¢å¼•ï¼Œç»Ÿç§°ä¸ºç´¢å¼•ã€‚  </p><h2 id="ç´¢å¼•-ç´¢å¼•ç»“æ„-BTREE"><a href="#ç´¢å¼•-ç´¢å¼•ç»“æ„-BTREE" class="headerlink" title="ç´¢å¼• - ç´¢å¼•ç»“æ„ - BTREE"></a>ç´¢å¼• - ç´¢å¼•ç»“æ„ - BTREE</h2><p>BTreeåˆå«åšå¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼Œä¸€æ£µ m å‰çš„ BTree ç‰¹æ€§å¦‚ä¸‹ï¼š  </p><ul><li>æ ‘ä¸­æ¯ä¸ªç»“ç‚¹æœ€å¤šåŒ…å« m ä¸ªå­©å­ï¼›</li><li>é™¤æ ¹ç»“ç‚¹ä¸å¶å­ç»“ç‚¹å¤–ï¼Œæ¯ä¸ªç»“ç‚¹è‡³å°‘æœ‰[ cell ( m / 2 ) ]ï¼ˆcellå‘ä¸Šå–æ•´ï¼‰ä¸ªå­©å­ï¼›</li><li>è‹¥æ ¹ç»“ç‚¹ä¸æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤ä¸ªå­©å­ï¼›</li><li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼›</li><li>æ¯ä¸ªéå¶å­ç»“ç‚¹ç”± n ä¸ª key ä¸ n + 1 ä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­[ cell ( m / 2 ) -1 ] &lt; = n &lt; =  m - 1</li></ul><p>ï¼ˆå¯¹äºäºŒå‰æ ‘æ¥è¯´ï¼Œæ ‘ä¸­çš„æ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰2ä¸ªåˆ†æ”¯ï¼‰  </p><p>ä»¥5å‰BTreeä¸ºä¾‹ï¼ˆå½“å‰æ ¹ç»“ç‚¹ä¸‹æœ€å¤šæœ‰5ä¸ªåˆ†æ”¯ï¼Œå³æ¯ä¸ªç»“ç‚¹ä¸‹æœ€å¤šåŒ…å«5ä¸ªå­©å­ï¼‰ï¼Œkeyçš„æ•°é‡ï¼šå…¬å¼æ¨å¯¼[ cell ( m / 2 ) - 1 ] &lt; = n &lt; = m-1 ï¼›æ‰€ä»¥ 2 &lt; = n &lt; = 4ã€‚<br>å½“n&gt;4æ—¶ï¼Œä¸­é—´èŠ‚ç‚¹åˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ï¼Œä¸¤è¾¹ç»“ç‚¹åˆ†è£‚ã€‚<br>æ’å…¥ C N G A H E K Q M F W L T Z D P R X Y S æ•°æ®ä¸ºä¾‹ï¼›<br>1ï¼‰æ’å…¥å‰4ä¸ªå­—æ¯C N G Aï¼›  </p><table border="1">  <tr>    <td>A</td>    <td>C</td>    <td>G</td>    <td>N</td>  </tr></table><p>ï¼ˆæŒ‰ç…§26ä¸ªå­—æ¯æ’é˜Ÿé¡ºåºï¼Œå­—æ¯Aåœ¨Cå‰ï¼ŒCæ’åœ¨Gå‰ï¼ŒGæ’åœ¨Nå‰çš„é¡ºåºè¿›è¡Œæ’åˆ—ï¼‰  </p><p>2ï¼‰æ’å…¥H ï¼Œn &gt; 4ï¼Œä¸­é—´å…ƒç´ Gå­—æ¯å‘ä¸Šåˆ†è£‚åˆ°æ–°çš„ç»“ç‚¹ï¼›  </p><table border="1">  <tr>    <td>A</td>    <td>C</td>    <td>G</td>    <td>H</td>    <td>N</td>  </tr></table><p>æ‰€ä»¥æ¼”å˜æˆä¸­é—´å…ƒç´ Gå­—æ¯å‘ä¸Šåˆ†è£‚åˆ°æ–°çš„ç»“ç‚¹ï¼Œå³Gåˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ï¼›</p><table border="1"><tr>     <td colspan="5" style="text-align:center">G</td>  </tr>  <tr>    <td>A</td>    <td>C</td>    <td></td>    <td>H</td>    <td>N</td>  </tr></table><br><table border="1">  <tr>     <td></td>    <td></td>      <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">G</td>     <td></td>     <td></td>    <td></td>  </tr>  <tr>     <td></td>    <td></td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>     <td></td>    <td></td>  </tr>  <tr>    <td colspan="8"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C</td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span> N</td>  </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>æ–°æ’å…¥çš„Hç»“ç‚¹ä¼šåœ¨å…ƒç´ Gä¹‹åï¼Œé‚£ä¹ˆæ’åºä¹Ÿå°±æ˜¯ A C G H N è¿™ä¸ªæ ·å­çš„ä¸€ä¸ªæ’åºï¼›é‚£ä¹ˆæ­¤æ—¶çš„ä¸­é—´çš„ç»“ç‚¹å°±æ˜¯Gå…ƒç´ äº†ï¼›é‚£ä¹ˆæŒ‰ç…§è§„åˆ™ï¼Œå½“n&gt;4æ—¶ï¼Œä¸­é—´èŠ‚ç‚¹åˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹ï¼›æ­¤æ—¶çš„Gå…ƒç´ ç»“ç‚¹å°±å°†ä¼šè¿›è¡Œä¸€æ¬¡åˆ†è£‚ï¼›åˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹ï¼ˆHæ’å…¥è‡³BTreeåˆ™Gåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹ï¼‰ï¼›è€Œæ­¤æ—¶ä¸¤è¾¹ç»“ç‚¹è¿›è¡Œä¸€æ¬¡åˆ†è£‚ï¼›ä¹Ÿå°±æ˜¯åŸæœ¬çš„ä¸­é—´å…ƒç´ ä¸­é—´èŠ‚ç‚¹Gå·¦è¾¹çš„Aã€Cä»¥åŠå³è¾¹çš„ï¼ˆæ–°æ’å…¥çš„ï¼‰Hã€Nå°±å°†ä¼šè¢«åˆ†è£‚æˆçˆ¶èŠ‚ç‚¹Gçš„ä¸¤è¾¹ç»“ç‚¹ï¼›å·¦è¾¹çš„Aã€Cåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹Gçš„å·¦å­èŠ‚ç‚¹ï¼›å³è¾¹çš„Hã€Nåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹Gçš„å³å­ç»“ç‚¹ï¼›  </p><p>æ¥ä¸‹æ¥ç»§ç»­è¿›è¡Œæ’å…¥æ“ä½œï¼›æ’å…¥å…ƒç´ Eï¼›<br>æ’å…¥çš„Eé¦–å…ˆè¿›è¡Œè·Ÿæ ¹ç»“ç‚¹Gè¿›è¡Œæ¯”è¾ƒå‰åé¡ºåºï¼›æ¯”è¾ƒå®Œæˆä¹‹åï¼ŒEåº”è¯¥æ˜¯åœ¨æ ¹ç»“ç‚¹Gçš„æ’ä½åœ¨å‰çš„ï¼›æ‰€ä»¥åº”è¯¥è¢«æ”¾åœ¨æ ¹ç»“ç‚¹Gçš„å·¦ä¾§ï¼›ä¹Ÿå°±æ˜¯ç»“ç‚¹Aã€Cè¯¥ä¾§ï¼ŒAã€Cã€Eè¿™ä¸‰ä¸ªå…ƒç´ ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œæ’å‡ºä¸€ä¸ªé¡ºåºæ¥çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯Aã€Cã€Eè¿™æ ·çš„ä¸€ä¸ªé¡ºåºæ’åˆ—æ”¾ç½®ï¼›æ’å…¥çš„æ˜¯å·¦è¾¹ï¼›ç”±äºå·¦è¾¹å…ƒç´ æœªæ„æˆ5ä¸ªï¼Œæ‰€ä»¥ä¸åšä»»ä½•çš„ï¼ˆåˆ†è£‚ï¼‰å˜åŒ–ç­‰ï¼›  </p><p>æ¥ä¸‹æ¥å†ç»§ç»­æ’å…¥å…ƒç´ Kï¼›<br>åœ¨Kæ’å…¥å…ƒç´ çš„æ—¶å€™å°±éœ€è¦æ‹¿Gä¸Kå…ƒç´ çš„å‰åæ’ä½é¡ºåºè¿›è¡Œæ¯”è¾ƒï¼ŒKçš„æ’ä½é¡ºåºæ¯”Gå¤§ï¼Œæ‰€ä»¥æ’å…¥åˆ°æ ¹ç»“ç‚¹Gçš„å³ä¾§ï¼Œä¹Ÿå°±æ˜¯Hã€Næ‰€åœ¨è¯¥ä¾§ï¼›æ’å…¥çš„æ˜¯å³è¾¹ï¼Œå³æ’å…¥æ—¶ä¹Ÿéœ€è¦ä¸Hã€Nè¿™ä¸¤ä¸ªå…ƒç´ ç›¸è¿›è¡Œæ¯”è¾ƒæ’ä½é¡ºåºï¼Œä¹Ÿå°±æ˜¯Kå…ƒç´ æ’å…¥åˆ°Hã€Nè¿™ä¸¤ä¸ªå…ƒç´ çš„ä¸­é—´ï¼›é‚£ä¹ˆæ­¤æ—¶å³ä¾§çš„å…ƒç´ æœªæ„æˆ5ä¸ªæ‰€ä»¥ä¸ä½œä»»ä½•å˜åŒ–ï¼›  </p><p>æ¥ä¸‹æ¥ç»§ç»­æ’å…¥Qï¼›<br>æ’å…¥Qä¹Ÿæ˜¯éœ€è¦ä¸æ ¹èŠ‚ç‚¹Gç›¸è¿›è¡Œæ¯”è¾ƒæ’ä½é¡ºåºçš„ï¼›å¾—å‡ºQæ˜¯åœ¨Gä¹‹åï¼Œé‚£ä¹ˆå°±å°†Qæ”¾åœ¨Gæ ¹èŠ‚ç‚¹çš„å³ä¾§ï¼Œç„¶åå°†Qè¿›è¡Œä¸èŠ‚ç‚¹å…ƒç´ Hã€Kã€Nç›¸è¿›è¡Œæ¯”è¾ƒï¼›å¾—åˆ°æ’åˆ—é¡ºåºHã€Kã€Nã€Qè¿™æ ·ä¸€ä¸ªæ’åˆ—é¡ºåºï¼Œå½“ç„¶æ­¤æ—¶ä»ç„¶ä¸éœ€è¦åšå‡ºï¼ˆåˆ†è£‚ï¼‰å˜åŒ–ï¼›å› ä¸ºæ­¤æ—¶nå¹¶æ²¡æœ‰è¶…è¿‡4ï¼›åªæœ‰å½“nè¶…è¿‡4çš„æ—¶å€™æ‰ä¼šå‘ç”Ÿåˆ†è£‚çš„å˜åŒ–ï¼›åˆ†å‰å°äºç­‰äº4çš„æƒ…å†µä¸‹å¹¶ä¸åšä»»ä½•çš„åˆ†è£‚æ”¹å˜åªè¿›è¡Œç»“ç‚¹å…ƒç´ é—´çš„å¤§å°æ’ä½ï¼›  </p><p>åœ¨æ­¤ä¹‹å‰ä¸€ç›´åœ¨è¯´åˆ†è£‚ï¼›å½“å‰å·²ç»åˆ†è£‚è¿‡ä¸€æ¬¡ï¼›ä¹Ÿå°±æ˜¯Aã€Cã€Gã€Hã€Nçš„æ—¶å€™è¿›è¡Œå°†Gåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹ï¼›Aã€Cç»“ç‚¹ä¸Hã€Nç»“ç‚¹è¿›è¡Œä¸¤è¾¹ç»“ç‚¹çš„åˆ†è£‚ï¼›å¹¶ä¸”æ’å…¥äº†ä¸‰ä¸ªæ–°çš„å…ƒç´ Eã€Kã€Qï¼›  </p><p>æ­¤æ—¶éœ€è¦è¯´æ˜çš„æ˜¯ï¼š  </p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯ä¸ªéå¶å­ç»“ç‚¹ç”± n ä¸ª <span class="type">key</span> ä¸ n + <span class="number">1</span> ä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­[ cell( m / <span class="number">2</span>) <span class="number">-1</span> ] &lt; = n &lt; = m<span class="number">-1</span></span><br></pre></td></tr></table></figure><p>n+1ä¸ªæŒ‡é’ˆå€¼çš„å°±æ˜¯æ¯ä¸ªç»“ç‚¹ä¸‹éƒ½æœ‰ä¸¤ä¸ªæ–¹å—ï¼Œè¿™ä¸¤ä¸ªæ–¹å—éƒ½æ˜¯æŒ‡é’ˆå­˜å‚¨åŒºåŸŸï¼›<br>æŒ‡é’ˆçš„å«ä¹‰ï¼šå½“è¿›è¡Œæ’å…¥ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæ¯”å¦‚è¯´æ’å…¥å…ƒç´ Eï¼›å½“æ’å…¥Eå…ƒç´ çš„æ—¶å€™ä¼šè¿›è¡Œä¸æ ¹èŠ‚ç‚¹Gè¿›è¡Œä¸€ä¸ªå‰åé¡ºåºæ’ä½çš„ä¸€ä¸ªå¯¹æ¯”ï¼›å¦‚æœEæ¯”Gè¦å°ï¼›é‚£ä¹ˆEå…ƒç´ å°±éœ€è¦æ”¾åœ¨Gçš„å·¦ä¾§ï¼ŒæŒ‡å‘å·¦ä¾§ï¼›æˆä¸ºæ ¹ç»“ç‚¹å½“ä¸­çš„å·¦å­èŠ‚ç‚¹å½“ä¸­çš„ä¸€ä¸ªï¼›é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±ç”±Gç»“ç‚¹çš„å·¦æŒ‡é’ˆæŒ‡å‘å·¦å­èŠ‚ç‚¹çš„æ–¹å‘ï¼›é€šè¿‡å·¦è¾¹çš„è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å·¦è¾¹çš„è¿™ä¸ªæ•°æ®å—ï¼›å°äºGé‚£ä¹ˆè¿™ä¸ªæŒ‡é’ˆå°±æŒ‡å‘çš„æ˜¯å°äºGçš„è¿™ä¸ªæ•°æ®å—ï¼ˆä¹Ÿå°±æ˜¯å·¦ä¾§çš„å·¦å­ç»“ç‚¹ï¼‰ï¼›å¤§äºGé‚£ä¹ˆæŒ‡å‘çš„å°±æ˜¯å¤§äºGçš„è¿™ä¸ªæ•°æ®å—ï¼ˆä¹Ÿå°±æ˜¯å³ä¾§çš„å³å­ç»“ç‚¹ï¼‰ï¼›  </p><p>å³</p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">G</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>  </tr>  <tr>    <td colspan="11"></td>  </tr>  <tr>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C<span style="margin-left:5px;margin-right:5px;"></span> E</td>    <td></td>    <td></td>    <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> N <span style="margin-left:5px;margin-right:5px;"></span> Q</td>  </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>æ¥ä¸‹æ¥ç»§ç»­æ’å…¥Må…ƒç´ ï¼›Mä¸Gæ ¹ç»“ç‚¹ç›¸è¿›è¡Œæ¯”è¾ƒï¼Œåº”è¯¥æ˜¯å±äºåœ¨Gçš„åé¢çš„ï¼›æ‰€ä»¥åº”è¯¥æ’æ”¾åœ¨Gçš„å³ä¾§ï¼›é€šè¿‡Gçš„å³æŒ‡é’ˆæŒ‡å‘å³è¾¹çš„æ•°æ®å—ï¼›Mæ’å…¥è¿›æ¥ä¹‹åï¼Œåº”è¯¥è¦ä»‹äºKå’ŒNä¹‹é—´ï¼›ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶Gçš„å³å­ç»“ç‚¹å½“ä¸­çš„æ’åˆ—é¡ºåºä¸ºHã€Kã€Mã€Nã€Qè¿™æ ·ä¸€ä¸ªæ’åˆ—é¡ºåºï¼›è¿™ä¸ªæ—¶å€™å°±éœ€è¦å°†Mæ’å…¥åˆ°Kå’ŒNä¹‹é—´ï¼›ä½†æ˜¯å½“Mæ’å…¥åˆ°Kå’ŒNä¹‹é—´ä¹‹åï¼Œæ­¤æ—¶å³å­ç»“ç‚¹å½“ä¸­çš„å…ƒç´ å·²ç»è¶…è¿‡äº†4ä¸ªï¼Œå³5ä¸ªäº†ï¼›è¶…è¿‡4ä¸ªå…ƒç´ é‚£ä¹ˆæ­¤æ—¶å°±è¦å‘ç”Ÿåˆ†è£‚å˜åŒ–ï¼ŒMç»“ç‚¹åˆšå¥½æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼›å³ä¼šè¦å‘ç”Ÿä¸­é—´èŠ‚ç‚¹ï¼ˆæ–°æ’å…¥çš„å…ƒç´ ï¼‰Mç»“ç‚¹å…ƒç´ æœ€ç»ˆéœ€è¦å‘ä¸Šåˆ†è£‚åˆ°Gçˆ¶èŠ‚ç‚¹å½“ä¸­å»ï¼Œä»¥åŠåŒæ—¶å·¦å³ä¸¤è¾¹çš„å…ƒç´ Hã€Kä»¥åŠHã€Qéœ€è¦åˆ†è£‚å˜åŒ–æˆä¸¤å—ï¼›  </p><p>é—®é¢˜ï¼šæ˜ç™½æ²¡æœ‰ï¼Ÿå°æœ‹å‹ï¼Ÿ<br>ç­”ï¼šæ˜ç™½äº†ï¼(à²¥_à²¥)  </p><p>ç»è¿‡åˆ†è£‚ä¹‹åå†æ¥çœ‹å…¶æŒ‡é’ˆï¼›é‚£ä¹ˆæ ¹ç»“ç‚¹å½“ä¸­çš„ä¸‰ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡çš„æ˜¯ï¼›ç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡çš„æ˜¯å°äºæ ¹èŠ‚ç‚¹å½“ä¸­çš„Gå…ƒç´ åˆ™æŒ‡é’ˆæŒ‡å‘å·¦ä¾§ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ å—Aã€Cã€Eï¼›ç¬¬äºŒä¸ªæŒ‡é’ˆï¼Œåˆ™å› ä¸ºæ ¹èŠ‚ç‚¹å½“ä¸­å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ï¼›æ‰€ä»¥ä¸­é—´è¿™ä¸ªç¬¬äºŒä¸ªæŒ‡é’ˆç”¨äºå¤§äºæ ¹èŠ‚ç‚¹å½“ä¸­çš„Gå…ƒç´ è€Œå°äºæ ¹èŠ‚ç‚¹å½“ä¸­çš„Må…ƒç´ åˆ™æŒ‡å‘ä¸­é—´çš„Hã€Kçš„è¿™ä¸ªæ•°æ®å—ï¼›æœ€åæ ¹èŠ‚ç‚¹å½“ä¸­çš„ç¬¬ä¸‰ä¸ªæŒ‡é’ˆç”¨äºå¤§äºæ ¹èŠ‚ç‚¹å½“ä¸­Må…ƒç´ çš„æŒ‡å‘ç¬¬ä¸‰ä¸ªæ•°æ®å…ƒç´ å—å³Nã€Qï¼›  </p><p>é—®é¢˜ï¼šæ˜ç™½ï¼Ÿå°æœ‹å‹ï¼Ÿ<br>ç­”ï¼šæ˜ç™½äº†ï¼o(ï¾ŸĞ”ï¾Ÿ)ã£ï¼  </p><p>å½“å‰ä¸ºæ’å…¥Mçš„æ•°æ®ç»“æ„ï¼›  </p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">G<span style="margin-left:5px;margin-right:5px;"></span> M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="14"></td>  </tr>  <tr>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C<span style="margin-left:5px;margin-right:5px;"></span> E</td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N <span style="margin-left:5px;margin-right:5px;"></span> Q</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>å½“å‰Mæ’å…¥å®Œæˆä¹‹åï¼Œç»§ç»­æ’å…¥Fã€Wã€Lã€Tè¿™å››ä¸ªæ•°æ®å…ƒç´ ï¼›<br>é‚£ä¹ˆæ­¤æ—¶æ’å…¥Fã€Wã€Lã€Tè¿™å››ä¸ªæ•°æ®å…ƒç´ æ—¶æ˜¯ä¸éœ€è¦è¿›è¡Œåˆ†è£‚å˜åŒ–çš„ï¼›å› ä¸ºå½“è¿™å››ä¸ªå…ƒç´ æ’å…¥è¿›æ¥ä¹‹åï¼Œå„ä¸ªæ•°æ®å—å½“ä¸­çš„key ç»“ç‚¹éƒ½æ²¡æœ‰è¶…è¿‡4ï¼›æ‰€ä»¥æ˜¯ä¸éœ€è¦è¿›è¡Œåˆ†è£‚å˜åŒ–å¤„ç†çš„ï¼›  </p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">G<span style="margin-left:5px;margin-right:5px;"></span> M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="18"></td>  </tr>  <tr>    <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C<span style="margin-left:5px;margin-right:5px;"></span> E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    N <span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span> T<span style="margin-left:5px;margin-right:5px;"></span> W</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>ä¸Šè¿°Fã€Wã€Lã€Tè¿™å››ä¸ªå…ƒç´ æ’å…¥å®Œæˆä¹‹åï¼Œæ¥ç€æ’å…¥å…ƒç´ Zï¼›<br>æ’å…¥Zçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šè¿›è¡Œä¸æ ¹èŠ‚ç‚¹çš„Gå’ŒMç›¸è¿›è¡Œæ¯”è¾ƒï¼›Zå…ƒç´ æ¯”Gã€Méƒ½è¦å¤§ï¼›æ‰€ä»¥å°±ç”±æ ¹ç»“ç‚¹çš„ç¬¬ä¸‰ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸‰ä¸ªæ•°æ®å—ï¼Œä¹Ÿå°±æ˜¯Nã€Qã€Tã€Wï¼›èµ°å‘ç¬¬ä¸‰ä¸ªæ•°æ®å—æ—¶åˆä¼šä¸ç¬¬ä¸‰ä¸ªæ•°æ®å—å½“ä¸­çš„å…ƒç´ ç›¸è¿›è¡Œæ¯”è¾ƒå¾—åˆ°å…¶å…ƒç´ æ’åˆ—é¡ºåºNã€Qã€Tã€Wã€Zè¿™æ ·ä¸€ä¸ªæ’åˆ—æ‘†æ”¾ä½ç½®ï¼›æ‰€ä»¥æ­¤æ—¶å°†Zæ’å…¥ç¬¬ä¸‰ä¸ªæ•°æ®å—å½“ä¸­çš„æœ€åä¸€ä¸ªä½ç½®ï¼Œå½“Zå…ƒç´ å‡ºç°åœ¨Wå…ƒç´ ä¹‹åçš„æ—¶å€™ï¼Œæ­¤æ—¶è§‚å¯Ÿç¬¬ä¸‰ä¸ªæ•°æ®åº“å—å½“ä¸­çš„å…ƒç´ ä¸ªæ•°å·²ç»è¶…è¿‡äº†4ï¼Œå³å·²ç»æˆä¸º5ä¸ªäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™5ä¸ªå…ƒç´ å½“ä¸­ä¸­é—´å…ƒç´ éœ€è¦è¿›è¡Œå‘ä¸Šåˆ†è£‚ï¼Œåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹ï¼Œç„¶åå…¶å·¦å³ä¸¤è¾¹éœ€è¦åˆ†è£‚æˆä¸¤ä¸ªæ•°æ®å—ï¼›è¯¥ç¬¬ä¸‰ä¸ªæ•°æ®å—å½“ä¸­çš„ä¸­é—´å…ƒç´ ä¸ºTï¼›Tå…ƒç´ æ­¤æ—¶åº”å½“ç¬¦åˆæ¡ä»¶éœ€è¦åˆ†è£‚è‡³ä¸Šä¸€èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹å½“ä¸­å»ï¼›ä»¥åŠTå…ƒç´ åœ¨åˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹ä¹‹å‰åŸæ¥ä¸¤è¾¹çš„ç»“ç‚¹éœ€è¦è¿›è¡Œåˆ†è£‚æˆä¸¤å—ä¹Ÿå°±æ˜¯Nã€Qç»“ç‚¹ä»¥åŠWã€Zç»“ç‚¹è¿™ä¸¤å¤§å—è¿›è¡Œåˆ†è£‚å¼€æ¥ç§°ä¸ºå•ç‹¬çš„ç»“ç‚¹ï¼›</p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">G<span style="margin-left:5px;margin-right:5px;"></span> M<span style="margin-left:5px;margin-right:5px;"></span> T</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="20"></td>  </tr>  <tr>    <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C<span style="margin-left:5px;margin-right:5px;"></span> E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N <span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span>     </td>    <td></td><td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>å½“å…ƒç´ Zæ’å…¥å®Œæˆä¹‹åï¼Œæ¥ä¸‹æ¥è¿›è¡Œæ’å…¥å…ƒç´ Dï¼›<br>å…ƒç´ Då’Œæ ¹ç»“ç‚¹å½“ä¸­çš„Gã€Mã€Tç›¸æ¯”ï¼Œæ˜¾ç„¶æ˜¯éƒ½å°äºè¿™ä¸‰è€…çš„ï¼›æ‰€ä»¥ç”±æ ¹ç»“ç‚¹å½“ä¸­çš„ç¬¬ä¸€ä¸ªæŒ‡é’ˆè¿›è¡ŒæŒ‡å‘ç¬¬ä¸€ä¸ªæ•°æ®å—ï¼Œä¹Ÿå°±æ˜¯Aã€Cã€Eã€Fè¿™ä¸ªæ•°æ®å—å½“ä¸­æ¥ï¼›å¹¶ä¸”Då…ƒç´ éœ€è¦è¿›è¡Œä¸æ•°æ®å—å…ƒç´ å½“ä¸­çš„Aã€Cã€Eã€Fè¿™å››ä¸ªå…ƒç´ éœ€è¦è¿›è¡Œæ¯”è¾ƒæ’åºé¡ºåºå¤§å°ï¼›å³é€šè¿‡æ’åºé¡ºåºå¯å¾—Aã€Cã€Dã€Eã€Fï¼›æ’å…¥è¿›æ¥ä¹‹åï¼Œæ­¤æ—¶è¯¥æ•°æ®å—å½“ä¸­çš„keyå…ƒç´ å¤§äº4ä¸ªäº†ï¼Œå³å‡ºç°äº†5ä¸ªï¼›é‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦å°†è¯¥æ•°æ®å—å…ƒç´ å½“ä¸­çš„é‚£ä¸ªä¸­é—´å…ƒç´ ï¼ˆDä½œä¸ºè¯¥æ•°æ®å—å½“ä¸­çš„ä¸­é—´å…ƒç´ å­˜åœ¨ï¼‰ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšæ–°æ’å…¥çš„å…ƒç´ Dè¿›è¡Œå‘ä¸Šåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹Gã€Mã€Tå½“ä¸­å»ï¼Œä¸”åˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹çš„å…ƒç´ Dä¹Ÿéœ€è¦ä¸Gã€Mã€Tè¿›è¡Œä¸€ä¸ªæ’åºï¼Œæ’åºå¾—åˆ°Dã€Gã€Mã€Tè¿™æ ·ä¸€ä¸ªæ’åˆ—é¡ºåºï¼›é‚£ä¹ˆæ­¤æ—¶åˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹çš„å…ƒç´ Dçš„ä¸¤è¾¹çš„å…ƒç´ åŒæ ·ä¹Ÿéœ€è¦è¿›è¡Œåˆ†è£‚æˆä¸¤ä¸ªç»“ç‚¹ï¼›å³Aã€Cä¸Eã€Fè¿›è¡Œåˆ†è£‚å¼€æ¥ï¼›<br>æœ€ç»ˆå‡ºç°çš„æ•°æ®ç»“æ„ï¼š  </p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span> G<span style="margin-left:5px;margin-right:5px;"></span> M<span style="margin-left:5px;margin-right:5px;"></span> T</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="22"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N <span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span>     </td>    <td></td><td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>å½“å…ƒç´ Dæ’å…¥å®Œæˆä¹‹åï¼Œæ¥ç€è¿›è¡Œæ’å…¥å…ƒç´ Pã€Rã€Xã€Yï¼›<br>æ’å…¥Pã€Rã€Xã€Yæ—¶å¹¶ä¸éœ€è¦è¿›è¡Œç›¸åº”çš„å˜åŒ–åˆ†è£‚ï¼›å› ä¸ºæ’å…¥åˆ°æ•°æ®å—å½“ä¸­å…ƒç´ keyå¹¶æ²¡æœ‰æ»¡è¶³ &gt; 4 çš„è¿™æ ·ä¸€ä¸ªæ¡ä»¶ï¼›æ‰€ä»¥å¹¶ä¸éœ€è¦åšå‡ºåˆ†è£‚ï¼›  </p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span> G<span style="margin-left:5px;margin-right:5px;"></span> M<span style="margin-left:5px;margin-right:5px;"></span> T</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="26"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P<span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span> R</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>å½“æ’å…¥å…ƒç´ Pã€Rã€Xã€Yè¿™å››ä¸ªå…ƒç´ ä¹‹åï¼Œæ¥ä¸‹æ¥è¿›è¡Œæ’å…¥æœ€åä¸€ä¸ªå…ƒç´ Sï¼›<br>Sé¦–å…ˆå’Œæ ¹ç»“ç‚¹å½“ä¸­çš„æ˜¯ä¸ªå…ƒç´ Dã€Gã€Mã€Tè¿›è¡Œæ¯”è¾ƒï¼›æ˜¾ç„¶ä»‹äºMä¸Tä¹‹é—´ï¼›å³å¤§äºMè€Œå°äºTè¿™æ ·ä¸€ä¸ªèŒƒå›´ï¼›ä»è€Œä½¿å¾—æ ¹ç»“ç‚¹çš„ç¬¬å››ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬å››ä¸ªæ•°æ®å—ï¼Œå³Nã€Pã€Qã€Rè¿™ä¸€ä¸ªæ•°æ®å—å½“ä¸­ï¼›è€Œå½“Sæ’å…¥åˆ°ç¬¬å››ä¸ªæ•°æ®å—å½“ä¸­é¦–å…ˆä¹Ÿæ˜¯éœ€è¦è¿›è¡Œæ¯”è¾ƒæ’åºé¡ºåºå¤§å°çš„ï¼›æœ‰é¡ºåºå¯å¾—ï¼›å¾—åˆ°é¡ºåºä¸ºNã€Pã€Qã€Rã€Sè¿™æ ·ä¸€ä¸ªé¡ºåºæ’åˆ—ï¼›å°†Sæ’å…¥åˆ°è¯¥æ•°æ®å—å½“ä¸­æ¥ï¼›æ­¤æ—¶ç¬¬å››ä¸ªæ•°æ®å—å½“ä¸­çš„å…ƒç´ ä¸ªæ•°å·²ç»è¾¾åˆ°äº†5ä¸ªï¼Œä¹Ÿå°±æ˜¯è¶…è¿‡äº†4ä¸ªå°±éœ€è¦è¿›è¡Œåˆ†è£‚äº†ï¼›é‚£ä¹ˆæ­¤æ—¶ï¼›è¯¥æ•°æ®å—å½“ä¸­çš„ä¸­é—´å…ƒç´ ä¸ºQï¼›ä¹Ÿå°±æ˜¯Qå…ƒç´ éœ€è¦è¿›è¡Œå‘ä¸Šåˆ†è£‚è‡³çˆ¶èŠ‚ç‚¹Dã€Gã€Mã€Tè¯¥æ•°æ®å—å½“ä¸­å»ï¼›ä»¥åŠQå…ƒç´ ä¸¤è¾¹çš„å…ƒç´ éœ€è¦è¿›è¡Œåˆ†è£‚ï¼Œä¹Ÿå°±æ˜¯Nã€Pä¸Rã€Sè¿™ä¸¤å—åˆ†è£‚å¼€æ¥ï¼›<br>ä½†æ˜¯Qå¦‚æœæ­¤æ—¶å‘ä¸Šè¿›è¡Œåˆ†è£‚ï¼Œè€Œæ­¤æ—¶çˆ¶èŠ‚ç‚¹å½“ä¸­çš„å…ƒç´ å¯¹å‘ä¸Šåˆ†è£‚æ¥çš„Qå…ƒç´ è¿›è¡Œæ’åºå¾—åˆ°Dã€Gã€Mã€Qã€Tï¼›çˆ¶èŠ‚ç‚¹æ’å…¥å…ƒç´ Qï¼›çˆ¶èŠ‚ç‚¹å½“ä¸­çš„å…ƒç´ ä¹Ÿè¾¾åˆ°äº†äº†5ä¸ªï¼›ä¹Ÿéœ€è¦è¿›è¡Œåˆ†è£‚ï¼›å…¶çˆ¶èŠ‚ç‚¹å½“ä¸­çš„ä¸­é—´å…ƒç´ ä¸ºMå…ƒç´ ï¼Œåˆ™æ­¤æ—¶Må…ƒç´ ç»§ç»­å‘ä¸Šè¿›è¡Œåˆ†è£‚ï¼Œåˆ™Mæ›´æ–°ç§°ä¸ºè¯¥BTreeçš„æ ¹èŠ‚ç‚¹ï¼›è€ŒMä¸¤è¾¹çš„å…ƒç´ ï¼Œå³Dã€Gä¸¤å…ƒç´ ä¸Qã€Tä¸¤å…ƒç´ åˆ™è¿™ä¸¤å—è¿›è¡Œåˆ†è£‚å¼€æ¥ï¼ŒDã€Gå—ç§°ä¸ºæ ¹ç»“ç‚¹Mçš„å·¦å­èŠ‚ç‚¹ï¼ŒQã€Tå—ç§°ä¸ºMæ ¹ç»“ç‚¹çš„å³å­ç»“ç‚¹ï¼›è¿™å°±æ˜¯æ‰€æåˆ°çš„äº”å‰BTreeç»“æ„çš„ä¸€ä¸ªæ¼”å˜è¿‡ç¨‹ï¼›</p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span>  G    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    Q <span style="margin-left:5px;margin-right:5px;"></span> T</td>         <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P</td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">R<span style="margin-left:5px;margin-right:5px;"></span> S</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>äº†è§£äº†äº”å‰BTreeæ•°æ®ç»“æ„çš„ä¸€ä¸ªæ¼”å˜è¿‡ç¨‹ä¹‹åå›è¿‡å¤´æ¥å†çœ‹ï¼›ä¸€æ£µmå‰çš„BTreeç‰¹æ€§ï¼›<br>å¦‚æœæ˜¯ä¸€ä¸ªäº”å‰çš„BTreeï¼›<br>åˆ™ï¼š  </p><ul><li>æ ‘ä¸­æ¯ä¸ªç»“ç‚¹æœ€å¤šåŒ…å«mä¸ªå­©å­ï¼›å³æ ‘ä¸­æ¯ä¸ªç»“ç‚¹æœ€å¤šåŒ…å«5ä¸ªå­©å­ï¼›ä¸èƒ½å¤šäº5ä¸ªï¼Œå³ä¸èƒ½å¤šäºmä¸ªï¼›  </li></ul><blockquote><p>ä¸¾ä¾‹</p></blockquote><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span> G<span style="margin-left:5px;margin-right:5px;"></span> M<span style="margin-left:5px;margin-right:5px;"></span> T</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="26"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P<span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span> R</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><ul><li>é™¤æ ¹ç»“ç‚¹ä¸å¶å­ç»“ç‚¹å¤–ï¼Œæ¯ä¸ªç»“ç‚¹è‡³å°‘æœ‰ [ cell( m / 2 )]ä¸ªå­©å­ï¼›å³æ¯ä¸ªç»“ç‚¹è‡³å°‘æœ‰5/2=3ï¼ˆå‘ä¸Šå–æ•´ï¼‰ä¸ªå­©å­ï¼›Mä¸ºæ ¹èŠ‚ç‚¹ï¼›ACå—ã€EFå—ã€HKLå—ã€NPå—ã€RSå—ã€WXYZå—ä¸ºå¶å­ç»“ç‚¹ï¼›æ‰€ä»¥ä»…å‰©DGå—ä¸QTå—éå¶å­ç»“ç‚¹ä¹Ÿéæ ¹èŠ‚ç‚¹ï¼›è¿™ä¸¤å—åˆ†åˆ«æœ‰ä¸‰ä¸ªå­—èŠ‚ç‚¹ï¼ŒDGå—çš„å­©å­å³ACå—ã€EFå—ã€HKLå—ï¼›QTå—çš„å­©å­å³NPå—ã€RSå—ã€WXYZå—ï¼›  </li></ul><blockquote><p>ä¸¾ä¾‹</p></blockquote><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span>  G    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    Q <span style="margin-left:5px;margin-right:5px;"></span> T</td>         <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P</td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">R<span style="margin-left:5px;margin-right:5px;"></span> S</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><ul><li>è‹¥æ ¹ç»“ç‚¹ä¸æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤ä¸ªå­©å­ï¼›</li></ul><blockquote><p>ä¸¾ä¾‹</p></blockquote><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span>  G    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    Q <span style="margin-left:5px;margin-right:5px;"></span> T</td>         <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P</td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">R<span style="margin-left:5px;margin-right:5px;"></span> S</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><ul><li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼›</li></ul><blockquote><p>ä¸¾ä¾‹</p></blockquote><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="2" style="text-align:center;background-color:lightblue;color:black;">M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">D<span style="margin-left:5px;margin-right:5px;"></span>  G    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    Q <span style="margin-left:5px;margin-right:5px;"></span> T</td>         <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>    <td></td>    <td></td>    <td></td>    <td></td><td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td colspan="28"></td>  </tr>  <tr>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C    </td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">    N<span style="margin-left:5px;margin-right:5px;"></span> P</td>    <td></td>    <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">R<span style="margin-left:5px;margin-right:5px;"></span> S</td>    <td></td><td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    W<span style="margin-left:5px;margin-right:5px;"></span> X<span style="margin-left:5px;margin-right:5px;"></span> Y<span style="margin-left:5px;margin-right:5px;"></span> Z</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>      <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><ul><li>æ¯ä¸ªéå¶å­ç»“ç‚¹ç”±nä¸ªkeyä¸n+1ä¸ªæŒ‡é’ˆç»„æˆï¼›å…¶ä¸­[ cell( m / 2)-1] &lt; = n &lt; = m - 1ï¼›å³</li></ul><p>keyå³æŒ‡çš„æ¯ä¸€ä¸ªç»“ç‚¹å½“ä¸­çš„å…ƒç´ ï¼›æŒ‡é’ˆå³ç”¨æ¥æŒ‡å‘æ•°æ®å—</p><table border="1">  <tr>    <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>     <td></td>    <td></td>     <td colspan="3" style="text-align:center;background-color:lightblue;color:black;">G<span style="margin-left:5px;margin-right:5px;"></span> M</td>     <td></td>    <td></td>     <td></td>    <td></td>    <td></td>    <td></td>    <td></td>  </tr>  <tr>    <td></td>    <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td></td>    <td></td>     <td></td>     <td></td>     <td></td>  </tr>  <tr>    <td colspan="18"></td>  </tr>  <tr>    <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">A<span style="margin-left:5px;margin-right:5px;"></span> C<span style="margin-left:5px;margin-right:5px;"></span> E<span style="margin-left:5px;margin-right:5px;"></span> F</td>    <td></td>    <td></td>    <td colspan="4" style="text-align:center;background-color:lightblue;color:black;">H<span style="margin-left:5px;margin-right:5px;"></span>  K<span style="margin-left:5px;margin-right:5px;"></span> L    </td>    <td></td>    <td></td>      <td colspan="5" style="text-align:center;background-color:lightblue;color:black;">    N <span style="margin-left:5px;margin-right:5px;"></span> Q<span style="margin-left:5px;margin-right:5px;"></span> T<span style="margin-left:5px;margin-right:5px;"></span> W</td>      </tr>  <tr>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td></td>    <td></td>    <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>    <td></td>    <td></td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>     <td style="background-color:lightgreen;color:black;">æŒ‡é’ˆ</td>  </tr></table><p>åˆ°æ­¤å·²ç»æåˆ°äº†ä¸¤ç§æ•°æ®ç»“æ„ï¼Œä¸€ç§æ˜¯äºŒå‰æ ‘ï¼›ä¸€ç§æ˜¯BTreeï¼›è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„å¯ä»¥æ‹¿è¿‡æ¥ç›¸äº’æ¯”è¾ƒä¸€ä¸‹ä¼˜åŠ£ï¼›  </p><p>BTreeæ•°æ®ç»“æ„ç›¸å¯¹äºäºŒå‰æ ‘ç›¸æ¯”ï¼›å­˜åœ¨æœ‰å¤šä¸ªåˆ†æ”¯ï¼›è€ŒäºŒå‰æ ‘ä¸€ä¸ªç»“ç‚¹ä»…ä»…åªå­˜åœ¨æœ‰ä¸¤ä¸ªç»“ç‚¹ï¼›é‚£ä¹ˆå¯¹äºç›¸åŒæ•°æ®é‡æ¥è¯´ï¼ŒäºŒå‰æ ‘çš„æ•°æ®å±‚æ¬¡ï¼Œä¹Ÿå°±æ˜¯äºŒå‰æ ‘çš„æ·±åº¦è¦æ›´é«˜ä¸€äº›ï¼›ä¸€æ—¦å±‚æ¬¡æ›´æ·±ä¹Ÿå°±æ„å‘³ç€æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™ï¼›ç£ç›˜çš„IOçš„æ¬¡æ•°ä¹Ÿå°±æ›´å¤šï¼›ä»è€Œå¯¼è‡´æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿå°±æ¯”è¾ƒä½ï¼›<br>åˆ°æ­¤ï¼Œè¯¥BTreeæ ‘å°±å·²ç»æ„å»ºå®Œæˆäº†ï¼ŒBTREEæ ‘å’ŒäºŒå‰æ ‘ç›¸æ¯”ï¼ŒæŸ¥è¯¢æ•°æ®çš„æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºå¯¹äºç›¸åŒçš„æ•°æ®é‡æ¥è¯´ï¼ŒBTREEçš„å±‚æ¬¡ç»“æ„ç›¸æ¯”äºŒå‰æ ‘å°ï¼Œå› æ­¤æœç´¢é€Ÿåº¦æ›´å¿«ï¼›  </p><h2 id="ç´¢å¼•-ç´¢å¼•ç»“æ„-B-TREE"><a href="#ç´¢å¼•-ç´¢å¼•ç»“æ„-B-TREE" class="headerlink" title="ç´¢å¼• - ç´¢å¼•ç»“æ„ - B+TREE"></a>ç´¢å¼• - ç´¢å¼•ç»“æ„ - B+TREE</h2><p>B+Treeä¸ºBTreeçš„å˜ç§ï¼ŒB+Treeä¸BTreeçš„åŒºåˆ«ä¸ºï¼š<br>1ï¼‰ nå‰B+Treeæœ€å¤šå«æœ‰nä¸ªkeyï¼Œè€ŒBTreeæœ€å¤šå«æœ‰n-1ä¸ªkeyï¼›<br>2ï¼‰ B+Treeçš„å¶å­ç»“ç‚¹ä¿å­˜æ‰€æœ‰çš„keyä¿¡æ¯ï¼Œä¾ç…§keyå¤§å°é¡ºåºæ’åˆ—ï¼›<br>3ï¼‰ æ‰€æœ‰çš„éå¶å­ç»“ç‚¹éƒ½å¯ä»¥çœ‹åšæ˜¯keyçš„ç´¢å¼•éƒ¨åˆ†ï¼›  </p><p>æ²¡æœ‰å­èŠ‚ç‚¹çš„ç»“ç‚¹ç§°ä¹‹ä¸ºå¶å­ç»“ç‚¹ï¼›å¶å­ç»“ç‚¹å½“ä¸­åŒ…å«äº†æ‰€æœ‰keyçš„ä¿¡æ¯ï¼›å¶å­ç»“ç‚¹å½“ä¸­çš„keyæ‰æ˜¯å®Œæ•´çš„åŒ…å«äº†æ‰€æœ‰çš„keyçš„ä¿¡æ¯ï¼›åŒ…å«äº†æ‰€æœ‰çš„æ•°æ®ä¿¡æ¯ï¼›æ ¹ç»“ç‚¹å½“ä¸­ä»¥åŠéå¶å­ç»“ç‚¹å½“ä¸­çš„keyèµ·åˆ°çš„æ˜¯ä¸€ä¸ªç´¢å¼•çš„ä½œç”¨ï¼›ç´¢å¼•å°±æ˜¯ä¸ºäº†æŸ¥æ‰¾åˆ°å¶å­ç»“ç‚¹å½“ä¸­çš„keyï¼›è€Œä¸”å¯¹äºB+æ ‘æ¥è¯´æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ä¸Šé¢äº†ï¼›éå¶å­ç»“ç‚¹æ˜¯ä¸å­˜åœ¨æ•°æ®ä¿¡æ¯çš„ï¼›Bæ ‘å½“ä¸­çš„æ‰€æœ‰æ•°æ®æ˜¯è·Ÿç»“ç‚¹æŒ‚é’©çš„ï¼›B+æ ‘å½“ä¸­æ‰€æœ‰çš„keyå­˜å‚¨åœ¨å¶å­ç»“ç‚¹æ‰€æœ‰çš„æ•°æ®ä¹Ÿéƒ½å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ä¸Šäº†ï¼›<br>è¿™ä¹Ÿæ˜¯B+æ ‘ä¸Bæ ‘çš„ä¸€ä¸ªåŒºåˆ«ï¼›  </p><p>B+Treeç›¸å¯¹äºBTreeçš„ä¸€ä¸ªä¼˜åŠ¿ï¼š<br>ç”±äºB+Treeåªæœ‰å¶å­ç»“ç‚¹ä¿å­˜keyä¿¡æ¯ï¼ŒæŸ¥è¯¢ä»»ä½•keyéƒ½è¦ä»rootèµ°åˆ°å¶å­ï¼ˆéå¶å­ç»“ç‚¹ä¸Šçš„keyéƒ½æ˜¯èµ·åˆ°ä¸€ä¸ªç´¢å¼•çš„ä½œç”¨å¹¶æ²¡æœ‰æ•°æ®ï¼Œå¶å­ç»“ç‚¹ä¸Šçš„keyæ‰å…³è”ç€ç›¸å…³çš„æ•°æ®ä¿¡æ¯ï¼‰ï¼Œæ‰€ä»¥B+Treeçš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šï¼›  </p><h2 id="ç´¢å¼•-ç´¢å¼•ç»“æ„-MySQLä¸­çš„B-Tree"><a href="#ç´¢å¼•-ç´¢å¼•ç»“æ„-MySQLä¸­çš„B-Tree" class="headerlink" title="ç´¢å¼• - ç´¢å¼•ç»“æ„ - MySQLä¸­çš„B+Tree"></a>ç´¢å¼• - ç´¢å¼•ç»“æ„ - MySQLä¸­çš„B+Tree</h2><p>MySQLç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„B+Treeè¿›è¡Œäº†ä¼˜åŒ–ã€‚<br>åœ¨åŸB+Treeçš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­ç»“ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼›<br>é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦å¢åŠ è¿™æ ·ä¸€ä¸ªæŒ‡é’ˆï¼Ÿ<br>ç­”ï¼šæ–¹ä¾¿è¿›è¡ŒæŸ¥è¯¢ï¼›  </p><blockquote><p>å¢åŠ è¯¥æŒ‡é’ˆçš„åŸå› åœ¨äºï¼šæ–¹ä¾¿è¿›è¡ŒèŒƒå›´æœç´¢ï¼›  </p></blockquote><p>ä¸¾ä¾‹ï¼šå¦‚æœæƒ³è¦è¿›è¡Œæœç´¢idä¸º9~15çš„æ•°æ®ï¼›ç”±äºæœ‰è¯¥æŒ‡é’ˆç›¸è¿æ‰€ä»¥ä»9ä¸€ç›´æŸ¥è¯¢é“¾è¡¨ä¸‹ä¸€ç»“ç‚¹åˆ°15å³å¯ï¼›<br>æ‰€ä»¥è¯¥é“¾è¡¨æŒ‡é’ˆçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥æé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼›  </p><h2 id="ç´¢å¼•-ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•-ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼• - ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼• - ç´¢å¼•åˆ†ç±»</h2><p>1ï¼‰ å•å€¼ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•å€¼åŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•(ä¸€ä¸ªç´¢å¼•å½“ä¸­åªåŒ…å«ä¸€ä¸ªåˆ—ï¼›æ¯”å¦‚ç°åœ¨éœ€è¦å¯¹æŸä¸€å¼ è¡¨å½“ä¸­å»ºç«‹ç´¢å¼•ï¼›è¯¥è¡¨å½“ä¸­æœ‰å¤šä¸ªå­—æ®µnameã€genderã€ageã€help_category_idç­‰å­—æ®µï¼Œä½†æ˜¯åªé’ˆå¯¹nameè¯¥å­—æ®µè¯¥åˆ—è¿›è¡Œå»ºç«‹ç´¢å¼•ï¼›help_category_idä¹Ÿå¯ä»¥å»ºç«‹ä¸ªç´¢å¼•ï¼›åˆ™å½“å‰å­˜åœ¨ä¸¤ä¸ªç´¢å¼•ï¼Œä½†æ˜¯æ¯ä¸ªç´¢å¼•åªå¯¹åº”äº†ç›¸å¯¹åº”çš„ä¸€åˆ—ï¼›è¿™ä¸ªå«åšå•åˆ—ç´¢å¼•æˆ–è€…æ˜¯å•å€¼ç´¢å¼•ï¼›ä¸€ä¸ªè¡¨å½“ä¸­å¯ä»¥åŒ…å«æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•)<br>2ï¼‰ å”¯ä¸€ç´¢å¼•ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ï¼›ï¼ˆå½“å‰è¡¨å½“ä¸­æŸä¸€ä¸ªå­—æ®µæˆ–è€…æ˜¯æŸä¸€åˆ—å½“ä¸­å…¶å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼›ä¹Ÿå°±æ˜¯è¯´å¦‚æœå­˜åœ¨æœ‰åˆ—å½“ä¸­çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼›é‚£ä¹ˆå¿…è¦æƒ…å†µä¸‹å°±å¯ä»¥é’ˆå¯¹è¯¥åˆ—å»ºç«‹ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œåœ¨å”¯ä¸€ç´¢å¼•çš„è¯¥åˆ—å½“ä¸­å…è®¸åŒ…æ‹¬æœ‰å¤šä¸ªNULLå€¼ï¼›ï¼‰<br>3ï¼‰ å¤åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ï¼ˆæ¯”å¦‚ï¼šç»å¸¸åœ¨æŸ¥è¯¢å½“ä¸­éœ€è¦å¯¹nameå­—æ®µä»¥åŠparent_category_idæˆ–è€…æ˜¯è¯´ageå­—æ®µè¿›è¡Œè”åˆæŸ¥è¯¢ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥å°†nameå­—æ®µä»¥åŠageå­—æ®µç»„åˆèµ·æ¥å»ºç«‹ä¸€ä¸ªå¤åˆç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•å½“ä¸­åŒ…å«äº†ä¸¤ä¸ªåˆ—æˆ–è€…è¯´å¤šä¸ªåˆ—ï¼›é‚£ä¹ˆè¿™ç§ç´¢å¼•ç§°ä¹‹ä¸ºå¤åˆç´¢å¼•ï¼‰ï¼›  </p><h2 id="ç´¢å¼•-ç´¢å¼•è¯­æ³•"><a href="#ç´¢å¼•-ç´¢å¼•è¯­æ³•" class="headerlink" title="ç´¢å¼• - ç´¢å¼•è¯­æ³•"></a>ç´¢å¼• - ç´¢å¼•è¯­æ³•</h2><p>ç´¢å¼•åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¯ä»¥åŒæ—¶åˆ›å»ºï¼Œä¹Ÿå¯ä»¥éšæ—¶å¢åŠ æ–°çš„ç´¢å¼•ï¼›<br>å‡†å¤‡ç¯å¢ƒï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> demo_01 <span class="keyword">default</span> charset=utf8mb4;</span><br><span class="line"></span><br><span class="line">use demo_01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">'city'</span>(</span><br><span class="line">    <span class="string">'city_id'</span> <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT;</span><br><span class="line">    <span class="string">'city_name'</span> <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">    <span class="string">'country_id'</span> <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">    <span class="keyword">PRIMARY KEY</span> (<span class="string">'city_id'</span>)</span><br><span class="line">)ENGINE=InnoDB <span class="keyword">DEFAULT</span> CHARSET=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">'country'</span>(</span><br><span class="line">    <span class="string">'country_id'</span> <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT;</span><br><span class="line">    <span class="string">'country_name'</span> <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">    <span class="keyword">PRIMARY KEY</span> (<span class="string">'country_id'</span>)</span><br><span class="line">)ENGINE=InnoDB <span class="keyword">DEFAULT</span> CHARSET=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'city'</span>(<span class="string">'city_id'</span>,<span class="string">'city_name'</span>,<span class="string">'country_id'</span>) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'è¥¿å®‰'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'city'</span>(<span class="string">'city_id'</span>,<span class="string">'city_name'</span>,<span class="string">'country_id'</span>) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'NewYork'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'city'</span>(<span class="string">'city_id'</span>,<span class="string">'city_name'</span>,<span class="string">'country_id'</span>) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'åŒ—äº¬'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'city'</span>(<span class="string">'city_id'</span>,<span class="string">'city_name'</span>,<span class="string">'country_id'</span>) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'ä¸Šæµ·'</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'country'</span>(<span class="string">'country_id'</span>,<span class="string">'country_name'</span>) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'China'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'country'</span>(<span class="string">'country_id'</span>,<span class="string">'country_name'</span>) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'America'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'country'</span>(<span class="string">'country_id'</span>,<span class="string">'country_name'</span>) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'Japan'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">'country'</span>(<span class="string">'country_id'</span>,<span class="string">'country_name'</span>) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'UK'</span>);</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p>è¯­æ³•ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">UNIQUE</span> | <span class="keyword">FULL</span> <span class="built_in">TEXT</span> |SPATIAL] <span class="keyword">INDEX</span> index_name</span><br><span class="line">[ <span class="keyword">using</span> index_type ]</span><br><span class="line"><span class="keyword">ON</span> tb1_name(index_col_name, .... )</span><br><span class="line"></span><br><span class="line">index_col_name : column_name[ ( <span class="keyword">length</span> ) ] [ <span class="keyword">ASC</span> | <span class="keyword">DESC</span> ]</span><br></pre></td></tr></table></figure><p>ç´¢å¼•çš„ç±»å‹ï¼šUNIQUEå”¯ä¸€ç´¢å¼•ã€FULLTEXTå…¨æ–‡ç´¢å¼•ã€SPATIALï¼›ç´¢å¼•ç±»å‹å¯é€‰ï¼›å¯ä»¥ä¸è¿›è¡ŒæŒ‡å®šï¼›<br>index_nameï¼šç´¢å¼•çš„åç§°ï¼›<br>using index_typeï¼šç´¢å¼•æ‰€ä½¿ç”¨çš„å“ªä¸€ä¸ªç±»å‹ï¼›å¦‚æœä¸æŒ‡å®šï¼›åˆ™ä½¿ç”¨ï¼Œé»˜è®¤çš„ç´¢å¼•ç±»å‹å³B+æ ‘ç´¢å¼•ç±»å‹ï¼›<br>ON tb1_name(index_col_name, â€¦.)ï¼šè¿›è¡ŒæŒ‡å®šå¯¹å“ªä¸€å¼ è¡¨çš„å“ªå‡ ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼›  </p><p>åœ¨MySQLå½“ä¸­ï¼Œå¦‚æœå½“å‰è¯¥å­—æ®µæ˜¯ä¸»é”®çš„è¯ï¼›åˆ™é»˜è®¤è¯¥å­—æ®µé»˜è®¤æœ‰ä¸€ä¸ªç´¢å¼•å«åšä¸»é”®ç´¢å¼•ï¼›  </p><p>æ‰€ä»¥æ­¤æ—¶åœ¨cityè¡¨å½“ä¸­å¯¹city_idå­—æ®µçš„ç´¢å¼•ä¸å¿…å†è¿›è¡Œåˆ›å»ºï¼›å¯ä»¥åœ¨city_nameå­—æ®µä¸Šåˆ›å»ºç´¢å¼•ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> index_city_name <span class="keyword">on</span> city(city_name);<span class="comment">#æ­¤æ—¶åœ¨city_nameå­—æ®µä¸Šåˆ›å»ºçš„è¯¥ç´¢å¼•ä¸ºæ™®é€šç´¢å¼•ï¼›</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šä¸ºcityè¡¨ä¸­çš„city_name å­—æ®µåˆ›å»ºç´¢å¼•ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_city_name <span class="keyword">on</span> city(city_name);</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ç´¢å¼•"><a href="#æŸ¥çœ‹ç´¢å¼•" class="headerlink" title="æŸ¥çœ‹ç´¢å¼•"></a>æŸ¥çœ‹ç´¢å¼•</h3><p>è¯­æ³•ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> <span class="built_in">table_name</span>; #<span class="built_in">table_name</span>ï¼Œç´¢å¼•æ‰€å»ºç«‹åœ¨è¯¥å­—æ®µï¼Œè¯¥å­—æ®µæ‰€å¤„çš„è¡¨çš„åç§°</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šæŸ¥çœ‹cityè¡¨ä¸­çš„ç´¢å¼•ä¿¡æ¯ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> city\G; <span class="comment">#\Gæ ¼å¼åŒ–</span></span><br></pre></td></tr></table></figure><p>åœ¨MySQLå½“ä¸­ä¼šé»˜è®¤å¯¹ä¸»é”®city_idå­—æ®µåˆ›å»ºä¸€ä¸ªç´¢å¼•å°±ç§°ä½œæ˜¯ä¸»é”®ç´¢å¼•key_nameï¼šprimaryï¼›<br>è€Œåˆšåˆšå¯¹city_nameåˆ›å»ºçš„ç´¢å¼•åˆ™ä¸ºkey_nameï¼šidx_city_nameï¼›<br>ä¸»é”®ç´¢å¼•primaryä»¥åŠåˆšåˆšæ²¡æœ‰æŒ‡å®šç´¢å¼•ç±»å‹çš„idx_city_nameçš„ç´¢å¼•ç±»å‹éƒ½æ˜¯BTREEç±»å‹ï¼›å³B+Treeç´¢å¼•ï¼ŒBTreeç´¢å¼•ï¼›</p><h3 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h3><p>è¯­æ³•ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> index_name <span class="keyword">ON</span> tb1_name;</span><br><span class="line"><span class="comment"># index_nameç´¢å¼•çš„åç§°</span></span><br><span class="line"><span class="comment"># è¯¥index_nameç´¢å¼•æ‰€å…·ä½“åœ¨çš„è¡¨çš„åç§°</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šæƒ³è¦åˆ é™¤cityè¡¨ä¸Šçš„ç´¢å¼•[ idx_city_name ]ï¼Œå¯ä»¥æ“ä½œå¦‚ä¸‹ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> idx_city_name <span class="keyword">on</span> city;</span><br></pre></td></tr></table></figure><p>åˆ é™¤ä¹‹åå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è¿›è¡ŒæŸ¥çœ‹åˆ é™¤çš„ç´¢å¼•æ˜¯å¦ä»ç„¶å­˜åœ¨ï¼›</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> <span class="built_in">table_name</span>\G;</span><br></pre></td></tr></table></figure><h3 id="ALTERæŒ‡ä»¤"><a href="#ALTERæŒ‡ä»¤" class="headerlink" title="ALTERæŒ‡ä»¤"></a>ALTERæŒ‡ä»¤</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># alter ä¿®æ”¹</span></span><br><span class="line"><span class="comment"># è¯¥è¯­å¥æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»å”¯ä¸€ï¼Œä¸”ä¸èƒ½ä¸ºNULLï¼›</span></span><br><span class="line">1. <span class="keyword">alter</span> <span class="keyword">table</span> tb_name <span class="keyword">add</span> primary <span class="keyword">key</span>(column_list);</span><br><span class="line"></span><br><span class="line"><span class="comment"># unique å”¯ä¸€çš„</span></span><br><span class="line"><span class="comment"># è¿™æ¡è¯­å¥åˆ›å»ºç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†NULLæ„å¤–ï¼ŒNULLå¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰</span></span><br><span class="line"><span class="comment"># Non_unique:0 #Nonä¸ï¼Œuniqueå”¯ä¸€ï¼›0ï¼šå¦å®šï¼›åŒé‡å¦å®šç­‰äºè‚¯å®šï¼›å³å”¯ä¸€</span></span><br><span class="line"><span class="comment"># å½“åˆ›å»ºæ™®é€šç´¢å¼•æ—¶å…¶Non_unique:1ï¼›å³ä¸å”¯ä¸€ï¼›  </span></span><br><span class="line">2. <span class="keyword">alter</span> <span class="keyword">table</span> tb_name <span class="keyword">add</span> <span class="keyword">unique</span> index_name(column_list);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯ä»¥å‡ºç°å¤šæ¬¡</span></span><br><span class="line">3. <span class="keyword">alter</span> <span class="keyword">table</span> tb_name <span class="keyword">add</span> <span class="keyword">index</span> index_name(column_list);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯¥è¯­å¥æŒ‡å®šäº†ç´¢å¼•ä¸ºFULLTEXTï¼Œç”¨äºå…¨æ–‡ç´¢å¼•</span></span><br><span class="line">4. <span class="keyword">alter</span> <span class="keyword">table</span> tb_name <span class="keyword">add</span> fulltext index_name(column_list);</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šæ·»åŠ å”¯ä¸€ç´¢å¼•  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> city <span class="keyword">add</span>  <span class="keyword">unique</span>  idx_city_name(city_name);</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•-ç´¢å¼•è®¾è®¡åŸåˆ™"><a href="#ç´¢å¼•-ç´¢å¼•è®¾è®¡åŸåˆ™" class="headerlink" title="ç´¢å¼• - ç´¢å¼•è®¾è®¡åŸåˆ™"></a>ç´¢å¼• - ç´¢å¼•è®¾è®¡åŸåˆ™</h2><p>ç´¢å¼•çš„è®¾è®¡å¯ä»¥éµå¾ªä¸€äº›å·²æœ‰çš„åŸåˆ™ï¼Œåˆ›å»ºç´¢å¼•çš„æ—¶å€™è¯·å°½é‡è€ƒè™‘ç¬¦åˆè¿™äº›åŸåˆ™ï¼Œä¾¿äºæå‡ç´¢å¼•çš„ä½¿ç”¨æ•ˆç‡ï¼Œæ›´é«˜æ•ˆçš„ä½¿ç”¨ç´¢å¼•ï¼›  </p><ul><li>å¯¹æŸ¥è¯¢é¢‘æ¬¡è¾ƒé«˜ï¼Œä¸”æ•°æ®é‡æ¯”è¾ƒå¤§çš„è¡¨å»ºç«‹ç´¢å¼•ï¼›</li><li>ç´¢å¼•å­—æ®µçš„é€‰æ‹©ï¼Œæœ€ä½³å€™é€‰åˆ—åº”å½“ä»whereå­å¥çš„æ¡ä»¶ä¸­æå–ï¼ˆå³æŸ¥è¯¢æ¡ä»¶å½“ä¸­çš„å­—æ®µï¼‰ï¼Œå¦‚æœwhereå­å¥ä¸­çš„ç»„åˆæ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆåº”å½“æŒ‘é€‰æœ€å¸¸ç”¨ã€è¿‡æ»¤æ•ˆæœæœ€å¥½çš„åˆ—çš„ç»„åˆã€‚</li><li>ä½¿ç”¨å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜ï¼›</li><li>ç´¢å¼•å¯ä»¥æœ‰æ•ˆçš„æå‡æŸ¥è¯¢æ•°æ®çš„æ•ˆç‡ï¼Œä½†æ˜¯ç´¢å¼•æ•°é‡ä¸æ˜¯å¤šå¤šç›Šå–„ï¼›ç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•çš„ä»£ä»·è‡ªç„¶ä¹Ÿå°±æ°´æ¶¨èˆ¹é«˜ã€‚å¯¹äºæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰DMLæ“ä½œæ¯”è¾ƒé¢‘ç¹çš„è¡¨æ¥è¯´ï¼Œç´¢å¼•è¿‡å¤šï¼Œä¼šå¼•å…¥ç›¸å½“é«˜çš„ç»´æŠ¤ä»£ä»·ï¼ˆç»´æŠ¤ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼‰ï¼Œé™ä½DMLæ“ä½œçš„æ•ˆç‡ï¼Œå¢åŠ å“åº”æ“ä½œçš„æ—¶é—´æ¶ˆè€—ï¼›å¦å¤–ç´¢å¼•è¿‡å¤šçš„è¯ï¼ŒMySQLä¹Ÿä¼šçŠ¯é€‰æ‹©å›°éš¾ç—…ï¼Œè™½ç„¶æœ€ç»ˆä»ç„¶ä¼šæ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„ç´¢å¼•ï¼Œä½†æ˜¯æ— ç–‘æé«˜äº†é€‰æ‹©çš„ä»£ä»·ï¼›</li><li>ä½¿ç”¨çŸ­ç´¢å¼•ï¼Œç´¢å¼•åˆ›å»ºä¹‹åä¹Ÿæ˜¯ä½¿ç”¨ç¡¬ç›˜æ¥å­˜å‚¨çš„ï¼Œå› æ­¤æå‡ç´¢å¼•è®¿é—®çš„I/Oæ•ˆç‡ï¼Œä¹Ÿå¯ä»¥æå‡æ€»ä½“çš„è®¿é—®æ•ˆç‡ã€‚å‡å¦‚æ„æˆç´¢å¼•çš„å­—æ®µæ€»é•¿åº¦æ¯”è¾ƒçŸ­ï¼Œé‚£ä¹ˆåœ¨ç»™å®šå¤§å°çš„å­˜å‚¨å—å†…å¯ä»¥å­˜å‚¨æ›´å¤šçš„ç´¢å¼•å€¼ï¼Œä¹¡éŸ³çš„å¯ä»¥æœ‰æ•ˆåœ°æå‡MySQLè®¿é—®ç´¢å¼•çš„I/Oæ•ˆç‡ã€‚</li><li>åˆ©ç”¨æœ€å·¦å‰ç¼€ï¼ŒNä¸ªåˆ—ç»„åˆè€Œæˆçš„ç»„åˆç´¢å¼•ï¼Œé‚£ä¹ˆç›¸å½“äºæ˜¯åˆ›å»ºäº†Nä¸ªç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢æ—¶whereå­å¥ä¸­ä½¿ç”¨äº†ç»„æˆè¯¥ç´¢å¼•çš„å‰å‡ ä¸ªå­—æ®µï¼Œé‚£ä¹ˆè¿™æ¡æŸ¥è¯¢SQLå¯ä»¥åˆ©ç”¨ç»„åˆç´¢å¼•æ¥æå‡æ€§èƒ½ï¼›  </li></ul><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºå¤åˆç´¢å¼•ï¼š</span><br><span class="line"></span><br><span class="line">CREATE <span class="built_in">INDEX</span> idx_name_email_status ON tb_seller(<span class="keyword">NAME</span>,email,<span class="keyword">STATUS</span>);</span><br><span class="line"></span><br><span class="line">å°±ç›¸å½“äº</span><br><span class="line">      å¯¹<span class="keyword">name</span> åˆ›å»ºäº†ç´¢å¼•ï¼›</span><br><span class="line">      å¯¹<span class="keyword">name</span> , email åˆ›å»ºäº†ç´¢å¼•ï¼›</span><br><span class="line">      å¯¹<span class="keyword">name</span> , email , <span class="keyword">status</span> åˆ›å»ºäº†ç´¢å¼•ï¼›</span><br><span class="line">åªéœ€è¦åˆ›å»ºè¿™ä¹ˆä¸€ä¸ªç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢<span class="keyword">name</span>å•ä¸ªå­—æ®µçš„æ—¶å€™å°±å°†ä¼šèµ°ç´¢å¼•ï¼›åœ¨æŸ¥è¯¢<span class="keyword">name</span>ï¼Œemailè¿™ä¸¤ä¸ªå­—æ®µçš„æ—¶å€™ä¹Ÿä¼šèµ°ç´¢å¼•ï¼›åœ¨æŸ¥è¯¢<span class="keyword">name</span>,email,<span class="keyword">status</span>è¿™ä¸‰ä¸ªå­—æ®µçš„æ—¶å€™ä¹Ÿä¼šèµ°ç´¢å¼•ï¼›  </span><br><span class="line">æœ€å·¦ç´¢å¼•ï¼šæœ€å·¦æŒ‡çš„æ˜¯å¤åˆç´¢å¼•å½“ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œåªè¦æŸ¥è¯¢çš„æ—¶å€™åŒ…å«ç¬¬ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±ä¼šèµ°ç´¢å¼•ï¼›</span><br></pre></td></tr></table></figure><h2 id="è§†å›¾-åˆ›å»ºåŠä¿®æ”¹è§†å›¾"><a href="#è§†å›¾-åˆ›å»ºåŠä¿®æ”¹è§†å›¾" class="headerlink" title="è§†å›¾ - åˆ›å»ºåŠä¿®æ”¹è§†å›¾"></a>è§†å›¾ - åˆ›å»ºåŠä¿®æ”¹è§†å›¾</h2><p>è§†å›¾ï¼ˆViewï¼‰æ˜¯ä¸€ç§è™šæ‹Ÿå­˜åœ¨çš„è¡¨ã€‚<br>è§†å›¾å¹¶ä¸åœ¨æ•°æ®åº“ä¸­å®é™…å­˜åœ¨ï¼Œè¡Œå’Œåˆ—æ•°æ®æ¥è‡ªå®šä¹‰è§†å›¾çš„æŸ¥è¯¢ä¸­ä½¿ç”¨çš„è¡¨ï¼Œå¹¶ä¸”æ˜¯åœ¨ä½¿ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆçš„ã€‚<br>é€šä¿—çš„è®²ï¼Œè§†å›¾å°±æ˜¯ä¸€æ¡SELECTè¯­å¥æ‰§è¡Œåè¿”å›çš„ç»“æœé›†ã€‚<br>æ‰€ä»¥åœ¨åˆ›å»ºè§†å›¾çš„æ—¶å€™ï¼Œä¸»è¦çš„å·¥ä½œå°±è½åœ¨åˆ›å»ºè¿™æ¡SQLæŸ¥è¯¢è¯­å¥ä¸Šã€‚  </p><p>è§†å›¾ç›¸å¯¹äºæ™®é€šè¡¨çš„åˆæ˜¯ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ é¡¹ï¼š  </p><ul><li>ç®€å•ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·å®Œå…¨ä¸éœ€è¦å…³å¿ƒåé¢å¯¹åº”è¡¨çš„ç»“æ„ã€å…³è”æ¡ä»¶å’Œç­›é€‰æ¡ä»¶ï¼Œå¯¹ç”¨æˆ·æ¥è¯´å·²ç»æ˜¯è¿‡æ»¤å¥½çš„ç¬¦åˆæ¡ä»¶çš„ç»“æœé›†ã€‚  </li><li>å®‰å…¨ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·åªèƒ½è®¿é—®ä»–ä»¬è¢«å…è®¸æŸ¥è¯¢çš„ç»“æœå–œï¼Œå¯¹è¡¨çš„æƒé™ç®¡ç†å¹¶ä¸èƒ½å…ˆçŸ¥é“æŸä¸ªè¡ŒæŸä¸ªåˆ—ï¼Œä½†æ˜¯é€šè¿‡è§†å›¾å°±å¯ä»¥ç®€å•çš„å®ç°ï¼›</li><li>æ•°æ®ç‹¬ç«‹ï¼šä¸€æ—¦è§†å›¾çš„ç»“æ„ç¡®å®šäº†ï¼Œå¯ä»¥å±è”½è¡¨ç»“æ„å˜åŒ–å¯¹ç”¨æˆ·çš„å½±å“ï¼Œæºè¡¨å¢åŠ åˆ—å¯¹è§†å›¾æ²¡æœ‰å½±å“ï¼›æºè¡¨ä¿®æ”¹åˆ—åï¼Œåˆ™å¯ä»¥é€šè¿‡ä¿®æ”¹è§†å›¾æ¥è§£å†³ï¼Œä¸ä¼šé€ æˆå¯¹è®¿é—®è€…çš„å½±å“ï¼›</li></ul><h3 id="åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾"><a href="#åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾" class="headerlink" title="åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾"></a>åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾</h3><blockquote><p>åˆ›å»ºè§†å›¾çš„è¯­æ³•ä¸º</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">OR</span> <span class="keyword">REPLACE</span>] [ ALGORITHM = &#123; UNDEFINED | <span class="keyword">MERGE</span> | TEMPTABLE &#125; ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">VIEW</span> view_name [ (column_list) ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">AS</span> select_statement</span><br><span class="line"></span><br><span class="line">[ <span class="keyword">WITH</span> [<span class="keyword">CASCADED</span> | <span class="keyword">LOCAL</span> ] <span class="keyword">CHECK</span> <span class="keyword">OPTION</span> ]</span><br></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹è§†å›¾çš„è¯­æ³•</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> [ ALGORITHM = &#123; UNDEFINED | <span class="keyword">MERGE</span> | TEMPTABLE &#125; ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">VIEW</span> view_name [ (column_list) ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">AS</span> select_statement</span><br><span class="line"></span><br><span class="line">[ WITE [ <span class="keyword">CASCADED</span> | <span class="keyword">LOCAL</span> ] <span class="keyword">CHECK</span> <span class="keyword">OPTION</span> ]</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é€‰é¡¹ï¼š</span><br><span class="line">    <span class="keyword">WITH</span> [ <span class="keyword">CASCADED</span> | <span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> <span class="keyword">OPTION</span> å†³å®šäº†æ˜¯å¦å…è®¸æ›´æ–°æ•°æ®ä½¿è®°å½•ä¸åœ¨æ»¡è¶³è§†å›¾çš„æ¡ä»¶ï¼›</span><br><span class="line">    <span class="keyword">LOCAL</span> åªè¦æ»¡è¶³æœ¬è§†å›¾çš„æ¡ä»¶å°±å¯ä»¥æ›´æ–°</span><br><span class="line">    <span class="keyword">CASCADED</span> å¿…é¡»æ»¡è¶³æ‰€æœ‰é’ˆå¯¹è¯¥è§†å›¾çš„æ‰€æœ‰è§†å›¾çš„æ¡ä»¶æ‰å¯ä»¥æ›´æ–°ï¼ˆé»˜è®¤å€¼ï¼‰</span><br><span class="line"></span><br><span class="line">    <span class="keyword">CREATE</span> [ <span class="keyword">OR</span> <span class="keyword">REPLACE</span>] åˆ›å»ºæˆ–è€…æ˜¯æ›¿æ¢</span><br><span class="line">    <span class="keyword">AS</span> select_statement select_statementå³<span class="keyword">select</span>è¯­å¥</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šåœ¨è§†å›¾å½“ä¸­å±•ç¤ºå›½å®¶ä»¥åŠå…¶ç›¸å…³åŸå¸‚çš„ä¿¡æ¯</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>; <span class="comment"># æ˜¾ç¤ºåœ¨è¯¥æ•°æ®åº“ä¸‹æ‰€æœ‰çš„è¡¨</span></span><br><span class="line">desc table_name; <span class="comment"># æ˜¾ç¤ºè¯¥table_nameå½“ä¸­çš„è¡¨ç»“æ„</span></span><br><span class="line">desc city;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> city c,country t <span class="keyword">where</span> c.country_id=t.country_id;</span><br><span class="line"><span class="keyword">select</span> c.*,t.country_name <span class="keyword">from</span> city c,country t <span class="keyword">where</span> c.country_id=t.country_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> view_city_country <span class="keyword">as</span> <span class="keyword">select</span> c.*,t.country_name <span class="keyword">from</span> city c,country t <span class="keyword">where</span> c.country_id=t.country_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> view_city_country;<span class="comment"># æŸ¥è¯¢è§†å›¾ä¸è¡¨æ“ä½œä¸€è‡´</span></span><br><span class="line"><span class="keyword">update</span> view_city_country <span class="keyword">set</span> city_name=<span class="string">'è¥¿å®‰å¸‚'</span> <span class="keyword">where</span> city_id=<span class="number">1</span>;<span class="comment">#ä¿®æ”¹è§†å›¾ä¸è¡¨æ“ä½œä¸€è‡´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> city; <span class="comment"># è¿™ä¸ªæ—¶å€™åŸºç¡€è¡¨å½“ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ›´æ–°æ‰ï¼›ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„è§†å›¾ä¿®æ”¹æ“ä½œæ˜¯ä¼šå½±å“åˆ°åŸºç¡€è¡¨å½“ä¸­çš„æ•°æ®ï¼›  </span></span><br><span class="line">è™½ç„¶è§†å›¾èƒ½å¤Ÿåšåˆ°æ›´æ–°ï¼Œä½†æ˜¯å¹¶ä¸å»ºè®®å»æ›´æ–°æ•°æ®ï¼›å› ä¸ºè§†å›¾å°±æ˜¯ç”¨æ¥ç®€åŒ–æŸ¥è¯¢æ“ä½œçš„ï¼Œä¸å»ºè®®æ›´æ–°è§†å›¾ï¼›</span><br></pre></td></tr></table></figure><h2 id="è§†å›¾-æŸ¥çœ‹åŠåˆ é™¤è§†å›¾"><a href="#è§†å›¾-æŸ¥çœ‹åŠåˆ é™¤è§†å›¾" class="headerlink" title="è§†å›¾ - æŸ¥çœ‹åŠåˆ é™¤è§†å›¾"></a>è§†å›¾ - æŸ¥çœ‹åŠåˆ é™¤è§†å›¾</h2><h3 id="æŸ¥çœ‹è§†å›¾"><a href="#æŸ¥çœ‹è§†å›¾" class="headerlink" title="æŸ¥çœ‹è§†å›¾"></a>æŸ¥çœ‹è§†å›¾</h3><p>ä»MySQL5.1ç‰ˆæœ¬å¼€å§‹ï¼Œä½¿ç”¨SHOW TABLESå‘½ä»¤çš„æ—¶å€™ä¸ä»…ä¼šæ˜¾ç¤ºè¡¨çš„åå­—ï¼ŒåŒæ—¶ä¹Ÿä¼šæ˜¾ç¤ºè§†å›¾çš„åå­—ï¼Œè€Œä¸å­˜åœ¨å•ç‹¬æ˜¾ç¤ºè§†å›¾çš„SHOW VIEWSå‘½ä»¤ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;<span class="comment"># æ˜¾ç¤ºè¡¨ä»¥åŠè§†å›¾çš„åç§°</span></span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œåœ¨ä½¿ç”¨SHOW TABLE STATUSå‘½ä»¤çš„æ—¶å€™ï¼Œä¸ä½†å¯ä»¥æ˜¾ç¤ºè¡¨çš„ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ˜¾ç¤ºè§†å›¾çš„ä¿¡æ¯ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span>; <span class="comment"># æ˜¾ç¤ºè¡¨ä»¥åŠè§†å›¾çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'city_country_view'</span>\G; <span class="comment"># ç¤ºä¾‹æŸ¥çœ‹è§†å›¾city_country_view</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">view</span> view_city_country; <span class="comment"># æŸ¥çœ‹åˆ›å»ºè§†å›¾æ—¶æ‰€ä½¿ç”¨çš„çš„SQLè¯­å¥æ˜¯ä»€ä¹ˆ</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è§†å›¾"><a href="#åˆ é™¤è§†å›¾" class="headerlink" title="åˆ é™¤è§†å›¾"></a>åˆ é™¤è§†å›¾</h3><p>è¯­æ³•ï¼š  </p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">DROP</span> <span class="meta">VIEW</span> [ <span class="meta">IF</span> EXISTS ] view_name [, view_name ] ... [ <span class="meta">RESTRICT</span> | <span class="meta">CASCADE</span> ]</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼Œåˆ é™¤è§†å›¾city_country_view:  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> city_country_view;# or <span class="keyword">DROP</span> <span class="keyword">VIEW</span> <span class="keyword">if</span> <span class="keyword">exists</span> city_country_view;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-æ¦‚è¿°"><a href="#å­˜å‚¨è¿‡ç¨‹-æ¦‚è¿°" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - æ¦‚è¿°"></a>å­˜å‚¨è¿‡ç¨‹ - æ¦‚è¿°</h2><p>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°æ˜¯å®ç°ç»è¿‡ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ä¸€æ®µSQLè¯­å¥çš„é›†åˆï¼Œè°ƒç”¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°å¯ä»¥ç®€åŒ–åº”ç”¨å¼€å‘äººå‘˜çš„å¾ˆå¤šå·¥ä½œï¼Œå‡å°‘æ•°æ®åœ¨æ•°æ®åº“å’Œåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“ï¼Œå¯¹äºæé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡æ—¶æœ‰å¥½å¤„çš„ã€‚<br>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„åŒºåˆ«åœ¨äºå‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ²¡æœ‰ï¼›<br>å‡½æ•°ï¼šæ˜¯ä¸€ä¸ªæœ‰è¿”å›å€¼çš„è¿‡ç¨‹ï¼›<br>å­˜å‚¨è¿‡ç¨‹ï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼›</p><h2 id="å­˜å‚¨è¿‡ç¨‹-åˆ›å»ºè°ƒç”¨æŸ¥è¯¢åˆ é™¤è¯­æ³•"><a href="#å­˜å‚¨è¿‡ç¨‹-åˆ›å»ºè°ƒç”¨æŸ¥è¯¢åˆ é™¤è¯­æ³•" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - åˆ›å»ºè°ƒç”¨æŸ¥è¯¢åˆ é™¤è¯­æ³•"></a>å­˜å‚¨è¿‡ç¨‹ - åˆ›å»ºè°ƒç”¨æŸ¥è¯¢åˆ é™¤è¯­æ³•</h2><h3 id="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"><a href="#åˆ›å»ºå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"></a>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">procedure_name</span> <span class="params">( [proc_parameter[,.....]])</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    -- <span class="title">SQL</span>è¯­å¥</span></span><br><span class="line"><span class="function"><span class="title">end</span>;</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">select</span> '<span class="title">Hello</span> <span class="title">MySQL</span>';</span></span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h4 id="çŸ¥è¯†å°è´´å£«"><a href="#çŸ¥è¯†å°è´´å£«" class="headerlink" title="çŸ¥è¯†å°è´´å£«"></a>çŸ¥è¯†å°è´´å£«</h4><p>DELEMITER<br>    è¯¥å…³é”®å­—ç”¨æ¥å£°æ˜SQLè¯­å¥çš„åˆ†éš”ç¬¦ï¼Œå‘Šè¯‰MySQLè§£é‡Šå™¨ï¼Œæ”¹çŸ­å‘½ä»¤æ˜¯å¦å·²ç»ç»“æŸäº†ï¼Œmysqlæ˜¯å¦å¯ä»¥æ‰§è¡Œäº†ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œdelimiteræ˜¯åˆ†å·;<br>    åœ¨å‘½ä»¤è¡Œå®¢æˆ·ç«¯ä¸­ï¼Œå¦‚æœä¸€è¡Œå‘½ä»¤ä»¥åˆ†å·ç»“æŸï¼Œé‚£ä¹ˆå›è½¦åï¼Œmysqlå°†ä¼šæ‰§è¡Œè¯¥å‘½ä»¤ï¼›</p><h3 id="è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"><a href="#è°ƒç”¨å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"></a>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> procedure_name();</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹"><a href="#æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹"></a>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢db_name æ•°æ®åº“ä¸­çš„æ‰€æœ‰çš„å­˜å‚¨è¿‡ç¨‹</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> mysql.proc <span class="keyword">where</span> db=<span class="string">'db_name'</span>;</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> mysql.proc <span class="keyword">where</span> db=<span class="string">'demo_01'</span>$ #ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å­˜å‚¨è¿‡ç¨‹çš„çŠ¶æ€ä¿¡æ¯</span><br><span class="line">show <span class="function"><span class="keyword">procedure</span> <span class="title">status</span>;</span></span><br><span class="line">show <span class="function"><span class="keyword">procedure</span> <span class="title">status</span>$ # ç¤ºä¾‹</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">-- æŸ¥è¯¢æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="title">show</span> <span class="title">create</span> <span class="title">procedure</span> <span class="title">test</span>.<span class="title">pro_test1</span> \<span class="title">G</span>;</span></span><br><span class="line">show <span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test</span>\<span class="title">G</span>$ #ç¤ºä¾‹</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å­˜å‚¨è¿‡ç¨‹"><a href="#åˆ é™¤å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="åˆ é™¤å­˜å‚¨è¿‡ç¨‹"></a>åˆ é™¤å­˜å‚¨è¿‡ç¨‹</h3><figure class="highlight cal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP <span class="function"><span class="keyword">PROCEDURE</span> [ <span class="title">IF</span> <span class="title">EXISTS</span> ] <span class="title">sp_name</span>;</span></span><br><span class="line"></span><br><span class="line">drop <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test1</span>$ # ç¤ºä¾‹</span></span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-å˜é‡"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-å˜é‡" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - å˜é‡"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - å˜é‡</h2><p>å­˜å‚¨è¿‡ç¨‹æ˜¯å¯ä»¥ç¼–ç¨‹çš„ï¼Œæ„å‘³ç€å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œè¡¨è¾¾å¼ï¼Œæ§åˆ¶ç»“æ„ï¼Œæ¥å®Œæˆæ¯”è¾ƒå¤æ‚çš„åŠŸèƒ½ã€‚(ä½¿å¾—SQLå…·æœ‰è¿‡ç¨‹åŒ–è¯­è¨€çš„å¤„ç†èƒ½åŠ›)  </p><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ul><li>DECLARE</li></ul><p>é€šè¿‡DECLAREå¯ä»¥å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¯¥å˜é‡çš„ä½œç”¨è¿”å›åªèƒ½åœ¨BEGINâ€¦ENDå—ä¸­ã€‚  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DECLARE var_name[ <span class="built_in">..</span>. ]<span class="built_in"> type </span>[DEFAULT value]</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">num</span> <span class="title">int</span> <span class="title">default</span> 5;</span></span><br><span class="line">    <span class="keyword">select</span> num+ <span class="number">10</span>;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">num</span> <span class="title">int</span> <span class="title">default</span> 10;</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'numçš„å€¼ä¸º'</span>,num);</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test1()$</span><br><span class="line">call pro_test2()$</span><br><span class="line"></span><br><span class="line">delimiter $</span><br></pre></td></tr></table></figure><ul><li>SET</li></ul><p>ç›´æ¥èµ‹å€¼ä½¿ç”¨SETï¼Œå¯ä»¥èµ‹å¸¸é‡æˆ–è€…èµ‹è¡¨è¾¾å¼ï¼Œå…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">SET</span> var_name = expr [ , <span class="attribute">var_name</span>=expr ] <span class="built_in">..</span><span class="built_in">..</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">pro_test3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">BEGIN</span></span></span><br><span class="line"><span class="function">    <span class="title">DECLARE</span> <span class="title">NAME</span> <span class="title">VARCHAR</span><span class="params">(20)</span>;</span></span><br><span class="line">    <span class="keyword">SET</span> NAME = <span class="string">'MYSQL'</span>;</span><br><span class="line">    <span class="keyword">SELECT</span> NAME ;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">pro_demo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">num</span> <span class="title">int</span> <span class="title">default</span> 0;</span></span><br><span class="line">    <span class="keyword">set</span> num = num +<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">select</span> num;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test3()$</span><br><span class="line">call pro_demo()$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ selectâ€¦.into æ–¹å¼è¿›è¡Œèµ‹å€¼æ“ä½œï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_test5()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> countnum <span class="built_in">int</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> countnum <span class="keyword">from</span> city;</span><br><span class="line">    <span class="keyword">select</span> countnum;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> PPROCEDURE pro_demo()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> <span class="keyword">num</span> <span class="built_in">int</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> <span class="keyword">num</span> <span class="keyword">from</span> city;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'cityè¡¨ä¸­çš„è®°å½•æ•°ä¸º'</span>,<span class="keyword">num</span>);</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> pro_test5()$</span><br><span class="line"><span class="keyword">call</span> pro_demo()$</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-ifåˆ¤æ–­"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-ifåˆ¤æ–­" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - ifåˆ¤æ–­"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - ifåˆ¤æ–­</h2><h3 id="ifæ¡ä»¶åˆ¤æ–­"><a href="#ifæ¡ä»¶åˆ¤æ–­" class="headerlink" title="ifæ¡ä»¶åˆ¤æ–­"></a>ifæ¡ä»¶åˆ¤æ–­</h3><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> search_condition then statement_list</span><br><span class="line">      [ <span class="keyword">elseif</span> search_condition then statement_list ] ...</span><br><span class="line">      [ <span class="keyword">else</span> statementlist ]</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®å®šä¹‰çš„èº«é«˜å˜é‡ï¼Œåˆ¤å®šå½“å‰èº«é«˜çš„æ‰€å±çš„èº«æç±»å‹</span><br><span class="line"></span><br><span class="line"><span class="number">180</span>åŠä»¥ä¸Š----------ã€‹èº«æé«˜æŒ‘</span><br><span class="line"><span class="number">170</span> ~ <span class="number">180</span>----------ã€‹æ ‡å‡†èº«æ</span><br><span class="line"><span class="number">170</span>ä¸€ä¸‹------------ã€‹ä¸€èˆ¬èº«æ</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">delimiter &amp;</span><br><span class="line">create procedure pro_test4()</span><br><span class="line">begin</span><br><span class="line">    declare height int<span class="built_in"> default </span>175;</span><br><span class="line">    declare description varchar(50)<span class="built_in"> default </span><span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> hegith &gt;= 180 then</span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'èº«æé«˜æŒ‘'</span>;</span><br><span class="line">    elseif height &gt;=170 <span class="keyword">and</span> height &lt; 180 then</span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'æ ‡å‡†èº«æ'</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'ä¸€èˆ¬èº«æ'</span>;</span><br><span class="line">    end <span class="keyword">if</span>;</span><br><span class="line">    select concat(<span class="string">'èº«é«˜'</span>,height,<span class="string">'å¯¹åº”çš„èº«æç±»å‹ä¸º'</span>,description);</span><br><span class="line">end$</span><br><span class="line"></span><br><span class="line">call pro_test()$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-è¾“å…¥å‚æ•°"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-è¾“å…¥å‚æ•°" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - è¾“å…¥å‚æ•°"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - è¾“å…¥å‚æ•°</h2><p><strong>ä¼ é€’å‚æ•°</strong></p><p>è¯­æ³•æ ¼å¼ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">procedure_name</span><span class="params">([ <span class="keyword">in</span> / <span class="keyword">out</span> / inout ]å‚æ•°åç§° å‚æ•°ç±»å‹)</span></span></span><br><span class="line"><span class="function">...</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># <span class="title">IN</span> è¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¾“å…¥ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è°ƒç”¨æ–¹ä¼ å…¥å€¼ï¼Œé»˜è®¤</span></span><br><span class="line"><span class="function"># <span class="title">OUT</span> è¯¥å‚æ•°ä½œä¸ºè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼</span></span><br><span class="line"><span class="function"># <span class="title">INOUT</span> æ—¢å¯ä»¥ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¾“å‡ºå‚æ•°</span></span><br></pre></td></tr></table></figure><p><strong>IN - è¾“å…¥</strong></p><p>éœ€æ±‚ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®å®šä¹‰çš„èº«é«˜å˜é‡ï¼Œåˆ¤å®šå½“å‰èº«é«˜çš„æ‰€å±çš„èº«æç±»å‹</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line">create procedure pro_test5(<span class="keyword">in</span> height int)</span><br><span class="line">begin</span><br><span class="line">    declare description varchar(50)<span class="built_in"> default </span><span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span> hegith &gt;= 180 then</span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'èº«æé«˜æŒ‘'</span>;</span><br><span class="line">    elseif height &gt;=170 <span class="keyword">and</span> height &lt; 180 then</span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'æ ‡å‡†èº«æ'</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="builtin-name">set</span> <span class="attribute">description</span>=<span class="string">'ä¸€èˆ¬èº«æ'</span>;</span><br><span class="line">    end <span class="keyword">if</span>;</span><br><span class="line">    select concat(<span class="string">'èº«é«˜'</span>,height,<span class="string">'å¯¹åº”çš„èº«æç±»å‹ä¸º'</span>,description);</span><br><span class="line">end$</span><br><span class="line"></span><br><span class="line">call pro_test5(198)$</span><br><span class="line">call pro_test5(178)$</span><br><span class="line">call pro_test5(158)$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-è¾“å‡ºå‚æ•°"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-è¾“å‡ºå‚æ•°" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - è¾“å‡ºå‚æ•°"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - è¾“å‡ºå‚æ•°</h2><p>éœ€æ±‚ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ ¹æ®ä¼ å…¥çš„èº«é«˜å˜é‡ï¼Œè·å–å½“å‰èº«é«˜çš„æ‰€å±çš„èº«æç±»å‹</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test5</span><span class="params">(<span class="keyword">in</span> height int ,<span class="keyword">out</span> description varchar(10)</span>)</span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">if</span> <span class="title">height</span> &gt;=180 <span class="title">then</span></span></span><br><span class="line"><span class="function">        <span class="title">set</span> <span class="title">description</span>='èº«æé«˜æŒ‘';</span></span><br><span class="line">    elseif height &gt;= <span class="number">170</span> <span class="keyword">and</span> height &lt; <span class="number">180</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">set</span> description=<span class="string">'èº«ææ ‡å‡†'</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">set</span> description=<span class="string">'ä¸€èˆ¬èº«æ'</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test5(<span class="number">188</span>,@description)$</span><br><span class="line"># @description ä»£è¡¨ç”¨æˆ·çš„å˜é‡ï¼›ç”¨æˆ·çš„ä¼šè¯å˜é‡</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @description$ # æŸ¥è¯¢ç”¨æˆ·ä¼šè¯å˜é‡å–å€¼</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><p><strong>å°çŸ¥è¯†</strong><br>@descriptionï¼šè¿™ç§å˜é‡è¦åœ¨å˜é‡åç§°å‰é¢åŠ ä¸Šâ€œ@â€ç¬¦å·ï¼Œå«åšç”¨æˆ·ä¼šè¯å˜é‡ï¼Œä»£è¡¨æ•´ä¸ªä¼šè¯è¿‡ç¨‹å®ƒéƒ½æ˜¯æœ‰ä½œç”¨çš„ï¼Œè¿™ä¸ªç±»ä¼¼äºå…¨å±€å˜é‡ä¸€æ ·ã€‚<br>@@global.sort_buffer_size:è¿™ç§åœ¨å˜é‡å‰åŠ ä¸Šâ€œ@@â€ï¼Œå«åšç³»ç»Ÿå˜é‡ï¼›  </p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">set</span> <span class="variable">@name</span>=<span class="string">'itcast'</span>$</span><br><span class="line"></span><br><span class="line"><span class="literal">select</span> <span class="variable">@name</span>$</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-caseç»“æ„"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-caseç»“æ„" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - caseç»“æ„"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - caseç»“æ„</h2><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ–¹å¼ä¸€ï¼š  </span><br><span class="line"><span class="keyword">CASE</span> case_value <span class="meta"># case_value æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">WHEN</span> when_value <span class="keyword">THEN</span> statement_list <span class="meta"># statement_list SQLè¯­å¥</span></span><br><span class="line">    [ <span class="keyword">WHEN</span> when_value <span class="keyword">THEN</span> statement_list ] ...</span><br><span class="line">    [ <span class="keyword">ELSE</span> statement_list ]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹æ‹¾äºŒï¼š  </span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> search_condition <span class="keyword">THEN</span> statement_list <span class="meta"># search_condition æ¡ä»¶è¡¨è¾¾å¼ï¼›å¦‚æœè¯¥è¡¨è¾¾å¼ä¸ºçœŸåªæ‰§è¡ŒTHENåçš„statement_list SQLè¯­å¥</span></span><br><span class="line">    [ <span class="keyword">WHEN</span> search_condition <span class="keyword">THEN</span> statement_list ] ...</span><br><span class="line">    [ <span class="keyword">ELSE</span> statement_list ]</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®šä¸€ä¸ªæœˆä»½ï¼Œç„¶åè®¡ç®—å‡ºæ‰€åœ¨çš„å­£åº¦</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test7</span><span class="params">( mon int)</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">result</span> <span class="title">varchar</span><span class="params">(10)</span>;</span></span><br><span class="line">    <span class="keyword">case</span></span><br><span class="line">      when mou&gt;=<span class="number">1</span> <span class="keyword">and</span> mon &lt;=<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span>=<span class="string">'ç¬¬ä¸€å­£åº¦'</span>;</span><br><span class="line">      when mou&gt;=<span class="number">4</span> <span class="keyword">and</span> mon &lt;=<span class="number">6</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span>=<span class="string">'ç¬¬äºŒå­£åº¦'</span>;</span><br><span class="line">      when mou&gt;=<span class="number">7</span> <span class="keyword">and</span> mon &lt;=<span class="number">9</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span>=<span class="string">'ç¬¬ä¸‰å­£åº¦'</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span>=<span class="string">'ç¬¬å››å­£åº¦'</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">'ä¼ é€’çš„æœˆä»½ä¸º'</span>,mon,<span class="string">'ï¼Œ è®¡ç®—å‡ºçš„ç»“æœä¸ºï¼š'</span>,<span class="keyword">result</span>) <span class="keyword">as</span> content;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test7(<span class="number">7</span>)$</span><br><span class="line">call pro_test7(<span class="number">2</span>)$</span><br><span class="line">call pro_test7(<span class="number">11</span>)$</span><br><span class="line">call pro_test7(<span class="number">9</span>)$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-whileå¾ªç¯"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-whileå¾ªç¯" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - whileå¾ªç¯"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - whileå¾ªç¯</h2><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> search_condition <span class="keyword">do</span> <span class="comment"># search_condition æ¡ä»¶æˆç«‹æ‰§è¡Œå¾ªç¯ï¼›æ¡ä»¶ä¸æˆç«‹åˆ™è·³å‡ºå¾ªç¯</span></span><br><span class="line">    statement_list</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">while</span>;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¡ç®—ä»<span class="number">1</span>åŠ åˆ°nçš„å€¼</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹:  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro_test8(n <span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> total <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">declare</span> <span class="keyword">start</span> <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    while <span class="keyword">start</span> &lt;= n <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">set</span> total=total+<span class="keyword">start</span>;</span><br><span class="line">        <span class="keyword">start</span>=<span class="keyword">start</span>+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">while</span>;</span><br><span class="line">    <span class="keyword">select</span> total;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> pro_test8(<span class="number">3</span>)$</span><br><span class="line"><span class="keyword">call</span> pro_test8(<span class="number">6</span>)$</span><br><span class="line"><span class="keyword">call</span> pro_test8(<span class="number">100</span>)$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-repeatå¾ªç¯"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-repeatå¾ªç¯" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - repeatå¾ªç¯"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - repeatå¾ªç¯</h2><p>æœ‰æ¡ä»¶çš„å¾ªç¯æ§åˆ¶è¯­å¥ï¼Œå½“æ»¡è¶³æ¡ä»¶çš„æ—¶å€™é€€å‡ºå¾ªç¯ã€‚<br>whileæ˜¯æ»¡è¶³æ¡ä»¶æ‰æ‰§è¡Œï¼Œrepeatæ˜¯æ»¡è¶³æ¡ä»¶å°±é€€å‡ºå¾ªç¯ã€‚  </p><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight cal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REPEAT</span></span><br><span class="line">    statement_list</span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNTIL</span> search_condition</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">REPEAT</span>;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¡ç®—ä»<span class="number">1</span>åŠ åˆ°nçš„å€¼</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test9</span><span class="params">(n int)</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">total</span> <span class="title">int</span> <span class="title">default</span> 0;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">repeat</span></span><br><span class="line">        <span class="keyword">set</span> total=total+n;</span><br><span class="line">        <span class="keyword">set</span> n=n-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">until</span> n=<span class="number">0</span> # æ­¤å¤„ä¸åŠ åˆ†å·ï¼›åŠ åˆ†å·æŠ¥é”™ï¼›æ»¡è¶³å½“å‰æ¡ä»¶åˆ™è·³å‡ºå¾ªç¯</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">repeat</span>;</span><br><span class="line">    <span class="keyword">select</span> total;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test10(<span class="number">50</span>)$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-loopå¾ªç¯"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-loopå¾ªç¯" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - loopå¾ªç¯"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - loopå¾ªç¯</h2><h3 id="loopè¯­å¥"><a href="#loopè¯­å¥" class="headerlink" title="loopè¯­å¥"></a>loopè¯­å¥</h3><p>LOOPå®ç°ç®€å•çš„å¾ªç¯ï¼Œé€€å‡ºå¾ªç¯çš„æ¡ä»¶éœ€è¦ä½¿ç”¨å…¶ä»–çš„è¯­å¥å®šä¹‰ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨LEAVEè¯­å¥å®ç°ï¼Œå…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š  </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ begin_label: ] <span class="keyword">LOOP</span></span><br><span class="line">    statement_list</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">LOOP</span> [ end_label ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸åœ¨ statement_list ä¸­å¢åŠ é€€å‡ºå¾ªç¯çš„è¯­å¥ï¼Œé‚£ä¹ˆLOOPè¯­å¥å¯ä»¥ç”¨æ¥å®ç°ç®€å•çš„æ­»å¾ªç¯</p><h3 id="leaveè¯­å¥"><a href="#leaveè¯­å¥" class="headerlink" title="leaveè¯­å¥"></a>leaveè¯­å¥</h3><p>ç”¨æ¥ä»æ ‡æ³¨çš„æµç¨‹æ„é€ ä¸­é€€å‡ºï¼Œé€šå¸¸å’ŒBEGINâ€¦.ENDæˆ–è€…å¾ªç¯ä¸€èµ·ä½¿ç”¨ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨LOOPå’ŒLEAVEçš„ç®€å•ä¾‹å­ï¼Œé€€å‡ºå¾ªç¯ï¼›</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="function"><span class="keyword">PROCEDURE</span> <span class="title">pro_test10</span><span class="params">(n int)</span></span></span><br><span class="line"><span class="function"><span class="title">BEGIN</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">total</span> <span class="title">int</span> <span class="title">default</span> 0;</span></span><br><span class="line"></span><br><span class="line">    ins:<span class="keyword">LOOP</span></span><br><span class="line">        <span class="keyword">IF</span> n &lt;= <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          leave ins;</span><br><span class="line">        <span class="keyword">ELSE</span></span><br><span class="line">          <span class="keyword">SET</span> total=total+n;</span><br><span class="line">          <span class="keyword">SET</span> n=n-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">LOOP</span> ins;</span><br><span class="line">    <span class="keyword">select</span> total;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="function"><span class="keyword">procedure</span> <span class="title">pro_test10</span><span class="params">(n int)</span></span></span><br><span class="line"><span class="function"><span class="title">begin</span></span></span><br><span class="line"><span class="function">    <span class="title">declare</span> <span class="title">total</span> <span class="title">int</span> <span class="title">default</span> 0;</span></span><br><span class="line"></span><br><span class="line">    c:<span class="keyword">loop</span></span><br><span class="line">        <span class="keyword">set</span> total=total+n;</span><br><span class="line">        <span class="keyword">set</span> n=n-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> n&lt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">            leave c; # æ»¡è¶³æ¡ä»¶è·³å‡ºå¾ªç¯</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span> c;</span><br><span class="line">    <span class="keyword">select</span> total;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line">call pro_test10(<span class="number">100</span>)$</span><br><span class="line">call pro_test10(<span class="number">99</span>)$</span><br><span class="line">call pro_test10(<span class="number">3</span>)$</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-æ¸¸æ ‡ä»‹ç»"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-æ¸¸æ ‡ä»‹ç»" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - æ¸¸æ ‡ä»‹ç»"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - æ¸¸æ ‡ä»‹ç»</h2><p>æ¸¸æ ‡æ˜¯ç”¨æ¥å­˜å‚¨æŸ¥è¯¢ç»“æœé›†çš„æ•°æ®ç±»å‹ï¼Œå”‰å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨å…‰æ ‡å¯¹ç»“æœé›†è¿›è¡Œå¾ªç¯çš„å¤„ç†ã€‚<br>å…‰æ ‡çš„ä½¿ç”¨åŒ…æ‹¬å…‰æ ‡çš„å£°æ˜ã€OPENã€FETCHå’ŒCLOSEã€‚  </p><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-æ¸¸æ ‡åŸºæœ¬æ“ä½œ"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-æ¸¸æ ‡åŸºæœ¬æ“ä½œ" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - æ¸¸æ ‡åŸºæœ¬æ“ä½œ"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - æ¸¸æ ‡åŸºæœ¬æ“ä½œ</h2><p>å…¶è¯­æ³•åˆ†åˆ«å¦‚ä¸‹ï¼š  </p><p>å£°æ˜å…‰æ ‡ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> cursor_name <span class="keyword">CURSOR</span> <span class="keyword">for</span> select_statement;</span><br></pre></td></tr></table></figure><p>OPENå…‰æ ‡ï¼š  </p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OPEN cursor_name<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>FETCHå…‰æ ‡ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FETCH cursor_name INTO var_name [ , var_name ] <span class="string">...</span> <span class="comment"># æ¯æŠ“å–ä¸€æ¬¡ï¼Œå³è·å–ç»“æœé›†å½“ä¸­æ¯ä¸€è¡Œæ•°æ®ï¼›è°ƒç”¨ä¸€æ¬¡æŒ‡é’ˆå¾€ä¸‹æŒ‡å‘ä¸€æ¬¡ï¼›è°ƒç”¨ä¸€æ¬¡æŒ‡é’ˆå¾€ä¸‹æŒ‡å‘ä¸€æ¬¡ï¼›å½“æŒ‡é’ˆæŒ‡åˆ°æœ€åæ²¡æœ‰æ•°æ®çš„é‚£ä¸€è¡Œæ—¶ï¼Œå³æ­¤æ—¶å°±åº”è¯¥é€€å‡ºæ¸¸æ ‡äº†ï¼›</span></span><br></pre></td></tr></table></figure><p>CLOSEå…‰æ ‡ï¼š  </p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CLOSE cursor_name<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š<br>åˆå§‹åŒ–è„šæœ¬:  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'å§“å'</span>,</span><br><span class="line">  age <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">comment</span> <span class="string">'å¹´é¾„'</span>,</span><br><span class="line">  salary <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">comment</span> <span class="string">'è–ªæ°´'</span>,</span><br><span class="line">  primary <span class="keyword">key</span>(<span class="string">'id'</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(<span class="keyword">id</span>,<span class="keyword">name</span>,age,salary) <span class="keyword">values</span> (<span class="literal">null</span>,<span class="string">'é‡‘æ¯›ç‹®ç‹'</span>,<span class="number">55</span>,<span class="number">3800</span>),(<span class="literal">null</span>,<span class="string">'ç™½çœ‰é¹°ç‹'</span>,<span class="number">60</span>,<span class="number">4400</span>),(<span class="literal">null</span>,<span class="string">'é’ç¿¼è ç‹'</span>,<span class="number">38</span>,<span class="number">2800</span>),(<span class="literal">null</span>,<span class="string">'ç´ è¡«é¾™ç‹'</span>,<span class="number">42</span>,<span class="number">1800</span>);</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢empè¡¨ä¸­æ•°æ®ï¼Œå¹¶é€è¡Œè·å–è¿›è¡Œæ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delimiter</span> $</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro_test11()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> e_id <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">declare</span> e_name <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    decalre e_age <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">declare</span> e_salary <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">declare</span> emp_result <span class="keyword">cursor</span> fro <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">open</span> emp_result;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_naem,e_age,e_salary;</span><br><span class="line">    <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_naem,e_age,e_salary;</span><br><span class="line">    <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_naem,e_age,e_salary;</span><br><span class="line">    <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_naem,e_age,e_salary;</span><br><span class="line">    <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_naem,e_age,e_salary;</span><br><span class="line">    <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">close</span> emp_result;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"># empè¡¨å½“ä¸­åªæœ‰å››æ¡æ•°æ®ï¼Œå¦‚æœ<span class="keyword">fetch</span>çš„æ¬¡æ•°å¤§äºè¡¨å½“ä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆ<span class="keyword">fetch</span>è¡¨ä¸­æ€»è¡Œæ•°ä¾ç„¶å¯ä»¥æ‰“å°å‡ºæ¥ï¼Œä¸€æ—¦<span class="keyword">fetch</span>å¤§äºè¡¨ä¸­çš„æ€»è¡Œæ•°åˆ™è¿›è¡ŒæŠ¥é”™ï¼›</span><br><span class="line"></span><br><span class="line"># é€šè¿‡<span class="keyword">fetch</span>ä¸€è¡Œä¸€è¡Œè¿›è¡ŒæŠ“å–è®°å½•ç¼–å†™çš„æ•ˆç‡ååˆ†ä½ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> pro_test11();</span><br><span class="line"><span class="keyword">delimiter</span> ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-å¾ªç¯è·å–æ¸¸æ ‡"><a href="#å­˜å‚¨è¿‡ç¨‹-è¯­æ³•-å¾ªç¯è·å–æ¸¸æ ‡" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - å¾ªç¯è·å–æ¸¸æ ‡"></a>å­˜å‚¨è¿‡ç¨‹ - è¯­æ³• - å¾ªç¯è·å–æ¸¸æ ‡</h2><blockquote><p>å¾ªç¯å½“ä¸­ï¼Œæ¸¸æ ‡çš„fetché€€å‡ºåˆ¤æ–­</p></blockquote><p>1ï¼‰ count(*) into num;  num â€“<br>2ï¼‰ mysqlå­˜åœ¨æœºåˆ¶ï¼Œå˜é‡ï¼Œé€šè¿‡æ”¹å˜è¯¥å˜é‡å–å€¼çŠ¶æ€åŠé€€å‡ºfetch  </p><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delimiter</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro_test12()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> e_id <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    decalre e_name <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    decalre e_age <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    decalre e_salary <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">declare</span> has_data <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;#å½“has_dataä¸º<span class="number">1</span>æ—¶è¡¨ç¤ºè¿˜æœ‰æ•°æ®ï¼›å½“has_dataä¸º<span class="number">0</span>æ—¶è¡¨ç¤ºæ²¡æœ‰æ•°æ®</span><br><span class="line"></span><br><span class="line">    <span class="keyword">declare</span> emp_result <span class="keyword">cursor</span> <span class="keyword">for</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line">    <span class="keyword">DECLARE</span> <span class="keyword">EXIT</span> <span class="keyword">HANDLER</span> <span class="keyword">FOR</span> <span class="keyword">NOT</span> <span class="built_in">FOUND</span> <span class="keyword">set</span> has_data=<span class="number">0</span>;#é€€å‡ºå½“å‰æ¸¸æ ‡æŒ‡å‘ç¨‹åºå¹¶è®¾ç½®has_dataä¸º<span class="number">0</span>ï¼›æ­¤ä¸ºmysqlæä¾›çš„ä¸€ç§æœºåˆ¶ï¼›åŒæ—¶è¯¥å¥è¯éœ€è¦å£°æ˜åœ¨å£°æ˜æ¸¸æ ‡çš„ä¸‹æ–¹ï¼›å½“æ¸¸æ ‡è¿›è¡Œ<span class="keyword">fetch</span>è·å–ä¸åˆ°æ•°æ®çš„æ—¶å€™ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œè§¦å‘ï¼›</span><br><span class="line"></span><br><span class="line">    <span class="keyword">open</span> emp_reuslt;</span><br><span class="line"></span><br><span class="line">    repeat</span><br><span class="line">        <span class="keyword">fetch</span> emp_result <span class="keyword">into</span> e_id,e_name,e_age,e_salary;</span><br><span class="line">        <span class="keyword">select</span> concat(<span class="string">'idä¸ºï¼š'</span> , e_id,<span class="string">', åå­—ä¸º: '</span> , e_name , <span class="string">', å¹´é¾„ä¸ºï¼š'</span> , e_age , <span class="string">', è–ªèµ„ä¸ºï¼š'</span> , e_salary);</span><br><span class="line">        <span class="keyword">until</span> has_data=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span> repeat;</span><br><span class="line">    <span class="keyword">close</span> emp_result;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> pro_test12()$</span><br><span class="line"></span><br><span class="line"><span class="keyword">delimiter</span> ;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨å‡½æ•°"><a href="#å­˜å‚¨å‡½æ•°" class="headerlink" title="å­˜å‚¨å‡½æ•°"></a>å­˜å‚¨å‡½æ•°</h2><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION function_name([ param<span class="built_in"> type </span><span class="built_in">..</span>. ])</span><br><span class="line">RETURNS type</span><br><span class="line">BEGIN</span><br><span class="line">    <span class="built_in">..</span><span class="built_in">..</span>.</span><br><span class="line">END;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹ï¼š<br>å®šä¹‰ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œè¯·æ±‚æ»¡è¶³æ¡ä»¶çš„æ€»è®°å½•æ•°ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delimiter</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> count_city(countryId <span class="type">int</span>)</span><br><span class="line"><span class="keyword">returns</span> <span class="type">int</span> # æ­¤å¤„ä¸éœ€è¦åˆ†å·</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> cnum <span class="type">int</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">select</span> count(*) <span class="keyword">into</span> cnum <span class="keyword">from</span> city <span class="keyword">where</span> country_id = countryId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cnum;</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">delimiter</span> ;</span><br><span class="line"></span><br><span class="line"># å­˜å‚¨è¿‡ç¨‹è™½ç„¶æ²¡æœ‰è¿”å›å€¼ï¼›ä½†æ˜¯ä¾ç„¶å¯ä»¥è¿”å›ç»“æœï¼›å› ä¸ºå…¶å‚æ•°åˆ—è¡¨å½“ä¸­æœ‰<span class="keyword">in</span>ã€<span class="keyword">out</span>ï¼ˆè¿”å›å€¼ï¼‰ã€<span class="keyword">inout</span>ï¼›å­˜å‚¨å‡½æ•°èƒ½åšçš„äº‹æƒ…ï¼›å­˜å‚¨è¿‡ç¨‹ä¹Ÿå¯ä»¥åšï¼›</span><br></pre></td></tr></table></figure><blockquote><p>è°ƒç”¨å­˜å‚¨å‡½æ•°å‘½ä»¤</p></blockquote><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> count_city(<span class="number">1</span>)$</span><br><span class="line"><span class="keyword">select</span> count_city(<span class="number">2</span>)$</span><br></pre></td></tr></table></figure><blockquote><p>åˆ é™¤å­˜å‚¨å‡½æ•°å‘½ä»¤</p></blockquote><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop <span class="keyword">function</span> <span class="title">count_city$</span></span><br></pre></td></tr></table></figure><h2 id="è§¦å‘å™¨-ä»‹ç»"><a href="#è§¦å‘å™¨-ä»‹ç»" class="headerlink" title="è§¦å‘å™¨ - ä»‹ç»"></a>è§¦å‘å™¨ - ä»‹ç»</h2><p>è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯åœ¨insertã€updateã€deleteä¹‹å‰æˆ–è€…ä¹‹åï¼Œè§¦å‘å¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„SQLè¯­å¥é›†åˆï¼Œè§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ—¥å¿—è®°å½•ï¼Œæ•°æ®æ ¡éªŒç­‰æ“ä½œï¼›  </p><p>ä½¿ç”¨åˆ«åOLDå’ŒNEWæ¥å¼•ç”¨è§¦å‘å™¨ä¸­å‘ç”Ÿå˜åŒ–çš„è®°å½•å†…å®¹ï¼Œè¿™ä¸å…¶ä»–çš„æ•°æ®åº“æ˜¯ç›¸ä¼¼çš„ã€‚<br>ç°åœ¨è§¦å‘å™¨è¿˜åªæ”¯æŒè¡Œçº§è§¦å‘ï¼Œä¸æ”¯æŒè¯­å¥çº§è§¦å‘ã€‚  </p><table>  <tr>    <th>è§¦å‘å™¨ç±»å‹</th>    <th>NEWå’ŒOLDçš„ä½¿ç”¨</th>  </tr>  <tr>    <td>INSERTå‹è§¦å‘å™¨</td>    <td>NEWè¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»æ–°å¢çš„æ•°æ®</td>  </tr>  <tr>    <td>UPDATEå‹è§¦å‘å™¨</td>    <td>OLDè¡¨ç¤ºä¿®æ”¹ä¹‹å‰çš„æ•°æ®ï¼ŒNEWè¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»ä¿®æ”¹åçš„æ•°æ®</td>  </tr>  <tr>    <td>DELETEå‹è§¦å‘å™¨</td>    <td>OLDè¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»åˆ é™¤çš„æ•°æ®</td>  </tr></table><h2 id="è§¦å‘å™¨-åˆ›å»ºåŠåº”ç”¨"><a href="#è§¦å‘å™¨-åˆ›å»ºåŠåº”ç”¨" class="headerlink" title="è§¦å‘å™¨ - åˆ›å»ºåŠåº”ç”¨"></a>è§¦å‘å™¨ - åˆ›å»ºåŠåº”ç”¨</h2><h3 id="åˆ›å»ºè§¦å‘å™¨"><a href="#åˆ›å»ºè§¦å‘å™¨" class="headerlink" title="åˆ›å»ºè§¦å‘å™¨"></a>åˆ›å»ºè§¦å‘å™¨</h3><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> trigger_name</span><br><span class="line"></span><br><span class="line"><span class="keyword">before</span>/<span class="keyword">after</span> <span class="keyword">insert</span>/<span class="keyword">update</span>/<span class="keyword">delete</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># before åœ¨...ä¹‹å‰/after åœ¨...ä¹‹å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">on</span> tb1_name</span><br><span class="line"></span><br><span class="line">[ <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> ] <span class="comment">-- å½“å‰æ“ä½œçš„æ˜¯ä¸€ä¸ªè¡Œçº§è§¦å‘å™¨;oracleæ•°æ®åº“å½“ä¸­æ—¢æœ‰è¡Œçº§è§¦å‘å™¨ä¹Ÿæœ‰è¯­å¥çº§çš„è§¦å‘å™¨ï¼›è€Œmysqlæ•°æ®åº“å½“ä¸­åªæ”¯æŒè¡Œçº§è§¦å‘å™¨ç°è¿˜ä¸æ”¯æŒè¯­å¥çº§è§¦å‘å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  trigger_stmt;<span class="comment">--è§¦å‘çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡è§¦å‘å™¨è®°å½• empè¡¨çš„æ•°æ®å˜æ›´æ—¥å¿—ï¼ŒåŒ…å«æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ï¼›</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><p>é¦–å…ˆåˆ›å»ºä¸€å¼ æ—¥å¿—è¡¨:  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_logs(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">    operation <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'æ“ä½œç±»å‹ï¼Œinsert/update/delete'</span>,</span><br><span class="line">    operate_time datatime <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'æ“ä½œæ—¶é—´'</span>,</span><br><span class="line">    operate_id <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'æ“ä½œè¡¨çš„id'</span>,</span><br><span class="line">    operate_params <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">comment</span> <span class="string">'æ“ä½œå‚æ•°'</span>,</span><br><span class="line">    primary <span class="keyword">key</span>(<span class="string">'id'</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>$</span><br></pre></td></tr></table></figure><p>åˆ›å»ºinsertæ€§è§¦å‘å™¨ï¼Œå®Œæˆæ’å…¥æ•°æ®æ—¶çš„æ—¥å¿—è®°å½•ï¼›  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELIMITER</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">trigger</span> emp_logs_insert_trigger</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs(id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(</span><br><span class="line">      <span class="keyword">null</span>,<span class="string">'insert'</span>,now(),<span class="built_in">new</span>.id,concat( <span class="string">'æ’å…¥å ( idï¼š'</span>, <span class="built_in">new</span>.id , <span class="string">', name: '</span> , <span class="built_in">new</span>.name , <span class="string">' ,  age: '</span> ,  <span class="built_in">new</span>.age , <span class="string">' , salary: '</span> , <span class="built_in">new</span>.salary , <span class="string">')'</span>)</span><br><span class="line">    );</span><br><span class="line">    # æ­¤å¤„çš„<span class="built_in">new</span>.idå³æ–°æ’å…¥empè¡¨ä¸­æ•°æ®çš„è®°å½•çš„idï¼Œå³empå½“ä¸­çš„idå­—æ®µï¼›</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(id,<span class="type">name</span>,age,salary) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">'å…‰æ˜å·¦ä½¿'</span>,<span class="number">30</span>,<span class="number">3500</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp$</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_logs$</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(id,<span class="type">name</span>,age,salary) <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">'å…‰æ˜å³ä½¿'</span>,<span class="number">35</span>,<span class="number">3800</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">trigger</span> emp_logs_update_trigger</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs(id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(</span><br><span class="line">      <span class="keyword">null</span>,<span class="string">'update'</span>,now(),<span class="built_in">new</span>.id,</span><br><span class="line">      concat( </span><br><span class="line">        <span class="string">'ä¿®æ”¹å‰ ( idï¼š'</span>, <span class="built_in">old</span>.id ,</span><br><span class="line">        <span class="string">',name: '</span> , <span class="built_in">old</span>.name ,</span><br><span class="line">        <span class="string">',age: '</span> ,  <span class="built_in">old</span>.age ,</span><br><span class="line">        <span class="string">',salary: '</span> , <span class="built_in">old</span>.salary ,</span><br><span class="line">        <span class="string">') ä¿®æ”¹å( idï¼š'</span>, <span class="built_in">new</span>.id ,</span><br><span class="line">        <span class="string">',name: '</span> , <span class="built_in">new</span>.name ,</span><br><span class="line">        <span class="string">',age: '</span> ,  <span class="built_in">new</span>.age ,</span><br><span class="line">        <span class="string">',salary: '</span> , <span class="built_in">new</span>.salary ,</span><br><span class="line">        <span class="string">')'</span>  </span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">    # æ­¤å¤„çš„<span class="built_in">new</span>.idå³æ–°æ’å…¥empè¡¨ä¸­æ•°æ®çš„è®°å½•çš„idï¼Œå³empå½“ä¸­çš„idå­—æ®µï¼›</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> age=<span class="number">39</span> <span class="keyword">where</span> id=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp$</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_logs$</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">trigger</span> emp_logs_delete_trigger</span><br><span class="line"><span class="keyword">after</span> <span class="keyword">delete</span></span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> emp_logs(id,operation,operate_time,operate_id,operate_params) <span class="keyword">values</span>(</span><br><span class="line">      <span class="keyword">null</span>,<span class="string">'delete'</span>,now(),<span class="built_in">old</span>.id,</span><br><span class="line">      concat(</span><br><span class="line">        <span class="string">'åˆ é™¤å‰( idï¼š'</span>, <span class="built_in">old</span>.id ,</span><br><span class="line">        <span class="string">',name: '</span> , <span class="built_in">old</span>.name ,</span><br><span class="line">        <span class="string">',age: '</span> ,  <span class="built_in">old</span>.age ,</span><br><span class="line">        <span class="string">',salary: '</span> , <span class="built_in">old</span>.salary ,</span><br><span class="line">        <span class="string">')'</span>  </span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line"><span class="keyword">end</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> id=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp$</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_logs$</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> id=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp$</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_logs$</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELIMITER</span> ;</span><br></pre></td></tr></table></figure><h2 id="è§¦å‘å™¨-æŸ¥çœ‹åŠåˆ é™¤"><a href="#è§¦å‘å™¨-æŸ¥çœ‹åŠåˆ é™¤" class="headerlink" title="è§¦å‘å™¨ - æŸ¥çœ‹åŠåˆ é™¤"></a>è§¦å‘å™¨ - æŸ¥çœ‹åŠåˆ é™¤</h2><h3 id="åˆ é™¤è§¦å‘å™¨"><a href="#åˆ é™¤è§¦å‘å™¨" class="headerlink" title="åˆ é™¤è§¦å‘å™¨"></a>åˆ é™¤è§¦å‘å™¨</h3><p>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> [ <span class="built_in">schema_name</span>.] trigger_name</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æŒ‡å®šschema_nameï¼Œé»˜è®¤ä¸ºå½“å‰æ•°æ®åº“ã€‚</p><h3 id="æŸ¥çœ‹è§¦å‘å™¨"><a href="#æŸ¥çœ‹è§¦å‘å™¨" class="headerlink" title="æŸ¥çœ‹è§¦å‘å™¨"></a>æŸ¥çœ‹è§¦å‘å™¨</h3><p>å¯ä»¥é€šè¿‡æ‰§è¡ŒSHOW TRIGGERS å‘½ä»¤æŸ¥çœ‹è§¦å‘å™¨çš„çŠ¶æ€ã€è¯­æ³•ç­‰ä¿¡æ¯ã€‚<br>è¯­æ³•ç»“æ„ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers;</span><br><span class="line"></span><br><span class="line"># Event è§¦å‘å™¨ç›‘å¬çš„äº‹ä»¶ <span class="keyword">INSERT</span>/<span class="keyword">UPDATE</span>/<span class="keyword">DELETE</span></span><br><span class="line"># <span class="keyword">Table</span> å¯¹äºå“ªä¸€å¼ è¡¨ç›‘å¬çš„è§¦å‘å™¨</span><br><span class="line"># <span class="keyword">Timing</span> è§¦å‘å™¨æ˜¯å‰ç½®è§¦å‘<span class="keyword">BEFORE</span>è¿˜æ˜¯åç½®è§¦å‘<span class="keyword">AFTER</span></span><br><span class="line"># <span class="keyword">Statement</span> è§¦å‘å™¨å®šä¹‰</span><br></pre></td></tr></table></figure><h2 id="ä»Šæ—¥å†…å®¹"><a href="#ä»Šæ—¥å†…å®¹" class="headerlink" title="ä»Šæ—¥å†…å®¹"></a>ä»Šæ—¥å†…å®¹</h2><blockquote><p>Mysqlé«˜çº§-day02</p></blockquote><p>1ï¼‰ MySqlçš„ä½“ç³»ç»“æ„æ¦‚è§ˆï¼ˆMySQLå†…éƒ¨åŸç†ï¼Œå†…éƒ¨æ‰§è¡Œæµç¨‹æœ‰ä¸€ä¸ªè®¤è¯†ï¼‰<br>2ï¼‰ å­˜å‚¨å¼•æ“ï¼ˆInnoDBä»¥åŠMyISAMï¼‰<br>3ï¼‰ ä¼˜åŒ–SQLæ­¥éª¤ï¼ˆä»å“ªäº›æ–¹é¢ä»¥åŠå‚è€ƒæŒ‡æ ‡ï¼‰<br>4ï¼‰ ç´¢å¼•çš„ä½¿ç”¨ï¼ˆåœ¨SQLä¼˜åŒ–ä¸­å¦‚ä½•ä½¿ç”¨ï¼‰<br>5ï¼‰ SQLä¼˜åŒ–  </p><h2 id="ä½“ç³»ç»“æ„"><a href="#ä½“ç³»ç»“æ„" class="headerlink" title="ä½“ç³»ç»“æ„"></a>ä½“ç³»ç»“æ„</h2><h3 id="MySQLçš„ä½“ç³»ç»“æ„æ¦‚è§ˆ"><a href="#MySQLçš„ä½“ç³»ç»“æ„æ¦‚è§ˆ" class="headerlink" title="MySQLçš„ä½“ç³»ç»“æ„æ¦‚è§ˆ"></a>MySQLçš„ä½“ç³»ç»“æ„æ¦‚è§ˆ</h3><p>MySQLçš„ä½“ç³»ç»“æ„å›¾å’Œåœ¨è¿›è¡ŒWebå¼€å‘çš„ä¸‰å±‚æ¶æ„æ˜¯ç›¸ç±»ä¼¼çš„ï¼›  </p><p>Webå¼€å‘æ—¶çš„ä¸‰å±‚æ¶æ„ï¼š<br>ï¼ˆ1ï¼‰å‰ç«¯å‘èµ·è¯·æ±‚å…ˆåˆ°è¾¾controllerï¼›<br>ï¼ˆ2ï¼‰controllerè°ƒserviceï¼›serviceè°ƒç”¨dao;<br>ï¼ˆ3ï¼‰daoå†å»è®¿é—®æ•°æ®åº“ï¼›  </p><p>mysqlçš„ä½“ç³»ç»“æ„å½“ä¸­ï¼Œé¦–å…ˆæœ€ä¸Šé¢çš„éƒ¨åˆ†Connectorså®é™…ä¸Šä»£è¡¨çš„å°±ç›¸å½“äºæ˜¯å®¢æˆ·ç«¯ï¼›<br>åœ¨å®¢æˆ·ç«¯è¿æ¥å½“ä¸­Natice C APIï¼ŒJDBCï¼ŒODBC,.NETï¼ŒPHP,Perlï¼ŒPythonï¼ŒRubyï¼ŒCobolè¿™äº›ä¸ªï¼›<br>JDBCå°±å¾ˆç†Ÿæ‚‰äº†ï¼›åœ¨Javaç¨‹åºå½“ä¸­å¯ä»¥é€šè¿‡JDBCæ¥è¿›è¡Œæ“ä½œmysqlï¼›<br>æ‰€ä»¥æœ€ä¸Šé¢éƒ¨åˆ†å³mysqlè¿æ¥çš„å®¢æˆ·ç«¯é€šè¿‡JDBCæ¥è¿›è¡Œæ“ä½œï¼›<br>ç„¶åç´§æ¥ç€ä¸­å±‚å³MySQL Serverï¼›  </p><p>MySQL Serverå½“ä¸­æœ€ä¸Šé¢ä¸€å±‚å³Connection Poolè¿æ¥æ± ï¼›åœ¨è¿æ¥æ± å½“ä¸­æœ‰å¾ˆå¤šçš„ç»„ä»¶æ¨¡å—Authenticationã€Thread Reuseã€Connection Limitsã€Check Memoryã€Cachesï¼›<br>ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¿æ¥ï¼›<br>è¿™ä¸ªè¿æ¥å°±ä¼šåˆ°MySQL Serverçš„è¿™ä¸ªConnection Poolè¿æ¥æ± å½“ä¸­æ¥è¿›è¡Œè·å–ä¸€ä¸ªè¿æ¥æ¥æ‰§è¡Œå¯¹åº”çš„è¯·æ±‚ï¼›<br>å½“ç„¶ï¼Œåœ¨MySQL Serverçš„Connection Poolè¿›è¡Œè·å–è¿æ¥çš„æ—¶å€™è¿˜éœ€è¦è¿›è¡Œè®¤è¯ã€è¿æ¥æœ€å¤§æ•°ã€ç¼“å­˜ç­‰ç›¸å…³æ“ä½œï¼›<br>æ­¤ä¸ºMySQL Serverçš„ç¬¬ä¸€å±‚è¿æ¥å±‚ï¼›<br>è¿æ¥å±‚ä¸»è¦è´Ÿè´£çš„å°±æ˜¯å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œ<br>MySQL Serveræ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå¼€å¯ä¸€æ®µçº¿ç¨‹è¿›è¡Œä¸å®¢æˆ·ç«¯è¯·æ±‚ç›¸å…³çš„æ“ä½œï¼›<br>è¿™æ˜¯è¿æ¥å±‚ï¼›  </p><p>MySQL Serverå½“ä¸­çš„ç¬¬äºŒå±‚å³Management Services &amp; Utilltiesã€SQL Interfaceã€Parserã€Optimizerã€Caches &amp; Buffers è¿™ä¸€éƒ¨åˆ†ï¼›<br>MySQL Serverç¬¬äºŒå±‚å½“ä¸­æœ‰å¾ˆå¤šçš„ç»„ä»¶ï¼›<br>å…¶ä¸­ç¬¬ä¸€ä¸ªï¼ˆç¬¬ä¸€ä¸ªæ¨¡å—ï¼‰å³MySQLçš„ç®¡ç†æœåŠ¡ä»¥åŠä¸€äº›å·¥å…·ï¼›ç®¡ç†å±‚Management Serviceså½“ä¸­å¯ä»¥è¿›è¡Œæ•°æ®çš„å¤‡ä»½ä¸æ¢å¤ä»¥åŠé›†ç¾¤å®‰å…¨ä»¥åŠç³»ç»Ÿé…ç½®ç›¸å…³çš„å†…å®¹ï¼ˆBackup &amp; Recoveryï¼ŒSecurityï¼ŒReplicationï¼ŒClusterï¼ŒAdministratorï¼ŒConfigurationï¼ŒMigration &amp; Metadataï¼‰<br>ç¬¬äºŒå±‚çš„ç¬¬äºŒä¸ªæ¨¡å—ï¼šSQL Interfaceå³SQLçš„ä¸€ä¸ªæ¥å£ï¼Œåœ¨æ­¤å½“ä¸­å¯ä»¥å»è¿›è¡Œæ‰§è¡Œæˆ–è€…æ˜¯å»å°è£…DMLã€DDLè¯­å¥ä»¥åŠå­˜å‚¨è¿‡ç¨‹ã€å­˜å‚¨å‡½æ•°ã€è§†å›¾ã€è§¦å‘å™¨ç­‰ç­‰ç›¸å…³æ•°æ®åº“å¯¹è±¡ï¼ˆDMLã€DDLã€Stored Proceduresï¼ŒViews ï¼ŒTriggers ï¼Œetc.ï¼‰</p><p>ç¬¬äºŒå±‚çš„ç¬¬ä¸‰ä¸ªæ¨¡å—å³ï¼šParserï¼ŒParserå°±æ˜¯ä¸€ä¸ªè§£æå™¨ï¼Œè¿™ä¸ªè§£æå™¨è§£æçš„æ˜¯å®¢æˆ·ç«¯å‘èµ·çš„ä¸€ä¸ªè¯·æ±‚ï¼Œå®¢æˆ·ç«¯å‘èµ·çš„è¿™ä¸ªè¯·æ±‚å°±æ˜¯SQLè¯­å¥ï¼ŒSQLè¯­å¥éœ€è¦ç»è¿‡è¿™ä¸ªè§£æå™¨Parserçš„è§£æï¼Œè§£æä¹‹åå¹¶ä¸”åœ¨è¿™ä¸€å—è¿›è¡Œç›¸å…³çš„è¿‡æ»¤ï¼ˆQuery Translation,Object Privilegeï¼‰  </p><p>è§£æå®Œæˆä¹‹åï¼Œåœ¨MySQLçš„å†…éƒ¨è¿˜éœ€è¦å‡ ä¸ªè¿‡ç¨‹ï¼›<br>ç¬¬äºŒå±‚çš„ç¬¬å››ä¸ªæ¨¡å—ï¼šOptimizerï¼Œè¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šç§°ä½œä¼˜åŒ–å™¨ï¼›å³åœ¨è§£æå®Œæˆäº†å‰ç«¯è¯·æ±‚è¿‡æ¥çš„SQLè¯­å¥å¹¶è¿›è¡Œç›¸å…³çš„è¿‡æ»¤ä¹‹åï¼ŒMySQLå†…éƒ¨è¿˜é¡»è¦é€šè¿‡å…¶å†…éƒ¨çš„ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œå¯¹å‰ç«¯è¯·æ±‚æ¥çš„SQLè¯­å¥è§£æå¹¶è¿‡æ»¤åè¿›è¡Œä¸€ä¸ªä¼˜åŒ–å¤„ç†ï¼›MySQLå†…éƒ¨ä¼šæŒ‰ç…§å…¶å†…éƒ¨è‡ªå·±çš„ä¸€ä¸ªä¼˜åŒ–ä½“ç³»æ¥è¿›è¡Œä¼˜åŒ–ï¼ˆAccess Pathsï¼ŒStatisticsï¼‰  </p><p>å½“ä¼˜åŒ–å®Œæˆä¹‹åï¼Œæ¥ä¸‹æ¥è¿˜éœ€è¦è¿›è¡Œç¼“å­˜çš„ä¸€ä¸ªæ“ä½œï¼š<br>ç¬¬äºŒç¨‹çš„ç¬¬äº”ä¸ªæ¨¡å—ï¼šCaches &amp; Buffersï¼Œå³æŸ¥è¯¢åœ¨ç¼“å­˜å½“ä¸­æœ‰æ²¡æœ‰è¦æŸ¥è¯¢çš„æ•°æ®ï¼›å¦‚æœå­˜åœ¨æœ‰å¯¹åº”çš„æ ‘æ®ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯èƒ½å°±ç›´æ¥è¿”å›ç»™å‰ç«¯å®¢æˆ·ç«¯äº†ï¼›ï¼ˆGlobal and Engine ï¼ŒSpecific Caches &amp; Buffersï¼‰  </p><p>æ‰€ä»¥ç¬¬äºŒå±‚å½“ä¸­çš„è¿™äº”ä¸ªæ¨¡å—å°±æ˜¯MySQLçš„æœåŠ¡å±‚æ“ä½œï¼›å³å°†å‰ç«¯è¯·æ±‚çš„SQLè¯­å¥è¿›è¡Œå°è£…èµ·æ¥å¹¶ä¸”è¿›è¡Œè§£æä»¥åŠç›¸å…³è¿‡æ»¤ï¼Œä»¥åŠå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œæœ€ç»ˆè¿˜éœ€è¦æ“ä½œMySQLå½“ä¸­çš„ç¼“å­˜åŒºçš„ä¿¡æ¯ï¼›  </p><p>MySQL Serverçš„ç¬¬ä¸‰å±‚ï¼šPluggable Storage Engines(Memoryï¼ŒIndex &amp; Storage Management)ï¼Œæ­¤å¤„å®é™…æŒ‡çš„æ˜¯å­˜å‚¨å¼•æ“ï¼›<br>Pluggableæ’ä»¶å¼çš„å­˜å‚¨å¼•æ“ï¼›<br>ä»¥ä¸‹æ˜¯MySQLå½“ä¸­çš„å­˜å‚¨å¼•æ“:<br>ï¼ˆMyISAMã€InnoDBã€NDBã€Archiveã€Federatedã€Memoryã€Mergeã€Partnerã€Communityã€Custom â€¦.ï¼‰<br>MySQLç‰ˆæœ¬5.5ä¹‹åé»˜è®¤çš„å­˜å‚¨å¼•æ“å³ä¸ºInnoDBï¼›<br>å¼•æ“ï¼šå‘åŠ¨æœºï¼›<br>å­˜å‚¨å¼•æ“æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸é£æœºä¸Šçš„å¼•æ“æ¯”è¾ƒç±»ä¼¼ï¼Œæ¯”å¦‚å®¢æœºåˆ™æœ‰å®¢æœºçš„å¼•æ“ï¼Œå®¢æœºå³è¿é€ä¹˜å®¢ã€æ—…å®¢ï¼›ä½†æ˜¯è¿˜æœ‰å¯¹åº”çš„è´§æœºï¼Œé‚£ä¹ˆè´§æœºå³å¯¹åº”çš„å³è¿è¾“è´§ç‰©çš„ï¼›è¿˜æœ‰ç›´å‡æœºç­‰ç­‰ï¼›ä¸åŒçš„é£æœºæœ‰ä¸åŒçš„é£æœºå¼•æ“ï¼›ä¸åŒçš„é£æœºå¼•æ“åœ¨ç›¸å¯¹åº”çš„æœºå‹å½“ä¸­éƒ½å‘æŒ¥ç€ä¸åŒçš„ä½œç”¨ï¼›åœ¨æ“ä½œçš„æ—¶å€™éœ€è¦è€ƒè™‘åˆ°ï¼Œç”¨æˆ·æ˜¯ä»€ä¹ˆï¼Œç„¶åå»è€ƒè™‘æ›´é€‚åˆå“ªä¸€ç§å¼•æ“ï¼Œå¯¹åº”çš„å‘åŠ¨æœºï¼›åŒæ ·å¯¹äºmysqlçš„å­˜å‚¨å¼•æ“æ˜¯ä¸€ä¸ªé“ç†ï¼›å­˜å‚¨å¼•æ“åˆ™éœ€è¦æ ¹æ®å­˜å‚¨çš„æ•°æ®ä¸åŒæˆ–è€…æ˜¯éœ€æ±‚ä¸åŒè€Œé€‰æ‹©ä¸åŒçš„å­˜å‚¨å¼•æ“æ¥è¿›è¡Œå­˜å‚¨ä¸åŒçš„æ•°æ®ï¼›ï¼‰<br>MySQL Serverçš„ç¬¬ä¸‰å±‚ä¸ºå­˜å‚¨å¼•æ“å±‚ï¼›  </p><p>MySQL Serverçš„ç¬¬å››å±‚å³å­˜å‚¨å±‚ï¼šFile systemï¼ˆNTFSï¼Œufsï¼Œext2/3ï¼ŒNFSï¼ŒSANï¼ŒNASï¼‰<br>Files &amp; Logsï¼ˆRedoï¼ŒUndoï¼ŒDataï¼ŒIndexï¼ŒBinaryï¼ŒErrorï¼ŒQuery and Slowï¼‰<br>åœ¨æ“ä½œMySQLæ•°æ®åº“ä¸­è¡¨å½“ä¸­çš„æ•°æ®çš„æ—¶å€™ï¼Œä¸ç®¡æ˜¯æ’å…¥è¿˜æ˜¯æŸ¥è¯¢æˆ–è€…ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œï¼›å®é™…ä¸Šæœ€ç»ˆéƒ½æ˜¯æ“ä½œçš„File systemå³æ–‡ä»¶ç³»ç»Ÿï¼›æœ€ç»ˆæ“ä½œçš„éƒ½æ˜¯æ–‡ä»¶ç³»ç»Ÿå½“ä¸­çš„æ–‡ä»¶ï¼›è€Œè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿå³å°±å¤„äºç£ç›˜å½“ä¸­ï¼›æ‰€ä»¥æœ€ä¸‹é¢ä¸€å±‚å°±æ–‡ä»¶ç³»ç»Ÿï¼›æœ€é‡è¦æ“ä½œçš„ä¹Ÿå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿï¼›é™¤äº†åœ¨è¡¨ç»“æ„å½“ä¸­çš„æ•°æ®ï¼Œè¿˜æœ‰å¯¹åº”çš„ç´¢å¼•ä¿¡æ¯ã€äºŒè¿›åˆ¶é”™è¯¯ã€æŸ¥è¯¢ã€æ…¢æŸ¥è¯¢æ—¥å¿—ç­‰ï¼›  </p><p>æ­¤ä¸ºMySQLä½“ç³»ç»“æ„å½“ä¸­çš„å››å±‚ï¼›  </p><p>ç¬¬ä¸€å±‚è¿æ¥å±‚ï¼›è´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„å‘é€çš„è¯·æ±‚ï¼›ç„¶åMySQL Serverå¼€å¯ä¸€æ®µçº¿ç¨‹è¿›è¡Œç›¸å…³çš„è®¤è¯æˆæƒä¹‹åå†æ¥è¿›è¡Œè¯·æ±‚çš„å¤„ç†ï¼›<br>ç¬¬äºŒå±‚æœåŠ¡å±‚ï¼šæœåŠ¡å±‚åœ¨ä¸»è¦èµ·åˆ°å¤‡ä»½æ¢å¤ã€SQLå°è£…ã€è§£æè¿‡æ»¤ã€SQLè¯­å¥ä¼˜åŒ–ã€ç¼“å­˜æŸ¥è¯¢ç­‰ç›¸å…³æ“ä½œï¼›<br>ç¬¬ä¸‰å±‚å­˜å‚¨å¼•æ“å±‚ï¼Œé€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“å¯¹ç›¸å…³æ•°æ®è¿›è¡Œç›¸å…³çš„å¤„ç†ï¼›<br>ç¬¬å››å±‚æ–‡ä»¶ç³»ç»Ÿï¼šå½“ç¬¬ä¸‰å±‚çš„æ•°æ®è¿›è¡Œç›¸å…³çš„å¤„ç†å®Œæˆä¹‹åï¼Œåˆ™éœ€è¦å°†æ•°æ®æœ€ç»ˆå†™å…¥æ–‡ä»¶ç³»ç»Ÿå½“ä¸­ï¼Œå³å®é™…çš„ç‰©ç†ç£ç›˜å½“ä¸­ï¼›</p><p>æ•´ä¸ªMySQLç”±ä»¥ä¸‹ç»„æˆï¼š  </p><ul><li>Connection Poolï¼šè¿æ¥æ± ç»„ä»¶</li><li>Management Service &amp; Utillties: ç®¡ç†æœåŠ¡å’Œå·¥å…·ç»„ä»¶</li><li>SQL Interface: SQLæ¥å£ç»„ä»¶</li><li>Parser: æŸ¥è¯¢åˆ†æå™¨ç»„ä»¶</li><li>Optimizer: ä¼˜åŒ–å™¨ç»„ä»¶</li><li>Caches &amp; Buffers: ç¼“å†²æ± ç»„ä»¶</li><li>Pluggable Storage Engines: å­˜å‚¨å¼•æ“</li><li>File System: æ–‡ä»¶ç³»ç»Ÿ</li></ul><ol><li>è¿æ¥å±‚<br>æœ€ä¸Šå±‚æ˜¯ä¸€äº›å®¢æˆ·å’Œè¿æ¥æœåŠ¡ï¼ŒåŒ…å«æœ¬åœ°socketé€šä¿¡å’Œå¤§å¤šæ•°åŸºäºå®¢æˆ·ç«¯/æœåŠ¡ç«¯å·¥å…·å®ç°çš„ç±»ä¼¼äºTCP/IPçš„é€šä¿¡ã€‚<br>ä¸»è¦å®Œæˆä¸€äº›ç±»ä¼¼äºè¿æ¥å¤„ç†ã€æˆæƒè®¤è¯ã€ä»¥åŠç›¸å…³çš„å®‰å…¨æ–¹æ¡ˆã€‚<br>åœ¨è¯¥å±‚ä¸Šå¼•å…¥äº†çº¿ç¨‹æ± çš„æ¦‚å¿µï¼Œæœªé€šè¿‡è®¤è¯å®‰å…¨æ¥å…¥çš„å®¢æˆ·ç«¯æä¾›çº¿ç¨‹ã€‚<br>åŒæ ·åœ¨è¯¥å±‚ä¸Šå¯ä»¥å®ç°åŸºäºSSLçš„å®‰å…¨è¿æ¥ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šä¸ºå®‰å…¨æ¥å…¥çš„æ¯ä¸ªå®¢æˆ·ç«¯éªŒè¯å®ƒæ‰€å…·æœ‰çš„çš„æ“ä½œæƒé™ï¼›  </li><li>æœåŠ¡å±‚<br>ç¬¬äºŒå±‚æ¶æ„ä¸»è¦å®Œæˆå¤§å¤šæ•°çš„æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œå¦‚SQLæ¥å£ï¼Œå¹¶å®Œæˆç¼“å­˜çš„æŸ¥è¯¢ï¼ŒSQLçš„åˆ†æå’Œä¼˜åŒ–ï¼Œéƒ¨åˆ†å†…ç½®å‡½æ•°çš„æ‰§è¡Œã€‚<br>æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ä¹Ÿåœ¨è¿™ä¸€å±‚å®ç°ï¼Œå¦‚è¿‡ç¨‹ã€å‡½æ•°ç­‰ã€‚<br>åœ¨è¯¥å±‚ï¼ŒæœåŠ¡å™¨ä¼šè§£ææŸ¥è¯¢å¹¶åˆ›å»ºç›¸åº”çš„å†…éƒ¨è§£ææ ‘ï¼Œå¹¶å¯¹å…¶å®Œæˆå“åº”çš„ä¼˜åŒ–å¦‚ç¡®å®šè¡¨çš„æŸ¥è¯¢é¡ºåºï¼Œæ˜¯å¦åˆ©ç”¨ç´¢å¼•ç­‰ï¼Œæœ€åç”Ÿæˆå“åº”çš„æ‰§è¡Œæ“ä½œã€‚<br>å¦‚æœæ˜¯selectè¯­å¥ï¼ŒæœåŠ¡å™¨è¿˜ä¼šæŸ¥è¯¢å†…éƒ¨çš„ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ç©ºé—´è¶³å¤Ÿå¤§ï¼Œè¿™æ ·åœ¨è§£å†³å¤§é‡è¯»æ“ä½œçš„ç¯å¢ƒä¸­èƒ½å¤Ÿå¾ˆå¥½çš„æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚  </li><li>å¼•æ“å±‚<br>å­˜å‚¨å¼•æ“å±‚ï¼Œå­˜å‚¨å¼•æ“çœŸæ­£çš„è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–ï¼ŒæœåŠ¡å™¨é€šè¿‡APIå’Œå­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ã€‚<br>ä¸åŒçš„å­˜å‚¨å¼•æ“å…·æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œæ¥é€‰å–åˆé€‚çš„å­˜å‚¨å¼•æ“ï¼›  </li><li>å­˜å‚¨å±‚<br>æ•°æ®å­˜å‚¨å±‚ï¼Œä¸»è¦æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ï¼›  </li></ol><p>å’Œå…¶å®ƒæ•°æ®åº“ç›¸æ¯”ï¼ŒMySQLæœ‰ç‚¹ä¸ä¼—ä¸åŒï¼Œå®ƒçš„æ¶æ„å¯ä»¥åœ¨å¤šç§ä¸åŒåœºæ™¯ä¸­åº”ç”¨å¹¶å‘æŒ¥è‰¯å¥½ä½œç”¨ã€‚<br>ä¸»è¦ä½“ç°åœ¨å­˜å‚¨å¼•æ“ä¸Šï¼Œæ’ä»¶å¼çš„å­˜å‚¨å¼•æ“æ¶æ„ï¼Œå°†æŸ¥è¯¢å¤„ç†å’Œå…¶ä»–çš„ç³»ç»Ÿä»»åŠ¡ä»¥åŠæ•°æ®çš„å­˜å‚¨æå–åˆ†ç¦»ã€‚<br>è¿™ç§æ¶æ„å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚å’Œå®é™…éœ€è¦é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ï¼›  </p><h2 id="å­˜å‚¨å¼•æ“-æ¦‚è¿°"><a href="#å­˜å‚¨å¼•æ“-æ¦‚è¿°" class="headerlink" title="å­˜å‚¨å¼•æ“ - æ¦‚è¿°"></a>å­˜å‚¨å¼•æ“ - æ¦‚è¿°</h2><p>å’Œå¤§å¤šæ•°çš„æ•°æ®åº“ä¸åŒï¼ŒMySQLä¸­æœ‰ä¸€ä¸ªå­˜å‚¨å¼•æ“çš„æ¦‚å¿µï¼Œé’ˆå¯¹ä¸åŒçš„å­˜å‚¨éœ€æ±‚å¯ä»¥é€‰æ‹©æœ€ä¼˜çš„å­˜å‚¨å¼•æ“ï¼›<br>å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ï¼Œå»ºç«‹ç´¢å¼•ï¼Œæ›´æ–°æŸ¥è¯¢æ•°æ®ç­‰ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚<br>å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ï¼Œè€Œä¸æ˜¯åŸºäºåº“çš„ã€‚<br>ç´¢å¼•å­˜å‚¨å¼•æ“ä¹Ÿå¯è¢«ç§°ä¸ºè¡¨ç±»å‹ã€‚<br>Oracleã€SQLServerç­‰æ•°æ®åº“åªæœ‰ä¸€ç§å­˜å‚¨å¼•æ“ã€‚<br>MySQLæä¾›äº†æ’ä»¶å¼çš„å­˜å‚¨å¼•æ“æ¶æ„ã€‚<br>ç´¢å¼•MySQlå­˜åœ¨å¤šç§å­˜å‚¨å¼•æ“ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨ç›¸åº”å¼•æ“ï¼Œæˆ–è€…ç¼–å†™å­˜å‚¨å¼•æ“ã€‚<br>MySQL5.0æ”¯æŒçš„å­˜å‚¨å¼•æ“åŒ…å«ï¼šInnoDBã€MyISAMã€BDBã€MEMORYã€MERGEã€EXAMPLEã€NDB Clusterã€ARCHIVEã€CSVã€BLACKHOLEã€FEDERATEDç­‰ï¼Œå…¶ä¸­InnoDBå’ŒBDBæä¾›é£Ÿç‰©å®‰å…¨è¡¨ï¼Œå…¶ä»–å­˜å‚¨å¼•æ“æ˜¯éäº‹åŠ¡å®‰å…¨è¡¨ï¼›<br>å¯ä»¥é€šè¿‡æŒ‡å®š show enginesï¼Œæ¥è¿›è¡ŒæŸ¥è¯¢å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">engines</span>;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–°è¡¨æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šå­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šä½¿ç”¨é»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚<br>MySQL5.5ä¹‹å‰çš„é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯MyISAMï¼Œ5.5ä¹‹åå°±æ”¹ä¸ºInnoDBï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p <span class="comment">#è¿æ¥mysql</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">engines</span>;</span><br><span class="line"><span class="comment"># Engine å­˜å‚¨å¼•æ“çš„åå­—</span></span><br><span class="line"><span class="comment"># Support æ˜¯å¦æ”¯æŒè¯¥å­˜å‚¨å¼•æ“ï¼ŒYES/NO/DEFAULTï¼ŒDEFAULTé»˜è®¤ï¼Œé»˜è®¤æ”¯æŒçš„å­˜å‚¨å¼•æ“InnoDB</span></span><br><span class="line"><span class="comment"># comment æ³¨é‡Š</span></span><br></pre></td></tr></table></figure><blockquote><p>Commentæ³¨é‡Š</p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MyISAM : MyISAM <span class="keyword">storage</span> engines</span><br><span class="line">MRG_MYISAM : COLLECTION <span class="keyword">OF</span> IDENTICAL MyISAM <span class="keyword">tables</span></span><br><span class="line">MEMORY : Hash based,stored <span class="keyword">in</span> memory,useful <span class="keyword">for</span> <span class="keyword">temporary</span> <span class="keyword">tables</span></span><br><span class="line">BLACKHOLE : /dev/<span class="keyword">null</span> <span class="keyword">storage</span> engine (anything you wirte <span class="keyword">to</span> it disappears)</span><br><span class="line">CSV : CSV <span class="keyword">storage</span> engine</span><br><span class="line">PERFIRMANCE_SCHEMA : Performance <span class="keyword">Schema</span></span><br><span class="line">ARCHIVE : Archive <span class="keyword">storage</span> engine</span><br><span class="line">FEDERATED ï¼š Federated MySQL <span class="keyword">storage</span> engine</span><br><span class="line">InnoDB ï¼š Support <span class="keyword">transaction</span>,<span class="keyword">row</span>-<span class="keyword">level</span> locking, <span class="keyword">and</span> <span class="keyword">foreign</span> keys # æ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè¡Œçº§é”å¹¶ä¸”æ”¯æŒå¤–é”®</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ•°æ®åº“å½“ä¸­çš„è¯æ±‡ï¼Ÿ</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%storage_engine%'</span>;</span><br><span class="line"></span><br><span class="line">default_storage_engine InnoDB</span><br><span class="line">default_tmp_storage_engine InnoDB</span><br><span class="line">storage_engine InnoDB</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨å¼•æ“-ç‰¹æ€§"><a href="#å­˜å‚¨å¼•æ“-ç‰¹æ€§" class="headerlink" title="å­˜å‚¨å¼•æ“ - ç‰¹æ€§"></a>å­˜å‚¨å¼•æ“ - ç‰¹æ€§</h2><p>ä¸‹é¢é‡ç‚¹ä»‹ç»å‡ ç§å¸¸ç”¨çš„å­˜å‚¨å¼•æ“ï¼Œå¹¶å¯¹æ¯”å„ä¸ªå­˜å‚¨å¼•æ“ä¹‹é—´çš„åŒºåˆ«ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š  </p><table>    <tr>      <th>ç‰¹ç‚¹</th>      <th style="background-color:lightblue;color:red;font-weight:bolder;">InnoDB</th>      <th style="background-color:lightblue;color:red;font-weight:bolder;">MyISAM</th>      <th>MEMORY</th>      <th>MERGE</th>      <th>NDB</th>    </tr>    <tr>      <td>å­˜å‚¨é™åˆ¶</td>      <td>64TB</td>      <td>æœ‰</td>      <td>æœ‰</td>      <td>æ²¡æœ‰</td>      <td>æœ‰</td>    </tr>    <tr>      <td style="background-color:lightblue;color:red;font-weight:bolder;">äº‹åŠ¡å®‰å…¨</td>      <td>æ”¯æŒ</td>      <td></td>      <td></td>      <td></td>      <td></td>    </tr>    <tr>      <td style="background-color:lightblue;color:red;font-weight:bolder;">é”æœºåˆ¶</td>      <td style="background-color:lightgreen;color:red;font-weight:bolder;">è¡Œé”ï¼ˆé€‚åˆé«˜å¹¶å‘ï¼‰</td>      <td style="background-color:lightgreen;color:red;font-weight:bolder;">è¡¨é”</td>      <td>è¡¨é”</td>      <td>è¡¨é”</td>      <td>è¡Œé”</td>    </tr>    <tr>      <td>Bæ ‘ç´¢å¼•</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>    </tr>    <tr>      <td>å“ˆå¸Œç´¢å¼•</td>      <td>ï¼ˆå½“å‰æˆ‘çœ‹åˆ°çš„æ˜¯æ”¯æŒçš„ï¼‰</td>      <td></td>      <td>æ”¯æŒ</td>      <td></td>      <td></td>    </tr>    <tr>      <td>å…¨æ–‡ç´¢å¼•</td>      <td>æ”¯æŒï¼ˆ5.6ç‰ˆæœ¬ä¹‹åï¼‰</td>      <td>æ”¯æŒ</td>      <td></td>      <td></td>      <td></td>    </tr>    <tr>      <td>é›†ç¾¤ç´¢å¼•</td>      <td>æ”¯æŒ</td>      <td></td>      <td></td>      <td></td>      <td></td>    </tr>    <tr>      <td>æ•°æ®ç´¢å¼•</td>      <td>æ”¯æŒ</td>      <td></td>      <td>æ”¯æŒ</td>      <td></td>      <td>æ”¯æŒ</td>    </tr>     <tr>      <td>ç´¢å¼•ç¼“å­˜</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>      <td>æ”¯æŒ</td>    </tr> <tr>      <td>æ•°æ®å¯å‹ç¼©</td>      <td></td>      <td>æ”¯æŒ</td>      <td></td>      <td></td>      <td></td>    </tr> <tr>      <td>ç©ºé—´ä½¿ç”¨</td>      <td>é«˜</td>      <td>ä½</td>      <td>N/A</td>      <td>ä½</td>      <td>ä½</td>    </tr> <tr>      <td>å†…å­˜ä½¿ç”¨</td>      <td>é«˜</td>      <td>ä½</td>      <td>ä¸­ç­‰</td>      <td>ä½</td>      <td>é«˜</td>    </tr>     <tr>      <td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td>      <td>ä½</td>      <td>é«˜</td>      <td>é«˜</td>      <td>é«˜</td>      <td>é«˜</td>    </tr>     <tr>      <td style="background-color:lightblue;color:red;font-weight:bolder;">æ”¯æŒå¤–é”®</td>      <td style="background-color:lightgreen;color:red;font-weight:bolder;">æ”¯æŒ</td>      <td></td>      <td></td>      <td></td>      <td></td>    </tr></table><p>ä¸‹é¢å°†é‡ç‚¹ä»‹ç»æœ€å¸¸ä½¿ç”¨çš„ä¸¤ç§å­˜å‚¨å¼•æ“ï¼šInnoDBã€MyISAMï¼Œå¦å¤–ä¸¤ç§MEMORYã€MERGEï¼Œäº†è§£å³å¯ï¼›  </p><h2 id="å­˜å‚¨å¼•æ“-InnoDBç‰¹æ€§"><a href="#å­˜å‚¨å¼•æ“-InnoDBç‰¹æ€§" class="headerlink" title="å­˜å‚¨å¼•æ“ - InnoDBç‰¹æ€§"></a>å­˜å‚¨å¼•æ“ - InnoDBç‰¹æ€§</h2><p>InnoDBå­˜å‚¨å¼•æ“æ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚<br>InnoDBå­˜å‚¨å¼•æ“æä¾›äº†å…·æœ‰æäº¤ã€å›æ»šã€å´©æºƒæ¢å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨ã€‚<br>ä½†æ˜¯å¯¹æ¯”MyISAMçš„å­˜å‚¨å¼•æ“ï¼ŒInnoDBå†™çš„å¤„ç†æ•ˆç‡å·®ä¸€äº›ï¼Œå¹¶ä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿ç•™æ•°æ®å’Œç´¢å¼•ï¼›  </p><p>InnoDBå­˜å‚¨å¼•æ“ä¸åŒäºå…¶ä»–å­˜å‚¨å¼•æ“çš„ç‰¹ç‚¹ï¼š  </p><p><strong>äº‹åŠ¡æ§åˆ¶</strong></p><p>MySQL å½“ä¸­äº‹åŠ¡é»˜è®¤è‡ªåŠ¨æäº¤ï¼›  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create database demo_02<span class="built_in"> default </span><span class="attribute">charset</span>=utf8mb4;  </span><br><span class="line">use demo_01;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table goods_innodb(</span><br><span class="line">  id int(11) <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">  name varchar(20) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  primary key(id)</span><br><span class="line">)<span class="attribute">ENGINE</span>=innodb<span class="built_in"> default </span><span class="attribute">charset</span>=utf8;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> goods_innodb(<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'Meta20'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;<span class="comment"># å¦‚ä¸æäº¤ï¼Œåˆ™å…¶ä»–å®¢æˆ·ç«¯æ— æ³•æŸ¥çœ‹å¾—åˆ°æ’å…¥çš„æ•°æ®ï¼›</span></span><br><span class="line"><span class="comment"># MySQLé»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»</span></span><br></pre></td></tr></table></figure><p><strong>å¤–é”®çº¦æŸ</strong></p><p>MySQLæ”¯æŒå¤–é”®çš„å­˜å‚¨å¼•æ“åªæœ‰InnoDBï¼Œåœ¨åˆ›å»ºå¤–é”®çš„æ—¶å€™ï¼Œè¦æ±‚çˆ¶è¡¨å¿…é¡»æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­è¡¨åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œä¹Ÿä¼šè‡ªåŠ¨çš„åˆ›å»ºå¯¹åº”çš„ç´¢å¼•ï¼›<br>ä¸‹é¢ä¸¤å¼ è¡¨ä¸­ï¼Œ<br>1ï¼‰ country_innodbæ˜¯çˆ¶è¡¨ï¼Œcountry_idä¸ºä¸»é”®ç´¢å¼•ï¼›<br>2ï¼‰ city_innodbæ˜¯å­è¡¨ï¼Œcountry_idå­—æ®µä¸ºå¤–é”®ï¼Œå¯¹åº”äºcountry_innodbè¡¨ä¸­çš„ä¸»é”®country_idï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> country_innodb(</span><br><span class="line">  country_id <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">  counry_name <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">not</span> <span class="literal">null</span> ,</span><br><span class="line">  primary <span class="keyword">key</span> (country_id)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> city_innodb(</span><br><span class="line">  city_id <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">  city_name <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  country_id <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  primary <span class="keyword">key</span> (city_id),</span><br><span class="line">  <span class="keyword">key</span> idx_fk_country_id(country_id),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">'fk_city_contry'</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(country_id) <span class="keyword">REFERENCES</span> country_innodb(country_id) <span class="keyword">ON</span> DFLETE RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ON DELETE RESTRICT åœ¨åˆ é™¤ä¸»è¡¨æ•°æ®æ—¶ï¼Œå¦‚æœæœ‰å…³è”è®°å½•åˆ™ä¸åˆ é™¤</span></span><br><span class="line"><span class="comment"># ON UPDATE CASCADE æ›´æ–°ä¸»è¡¨æ—¶ï¼Œå¦‚æœå­è¡¨æœ‰å…³è”è®°å½•ï¼Œåˆ™æ›´æ–°å­è¡¨è®°å½•  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> country_innodb <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'China'</span>),(<span class="literal">null</span>,<span class="string">'America'</span>),(<span class="literal">null</span>,<span class="string">'Japan'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> city_innodb <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'Xian'</span>,<span class="number">1</span>),(<span class="literal">null</span>,<span class="string">'NewYork'</span>,<span class="number">2</span>),(<span class="literal">null</span>,<span class="string">'BeiJing'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>åœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¯ä»¥æŒ‡å®šåœ¨åˆ é™¤ã€æ›´æ–°çˆ¶è¡¨æ—¶ï¼Œå¯¹å­è¡¨è¿›è¡Œçš„ç›¸åº”æ“ä½œï¼ŒåŒ…æ‹¬RESTRICTã€CASCADEã€SET NULLå’ŒNO ACTIONã€‚<br>RESTRICTå’ŒNO ACTIONç›¸åŒï¼Œæ˜¯æŒ‡é™åˆ¶åœ¨å­è¡¨æœ‰å…³è”è®°å½•çš„æƒ…å†µä¸‹ï¼Œçˆ¶è¡¨ä¸èƒ½æ›´æ–°ï¼›<br>CASCADEè¡¨ç¤ºçˆ¶è¡¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤æ—¶ï¼Œæ›´æ–°æˆ–è€…åˆ é™¤å­è¡¨å¯¹åº”çš„è®°å½•ï¼›<br>SET NULLåˆ™è¡¨ç¤ºçˆ¶è¡¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤çš„æ—¶å€™ï¼Œå­è¡¨å¯¹åº”å­—æ®µè¢«SET NULLã€‚<br>é’ˆå¯¹ä¸Šé¢åˆ›å»ºçš„ä¸¤ä¸ªè¡¨ï¼Œå­è¡¨åœ¨å¤–é”®æŒ‡å®šæ˜¯ON DELETE RESTRICT ON UPDATE CASCADEæ–¹å¼çš„ï¼Œé‚£ä¹ˆåœ¨ä¸»è¡¨åˆ é™¤è®°å½•çš„æ—¶å€™ï¼Œå¦‚æœå­è¡¨æœ‰å¯¹åº”è®°å½•ï¼Œåˆ™ä¸å…è®¸åˆ é™¤ã€‚ä¸»è¡¨åœ¨æ›´æ–°è®°å½•çš„æ—¶å€™ï¼Œå¦‚æœå­è¡¨æœ‰å¯¹åº”è®°å½•ï¼Œåˆ™å­è¡¨ä¹Ÿä¼šå¯¹åº”æ›´æ–°ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> country_innodb;<span class="comment">#ä¸»è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> city_innodb;<span class="comment">#å­è¡¨ï¼›å­è¡¨å½“ä¸­çš„å¤–é”®country_idæŒ‡å‘ä¸»è¡¨country_innodbå½“ä¸­çš„ä¸»é”®country_id</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> country_innodb <span class="keyword">where</span> country_id=<span class="number">2</span>;</span><br><span class="line"><span class="comment">#æ­¤å¤„ç”±äºå¤–é”®å…³è”ï¼Œæ‰€ä»¥å¯¼è‡´åˆ é™¤æŠ¥é”™ï¼Œæ— æ³•æ›´æ–°ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> country_innodb <span class="keyword">set</span> country_id=<span class="number">100</span> <span class="keyword">where</span> country_id=<span class="number">1</span>;</span><br><span class="line"><span class="comment">#æ­¤æ—¶å­è¡¨å½“ä¸­å…³è”æœ‰1ï¼›é‚£ä¹ˆè¯´åˆ™åˆšæ‰çš„å­è¡¨å½“ä¸­å¯¹åº”country_idä¹Ÿä¸º1 çš„è®°å½•å°†ä¼šè¿›è¡Œç›¸åº”çš„æ›´æ–°ï¼›  </span></span><br><span class="line">æŸ¥çœ‹ä¸»è¡¨ä»¥åŠå­è¡¨ï¼š  </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> country_innodb;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> city_innodb;</span><br></pre></td></tr></table></figure><p><strong>å­˜å‚¨æ–¹å¼</strong></p><p>å­˜å‚¨æ–¹å¼å®é™…ä¸ŠæŒ‡çš„æ˜¯InnoDBè¿™ä¸ªå­˜å‚¨å¼•æ“å¯¹åº”çš„è¡¨åœ¨æ•°æ®åº“å½“ä¸­ä»¥æ•°æ®æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼ï¼›<br>InnoDBå­˜å‚¨è¡¨å’Œç´¢å¼•æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š  </p><ol><li>ä½¿ç”¨å…±äº«è¡¨ç©ºé—´å­˜å‚¨ï¼Œè¿™ç§æ–¹å¼åˆ›å»ºçš„è¡¨çš„è¡¨ç»“æ„ä¿å­˜åœ¨.frmæ–‡ä»¶ä¸­ï¼Œæ•°æ®å’Œç´¢å¼•ä¿å­˜åœ¨ innodb_data_home_dirå’Œinnodb_data_file_pathå®šä¹‰çš„è¡¨ç©ºé—´ä¸­ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ï¼›  </li><li>ä½¿ç”¨å¤šè¡¨ç©ºé—´å­˜å‚¨ï¼Œè¿™ç§æ–¹å¼å­˜å‚¨çš„è¡¨çš„è¡¨ç»“æ„ä»ç„¶å­˜åœ¨.frmæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯æ¯ä¸ªè¡¨çš„æ•°æ®å’Œç´¢å¼•å•ç‹¬ä¿å­˜åœ¨.ibdä¸­ï¼›</li></ol><h2 id="å­˜å‚¨å¼•æ“-MyISAMç‰¹æ€§"><a href="#å­˜å‚¨å¼•æ“-MyISAMç‰¹æ€§" class="headerlink" title="å­˜å‚¨å¼•æ“ - MyISAMç‰¹æ€§"></a>å­˜å‚¨å¼•æ“ - MyISAMç‰¹æ€§</h2><p>MyISAMä¸æ”¯æŒäº‹åŠ¡ï¼Œä¹Ÿä¸æ”¯æŒå¤–é”®ï¼Œå…¶ä¼˜åŠ¿æ˜¯è®¿é—®çš„é€Ÿåº¦å¿«ï¼Œå¯¹äº‹åŠ¡çš„å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥SELECTã€INSERTä¸ºä¸»çš„åº”ç”¨åŸºæœ¬ä¸Šéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¼•æ“æ¥åˆ›å»ºè¡¨ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç‰¹ç‚¹ï¼š  </p><p><strong>ä¸æ”¯æŒäº‹åŠ¡</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> goods_myisam(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  primary <span class="keyword">key</span>(<span class="keyword">id</span>)</span><br><span class="line">)<span class="keyword">engine</span>=myisam <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> goods_myisam <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'ç”µè„‘3'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æµ‹è¯•å¯ä»¥å‘ç°ï¼Œåœ¨MyISAMå­˜å‚¨å¼•æ“ä¸­ï¼Œæ˜¯æ²¡æœ‰äº‹åŠ¡æ§åˆ¶çš„ï¼›  </p><p><strong>æ–‡ä»¶å­˜å‚¨æ–¹å¼</strong></p><p>æ¯ä¸ªMyISAMåœ¨ç£ç›˜ä¸Šå­˜å‚¨æˆ3ä¸ªæ–‡ä»¶ï¼Œå…¶æ–‡ä»¶åéƒ½å’Œè¡¨æ˜ç›¸åŒï¼Œä½†æ‹“å±•åç§°åˆ†åˆ«æ˜¯ï¼š</p><ul><li>.frm (å­˜å‚¨è¡¨å®šä¹‰)</li><li>.MYD (MYDataï¼Œå­˜å‚¨æ•°æ®)</li><li>.MYI (MYIndexï¼Œå­˜å‚¨ç´¢å¼•)</li></ul><h2 id="å­˜å‚¨å¼•æ“-Memoryä¸Mergeç‰¹æ€§"><a href="#å­˜å‚¨å¼•æ“-Memoryä¸Mergeç‰¹æ€§" class="headerlink" title="å­˜å‚¨å¼•æ“ - Memoryä¸Mergeç‰¹æ€§"></a>å­˜å‚¨å¼•æ“ - Memoryä¸Mergeç‰¹æ€§</h2><p>Memoryï¼ˆå†…å­˜ï¼‰å­˜å‚¨å¼•æ“å°†è¡¨çš„æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ã€‚<br>æ¯ä¸ªMEMORYè¡¨å®é™…å¯¹åº”ä¸€ä¸ªç£ç›˜æ–‡ä»¶ï¼Œæ ¼å¼æ˜¯.frmï¼Œæ”¹æ–‡ä»¶ä¸­åªå­˜å‚¨è¡¨çš„æ•°æ®ç»“æ„ï¼Œè€Œå…¶æ•°æ®æ–‡ä»¶ï¼Œéƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·æœ‰åˆ©äºæ•°æ®çš„å¿«é€Ÿå¤„ç†ï¼Œæé«˜æ•´ä¸ªè¡¨è¾¾æ•ˆç‡ã€‚<br>MEMORYç±»å‹çš„è¡¨è®¿é—®éå¸¸çš„å¿«ï¼Œå› ä¸ºä»–çš„æ•°æ®æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨HASHç´¢å¼•ï¼Œä½†æ˜¯æœåŠ¡ä¸€æ—¦å…³é—­ï¼Œè¡¨ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±ï¼›  </p><p>MERGEï¼ˆåˆå¹¶ï¼‰å­˜å‚¨å¼•æ“æ˜¯ä¸€ç»„MyISAMè¡¨çš„ç»„åˆï¼Œè¿™äº›MyISAMè¡¨å¿…é¡»ç»“æ„å®Œå…¨ç›¸åŒï¼ŒMERGEè¡¨æœ¬èº«å¹¶æ²¡æœ‰å­˜å‚¨æ•°æ®ï¼Œå¯¹MERGEç±»å‹çš„è¡¨å¯ä»¥è¿›è¡ŒæŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œè¿™äº›æ“ä½œå®é™…ä¸Šæ˜¯å¯¹å†…éƒ¨çš„MyISAMè¡¨è¿›è¡Œçš„ï¼›  </p><p>å¯¹äºMERGEç±»å‹è¡¨çš„æ’å…¥æ“ä½œæ˜¯é€šè¿‡INSERT_METHODå­å¥å®šä¹‰æ’å…¥çš„è¡¨ï¼Œå¯ä»¥æœ‰ä¸‰ä¸ªä¸åŒçš„å€¼ï¼Œä½¿ç”¨FIRSTæˆ–è€…LASTå€¼ä½¿å¾—æ’å…¥æ“ä½œè¢«ç›¸åº”çš„ä½œç”¨åœ¨ç¬¬ä¸€æˆ–è€…æ˜¯æœ€åä¸€ä¸ªè¡¨ä¸Šï¼Œä¸å®šä¹‰è¿™ä¸ªå­å¥æˆ–è€…å®šä¹‰ä¸ºNOï¼Œè¡¨ç¤ºä¸èƒ½å¯¹è¿™ä¸ªMERGEè¡¨æ‰§è¡Œæ’å…¥æ“ä½œï¼›  </p><p>å¯ä»¥å¯¹MERGEè¡¨è¿›è¡ŒDROPæ“ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œçŸ¥è¯†åˆ é™¤MERGEè¡¨çš„å®šä¹‰ï¼Œå¯¹å†…éƒ¨çš„è¡¨æ˜¯æ²¡æœ‰ä»»ä½•å½±å“çš„ï¼›  </p><p>MERGEå­˜å‚¨å¼•æ“ä¸viewè§†å›¾æœ‰äº›ç±»ä¼¼ï¼›  </p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»ºå’Œä½¿ç”¨MERGEè¡¨çš„ç¤ºä¾‹ï¼š<br>1ï¼‰åˆ›å»ºä¸‰ä¸ªæµ‹è¯•è¡¨ payment_2006ã€payment_2007ã€payment_allï¼Œå…¶ä¸­payment_allæ˜¯å‰ä¸¤ä¸ªè¡¨çš„MERGEè¡¨ï¼›</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">create table order_1990(</span><br><span class="line">  order_id int,</span><br><span class="line">  order_money double(10,2),</span><br><span class="line">  order_address varchar(50),</span><br><span class="line">  primary key (order_id)</span><br><span class="line">)<span class="attribute">engine</span>=myisam<span class="built_in"> default </span><span class="attribute">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line">create table order_1991(</span><br><span class="line">  order_id int,</span><br><span class="line">  order_money double(10,2),</span><br><span class="line">  order_address varchar(50),</span><br><span class="line">  primary key (order_id)</span><br><span class="line">)<span class="attribute">engine</span>=myisam<span class="built_in"> default </span><span class="attribute">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line">create table order_all(</span><br><span class="line">  order_id int,</span><br><span class="line">  order_money double(10,2),</span><br><span class="line">  order_address varchar(50),</span><br><span class="line">  primary key (order_id)</span><br><span class="line">)<span class="attribute">engine</span>=merge  </span><br><span class="line">union = ( order_1990, order_1991 )  </span><br><span class="line"><span class="attribute">INSERT_METHOD</span>=LAST  </span><br><span class="line">default <span class="attribute">charset</span>=utf8;</span><br></pre></td></tr></table></figure><p>2ï¼‰ åˆ†åˆ«å‘ä¸¤å¼ è¡¨ä¸­æ’å…¥è®°å½•  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_1990 <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">100.0</span>,<span class="string">'ä¸Šæµ·'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_1990 <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">100.0</span>,<span class="string">'åŒ—äº¬'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_1991 <span class="keyword">values</span>(<span class="number">10</span>,<span class="number">100.0</span>,<span class="string">'åŒ—äº¬'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_1991 <span class="keyword">values</span>(<span class="number">11</span>,<span class="number">100.0</span>,<span class="string">'ä¸Šæµ·'</span>);</span><br></pre></td></tr></table></figure><p>3ï¼‰ æŸ¥è¯¢ä¸‰å¼ è¡¨å½“ä¸­çš„æ•°æ®ï¼š<br>order_1990è¡¨ä¸­çš„æ•°æ®ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> order_1990;</span><br></pre></td></tr></table></figure><p>order_1991è¡¨ä¸­çš„æ•°æ®ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> order_1991;</span><br></pre></td></tr></table></figure><p>order_allè¡¨ä¸­çš„æ•°æ®ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> order_all;</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨å¼•æ“-é€‰æ‹©åŸåˆ™"><a href="#å­˜å‚¨å¼•æ“-é€‰æ‹©åŸåˆ™" class="headerlink" title="å­˜å‚¨å¼•æ“ - é€‰æ‹©åŸåˆ™"></a>å­˜å‚¨å¼•æ“ - é€‰æ‹©åŸåˆ™</h2><p>åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥é€‰æ‹©æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚<br>å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆï¼›<br>ä»¥ä¸‹æ˜¯å‡ ç§å¸¸ç”¨çš„å­˜å‚¨å¼•æ“çš„ä½¿ç”¨ç¯å¢ƒï¼š  </p><ul><li>InnoDB<ul><li>æ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œç”¨äºäº‹åŠ¡å¤„ç†åº”ç”¨ç¨‹åºï¼Œæ”¯æŒå¤–é”®ã€‚</li><li>å¦‚æœåº”ç”¨å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä»¥å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œé‚£ä¹ˆInnoDBå­˜å‚¨å¼•æ“æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚  </li><li>InnoDBå­˜å‚¨å¼•æ“é™¤äº†æœ‰æ•ˆçš„é™ä½ç”±äºåˆ é™¤å’Œæ›´æ–°å¯¼è‡´çš„é”å®šï¼Œè¿˜å¯ä»¥ç¡®ä¿äº‹åŠ¡çš„å®Œæ•´æäº¤å’Œå›æ»šï¼Œå¯¹äºç±»ä¼¼äºè®¡è´¹ç³»ç»Ÿæˆ–è€…æ˜¯è´¢åŠ¡ç³»ç»Ÿç­‰å¯¹æ•°æ®å‡†ç¡®æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç³»ç»Ÿï¼ŒInnoDBæ˜¯æœ€åˆé€‚çš„é€‰æ‹©ï¼›  </li></ul></li><li>MyISAM<ul><li>å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œé‚£ä¹ˆé€‰æ‹©è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ï¼›  </li></ul></li><li>MEMORY<ul><li>å°†æ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å†…å­˜å½“ä¸­RAMï¼Œåœ¨éœ€è¦å¿«é€Ÿå®šä½è®°å½•å’Œå…¶ä»–ç±»ä¼¼æ•°æ®ç¯å¢ƒä¸‹ï¼Œå¯ä»¥æä¾›å‡ å—çš„è®¿é—®ã€‚</li><li>MEMORYçš„ç¼ºé™·å°±æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå…¶æ¬¡æ˜¯è¦ç¡®ä¿è¡¨çš„æ•°æ®å¯ä»¥æ¢å¤ï¼Œæ•°æ®åº“å¼‚å¸¸ç»ˆæ­¢åè¡¨ä¸­çš„æ•°æ®æ˜¯å¯ä»¥æ¢å¤çš„ã€‚  </li><li>MEMORYè¡¨é€šå¸¸ç”¨äºæ›´æ–°ä¸å¤ªé¢‘ç¹çš„å°è¡¨ï¼Œç”¨ä»¥å¿«é€Ÿå¾—åˆ°è®¿é—®ç»“æœã€‚  </li></ul></li><li>MERGE<ul><li>ç”¨äºå°†ä¸€äº›åˆ—ç­‰åŒçš„MyISAMè¡¨ä»¥é€»è¾‘æ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¼•ç”¨ä»–ä»¬ã€‚</li><li>MERGEè¡¨çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥çªç ´å¯¹å•ä¸ªMyISAMè¡¨çš„å¤§å°é™åˆ¶ï¼Œå¹¶ä¸”é€šè¿‡å°†ä¸åŒçš„è¡¨åˆ†å¸ƒåœ¨å¤šä¸ªç£ç›˜ä¸Šï¼Œå¯ä»¥æœ‰æ•ˆçš„æ”¹å–„MERGEè¡¨çš„è®¿é—®æ•ˆç‡ï¼Œè¿™å¯¹äºå­˜å‚¨è¯¸å¦‚æ•°æ®ä»“åº“ç­‰VLDBç¯å¢ƒååˆ†åˆé€‚ã€‚  </li></ul></li></ul><p>æœ‰ä¸€ä¸ªç‚¹ï¼šå°±æ˜¯æœ‰æ²¡æœ‰ç±»ä¼¼emmï¼ŒMERGEç„¶åå†…éƒ¨åŸºå±‚çš„è¡¨çš„å­˜å‚¨å¼•æ“æ˜¯InnoDBè¿™ç§çš„ï¼›å¦‚æœæ˜¯è¿™ç§çš„è¯ï¼›ä¸æ˜¯æœ‰é‚£ä¸ªä»€ä¹ˆåˆ†åº“åˆ†è¡¨ä»€ä¹ˆçš„ï¼Ÿï¼ˆæˆ‘ä¸å¤ªäº†è§£åˆ†åº“åˆ†è¡¨ï¼Œä¹±è¯´çš„ï¼‰  </p><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-SQLæ‰§è¡Œé¢‘ç‡"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-SQLæ‰§è¡Œé¢‘ç‡" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - SQLæ‰§è¡Œé¢‘ç‡"></a>ä¼˜åŒ–SQLæ­¥éª¤ - SQLæ‰§è¡Œé¢‘ç‡</h2><p>åœ¨åº”ç”¨çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±äºåˆæœŸæ•°æ®é‡å°ï¼Œå¼€å‘äººå‘˜å†™SQLè¯­å¥æ—¶æ›´é‡è§†åŠŸèƒ½ä¸Šçš„å®ç°ï¼Œä½†æ˜¯å½“åº”ç”¨ç³»ç»Ÿæ­£å¼ä¸Šçº¿åï¼Œéšç€ç”Ÿäº§æ•°æ®çš„æ€¥å‰§å¢é•¿ï¼Œå¾ˆå¤šSQLè¯­å¥å¼€å§‹é€æ¸æ˜¾éœ²å‡ºæ€§èƒ½é—®é¢˜ï¼Œå¯¹ç”Ÿäº§çš„å½±å“ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œæ­¤æ—¶è¿™äº›æœ‰é—®é¢˜çš„SQLè¯­å¥å°±æˆä¸ºæ•´ä¸ªç³»ç»Ÿæ€§èƒ½çš„ç“¶é¢ˆï¼Œå› æ­¤å¿…é¡»è¦å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œæœ¬ç« å°†è¯¦ç»†ä»‹ç»MySQLä¸­ä¼˜åŒ–SQLè¯­å¥çš„æ–¹æ³•ã€‚  </p><p>å½“é¢å¯¹ä¸€ä¸ªæœ‰SQLæ€§èƒ½é—®é¢˜çš„æ•°æ®åº“æ—¶ï¼Œåº”è¯¥ä»ä½•å¤„å…¥æ‰‹æ¥è¿›è¡Œç³»ç»Ÿçš„åˆ†æï¼Œä½¿å¾—èƒ½å¤Ÿå°½å¿«å®šä½é—®é¢˜SQLå¹¶å°½å¿«è§£å†³é—®é¢˜ã€‚  </p><h3 id="æŸ¥çœ‹SQLæ‰§è¡Œé¢‘ç‡"><a href="#æŸ¥çœ‹SQLæ‰§è¡Œé¢‘ç‡" class="headerlink" title="æŸ¥çœ‹SQLæ‰§è¡Œé¢‘ç‡"></a>æŸ¥çœ‹SQLæ‰§è¡Œé¢‘ç‡</h3><p>MySQLå®¢æˆ·ç«¯è¿æ¥æˆåŠŸåï¼Œé€šè¿‡ show [ session | global ] status å‘½ä»¤å¯ä»¥æä¾›æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ã€‚<br>show [ session | global ]status å¯ä»¥æ ¹æ®éœ€è¦åŠ ä¸Šå‚æ•° â€œsessionâ€æˆ–è€…â€œglobalâ€æ¥æ˜¾ç¤ºsessionçº§ï¼ˆå½“å‰è¿æ¥ï¼‰çš„ç»Ÿè®¡ç»“æœå’Œglobalçº§ï¼ˆè‡ªæ•°æ®åº“ä¸Šæ¬¡å¯åŠ¨è‡³ä»Šï¼‰çš„ç»Ÿè®¡ç»“æœã€‚<br>å¦‚æœä¸å†™ï¼Œé»˜è®¤ä½¿ç”¨å‚æ•°æ˜¯â€œsessionâ€ã€‚  </p><p>ä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºäº†å½“å‰sessionä¸­æ‰€æœ‰ç»Ÿè®¡å‚æ•°çš„å€¼ï¼š</p><blockquote><p>é’ˆå¯¹æ•°æ®åº“</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Com_______'</span>; <span class="comment"># _ å ä½å­—ç¬¦ï¼ŒåŒ¹é…çš„æ¨¡ç³Šå­—ç¬¦ æŸ¥è¯¢çº§åˆ«ä¸ºsessionä¼šè¯çº§åˆ«</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Com_______'</span>; <span class="comment"># _ åŒ¹é…çš„æ¨¡ç³Šå­—ç¬¦ æŸ¥è¯¢çº§åˆ«ä¸ºglobalå…¨å±€çº§åˆ«</span></span><br><span class="line"></span><br><span class="line">Com_binlog</span><br><span class="line">Com_commit</span><br><span class="line">Com_delete <span class="comment">#åˆ é™¤çš„æ¬¡æ•°</span></span><br><span class="line">Com_insert <span class="comment">#æ’å…¥çš„æ¬¡æ•°</span></span><br><span class="line">Com_repair</span><br><span class="line">Com_select <span class="comment">#æŸ¥è¯¢çš„æ¬¡æ•°</span></span><br><span class="line">Com_revoke</span><br><span class="line">Com_signal</span><br><span class="line">Com_update <span class="comment">#ä¿®æ”¹çš„æ¬¡æ•°</span></span><br><span class="line">Com_xa_end</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ­¤æ—¶æŸ¥è¯¢çš„ä¸ºå½“å‰è¿æ¥sessionçš„ä¿¡æ¯ï¼Œå¹¶éä¸ºæ•´ä¸ªæ•°æ®åº“å…¨å±€çš„ç»Ÿè®¡å‚æ•°</span></span><br><span class="line"><span class="comment">#å¦‚æœéœ€è¦æŸ¥è¯¢å…¨å±€åˆ™ï¼šshow global status like 'Com_______';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é€šè¿‡çŸ¥é“å½“å‰æ•°æ®åº“å½“ä¸­æ˜¯ä»¥æŸ¥è¯¢ä¸ºä¸»è¿˜æ˜¯å¢åˆ æ”¹ä¸ºä¸»ï¼›ä¸ºSQLä¼˜åŒ–æä¾›å€Ÿé‰´æ€§æŒ‡æ ‡</span></span><br></pre></td></tr></table></figure><p>Com_xxxè¡¨ç¤ºæ¯ä¸ªxxxè¯­å¥æ‰§è¡Œçš„æ¬¡æ•°ï¼Œé€šå¸¸æ¯”è¾ƒå…³å¿ƒçš„æ˜¯ä»¥ä¸‹å‡ ä¸ªç»Ÿè®¡å‚æ•°</p><table>  <tr>    <th>å‚æ•°</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>Com_select</td>    <td>æ‰§è¡Œselectæ“ä½œçš„æ¬¡æ•°ï¼Œä¸€æ¬¡æŸ¥è¯¢åªç´¯åŠ 1</td>  </tr>  <tr>    <td>Com_insert</td>    <td>æ‰§è¡ŒINSERTæ“ä½œçš„æ¬¡æ•°ï¼Œå¯¹äºæ‰¹é‡æ’å…¥çš„INSERTæ“ä½œï¼Œåªç´¯åŠ ä¸€æ¬¡</td>  </tr>  <tr>    <td>Com_update</td>    <td>æ‰§è¡ŒUPDATEæ“ä½œçš„æ¬¡æ•°</td>  </tr>  <tr>    <td>Com_delete</td>    <td>æ‰§è¡ŒDELETEæ“ä½œçš„æ¬¡æ•°</td>  </tr>  <tr>    <td>Innodb_rows_read</td>    <td>selectæŸ¥è¯¢è¿”å›çš„è¡Œæ•°</td>  </tr>  <tr>    <td>Innodb_rows_inserted</td>    <td>æ‰§è¡ŒINSERTæ“ä½œæ’å…¥çš„è¡Œæ•°</td>  </tr>  <tr>    <td>Innodb_rows_updated</td>    <td>æ‰§è¡ŒUPDATEæ“ä½œæ›´æ–°çš„è¡Œæ•°</td>  </tr>  <tr>    <td>Innodb_rows_deleted</td>    <td>æ‰§è¡ŒDELETEæ“ä½œåˆ é™¤çš„è¡Œæ•°</td>  </tr>  <tr>    <td>Connections</td>    <td>è§†å›¾è¿æ¥MySQLæœåŠ¡å™¨çš„æ¬¡æ•°</td>  </tr>  <tr>    <td>Uptime</td>    <td>æœåŠ¡å™¨å·¥ä½œæ—¶é—´</td>  </tr>  <tr>    <td>Slow_queries</td>    <td>æ…¢æŸ¥è¯¢çš„æ¬¡æ•°</td>  </tr></table><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Com_*** : è¿™äº›å‚æ•°å¯¹äºæ‰€æœ‰å­˜å‚¨å¼•æ“çš„è¡¨æ“ä½œéƒ½ä¼šè¿›è¡Œç´¯è®¡</span><br><span class="line">Innodb_** : è¿™å‡ ä¸ªå‚æ•°åªæ˜¯é’ˆå¯¹<span class="type">Innodb</span>å­˜å‚¨å¼•æ“çš„ï¼Œç´¯åŠ çš„ç®—æ³•ä¹Ÿç•¥æœ‰ä¸åŒã€‚</span><br></pre></td></tr></table></figure><blockquote><p>é’ˆå¯¹InnoDBå­˜å‚¨å¼•æ“</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">é’ˆå¯¹äºInnoDBï¼š  </span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Innodb_rows_%'</span>;<span class="comment"># æ­¤æ—¶æŸ¥è¯¢å‡ºæ¥çš„ä¸ºInnoDBçš„å„ä¸ªæ“ä½œæ‰€å½±å“çš„è¡Œï¼Œæ•°é‡</span></span><br><span class="line"></span><br><span class="line">Innodb_rows_deleted 2 <span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­åˆ å»çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_inserted 49<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­æ’å…¥çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_read 380<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­è¯»å–çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_updated 15<span class="comment"># æ›´æ–°çš„è¡Œæ•°</span></span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="keyword">use</span> demo_01l</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> goods_innodb; <span class="comment"># Innodb_rows_readæ­¤æ—¶ä¼šå¢åŠ ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†æœ‰næ¡è®°å½•ï¼Œåˆ™Innodb_rows_readå¢åŠ n</span></span><br><span class="line"></span><br><span class="line">Innodb_rows_deleted 2 <span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­åˆ å»çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_inserted 49<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­æ’å…¥çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_read 382<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­è¯»å–çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_updated 15<span class="comment"># æ›´æ–°çš„è¡Œæ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> goods_innodb <span class="keyword">set</span> <span class="keyword">name</span> =<span class="string">'Meta30'</span>; <span class="comment"># Innodb_rows_updateæ­¤æ—¶ä¼šå¢åŠ ï¼›ä¿®æ”¹å½±å“næ¡è®°å½•ï¼Œåˆ™Innodb_rows_updateå¢åŠ n;</span></span><br><span class="line"></span><br><span class="line">Innodb_rows_deleted 2 <span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­åˆ å»çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_inserted 49<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­æ’å…¥çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_read 382<span class="comment"># è¯¥å­˜å‚¨å¼•æ“ä¸­è¯»å–çš„è¡Œæ•°</span></span><br><span class="line">Innodb_rows_updated 17<span class="comment"># æ›´æ–°çš„è¡Œæ•°</span></span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-å®šä½ä½æ•ˆSQL"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-å®šä½ä½æ•ˆSQL" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - å®šä½ä½æ•ˆSQL"></a>ä¼˜åŒ–SQLæ­¥éª¤ - å®šä½ä½æ•ˆSQL</h2><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®šä½æ‰§è¡Œæ•ˆç‡è¾ƒä½çš„SQLè¯­å¥ã€‚  </p><ul><li>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼šé€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—å®šä½é‚£äº›æ‰§è¡Œæ•ˆç‡è¾ƒä½çš„SQLè¯­å¥ï¼Œç”¨â€“log-slow-queries[ =file_name ]é€‰é¡¹å¯åŠ¨æ—¶ï¼Œmysqldå†™ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡long_query_timeç§’çš„SQLè¯­å¥çš„æ—¥å¿—æ–‡ä»¶ã€‚</li><li>show processlistï¼šæ…¢æŸ¥è¯¢æ—¥å¿—åœ¨æŸ¥è¯¢ç»“æŸä»¥åæ‰è®°å½•ï¼Œæ‰€ä»¥åœ¨åº”è¯¥ç”¨åæ˜ æ‰§è¡Œæ•ˆç‡å‡ºç°é—®é¢˜çš„æ—¶å€™æŸ¥è¯¢æ…¢æ—¥å¿—å¹¶ä¸èƒ½å®šä½é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨show processlistå‘½ä»¤æŸ¥çœ‹å½“å‰MySQLåœ¨è¿›è¡Œçš„çº¿ç¨‹ï¼ŒåŒ…æ‹¬çº¿ç¨‹çš„çŠ¶æ€ã€æ˜¯å¦é”è¡¨ç­‰ï¼Œå¯ä»¥å®æ—¶åœ°æŸ¥çœ‹SQLçš„æ‰§è¡Œæƒ…å†µï¼ŒåŒæ—¶å¯¹ä¸€äº›é”è¡¨æ“ä½œè¿›è¡Œä¼˜åŒ–ã€‚(å®æ—¶)  </li></ul><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">show processlist;</span><br><span class="line"></span><br><span class="line"><span class="meta">#ï¼ˆ1ï¼‰idåˆ—ï¼šç”¨æˆ·ç™»å½•mysqlæ—¶ï¼Œç³»ç»Ÿåˆ†é…çš„â€œconnection_idâ€ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°connection_id()æŸ¥çœ‹ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ2ï¼‰useråˆ—ï¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·ï¼Œå¦‚æœä¸æ˜¯rootï¼Œè¿™ä¸ªå‘½ä»¤å°±åªæ˜¾ç¤ºç”¨æˆ·æƒé™èŒƒå›´çš„sqlè¯­å¥ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ3ï¼‰hoståˆ—ï¼šæ˜¾ç¤ºè¿™ä¸ªè¯­å¥æ˜¯ä»å“ªä¸ªipçš„å“ªä¸ªç«¯å£ä¸Šå‘çš„ï¼Œå¯ä»¥ç”¨æ¥è·Ÿè¸ªå‡ºç°é—®é¢˜è¯­å¥çš„ç”¨æˆ·ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ4ï¼‰dbåˆ—ï¼šæ˜¾ç¤ºè¿™ä¸ªè¿›ç¨‹ç›®å‰è¿æ¥çš„æ˜¯å“ªä¸ªæ•°æ®åº“ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ5ï¼‰commandåˆ—ï¼šæ˜¾ç¤ºå½“å‰è¿æ¥çš„æ‰§è¡Œå‘½ä»¤ï¼Œä¸€èˆ¬å–å€¼ä¸ºä¼‘çœ ï¼ˆsleepï¼‰ã€æŸ¥è¯¢ï¼ˆqueryï¼‰ã€è¿æ¥ï¼ˆconnectï¼‰ç­‰ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ6ï¼‰timeåˆ—ï¼Œæ˜¾ç¤ºè¿™ä¸ªçŠ¶æ€æŒç»­çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼›</span></span><br><span class="line"><span class="meta">#ï¼ˆ7ï¼‰stateåˆ—ï¼Œæ˜¾ç¤ºä½¿ç”¨å½“å‰è¿æ¥çš„sqlè¯­å¥çš„çŠ¶æ€ï¼Œå¾ˆé‡è¦çš„åˆ—ã€‚stateæè¿°çš„æ˜¯è¯­å¥æ‰§è¡Œä¸­çš„æŸä¸ªçŠ¶æ€ã€‚ä¸€ä¸ªsqlè¯­å¥ï¼Œä»¥æŸ¥è¯¢ä¸ºä¾‹ï¼Œå¯èƒ½éœ€è¦ç»è¿‡copying to tmp tableï¼Œ sorting resultï¼Œ sending dataç­‰çŠ¶æ€æ‰å¯ä»¥å®Œæˆã€‚  </span></span><br><span class="line"><span class="meta">#ï¼ˆ8ï¼‰infoåˆ—ï¼Œæ˜¾ç¤ºè¿™ä¸ªsqlè¯­å¥ï¼Œæ˜¯åˆ¤æ–­é—®é¢˜è¯­å¥çš„ä¸€ä¸ªé‡è¦ä¾æ®ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-explainæŒ‡ä»¤ä»‹ç»"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-explainæŒ‡ä»¤ä»‹ç»" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - explainæŒ‡ä»¤ä»‹ç»"></a>ä¼˜åŒ–SQLæ­¥éª¤ - explainæŒ‡ä»¤ä»‹ç»</h2><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤æŸ¥è¯¢åˆ°æ•ˆç‡ä½çš„SQLè¯­å¥åï¼Œå¯ä»¥é€šè¿‡EXPLAINæˆ–è€…DESCå‘½ä»¤è·å–MySQLå¦‚ä½•æ‰§è¡ŒSELECTè¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬SELECTè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚  </p><p>æŸ¥è¯¢SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_item</td>    <td>const</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr></table><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="built_in">title</span>=<span class="string">'é˜¿å°”å¡ç‰¹ï¼ˆOT-979ï¼‰å†°å·ç™½ è”é€š3Gæ‰‹æœº3'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_item</td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>9816098</td>    <td>Using where</td>  </tr></table><table>  <tr>    <th>å­—æ®µ</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>id</td>    <td>selectæŸ¥è¯¢çš„åºåˆ—å·ï¼Œæ˜¯ä¸€ç»„æ•°å­—ï¼Œè¡¨ç¤ºçš„æ˜¯æŸ¥è¯¢ä¸­selectå­å¥æˆ–è€…æ˜¯æ“ä½œè¡¨çš„é¡ºåºã€‚ï¼ˆä¸è¡¨ç»“æ„æ‰§è¡Œçš„é¡ºåºæœ‰å…³ç³»ï¼‰</td>  </tr>  <tr>    <td>select_type</td>    <td>è¡¨ç¤ºSELECTçš„ç±»å‹ï¼Œå¸¸è§çš„å–å€¼æœ‰SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸ä½¿ç”¨è¡¨è¿æ¥æˆ–è€…æ˜¯å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆå­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ªSELECTï¼‰ç­‰</td>  </tr>  <tr>    <td>table</td>    <td>è¾“å‡ºç»“æœé›†çš„è¡¨ï¼ˆå½“å‰è¾“å‡ºçš„æ•°æ®ä¸å“ªä¸€å¼ è¡¨æœ‰å…³ï¼‰</td>  </tr>  <tr>    <td>type</td>    <td>è¡¨ç¤ºè¡¨çš„è¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸ºï¼ˆsystem---->const---->eq_ref------>ref------->ref_or_null------>index_merge------>index_subquery------->range------>index------>allï¼‰</td>  </tr>  <tr>    <td>possible_keys</td>    <td>è¡¨ç¤ºæŸ¥è¯¢æ—¶ï¼Œå¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ã€‚</td>  </tr>  <tr>    <td>key</td>    <td>è¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•</td>  </tr>  <tr>    <td>key_len</td>    <td>ç´¢å¼•å­—æ®µçš„é•¿åº¦</td>  </tr>  <tr>    <td>ref</td>    <td>å¼•ç”¨</td>  </tr>  <tr>    <td>rows</td>    <td>æ‰«æè¡Œçš„æ•°é‡</td>  </tr>  <tr>    <td>extra</td>    <td>æ‰§è¡Œæƒ…å†µçš„è¯´æ˜å’Œæè¿°ï¼Œé¢å¤–çš„å†…å®¹ï¼Œå‰é¢å‡ ä¸ªå­—æ®µå½“ä¸­æ²¡æœ‰è¡¨è¿°æ¸…æ¥šçš„ï¼Œåœ¨è¿™ä¸ªå­—æ®µå½“ä¸­è¡¨è¿°å‡ºæ¥</td>  </tr></table><blockquote><p>explain ç”¨æ¥æŸ¥çœ‹SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€‚</p></blockquote><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹id"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹id" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹id"></a>ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹id</h2><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><p>ç”¨æˆ·è¡¨ã€è§’è‰²è¡¨ã€ç”¨æˆ·è§’è‰²è¡¨ï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="string">'t_role'</span>(</span><br><span class="line">  <span class="string">'id'</span> varchar(32) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'role_name'</span> varchar(255)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'role_code'</span> varchar(255)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'description'</span> varchar(255)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (<span class="string">'id'</span>),</span><br><span class="line">  UNIQUE KEY <span class="string">'union_role_name'</span> (<span class="string">'role_name'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=InnoDB<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="string">'t_user'</span>(</span><br><span class="line">  <span class="string">'id'</span> varchar(32) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'username'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'name'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'password'</span> varchar(96)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (<span class="string">'id'</span>),</span><br><span class="line">  UNIQUE KEY <span class="string">'union_user_username'</span> (<span class="string">'user_name'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=InnoDB<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="string">'user_role'</span>(</span><br><span class="line">  <span class="string">'id'</span> int(11) <span class="keyword">NOT</span> <span class="literal">NULL</span> autoincrement,</span><br><span class="line">  <span class="string">'user_id'</span> varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'role_id'</span> varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (<span class="string">'id'</span>),</span><br><span class="line">  KEY <span class="string">'fk_ur_user_id'</span>(<span class="string">'user_id'</span>),</span><br><span class="line">  KEY <span class="string">'fk_ur_role_id'</span>(<span class="string">'role_id'</span>),</span><br><span class="line">  CONSTRAINT <span class="string">'fk_ur_role_id'</span> FOREIGN KEY (<span class="string">'role_id'</span>) REFERENCES <span class="string">'t_role'</span> (<span class="string">'id'</span>) ON DELETE <span class="literal">NO</span> ACTION ON UPDATE <span class="literal">NO</span> ACTION,</span><br><span class="line">  CONSTRAINT <span class="string">'fk_ur_user_id'</span> FOREIGN KEY (<span class="string">'user_id'</span>) REFERENCES <span class="string">'t_user'</span> (<span class="string">'id'</span>) ON DELETE <span class="literal">NO</span> ACTION ON UPDATE <span class="literal">NO</span> ACTION</span><br><span class="line">)<span class="attribute">ENGINE</span>=InnoDB<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥ç”¨æˆ¶æ•°æ®</span></span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'1'</span>,<span class="string">'è€ç‹'</span>,<span class="string">'xxxxxyyyyyyy'</span>,<span class="string">'è¶…çº§ç®¡ç†å‘˜'</span>);</span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'2'</span>,<span class="string">'è€æ'</span>,<span class="string">'xxxxxyyyyyyyzzzzz'</span>,<span class="string">'ç³»ç»Ÿç®¡ç†å‘˜'</span>);</span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'3'</span>,<span class="string">'è€å¤´å­'</span>,<span class="string">'xxxxxyyyytyyyzzzzz'</span>,<span class="string">'å­¦ç”Ÿ1'</span>);</span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'4'</span>,<span class="string">'è€å©†å­'</span>,<span class="string">'xxxxxyywyyyyyzzzzz'</span>,<span class="string">'å­¦ç”Ÿ2'</span>);</span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'5'</span>,<span class="string">'super'</span>,<span class="string">'xxxxxyyfyyyyyzzzzz'</span>,<span class="string">'å­¦ç”Ÿ3'</span>);</span><br><span class="line">insert into <span class="string">'t_user'</span>(<span class="string">'id'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>,<span class="string">'name'</span>) values(<span class="string">'6'</span>,<span class="string">'admin'</span>,<span class="string">'xxxxxyyyyyyyzzzzze'</span>,<span class="string">'å­¦ç”Ÿ4'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥è§’è‰²æ•°æ®</span></span><br><span class="line"><span class="built_in">..</span><span class="built_in">..</span></span><br><span class="line"><span class="comment"># æ’å…¥ç”¨æˆ·è§’è‰²æ•°æ®</span></span><br><span class="line"><span class="built_in">..</span><span class="built_in">..</span></span><br></pre></td></tr></table></figure><p><strong>explainå½“ä¸­çš„idå­—æ®µ</strong></p><p>idå­—æ®µæ˜¯selectæŸ¥è¯¢çš„åºå·(å¹¶ä¸æ˜¯è‡ªå¢ï¼Œæ§åˆ¶è¡¨ç»“æ„çš„æ‰§è¡Œé¡ºåº)ï¼Œæ˜¯ä¸€ç»„æ•°å­—ï¼Œè¡¨ç¤ºæ˜¯çš„æ˜¯å¤„æŸ¥è¯¢ä¸­æ‰§è¡Œselectå­å¥æˆ–è€…æ˜¯æ“ä½œè¡¨çš„é¡ºåºï¼Œidæƒ…å†µæœ‰ä¸‰ç§ï¼š<br>ï¼ˆ1ï¼‰<strong>idç›¸åŒè¡¨ç¤ºåŠ è½½è¡¨çš„é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹</strong>  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_role r,t_user u,user_role ur <span class="keyword">where</span> r.id=ur.role_id <span class="keyword">and</span> u.id=ur.user_id;<span class="comment"># å¤šè¡¨è”æŸ¥</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>r</td>    <td>PRIMARY</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>5</td>    <td>NULL</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>ur</td>    <td>ref</td>    <td>fk_ur_user_id,fk_ur_role_id</td>    <td>fk_ur_role_id</td>    <td>99</td>    <td>db03.r.id</td>    <td>1</td>    <td>Using where</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>u</td>    <td>eq_ref</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>db.ur.user_id</td>    <td>1</td>    <td>NULL</td>  </tr></table><p>ï¼ˆ2ï¼‰<strong>idä¸åŒidå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆè¢«æ‰§è¡Œ</strong>  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_role <span class="keyword">WHERE</span> <span class="keyword">id</span>=</span><br><span class="line">(</span><br><span class="line">  <span class="keyword">SELECT</span> role_id <span class="keyword">FROM</span> user_role <span class="keyword">WHERE</span> user_id=</span><br><span class="line">  (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> t_user <span class="keyword">WHERE</span> username=<span class="string">'stu1'</span></span><br><span class="line">  )</span><br><span class="line">)<span class="comment"># åµŒå¥—å­æŸ¥è¯¢</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>t_role</td>    <td>const</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>SUBQUERY</td>    <td>user_role</td>    <td>ref</td>    <td>fk_ur_user_id</td>    <td>fk_ur_user_id</td>    <td>99</td>    <td>const</td>    <td>1</td>    <td>Using where</td>  </tr>  <tr>    <td>3</td>    <td>SUBQUERY</td>    <td>t_user</td>    <td>const</td>    <td>unique_user_username</td>    <td>unique_user_username</td>    <td>137</td>    <td>const</td>    <td>1</td>    <td>Using index</td>  </tr></table><p>ï¼ˆ3ï¼‰<strong>idæœ‰ç›¸åŒï¼Œä¹Ÿæœ‰ä¸åŒï¼ŒåŒæ—¶å­˜åœ¨ã€‚idç›¸åŒçš„å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç»„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œï¼›åœ¨æ‰€æœ‰çš„ç»„ä¸­ï¼Œidçš„å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œã€‚</strong>  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_role r,</span><br><span class="line">(</span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_role ur <span class="keyword">WHERE</span> ur.<span class="string">'user_id'</span>=<span class="string">'2'</span></span><br><span class="line">) a  </span><br><span class="line"><span class="keyword">WHERE</span> r.id=a.role_id;  </span><br><span class="line"><span class="comment">#ä¸‰è¡¨æŸ¥è¯¢åˆè¿æ¥äº†ä¸€ä¸ªå­æŸ¥è¯¢</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>< derived2></td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>2</td>    <td>Using where</td>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>r</td>    <td>eq_ref</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>a.role_id</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>DERIVED</td>    <td>ur</td>    <td>ref</td>    <td>fk_ur_user_id</td>    <td>fk_ur_user_id</td>    <td>99</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹select-type"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹select-type" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹select_type"></a>ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹select_type</h2><p><strong>explainä¹‹select_type</strong><br>è¡¨ç¤ºSELECTçš„ç±»å‹ï¼Œå¸¸è§çš„å–å€¼ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼ˆä»ä¸Šå¾€ä¸‹ï¼Œæ•ˆç‡è¶Šæ¥è¶Šä½ï¼‰ï¼š  </p><table>  <tr>    <th>select_type</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>SIMPLE</td>    <td>ç®€å•çš„selectæŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸­ä¸åŒ…å«å­æŸ¥è¯¢æˆ–è€…UNIONã€‚</td>  </tr>  <tr>    <td>PRIMARY</td>    <td>æŸ¥è¯¢ä¸­è‹¥åŒ…å«ä»»ä½•å¤æ‚çš„å­æŸ¥è¯¢ï¼Œæœ€å¤–å±‚æŸ¥è¯¢æ ‡è®°ä¸ºè¯¥æ ‡è¯†ã€‚</td>  </tr>  <tr>    <td>SUBQUERY</td>    <td>åœ¨SELECTæˆ–è€…WHEREåˆ—è¡¨ä¸­åŒ…å«äº†å­æŸ¥è¯¢ã€‚</td>  </tr>  <tr>    <td>DERIVED</td>    <td>åœ¨FROMåˆ—è¡¨ä¸­åŒ…å«çš„å­æŸ¥è¯¢ï¼Œè¢«æ ‡è®°ä¸ºDERIVEDï¼ˆè¡ç”Ÿï¼‰MYSQLæˆ–é€’å½’æ‰§è¡Œè¿™äº›å­æŸ¥è¯¢ï¼ŒæŠŠç»“æœæ”¾åœ¨ä¸´æ—¶è¡¨ä¸­ã€‚</td>  </tr>  <tr>    <td>UNION</td>    <td>è‹¥ç¬¬äºŒä¸ªSELECTå‡ºç°åœ¨UNIONä¹‹åï¼Œåˆ™æ ‡è®°ä¸ºUNIONï¼›è‹¥UNIONåŒ…å«åœ¨FROMå­å¥çš„å­æŸ¥è¯¢ä¸­ï¼Œå¤–å±‚SELECTå°†æ ‡è®°ä¸ºï¼šDERIVED</td>  </tr>  <tr>    <td>UNION RESULT</td>    <td>ä»UNIONè¡¨è·å–ç»“æœçš„SELECT</td>  </tr></table><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item;</span><br><span class="line"># SIMPLE  </span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=(<span class="keyword">select</span> id <span class="keyword">from</span> user_role <span class="keyword">where</span> role_id=<span class="string">'9'</span>);  </span><br><span class="line"># <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> idï¼š <span class="keyword">PRIMARY</span> ï¼›  </span><br><span class="line">#(<span class="keyword">select</span> id <span class="keyword">from</span> user_role <span class="keyword">where</span> role_id=<span class="string">'9'</span>)ï¼šSUBQUERY  </span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> a.* <span class="keyword">from</span> (<span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="string">'1'</span>,<span class="string">'2'</span>)) a;</span><br><span class="line"># <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="string">'1'</span>,<span class="string">'2'</span>): <span class="keyword">DERIVED</span>ï¼›å­˜å‚¨è‡³è¡ç”Ÿçš„ä¸´æ—¶è¡¨</span><br><span class="line"># <span class="keyword">select</span> a.* <span class="keyword">from</span> ï¼š <span class="keyword">PRIMARY</span>  derived2æŒ‡çš„æ˜¯<span class="keyword">derived</span>æŒ‡çš„æ˜¯è¡ç”Ÿçš„è¡¨aï¼Œ<span class="number">2</span>åˆ™æŒ‡çš„æ˜¯idï¼Œæ‰§è¡Œæ“ä½œè¡¨é¡ºåºå­—æ®µï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'1'</span> <span class="keyword">union</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'2'</span>;</span><br><span class="line">#<span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'1'</span>: <span class="keyword">PRIMARY</span></span><br><span class="line">#<span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'2'</span> ï¼š <span class="keyword">UNION</span></span><br><span class="line"># <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'1'</span>çš„ç»“æœ  &amp;&amp;  <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'2'</span>çš„ç»“æœè”åˆèµ·æ¥ï¼š <span class="keyword">UNION</span> RESULT</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹table-ã€type"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹table-ã€type" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹table ã€type"></a>ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹table ã€type</h2><p><strong>explainä¹‹table</strong><br>å±•ç¤ºè¿™ä¸€è¡Œçš„æ•°æ®æ˜¯å…³äºå“ªä¸€å¼ è¡¨çš„ï¼›  </p><p><strong>explainä¹‹type</strong><br>typeæ˜¾ç¤ºçš„æ˜¯è®¿é—®ç±»å‹ï¼Œæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œå¯å–å€¼ä¸ºï¼š  </p><table>  <tr>    <th>type</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>NULL</td>    <td>MySQLä¸è®¿é—®ä»»ä½•è¡¨ï¼Œç´¢å¼•ï¼Œç›´æ¥è¿”å›ç»“æœ</td>  </tr>  <tr>    <td>system</td>    <td>è¡¨åªæœ‰ä¸€è¡Œè®°å½•ï¼ˆç­‰åŒäºç³»ç»Ÿè¡¨ï¼‰ï¼Œè¿™æ˜¯constç±»å‹çš„ç‰¹ä¾‹ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°</td>  </tr>  <tr>    <td>const</td>    <td>è¡¨ç¤ºé€šè¿‡ç´¢å¼•ä¸€æ¬¡å°±æ‰¾åˆ°äº†ï¼Œconstç”¨äºæ¯”è¾ƒprimary keyæˆ–è€…uniqueç´¢å¼•ã€‚å› ä¸ºåªåŒ¹é…ä¸€è¡Œæ•°æ®ï¼Œç´¢å¼•å¾ˆå¿«ã€‚å¦‚å°†ä¸»é”®ç½®äºwhereåˆ—è¡¨ä¸­ï¼ŒMySQLå°±èƒ½å°†è¯¥æŸ¥è¯¢è½¬æ¢æˆä¸€ä¸ªå¸¸é‡ã€‚(æ ¹æ®ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢)</td>  </tr>  <tr>    <td>eq_ref</td>    <td>ç±»ä¼¼refï¼ŒåŒºåˆ«åœ¨äºä½¿ç”¨çš„æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œä½¿ç”¨ä¸»é”®çš„å…³è”æŸ¥è¯¢ï¼Œå…³è”æŸ¥è¯¢å‡ºçš„è®°å½•åªæœ‰ä¸€æ¡ã€‚å¸¸è§äºä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ‰«æ</td>  </tr>  <tr>    <td>ref</td>    <td>éå”¯ä¸€æ€§ç´¢å¼•æ‰«æï¼Œè¿”å›çš®è¯¶æŸä¸ªå•ç‹¬å€¼çš„æ‰€æœ‰è¡Œã€‚æœ¬è´¨ä¸Šä¹Ÿæ˜¯é‡ç§ç´¢å¼•è®¿é—®ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…æŸä¸ªå•ç‹¬å€¼çš„æ‰€æœ‰è¡Œï¼ˆå¤šä¸ªï¼‰</td>  </tr>  <tr>    <td>range</td>    <td>åªæ£€ç´¢ç»™å®šè¿”å›çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥é€‰æ‹©è¡Œã€‚whereä¹‹åå‡ºç°betweenï¼Œ<ï¼Œ>ï¼Œinç­‰æ“ä½œ</ï¼Œ></td>  </tr>  <tr>    <td>index</td>    <td>indexä¸ALLçš„åŒºåˆ«ä¸ºindexç±»å‹åªæ˜¯éå†äº†ç´¢å¼•æ ‘ï¼Œé€šå¸¸æ¯”ALLå¿«ï¼ŒALLæ˜¯éå†æ•°æ®æ–‡ä»¶ã€‚</td>  </tr>  <tr>    <td>all</td>    <td>å°†éå†å…¨è¡¨ä»¥æ‰¾åˆ°åŒ¹é…çš„è¡Œ</td>  </tr></table><p><strong>typeä¸ºNULL</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> now(); # æŸ¥è¯¢å½“å‰æ—¶é—´(æŸ¥è¯¢æ•ˆç‡éå¸¸é«˜) ï¼š <span class="keyword">type</span>-&gt;<span class="keyword">NULL</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>No tables used</td>  </tr></table><p><strong>typeä¸ºsystem</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> id=<span class="string">'1'</span>) a;ï¼š <span class="keyword">type</span>-&gt;<span class="keyword">system</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>< derived2></td>    <td>system</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>DERIVED</td>    <td>t_user</td>    <td>const</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr></table><p><strong>typeä¸ºconst</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="keyword">id</span>=<span class="string">'1'</span>;<span class="comment"># æ ¹æ®ä¸»é”®æŸ¥è¯¢è¿”å›ä¸€æ¡è®°å½•ï¼štype-&gt;const</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>t_user</td>    <td>const</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr></table><p><strong>typeä¸ºconst</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> username=<span class="string">'stu1'</span>;<span class="comment">#æ ¹æ®å”¯ä¸€ç´¢å¼•æŸ¥è¯¢è¿”å›ä¸€æ¡è®°å½•ï¼štype-&gt;const</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>t_user</td>    <td>const</td>    <td>unique_user_username</td>    <td>unique_user_username</td>    <td>137</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr></table><p><strong>typeä¸ºeq_ref</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_user;//idæœ‰1ã€2ã€3ã€4ã€5ã€6</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_role;//idæœ‰10ã€5ã€7ã€8ã€9</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user u ,t_role r <span class="keyword">where</span> u.id=r.id;<span class="comment">#ä¸šåŠ¡é€»è¾‘å±‚é¢ä¸ç¬¦åˆï¼Œåªæ˜¯æ•°æ®åº“ç¡¬æ€§æŸ¥è¯¢ï¼ˆå¼ºè¡Œå…³è”ï¼‰å‡ºä¸€ä¸ªtypeä¸ºeq_refçš„ç¤ºä¾‹è€Œå·²</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>r</td>    <td>ALL</td>    <td>PRIMARY</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>5</td>    <td>NULL</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>u</td>    <td>eq_ref</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>98</td>    <td>demo_02.r.id</td>    <td>1</td>    <td>NULL</td>  </tr></table><p><strong>typeä¸ºref</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> t_user;<span class="comment">#æŸ¥è¯¢t_userè¡¨å½“ä¸­çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_user_name <span class="keyword">on</span> t_user(<span class="string">'name'</span>);</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'a'</span>;<span class="comment">#æ ¹æ®éå”¯ä¸€æ€§ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿”å›çš„è®°å½•åªæœ‰ä¸€æ¡</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ï¼š</p></blockquote><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_keys</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>t_user</td>    <td>ref</td>    <td>idx_user_name</td>    <td>idx_user_name</td>    <td>137</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><p><strong>typeä¸ºrange(èŒƒå›´æŸ¥è¯¢)</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span>.ï¼ˆbetween <span class="keyword">and</span>ï¼‰ã€ï¼ˆ&gt;ã€&lt;ã€&gt;=ã€&lt;=ï¼‰<span class="built_in">..</span>.</span><br></pre></td></tr></table></figure><p><strong>typeä¸ºindex(æŒ‡çš„å³ç´¢å¼•)</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user;//æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå³åˆ°æ•°æ®æ–‡ä»¶å½“ä¸­è¿›è¡Œè¯»å–ï¼›<span class="keyword">type</span>ä¸º<span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id <span class="keyword">from</span> t_user;//æ­¤æ—¶<span class="keyword">type</span>ä¸º<span class="keyword">index</span>ï¼›å› ä¸ºidä¸ºä¸»é”®ï¼Œä¸»é”®åˆ™èµ°ä¸»é”®ç´¢å¼•ï¼›</span><br></pre></td></tr></table></figure><p>ç»“æœå€¼ä»æœ€å¥½åˆ°æœ€åä¾æ¬¡æ˜¯ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NULL</span> &gt;<span class="built_in"> system </span>&gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; all</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹key-rows-extra"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-explainä¹‹key-rows-extra" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹key rows extra"></a>ä¼˜åŒ–SQLæ­¥éª¤ - explainä¹‹key rows extra</h2><p><strong>explainä¹‹key</strong>  </p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">possible_keys:</span>æ˜¾ç¤ºå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨çš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼›</span><br><span class="line"><span class="symbol">key:</span>å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸ºNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼›</span><br><span class="line">key_lenï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½ï¼ˆè¶ŠçŸ­æ‰§è¡Œæ•ˆç‡è¶Šé«˜ï¼‰ï¼›</span><br></pre></td></tr></table></figure><p><strong>explainä¹‹rows</strong>  </p><p>æ‰«æè¡Œçš„æ•°é‡ã€‚  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="type">name</span> =<span class="string">'a'</span>;#<span class="type">name</span>å»ºäº†ç´¢å¼•ï¼Œæ‰€ä»¥æŸ¥è¯¢<span class="keyword">rows</span>ä¸º<span class="number">1</span>è¡Œ</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="keyword">password</span>=<span class="string">'aaa'</span>;# <span class="keyword">password</span>æ²¡æœ‰å»ºç«‹ç´¢å¼•ï¼Œæ•´è¡¨æ‰«æï¼›<span class="keyword">rows</span>å³<span class="keyword">SQL</span>è¯­å¥æŸ¥è¯¢æ—¶æ‰€æŸ¥è¯¢çš„è¡Œæ•°ï¼›</span><br></pre></td></tr></table></figure><p><strong>explainä¹‹extra</strong>  </p><p>å…¶ä»–çš„é¢å¤–çš„æ‰§è¡Œè®¡åˆ’ä¿¡æ¯ï¼Œåœ¨è¯¥åˆ—å±•ç¤ºã€‚<br>ï¼ˆusing_filesortä»¥åŠusing_temporaryéå¸¸è€—æ€§èƒ½ï¼›éœ€è¦ä¼˜åŒ–using_filesortä»¥åŠusing_temporaryï¼›ä¿æŒusing_indexï¼‰</p><table>  <tr>    <th>extra</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>using_filesort</td>    <td>è¯´æ˜mysqlä¼šå¯¹æ•°æ®ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç´¢å¼•æ’åºï¼Œè€Œä¸æ˜¯æŒ‰ç…§è¡¨å†…çš„ç´¢å¼•é¡ºåºè¿›è¡Œè¯»å–ï¼Œç§°ä¸ºâ€œæ–‡ä»¶æ’åºâ€</td>  </tr>  <tr>    <td>using_temporary</td>    <td>ä½¿ç”¨äº†ä¸´æ—¶è¡¨ä¿å­˜ä¸­é—´ç»“æœï¼ŒMySQLå¯¹æŸ¥è¯¢ç»“æœæ’åºæ—¶ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚å¸¸è§äºorder by å’Œgroup by</td>  </tr>  <tr>    <td>using_index</td>    <td>è¡¨ç¤ºç›¸åº”çš„selectæ“ä½œä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼Œé¿å…è®¿é—®è¡¨çš„æ•°æ®è¡Œï¼Œæ•ˆç‡ä¸é”™ã€‚</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span>;<span class="comment">#æŒ‰ç…§idè¿›è¡Œæ’åº</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">password</span>;<span class="comment">#æ ¹æ®æ–‡ä»¶è¿›è¡Œæ’åºï¼›å³éœ€è¦æ‰«ææ–‡ä»¶å½“ä¸­çš„å†…å®¹ï¼Œç„¶åå†å»è¿›è¡Œæ’åºï¼›æ•ˆç‡éå¸¸ä½ï¼›è¿™ä¸ªæ—¶å€™å¦‚æœéœ€è¦è¿›è¡Œä¼˜åŒ–çš„è¯ï¼Œå¯ä»¥åœ¨passwordå­—æ®µä¸Šä¸nameä¸€æ ·å»ºç«‹ç´¢å¼•ï¼›</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span>; <span class="comment">#æ­¤æ—¶ä¾ç„¶æ˜¯using_filesortæ ¹æ®æ–‡ä»¶æ’åº</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> t_user <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span>;<span class="comment">#æ­¤æ—¶åˆ™ä½¿ç”¨çš„æ˜¯using_indexæ ¹æ®ç´¢å¼•æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">name</span>;<span class="comment">#æ­¤æ—¶extraä¸ºnullï¼ŒåŸå› æ˜¯æ ¹æ®nameå­—æ®µå»ºç«‹äº†ç´¢å¼•</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">password</span>;<span class="comment">#æ­¤æ—¶passwordå­—æ®µæ²¡æœ‰å»ºç«‹ç´¢å¼•ï¼›extraä¸ºusing temporaryï¼›using filesortæ•ˆç‡ä½ï¼›</span></span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-show-profile"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-show-profile" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - show profile"></a>ä¼˜åŒ–SQLæ­¥éª¤ - show profile</h2><p>MySQLä»5.0.37ç‰ˆæœ¬å¼€å§‹å¢åŠ äº†å¯¹ show profiles å’Œshow profileè¯­å¥çš„æ”¯æŒã€‚  </p><p>show profilesèƒ½å¤Ÿåœ¨åšSQLä¼˜åŒ–æ—¶å¸®åŠ©äº†è§£äº‹ä»¶éƒ½è€—è´¹åˆ°å“ªé‡Œå»äº†ï¼›  </p><p>é€šè¿‡ have_profiling å‚æ•°ï¼Œèƒ½å¤Ÿçœ‹åˆ°å½“å‰MySQLæ˜¯å¦æ”¯æŒprofileï¼›  </p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> <span class="comment">@@</span>have_profiling;<span class="meta">#ç³»ç»Ÿå˜é‡ï¼›YES/NO</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤ profiling æ˜¯å…³é—­çš„ï¼Œå¯ä»¥é€šè¿‡setè¯­å¥åœ¨Sessionçº§åˆ«å¼€å¯profilingï¼š  </p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="symbol">@profiling</span><span class="comment">;</span></span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">set</span> <span class="attribute">profiling</span>=1;# å¼€å¯profilingå¼€å…³ï¼›0:æœªå¼€å¯ï¼›1ï¼šå¼€å¯</span><br></pre></td></tr></table></figure><p>é€šè¿‡profileï¼Œèƒ½å¤Ÿæ›´æ¸…æ¥šçš„äº†è§£SQLæ‰§è¡Œçš„è¿‡ç¨‹ï¼›<br>é¦–å…ˆï¼Œå¯ä»¥æ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> db01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> title=<span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">profiles</span>;<span class="comment">#æŸ¥çœ‹ä¹‹å‰æ¯ä¸€ä¸ªæ“ä½œçš„è€—æ—¶æƒ…å†µ query_id(å½“å‰æŸ¥è¯¢çš„id)ã€durationï¼ˆæ‰§è¡Œçš„è€—æ—¶æ—¶é—´ï¼‰ã€queryï¼ˆæŸ¥è¯¢çš„sqlï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># use db01;å…¶å®åº•å±‚å³select database();</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œå†æ‰§è¡Œshow profilesæŒ‡ä»¤ï¼Œæ¥æŸ¥çœ‹SQLè¯­å¥æ‰§è¡Œçš„è€—æ—¶ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">profiles</span>;<span class="comment"># query_idã€durationã€query</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ show profile for query query_id è¯­å¥å¯ä»¥æŸ¥çœ‹åˆ°è¯¥SQLæ‰§è¡Œè¿‡ç¨‹ä¸­æ¯ä¸ªçº¿ç¨‹çš„çŠ¶æ€å’Œæ¶ˆè€—çš„æ—¶é—´ï¼›  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show<span class="built_in"> profile </span><span class="keyword">for</span> query 6;#6å³é€šè¿‡show profilesæŸ¥è¯¢å‡ºæ¥çš„query_id;  statusã€duration</span><br></pre></td></tr></table></figure><table>  <tr>    <th>statusï¼ˆç»å†çš„æ¯ä¸€ä¸ªé˜¶æ®µï¼‰</th>    <th>durationï¼ˆæ¯ä¸€ä¸ªé˜¶æ®µçš„è€—æ—¶æƒ…å†µï¼‰</th>  </tr>  <tr>    <td>startingï¼ˆå¼€å¯ï¼‰</td>    <td>0.000046</td>  </tr>  <tr>    <td>checking permissionsï¼ˆæ ¡éªŒæƒé™ï¼‰</td>    <td>...</td>  </tr>  <tr>    <td>opening tablesï¼ˆæ‰“å¼€è¡¨ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>initï¼ˆåˆå§‹åŒ–ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>system lockï¼ˆç³»ç»Ÿé”ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>optimizingï¼ˆä¼˜åŒ–å™¨ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>statisticsï¼ˆç»Ÿè®¡ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>perparingï¼ˆå‡†å¤‡ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>executingï¼ˆæ‰§è¡Œï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>sending dataï¼ˆå‘é€æ•°æ®ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>endï¼ˆç»“æŸï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>query endï¼ˆæŸ¥è¯¢ç»“æŸï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>closing tablsï¼ˆå…³é—­è¡¨ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>freeing itmesï¼ˆé‡Šæ”¾å…¶ä»–é¡¹ï¼‰</td>    <td>...</td>  </tr>    <tr>    <td>cleaning upï¼ˆæ¸…é™¤ï¼‰</td>    <td>...</td>  </tr></table><p>ï¼ˆselect count(*) from tb_itemï¼›è¯¥sqlè¯­å¥çš„æ—¶é—´éƒ½è€—è´¹åœ¨sending dataä¸Šäº†ï¼›ï¼‰  </p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">TIP:  </span></span><br><span class="line"><span class="code">    Sending data çŠ¶æ€è¡¨ç¤ºMySQLçº¿ç¨‹å¼€å§‹è®¿é—®æ•°æ®è¡Œå¹¶æŠŠç»“æœæ”¾å›ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸ä»…ä»…æ˜¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚  </span></span><br><span class="line"><span class="code">    ç”±äºSending data çŠ¶æ€ä¸‹ï¼ŒMySQLçº¿ç¨‹å¾€å¾€éœ€è¦åšå¤§é‡çš„ç£ç›˜è¯»å–æ“ä½œï¼Œæ‰€ä»¥ç»å¸¸æ˜¯æ•´ä¸ªæŸ¥è¯¢ä¸­è€—æ—¶æœ€é•¿çš„çŠ¶æ€ã€‚</span></span><br></pre></td></tr></table></figure><p>åœ¨è·å–åˆ°æœ€è€—æ—¶æ—¶é—´çš„çº¿ç¨‹çŠ¶æ€åï¼ŒMySQLæ”¯æŒè¿›ä¸€æ­¥é€‰æ‹©allã€cpuã€block ioã€context switchã€page faults ç­‰æ˜ç»†ç±»å‹ç­‰æŸ¥çœ‹MySQLåœ¨ä½¿ç”¨ä»€ä¹ˆèµ„æºä¸Šè€—è´¹äº†è¿‡é«˜çš„æ—¶é—´ã€‚<br>ä¾‹å¦‚ï¼Œé€‰æ‹©æŸ¥çœ‹CPUçš„è€—è´¹æ—¶é—´ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select<span class="built_in"> profile </span>cpu <span class="keyword">for</span> query 6;# statusã€durationã€CPU_userã€CPU_SystemæŸ¥è¯¢åˆ°çš„æ˜¯idä¸º6çš„è¯¥æ¡sqlè¯­å¥åœ¨å„ä¸ªé˜¶æ®µå½“ä¸­cpuçš„è€—è´¹æƒ…å†µï¼›</span><br><span class="line"></span><br><span class="line">select<span class="built_in"> profile </span>all <span class="keyword">for</span> query 6;# statusã€durationã€CPU_userã€CPU_systemã€context_voluntaryã€context_involuntaryã€block_ops_inã€block_ops_outã€<span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span></span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡show profileå¯ä»¥åˆ†æSQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶æƒ…å†µ</p></blockquote><h2 id="ä¼˜åŒ–SQLæ­¥éª¤-traceå·¥å…·"><a href="#ä¼˜åŒ–SQLæ­¥éª¤-traceå·¥å…·" class="headerlink" title="ä¼˜åŒ–SQLæ­¥éª¤ - traceå·¥å…·"></a>ä¼˜åŒ–SQLæ­¥éª¤ - traceå·¥å…·</h2><p>mysqlçš„æœåŠ¡ç«¯serveræœ‰ä¸€ä¸ªæ­¥éª¤å°±æ˜¯optimizerï¼Œä¼˜åŒ–sqléƒ¨åˆ†ï¼›æŒ‰ç…§mysqlå½“ä¸­å…·ä½“å¯¹åº”çš„è§„åˆ™å¯¹SQLè¿›è¡Œä¼˜åŒ–å¤„ç†ï¼›traceå³åˆ†æä¼˜åŒ–å™¨</p><p><strong>traceåˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’</strong><br>MySQL5.6æä¾›äº†å¯¹SQLçš„è·Ÿè¸ª traceï¼Œé€šè¿‡traceæ–‡ä»¶èƒ½å¤Ÿè¿›ä¸€æ­¥äº†è§£ä¸ºä»€ä¹ˆä¼˜åŒ–å™¨é€‰æ‹©Aè®¡åˆ’ï¼Œè€Œä¸æ˜¯Bè®¡åˆ’ã€‚  </p><p>æ‰“å¼€traceï¼Œè®¾ç½®æ ¼å¼ä¸ºJSONï¼Œå¹¶è®¾ç½®traceæœ€å¤§èƒ½å¤Ÿä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œé¿å…è§£æè¿‡ç¨‹ä¸­å› ä¸ºé»˜è®¤å†…å­˜è¿‡å°è€Œä¸èƒ½å¤Ÿå®Œæ•´å±•ç¤ºã€‚  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">SET</span> optimizer_trace =<span class="string">'enabled=on'</span>, <span class="attribute">end_markers_in_json</span>=on;# optimizer_trace =<span class="string">'enabled=on'</span>è¿›è¡Œå¼€å¯ï¼›<span class="attribute">end_markers_in_json</span>=on è®¾ç½®æ ¼å¼ä¸ºJSON</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">set</span> <span class="attribute">optimizer_trace_max_mem_size</span>=1000000;# æ—¥å¿—æ–‡ä»¶å ç”¨å†…å­˜å¤§å°</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒSQLè¯­å¥ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span> &lt; <span class="number">4</span>;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ£€æŸ¥information_schema.optimizer_traceå°±å¯ä»¥çŸ¥é“MySQLæ˜¯å¦‚ä½•æ‰§è¡ŒSQLçš„ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> infomation_schema.optimizer_trace\G;# infomation_schemaç³»ç»Ÿåº“ï¼›optimizer_traceç³»ç»Ÿåº“å½“ä¸­çš„æ—¥å¿—è¡¨</span><br><span class="line"></span><br><span class="line"># QUERY æŸ¥è¯¢çš„SQLè¯­å¥ï¼›<span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> id&lt;<span class="number">4</span>;</span><br><span class="line"># TRACE è·Ÿè¸ªä¿¡æ¯ï¼›åœ¨è·Ÿè¸ªä¿¡æ¯å½“ä¸­æœ€ç»ˆ<span class="keyword">select</span> * å½“ä¸­çš„* æœ€ç»ˆè§£æä¸ºtb_itemè¡¨å½“ä¸­çš„æ¯ä¸€ä¸ªå…·ä½“çš„å­—æ®µ</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-éªŒè¯ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡"><a href="#ç´¢å¼•çš„ä½¿ç”¨-éªŒè¯ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - éªŒè¯ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡"></a>ç´¢å¼•çš„ä½¿ç”¨ - éªŒè¯ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡</h2><p><strong>ç´¢å¼•çš„ä½¿ç”¨</strong><br>ç´¢å¼•æ—¶å€™æ•°æ®åº“ä¼˜åŒ–æœ€å¸¸ç”¨ä¹Ÿæ˜¯æœ€é‡è¦çš„æ‰‹æ®µä¹‹ä¸€ï¼Œé€šè¿‡ç´¢å¼•é€šå¸¸å¯ä»¥å¸®åŠ©ç”¨æˆ·è§£å†³å¤§å¤šæ•°çš„MySQLçš„æ€§èƒ½ä¼˜åŒ–é—®é¢˜ï¼›  </p><p><strong>éªŒè¯ç´¢å¼•æå‡æŸ¥è¯¢æ•ˆç‡</strong><br>åœ¨å‡†å¤‡çš„è¡¨ç»“æ„tb_itemä¸­ï¼Œä¸€å…±å­˜å‚¨äº†300ä¸‡æ¡è®°å½•ï¼›  </p><p><strong>A.</strong> æ ¹æ®IDæŸ¥è¯¢  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_items;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1888</span>;<span class="comment">#idå­—æ®µå…·æœ‰ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1999</span>\G;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ ¹æ®titleè¿›è¡Œç²¾ç¡®æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> title=<span class="string">'é˜¿å°”å¡ç‰¹'</span>;<span class="comment">#æŸ¥è¯¢é€Ÿåº¦æ…¢ï¼Œå› ä¸ºtitleå­—æ®µæ²¡æœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½ï¼Œåˆ›å»ºä¸»é”®å³è‡ªåŠ¨ç”Ÿæˆä¸»é”®ç´¢å¼•ï¼›</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼š  </span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> title=<span class="string">'é˜¿å°”å¡ç‰¹'</span>\G;</span><br></pre></td></tr></table></figure><p>å¤„ç†æ–¹æ¡ˆï¼Œé’ˆå¯¹titleå­—æ®µï¼Œåˆ›å»ºç´¢å¼•ï¼š  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_item_title <span class="keyword">on</span> tb_item(<span class="built_in">title</span>);</span><br></pre></td></tr></table></figure><p>ç´¢å¼•åˆ›å»ºå®Œæˆä¹‹åï¼Œå†æ¬¡æŸ¥è¯¢ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> title=<span class="string">'é˜¿å°”å¡ç‰¹'</span>\G;</span><br><span class="line"><span class="comment"># åˆ›å»ºç´¢å¼•çš„è¿‡ç¨‹ä¸­ï¼Œmysqlåœ¨åšä»€ä¹ˆï¼Ÿè¡¨tb_itemä¸­æœ‰300ä¸‡æ¡è®°å½•ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™å°±ä¼šå¯¹è¿™300ä¸‡æ¡è®°å½•é‡å»ºç´¢å¼•ï¼›æ‰€ä»¥æ­¤æ—¶å³æ•°æ®åº“åº•å±‚åœ¨é‡å»ºç´¢å¼•ï¼›åˆ›å»ºå®Œç´¢å¼•ä¹‹åå†è¿›è¡ŒæŸ¥è¯¢æ•ˆç‡åˆ™å˜å¿«ï¼›ç´¢å¼•æ˜¯ä¼˜åŒ–æŸ¥è¯¢æœ€æœ‰æ•ˆçš„æ–¹å¼ä¹‹ä¸€ï¼›</span></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢é€Ÿåº¦å¾ˆå¿«ï¼Œæ¥è¿‘0sï¼Œä¸»è¦çš„åŸå› æ˜¯å› ä¸ºidä¸ºä¸»é”®ï¼Œæœ‰ç´¢å¼•ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1999</span>\G;</span><br></pre></td></tr></table></figure><p><strong>å‡†å¤‡ç¯å¢ƒ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="string">'tb_seller'</span>(</span><br><span class="line">  <span class="string">'sellerid'</span> <span class="built_in">varchar</span>(<span class="number">100</span>),</span><br><span class="line">  <span class="string">'name'</span> <span class="built_in">varchar</span>(<span class="number">100</span>),</span><br><span class="line">  <span class="string">'nickname'</span> <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line">  <span class="string">'password'</span> <span class="built_in">varchar</span>(<span class="number">60</span>),</span><br><span class="line">  <span class="string">'status'</span> <span class="built_in">varchar</span>(<span class="number">1</span>),</span><br><span class="line">  <span class="string">'address'</span> <span class="built_in">varchar</span>(<span class="number">100</span>),</span><br><span class="line">  <span class="string">'createtime'</span> datetime,</span><br><span class="line">  primary <span class="keyword">key</span>(<span class="string">'sellerid'</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥è®°å½• å¯¼å…¥åŸºæœ¬æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_seller <span class="keyword">values</span> ......</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè”åˆç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_name_sta_addr <span class="keyword">on</span> tb_seller(<span class="keyword">name</span>,<span class="keyword">status</span>,address);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºäº†ç´¢å¼•å¹¶ä¸æ˜¯ä¸€å®šä¼šæé«˜æ•ˆç‡ï¼›åˆ›å»ºäº†ç´¢å¼•å¹¶ä¸”éœ€è¦åˆç†è¿ç”¨ç´¢å¼•æ‰èƒ½å¤Ÿæé«˜æŸ¥è¯¢æ•ˆç‡ï¼›  </p><h2 id="ç´¢å¼•çš„ä½¿ç”¨-å…¨å€¼åŒ¹é…"><a href="#ç´¢å¼•çš„ä½¿ç”¨-å…¨å€¼åŒ¹é…" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - å…¨å€¼åŒ¹é…"></a>ç´¢å¼•çš„ä½¿ç”¨ - å…¨å€¼åŒ¹é…</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>(1) å…¨å€¼åŒ¹é…ï¼Œå¯¹ç´¢å¼•ä¸­æ‰€æœ‰åˆ—éƒ½æŒ‡å®šå…·ä½“å€¼ã€‚<br>è¯¥æƒ…å†µä¸‹ï¼Œç´¢å¼•ç”Ÿæ•ˆï¼Œæ‰§è¡Œæ•ˆç‡æé«˜ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="string">'1'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>\G;</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-æœ€å·¦å‰ç¼€æ³•åˆ™"><a href="#ç´¢å¼•çš„ä½¿ç”¨-æœ€å·¦å‰ç¼€æ³•åˆ™" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - æœ€å·¦å‰ç¼€æ³•åˆ™"></a>ç´¢å¼•çš„ä½¿ç”¨ - æœ€å·¦å‰ç¼€æ³•åˆ™</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>(2)æœ€å·¦å‰ç¼€æ³•åˆ™<br>tb_selleråˆ›å»ºäº†ä¸€ä¸ªå¤åˆç´¢å¼•å³nameã€statusã€addressè¿™ä¸‰ä¸ªå­—æ®µï¼›<br>å¦‚æœç´¢å¼•äº†å¤šåˆ—ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ã€‚<br>æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚<br>åŒ¹é…æœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œèµ°ç´¢å¼•ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span>;<span class="comment"># key:idx_name_sta_addrï¼› key_lenï¼š403</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="string">'1'</span>;<span class="comment"># key:idx_name_sta_addrï¼› key_lenï¼š410</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="string">'1'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;<span class="comment"># key:idx_name_sta_addrï¼› key_lenï¼š813</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">status</span>=<span class="string">'1'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;<span class="comment"># key:NULL key_lenï¼šNULL æ­¤æ—¶åˆ™ä¸å†èµ°ç´¢å¼•ï¼›å› ä¸ºä¸å†ç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæ²¡æœ‰ä»¥æœ€å·¦è¾¹çš„åˆ—å¼€å§‹ï¼›  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">status</span>=<span class="string">'1'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span> <span class="keyword">and</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;<span class="comment"># key:idx_name_sta_addrï¼› key_lenï¼š813 æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›ä¸whereåˆ—è¡¨å½“ä¸­å­—æ®µçš„å…ˆåé¡ºåºæ— å…³ï¼›ä¼šæ£€æŸ¥whereæ¡ä»¶åˆ—è¡¨ä¸­åŒ…ä¸åŒ…å«æœ€å·¦åˆ—ï¼›è€Œæ˜¯ä¸å¤åˆç´¢å¼•å½“ä¸­çš„æ˜¯å¦å­˜åœ¨æœ‰å¤åˆç´¢å¼•å½“ä¸­çš„æœ€å·¦å­—æ®µï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span> ;<span class="comment">#è·³è¿‡ç´¢å¼•åˆ—ä¸èµ°ç´¢å¼•; key:idx_sellter_name_sta_addrï¼›key_len: 403ï¼›æ­¤æ—¶ç´¢å¼•çš„é•¿åº¦æ˜¯403ï¼›ä¹Ÿå°±æ˜¯è¿™æ˜¯æ‰§è¡Œ explain select * from tb_seller where name ='å°ç±³ç§‘æŠ€'; æ—¶æ‰€èµ°çš„ç´¢å¼•ï¼›å³åé¢çš„ and address='åŒ—äº¬å¸‚' å¹¶æœªèµ°ç´¢å¼•ï¼›</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿åæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œç´¢å¼•å¤±æ•ˆï¼›<br>éœ€è¦åŒ…å«å¤åˆç´¢å¼•å½“ä¸­çš„æœ€å·¦åˆ—ï¼Œå¹¶ä¸”ä¸èƒ½è·³è¿‡å¤åˆç´¢å¼•å½“ä¸­çš„æŸä¸€åˆ—è¿›è¡ŒæŸ¥è¯¢å¦åˆ™å¤åˆç´¢å¼•å¤±æ•ˆï¼›</p></blockquote><h2 id="ç´¢å¼•çš„ä½¿ç”¨-ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼ˆèŒƒå›´æŸ¥è¯¢ã€å­—æ®µè¿ç®—ï¼‰"><a href="#ç´¢å¼•çš„ä½¿ç”¨-ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼ˆèŒƒå›´æŸ¥è¯¢ã€å­—æ®µè¿ç®—ï¼‰" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼ˆèŒƒå›´æŸ¥è¯¢ã€å­—æ®µè¿ç®—ï¼‰"></a>ç´¢å¼•çš„ä½¿ç”¨ - ç´¢å¼•å¤±æ•ˆæƒ…å†µï¼ˆèŒƒå›´æŸ¥è¯¢ã€å­—æ®µè¿ç®—ï¼‰</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ3ï¼‰èŒƒå›´æŸ¥è¯¢å³è¾¹çš„åˆ—ï¼Œä¸èƒ½ä½¿ç”¨ç´¢å¼•ï¼›<br>æ ¹æ®å‰é¢çš„ä¸¤ä¸ªå­—æ®µnameã€statusæŸ¥è¯¢æ˜¯èµ°ç´¢å¼•çš„ï¼Œä½†æ˜¯æœ€åä¸€ä¸ªæ¡ä»¶addressæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€‚  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">explain select * <span class="keyword">from</span> tb_seller where <span class="attribute">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="attribute">status</span>=<span class="string">'1'</span> <span class="keyword">and</span> <span class="attribute">address</span>=<span class="string">'åŒ—äº¬å¸‚'</span>;# key:idx_name_sta_addrï¼› key_lenï¼š813ï¼›æ­¤æ—¶ä¸‰ä¸ªå­—æ®µnameã€statusã€addressä¸‰ä¸ªå­—æ®µéƒ½èµ°äº†ç´¢å¼•ï¼›  </span><br><span class="line"></span><br><span class="line">explain select * <span class="keyword">from</span> tb_seller where name =<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> status &gt;<span class="string">'1'</span> <span class="keyword">and</span><span class="built_in"> address </span>=<span class="string">'åŒ—äº¬å¸‚'</span>;# key:idx_name_sta_addrï¼› key_lenï¼š410;æ­¤æ—¶èµ°çš„ç´¢å¼•æ˜¯nameå’Œstatuså­—æ®µçš„ç´¢å¼•ï¼›è€ŒèŒƒå›´æŸ¥è¯¢status&gt;<span class="string">'1'</span>ä¹‹åçš„addresså¹¶æ²¡æœ‰èµ°ç´¢å¼•ï¼›  </span><br><span class="line"><span class="comment"># èŒƒå›´æŸ¥è¯¢ä¹‹åçš„ç´¢å¼•å­—æ®µå°†å¤±æ•ˆ</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰ä¸è¦åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller  <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;<span class="comment">#æ­¤æ—¶èµ°ç´¢å¼•</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">substring</span>(<span class="keyword">name</span>,<span class="number">3</span>,<span class="number">2</span>)=<span class="string">'ç§‘æŠ€'</span>;</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">substring</span>(<span class="keyword">name</span>,<span class="number">3</span>,<span class="number">2</span>)=<span class="string">'ç§‘æŠ€'</span>;<span class="comment">#æ­¤æ—¶keyä¸ºnullä»¥åŠkey_lenä¸ºnullï¼›è€Œtypeä¸ºALLåˆ™è¯´æ˜äº†è¿›è¡Œäº†å…¨è¡¨æ‰«æï¼›æ²¡æœ‰èµ°ç´¢å¼•</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰å­—ç¬¦ä¸²ä¸åŠ å•å¼•å·ï¼Œä¼šé€ æˆç´¢å¼•å¤±æ•ˆï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="string">'0'</span>;<span class="comment"># æ­¤æ—¶key:idx_name_sta_addrï¼›key_lenï¼š410ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="number">0</span>;<span class="comment"># æ­¤æ—¶keyï¼šidx_name_sta_addrï¼›key_lenï¼š403ï¼›ç´¢å¼•é•¿åº¦ä¸º403ï¼›åˆ™è¯´æ˜èµ°çš„ç´¢å¼•ä¸ºnameå­—æ®µçš„ç´¢å¼•ï¼›è€Œstatuså­—æ®µçš„ç´¢å¼•å¹¶æ²¡æœ‰èµ°ï¼›é€ æˆäº†status=0 è¯¥ç´¢å¼•å­—æ®µçš„å¤±æ•ˆï¼›å½“statuså­—æ®µå–å€¼æ²¡æœ‰åŠ å•å¼•å·æ—¶ï¼Œmysqlåº•å±‚æ£€æµ‹åˆ°statuså­—æ®µä¸ºvarcharç±»å‹æ‰€ä»¥ä¼šå¯¹å…¶æ²¡æœ‰åŠ å•å¼•å·çš„å–å€¼è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼›éšå¼ç±»å‹è½¬æ¢äº†ä¹‹åè¯¥statusç´¢å¼•å­—æ®µå°±å¤±æ•ˆäº†ï¼›å› ä¸ºåº•å±‚å¯¹è¯¥å­—æ®µè¿›è¡Œäº†è¿ç®—æ“ä½œï¼›</span></span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-è¦†ç›–ç´¢å¼•"><a href="#ç´¢å¼•çš„ä½¿ç”¨-è¦†ç›–ç´¢å¼•" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - è¦†ç›–ç´¢å¼•"></a>ç´¢å¼•çš„ä½¿ç”¨ - è¦†ç›–ç´¢å¼•</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ6ï¼‰å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œé¿å…ä½¿ç”¨ select *  </p><p>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆåªè®¿é—®ç´¢å¼•çš„æŸ¥è¯¢ï¼ˆç´¢å¼•åˆ—å®Œå…¨åŒ…å«æŸ¥è¯¢åˆ—ï¼‰ï¼‰ï¼Œå‡å°‘select * ï¼›  </p><p>å¦‚æœæŸ¥è¯¢åˆ—ï¼Œè¶…å‡ºç´¢å¼•åˆ—ï¼Œä¹Ÿä¼šé™ä½æ€§èƒ½ï¼›  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span>;# extraä¸º<span class="keyword">using</span> <span class="keyword">index</span> conditionæŒ‡çš„æ˜¯ï¼šåœ¨æŸ¥è¯¢çš„æ—¶å€™ç¡®å®ç”¨åˆ°äº†<span class="type">name</span>è¿™ä¸ªå­—æ®µçš„ç´¢å¼•ï¼›ä½†æ˜¯ç”¨åˆ°äº†<span class="type">name</span>è¿™ä¸ªå­—æ®µçš„ç´¢å¼•ä¿¡æ¯ä¹‹åï¼Œåœ¨è¿”å›æ•°æ®çš„æ—¶å€™è¿˜éœ€è¦è¿›è¡Œç´¢å¼•å›è°ƒæŸ¥è¯¢ï¼›  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> <span class="type">name</span> , status ,address <span class="keyword">where</span> <span class="type">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>; # æ­¤æ—¶extraä¸º<span class="keyword">using</span> <span class="keyword">where</span> ;<span class="keyword">using</span> <span class="keyword">index</span>ï¼›æ­¤æ—¶è¡¨ç¤ºçš„æ˜¯ï¼šå¯ä»¥é€šè¿‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼›ä½†æ˜¯æ­¤æ—¶å¹¶ä¸éœ€è¦è¿›è¡Œå›è°ƒæŸ¥è¯¢äº†ï¼›åŸå› å°±åœ¨äºæŸ¥è¯¢çš„å­—æ®µåœ¨ç´¢å¼•ç»“æ„å½“ä¸­å·²ç»è¢«è®°å½•äº†ï¼›æ‰€ä»¥å¹¶ä¸éœ€è¦å»è¿›è¡Œå›è°ƒæŸ¥è¯¢ï¼›  </span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> <span class="type">name</span> , status  <span class="keyword">where</span> <span class="type">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;#åŒä¸Š</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> <span class="type">name</span> ,  address <span class="keyword">where</span> <span class="type">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;#åŒä¸Š</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> <span class="type">name</span> ,  address ,<span class="keyword">password</span> <span class="keyword">where</span> <span class="type">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;#å¤åˆç´¢å¼•å½“ä¸­å¹¶æœªåŒ…æ‹¬<span class="keyword">password</span>å­—æ®µåˆ™æ­¤æ—¶<span class="type">name</span>ç´¢å¼•å­—æ®µä»¥åŠaddressç´¢å¼•å­—æ®µå½“ä¸­å¹¶æ²¡æœ‰åŒ…æ‹¬<span class="keyword">password</span>å­—æ®µçš„ä¿¡æ¯ï¼Œåˆ™æ­¤æ—¶éœ€è¦å»å›è°ƒæŸ¥è¯¢<span class="keyword">password</span>å­—æ®µçš„ä¿¡æ¯ï¼›å³extraä¸º<span class="keyword">using</span> index_condition</span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">TIP:  </span></span><br><span class="line">ç´¢å¼•å›è°ƒæŸ¥è¯¢æŒ‡çš„æ˜¯ï¼š  </span><br><span class="line"><span class="code">    using index : ä½¿ç”¨è¦†ç›–ç´¢å¼•çš„æ—¶å€™å°±ä¼šå‡ºç°</span></span><br><span class="line"><span class="code">    using where : åœ¨æŸ¥æ‰¾ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å›è¡¨å»æŸ¥è¯¢æ‰€éœ€çš„æ•°æ®</span></span><br><span class="line"><span class="code">    using index condition ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ï¼ˆä»ç´¢å¼•å½“ä¸­æ‹¿åˆ°äº†æ•°æ®ï¼Œç„¶åå†åˆ°è¡¨ç»“æ„å½“ä¸­å»æ‹¿åˆ°è¯¥æ•°æ®å¯¹åº”çš„ä¸€æ•´è¡Œæ•°æ®ï¼Œå› ä¸ºè¯¥nameç´¢å¼•å­—æ®µå¹¶æ²¡æœ‰è®°å½•æ‰€æœ‰çš„æ•°æ®ï¼Œåªæ˜¯è®°å½•äº†é‚£ä¹ˆå­—æ®µçš„æ•°æ®ï¼›æ‰€ä»¥éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ï¼›å³ç”¨äº†ç´¢å¼•è¿˜éœ€è¦å›è°ƒæŸ¥è¯¢ï¼‰</span></span><br><span class="line"><span class="code">    using index ; using where : æŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œç´¢å¼•ä¸éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ7ï¼‰ inèµ°ç´¢å¼•ï¼Œnot in ç´¢å¼•å¤±æ•ˆ</p><h2 id="ç´¢å¼•çš„ä½¿ç”¨-orç´¢å¼•å¤±æ•ˆæƒ…å†µ"><a href="#ç´¢å¼•çš„ä½¿ç”¨-orç´¢å¼•å¤±æ•ˆæƒ…å†µ" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - orç´¢å¼•å¤±æ•ˆæƒ…å†µ"></a>ç´¢å¼•çš„ä½¿ç”¨ - orç´¢å¼•å¤±æ•ˆæƒ…å†µ</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong><br>ï¼ˆ7ï¼‰ç”¨oråˆ†éš”å¼€çš„æ¡ä»¶ï¼Œå¦‚æœorå‰çš„æ¡ä»¶ä¸­çš„åˆ—æœ‰ç´¢å¼•ï¼Œè€Œåé¢çš„åˆ—ä¸­æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ï¼›  </p><p>ç¤ºä¾‹ï¼šnameå­—æ®µæ˜¯ç´¢å¼•åˆ—ï¼Œè€Œcreatetimeä¸æ˜¯ç´¢å¼•åˆ—ï¼Œä¸­é—´æ˜¯orè¿›è¡Œè¿æ¥æ˜¯ä¸èµ°ç´¢å¼•çš„ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> createtime=<span class="string">'2088-01-01 12:00:00'</span>\G;<span class="comment">#key:idx_name_sta_addrï¼› key_len: 403;æ­¤æ—¶èµ°ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">or</span> createtime=<span class="string">'2088-01-01 12:00:00'</span>\G;<span class="comment">#key:idx_name_sta_addrï¼› key_len: NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> nickname=<span class="string">'å°ç±³å®˜æ–¹æ——èˆ°åº—'</span>;<span class="comment">#æ­¤æ—¶èµ°ç´¢å¼•ï¼›key_len:403;èµ°çš„æ˜¯nameå­—æ®µçš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">or</span> nickname=<span class="string">'å°ç±³å®˜æ–¹æ——èˆ°åº—'</span>;<span class="comment">#æ¢æˆorä¹‹åï¼Œnicknameå­—æ®µéç´¢å¼•å­—æ®µï¼›æ‰€ä»¥æ­¤æ—¶å°†å…¨è¡¨æ‰«æï¼›ä¸ä¼šèµ°ç´¢å¼•ï¼›key_len:NULLï¼›ä»¥åŠtypeä¸ºALL</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># orä¹‹åçš„å­—æ®µå¦‚æœæ²¡æœ‰ç´¢å¼•çš„è¯ï¼›é‚£ä¹ˆæ•´ä¸ªwhereåˆ—è¡¨å½“ä¸­å³ä¾¿æœ‰ç´¢å¼•å­—æ®µä¹Ÿå°†éƒ½å¤±æ•ˆï¼Œä¸å†èµ°ç´¢å¼•ï¼›</span></span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-likeæ¨¡ç³ŠåŒ¹é…"><a href="#ç´¢å¼•çš„ä½¿ç”¨-likeæ¨¡ç³ŠåŒ¹é…" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - likeæ¨¡ç³ŠåŒ¹é…"></a>ç´¢å¼•çš„ä½¿ç”¨ - likeæ¨¡ç³ŠåŒ¹é…</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ8ï¼‰ä»¥%å¼€å¤´çš„Likeæ¨¡ç³ŠæŸ¥è¯¢ï¼Œç´¢å¼•å¤±æ•ˆã€‚  </p><p>å¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œç´¢å¼•ä¸ä¼šå¤±æ•ˆã€‚<br>å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠæŸ¥è¯¢åŒ¹é…ï¼Œåˆ™ç´¢å¼•å¤±æ•ˆã€‚  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">like</span> <span class="string">'å°ç±³ç§‘æŠ€'</span>;#key: idx_name_sta_addrï¼› key_len: <span class="number">403</span>; æ­¤æ—¶èµ°ç´¢å¼•ï¼›ç´¢å¼•èµ°çš„æ˜¯<span class="type">name</span>å­—æ®µ</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">like</span> <span class="string">'%å°ç±³ç§‘æŠ€'</span>;#key: <span class="keyword">NULL</span>ï¼› key_len: <span class="keyword">NULL</span>; æ­¤æ—¶ä¸èµ°ç´¢å¼•ï¼›ä¸”<span class="keyword">type</span>ä¸º<span class="keyword">ALL</span>ï¼›å…¨è¡¨æ‰«æ</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">like</span> <span class="string">'%å°ç±³ç§‘æŠ€%'</span>;#key: <span class="keyword">NULL</span>ï¼› key_len: <span class="keyword">NULL</span>; æ­¤æ—¶ä¸èµ°ç´¢å¼•ï¼›ä¸”<span class="keyword">type</span>ä¸º<span class="keyword">ALL</span>ï¼›å…¨è¡¨æ‰«æ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">like</span> <span class="string">'ç§‘æŠ€%'</span>;#key: idx_name_sta_addrï¼› key_len: <span class="number">403</span>; æ­¤æ—¶èµ°ç´¢å¼•ï¼›ç´¢å¼•èµ°çš„æ˜¯<span class="type">name</span>å­—æ®µ</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼ â€œ%ç§‘æŠ€%â€ è¿™ç§æƒ…å†µåœ¨ä¸šåŠ¡é€»è¾‘å¤„ç†å½“ä¸­è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼›ä½†æ˜¯è¿™æ ·æ•ˆç‡å°†ååˆ†ä½ä¸‹ï¼›æ‰€ä»¥é’ˆå¯¹è¿™ç§æƒ…å†µçš„å¤„ç†æ–¹å¼ä¸ºï¼š<br>è¦†ç›–ç´¢å¼•ï¼šè¦†ç›–ç´¢å¼•æŒ‡çš„æ˜¯ï¼Œå°½é‡ä¸è¦ä½¿ç”¨select * è¿™ç§æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ï¼›è€Œæ˜¯ä½¿ç”¨å¤åˆç´¢å¼•å½“ä¸­çš„é‚£äº›ç´¢å¼•åˆ—ï¼Œå³ç´¢å¼•å­—æ®µï¼›å³å¤åˆç´¢å¼•ä¸ºidx_name_sta_addrï¼Œå½“ä¸­åŒ…å«çš„ç´¢å¼•å­—æ®µä¸ºnameã€statusã€addressï¼›æ‰€ä»¥select æŸ¥è¯¢åˆ—åç§°çš„æ—¶å€™å°½é‡æŸ¥è¯¢çš„åˆ—åç§°ä¸ºå¤åˆç´¢å¼•å½“ä¸­çš„ç´¢å¼•åˆ—ï¼Œæˆ–è€…æ˜¯å…¶ä»–ç´¢å¼•çš„å­—æ®µï¼ˆä¾‹å¦‚å”¯ä¸€ç´¢å¼•çš„ç´¢å¼•å­—æ®µã€ä¸»é”®ç´¢å¼•çš„ç´¢å¼•å­—æ®µç­‰ï¼‰ï¼›<br>å³é€šè¿‡è¦†ç›–ç´¢å¼•å°±å¯ä»¥è§£å†³ â€œ%ç§‘æŠ€%â€ likeæ¨¡ç³ŠæŸ¥è¯¢æ•ˆç‡ä½ä¸‹çš„æƒ…å†µï¼ˆæ¡ä»¶æ˜¯select æŸ¥è¯¢çš„å­—æ®µéƒ½éœ€è¦æ˜¯ç´¢å¼•å­—æ®µï¼Œå¦‚æœå‡ºç°äº†æŸ¥è¯¢éç´¢å¼•å­—æ®µåˆ™å°†ä¸å†èµ°ç´¢å¼•ï¼‰ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> sellerid <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%ç§‘æŠ€%'</span>;<span class="comment"># åˆ™æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›key:idx_seller_name_sta_addrï¼›key_lenï¼š813ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> sellerid,<span class="keyword">name</span> <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%ç§‘æŠ€%'</span>;<span class="comment"># åˆ™æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›key:idx_seller_name_sta_addrï¼›key_lenï¼š813ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> sellerid,<span class="keyword">name</span>,<span class="keyword">status</span>,address <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%ç§‘æŠ€%'</span>;<span class="comment"># åˆ™æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›key:idx_seller_name_sta_addrï¼›key_lenï¼š813ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> sellerid,<span class="keyword">name</span>,<span class="keyword">status</span>,address,<span class="keyword">password</span> <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%ç§‘æŠ€%'</span>;<span class="comment"># åˆ™æ­¤æ—¶æ˜¯ä¸èµ°ç´¢å¼•çš„ï¼Œç”±äºpasswordå­—æ®µå¹¶ä¸æ˜¯ç´¢å¼•å­—æ®µï¼Œæ‰€ä»¥å°†é€ æˆä¸ä¼šèµ°ç´¢å¼•çš„å±€é¢ï¼›key:NULLï¼›key_lenï¼šNULLï¼›</span></span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-å…¨è¡¨æ‰«ææ›´å¿«"><a href="#ç´¢å¼•çš„ä½¿ç”¨-å…¨è¡¨æ‰«ææ›´å¿«" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - å…¨è¡¨æ‰«ææ›´å¿«"></a>ç´¢å¼•çš„ä½¿ç”¨ - å…¨è¡¨æ‰«ææ›´å¿«</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ9ï¼‰å¦‚æœMySQLè¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ï¼›  </p><p>å¦‚æœå‘ç°èµ°å…¨è¡¨æ‰«ææ¯”èµ°ç´¢å¼•è¦å¿«ï¼Œè¿™ä¸ªæ—¶å€™mysqlå°±ä¼šèµ°å…¨è¡¨æ‰«æï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;<span class="comment">#æ­¤æ—¶key:NULL ä»¥åŠkey_len: NULLï¼›ç”±äºaddressæ˜¯å¤åˆç´¢å¼•å½“ä¸­çš„ç´¢å¼•å­—æ®µä½†æ˜¯åˆä¸æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™ï¼›æ‰€ä»¥ä¸èµ°ç´¢å¼•ï¼›  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_address <span class="keyword">on</span> tb_seller(address);<span class="comment">#åœ¨tb_sellerè¡¨ä¸­çš„addresså­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼›å•åˆ—ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;<span class="comment"># ä½†æ˜¯æ­¤æ—¶ä»ç„¶æ²¡æœ‰èµ°ç´¢å¼•ï¼›possible_keyå‡ºç°æœ‰idx_seller_addressï¼›ä½†æ˜¯keyä¸ºNULLï¼›ä»¥åŠkey_lenä¸ºNULLï¼›typeä¸ºALLï¼›å³èµ°çš„è¿˜æ˜¯å…¨è¡¨æ‰«æ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address=<span class="string">'è¥¿å®‰å¸‚'</span>;<span class="comment">#æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼Œkeyä¸ºidx_addressï¼›key_lenä¸º403;ç´¢å¼•èµ°çš„æ˜¯addresså­—æ®µï¼›extraä¸ºusing index condition</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒæ ·ä¸€æ¡SQLè¯­å¥ï¼Œåªæ˜¯ä¼ å…¥çš„å‚æ•°ä¸åŒï¼›ä¹Ÿå°±å¯¼è‡´äº†æ˜¯å¦èµ°ç´¢å¼•çš„ä¸åŒï¼›ä¸€ä¸ªæ˜¯å…¨è¡¨æ‰«ææ²¡æœ‰èµ°ç´¢å¼•ï¼›è€Œå¦å¤–ä¸€ä¸ªæ˜¯èµ°äº†ç´¢å¼•idx_seller_addressï¼›  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸå› å°±åœ¨äºï¼šè¿™ä¸ªä¸æ•°æ®åº“å½“ä¸­çš„æ•°æ®æ˜¯å­˜åœ¨ä¸€å®šçš„å…³ç³»çš„ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller; <span class="comment">#è¯¥è¡¨å½“ä¸­ä¸€å…±æœ‰12æ¡è®°å½•ï¼›è¿™12æ¡è®°å½•å½“ä¸­å‡ºç°æœ‰addressä¸ºâ€œåŒ—äº¬å¸‚â€çš„è®°å½•è¡Œæ•°å°±æœ‰11æ¡è®°å½•ï¼›åªæœ‰ä¸€æ¡æ˜¯1æ¡æ˜¯â€œè¥¿å®‰å¸‚â€ï¼›  </span></span><br><span class="line"><span class="comment">#å¦‚æœæ•°æ®é‡å¤§ï¼Œä¸”ç²¾ç¡®æŸ¥è¯¢çš„å†…å®¹åˆåœ¨è¡¨ä¸­å æ¯”å¤§ï¼›æ­¤æ—¶å°±ææœ‰å¯èƒ½èµ°çš„æ˜¯å…¨è¡¨æ‰«æè€Œéèµ°ç´¢å¼•äº†ï¼›é€Ÿåº¦æ›´å¿«</span></span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-NULLå€¼çš„åˆ¤å®š"><a href="#ç´¢å¼•çš„ä½¿ç”¨-NULLå€¼çš„åˆ¤å®š" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - NULLå€¼çš„åˆ¤å®š"></a>ç´¢å¼•çš„ä½¿ç”¨ - NULLå€¼çš„åˆ¤å®š</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ10ï¼‰ is NULLï¼Œis  NOT NULL  <span style="color:red;"><strong>æœ‰æ—¶</strong></span> ç´¢å¼•å¤±æ•ˆï¼›  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">explain</span>  <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address <span class="keyword">is</span> <span class="keyword">null</span>;# æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›keyï¼šidx_seller_address ;key_lenï¼š<span class="number">403</span> èµ°çš„ç´¢å¼•å­—æ®µä¸ºaddress</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span>  <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;# æ­¤æ—¶æ˜¯æ²¡æœ‰èµ°ç´¢å¼•çš„ï¼›keyï¼š<span class="keyword">null</span> ;key_len:<span class="keyword">null</span>;<span class="keyword">type</span>:<span class="keyword">all</span> èµ°çš„æ˜¯å…¨è¡¨æ‰«æ</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;</span><br><span class="line">#å½“å‰è¯¥è¡¨å½“ä¸­æ¯ä¸€æ¡è®°å½•éƒ½addresså­—æ®µè®°å½•å–å€¼éƒ½æ˜¯ <span class="keyword">not</span> <span class="keyword">null</span>; å½“å‰<span class="keyword">explain</span> <span class="keyword">where</span> address <span class="keyword">is</span> <span class="keyword">null</span>æ—¶èµ°äº†ç´¢å¼•ï¼Œå³address <span class="keyword">is</span> <span class="keyword">null</span>è¿™æ ·çš„è®°å½•åœ¨è¡¨å½“ä¸­å æ¯”è¾ƒå°‘æ­¤æ—¶åˆ™èµ°ç´¢å¼•ï¼›è€Œ<span class="keyword">explain</span> <span class="keyword">where</span> address <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>æ—¶æ²¡æœ‰èµ°ç´¢å¼•ï¼›è€Œæ­¤æ—¶ address <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>åˆ™åœ¨è¡¨å½“ä¸­å æ¯”è¾ƒå¤šï¼›æ‰€ä»¥å°±ä¸ä¼šå»èµ°ç´¢å¼•è€Œæ˜¯å…¨è¡¨æ‰«æï¼›è¿™ä¸ªä¸å‰é¢æ‰€è¯´çš„å…¨è¡¨æ‰«ææ›´å¿«æ˜¯ä¸€ä¸ªé“ç†ï¼›å…¨è¡¨æ‰«æä¸èµ°ç´¢å¼•çš„è¿™ä¸¤ç§æ–¹å¼å“ªä¸€ç§æ›´å¿«å°±é€‰æ‹©å“ªä¸€ç§æ–¹å¼ï¼›ä¹Ÿå°±æ˜¯è¯´mysqlåº•å±‚ä¼šå»è‡ªåŠ¨çš„åˆ¤æ–­å¦‚æœèµ°å…¨è¡¨æ‰«ææ›´å¿«å°±èµ°å…¨è¡¨æ‰«æï¼›å¦‚æœèµ°ç´¢å¼•æ›´å¿«å°±èµ°ç´¢å¼•çš„è¿™ç§æ–¹å¼ï¼›  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">null</span>;#æ­¤æ—¶èµ°ç´¢å¼•ï¼›key:idx_name_sta_addrï¼›key_lenï¼š<span class="number">403</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>; # æ­¤æ—¶ä¸èµ°ç´¢å¼•ï¼›key:<span class="keyword">null</span>ï¼› key_lenï¼š<span class="keyword">null</span>; <span class="keyword">type</span>ï¼š<span class="keyword">ALL</span> èµ°çš„æ˜¯å…¨è¡¨æ‰«æ</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">null</span>;# æ­¤æ—¶ä¸èµ°ç´¢å¼•ï¼›keyï¼š<span class="keyword">null</span>ï¼›key_len: <span class="keyword">null</span> ; <span class="keyword">type</span>:<span class="keyword">all</span> èµ°çš„æ˜¯å…¨è¡¨æ‰«æ</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>; # æ­¤æ—¶èµ°äº†ç´¢å¼•ï¼›key:idx_name; key_len:<span class="number">138</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> t_user <span class="keyword">set</span> <span class="type">name</span> =<span class="keyword">null</span> <span class="keyword">where</span> id &lt;&gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_user;#åˆ™æ­¤æ—¶é™¤äº†idä¸º<span class="number">1</span>çš„è®°å½•å…¶ä½™çš„è®°å½•çš„<span class="type">name</span>å­—æ®µå°±å˜æˆäº†<span class="keyword">null</span>ï¼›æ‰€ä»¥å¦‚æœæ­¤æ—¶æŸ¥è¯¢t_userè¡¨å½“ä¸­<span class="type">name</span>å­—æ®µä¸º<span class="keyword">is</span> <span class="keyword">null</span>åˆ™èµ°å…¨è¡¨æ‰«æï¼›è€ŒæŸ¥è¯¢<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>åˆ™èµ°ç´¢å¼•ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> t_user;#æ­¤æ—¶åœ¨t_userè¡¨å½“ä¸­<span class="type">name</span>å­—æ®µæ˜¯å­˜åœ¨ç´¢å¼•çš„ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">null</span>;# key:<span class="keyword">null</span> ; key_len:<span class="keyword">null</span>;<span class="keyword">type</span>:<span class="keyword">all</span> èµ°çš„æ˜¯å…¨è¡¨æ‰«æï¼ˆåŸå› å°±åœ¨äºæ­¤æ—¶åœ¨è¡¨å½“ä¸­è®°å½•<span class="type">name</span>å­—æ®µä¸º<span class="keyword">null</span>å æ¯”å¤§äº<span class="type">name</span>å­—æ®µ<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>ï¼›æ‰€ä»¥å…¨è¡¨æ‰«æä¸èµ°ç´¢å¼•çš„æ–¹å¼è¿™ä¸¤è€…ç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œå…¨è¡¨æ‰«ææ›´å¿«ï¼›ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="type">name</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;#æ­¤æ—¶æ˜¯èµ°ç´¢å¼•çš„ï¼›key:idx_user_name;key_len:<span class="number">138</span>;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ä¹Ÿå°±æ˜¯è¯´<span class="keyword">is</span> <span class="keyword">null</span>ä¸<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>ï¼›æœ‰æ—¶æ˜¯ä¼šèµ°ç´¢å¼•çš„æœ‰æ—¶åˆä¸ä¼šèµ°ç´¢å¼•ï¼›è¿™è¦åˆ†æƒ…å†µè€Œå®šï¼›è¿™ä¸ªæ ¹æ®æ•°æ®åº“å½“ä¸­çš„æ•°æ®é‡æ¥å†³å®šçš„ï¼›å¦‚æœæŸ¥è¯¢çš„å­—æ®µåœ¨æ•°æ®é‡å½“ä¸­çš„<span class="keyword">null</span>å€¼å æ¯”è¾ƒå¤š,é‚£ä¹ˆè¿™ä¸ªæ—¶å€™<span class="keyword">is</span> <span class="keyword">null</span>å°†ä¼šèµ°å…¨è¡¨æ‰«æè€Œ<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>åˆ™èµ°ç´¢å¼•ï¼›å¦‚æœæŸ¥è¯¢çš„å­—æ®µåœ¨æ•°æ®é‡å½“ä¸­ç»å¤§éƒ¨åˆ†éƒ½æ˜¯å­˜åœ¨æœ‰å€¼çš„ä¹Ÿå°±æ˜¯è¯´<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>å æ®è¾ƒå¤šï¼›åˆ™æ­¤æ—¶<span class="keyword">is</span> <span class="keyword">null</span>å°±ä¼šèµ°ç´¢å¼•ï¼›è€Œ<span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>åˆ™èµ°å…¨è¡¨æ‰«æï¼›</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-inå’Œnot-in"><a href="#ç´¢å¼•çš„ä½¿ç”¨-inå’Œnot-in" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - inå’Œnot in"></a>ç´¢å¼•çš„ä½¿ç”¨ - inå’Œnot in</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ11ï¼‰in èµ°ç´¢å¼•ï¼› not in ç´¢å¼•å¤±æ•ˆï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> sellerid <span class="keyword">in</span> (<span class="string">'oppo'</span>,<span class="string">'xiaomi'</span>,<span class="string">'sina'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> sellerid <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'oppo'</span>,<span class="string">'xiaomi'</span>,<span class="string">'sina'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> sellerid <span class="keyword">in</span> (<span class="string">'oppo'</span>,<span class="string">'xiaomi'</span>,<span class="string">'sina'</span>);<span class="comment">#æ­¤æ—¶ä½¿ç”¨äº†ç´¢å¼•ï¼›key:PRIMARYï¼›key_len:402;  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> sellerid <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'oppo'</span>,<span class="string">'xiaomi'</span>,<span class="string">'sina'</span>);<span class="comment">#æ­¤æ—¶æœªèµ°ç´¢å¼•ï¼›ç´¢å¼•å¤±æ•ˆï¼›key:NULLï¼›key_len:NULLï¼›type:ALL å…¨è¡¨æ‰«æ</span></span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•çš„ä½¿ç”¨-å•åˆ—ç´¢å¼•ä¸å¤åˆç´¢å¼•é€‰æ‹©"><a href="#ç´¢å¼•çš„ä½¿ç”¨-å•åˆ—ç´¢å¼•ä¸å¤åˆç´¢å¼•é€‰æ‹©" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - å•åˆ—ç´¢å¼•ä¸å¤åˆç´¢å¼•é€‰æ‹©"></a>ç´¢å¼•çš„ä½¿ç”¨ - å•åˆ—ç´¢å¼•ä¸å¤åˆç´¢å¼•é€‰æ‹©</h2><p><strong>é¿å…ç´¢å¼•å¤±æ•ˆ</strong>  </p><p>ï¼ˆ12ï¼‰å•åˆ—ç´¢å¼•å’Œå¤åˆç´¢å¼•  </p><p>å°½é‡ä½¿ç”¨å¤åˆç´¢å¼•ï¼Œè€Œå°‘é‡ä½¿ç”¨å•åˆ—ç´¢å¼•ï¼›  </p><p>åˆ›å»ºå¤åˆç´¢å¼•ï¼š  </p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create <span class="built_in">index</span> idx_name_sta_address on tb_seller(<span class="keyword">name</span>,<span class="keyword">status</span>,address);</span><br><span class="line"></span><br><span class="line">å°±ç›¸å½“äºåˆ›å»ºäº†ä¸‰ä¸ªç´¢å¼•ï¼š  </span><br><span class="line">* <span class="keyword">name</span></span><br><span class="line">* <span class="keyword">name</span> + <span class="keyword">status</span></span><br><span class="line">* <span class="keyword">name</span> + <span class="keyword">status</span> + address</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå•åˆ—ç´¢å¼•ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_name <span class="keyword">on</span> tb_seller(<span class="keyword">name</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_status <span class="keyword">on</span> tb_seller(<span class="keyword">status</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_address <span class="keyword">on</span> tb_seller(address);</span><br></pre></td></tr></table></figure><p>å½“å¯¹nameã€statusã€addresså­—æ®µè¿›è¡Œæœç´¢çš„æ—¶å€™ï¼Œæ•°æ®åº“åªä¼šé€‰æ‹©ä¸€ä¸ªç´¢å¼•ï¼›æ‰€ä»¥æ­¤æ—¶åœ¨è¿™ç§æƒ…å†µä¸‹å•åˆ—ç´¢å¼•å¹¶ä¸å ä¼˜åŠ¿ï¼›  </p><p>æ•°æ®åº“ä¼šé€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ç´¢å¼•æ¥ä½¿ç”¨ï¼Œå¹¶ä¸ä¼šä½¿ç”¨å…¨éƒ¨ç´¢å¼•ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb_seller;<span class="comment">#æŸ¥çœ‹tb_sellerè¡¨å½“ä¸­çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment"># PRIMARY ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="comment"># idx_name_sta_address name</span></span><br><span class="line"><span class="comment"># idx_name_sta_address status</span></span><br><span class="line"><span class="comment"># idx_name_sta_address address</span></span><br><span class="line"><span class="comment"># idx_seller_address address</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤å•åˆ—ç´¢å¼•</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> <span class="keyword">from</span> idx_seller_address <span class="keyword">on</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹tb_sellerè¡¨çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span>  <span class="keyword">status</span>=<span class="string">'0'</span> <span class="keyword">and</span> address=<span class="string">'è¥¿å®‰å¸‚'</span>;<span class="comment">#æ­¤æ—¶ä½¿ç”¨å¤åˆç´¢å¼•ï¼›key:idx_name_sta_addrï¼›key_lenï¼š813</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤å¤åˆç´¢å¼•</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> idx_name_sta_address <span class="keyword">on</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå•åˆ—ç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_name <span class="keyword">on</span> tb_seller(<span class="keyword">name</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_status <span class="keyword">on</span> tb_seller(<span class="keyword">status</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_address <span class="keyword">on</span> tb_seller(address);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å•åˆ—ç´¢å¼•</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb_seller;</span><br><span class="line"><span class="comment">#PRIMARY ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="comment"># idx_seller_name å•åˆ—ç´¢å¼•nameå­—æ®µ</span></span><br><span class="line"><span class="comment"># idx_seller_status å•åˆ—ç´¢å¼•statuså­—æ®µ</span></span><br><span class="line"><span class="comment"># idx_seller_address å•åˆ—ç´¢å¼•addresså­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span> <span class="keyword">and</span> <span class="keyword">status</span>=<span class="string">'0'</span> <span class="keyword">and</span> address=<span class="string">'è¥¿å®‰å¸‚'</span>;<span class="comment">#æ­¤æ—¶èµ°ç´¢å¼•ä½†æ˜¯ï¼›key:idx_seller_name; key_len:403;åªèµ°äº†nameå­—æ®µçš„ç´¢å¼•ï¼›è€Œstatuså­—æ®µä»¥åŠaddresså­—æ®µçš„ç´¢å¼•æœªèµ°ï¼›ç›¸å½“äºç™½åˆ›å»ºäº†statusä»¥åŠaddresså­—æ®µçš„ç´¢å¼•äº†ï¼›</span></span><br><span class="line"><span class="comment">#å³æ­¤æ—¶possible_keyï¼šidx_seller_nameã€idx_seller_statusã€idx_seller_addressï¼›è¿™ä¸‰ä¸ªç´¢å¼•å¯èƒ½éƒ½ä¼šç”¨åˆ°ï¼›ä½†æ˜¯å®é™…ä¸Šåªç”¨åˆ°äº†idx_seller_nameç´¢å¼•ï¼›å³nameå­—æ®µçš„ç´¢å¼•ï¼›</span></span><br><span class="line"><span class="comment">#ä¸ºä»€ä¹ˆé€‰æ‹©äº†nameå­—æ®µæ¥ä½œä¸ºè¯¥SQLçš„ç´¢å¼•ï¼›åŸå› åœ¨äºï¼šæ•°æ®åº“ä¼šé€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ç´¢å¼•æ¥ä½¿ç”¨ï¼›å¹¶ä¸ä¼šä½¿ç”¨å…¨éƒ¨ç´¢å¼•ï¼›ä¹Ÿå°±æ„å‘³ç€nameè¯¥å­—æ®µçš„ç´¢å¼•åœ¨è¿™ä¸‰ä¸ªç´¢å¼•å½“ä¸­æœ€ä¼˜ï¼›</span></span><br><span class="line"><span class="comment">#ä¸ºä»€ä¹ˆnameè¯¥å­—æ®µçš„ç´¢å¼•idx_seller_nameæœ€ä¼˜ï¼Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;<span class="comment"># å› ä¸ºåœ¨æ­¤è¡¨å½“ä¸­ï¼ŒnameæŸ¥è¯¢çš„ç²¾ç¡®å€¼ä¸ºâ€œå°ç±³ç§‘æŠ€â€è¾¨è¯†åº¦æœ€é«˜ï¼Œè®°å½•è¡Œä¸º1ï¼›è€Œstatuså­—æ®µå–å€¼ä¸º0çš„è®°å½•è¡Œè¶…è¿‡1ï¼›addresså­—æ®µå–å€¼ä¸ºâ€œè¥¿å®‰å¸‚â€è®°å½•è¡Œä¹Ÿåªæœ‰1ï¼›ä¹Ÿåº”è¯¥æ˜¯éµå¾ªäº†ä»å·¦åˆ°å³çš„ä¸€ä¸ªåˆ¤æ–­ï¼›æ‰€ä»¥æ­¤æ—¶idx_seller_nameç´¢å¼•æœ€ä¼˜ï¼›ä»è€Œèµ°äº†idx_seller_nameç´¢å¼•ï¼›  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">status</span>=<span class="string">'0'</span> <span class="keyword">and</span> address=<span class="string">'è¥¿å®‰å¸‚'</span>;<span class="comment">#æ­¤æ—¶æ²¡æœ‰nameå­—æ®µï¼›è€Œaddressåœ¨æ•°æ®è¡¨å½“ä¸­è¾¨è¯†åº¦æœ€é«˜ï¼›å³è®°å½•è¡Œä¸º1ï¼›æ‰€ä»¥æ­¤æ—¶èµ°çš„ç´¢å¼•è‡ªç„¶å³ä¸ºidx_seller_addressï¼›</span></span><br><span class="line"><span class="comment">#key:idx_seller_address;key_len:403;possible_key:idx_seller_status,idx_seller_address;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">status</span>=<span class="string">'0'</span> <span class="keyword">and</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;<span class="comment"># å¦‚æœæ­¤æ—¶addresså–ç²¾ç¡®å€¼ä¸ºâ€œåŒ—äº¬å¸‚â€ï¼›è€Œåœ¨æ•°æ®åº“å½“ä¸­addresså–å€¼ä¸ºâ€œåŒ—äº¬å¸‚â€çš„è®°å½•è¡Œè¾¨è¯†åº¦å¹¶ä¸é«˜ï¼›ä¹Ÿå°±æ˜¯å–å€¼ä¸ºâ€œåŒ—äº¬å¸‚â€çš„addresså­—æ®µå…¶è®°å½•è¡Œæœ‰å¾ˆå¤šè¶…è¿‡1ï¼Œå³æ€»å…±12æ¡è®°å½•ï¼Œæœ‰11æ¡è®°å½•å½“ä¸­çš„addresséƒ½æ˜¯â€œåŒ—äº¬å¸‚â€ï¼Œä»è€Œå…¶è¾¨è¯†åº¦å¹¶ä¸é«˜ï¼›</span></span><br><span class="line"><span class="comment">#è€Œæ­¤æ—¶statuså­—æ®µç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼Œå–å€¼ä¸º0çš„è®°å½•è¡Œæ•°ï¼Œæ€»è¡Œæ•°12è¡Œï¼Œè€Œstatuså–å€¼ä¸º0çš„è®°å½•è¡Œæ•°ä¸º3è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶è¾ƒä¹‹addressçš„è¾¨è¯†åº¦è‡ªç„¶æ˜¯è¦é«˜ä¸€äº›ï¼›æ‰€ä»¥å°†èµ°statuså­—æ®µçš„ç´¢å¼•ï¼Œå³idx_seller_statusç´¢å¼•ï¼›</span></span><br><span class="line"><span class="comment"># possible_key:idx_seller_status,idx_seller_addressï¼›key:idx_seller_status;key_len:7ï¼›</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼šæ•°æ®åº“ä¼šé€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ç´¢å¼•ï¼ˆè¾¨è¯†åº¦æœ€é«˜ç´¢å¼•ï¼‰æ¥ä½¿ç”¨ï¼Œå¹¶ä¸ä¼šä½¿ç”¨å…¨éƒ¨çš„ç´¢å¼•ï¼›  </p><h2 id="ç´¢å¼•çš„ä½¿ç”¨-æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ"><a href="#ç´¢å¼•çš„ä½¿ç”¨-æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ" class="headerlink" title="ç´¢å¼•çš„ä½¿ç”¨ - æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ"></a>ç´¢å¼•çš„ä½¿ç”¨ - æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</h2><p><strong>æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</strong>  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Handler_read%'</span>;<span class="comment">#æŸ¥çœ‹çš„æ˜¯å½“å‰ä¼šè¯ä¸­ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="comment">#Variable_name  Value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Handler_read%'</span>;<span class="comment">#æŸ¥çœ‹çš„æ˜¯å…¨å±€ä¸­ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><table border="1">  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Handler_read_first</td>    <td>0</td>  </tr>  <tr>    <td>Handler_read_key</td>    <td>2</td>  </tr>  <tr>    <td>Handler_read_last</td>    <td>0</td>  </tr>    <tr>    <td>Handler_read_next</td>    <td>0</td>  </tr>    <tr>    <td>Handler_read_prev</td>    <td>0</td>  </tr>    <tr>    <td>Handler_read_rnd</td>    <td>0</td>  </tr>    <tr>    <td>Handler_read_rnd_next</td>    <td>22</td>  </tr></table><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Handler_read_first</span>: ç´¢å¼•ä¸­ç¬¬ä¸€æ¡è¢«è¯»çš„æ¬¡æ•°ã€‚å¦‚æœè¾ƒé«˜ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æ­£åœ¨è‡ªè¡Œå¤§é‡å…¨ç´¢å¼•æ‰«æï¼ˆè¿™ä¸ªå€¼è¶Šä½è¶Šå¥½ï¼‰ï¼›</span><br><span class="line"></span><br><span class="line"><span class="attribute">Handler_read_key</span>: å¦‚æœç´¢å¼•æ­£åœ¨å·¥ä½œï¼Œè¿™ä¸ªå€¼ä»£è¡¨ä¸€ä¸ªè¡Œè¢«ç´¢å¼•å€¼è¯»å–çš„æ¬¡æ•°ï¼›å¦‚æœå€¼è¶Šä½ï¼Œè¡¨ç¤ºç´¢å¼•å¾—åˆ°çš„æ€§èƒ½æ”¹å–„ä¸é«˜ï¼Œå› ä¸ºç´¢å¼•ä¸ç»å¸¸ä½¿ç”¨ï¼ˆè¿™ä¸ªå€¼è¶Šé«˜è¶Šå¥½ï¼‰ï¼›</span><br><span class="line"></span><br><span class="line"><span class="attribute">Handler_read_next</span>: æŒ‰ç…§é”®é¡ºåºè¯»ä¸‹ä¸€è¡Œçš„è¯·æ±‚æ•°ã€‚å¦‚æœç”¨èŒƒå›´çº¦æŸæˆ–è€…å¦‚æœæ‰§è¡Œç´¢å¼•æ‰«ææ¥æŸ¥è¯¢ç´¢å¼•åˆ—ï¼Œè¯¥å€¼å¢åŠ ï¼›  </span><br><span class="line"></span><br><span class="line"><span class="attribute">Handler_read_prev</span>: æŒ‰ç…§é”®é¡ºåºè¯»å‰ä¸€è¡Œçš„è¯·æ±‚æ•°ï¼Œè¯¥è¯»æ–¹æ³•ä¸»è¦ç”¨äºä¼˜åŒ–ORDER BY.....DESCï¼›</span><br><span class="line"></span><br><span class="line"><span class="attribute">Handler_read_rnd</span>: æ ¹æ®å›ºå®šä½ç½®è¯»ä¸€è¡Œçš„è¯·æ±‚æ•°ã€‚å¦‚æœæ­£æ‰§è¡Œå¤§é‡æŸ¥è¯¢å¹¶éœ€è¦å¯¹ç»“æœè¿›è¡Œæ’åºè¯¥å€¼è¾ƒé«˜ã€‚å¯èƒ½ä½¿ç”¨äº†å¤§é‡éœ€è¦MySQLæ‰«ææ•´ä¸ªè¡¨çš„æŸ¥è¯¢æˆ–è€…è¿æ¥æ²¡æœ‰æ­£ç¡®ä½¿ç”¨é”®ã€‚è¿™ä¸ªå€¼è¾ƒé«˜ï¼Œæ„å‘³ç€è¿è¡Œæ•ˆç‡ä½ï¼Œåº”è¯¥å»ºç«‹ç´¢å¼•æ¥è¡¥æ•‘ï¼›  </span><br><span class="line"></span><br><span class="line"><span class="attribute">Handler_read_rnd_next</span>: åœ¨æ•°æ®æ–‡ä»¶ä¸­è¯»ä¸‹ä¸€è¡Œçš„è¯·æ±‚æ•°ã€‚å¦‚æœæ­£è¿›è¡Œå¤§é‡çš„è¡¨æ‰«æï¼Œè¯¥å€¼è¦æ±‚è¾ƒé«˜ã€‚é€šå¸¸è¯´æ˜è¡¨ç´¢å¼•ä¸æ­£ç¡®æˆ–è€…æ˜¯å†™å…¥çš„æŸ¥è¯¢æ²¡æœ‰åˆ©ç”¨ç´¢å¼•ï¼›</span><br></pre></td></tr></table></figure><h2 id="SQLä¼˜åŒ–-å¤§æ‰¹é‡æ’å…¥æ•°æ®"><a href="#SQLä¼˜åŒ–-å¤§æ‰¹é‡æ’å…¥æ•°æ®" class="headerlink" title="SQLä¼˜åŒ– - å¤§æ‰¹é‡æ’å…¥æ•°æ®"></a>SQLä¼˜åŒ– - å¤§æ‰¹é‡æ’å…¥æ•°æ®</h2><p><strong>å¤§æ‰¹é‡æ’å…¥æ•°æ®</strong>  </p><p>ç¯å¢ƒå‡†å¤‡ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE <span class="string">'tb_user_1'</span>(</span><br><span class="line">  <span class="string">'id'</span> int(11) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">'username'</span> varchar(45) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'password'</span> varchar(96) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'name'</span> varchar(45) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'birthday'</span> datetime<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'sex'</span> char(1)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'email'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'phone'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'qq'</span> varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'status'</span>  varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span> comment <span class="string">'ç”¨æˆ·çŠ¶æ€'</span>,</span><br><span class="line">  <span class="string">'create_time'</span>  datetime <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'update_time'</span> datetime<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY(<span class="string">'id'</span>),</span><br><span class="line">  UNIQUE KEY <span class="string">'unique_user_username'</span>(<span class="string">'username'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=InnoDB<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="string">'tb_user_2'</span>(</span><br><span class="line">  <span class="string">'id'</span> int(11) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">'username'</span> varchar(45) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'password'</span> varchar(96) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'name'</span> varchar(45) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'birthday'</span> datetime<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'sex'</span> char(1)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'email'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'phone'</span> varchar(45)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'qq'</span> varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'status'</span>  varchar(32)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span> comment <span class="string">'ç”¨æˆ·çŠ¶æ€'</span>,</span><br><span class="line">  <span class="string">'create_time'</span>  datetime <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'update_time'</span> datetime<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY(<span class="string">'id'</span>),</span><br><span class="line">  UNIQUE KEY <span class="string">'unique_user_username'</span>(<span class="string">'username'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=InnoDB<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨loadå‘½ä»¤å¯¼å…¥æ•°æ®çš„æ—¶å€™ï¼Œé€‚å½“çš„è®¾ç½®å¯ä»¥æé«˜å¯¼å…¥çš„æ•ˆç‡ã€‚  </p><p>å¼•æ“ä½¿ç”¨çš„æ˜¯Innodbï¼ŒInnodbåº•å±‚ä½¿ç”¨çš„ç´¢å¼•æ˜¯B+æ ‘ç´¢å¼•ï¼›è€ŒB+æ ‘ç´¢å¼•å½“ä¸­çš„æ•°æ®æœ‰é¡ºåºçš„ï¼›  </p><p>å¯¹äºInnodbç±»å‹çš„è¡¨ï¼Œæœ‰ä»¥ä¸‹é›†ä¸­æ–¹å¼å¯ä»¥æé«˜å¯¼å…¥çš„æ•ˆç‡ï¼š  </p><p>ï¼ˆ1ï¼‰<strong>ä¸»é”®é¡ºåºæ’å…¥</strong>  </p><p>å› ä¸ºInnoDBç±»å‹çš„è¡¨æ˜¯æŒ‰ç…§ä¸»é”®çš„é¡ºåºä¿å­˜çš„ï¼Œæ‰€ä»¥å°†å¯¼å…¥çš„æ•°æ®æŒ‰ç…§ä¸»é”®çš„é¡ºåºæ’åˆ—ï¼Œå¯ä»¥æœ‰æ•ˆçš„æé«˜å¯¼å…¥æ•°æ®çš„æ•ˆç‡ã€‚  </p><p>å¦‚æœInnoDBè¡¨æ²¡æœ‰ä¸»é”®ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨é»˜è®¤åˆ›å»ºä¸€ä¸ªå†…éƒ¨åˆ—ä½œä¸ºä¸»é”®ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥ç»™è¡¨åˆ›å»ºä¸€ä¸ªä¸»é”®ï¼Œå°†å¯ä»¥åˆ©ç”¨è¿™ç‚¹ï¼Œæ¥æé«˜å¯¼å…¥æ•°æ®çš„æ•ˆç‡ã€‚  </p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è„šæœ¬æ–‡ä»¶ä»‹ç»ï¼š  </span><br><span class="line">  <span class="function"><span class="title">sql1</span>.<span class="built_in">log</span> -----&gt;</span> ä¸»é”®æœ‰åº</span><br><span class="line">  <span class="function"><span class="title">sql2</span>.<span class="built_in">log</span> -----&gt;</span> ä¸»é”®æ— åº</span><br></pre></td></tr></table></figure><p>æ’å…¥IDé¡ºåºæ’åˆ—æ•°æ®ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> <span class="keyword">infile</span> <span class="string">'/root/sql1.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_1'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment"># è€—è´¹æ—¶é•¿ï¼š20.58 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_user_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> <span class="keyword">infile</span> <span class="string">'/root/sql2.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_2'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment">#è€—è´¹æ—¶é•¿ï¼š1min 59.29 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_user_2;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sql1.logå½“ä¸­æ•°æ®æœ‰åºè¿›è¡Œæ’åˆ—ï¼›sql2.logå½“ä¸­æ•°æ®æ— åºè¿›è¡Œæ’åˆ—ï¼›</span></span><br><span class="line"><span class="comment">#è€Œsql1.logå½“ä¸­çš„æ•°æ®å°†æ’å…¥åˆ°tb_user_1è¡¨ï¼›sql2.logå½“ä¸­çš„æ•°æ®å°†æ’å…¥åˆ°tb_user_2è¡¨å½“ä¸­ï¼›</span></span><br><span class="line"><span class="comment">#sql1.logä¸sql2.logå½“ä¸­æ•°æ®é‡å®Œå…¨ä¸€è‡´ï¼›åªæ•°æ®æ’åˆ—åˆ†å¸ƒé¡ºåºä¸ä¸€è‡´ï¼›</span></span><br><span class="line"></span><br><span class="line">head sql1.log <span class="comment">#linux æŸ¥çœ‹sql1.logå‰ä¸€éƒ¨åˆ†çš„æ•°æ®å†…å®¹ï¼Œidä¸»é”®æ•°æ®æœ‰åº</span></span><br><span class="line">head sql2.log <span class="comment">#linux æŸ¥çœ‹sql2.logå‰ä¸€éƒ¨åˆ†çš„æ•°æ®å†…å®¹ï¼Œä¸»é”®æ•°æ®æ— åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> <span class="keyword">infile</span> <span class="string">'/root/sql1.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_1'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment"># load data åŠ è½½æ•°æ®  </span></span><br><span class="line"><span class="comment">#local infile ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå½“ä¸­åŠ è½½æ•°æ®ï¼›</span></span><br><span class="line"><span class="comment">#'/root/sql1.log' æ•°æ®æ–‡ä»¶åœ¨linuxå½“ä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="comment"># into table 'tb_user_1' åŠ è½½æ•°æ®åˆ°å…·ä½“è¡¨tb_user_1å½“ä¸­</span></span><br><span class="line"><span class="comment"># fields terminated by ',' æ¯ä¸€ä¸ªåŸŸä¹‹é—´ä½¿ç”¨é€—å·,è¿›è¡Œåˆ†éš”</span></span><br><span class="line"><span class="comment"># lines terminated by '\n' æ¯ä¸€è¡Œä¹‹é—´ä½¿ç”¨\nè¿›è¡Œåˆ†éš”,ä¹Ÿå°±æ˜¯æ¢è¡Œ</span></span><br><span class="line"><span class="comment"># å›è½¦ä¹‹åï¼Œåœ¨å¯¼å…¥æ•°æ®çš„è¿‡ç¨‹å½“ä¸­ï¼Œè¿˜éœ€è¦å»è¿›è¡Œç»´æŠ¤ç´¢å¼•ï¼Œç»´æŠ¤å”¯ä¸€ç´¢å¼•ï¼›uniqueï¼›</span></span><br><span class="line"><span class="comment"># sql1.logå¯¼å…¥åˆ°tb_user_1è¡¨å½“ä¸­è€—è´¹æ—¶é—´ä¸º19.37 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_user_1;<span class="comment"># 1000000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> <span class="keyword">infile</span> <span class="string">'/root/sql2.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_2'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment">#å›è½¦ä¹‹åï¼Œè€—è´¹çš„æ—¶é—´ä¸º 1min 51.42 secondï¼›å’Œsql1.logå¯¼å…¥tb_user_1æ—¶å·®è·å¾ˆå¤§ï¼›  </span></span><br><span class="line"><span class="comment">#æ‰€ä»¥è¿™æ ·å°±éªŒè¯äº†å¤§æ‰¹é‡å¯¼å…¥æ•°æ®æ—¶ï¼Œæœ‰åºæ•°æ®å¯¼å…¥è¡¨å½“ä¸­æ—¶è€—è´¹çš„æ—¶é—´å°äºæ— åºæ•°æ®å¯¼å…¥è¡¨å½“ä¸­çš„æ—¶é—´ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_user_2;<span class="comment"># 1000000</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<strong>å…³é—­å”¯ä¸€æ€§æ ¡éªŒ</strong>  </p><p>åœ¨å¯¼å…¥æ•°æ®å‰æ‰§è¡Œ SET UNIQUE_CHECKS=0, å…³é—­å”¯ä¸€æ€§æ ¡éªŒï¼Œåœ¨å¯¼å…¥ç»“æŸåæ‰§è¡Œ SET UNIQUE_CHECKS=1ï¼Œæ¢å¤å”¯ä¸€æ€§æ ¡éªŒï¼Œå¯ä»¥æé«˜å¯¼å…¥çš„æ•ˆç‡ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨tb_user_1è¡¨ç»“æ„å½“ä¸­å­˜åœ¨usernameå­—æ®µçš„å”¯ä¸€æ€§ç´¢å¼•ï¼›å¦‚æœå­˜åœ¨å”¯ä¸€æ€§ç´¢å¼•åˆ™åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™æ˜¯éœ€è¦å¯¹å”¯ä¸€æ€§å­—æ®µæ•°æ®çš„å–å€¼è¿›è¡Œæ ¡éªŒçš„ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> UNIQUE_CHECKS=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> infiles <span class="string">'/root/sql1.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_1'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment">#è€—è´¹æ—¶é•¿ä¸º 19.39 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> UNIQUE_CHECKS=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰<strong>æ‰‹åŠ¨æäº¤äº‹åŠ¡</strong>  </p><p>å¦‚æœåº”ç”¨ä½¿ç”¨è‡ªåŠ¨æäº¤çš„æ–¹å¼ï¼Œå»ºè®®åœ¨å¯¼å…¥å‰æ‰§è¡Œ SET AUTOCOMMIT=0ï¼Œå…³é—­è‡ªåŠ¨æäº¤ï¼Œå¯¼å…¥ç»“æŸåå†æ‰§è¡Œ SET AUTOCOMMIT=1ï¼›æ‰“å¼€è‡ªåŠ¨æäº¤ï¼Œä¹Ÿå¯ä»¥æé«˜å¯¼å…¥çš„æ•ˆç‡ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> infiles <span class="string">'/root/sql1.log'</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="string">'tb_user_1'</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\n'</span>;</span><br><span class="line"><span class="comment">#è€—è´¹æ—¶é•¿ä¸º 19.58 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_user_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="SQLä¼˜åŒ–-insertä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-insertä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - insertä¼˜åŒ–"></a>SQLä¼˜åŒ– - insertä¼˜åŒ–</h2><p><strong>ä¼˜åŒ–insertè¯­å¥</strong>  </p><p>å½“è¿›è¡Œæ•°æ®çš„insertæ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ä»¥ä¸‹å‡ ç§ä¼˜åŒ–æ–¹æ¡ˆã€‚  </p><ul><li><p>å¦‚æœéœ€è¦åŒæ—¶å¯¹ä¸€å¼ è¡¨æ’å…¥å¾ˆå¤šè¡Œæ•°æ®æ—¶ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨å¤šä¸ªå€¼è¡¨çš„insertè¯­å¥ï¼Œè¿™ç§æ–¹å¼å°†å¤§å¤§çš„ç¼©å‡å®¢æˆ·ç«¯ä¸æ•°æ®åº“ä¹‹é—´çš„è¿æ¥ã€å…³é—­ç­‰æ¶ˆè€—ã€‚<br>ä½¿å¾—æ•ˆç‡æ¯”åˆ†å¼€æ‰§è¡Œçš„å•ä¸ªinsertè¯­å¥å—ã€‚<br>ç¤ºä¾‹ï¼ŒåŸå§‹æ–¹å¼ä¸ºï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'tom'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'Jerry'</span>);</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„æ–¹æ¡ˆä¸ºï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'tom'</span>),(<span class="number">2</span>,<span class="string">'cat'</span>),(<span class="number">3</span>,<span class="string">'Jerry'</span>);</span><br></pre></td></tr></table></figure></li><li><p>åœ¨äº‹åŠ¡ä¸­è¿›è¡Œæ•°æ®æ’å…¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'tom'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'Jerry'</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></li><li><p>æ•°æ®æœ‰åºæ’å…¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'Tim'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'tom'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">'Rose'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'Jerry'</span>);</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'Tim'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'tom'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'cat'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'Rose'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_test <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">'Jerry'</span>);</span><br></pre></td></tr></table></figure></li></ul><h2 id="SQLä¼˜åŒ–-orderbyä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-orderbyä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - orderbyä¼˜åŒ–"></a>SQLä¼˜åŒ– - orderbyä¼˜åŒ–</h2><p><strong>ä¼˜åŒ– order by è¯­å¥</strong>  </p><p><strong>ç¯å¢ƒå‡†å¤‡</strong>  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">'emp'</span>(</span><br><span class="line">  <span class="string">'id'</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">'name'</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'age'</span> <span class="built_in">int</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'salary'</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(<span class="string">'id'</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> DEAFULT <span class="keyword">CHARSET</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸºç¡€æ•°æ®æ’å…¥</span></span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_emp_age_salary <span class="keyword">on</span> emp(age,salary);<span class="comment">#å»ºç«‹ageã€salaryå­—æ®µçš„å¤åˆç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">#PRIMARY ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="comment">#idx_emp_age_salary age å¤åˆç´¢å¼•</span></span><br><span class="line"><span class="comment">#idx_emp_age_salary salary å¤åˆç´¢å¼•</span></span><br></pre></td></tr></table></figure><p><strong>ä¸¤ç§æ’åºæ–¹å¼</strong>  </p><p>ï¼ˆ1ï¼‰<strong>ç¬¬ä¸€ç§æ˜¯é€šè¿‡å¯¹è¿”å›æ•°æ®è¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯é€šå¸¸è¯´çš„ filesort æ’åºï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å«åš FileSortæ’åº</strong>ã€‚  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age;#key:<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span>ï¼›Extraï¼š<span class="keyword">Using</span> filesort;<span class="keyword">type</span>:<span class="keyword">ALL</span> æ²¡æœ‰èµ°ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æï¼ˆå‡åºï¼‰</span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age,salary;#key:<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span>ï¼›Extraï¼š<span class="keyword">Using</span> filesort;<span class="keyword">type</span>:<span class="keyword">ALL</span> æ²¡æœ‰èµ°ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æï¼ˆå‡åºï¼‰</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>;#key:<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span>ï¼›Extraï¼š<span class="keyword">Using</span> filesort;<span class="keyword">type</span>:<span class="keyword">ALL</span> æ²¡æœ‰èµ°ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æï¼ˆé™åºï¼‰</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>,salary <span class="keyword">desc</span>;#key:<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span>ï¼›Extraï¼š<span class="keyword">Using</span> filesort;<span class="keyword">type</span>:<span class="keyword">ALL</span> æ²¡æœ‰èµ°ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æï¼ˆé™åºï¼‰</span><br><span class="line"></span><br><span class="line">#é€šè¿‡file sort æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ’åºï¼Œæ•ˆç‡è¾ƒä½</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>;#<span class="keyword">type</span>ï¼š<span class="keyword">ALL</span>ï¼Œkeyï¼š<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#<span class="keyword">type</span>ï¼š<span class="keyword">ALL</span>ï¼Œkeyï¼š<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰<strong>ç¬¬äºŒç§é€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜</strong>ã€‚  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#èµ°ç´¢å¼•ï¼›keyï¼šidx_age_salaryï¼›key_len:<span class="number">9</span>ï¼›Extraï¼š<span class="keyword">Using</span> <span class="keyword">index</span> èµ°ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#èµ°ç´¢å¼•ï¼›keyï¼šidx_age_salaryï¼›key_len:<span class="number">9</span>ï¼›Extraï¼š<span class="keyword">Using</span> <span class="keyword">index</span> èµ°ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#èµ°ç´¢å¼•ï¼›keyï¼šidx_age_salaryï¼›key_len:<span class="number">9</span>ï¼›Extraï¼š<span class="keyword">Using</span> <span class="keyword">index</span> èµ°ç´¢å¼•</span><br><span class="line">#è¦†ç›–ç´¢å¼•çš„ç”¨æ³•ï¼›æŸ¥è¯¢<span class="keyword">select</span> çš„å­—æ®µéƒ½æ˜¯è¦†ç›–ç´¢å¼•åˆ™è¿™ä¸ªæ—¶å€™ä½¿ç”¨çš„å³ä¸º<span class="keyword">using</span> <span class="keyword">index</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,salary,<span class="type">name</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#èµ°ç´¢å¼•ï¼›keyï¼š<span class="keyword">NULL</span>ï¼›key_len:<span class="keyword">NULL</span>ï¼›<span class="keyword">type</span>:<span class="keyword">ALL</span>ï¼›Extraï¼š<span class="keyword">Using</span> filesort å…¨è¡¨æ‰«æï¼›ç”±äºæŸ¥è¯¢çš„å­—æ®µå½“ä¸­åŒ…å«äº†éç´¢å¼•å­—æ®µï¼›å³å¹¶æœªè¦†ç›–ç´¢å¼•ï¼›æ‰€ä»¥èµ°å…¨è¡¨æ‰«æçš„æ–¹å¼ï¼›idã€ageã€salaryè¿™ä¸‰ä¸ªå­—æ®µéƒ½æœ‰ç´¢å¼•ï¼›è€Œ<span class="type">name</span>å­—æ®µæ²¡æœ‰ç´¢å¼•ï¼›</span><br></pre></td></tr></table></figure><p><strong>å¤šå­—æ®µæ’åº</strong>  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id ,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age,salary;#key:idx_age_salary;key_len:<span class="number">9</span>;Extra:<span class="keyword">Using</span> <span class="keyword">index</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id ,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>,salary <span class="keyword">asc</span>;#key:idx_age_salary;key_len:<span class="number">9</span>;Extra:<span class="keyword">Using</span> <span class="keyword">index</span>(<span class="keyword">order</span> <span class="keyword">by</span> å¦‚ä¸æ ‡æ˜<span class="keyword">desc</span>æˆ–è€…<span class="keyword">asc</span>;é»˜è®¤ä¸º<span class="keyword">asc</span>å‡åºæ’åº)</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>,salary <span class="keyword">desc</span>;#key:idx_age_salary;key_len:<span class="number">9</span>;Extra:<span class="keyword">Using</span> <span class="keyword">index</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>,salary <span class="keyword">desc</span>;#key:idx_age_salary;key_len:<span class="number">9</span>;Extra:<span class="keyword">Using</span> <span class="keyword">index</span>;<span class="keyword">Using</span> filesortæ­¤æ—¶å°±ä¼šå‡ºç°Filesort</span><br><span class="line"></span><br><span class="line"># å³åœ¨ä½¿ç”¨<span class="keyword">order</span> <span class="keyword">by</span>è¿›è¡Œå¤šå­—æ®µæ’åºçš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦æ•ˆç‡è¾ƒé«˜ï¼›é‚£ä¹ˆæ­¤æ—¶æœ€å¥½è¿™äº›å¤šå­—æ®µç»Ÿä¸€æ’åºæ–¹å¼ï¼›è¦ä¹ˆéƒ½æ˜¯å‡åºè¦ä¹ˆéƒ½æ˜¯é™åºï¼›å¦‚æœå‡ºç°ä¸€å‡ä¸€é™é‚£ä¹ˆå°±ä¼šå‡ºç°Filesortï¼›æ–‡ä»¶ç³»ç»Ÿæ’åºé€ æˆæ•ˆç‡ä½ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,salary <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>,age <span class="keyword">asc</span>;#key:idx_age_salary;key_len:<span class="number">9</span>;Extra:<span class="keyword">Using</span> <span class="keyword">index</span>;<span class="keyword">Using</span> filesortï¼›æ­¤æ—¶å°†age <span class="keyword">asc</span>è¿›è¡Œäº†è°ƒåå¤„ç†ï¼›ä¹Ÿå‡ºç°äº†Filesort</span><br><span class="line">#åŸå› åœ¨äºï¼š</span><br><span class="line">#æŒ‰ç…§å¤šå­—æ®µè¿›è¡Œæ’åºï¼Œè¦ä¹ˆç»Ÿä¸€è¿›è¡Œå‡åº<span class="keyword">asc</span>è¦ä¹ˆç»Ÿä¸€è¿›è¡Œé™åºæ’åºï¼›</span><br><span class="line">#å¦‚æœæŒ‰ç…§å¤šå­—æ®µè¿›è¡Œæ’åºï¼Œé‚£ä¹ˆæ’åºçš„é¡ºåºéœ€è¦å’Œå¤åˆç´¢å¼•å½“ä¸­çš„å­—æ®µé¡ºåºè¦ä¿æŒä¸€è‡´ï¼›</span><br><span class="line">#å¤åˆç´¢å¼•ä¸ºidx_emp_age_salaryï¼ˆageï¼Œsalaryï¼‰å¤åˆç´¢å¼•å½“ä¸­ageå­—æ®µçš„ç´¢å¼•é¡ºåºå…ˆäºsalaryå­—æ®µçš„é¡ºåºï¼›</span><br><span class="line">#è€Œæ­¤æ—¶<span class="keyword">SQL</span>å½“ä¸­<span class="keyword">order</span> <span class="keyword">by</span>è¯­å¥å¤šå­—æ®µæ’åºsalaryå­—æ®µå…ˆäºageå­—æ®µï¼›æ‰€ä»¥æ­¤æ—¶Extraå½“ä¸­å°±å‡ºç°äº†<span class="keyword">using</span> <span class="keyword">index</span>ï¼›ä¹Ÿå‡ºç°äº†<span class="keyword">using</span> filesort;</span><br></pre></td></tr></table></figure><p>äº†è§£äº†MySQLçš„æ’åºæ–¹å¼ï¼Œä¼˜åŒ–ç›®æ ‡å°±æ¸…æ™°äº†ï¼šå°½é‡å‡å°‘é¢å¤–çš„æ’åºï¼Œé€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æœ‰åºæ•°æ®ã€‚  </p><p>whereæ¡ä»¶å’ŒOrder by ä½¿ç”¨ç›¸åŒçš„ç´¢å¼•å¹¶ä¸”Order by çš„é¡ºåºå’Œç´¢å¼•é¡ºåºç›¸åŒï¼Œå¹¶ä¸”Order byçš„å­—æ®µéƒ½æ˜¯å‡åºï¼Œæˆ–è€…éƒ½æ˜¯é™åºã€‚  </p><p>å¦åˆ™è‚¯å®šéœ€è¦é¢å¤–çš„æ“ä½œï¼Œè¿™æ ·å°±ä¼šå‡ºç°FileSortæ’åºï¼›  </p><h3 id="Filesortçš„ä¼˜åŒ–"><a href="#Filesortçš„ä¼˜åŒ–" class="headerlink" title="Filesortçš„ä¼˜åŒ–"></a>Filesortçš„ä¼˜åŒ–</h3><p>å°½å¯èƒ½é¿å…Filesortçš„å‡ºç°ï¼Œä½†æ˜¯æ— æ³•å®Œå…¨é¿å…Filesortçš„å‡ºç°ï¼›  </p><p>é€šè¿‡åˆ›å»ºåˆé€‚çš„ç´¢å¼•ï¼Œèƒ½å¤Ÿå‡å°‘Filesortçš„å‡ºç°ã€‚  </p><p>ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¡ä»¶é™åˆ¶ä¸èƒ½è®©Filesortå°æ—¶ï¼Œé‚£å°±éœ€è¦åŠ å¿«Filesortçš„æ’åºæ“ä½œï¼Œå¯¹äºFilesortï¼ŒMySQLæœ‰ä¸¤ç§æ’åºç®—æ³•ï¼š  </p><p>ï¼ˆ1ï¼‰ä¸¤æ¬¡æ‰«æç®—æ³•ï¼šMySQL4.1ä¹‹å‰ï¼Œä½¿ç”¨è¯¥æ–¹å¼æ’åºã€‚<br>    é¦–å…ˆï¼Œæ ¹æ®æ¡ä»¶å–å‡ºæ’åºå­—æ®µå’Œè¡ŒæŒ‡é’ˆä¿¡æ¯ï¼Œç„¶ååœ¨æ’åºåŒº sort bufferä¸­æ’åºï¼›<br>    å¦‚æœsort bufferä¸å¤Ÿï¼Œåˆ™åœ¨ä¸´æ—¶è¡¨ temporary tableä¸­å­˜å‚¨æ’åºç»“æœã€‚<br>    å®Œæˆæ’åºä¹‹åï¼Œå†æ ¹æ®èˆªæŒ‡é’ˆå›è¡¨è¯»å–è®°å½•ï¼Œè¯¥æ“ä½œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡éšæœºI/Oæ“ä½œã€‚  </p><p>ï¼ˆ2ï¼‰ä¸€æ¬¡æ‰«æç®—æ³•ï¼šä¸€æ¬¡æ€§å–å‡ºæ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰å­—æ®µï¼Œç„¶ååœ¨æ’åºåŒºsort bufferä¸­æ’åºåç›´æ¥è¾“å‡ºç»“æœé›†ã€‚<br>    æ’åºæ—¶å†…å­˜å¼€é”€è¾ƒå¤§ï¼Œä½†æ˜¯æ’åºæ•ˆç‡æ¯”ä¸¤æ¬¡æ‰«æç®—æ³•è¦é«˜ï¼›  </p><p>MySQL é€šè¿‡æ¯”è¾ƒç³»ç»Ÿå˜é‡ max_length_for_sort_data çš„å¤§å°å’ŒQuery è¯­å¥å–å‡ºçš„å­—æ®µæ€»å¤§å°ï¼Œæ¥åˆ¤å®šåˆé€‚å“ªä¸€ç§æ’åºç®—æ³•ï¼Œå¦‚æœmax_length_for_sort_data æ›´å¤§ï¼Œé‚£ä¹ˆä½¿ç”¨ç¬¬äºŒç§ä¼˜åŒ–ä¹‹åçš„ç®—æ³•ï¼›å¦åˆ™ä½¿ç”¨ç¬¬ä¸€ç§ï¼›  </p><p>å¯ä»¥é€‚å½“æé«˜ sort_buffer_sizeå’Œ max_length_for_sort_data ç³»ç»Ÿå˜é‡ï¼Œæ¥å¢å¤§æ’åºåŒºçš„å¤§å°ï¼Œæé«˜æ’åºçš„æ•ˆç‡ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'max_length_for_sort_data'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>max_length_for_sort_data</td>    <td>1024</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'sort_buffer_size'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>sort_buffer_size</td>    <td>262144</td>  </tr></table><h2 id="SQLä¼˜åŒ–-group-byä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-group-byä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - group byä¼˜åŒ–"></a>SQLä¼˜åŒ– - group byä¼˜åŒ–</h2><p>ç”±äºGROUP BY å®é™…ä¸Šä¹ŸåŒæ ·ä¼šè¿›è¡Œæ’åºæ“ä½œï¼Œè€Œä¸”ä¸ORDER BYç›¸æ¯”ï¼ŒGROUP BYä¸»è¦åªæ˜¯å¤šäº†æ’åºå­—åçš„åˆ†ç»„æ“ä½œã€‚  </p><p>å½“ç„¶å¦‚æœåœ¨åˆ†ç»„çš„æ—¶å€™è¿˜æ˜¯ç”¨äº†å…¶ä»–çš„ä¸€äº›èšåˆå‡½æ•°ï¼Œé‚£ä¹ˆè¿˜éœ€è¦ä¸€äº›èšåˆå‡½æ•°çš„è®¡ç®—ã€‚  </p><p>æ‰€ä»¥ï¼Œåœ¨GROUP BYçš„å®ç°è¿‡ç¨‹ä¸­ï¼Œä¸ORDER BYä¸€æ ·ä¹Ÿå¯ä»¥åˆ©ç”¨åˆ°ç´¢å¼•ã€‚  </p><p>å¦‚æœæŸ¥è¯¢åŒ…å«GROUP BYï¼Œä½†æ˜¯ç”¨æˆ·æƒ³è¦é¿å…æ’åºç»“æœçš„æ¶ˆè€—ï¼Œåˆ™å¯ä»¥æ‰§è¡Œorder by null ç¦æ­¢æ’åºã€‚  </p><p>å¦‚ä¸‹ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> idx_emp_age_salary <span class="keyword">on</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> age,count(*) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> age;#key:<span class="keyword">NULL</span>,key_len:<span class="keyword">NULL</span>;<span class="keyword">type</span>:<span class="keyword">ALL</span>;Extra:<span class="keyword">Using</span> <span class="keyword">temporary</span>;<span class="keyword">Using</span> filesort; ç”±æ­¤å¯ä»¥çœ‹å‡º<span class="keyword">GROUP</span> <span class="keyword">BY</span> åº•å±‚è¿›è¡Œäº†æ’åºæ“ä½œï¼›<span class="keyword">Using</span> filesort</span><br><span class="line"><span class="meta">#Using temporaryä¸Using Filesortéƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼›</span></span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> age,count(*) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> age <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">null</span>;#key:<span class="keyword">null</span>;key_len:<span class="keyword">null</span>;<span class="keyword">type</span>:<span class="keyword">All</span>;Extra:<span class="keyword">Using</span> <span class="keyword">temporary</span>;æ­¤æ—¶å°±æ²¡æœ‰<span class="keyword">Using</span> filesortäº†</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€ä¸ªSQLè¯­å¥éœ€è¦è¿›è¡Œâ€œFilesortâ€ï¼Œè€Œç¬¬äºŒä¸ªSQLè¯­å¥ç”±äºorder by nullä¸éœ€è¦è¿›è¡Œâ€œFilesortâ€ï¼Œè€Œä¸Šæ–‡æè¿‡FileSortå¾€å¾€éå¸¸è€—è´¹æ—¶é—´ã€‚  </p><p> åˆ›å»ºç´¢å¼•ï¼š  </p> <figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_emp_age_salary  <span class="keyword">on</span> emp(age,salary);</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> age,<span class="built_in">count</span>(*) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> age <span class="keyword">order</span> <span class="keyword">by</span> <span class="literal">null</span>;#key:idx_emp_age_salary;key_len:9;extra:using <span class="keyword">index</span> æ­¤æ—¶èµ°ç´¢å¼•ï¼›</span><br><span class="line">#<span class="keyword">group</span> <span class="keyword">by</span>è¯­å¥ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡çš„ï¼›</span><br></pre></td></tr></table></figure><h2 id="SQLä¼˜åŒ–-å­æŸ¥è¯¢ä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-å­æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - å­æŸ¥è¯¢ä¼˜åŒ–"></a>SQLä¼˜åŒ– - å­æŸ¥è¯¢ä¼˜åŒ–</h2><p><strong>ä¼˜åŒ–åµŒå¥—æŸ¥è¯¢</strong>  </p><p>MySQL4.1 ç‰ˆæœ¬ä¹‹åï¼Œå¼€å§‹æ”¯æŒSQLçš„å­æŸ¥è¯¢ã€‚  </p><p>è¿™ä¸ªæŠ€æœ¯å¯ä»¥ä½¿ç”¨selectè¯­å¥æ¥åˆ›å»ºä¸€ä¸ªå•åˆ—çš„æŸ¥è¯¢ç»“æœï¼Œç„¶åå§è¿™ä¸ªç»“æœæ¥ä½œä¸ºè¿‡æ»¤æ¡ä»¶ç”¨åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢å½“ä¸­ã€‚  </p><p>ä½¿ç”¨å­æŸ¥è¯¢å¯ä»¥ä¸€æ¬¡æ€§çš„å®Œæˆå¾ˆå¤šé€»è¾‘ä¸Šéœ€è¦å¤šä¸ªæ­¥éª¤æ‰èƒ½å®Œæˆçš„SQLæ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…äº‹åŠ¡æˆ–è€…è¡¨é”æ­»ï¼Œå¹¶ä¸”å†™èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚  </p><p>ä½†æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œå­æŸ¥è¯¢æ˜¯å¯ä»¥è¢«æ›´é«˜æ•ˆçš„è¿æ¥ï¼ˆJOINï¼‰æ›¿ä»£ã€‚(ä½¿ç”¨å¤šè¡¨è¿æ¥æŸ¥è¯¢æ¥æ›¿æ¢å­æŸ¥è¯¢)  </p><p>ç¤ºä¾‹ï¼ŒæŸ¥æ‰¾æœ‰è§’è‰²çš„æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;<span class="comment"># t_user ç”¨æˆ·è¡¨ , t_role è§’è‰²è¡¨ , user_role ç”¨æˆ·è§’è‰²ä¸­é—´è¡¨ ï¼›</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> ( <span class="keyword">select</span> user_id <span class="keyword">from</span> user_role);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè®¡åˆ’ä¸ºï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> user_id <span class="keyword">from</span> user_role);</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>t_user</td>    <td>ALL</td>    <td>PRIMARY</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>6</td>    <td>Using where</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>< subquery2></td>    <td>eq_ref</td>    <td>< auto_key></td>    <td>< auto_key></td>    <td>99</td>    <td>demo_02.t_user.id</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>MATERIALIZED</td>    <td>user_role</td>    <td>index</td>    <td>fk_ur_user_id</td>    <td>fk_ur_user_id</td>    <td>99</td>    <td>NULL</td>    <td>6</td>    <td>Using index</td>  </tr></table><p>ä¼˜åŒ–åï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> t_user u,user_role ur <span class="keyword">where</span> u.id=ur.user_id;<span class="comment">#å¤šè¡¨è”æŸ¥æ›¿ä»£å­æŸ¥è¯¢</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>u</td>    <td>ALL</td>    <td>PRIMARY</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>6</td>    <td>NULL</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>ur</td>    <td>ref(refçš„æ•ˆç‡æ¯”indexæ•ˆç‡é«˜)</td>    <td>fk_ur_user_id</td>    <td>fk_ur_user_id</td>    <td>99</td>    <td>demo_02.u.id</td>    <td>1</td>    <td>NULL</td>  </tr></table><h2 id="SQLä¼˜åŒ–-orä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-orä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - orä¼˜åŒ–"></a>SQLä¼˜åŒ– - orä¼˜åŒ–</h2><p><strong>å¯¹äºåŒ…å« ORçš„æŸ¥è¯¢å­å¥ï¼Œå¦‚æœè¦åˆ©ç”¨ç´¢å¼•ï¼Œåˆ™ORä¹‹é—´çš„æ¯ä¸ªæ¡ä»¶åˆ—éƒ½å¿…é¡»ç”¨åˆ°ç´¢å¼•ï¼Œè€Œä¸”ä¸èƒ½ä½¿ç”¨åˆ°å¤åˆç´¢å¼•ï¼›å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œåˆ™åº”è¯¥è€ƒè™‘å¢åŠ ç´¢å¼•</strong>ã€‚  </p><p>è·å–empè¡¨ä¸­çš„æ‰€æœ‰çš„ç´¢å¼•ï¼›  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š  </p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">show</span> index <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br><span class="line">explain <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="built_in">where</span> id=<span class="number">1</span> <span class="built_in">or</span> name='Tom;#idä¸ºä¸»é”®ï¼Œå³å­˜åœ¨ä¸»é”®ç´¢å¼•ï¼›è€Œnameå­—æ®µæ²¡æœ‰è®¾ç½®ç´¢å¼•ï¼›æ‰€ä»¥æ­¤æ—¶ç”¨<span class="built_in">or</span>æ¥è¿æ¥ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œå½“ä¸­åŒ…å«æœ‰ä¸€ä¸ªéç´¢å¼•å­—æ®µï¼›æ‰€ä»¥ä¸ä¼šèµ°ç´¢å¼•,ç´¢å¼•å¤±æ•ˆï¼Œé‡‡ç”¨çš„æ˜¯å…¨è¡¨æ‰«æï¼›<span class="built_in">key</span>:NULL;key_len:NULL;<span class="built_in">type</span>:ALL;extra:Using <span class="built_in">where</span>ï¼›<span class="built_in">or</span>å…³é”®å­—å¦‚æœæƒ³è¦èµ°ç´¢å¼•åˆ™<span class="built_in">or</span>è¿æ¥çš„æ¡ä»¶åˆ—å­—æ®µéœ€è¦æ˜¯ç´¢å¼•åˆ—ï¼›ä»è€Œèƒ½å¤Ÿèµ°ç´¢å¼•å¦åˆ™å…¨è¡¨æ‰«æä¸èµ°ç´¢å¼•ï¼›</span><br><span class="line"></span><br><span class="line">explain <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="built_in">where</span> age=<span class="number">20</span> <span class="built_in">or</span> salary=<span class="number">3500</span>;#<span class="built_in">key</span>:NULL,key_len:NULL;<span class="built_in">type</span>;All;extra:Using <span class="built_in">where</span>;æ­¤æ—¶æœªèµ°ç´¢å¼•ï¼›ageä¸salaryä¸ºå¤åˆç´¢å¼•å½“ä¸­çš„ç´¢å¼•åˆ—ï¼›è€Œ<span class="built_in">or</span>å…³é”®å­—æ‰€è¿æ¥çš„æ¡ä»¶åˆ—å½“ä¸­å­—æ®µçš„ç´¢å¼•ä¸èƒ½ä¸ºå¤åˆç´¢å¼•åˆ—ï¼›å¯ä»¥ä¸ºä¸»é”®ç´¢å¼•åˆ—ã€å”¯ä¸€ç´¢å¼•åˆ—ã€å•åˆ—ç´¢å¼•ç­‰ï¼›å°±æ˜¯ä¸èƒ½ä¸ºå¤åˆç´¢å¼•åˆ—å…¶ä»–çš†å¯ï¼›</span><br><span class="line"></span><br><span class="line">explain <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="built_in">where</span> id=<span class="number">1</span> <span class="built_in">or</span> age=<span class="number">30</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>t_user</td>    <td>ALL</td>    <td>PRIMARY</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>6</td>    <td>Using where</td>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>emp</td>    <td>index_merge</td>    <td>PRIMARY,idx_emp_age_salary</td>    <td>PRIMARY,idx_emp_age_salary</td>    <td>4,4</td>    <td>NULL</td>    <td>2</td>    <td>Using sort_union(idx_emp_age_salary,PRIMARY);Using where</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">id</span>=<span class="number">10</span> \G;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>emp</td>    <td>range</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>NULL</td>    <td>2</td>    <td>Using where</td>  </tr></table><p>å»ºè®®ä½¿ç”¨ union æ›¿æ¢ orï¼›  </p><p>ä¼˜åŒ–ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">id</span> =<span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">id</span> =<span class="number">10</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>emp</td>    <td>const(constæ•ˆç‡è¿œé«˜äºrange)</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>UNION</td>    <td>emp</td>    <td>const</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>NULL</td>    <td>UNION RESULT</td>    <td>< union1,2></td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>Using temporary</td>  </tr></table><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">explain select * from emp where id=<span class="number">1</span> or age=<span class="number">20</span>;</span><br><span class="line"><span class="meta">#id 1</span></span><br><span class="line"><span class="meta">#select_type SIMPLE</span></span><br><span class="line"><span class="meta">#table emp</span></span><br><span class="line"><span class="meta">#possible_key PRIMARY,idx_emp_age_salary</span></span><br><span class="line"><span class="meta">#key idx_emp_age_salary,PRIMARY</span></span><br><span class="line"><span class="meta">#key_len 4,4</span></span><br><span class="line"><span class="meta">#ref NULL</span></span><br><span class="line"><span class="meta">#rows 2</span></span><br><span class="line"><span class="meta">#extra Using sort_union(idx_emp_age_salary,PRIMARY)</span></span><br><span class="line"><span class="meta">#type index_merge</span></span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">union</span> <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> age=<span class="number">20</span>;</span><br><span class="line"><span class="comment">#unionå³ä¸ºä¸€ä¸ªæ±‚å¹¶é›†çš„ä¸€ä¸ªæ“ä½œï¼›</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>emp</td>    <td>const(constæ•ˆç‡è¿œé«˜äºrange)</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>2</td>    <td>UNION</td>    <td>emp</td>    <td>ref(refæ¯”index_mergeæ•ˆç‡é«˜)</td>    <td>idx_emp_age_salary</td>    <td>idx_emp_age_salary</td>    <td>4</td>    <td>const</td>    <td>1</td>    <td>NULL</td>  </tr>  <tr>    <td>NULL</td>    <td>UNION RESULT</td>    <td>< union1,2></td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>Using temporary</td>  </tr></table><p>å»ºè®®é€šè¿‡unionæ›¿æ¢orï¼›<br>æ¥æ¯”è¾ƒä¸‹é‡è¦æŒ‡æ ‡ï¼Œå‘ç°ä¸»è¦å·®åˆ«æ˜¯typeå’Œrefè¿™ä¸¤é¡¹ï¼›<br>typeæ˜¾ç¤ºçš„æ˜¯è®¿é—®ç±»å‹ï¼Œæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œç»“æœå€¼ä»å¥½åˆ°åä¾æ¬¡æ˜¯ï¼š  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">system</span> &gt; const &gt; eq_ref &gt; <span class="keyword">ref</span> &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; uniqe_subquery &gt; index_subquery &gt; range &gt; <span class="keyword">index</span> &gt; <span class="keyword">ALL</span></span><br></pre></td></tr></table></figure><p>UNIONè¯­å¥çš„typeå€¼ä¸ºrefï¼ŒORè¯­å¥çš„typeå€¼ä¸ºrangeï¼Œå¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å·®è·  </p><p>UNIONè¯­å¥çš„refå€¼ä¸ºconstï¼ŒORè¯­å¥çš„typeå€¼ä¸ºNULLï¼Œconstè¡¨ç¤ºæ˜¯å¸¸é‡å€¼å¼•ç”¨ï¼Œéå¸¸å¿«  </p><p>è¿™ä¸¤é¡¹çš„å·®è·å°±è¯´æ˜äº†UNIONè¦ä¼˜äºORï¼›</p><h2 id="SQLä¼˜åŒ–-limitä¼˜åŒ–"><a href="#SQLä¼˜åŒ–-limitä¼˜åŒ–" class="headerlink" title="SQLä¼˜åŒ– - limitä¼˜åŒ–"></a>SQLä¼˜åŒ– - limitä¼˜åŒ–</h2><h3 id="ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢"><a href="#ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢"></a>ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢</h3><p>ä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„æé«˜æ€§èƒ½ã€‚  </p><p>ä¸€ä¸ªå¸¸è§åˆéå¸¸å¤´ç–¼çš„é—®é¢˜å°±æ˜¯ limit 2000000,10;   æ­¤æ—¶éœ€è¦MySQLæ’åºå‰2000010è®°å½•ï¼Œä»…ä»…è¿”å› 2000000 - 2000010 çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">limit</span> <span class="number">2000000</span>,<span class="number">10</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_item</td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>9816098</td>    <td>NULL</td>  </tr></table><h3 id="ä¼˜åŒ–æ€è·¯ä¸€"><a href="#ä¼˜åŒ–æ€è·¯ä¸€" class="headerlink" title="ä¼˜åŒ–æ€è·¯ä¸€"></a>ä¼˜åŒ–æ€è·¯ä¸€</h3><p>åœ¨ç´¢å¼•ä¸Šå®Œæˆæ’åºåˆ†é¡µæ“ä½œï¼Œæœ€åæ ¹æ®ä¸»é”®å…³è”å›åŸè¡¨æŸ¥è¯¢æ‰€éœ€è¦çš„å…¶ä»–åˆ—å†…å®¹ã€‚  </p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">slect count(*) from tb_item;#3000000</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">limit</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">limit</span> <span class="number">10</span>,<span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">limit</span> <span class="number">20</span>,<span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">limit</span> <span class="number">2000000</span>,<span class="number">10</span>;#æŸ¥è¯¢æ•ˆç‡ä½ æ­¤æ—¶ä¸ºå…¨è¡¨æ‰«ææ²¡æœ‰ä½¿ç”¨å¾—åˆ°ç´¢å¼•ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item t, (<span class="keyword">select</span> id <span class="keyword">from</span> tb_item <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">limit</span> <span class="number">2000000</span>,<span class="number">10</span>) a <span class="keyword">where</span> t.id=a.id;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>< derived2></td>    <td>ALL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>NULL</td>    <td>2000010</td>    <td>NULL</td>  </tr>  <tr>    <td>1</td>    <td>PRIMARY</td>    <td>t</td>    <td>eq_ref</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>a.id</td>    <td>1</td>    <td>NULL</td>  </tr>    <tr>    <td>2</td>    <td>DERIVED</td>    <td>tb_item</td>    <td>index</td>    <td>NULL</td>    <td>PRIMARY</td>    <td>4</td>    <td>NULL</td>    <td>2903274</td>    <td>Using index</td>  </tr></table><h3 id="ä¼˜åŒ–æ€è·¯äºŒ"><a href="#ä¼˜åŒ–æ€è·¯äºŒ" class="headerlink" title="ä¼˜åŒ–æ€è·¯äºŒ"></a>ä¼˜åŒ–æ€è·¯äºŒ</h3><p>è¯¥æ–¹æ¡ˆé€‚ç”¨äº<strong>ä¸»é”®è‡ªå¢çš„è¡¨(ä¸”ä¸»é”®è‡ªå¢çš„åˆ—ä¸èƒ½å¤Ÿå‡ºç°æ–­å±‚)</strong>ï¼Œå¯ä»¥æŠŠlimit æŸ¥è¯¢è½¬æ¢æˆæŸä¸ªä½ç½®çš„æŸ¥è¯¢ï¼›  </p><p><strong>æ–­å±‚</strong>ï¼šå³æŒ‡çš„æ˜¯å½“åœ¨æŸ¥è¯¢æ•°æ®æ—¶ï¼Œidä¸»é”®è‡ªå¢åˆ—å½“ä¸­å¯èƒ½ä¼šæœ‰å‡ºç°ä¿®æ”¹æˆ–è€…åˆ é™¤çš„æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ•°æ®å°±ä¸ä¸€å®šå‡†ç¡®äº†ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span> &gt; <span class="number">1000000</span> <span class="keyword">limit</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_item</td>    <td>range</td>    <td>PRIMARY</td>    <td>PRIMARY</td>    <td>4</td>    <td>NULL</td>    <td>4908049</td>    <td>Using where</td>  </tr></table><h2 id="SQLä¼˜åŒ–-ç´¢å¼•æç¤º"><a href="#SQLä¼˜åŒ–-ç´¢å¼•æç¤º" class="headerlink" title="SQLä¼˜åŒ– - ç´¢å¼•æç¤º"></a>SQLä¼˜åŒ– - ç´¢å¼•æç¤º</h2><p><strong>ä½¿ç”¨SQLæç¤º</strong>  </p><p>SQLæç¤ºï¼Œæ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨SQLè¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚  </p><h3 id="USE-INDEX"><a href="#USE-INDEX" class="headerlink" title="USE INDEX"></a>USE INDEX</h3><p>åœ¨æŸ¥è¯¢è¯­å¥ä¸­ è¡¨åç§°çš„åé¢ ï¼Œæ·»åŠ  use index æ¥æä¾›å¸Œæœ›MySQLå»<strong>å‚è€ƒ</strong>çš„ç´¢å¼•åˆ—è¡¨ï¼Œå°±å¯ä»¥è®©MySQLä¸å†è€ƒè™‘å…¶ä»–å¯ç”¨çš„ç´¢å¼•ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_seller;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> tb_seller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_name <span class="keyword">on</span> tb_seller(<span class="keyword">name</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_status <span class="keyword">on</span> tb_seller(<span class="keyword">status</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_address <span class="keyword">on</span> tb_seller(address);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_name_sta_addr <span class="keyword">on</span> tb_seller(<span class="keyword">name</span>,<span class="keyword">status</span>,address);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ref</td>    <td>idx_seller_name_sta_address,idx_seller_name</td>    <td>idx_seller_name(æ•°æ®åº“é€‰æ‹©ä½¿ç”¨idx_seller_nameç´¢å¼•)</td>    <td>403</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">use</span> <span class="keyword">index</span>(idx_seller_name_sta_address) <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ref</td>    <td>idx_seller_name_sta_address</td>    <td>idx_seller_name_sta_address</td>    <td>403</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">use</span> <span class="keyword">index</span>(idx_seller_name) <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ref</td>    <td>idx_seller_name</td>    <td>idx_seller_name</td>    <td>403</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><h3 id="IGNORE-INDEX"><a href="#IGNORE-INDEX" class="headerlink" title="IGNORE INDEX"></a>IGNORE INDEX</h3><p>å¦‚æœç”¨æˆ·åªæ˜¯å•çº¯çš„æƒ³è®©MySQL<strong>å¿½ç•¥</strong>ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ ignore index ä½œä¸º hintï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">ignore</span> <span class="keyword">index</span>(idx_seller_name) <span class="keyword">where</span> <span class="keyword">name</span> =<span class="string">'å°ç±³ç§‘æŠ€'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ref</td>    <td>idx_seller_name_sta_address</td>    <td>idx_seller_name_sta_address</td>    <td>403</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">ignore</span> <span class="keyword">index</span>(idx_seller_name_sta_address) <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'å°ç±³ç§‘æŠ€'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ref</td>    <td>idx_seller_name</td>    <td>idx_seller_name</td>    <td>403</td>    <td>const</td>    <td>1</td>    <td>Using index condition</td>  </tr></table><h3 id="FORCE-INDEX"><a href="#FORCE-INDEX" class="headerlink" title="FORCE INDEX"></a>FORCE INDEX</h3><p>ä¸ºäº†<strong>å¼ºåˆ¶</strong>MySQLä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„ç´¢å¼•ï¼Œå¯åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ force index æ¥ä½œä¸º hint;</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_seller_address <span class="keyword">on</span> tb_seller(address);</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller <span class="keyword">where</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;#å®é™…æ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•ï¼›<span class="keyword">type</span>:<span class="keyword">all</span>;key:<span class="keyword">null</span>;key_len:<span class="keyword">null</span>;extra:<span class="keyword">using</span> <span class="keyword">where</span>ä½¿ç”¨çš„æ˜¯å…¨è¡¨æ‰«æï¼›åŸå› åœ¨äºaddressä¸ºåŒ—äº¬å¸‚æ—¶åœ¨è¡¨å½“ä¸­å æ¯”è¾ƒå¤šæ‰€ä»¥ç”±mysqlåº•å±‚åˆ¤æ–­å†³å®šä¸èµ°ç´¢å¼•å³å…¨è¡¨æ‰«æä¼šå¿«äºèµ°ç´¢å¼•ï¼›æ‰€ä»¥æ­¤å¤„æ²¡æœ‰ä½¿ç”¨å¾—åˆ°ç´¢å¼•ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> tb_seller use <span class="keyword">index</span>(idx_seller_address) <span class="keyword">where</span> address=<span class="string">'åŒ—äº¬å¸‚'</span>;#æ­¤æ—¶åˆ™èµ°ç´¢å¼•</span><br></pre></td></tr></table></figure><table>  <tr>    <th>id</th>    <th>select_type</th>    <th>table</th>    <th>type</th>    <th>possible_key</th>    <th>key</th>    <th>key_len</th>    <th>ref</th>    <th>rows</th>    <th>Extra</th>  </tr>  <tr>    <td>1</td>    <td>SIMPLE</td>    <td>tb_seller</td>    <td>ALL</td>    <td>idx_seller_address</td>    <td>idx_seller_address</td>    <td>NULL</td>    <td>NULL</td>    <td>12</td>    <td>Using where</td>  </tr></table><h2 id="ä»Šæ—¥å†…å®¹2"><a href="#ä»Šæ—¥å†…å®¹2" class="headerlink" title="ä»Šæ—¥å†…å®¹2"></a>ä»Šæ—¥å†…å®¹2</h2><ul><li>åº”ç”¨ä¼˜åŒ–</li><li>MySQLä¸­æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–</li><li>MySQLå†…å­˜ç®¡ç†ä»¥åŠä¼˜åŒ–</li><li>MySQLå¹¶å‘å‚æ•°è°ƒæ•´</li><li>MySQLé”é—®é¢˜</li><li>å¸¸ç”¨SQLæŠ€å·§</li></ul><h2 id="åº”ç”¨ä¼˜åŒ–"><a href="#åº”ç”¨ä¼˜åŒ–" class="headerlink" title="åº”ç”¨ä¼˜åŒ–"></a>åº”ç”¨ä¼˜åŒ–</h2><p>å‰é¢ç« èŠ‚ï¼Œä»‹ç»äº†å¾ˆå¤šæ•°æ®åº“çš„ä¼˜åŒ–æªæ–½ï¼Œä½†æ˜¯åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç”±äºæ•°æ®åº“æœ¬èº«çš„æ€§èƒ½å±€é™ï¼Œå°±å¿…é¡»å¯¹å‰å°çš„åº”ç”¨è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œæ¥é™ä½æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚  </p><h3 id="ä½¿ç”¨è¿æ¥æ± "><a href="#ä½¿ç”¨è¿æ¥æ± " class="headerlink" title="ä½¿ç”¨è¿æ¥æ± "></a>ä½¿ç”¨è¿æ¥æ± </h3><p>å¯¹äºè®¿é—®æ•°æ®åº“æ¥è¯´ï¼Œå»ºç«‹è¿æ¥çš„ä»£ä»·æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œå› ä¸ºé¢‘ç¹çš„åˆ›å»ºå…³é—­è¿æ¥ï¼Œæ˜¯æ¯”è¾ƒè€—è´¹èµ„æºçš„ï¼Œæœ‰å¿…è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ± ï¼Œä»¥æé«˜è®¿é—®çš„æ€§èƒ½ã€‚  </p><h3 id="å‡å°‘å¯¹MySQLçš„è®¿é—®"><a href="#å‡å°‘å¯¹MySQLçš„è®¿é—®" class="headerlink" title="å‡å°‘å¯¹MySQLçš„è®¿é—®"></a>å‡å°‘å¯¹MySQLçš„è®¿é—®</h3><h4 id="å‡å°‘å¯¹æ•°æ®è¿›è¡Œé‡å¤æ£€ç´¢"><a href="#å‡å°‘å¯¹æ•°æ®è¿›è¡Œé‡å¤æ£€ç´¢" class="headerlink" title="å‡å°‘å¯¹æ•°æ®è¿›è¡Œé‡å¤æ£€ç´¢"></a>å‡å°‘å¯¹æ•°æ®è¿›è¡Œé‡å¤æ£€ç´¢</h4><p>åœ¨ç¼–å†™åº”ç”¨ä»£ç æ—¶ï¼Œéœ€è¦èƒ½å¤Ÿç†è§£å¯¹æ•°æ®åº“çš„è®¿é—®é€»è¾‘ã€‚  </p><p>èƒ½å¤Ÿä¸€æ¬¡è¿æ¥å°±è·å–å¾—åˆ°ç»“æœçš„ï¼Œå°±ä¸ç”¨ä¸¤æ¬¡è¿æ¥ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘å¯¹æ•°æ®åº“æ— ç”¨çš„é‡å¤è¯·æ±‚ã€‚  </p><p>æ¯”å¦‚ï¼Œéœ€è¦è·å–ä¹¦ç±çš„idå’Œnameå­—æ®µï¼Œåˆ™æŸ¥è¯¢å¦‚ä¸‹ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>, <span class="keyword">name</span> <span class="keyword">from</span> tb_book;</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œåœ¨ä¸šåŠ¡é€»è¾‘ä¸­æœ‰éœ€è¦è·å–å¾—åˆ°ä¹¦ç±çŠ¶æ€ä¿¡æ¯ï¼Œåˆ™æŸ¥è¯¢å¦‚ä¸‹ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span> ,<span class="keyword">status</span> <span class="keyword">from</span> tb_book;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå°±éœ€è¦å‘æ•°æ®åº“æäº¤ä¸¤æ¬¡è¯·æ±‚ï¼Œæ•°æ®åº“å°±è¦åšä¸¤æ¬¡æŸ¥è¯¢æ“ä½œã€‚<br>å…¶å®å®Œå…¨å¯ä»¥ç”¨ä¸€æ¡SQLè¯­å¥å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>,<span class="keyword">name</span> ,<span class="keyword">status</span> <span class="keyword">from</span> tb_book;</span><br></pre></td></tr></table></figure><h4 id="å¢åŠ cacheå±‚"><a href="#å¢åŠ cacheå±‚" class="headerlink" title="å¢åŠ cacheå±‚"></a>å¢åŠ cacheå±‚</h4><p>åœ¨åº”ç”¨ä¸­ï¼Œå¯ä»¥åœ¨åº”ç”¨ä¸­å¢åŠ  ç¼“å­˜ å±‚ æ¥è¾¾åˆ°å‡è½»æ•°æ®åº“è´Ÿæ‹…çš„ç›®çš„ã€‚  </p><p>ç¼“å­˜å±‚æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿæœ‰å¾ˆå¤šäº‹å…ˆæ–¹å¼ï¼Œåªè¦è¾¾åˆ°é™ä½æ•°æ®åº“çš„è´Ÿæ‹…åˆèƒ½æ»¡è¶³åº”ç”¨éœ€æ±‚å°±å¯ä»¥ã€‚  </p><p>å› æ­¤å¯ä»¥éƒ¨åˆ†æ•°æ®ä»æ•°æ®åº“ä¸­æŠ½å–å‡ºæ¥æ”¾åˆ°åº”ç”¨ç«¯ä»¥æ–‡æœ¬æ–¹å¼å­˜å‚¨ï¼Œæˆ–è€…ä½¿ç”¨æ¡†æ¶ï¼ˆMybatisï¼ŒHibernateï¼‰æä¾›çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜ï¼Œæˆ–è€…ä½¿ç”¨redisæ•°æ®åº“æ¥ç¼“å­˜æ•°æ®ã€‚  </p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>è´Ÿè½½å‡è¡¡æ˜¯åº”ç”¨ä¸­ä½¿ç”¨éå¸¸æ™®éçš„ä¸€ç§ä¼˜åŒ–æ–¹å¼ã€‚  </p><p>è´Ÿè½½å‡è¡¡çš„æœºåˆ¶å°±æ˜¯åˆ©ç”¨æŸç§å‡è¡¡ç®—æ³•ï¼Œå°†å›ºå®šçš„è´Ÿè½½é‡åˆ†ä¸åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¸€æ¬¡æ¥é™ä½å•å°æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œè¾¾åˆ°ä¼˜åŒ–çš„æ•ˆæœã€‚  </p><h4 id="åˆ©ç”¨MySQLå¤åˆ¶åˆ†æµæŸ¥è¯¢"><a href="#åˆ©ç”¨MySQLå¤åˆ¶åˆ†æµæŸ¥è¯¢" class="headerlink" title="åˆ©ç”¨MySQLå¤åˆ¶åˆ†æµæŸ¥è¯¢"></a>åˆ©ç”¨MySQLå¤åˆ¶åˆ†æµæŸ¥è¯¢</h4><p>é€šè¿‡MySQLçš„ä¸»ä»å¤åˆ¶ï¼Œå®ç°è¯»å†™åˆ†ç¦»ï¼Œä½¿å¾—å¢åˆ æ”¹æ“ä½œèµ°ä¸»èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ“ä½œèµ°ä»ç»“ç‚¹ï¼Œä»è€Œå¯ä»¥é™ä½å•å°æœåŠ¡å™¨çš„è¯»å†™å‹åŠ›ã€‚  </p><h4 id="é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„"><a href="#é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„" class="headerlink" title="é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„"></a>é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„</h4><p>åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„é€‚åˆå¤§æ•°æ®é‡ã€è´Ÿè½½é«˜çš„æƒ…å†µï¼Œå®ƒç”±è‰¯å¥½çš„æ‹“å±•æ€§å’Œé«˜å¯ç”¨æ€§ã€‚<br>é€šè¿‡åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´åˆ†å¸ƒæ•°æ®ï¼Œå¯ä»¥å®ç°åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´çš„è´Ÿè½½å‡è¡¡ï¼Œæé«˜è®¿é—®æ•ˆç‡ã€‚  </p><h2 id="æŸ¥è¯¢ç¼“å­˜-æ¦‚è¿°åŠæµç¨‹"><a href="#æŸ¥è¯¢ç¼“å­˜-æ¦‚è¿°åŠæµç¨‹" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜ - æ¦‚è¿°åŠæµç¨‹"></a>æŸ¥è¯¢ç¼“å­˜ - æ¦‚è¿°åŠæµç¨‹</h2><h3 id="Mysqlä¸­æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–-æ¦‚è¿°"><a href="#Mysqlä¸­æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–-æ¦‚è¿°" class="headerlink" title="Mysqlä¸­æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–-æ¦‚è¿°"></a>Mysqlä¸­æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–-æ¦‚è¿°</h3><p>å¼€å¯mysqlçš„æŸ¥è¯¢ç¼“å­˜ï¼Œå½“æ‰§è¡Œå®Œå…¨ç›¸åŒçš„SQLè¯­å¥çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ç»“æœï¼›å½“æ•°æ®è¢«ä¿®æ”¹ï¼Œä¹‹å‰çš„ç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œä¿®æ”¹æ¯”è¾ƒé¢‘ç¹çš„è¡¨ä¸é€‚åˆåšæŸ¥è¯¢ç¼“å­˜ã€‚  </p><h3 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h3><ol><li>å®¢æˆ·ç«¯å‘é€ä¸€æ¡æŸ¥è¯¢SQLç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨å…ˆä¼šæ£€æŸ¥æŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™ç«‹å³è¿”å›å­˜å‚¨åœ¨ç¼“å­˜ä¸­çš„ç»“æœã€‚å¦åˆ™è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</li><li>æœåŠ¡å™¨ç«¯è¿›è¡ŒSQLè§£æã€é¢„å¤„ç†ï¼Œå†ç”±ä¼˜åŒ–å™¨ç”Ÿæˆå¯¹åº”çš„æ‰§è¡Œè®¡åˆ’ï¼›</li><li>MySQLæ ¹æ®ä¼˜åŒ–å™¨ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’ï¼Œè°ƒç”¨å­˜å‚¨å¼•æ“çš„APIæ¥æ‰§è¡ŒæŸ¥è¯¢ï¼›</li><li>å°†ç»“æœç¼“å­˜å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼›</li></ol><h2 id="æŸ¥è¯¢ç¼“å­˜-é…ç½®å‚æ•°"><a href="#æŸ¥è¯¢ç¼“å­˜-é…ç½®å‚æ•°" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜ - é…ç½®å‚æ•°"></a>æŸ¥è¯¢ç¼“å­˜ - é…ç½®å‚æ•°</h2><h3 id="æŸ¥è¯¢ç¼“å­˜é…ç½®"><a href="#æŸ¥è¯¢ç¼“å­˜é…ç½®" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜é…ç½®"></a>æŸ¥è¯¢ç¼“å­˜é…ç½®</h3><ol><li>æŸ¥çœ‹å½“å‰çš„MySQLæ•°æ®åº“æ˜¯å¦æ”¯æŒæŸ¥è¯¢ç¼“å­˜ï¼š  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p  </span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'have_query_cache'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>have_query_cache</td>    <td>YES</td>  </tr></table><ol start="2"><li>æŸ¥çœ‹å½“å‰MySQLæ˜¯å¦å¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ï¼š  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'query_cache_type'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>query_cache_type</td>    <td>OFF(å…³é—­)</td>  </tr></table><ol start="3"><li>æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜çš„å ç”¨å¤§å°ï¼ˆå»ºè®®æŒ‰ç…§1024å€æ•°è¿›è¡Œå¢å¤§ï¼‰ï¼š  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'query_cache_size'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>query_cache_size</td>    <td>1048576ï¼ˆå•ä½ä¸ºå­—èŠ‚ï¼Œå ç”¨å†…å­˜ç©ºé—´çº¦ä¸ºï¼š1048576/1024/1024çº¦ä¸º 1Mçš„å†…å­˜ç©ºé—´ï¼‰</td>  </tr></table><ol start="4"><li>æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜çš„çŠ¶æ€å˜é‡</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">STATUS</span> <span class="keyword">LIKE</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr>    <td>Qcache_hits</td>    <td>13</td>  </tr>  <tr>    <td>Qcache_inserts</td>    <td>6</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>16</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>4</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> demo_02;<span class="comment">#åˆ‡æ¢æ•°æ®åº“ä¹Ÿç®—æ˜¯ä¸€æ¬¡æŸ¥è¯¢mysqlåº•å±‚å½“ä¸­</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—è´¹æ—¶é—´2.76 second</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—è´¹æ—¶é—´2.53 second</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocksï¼ˆå¯ç”¨çš„å†…å­˜å—çš„ä¸ªæ•°ï¼‰</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memoryï¼ˆå¯ç”¨çš„å†…å­˜ç©ºé—´ï¼‰</td>    <td>1038344</td>  </tr>  <tr>    <td>Qcache_hitsï¼ˆæŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­æ¬¡æ•°ï¼‰</td>    <td>13</td>  </tr>  <tr>    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜å½“ä¸­çš„æ¬¡æ•°ï¼‰</td>    <td>6</td>  </tr>  <tr>    <td>Qcache_lowmen_prunesï¼ˆå¦‚æœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œå°†å†…å­˜ä¸­æ•°æ®ç§»å‡ºç¼“å­˜ç©ºé—´æ¬¡æ•°ï¼‰</td>    <td>0</td>  </tr>  <tr>    <td style="color:red;font-weight:bolder;">Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜æ¬¡æ•°)</td>    <td style="color:red;font-weight:bolder;">19</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>4</td>  </tr></table><table>  <tr>    <th>å‚æ•°</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>æŸ¥è¯¢ç¼“å­˜ä¸­çš„å¯ç”¨å†…å­˜å—æ•°</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>æŸ¥è¯¢ç¼“å­˜çš„å¯ç”¨å†…å­˜é‡</td>  </tr><tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>æŸ¥è¯¢ç¼“å­˜å‘½ä¸­æ•°</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>æ·»åŠ åˆ°æŸ¥è¯¢ç¼“å­˜çš„æŸ¥è¯¢æ•°</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>ç”±äºå†…å­˜ä¸è¶³è€Œä»æŸ¥è¯¢ç¼“å­˜ä¸­åˆ é™¤çš„æŸ¥è¯¢æ•°</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached</td>    <td>éç¼“å­˜æŸ¥è¯¢çš„æ•°é‡ï¼ˆç”±äºquery_cache_typeè®¾ç½®è€Œæ— æ³•ç¼“å­˜æˆ–è€…æœªç¼“å­˜ï¼‰</td>  </tr>  <tr>    <td>Qcache_queries_in_cache</td>    <td>æŸ¥è¯¢ç¼“å­˜ä¸­æ³¨å†Œçš„æŸ¥è¯¢æ•°</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>æŸ¥è¯¢ç¼“å­˜ä¸­çš„å—æ€»æ•°</td>  </tr></table><h2 id="æŸ¥è¯¢ç¼“å­˜-å¼€å¯æŸ¥è¯¢ç¼“å­˜"><a href="#æŸ¥è¯¢ç¼“å­˜-å¼€å¯æŸ¥è¯¢ç¼“å­˜" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜ - å¼€å¯æŸ¥è¯¢ç¼“å­˜"></a>æŸ¥è¯¢ç¼“å­˜ - å¼€å¯æŸ¥è¯¢ç¼“å­˜</h2><p>MySQLçš„æŸ¥è¯¢ç¼“å­˜é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®å‚æ•° query_cache_typeï¼Œæ¥å¼€å¯æŸ¥è¯¢ç¼“å­˜ã€‚  </p><p>query_cache_type è¯¥å‚æ•°çš„å¯å–å€¼æœ‰ä¸‰ä¸ªï¼š  </p><table>  <tr>    <th>å€¼</th>    <th>å®šä¹‰</th>  </tr>  <tr>    <td>OFF æˆ– 0</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½å…³é—­</td>  </tr>    <tr>    <td>ON æˆ– 1</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½æ‰“å¼€ï¼ŒSELECTçš„ç»“æœç¬¦åˆç¼“å­˜æ¡ä»¶å³ä¼šç¼“å­˜ï¼›å¦åˆ™ä¸äºˆç¼“å­˜ï¼›æ˜¾å¼æŒ‡å®šSQL_NO_CACHEï¼Œåˆ™ä¸äºˆç¼“å­˜</td>  </tr>    <tr>    <td> DEMAND æˆ– 2</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½æŒ‰éœ€è¿›è¡Œï¼Œ<span style="color:red;font-weight:bolder;">æ˜¾å¼æŒ‡å®š SQL_CACHE çš„SELECTè¯­å¥æ‰ä¼šç¼“å­˜</span>ï¼›å…¶ä»–å‡ä¸äºˆç¼“å­˜</td>  </tr></table><p>åœ¨ /usr/my.cnfé…ç½®ä¸­ï¼Œå¢åŠ ä»¥ä¸‹é…ç½®ï¼š  </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨å¼€å¯mysqlçš„æŸ¥è¯¢ç¼“å­˜</span></span><br><span class="line"><span class="attr">query_cache_type</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæ¯•ä¹‹åï¼Œé‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆï¼›  </p><p>ç„¶åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡ŒSQLè¯­å¥è¿›è¡ŒéªŒè¯ï¼Œæ‰§è¡Œä¸€æ¡æ¯”è¾ƒè€—æ—¶çš„SQLè¯­å¥ï¼Œç„¶åå†æ‰§è¡Œå¤šæ¬¡ï¼ŒæŸ¥çœ‹åé¢å‡ æ¬¡çš„æ‰§è¡Œæ—¶é—´ï¼›  </p><p>è·å–é€šè¿‡æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜çš„ç¼“å­˜å‘½ä¸­æ•°ï¼Œæ¥åˆ¤å®šæ˜¯å¦èµ°äº†æŸ¥è¯¢ç¼“å­˜ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/my.cnf</span><br><span class="line">query_cache_type:1</span><br><span class="line"></span><br><span class="line">service mysql restart<span class="comment">#é‡å¯mysql</span></span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> demo_02;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 2.58 second</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 second</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 second</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="string">'Qcache'</span>%;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>4</td>  </tr>  <tr>    <td>Qcache_inserts</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr>    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>2</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>4</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 second</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_inserts</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr>    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>2</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>4</td>  </tr></table><h2 id="æŸ¥è¯¢ç¼“å­˜-SELECTé€‰é¡¹"><a href="#æŸ¥è¯¢ç¼“å­˜-SELECTé€‰é¡¹" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜ - SELECTé€‰é¡¹"></a>æŸ¥è¯¢ç¼“å­˜ - SELECTé€‰é¡¹</h2><p>å¯ä»¥åœ¨SELECTè¯­å¥ä¸­æŒ‡å®šä¸¤ä¸ªä¸æŸ¥è¯¢ç¼“å­˜ç›¸å…³çš„é€‰é¡¹ï¼š  </p><ul><li>SQL_CACHEï¼šå¦‚æœæŸ¥è¯¢ç»“æœæ˜¯å¯ç¼“å­˜çš„ï¼Œå¹¶ä¸”query_cache_type ç³»ç»Ÿå˜é‡çš„å€¼ä¸ºONæˆ–è€…DEMANDï¼Œåˆ™ç¼“å­˜æŸ¥è¯¢ç»“æœï¼›  </li><li>SQL_NO_CACHE: æœåŠ¡å™¨ä¸ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œå®ƒæ—¢ä¸æ£€æŸ¥æŸ¥è¯¢ç¼“å­˜ï¼Œä¹Ÿä¸æ£€æŸ¥ç»“æœæ˜¯å¦å·²ç¼“å­˜ï¼Œä¹Ÿä¸ç¼“å­˜æŸ¥è¯¢ç»“æœã€‚  </li></ul><p>ä¾‹å­ï¼š  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT SQL_CACHE id, name <span class="keyword">FROM</span> customer;</span><br><span class="line">SELECT SQL_NO_CACHE id,name <span class="keyword">FROM</span> customer;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item  <span class="keyword">limit</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span>  <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>5</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr>    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>2</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>8</td>  </tr></table><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SQL_NO_CACHE <span class="built_in">title</span>, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> id=<span class="number">2</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>6</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜çš„æ•°é‡ï¼‰</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>2</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>8</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SQL_NO_CACHE title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>6</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜çš„æ•°é‡ï¼‰</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>8</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SQL_NO_CACHE title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> SQL_NO_CACHE title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1035936</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>6</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜çš„æ•°é‡ï¼‰</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>3</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>8</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">SQL_CACHE</span> title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">SQL_CACHE</span> title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>7</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜çš„æ•°é‡ï¼‰</td>    <td>4</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>4</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>10</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">SQL_CACHE</span> title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">SQL_CACHE</span> title, sellerid <span class="keyword">from</span> tb_item <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1038344</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>9</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_insertsï¼ˆæ·»åŠ åˆ°ç¼“å­˜çš„æ•°é‡ï¼‰</td>    <td>4</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>4</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>10</td>  </tr></table><h2 id="æŸ¥è¯¢ç¼“å­˜-å¤±æ•ˆåœºæ™¯"><a href="#æŸ¥è¯¢ç¼“å­˜-å¤±æ•ˆåœºæ™¯" class="headerlink" title="æŸ¥è¯¢ç¼“å­˜ - å¤±æ•ˆåœºæ™¯"></a>æŸ¥è¯¢ç¼“å­˜ - å¤±æ•ˆåœºæ™¯</h2><table>  <tr>    <th>å€¼</th>    <th>å®šä¹‰</th>  </tr>  <tr>    <td>OFF æˆ– 0</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½å…³é—­</td>  </tr>    <tr>    <td>ON æˆ– 1</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½æ‰“å¼€ï¼Œ<span style="color:red;font-weight:bolder;">SELECTçš„ç»“æœç¬¦åˆç¼“å­˜æ¡ä»¶å³ä¼šç¼“å­˜</span>ï¼›å¦åˆ™ä¸äºˆç¼“å­˜ï¼›æ˜¾å¼æŒ‡å®šSQL_NO_CACHEï¼Œåˆ™ä¸äºˆç¼“å­˜</td>  </tr>    <tr>    <td> DEMAND æˆ– 2</td>    <td>æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½æŒ‰éœ€è¿›è¡Œï¼Œæ˜¾å¼æŒ‡å®š SQL_CACHE çš„SELECTè¯­å¥æ‰ä¼šç¼“å­˜ï¼›å…¶ä»–å‡ä¸äºˆç¼“å­˜</td>  </tr></table><p>å¼€å¯mysqlçš„æŸ¥è¯¢ç¼“å­˜ï¼Œå½“æ‰§è¡Œ<strong>å®Œå…¨ç›¸åŒçš„SQLè¯­å¥</strong>çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ç»“æœï¼›å½“æ•°æ®è¢«ä¿®æ”¹ï¼Œä¹‹å‰çš„ç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œä¿®æ”¹æ¯”è¾ƒé¢‘ç¹çš„è¡¨ä¸é€‚åˆåšæŸ¥è¯¢ç¼“å­˜ã€‚</p><ol><li>SQLè¯­å¥ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¦æƒ³å‘½ä¸­æŸ¥è¯¢ç¼“å­˜ï¼ŒæŸ¥è¯¢çš„SQLè¯­å¥å¿…é¡»ä¸€è‡´ã€‚  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#SQL1ï¼š</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#3000000 è€—æ—¶0.00 second</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#SQL2ï¼š</span></span><br><span class="line"><span class="keyword">Select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#3000000 è€—æ—¶2.79 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1033888</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>11</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr>    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>12</td>  </tr></table><ol start="2"><li>å½“æŸ¥è¯¢è¯­å¥ä¸­æœ‰ä¸€äº›ä¸ç¡®å®šçš„æ—¶å€™ï¼Œåˆ™ä¸ä¼šç¼“å­˜ã€‚å¦‚ï¼šnow()ã€current_date()ã€curdate()ã€curtime()ã€rand()ã€uuid()ã€user()ã€database()ï¼›  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>(); <span class="comment"># è€—æ—¶ 0.01 second</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>(); <span class="comment"># è€—æ—¶ 0.01 secondï¼›æ—¶é—´æ˜¯å‘ç”Ÿäº†å˜åŒ–çš„ï¼›å³ä¸ä¼šèµ°ç¼“å­˜</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1033888</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>11</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>7</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>12</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#SQL1ï¼š</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_item <span class="keyword">where</span> updatetime &lt; <span class="keyword">now</span>() <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#SQL2ï¼š</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">#SQL3ï¼š</span></span><br><span class="line"><span class="keyword">select</span> databse();</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸é€‚ç”¨ä»»ä½•è¡¨æŸ¥è¯¢è¯­å¥ã€‚  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'Hello'</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1033888</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>11</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>8</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>12</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'A'</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>æŸ¥è¯¢mysqlã€information_schema æˆ–è€… performance_schema æ•°æ®åº“ä¸­çš„è¡¨æ—¶ï¼Œä¸ä¼šèµ°æŸ¥è¯¢ç¼“å­˜ã€‚  </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"><span class="comment">#information_schema</span></span><br><span class="line"><span class="comment">#mysql</span></span><br><span class="line"><span class="comment">#performance_schema</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> information_schema.engines;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1033888</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>11</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>9</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>12</td>  </tr></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> information_schema.engines;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Qcache%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Qcache_free_blocks</td>    <td>1</td>  </tr>  <tr>    <td>Qcache_free_memory</td>    <td>1033888</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_hits</td>    <td>11</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_inserts</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_lowmen_prunes</td>    <td>0</td>  </tr>  <tr style="color:red;font-weight:bolder;">    <td>Qcache_not_cached(å½“å‰æŸ¥è¯¢æ²¡æœ‰è¿›è¡Œç¼“å­˜)</td>    <td>10</td>  </tr>  <tr>    <td>Qcache_queryies_in_cache</td>    <td>5</td>  </tr>  <tr>    <td>Qcache_total_blocks</td>    <td>12</td>  </tr></table><ol start="5"><li><p>åœ¨å­˜å‚¨çš„å‡½æ•°ï¼Œè§¦å‘å™¨æˆ–è€…æ—¶é—´çš„ä¸»ä½“å†…æ‰§è¡Œçš„æŸ¥è¯¢ï¼›</p></li><li><p>å¦‚æœè¡¨æ›´æ”¹ï¼Œåˆ™ä½¿ç”¨è¯¥è¡¨çš„æ‰€æœ‰é«˜é€Ÿç¼“å­˜æŸ¥è¯¢éƒ½å°†å˜ä¸ºæ— æ•ˆå¹¶ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤ã€‚è¿™åŒ…æ‹¬ä½¿ç”¨<strong>MERGE</strong>æ˜ å°„åˆ°å·²æ›´æ”¹è¡¨çš„æŸ¥è¯¢ã€‚ä¸€ä¸ªè¡¨å¯ä»¥è¢«è®¸å¤šç±»å‹çš„è¯­å¥ï¼Œå¦‚è¢«æ”¹å˜INSERTã€UPDATEã€DELETEã€TRUNCATE TABLEã€ALTER TABLEã€DROP TABLE æˆ–è€… DROP DATABASEã€‚  </p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> tb_item <span class="keyword">set</span> title=<span class="string">'test1'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 2.67 secondï¼›è¯¥SQLå¤±æ•ˆï¼›ä½†æ˜¯å¤±æ•ˆçš„åŒæ—¶åˆå»è¿›è¡Œäº†ç¼“å­˜ï¼›å½“å‰æŸ¥è¯¢æ—¶å¹¶æœªç¼“å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> tb_item;<span class="comment">#è€—æ—¶ 0.00 secondï¼›æ­¤æ—¶å†å»æŸ¥è¯¢ï¼›å³æŸ¥è¯¢çš„ç¼“å­˜åŒºå†…çš„å†…å®¹</span></span><br></pre></td></tr></table></figure><h2 id="å†…å­˜ä¼˜åŒ–-ä¼˜åŒ–åŸåˆ™"><a href="#å†…å­˜ä¼˜åŒ–-ä¼˜åŒ–åŸåˆ™" class="headerlink" title="å†…å­˜ä¼˜åŒ– - ä¼˜åŒ–åŸåˆ™"></a>å†…å­˜ä¼˜åŒ– - ä¼˜åŒ–åŸåˆ™</h2><h3 id="å†…å­˜ä¼˜åŒ–åŸåˆ™"><a href="#å†…å­˜ä¼˜åŒ–åŸåˆ™" class="headerlink" title="å†…å­˜ä¼˜åŒ–åŸåˆ™"></a>å†…å­˜ä¼˜åŒ–åŸåˆ™</h3><ol><li>å°†å°½é‡å¤šçš„å†…å­˜åˆ†é…ç»™MySQLåšç¼“å­˜(æé«˜mysqlçš„è®¿é—®æ•ˆç‡)ï¼Œä½†è¦ç»™æ“ä½œç³»ç»Ÿå’Œå…¶ä»–ç¨‹åºé¢„ç•™è¶³å¤Ÿå†…å­˜ï¼›</li><li>MyISAMå­˜å‚¨å¼•æ“çš„æ•°æ®æ–‡ä»¶è¯»å–ä¾èµ–äºæ“ä½œç³»ç»Ÿè‡ªèº«çš„I/Oç¼“å­˜ï¼Œå› æ­¤ï¼Œå¦‚æœæœ‰MyISAMè¡¨ï¼Œå°±è¦é¢„ç•™æ›´å¤šçš„å†…å­˜ç»™æ“ä½œç³»ç»ŸåšI/Oç¼“å­˜ã€‚</li><li>æ’åºåŒºã€è¿æ¥åŒºç­‰ç¼“å­˜æ˜¯åˆ†é…ç»™æ¯ä¸ªæ•°æ®åº“ä¼šè¯ï¼ˆsessionï¼‰ä¸“ç”¨çš„ï¼Œå…¶é»˜è®¤å€¼çš„è®¾ç½®è¦æ ¹æ®æœ€å¤§è¿æ¥æ•°åˆç†åˆ†é…ï¼Œå¦‚æœè®¾ç½®å¤ªå¤§ï¼Œä¸ä½†æµªè´¹èµ„æºï¼Œè€Œä¸”åœ¨å¹¶å‘è¿æ¥è¾ƒé«˜æ—¶ä¼šå¯¼è‡´ç‰©ç†å†…å­˜è€—å°½ã€‚</li></ol><h2 id="å†…å­˜ä¼˜åŒ–-MyISAMå†…å­˜ä¼˜åŒ–"><a href="#å†…å­˜ä¼˜åŒ–-MyISAMå†…å­˜ä¼˜åŒ–" class="headerlink" title="å†…å­˜ä¼˜åŒ– - MyISAMå†…å­˜ä¼˜åŒ–"></a>å†…å­˜ä¼˜åŒ– - MyISAMå†…å­˜ä¼˜åŒ–</h2><p>MyISAMçš„ç¼“å­˜æœºåˆ¶ï¼š  </p><p>MyISAMå­˜å‚¨å¼•æ“ä½¿ç”¨key_bufferç¼“å­˜ç´¢å¼•å—ï¼ˆæ²¡æœ‰ç¼“å­˜æ•°æ®å—ï¼‰ï¼ŒåŠ é€ŸMyISAMç´¢å¼•çš„è¯»å†™é€Ÿåº¦ï¼Œå¯¹äºMyISAMè¡¨çš„æ•°æ®å—ï¼Œmysqlæ²¡æœ‰ç‰¹åˆ«çš„ç¼“å­˜æœºåˆ¶ï¼Œå®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„I/Oç¼“å­˜ã€‚  </p><p><strong>key_buffer_size</strong>  </p><p>key_buffer_sizeå†³å®šMyISAMç´¢å¼•å—ç¼“å­˜åŒºçš„å¤§å°ï¼Œç›´æ¥å½±å“åˆ°MyISAMè¡¨çš„å­˜å–æ•ˆç‡ã€‚  </p><p>å¯ä»¥åœ¨mysqlå‚æ•°æ–‡ä»¶ä¸­è®¾ç½®key_buffer_sizeçš„å€¼ï¼Œå¯¹äºä¸€èˆ¬MyISAMæ•°æ®åº“ï¼Œå»ºè®®è‡³å°‘å°†1/4å¯ç”¨å†…å­˜åˆ†é…ç»™key_buffer_sizeã€‚  </p><p>åœ¨/usr/my.cnf ä¸­åšå¦‚ä¸‹é…ç½®ï¼š  </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">key_buffer_size</span>=<span class="number">512</span>M</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'key_buffer_size'</span>;<span class="comment">#mysql å‘½ä»¤è¡Œ</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>key_buffer_size</td>    <td>8388608(å•ä½ä¸ºå­—èŠ‚ï¼›é»˜è®¤å¤§å°)</td>  </tr></table><p><strong>read_buffer_size</strong>  </p><p>å¦‚æœéœ€è¦ç»å¸¸é¡ºåºæ‰«æMyISAMè¡¨ï¼Œå¯ä»¥é€šè¿‡å¢å¤§read_buffer_sizeçš„å€¼æ¥æ”¹å–„æ€§èƒ½ã€‚  </p><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯read_buffer_sizeæ˜¯æ¯ä¸ªsessionç‹¬å çš„ï¼Œå¦‚æœé»˜è®¤å€¼è®¾ç½®å¤ªå¤§ï¼Œå°±ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚  </p><p><strong>read_rnd_buffer_size</strong>  </p><p>å¯¹äºéœ€è¦åšæ’åºçš„MyISAMè¡¨çš„æŸ¥è¯¢ï¼Œå¦‚å¸¦æœ‰ order by å­å¥çš„SQLï¼Œé€‚å½“å¢åŠ read_rnd_buffer_sizeçš„å€¼ï¼Œå¯ä»¥æ”¹å–„æ­¤ç±»çš„SQLæ€§èƒ½ã€‚  </p><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯read_rnd_buffer_size æ˜¯æ¯ä¸ªsessionç‹¬å çš„ï¼Œå¦‚æœé»˜è®¤å€¼è®¾ç½®å¤ªå¤§ï¼Œå°±ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚  </p><h2 id="å†…å­˜ä¼˜åŒ–-InnoDBå†…å­˜ä¼˜åŒ–"><a href="#å†…å­˜ä¼˜åŒ–-InnoDBå†…å­˜ä¼˜åŒ–" class="headerlink" title="å†…å­˜ä¼˜åŒ– - InnoDBå†…å­˜ä¼˜åŒ–"></a>å†…å­˜ä¼˜åŒ– - InnoDBå†…å­˜ä¼˜åŒ–</h2><p>innodbçš„ç¼“å­˜æœºåˆ¶ï¼š<br>InnoDBç”¨ä¸€å—å†…å­˜åŒºåšIOç¼“å­˜æ± ï¼Œè¯¥ç¼“å­˜æ± ä¸ä»…ç”¨æ¥ç¼“å­˜InnoDBçš„ç´¢å¼•å—ï¼Œè€Œä¸”ä¹Ÿç”¨æ¥ç¼“å­˜InnoDBçš„æ•°æ®å—ã€‚  </p><p><strong>innodb_buffer_pool_size</strong>  </p><p>è¯¥å˜é‡å†³å®šäº†innodbå­˜å‚¨å¼•æ“è¡¨æ•°æ®å’Œç´¢å¼•æ•°æ®çš„æœ€å¤§ç¼“å­˜åŒºå¤§å°ã€‚<br>åœ¨ä¿è¯æ“ä½œç³»ç»Ÿä»¥åŠå…¶ä»–ç¨‹åºæœ‰è¶³å¤Ÿå†…å­˜å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œinnodb_buffer_pool_sizeçš„å€¼è¶Šå¤§ï¼Œç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼Œè®¿é—®innodbè¡¨çš„éœ€è¦çš„ç£ç›˜I/Oå°±è¶Šå°‘ï¼Œæ€§èƒ½ä¹Ÿå°±è¶Šé«˜ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'innodb_buffer_pool_size'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>innodb_buffer_pool_size</td>    <td>134217728(å•ä½ä¸ºå­—èŠ‚ï¼›é»˜è®¤å¤§å°128Mï¼›134217728/1024-->131072ï¼ˆæ¢ç®—æˆBï¼‰ï¼Œ134217728/1024/1024-->128ï¼ˆæ¢ç®—æˆMï¼‰ï¼›)</td>  </tr></table><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/<span class="keyword">my</span>.cnf</span><br><span class="line"><span class="comment"># innodb_buffer_pool_size=512M #ä¿®æ”¹å†…å®¹</span></span><br></pre></td></tr></table></figure><p><strong>innodb_log_buffer_size</strong>  </p><p>å†³å®šäº†innodbé‡åšæ—¥å¿—ç¼“å­˜çš„å¤§å°ï¼Œå¯¹äºé¿å…äº§ç”Ÿå¤§é‡æ›´æ–°è®°å½•çš„å¤§äº‹åŠ¡ï¼Œå¢åŠ innodb_log_buffer_sizeçš„å¤§å°ï¼Œå¯ä»¥é¿å…innodbåœ¨äº‹åŠ¡æäº¤å‰å°±æ‰§è¡Œä¸å¿…è¦çš„æ—¥å¿—å†™å…¥ç£ç›˜æ“ä½œã€‚  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/my.cnf</span><br><span class="line"><span class="comment"># innodb_log_buffer_size=10M #ä¿®æ”¹å†…å®¹</span></span><br><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><h2 id="å¹¶å‘å‚æ•°è°ƒæ•´"><a href="#å¹¶å‘å‚æ•°è°ƒæ•´" class="headerlink" title="å¹¶å‘å‚æ•°è°ƒæ•´"></a>å¹¶å‘å‚æ•°è°ƒæ•´</h2><h3 id="mysqlå¹¶å‘å‚æ•°è°ƒæ•´"><a href="#mysqlå¹¶å‘å‚æ•°è°ƒæ•´" class="headerlink" title="mysqlå¹¶å‘å‚æ•°è°ƒæ•´"></a>mysqlå¹¶å‘å‚æ•°è°ƒæ•´</h3><p>ä»å®ç°ä¸Šæ¥è¯´ï¼ŒMySQL Serveræ˜¯å¤šçº¿ç¨‹ç»“æ„ï¼ŒåŒ…æ‹¬åå°çº¿ç¨‹å’Œå®¢æˆ·æœåŠ¡çº¿ç¨‹ã€‚  </p><p>å¤šçº¿ç¨‹å¯ä»¥æœ‰æ•ˆåˆ©ç”¨æœåŠ¡å™¨èµ„æºï¼Œæé«˜æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½ã€‚  </p><p>åœ¨mysqlä¸­ï¼Œæ§åˆ¶å¹¶å‘è¿æ¥å’Œçº¿ç¨‹çš„ä¸»è¦å‚æ•°åŒ…æ‹¬ max_connectionsã€back_logã€thread_cache_sizeã€table_open_sizeï¼›  </p><h4 id="max-connectionsï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰"><a href="#max-connectionsï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰" class="headerlink" title="max_connectionsï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰"></a>max_connectionsï¼ˆæœ€å¤§è¿æ¥æ•°ï¼‰</h4><p>é‡‡ç”¨max_connections æ§åˆ¶å…è®¸è¿æ¥åˆ°MySQLæ•°æ®åº“çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤å€¼æ˜¯151ã€‚  </p><p>å¦‚æœçŠ¶æ€å˜é‡ connection_errors_max_connections ä¸ä¸ºé›¶ï¼Œå¹¶ä¸”ä¸€ç›´å¢é•¿ï¼Œåˆ™è¯´æ˜ä¸æ–­æœ‰è¿æ¥è¯·æ±‚å› æ•°æ®åº“è¿æ¥æ•°å·²ç»è¾¾åˆ°å…è®¸æœ€å¤§å€¼è€Œå¤±è´¥ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘å¢å¤§max_connectionsçš„å€¼ã€‚  </p><p>MySQLæœ€å¤§å¯æ”¯æŒçš„è¿æ¥æ•°ï¼Œå–å†³äºå¾ˆå¤šå› ç´ ï¼ŒåŒ…æ‹¬ç»™å®šæ“ä½œç³»ç»Ÿå¹³å°çš„çº¿ç¨‹åº“çš„è´¨é‡ã€å†…å­˜å¤§å°ã€æ¯ä¸ªè¿æ¥çš„è´Ÿè·ã€CPUçš„å¤„ç†é€Ÿåº¦ï¼ŒæœŸæœ›çš„å“åº”æ—¶é—´ç­‰ã€‚  </p><p>åœ¨Linuxå¹³å°ä¸‹ï¼Œæ€§èƒ½å¥½çš„æœåŠ¡å™¨ï¼Œæ”¯æŒ500-1000ä¸ªè¿æ¥éƒ½ä¸æ˜¯éš¾äº‹ï¼Œéœ€è¦æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è¿›è¡Œè¯„ä¼°è®¾å®šã€‚  </p><h4 id="back-log"><a href="#back-log" class="headerlink" title="back_log"></a>back_log</h4><p>back_log å‚æ•°æ§åˆ¶MySQLç›‘å¬TCPç«¯å£æ—¶è®¾ç½®çš„ç§¯å‹è¯·æ±‚æ ˆå¤§å°ã€‚  </p><p>å¦‚æœmysqlçš„è¿æ¥æ•°è¾¾åˆ°max_connectionsæ—¶ï¼Œæ–°æ¥çš„è¯·æ±‚å°†ä¼šè¢«å­˜åœ¨å †æ ˆä¸­ï¼Œä»¥ç­‰å¾…æŸä¸€è¿æ¥é‡Šæ”¾èµ„æºï¼Œè¯¥å †æ ˆçš„æ•°é‡å³back_logï¼Œå¦‚æœç­‰å¾…è¿æ¥çš„æ•°é‡è¶…è¿‡back_logï¼Œå°†ä¸è¢«æˆäºˆè¿æ¥èµ„æºï¼Œå°†ä¼šæŠ¥é”™ã€‚  </p><p>5.6.6ç‰ˆæœ¬ä¹‹å‰é»˜è®¤å€¼ä¸º50ï¼Œä¹‹åçš„ç‰ˆæœ¬é»˜è®¤ä¸º50+ï¼ˆmax_connections/5ï¼‰ï¼Œä½†æœ€å¤§ä¸è¶…è¿‡900ã€‚  </p><p>å¦‚æœéœ€è¦æ•°æ®åº“åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…å¤„ç†å¤§é‡è¿æ¥è¯·æ±‚ï¼Œå¯ä»¥è€ƒè™‘é€‚å½“å¢å¤§back_logçš„å€¼ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'back_log'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>back_log</td>    <td>80(é»˜è®¤ä¸ªæ•°)</td>  </tr></table><h4 id="table-open-cache"><a href="#table-open-cache" class="headerlink" title="table_open_cache"></a>table_open_cache</h4><p>è¯¥å‚æ•°ç”¨æ¥æ§åˆ¶æ‰€æœ‰SQLè¯­å¥æ‰§è¡Œçº¿ç¨‹å¯æ‰“å¼€è¡¨ç¼“å­˜çš„æ•°é‡ï¼Œè€Œåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œæ¯ä¸€ä¸ªSQLæ‰§è¡Œçº¿ç¨‹è‡³å°‘è¦æ‰“å¼€ä¸€ä¸ªè¡¨ç¼“å­˜ï¼Œè¯¥å‚æ•°çš„å€¼åº”è¯¥æ ¹æ®è®¾ç½®çš„æœ€å¤§è¿æ¥æ•°max_connections ä»¥åŠæ¯ä¸ªè¿æ¥æ‰§è¡Œå…³è”æŸ¥è¯¢ä¸­æ¶‰åŠçš„ç™½é¸¥çš„æœ€å¤§æ•°é‡æ¥å†³å®šã€‚  </p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_connections x N<span class="comment">;</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'table_open_cache'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>table_open_cache</td>    <td>2000(é»˜è®¤å¤§å°)</td>  </tr></table><h4 id="thread-cache-sizeï¼ˆçº¿ç¨‹ç¼“å­˜å¤§å°ï¼‰"><a href="#thread-cache-sizeï¼ˆçº¿ç¨‹ç¼“å­˜å¤§å°ï¼‰" class="headerlink" title="thread_cache_sizeï¼ˆçº¿ç¨‹ç¼“å­˜å¤§å°ï¼‰"></a>thread_cache_sizeï¼ˆçº¿ç¨‹ç¼“å­˜å¤§å°ï¼‰</h4><p>ä¸ºäº†åŠ å¿«è¿æ¥æ•°æ®åº“çš„é€Ÿåº¦ï¼ŒMySQLä¼šç¼“å­˜ä¸€å®šæ•°é‡çš„å®¢æˆ·æœåŠ¡çº¿ç¨‹ï¼ˆçº¿ç¨‹æ± ï¼‰ä»¥å¤‡é‡ç”¨ï¼Œé€šè¿‡å‚æ•° thread_cache_size å¯æ§åˆ¶MySQLç¼“å­˜å®¢æˆ·æœåŠ¡çº¿ç¨‹çš„æ•°é‡ï¼ˆçº¿ç¨‹æ± çš„å¤§å°ï¼‰ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'thread_cache_size'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>thread_cache_size</td>    <td>9(é»˜è®¤å¤§å°9ä¸ªçº¿ç¨‹)</td>  </tr></table><h4 id="innodb-lock-wait-timeoutï¼ˆinnodbè¡Œé”çš„ç­‰å¾…æ—¶é—´ï¼‰"><a href="#innodb-lock-wait-timeoutï¼ˆinnodbè¡Œé”çš„ç­‰å¾…æ—¶é—´ï¼‰" class="headerlink" title="innodb_lock_wait_timeoutï¼ˆinnodbè¡Œé”çš„ç­‰å¾…æ—¶é—´ï¼‰"></a>innodb_lock_wait_timeoutï¼ˆinnodbè¡Œé”çš„ç­‰å¾…æ—¶é—´ï¼‰</h4><p>è¯¥å‚æ•°æ˜¯ç”¨æ¥è®¾ç½®InnoDBäº‹åŠ¡ç­‰å¾…è¡Œé”çš„æ—¶é—´ï¼Œé»˜è®¤å€¼æ—¶å€™50msã€‚  </p><p>å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡ŒåŠ¨æ€è®¾ç½®ã€‚  </p><p>å¯¹äºéœ€è¦å¿«é€Ÿåé¦ˆçš„ä¸šåŠ¡ç³»ç»Ÿæ¥è¯´ï¼Œå¯ä»¥å°†è¡Œé”çš„ç­‰å¾…æ—¶é—´è°ƒå°ï¼Œä»¥é¿å…äº‹åŠ¡é•¿æ—¶é—´æŒ‚èµ·ï¼›  </p><p>å¯¹äºåå°è¿è¡Œçš„æ‰¹é‡å¤„ç†ç¨‹åºæ¥è¯´ï¼Œå¯ä»¥å°†è¡Œé”çš„ç­‰å¾…æ—¶é—´è°ƒå¤§ï¼Œä»¥é¿å…å‘ç”Ÿå¤§çš„å›æ»šæ“ä½œã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'innodb_lock_wait_timeout'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>innodb_lock_wait_timeout</td>    <td>50</td>  </tr></table><h2 id="é”-é”çš„æ¦‚è¿°åŠåˆ†ç±»"><a href="#é”-é”çš„æ¦‚è¿°åŠåˆ†ç±»" class="headerlink" title="é” - é”çš„æ¦‚è¿°åŠåˆ†ç±»"></a>é” - é”çš„æ¦‚è¿°åŠåˆ†ç±»</h2><h3 id="é”æ¦‚è¿°"><a href="#é”æ¦‚è¿°" class="headerlink" title="é”æ¦‚è¿°"></a>é”æ¦‚è¿°</h3><p>é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹ æˆ–è€… çº¿ç¨‹ å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ï¼ˆé¿å…äº‰æŠ¢ï¼‰ã€‚  </p><p>åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤äº†ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆå¦‚CPUã€RAMã€I/Oç­‰ï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚  </p><p>å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚  </p><p>ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œé”å¯¹æ•°æ®åº“è€Œè¨€æ˜¾å¾—å°¤å…¶é‡è¦ï¼Œä¹Ÿæ›´åŠ å¤æ‚ã€‚  </p><h3 id="é”åˆ†ç±»"><a href="#é”åˆ†ç±»" class="headerlink" title="é”åˆ†ç±»"></a>é”åˆ†ç±»</h3><p>ä»å¯¹æ•°æ®æ“ä½œçš„ç²’åº¦åˆ†ä¸ºï¼š  </p><ol><li>è¡¨é”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šæ•´ä¸ªè¡¨</li><li>è¡Œé”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šå½“å‰æ“ä½œè¡Œ</li></ol><p>ä»å¯¹æ•°æ®æ“ä½œçš„ç±»å‹åˆ†ï¼š  </p><ol><li>è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“</li><li>å†™é”ï¼ˆæ’å®ƒé”ï¼‰ï¼šå½“å‰æ“ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œä»–ä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”</li></ol><h2 id="é”-MySQLå¯¹é”çš„æ”¯æŒ"><a href="#é”-MySQLå¯¹é”çš„æ”¯æŒ" class="headerlink" title="é” - MySQLå¯¹é”çš„æ”¯æŒ"></a>é” - MySQLå¯¹é”çš„æ”¯æŒ</h2><p>ç›¸å¯¹å…¶ä»–æ•°æ®åº“è€Œè¨€ï¼ŒMySQLçš„é”æœºåˆ¶æ¯”è¾ƒç®€å•ã€‚  </p><p>å…¶æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ã€‚  </p><p>ä¸‹æ ‡ç½—åˆ—å‡ºäº†å„ä¸ªå­˜å‚¨å¼•æ“å¯¹é”çš„æ”¯æŒæƒ…å†µã€‚  </p><table>  <tr>    <th>å­˜å‚¨å¼•æ“</th>    <th>è¡¨çº§é”</th>    <th>è¡Œçº§é”</th>    <th>é¡µé¢é”</th>  </tr>  <tr>    <td>MyISAM</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>  </tr>    <tr>    <td>InnoDB</td>    <td>æ”¯æŒ</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>  </tr>    <tr>    <td>MEMORY</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>  </tr>    <tr>    <td>BDB</td>    <td>æ”¯æŒ</td>    <td>ä¸æ”¯æŒ</td>    <td>æ”¯æŒ</td>  </tr></table><p>MySQLè¿™ä¸‰ç§é”çš„ç‰¹æ€§å¯å¤§è‡´å½’çº³å¦‚ä¸‹ï¼š  </p><table>  <tr>    <th>é”ç±»å‹</th>    <th>ç‰¹å®š</th>  </tr>  <tr>    <td>è¡¨çº§é”</td>    <td>åå‘MyISAMå­˜å‚¨å¼•æ“ï¼Œå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚</td>  </tr>    <tr>    <td>è¡Œçº§é”</td>    <td>åå‘InnoDBå­˜å‚¨å¼•æ“ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</td>  </tr>    <tr>    <td>é¡µé¢é”</td>    <td>å¼€é”€å’ŒåŠ é”æ—¶é—´ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬ã€‚</td>  </tr></table><p>ä»ä¸Šè¿°ç‰¹ç‚¹å¯è§ï¼Œå¾ˆéš¾ç¬¼ç»Ÿçš„è¯´å“ªç§é”æ›´å¥½ï¼Œåªèƒ½å°±å…·ä½“åº”ç”¨çš„ç‰¹ç‚¹æ¥è¯´å“ªç§é”æ›´åˆé€‚ã€‚  </p><p>ä»…ä»é”çš„è§’åº¦æ¥è¯´ï¼š<br>  è¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚Webåº”ç”¨ï¼›<br>  è€Œè¡Œçº§é”åˆ™æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶å‘æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿï¼›  </p><h2 id="é”-MyISAMè¡¨é”-è¯»é”"><a href="#é”-MyISAMè¡¨é”-è¯»é”" class="headerlink" title="é” - MyISAMè¡¨é” - è¯»é”"></a>é” - MyISAMè¡¨é” - è¯»é”</h2><p>è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚</p><p>MyISAMå­˜å‚¨å¼•æ“æ”¯æŒè¡¨é”ï¼Œè¿™ä¹Ÿæ˜¯MySQLå¼€å§‹å‡ ä¸ªç‰ˆæœ¬ä¸­å”¯ä¸€æ”¯æŒçš„é”ç±»å‹ã€‚  </p><h3 id="å¦‚ä½•åŠ è¡¨é”"><a href="#å¦‚ä½•åŠ è¡¨é”" class="headerlink" title="å¦‚ä½•åŠ è¡¨é”"></a>å¦‚ä½•åŠ è¡¨é”</h3><p>MyISAMåœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERTç­‰ï¼‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ã€‚  </p><p>å› æ­¤ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨LOCK TABLEå‘½ä»¤ç»™MyISAMè¡¨æ˜¾å¼åŠ é”ã€‚  </p><p>æ˜¾ç¤ºåŠ è¡¨é”è¯­æ³•ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŠ è¯»é”ï¼š  </span></span><br><span class="line"><span class="keyword">lock</span> <span class="keyword">table</span> table_name <span class="keyword">read</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ å†™é”ï¼š  </span></span><br><span class="line"><span class="keyword">lock</span> <span class="keyword">table</span> table_name write;</span><br></pre></td></tr></table></figure><h3 id="è¯»é”æ¡ˆä¾‹"><a href="#è¯»é”æ¡ˆä¾‹" class="headerlink" title="è¯»é”æ¡ˆä¾‹"></a>è¯»é”æ¡ˆä¾‹</h3><p>å‡†å¤‡ç¯å¢ƒ  </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">create database demo_03<span class="built_in"> default </span><span class="attribute">charset</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line">use demo_03;</span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="string">'tb_book'</span>(</span><br><span class="line">  <span class="string">'id'</span> INT(11) AUTO_INCREMENT,</span><br><span class="line">  <span class="string">'name'</span> VARCHAR(50)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'publish_name'</span> DATE<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">'status'</span> CHAR(1)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (<span class="string">'id'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=myisam<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥tb_book åŸºç¡€æ•°æ®</span></span><br><span class="line"></span><br><span class="line">CREATE TABLE <span class="string">'tb_user'</span>(</span><br><span class="line">  <span class="string">'id'</span> INT(11) AUTO_INCREMENT,</span><br><span class="line">  <span class="string">'name'</span> VARCHAR(50)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY(<span class="string">'id'</span>)</span><br><span class="line">)<span class="attribute">ENGINE</span>=myisam<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥tb_user åŸºç¡€æ•°æ®</span></span><br><span class="line"></span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">lock table tb_book read;</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> tb_books;</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> tb_user;# Table <span class="string">'tb_user'</span> was <span class="keyword">not</span> locked with LOCK TABLES é”å®štb_bookè¡¨é€”ä¸­æ— æ³•å»æ“ä½œå…¶ä»–è¡¨ï¼›é™¤éå½“å‰tb_bookè¡¨é”é‡Šæ”¾ï¼›</span><br><span class="line"></span><br><span class="line">update tb_book <span class="builtin-name">set</span> name =<span class="string">'solr'</span> where <span class="attribute">id</span>=2;#å½“å‰å¯¹tb_bookè¡¨è¿›è¡Œçš„é”æ˜¯è¯»é”ï¼Œè€Œä¸æ˜¯å†™é”ï¼›æ‰€ä»¥å½“å‰æ— æ³•è¿›è¡Œæ›´æ–°ï¼›Table <span class="string">'tb_book'</span> was locked with a READ lock <span class="keyword">and</span> can<span class="string">'t be updated.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">unlock tables;#åªæœ‰å½“å½“å‰çš„tb_bookè¡¨å½“ä¸­çš„è¯»é”è¿›è¡Œè§£é”ï¼Œå…¶ä»–å®¢æˆ·ç«¯è¿æ¥mysqlçš„è¯¥è¡¨æ—¶æ‰èƒ½å¤Ÿè¿›è¡Œå†™é”ï¼›å¦åˆ™å°†ä¸€ç›´ç­‰å¾…å½“å‰è¯¥tb_bookçš„è¯»é”é‡Šæ”¾ï¼›</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå¯¹MyISAMè¡¨è¿›è¡Œæ“ä½œäº†è¯»é”ï¼Œå…¶ä¸ä¼šé˜»å¡å…¶ä»–çº¿ç¨‹çš„è¯»æ“ä½œï¼Œä½†æ˜¯ä¼šé˜»å¡å…¶ä»–çº¿ç¨‹çš„å†™æ“ä½œã€‚  </p><h2 id="é”-MyISAMè¡¨é”-å†™é”"><a href="#é”-MyISAMè¡¨é”-å†™é”" class="headerlink" title="é” - MyISAMè¡¨é” - å†™é”"></a>é” - MyISAMè¡¨é” - å†™é”</h2><p>å†™é”ï¼ˆæ’å®ƒé”ï¼‰ï¼šå½“å‰æ“ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å½“å‰å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">lock</span> <span class="keyword">table</span> tb_book write;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> tb_book <span class="keyword">set</span> <span class="keyword">name</span> =<span class="string">'solr'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_book(<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span>(<span class="literal">null</span>,<span class="string">'es'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¶ä»–å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book;<span class="comment">#å…¶ä»–å®¢æˆ·ç«¯å°†ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œé™¤éå½“å‰å®¢æˆ·ç«¯çš„å†™é”é‡Šæ”¾ï¼ˆå³å½“å‰å®¢æˆ·ç«¯çš„ä¸šåŠ¡æ“ä½œå®Œæˆï¼‰ï¼Œå¦åˆ™å…¶ä»–å®¢æˆ·ç«¯ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“å‰å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">unlock</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¶ä»–å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book;<span class="comment">#å½“ å½“å‰å®¢æˆ·ç«¯é‡Šæ”¾é”ä¹‹åï¼Œè¯¥å…¶ä»–å®¢æˆ·ç«¯å³ç«‹åˆ»èƒ½æŸ¥è¯¢åˆ°æ•°æ®ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="é”-MyISAMè¡¨é”-å°ç»“"><a href="#é”-MyISAMè¡¨é”-å°ç»“" class="headerlink" title="é” - MyISAMè¡¨é” - å°ç»“"></a>é” - MyISAMè¡¨é” - å°ç»“</h2><p>é”æ¨¡å¼çš„äº’ç›¸å…¼å®¹æ€§å¦‚è¡¨æ‰€ç¤ºï¼š  </p><table>  <tr>    <th>å½“å‰é”æ¨¡å¼/è¯·æ±‚é”æ¨¡å¼</th>    <th>Noneï¼ˆç†è§£ä¸ºå½“å‰å®¢æˆ·ç«¯è·å–å¾—åˆ°çš„é”ï¼‰</th>    <th>è¯»é”ï¼ˆå…¶ä»–å®¢æˆ·ç«¯å¯¹äºè¯»æ“ä½œæ˜¯å¦å¯è¡Œï¼‰</th>    <th>å†™é”ï¼ˆå…¶ä»–å®¢æˆ·ç«¯å¯¹äºå†™æ“ä½œæ˜¯å¦å¯è¡Œï¼‰</th>  </tr>  <tr>    <th>è¯»é”</th>    <td>æ˜¯ï¼ˆå½“å‰å®¢æˆ·ç«¯è·å–å¾—åˆ°çš„è¯»é”ï¼‰</td>    <td>æ˜¯ï¼ˆå…¶ä»–å®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œè¯»æ“ä½œï¼‰</td>    <td>å¦ï¼ˆå…¶ä»–å®¢æˆ·ç«¯æ— æ³•è¿›è¡Œå†™æ“ä½œï¼‰</td>  </tr>    <tr>    <th>å†™é”</th>    <td>æ˜¯ï¼ˆå½“å‰å®¢æˆ·ç«¯è·å–å¾—åˆ°çš„å†™é”ï¼‰</td>    <td>å¦ï¼ˆå…¶ä»–å®¢æˆ·ç«¯æ— æ³•è¿›è¡Œè¯»æ“ä½œï¼‰</td>    <td>å¦ï¼ˆå…¶ä»–å®¢æˆ·ç«¯æ— æ³•è¿›è¡Œå†™æ“ä½œï¼‰</td>  </tr></table><p>ç”±ä¸Šè¡¨å¯è§ï¼š  </p><ol><li>å¯¹MyISAMè¡¨çš„è¯»æ“ä½œï¼Œä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€å¼ è¡¨çš„è¯»è¯·æ±‚ï¼Œä½†æ˜¯ä¼šé˜»å¡å¯¹åŒä¸€å¼ è¡¨çš„å†™è¯·æ±‚ã€‚</li><li>å¯¹MyISAMè¡¨çš„å†™æ“ä½œï¼Œåˆ™ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€å¼ è¡¨çš„è¯»å’Œå†™æ“ä½œã€‚</li></ol><p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯»é”ä¼šé˜»å¡å†™ï¼Œä½†æ˜¯ä¸ä¼šé˜»å¡è¯»ï¼›è€Œå†™é”ï¼Œåˆ™æ—¢ä¼šé˜»å¡è¯»ï¼Œåˆä¼šé˜»å¡å†™ã€‚  </p><p>æ­¤å¤–ï¼ŒMyISAMçš„è¯»å†™é”è°ƒåº¦æ˜¯å†™æ“ä½œä¼˜å…ˆï¼Œè¿™ä¹Ÿæ˜¯MyISAMä¸é€‚åˆåšå†™ä¸ºä¸»çš„è¡¨çš„å­˜å‚¨å¼•æ“çš„åŸå› ã€‚<br>å› ä¸ºå†™é”åï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½åšä»»ä½•æ“ä½œï¼Œå¤§é‡çš„æ›´æ–°ä¼šä½¿æŸ¥è¯¢å¾ˆéš¾å¾—åˆ°é”ï¼Œä»è€Œé€ æˆæ°¸è¿œé˜»å¡ã€‚</p><h2 id="é”-MyISAMè¡¨é”-æŸ¥çœ‹é”äº‰ç”¨æƒ…å†µ"><a href="#é”-MyISAMè¡¨é”-æŸ¥çœ‹é”äº‰ç”¨æƒ…å†µ" class="headerlink" title="é” - MyISAMè¡¨é” - æŸ¥çœ‹é”äº‰ç”¨æƒ…å†µ"></a>é” - MyISAMè¡¨é” - æŸ¥çœ‹é”äº‰ç”¨æƒ…å†µ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">open</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure><p>Database: æ•°æ®åº“  </p><p>Table: æ•°æ®è¡¨  </p><p>In_use: è¡¨å½“å‰è¢«æŸ¥è¯¢ä½¿ç”¨çš„æ¬¡æ•°ã€‚å¦‚æœè¯¥æ•°ä¸ºé›¶ï¼Œåˆ™è¡¨æ˜¯æ‰“å¼€çš„ï¼Œä½†æ˜¯å½“å‰æ²¡æœ‰è¢«ä½¿ç”¨ã€‚  </p><p>Name_locked: è¡¨åç§°æ˜¯å¦è¢«é”å®šã€‚åç§°é”å®šç”¨äºå–æ¶ˆè¡¨æˆ–è€…å¯¹è¡¨è¿›è¡Œé‡å‘½åç­‰æ“ä½œã€‚  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lock</span> <span class="keyword">table</span> tb_book write;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">open</span> <span class="keyword">tables</span>;<span class="comment">#database: demo_03; table: tb_book ; In_use(æ­£åœ¨ä½¿ç”¨):1ï¼›Name_locked:0</span></span><br><span class="line"><span class="keyword">unlock</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> <span class="keyword">like</span> <span class="string">'Table_locks%'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>Table_lockes_immediate</td>    <td>70</td>  </tr>    <tr>    <td>Table_locks_waited</td>    <td>0</td>  </tr></table><p>Table_locks_immediate: æŒ‡çš„æ˜¯èƒ½å¤Ÿç«‹å³è·å¾—è¡¨çº§é”çš„æ¬¡æ•°ï¼Œæ¯æ¬¡ç«‹å³è·å–é”ï¼Œå€¼åŠ 1ï¼›  </p><p>Table_locks_waited: æŒ‡çš„æ˜¯ä¸èƒ½ç«‹å³è·å–è¡¨çº§é”è€Œéœ€è¦ç­‰å¾…çš„æ¬¡æ•°ï¼Œæ¯ç­‰å¾…ä¸€æ¬¡ï¼Œè¯¥å€¼åŠ 1ï¼Œæ­¤å€¼é«˜è¯´æ˜å­˜åœ¨ç€è¾ƒä¸ºä¸¥é‡çš„è¡¨çº§é”äº‰ç”¨æƒ…å†µã€‚</p><h2 id="é”-InnoDBè¡Œé”-ä»‹ç»åŠèƒŒæ™¯çŸ¥è¯†"><a href="#é”-InnoDBè¡Œé”-ä»‹ç»åŠèƒŒæ™¯çŸ¥è¯†" class="headerlink" title="é” - InnoDBè¡Œé” - ä»‹ç»åŠèƒŒæ™¯çŸ¥è¯†"></a>é” - InnoDBè¡Œé” - ä»‹ç»åŠèƒŒæ™¯çŸ¥è¯†</h2><h3 id="è¡Œé”ä»‹ç»"><a href="#è¡Œé”ä»‹ç»" class="headerlink" title="è¡Œé”ä»‹ç»"></a>è¡Œé”ä»‹ç»</h3><p>InnoDBé»˜è®¤æ”¯æŒè¡Œé”ï¼Œä¹Ÿæ”¯æŒè¡¨é”ï¼›  </p><p>è¡Œé”ç‰¹ç‚¹ï¼šåå‘InnoDBå­˜å‚¨è¿è¯·ï¼Œå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚<br>ï¼ˆç”±äºé”å®šç²’åº¦æœ€å°ï¼Œæ‰€ä»¥å‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼ŒäºŒè€…å­˜åœ¨å…³è”ï¼‰  </p><p>InnoDBä¸MyISAMçš„æœ€å¤§ä¸åŒæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯æ”¯æŒäº‹åŠ¡ï¼›äºŒæ˜¯é‡‡ç”¨äº†è¡Œçº§é”ï¼›<br>(äº‹åŠ¡å’Œè¡Œçº§é”ä¹‹é—´å­˜åœ¨å…³è”ï¼Œæ”¯æŒäº‹åŠ¡çš„åŸå› å³åœ¨äºInnoDBé‡‡ç”¨çš„æ˜¯è¡Œçº§é”)</p><h3 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h3><p><strong>äº‹åŠ¡åŠå…¶ACIDå±æ€§</strong>  </p><p>äº‹åŠ¡æ˜¯ç”±ä¸€ç»„SQLè¯­å¥ç»„æˆçš„é€»è¾‘å¤„ç†å•å…ƒã€‚<br>äº‹åŠ¡å…·æœ‰ä»¥ä¸‹4ä¸ªç‰¹æ€§ï¼Œç®€ç§°ä¸ºäº‹åŠ¡ACIDå±æ€§ã€‚  </p><table>  <tr>    <th>ACIDå±æ€§</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>åŸå­æ€§ï¼ˆAtomicï¼‰</td>    <td>äº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œå•å…ƒï¼Œå…¶å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</td>  </tr>  <tr>    <td>ä¸€è‡´æ€§ï¼ˆConsistentï¼‰</td>    <td>åœ¨äº‹åŠ¡å¼€å§‹å’Œå®Œæˆæ—¶ï¼Œæ•°æ®éƒ½å¿…é¡»ä¿æŒä¸€è‡´çŠ¶æ€</td>  </tr>  <tr>    <td>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</td>    <td>æ•°æ®åº“ç³»ç»Ÿæä¾›ä¸€å®šçš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„â€œç‹¬ç«‹â€ç¯å¢ƒä¸‹è¿è¡Œ</td>  </tr>  <tr>    <td>æŒä¹…æ€§ï¼ˆDurableï¼‰</td>    <td>äº‹åŠ¡å®Œæˆä¹‹åï¼Œå¯¹äºæ•°æ®çš„ä¿®æ”¹æ˜¯æ°¸ä¹…çš„</td>  </tr></table><p><strong>å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜</strong>  </p><table>  <tr>    <th>é—®é¢˜</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>ä¸¢å¤±æ›´æ–°ï¼ˆLost Updateï¼‰</td>    <td>å½“ä¸¤ä¸ªæˆ–è€…å¤šä¸ªäº‹åŠ¡é€‰æ‹©åŒä¸€è¡Œï¼Œæœ€åˆçš„äº‹åŠ¡ä¿®æ”¹çš„å€¼ï¼Œä¼šè¢«åé¢çš„äº‹åŠ¡ä¿®æ”¹çš„å€¼è¦†ç›–</td>  </tr>  <tr>    <td>è„è¯»ï¼ˆDirty Readsï¼‰</td>    <td>å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®ï¼Œå¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ï¼ˆä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®ï¼‰</td>  </tr>  <tr>    <td>ä¸å¯é‡å¤åº¦ï¼ˆNon_repeatable Readsï¼‰</td>    <td>ä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–æŸäº›æ•°æ®åçš„æŸä¸ªæ—¶é—´ï¼Œå†æ¬¡è¯»å–ä»¥å‰è¯»è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å’Œä»¥å‰ç‹¬å¤„çš„æ•°æ®ä¸ä¸€è‡´</td>  </tr>  <tr>    <td>å¹»è¯»ï¼ˆPhantom Readsï¼‰</td>    <td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶é‡æ–°è¯»å–ä»¥å‰æŸ¥è¯¢è¿‡çš„æ•°æ®ï¼Œå´å‘ç°å…¶ä»–äº‹åŠ¡æ’å…¥äº†æ»¡è¶³å…¶æŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®ã€‚</td>  </tr></table><p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«</strong>  </p><p>ä¸ºäº†è§£å†³ä¸Šè¿°æåˆ°çš„äº‹åŠ¡å¹¶å‘é—®é¢˜ï¼Œæ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚  </p><p>æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»è¶Šä¸¥æ ¼ï¼Œå¹¶å‘å‰¯ä½œç”¨è¶Šå°ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·ä¹Ÿå°±è¶Šå¤§(æ€§èƒ½è¶Šä½)ï¼Œå› ä¸ºäº‹åŠ¡éš”ç¦»å®è´¨ä¸Šå°±æ˜¯ä½¿ç”¨äº‹åŠ¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šâ€œä¸²è¡ŒåŒ–â€è¿›è¡Œï¼Œè¿™æ˜¾ç„¶ä¸â€œå¹¶å‘â€æ˜¯çŸ›ç›¾çš„ã€‚  </p><p>æ•°æ®åº“çš„éš”ç¦»çº§åˆ«æœ‰4ä¸ªï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸ºRead uncommittedã€Read committedã€Repeatable readã€Serializable ï¼Œè¿™å››ä¸ªç•Œåˆ«å¯ä»¥é€ä¸ªè§£å†³è„å†™ã€è„è¯»ã€ä¸å¯é‡å¤åº¦ã€å¹»è¯»è¿™å‡ ç±»é—®é¢˜ã€‚  </p><table>  <tr>    <th>éš”ç¦»çº§åˆ«</th>    <th>ä¸¢å¤±æ›´æ–°</th>    <th>è„è¯»</th>    <th>ä¸å¯é‡å¤è¯»</th>    <th>å¹»è¯»</th>  </tr>  <tr>    <td>Read uncommitted</td>    <td>x</td>    <td>âˆš</td>    <td>âˆš</td>    <td>âˆš</td>  </tr>    <tr>    <td>Read committed</td>    <td>x</td>    <td>x</td>    <td>âˆš</td>    <td>âˆš</td>  </tr>   <tr>    <td>Repeatable read(é»˜è®¤)</td>    <td>x</td>    <td>x</td>    <td>x</td>    <td>âˆš</td>  </tr>    <tr>    <td>Serializable</td>    <td>x</td>    <td>x</td>    <td>x</td>    <td>x</td>  </tr></table><p>å¤‡æ³¨ï¼š âˆš ä»£è¡¨å¯èƒ½å‡ºç°ï¼Œ x ä»£è¡¨ä¸ä¼šå‡ºç°ã€‚  </p><p>MySQLçš„æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ Repeatable readï¼ŒæŸ¥çœ‹æ–¹å¼ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'tx_isolation'</span>;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Variable_name</th>    <th>Value</th>  </tr>  <tr>    <td>tx_isolation</td>    <td>REPEATABLE-READ</td>  </tr></table><h2 id="é”-InnoDBè¡Œé”-ç±»å‹"><a href="#é”-InnoDBè¡Œé”-ç±»å‹" class="headerlink" title="é” - InnoDBè¡Œé” - ç±»å‹"></a>é” - InnoDBè¡Œé” - ç±»å‹</h2><h3 id="InnoDBçš„è¡Œé”æ¨¡å¼"><a href="#InnoDBçš„è¡Œé”æ¨¡å¼" class="headerlink" title="InnoDBçš„è¡Œé”æ¨¡å¼"></a>InnoDBçš„è¡Œé”æ¨¡å¼</h3><p>InnoDBå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š  </p><ul><li><p>å…±äº«é”ï¼ˆSï¼‰ï¼š åˆç§°ä¸ºè¯»é”ï¼Œç®€ç§°Sé”ï¼Œå…±äº«é”å°±æ˜¯å¤šä¸ªäº‹åŠ¡å¯¹äºç»Ÿä¸€æ•°æ®å¯ä»¥å…±äº«ä¸€æŠŠé”ï¼Œéƒ½èƒ½è®¿é—®åˆ°æ•°æ®ï¼Œä½†æ˜¯åªèƒ½è¯»ä¸èƒ½ä¿®æ”¹ã€‚  </p></li><li><p>æ’å®ƒé”ï¼ˆXï¼‰ï¼šåˆç§°ä¸ºå†™é”ï¼Œç®€ç§°Xé”ï¼Œæ’å®ƒé”å°±æ˜¯ä¸èƒ½ä¸å…¶ä»–é”å¹¶å­˜ã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ¹–åŒºäº†ä¸€ä¸ªæ•°æ®è¡Œçš„æ’å®ƒé”ï¼Œå…¶ä»–äº‹åŠ¡å°±ä¸èƒ½å†è·å–è¯¥è¡Œçš„å…¶ä»–é”ï¼ŒåŒ…æ‹¬å…±äº«é”å’Œæ’å®ƒé”ï¼Œä½†æ˜¯è·å–æ’å®ƒé”çš„äº‹åŠ¡å¯ä»¥å¯¹æ•°æ®è¿›è¡Œè¯»å–å’Œä¿®æ”¹ã€‚  </p></li></ul><p>å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’å®ƒé”ï¼ˆXï¼‰ï¼›<br>å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼›  </p><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ˜¾å¼ç»™è®°å½•é›†åŠ å…±äº«é”æˆ–è€…æ’å®ƒé”ï¼š  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…±äº«é”ï¼ˆSï¼‰</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ...... <span class="keyword">LOCK</span> <span class="keyword">IN</span> <span class="keyword">SHARE</span> <span class="keyword">MODE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å®ƒé”ï¼ˆXï¼‰</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ....... <span class="keyword">FOR</span> <span class="keyword">UPDATE</span></span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹å‡†å¤‡å·¥ä½œ"><a href="#æ¡ˆä¾‹å‡†å¤‡å·¥ä½œ" class="headerlink" title="æ¡ˆä¾‹å‡†å¤‡å·¥ä½œ"></a>æ¡ˆä¾‹å‡†å¤‡å·¥ä½œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_innodb_lock(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>),</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">16</span>),</span><br><span class="line">  sex <span class="built_in">varchar</span>(<span class="number">1</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥åŸºç¡€æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå•åˆ—ç´¢å¼•</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_test_innodb_lock_id <span class="keyword">on</span> test_innodb_lock(<span class="keyword">id</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> idx_test_innodb_lock_name <span class="keyword">on</span> test_innodb_lock(<span class="keyword">name</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure><h3 id="è¡Œé”åŸºæœ¬æ¼”ç¤º"><a href="#è¡Œé”åŸºæœ¬æ¼”ç¤º" class="headerlink" title="è¡Œé”åŸºæœ¬æ¼”ç¤º"></a>è¡Œé”åŸºæœ¬æ¼”ç¤º</h3><table>  <tr>    <th>Session-1</th>    <th>Session-2</th>  </tr>  <tr>    <td>å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ï¼ˆset autocommit=0;ï¼‰</td>    <td>å…³é—­è‡ªåŠ¨æäº¤åŠŸèƒ½ï¼ˆset autocommit=0;ï¼‰</td>  </tr>  <tr>    <td>å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ®ï¼ˆselect * from test_innodb_lock;ï¼‰</td>    <td>å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ®ï¼ˆselect * from test_innodb_lock;ï¼‰</td>  </tr>  <tr>    <td>æŸ¥è¯¢idä¸º3çš„æ•°æ®ï¼›ï¼ˆselect * from test_innodb_lock where id=3;ï¼‰</td>    <td>æŸ¥è¯¢idä¸º3çš„æ•°æ®ï¼›ï¼ˆselect * from test_innodb_lock where id=3;ï¼‰</td>  </tr>   <tr>    <td>æ›´æ–°idä¸º3çš„æ•°æ®ï¼Œä½†æ˜¯ä¸æäº¤ï¼ˆupdate test_innodb_lock set name='AI' where id=3;ï¼‰</td>    <td>æ›´æ–°idä¸º3çš„æ•°æ®ï¼Œåœ¨Session-1çš„æ›´æ–°æäº¤å®Œæˆä¹‹å‰ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼›ï¼ˆupdate test_innodb_lock set name='AII' where id=3;ï¼‰</td>  </tr><tr>    <td>é€šè¿‡commitï¼Œæäº¤äº‹åŠ¡ï¼ˆcommit;ï¼‰</td>    <td>æ¥è§¦é˜»å¡ï¼Œæ›´æ–°æ­£å¸¸è¿›è¡Œï¼ˆupdate test_innodb_lock set name='AII' where id=3;ï¼‰</td>  </tr>  <tr>    <td colspan="2">ä»¥ä¸Šï¼Œæ“ä½œçš„éƒ½æ˜¯åŒä¸€è¡Œçš„æ•°æ®ï¼Œæ¥ä¸‹æ¥ï¼Œæ¼”ç¤ºä¸åŒè¡Œçš„æ•°æ®ï¼›</td>  </tr>  <tr>    <td>æ›´æ–°idä¸º3çš„æ•°æ®ï¼Œæ­£å¸¸çš„è·å–åˆ°è¡Œé”ï¼Œæ‰§è¡Œæ›´æ–°ï¼›(update test_innodb_lock set name='a1' where id =3;)</td>    <td>ç”±äºä¸Session-1æ“ä½œä¸æ˜¯åŒä¸€è¡Œï¼Œè·å–å½“å‰è¡Œé”ï¼Œæ‰§è¡Œæ›´æ–°ï¼›ï¼ˆupdate test_innodb_lock set name ="C1" where id=5;ï¼‰</td>  </tr></table><h2 id="é”-InnoDBè¡Œé”-è¡Œé”å‡çº§ä¸ºè¡¨é”"><a href="#é”-InnoDBè¡Œé”-è¡Œé”å‡çº§ä¸ºè¡¨é”" class="headerlink" title="é” - InnoDBè¡Œé” - è¡Œé”å‡çº§ä¸ºè¡¨é”"></a>é” - InnoDBè¡Œé” - è¡Œé”å‡çº§ä¸ºè¡¨é”</h2><p>å¦‚æœä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆinnodbå°†å¯¹è¡¨ä¸­çš„æ‰€æœ‰è®°å½•åŠ é”ï¼Œå®é™…æ•ˆæœè·Ÿè¡¨é”ä¸€æ ·ã€‚  </p><p>æŸ¥çœ‹å½“å‰è¡¨çš„ç´¢å¼•ï¼šshow index from test_innodb_lock;</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> test_innodb_lock\G;</span><br></pre></td></tr></table></figure><table>  <tr>    <th>Session-1</th>    <th>Session-2</th>  </tr>  <tr>    <td>å…³é—­äº‹åŠ¡çš„è‡ªåŠ¨æäº¤ï¼ˆset autocommit=0;ï¼‰</td>    <td>å…³é—­äº‹åŠ¡çš„è‡ªåŠ¨æäº¤ï¼ˆset autocommit=0;ï¼‰</td>  </tr>  <tr>    <td>æ‰§è¡Œæ›´æ–°è¯­å¥ï¼ˆupdate test_innodb_lock set sex='2' where <span style="color:red;font-weight:bolder;">name=400</span>; ï¼‰</td>    <td>æ‰§è¡Œæ›´æ–°è¯­å¥ï¼Œä½†æ˜¯å‡ºäºé˜»å¡çŠ¶æ€ï¼ˆupdate test_innodb_lock set sex='2' where id=9;ï¼‰</td>  </tr>   <tr>    <td>æäº¤äº‹åŠ¡ï¼ˆcommit;ï¼‰</td>    <td>è§£é™¤é˜»å¡ï¼Œæ‰§è¡Œæ›´æ–°æˆåŠŸï¼ˆupdate test_innodb_lock set sex='2' where id=9;ï¼‰</td>  </tr>  <tr>    <td></td>    <td>æ‰§è¡Œæäº¤æ“ä½œï¼ˆcommit;ï¼‰</td>  </tr></table><p>ç”±äºæ‰§è¡Œæ›´æ–°æ—¶ï¼Œnameå­—æ®µæœ¬æ¥ä¸ºvarcharç±»å‹ï¼Œä½†æ˜¯Session-1å½“ä¸­nameä½œä¸ºæ•°å­—ç±»å‹æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥å­˜åœ¨ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆï¼Œæœ€ç»ˆè¡Œé”å˜ä¸ºè¡¨é”ï¼›  </p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> test_innodb_lock;<span class="meta">#æŸ¥çœ‹è¡¨ç»“æ„</span></span><br></pre></td></tr></table></figure><p>ç´¢å¼•å¤±æ•ˆï¼šnameå­—æ®µæœ¬æ¥çš„ç±»å‹ä¸ºvarcahrç±»å‹ï¼›å¦‚æœæ˜¯varcharç±»å‹ä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™å…¶nameå­—æ®µçš„å–å€¼åŠ ä¸Šå•å¼•å·ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç´¢å¼•å°±å°†å¤±æ•ˆï¼›ç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”å‡çº§ä¸ºè¡¨é”ï¼›</p><h2 id="é”-InnoDBè¡Œé”-é—´éš™é”å±å®³"><a href="#é”-InnoDBè¡Œé”-é—´éš™é”å±å®³" class="headerlink" title="é” - InnoDBè¡Œé” - é—´éš™é”å±å®³"></a>é” - InnoDBè¡Œé” - é—´éš™é”å±å®³</h2><p>å½“ç”¨èŒƒå›´æ¡ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–è€…æ’å®ƒé”çš„æ—¶å€™ï¼ŒInnoDBä¼šç»™ç¬¦åˆæ¡ä»¶çš„å·²æœ‰æ•°æ®è¿›è¡ŒåŠ é”ï¼›<br>å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAPï¼‰â€ï¼ŒInnoDBä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„ é—´éš™é”ï¼ˆNext-Keyé”ï¼‰ï¼›  </p><p>ID &lt; 10 ï¼š  </p><ul><li>1,2,3,4,5,6,7,8,9</li><li>1,2,3,4,6,9(æ­¤æ—¶å½“ä¸­çš„5 å’Œ 7ã€8 åˆ™ç§°ä¹‹ä¸ºé—´éš™)</li></ul><p>ç¤ºä¾‹ï¼š  </p><table>  <tr>    <th>Session-1</th>    <th>Session-2</th>  </tr>  <tr>    <td>å…³é—­äº‹åŠ¡è‡ªåŠ¨æäº¤ï¼ˆset autocommit=0;ï¼‰</td>    <td>å…³é—­äº‹åŠ¡è‡ªåŠ¨æäº¤ï¼ˆset autocommit=0;ï¼‰</td>  </tr>  <tr>    <td>æ ¹æ®idèŒƒå›´æ›´æ–°æ•°æ®ï¼ˆupdate test_innodb_lock set name='332423' where id < 4 ;ï¼‰</td>    <td>æ’å…¥idä¸º2çš„è®°å½•ï¼Œå¤„äºé˜»å¡çŠ¶æ€ï¼ˆinsert into test_innodb_lock values(2,'1001','1'); ï¼‰</td>  </tr>    <tr>    <td>æäº¤äº‹åŠ¡ï¼ˆcommit;ï¼‰</td>    <td>è§£é™¤é˜»å¡ï¼Œæ‰§è¡Œæ’å…¥æ“ä½œï¼ˆinsert into test_innodb_lock values(2,'1001','1'); ï¼‰</td>  </tr>   <tr>    <td></td>    <td>æäº¤äº‹åŠ¡ï¼ˆcommit;ï¼‰</td>  </tr></table><h2 id="é”-InnoDBè¡Œé”-äº‰ç”¨æƒ…å†µæŸ¥çœ‹"><a href="#é”-InnoDBè¡Œé”-äº‰ç”¨æƒ…å†µæŸ¥çœ‹" class="headerlink" title="é” - InnoDBè¡Œé” - äº‰ç”¨æƒ…å†µæŸ¥çœ‹"></a>é” - InnoDBè¡Œé” - äº‰ç”¨æƒ…å†µæŸ¥çœ‹</h2><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">show status like <span class="string">'innodb_row_lock%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#Innodb_row_lock_current_waits: å½“å‰æ­£åœ¨ç­‰å¾…é”å®šçš„æ•°é‡ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#Innodb_row_lock_timeï¼š ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨é”å®šæ€»æ—¶é—´é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#Innodb_row_lock_time_avg: æ¯æ¬¡ç­‰å¾…æ‰€èŠ±å¹³å‡æ—¶é•¿</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#Innodb_row_lock_time_max: ä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨ç­‰å¾…æœ€é•¿çš„ä¸€æ¬¡æ‰€èŠ±æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#Innodb_row_lock_waitsï¼š ç³»ç»Ÿå¯åŠ¨ååˆ°ç°åœ¨æ€»å…±ç­‰å¾…çš„æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#å½“ç­‰å¾…çš„æ¬¡æ•°å¾ˆé«˜ï¼Œè€Œä¸”æ¯æ¬¡ç­‰å¾…çš„æ—¶é•¿ä¹Ÿä¸å°çš„æ—¶å€™ï¼Œå°±éœ€è¦åˆ†æç³»ç»Ÿä¸­ä¸ºä»€ä¹ˆä¼šæœ‰å¦‚æ­¤å¤šçš„ç­‰å¾…ï¼Œç„¶åæ ¹æ®åˆ†æç»“æœç€æ‰‹åˆ¶å®šä¼˜åŒ–è®¡åˆ’ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="é”-InnoDBè¡Œé”-æ€»ç»“"><a href="#é”-InnoDBè¡Œé”-æ€»ç»“" class="headerlink" title="é” - InnoDBè¡Œé” - æ€»ç»“"></a>é” - InnoDBè¡Œé” - æ€»ç»“</h2><p>Innodbå­˜å‚¨å¼•æ“ç”±äºå®ç°äº†è¡Œçº§é”å®šï¼Œè™½ç„¶åœ¨é”å®šæœºåˆ¶çš„å®ç°æ–¹é¢å¸¦æ¥äº†æ€§èƒ½æŸè€—å¯èƒ½æ¯”è¡¨é”ä¼šæ›´é«˜ä¸€äº›ï¼Œä½†æ˜¯åœ¨æ•´ä½“å¹¶å‘å¤„ç†èƒ½åŠ›æ–¹é¢å§šåª›åª›ä¼˜äºMyISAMçš„è¡¨é”çš„ã€‚  </p><p>å½“ç³»ç»Ÿå¹¶å‘é‡è¾ƒé«˜çš„æ—¶å€™ï¼ŒInnoDBçš„æ•´ä½“æ€§èƒ½å’ŒMyISAMç›¸æ¯”å°±ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚  </p><p>ä½†æ˜¯ï¼ŒInnoDBçš„è¡Œçº§é”åŒæ ·ä¹Ÿæœ‰å…¶è„†å¼±çš„ä¸€é¢ï¼Œä½†ä½¿ç”¨ä¸å½“çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè®©InnoDBçš„æ•´ä½“æ€§èƒ½ä¸ä»…ä¸èƒ½æ¯”MyISAMé«˜ï¼Œç”šè‡³å¯èƒ½ä¼šæ›´å·®ã€‚  </p><p>ä¼˜åŒ–å»ºè®®ï¼š  </p><ul><li>å°½å¯èƒ½è®©æ‰€æœ‰æ•°æ®æ£€ç´¢éƒ½èƒ½é€šè¿‡ç´¢å¼•æ¥å®Œæˆï¼Œé¿å…æ— ç´¢å¼•è¡Œé”å‡çº§ä¸ºè¡¨é”</li><li>åˆç†è®¾è®¡ç´¢å¼•ï¼Œå°½é‡ç¼©å°é”çš„èŒƒå›´</li><li>å°½å¯èƒ½å‡å°‘ç´¢å¼•æ¡ä»¶ï¼Œä»¥åŠç´¢å¼•èŒƒå›´ï¼Œé¿å…é—´éš™é”</li><li>å°½é‡æ§åˆ¶äº‹åŠ¡å¤§å°ï¼Œå‡å°‘é”å®šèµ„æºé‡å’Œæ—¶é—´é•¿åº¦</li><li>å°½å¯èƒ½ä½¿ç”¨ä½çº§åˆ«äº‹åŠ¡éš”ç¦»ï¼ˆå‰æï¼šä½†æ˜¯éœ€è¦ä¸šåŠ¡å±‚é¢æ»¡è¶³éœ€æ±‚ï¼‰</li></ul><h2 id="SQLæŠ€å·§-SQLæ‰§è¡Œé¡ºåºåŠæ­£åˆ™è¡¨è¾¾å¼"><a href="#SQLæŠ€å·§-SQLæ‰§è¡Œé¡ºåºåŠæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="SQLæŠ€å·§ - SQLæ‰§è¡Œé¡ºåºåŠæ­£åˆ™è¡¨è¾¾å¼"></a>SQLæŠ€å·§ - SQLæ‰§è¡Œé¡ºåºåŠæ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="SQLæ‰§è¡Œé¡ºåº"><a href="#SQLæ‰§è¡Œé¡ºåº" class="headerlink" title="SQLæ‰§è¡Œé¡ºåº"></a>SQLæ‰§è¡Œé¡ºåº</h3><p>ç¼–å†™é¡ºåº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">  &lt;<span class="keyword">select</span> <span class="keyword">list</span>&gt;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  &lt;left_table&gt; &lt;join_type&gt;</span><br><span class="line"><span class="keyword">JOIN</span></span><br><span class="line">  &lt;right_table&gt; <span class="keyword">ON</span> &lt;join_condition&gt;</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  &lt;where_condition&gt;</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  &lt;group_by_list&gt;</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">  &lt;having_condition&gt;</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  &lt;order_by_condition&gt;</span><br><span class="line"><span class="keyword">LIMIT</span></span><br><span class="line">  &lt;limit_params&gt;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œé¡ºåº  </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> &lt;left_table&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ON</span> &lt;join_condition&gt;</span><br><span class="line"></span><br><span class="line">&lt;join_type&gt; <span class="keyword">JOIN</span> &lt;right_table&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> &lt;where_condition&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;group_by_list&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">HAVING</span> &lt;having_condition&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> &lt;<span class="keyword">select</span> list&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;order_by_condition&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">LIMIT</span> &lt;limit_params&gt;</span><br></pre></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨"></a>æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£åˆ™è¡¨è¾¾å¼ regexp</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book <span class="keyword">where</span> <span class="keyword">name</span> regexp <span class="string">'^j'</span>;<span class="comment">#æŸ¥è¯¢nameå­—æ®µå–å€¼ä»¥ â€œjâ€ å­—ç¬¦å¼€å¤´çš„è®°å½•è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book <span class="keyword">where</span> <span class="keyword">name</span> regexp <span class="string">'S$'</span>;<span class="comment">#æŸ¥è¯¢nameå­—æ®µå–å€¼ä»¥ â€œSâ€ å­—ç¬¦ç»“å°¾çš„è®°å½•è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tb_book <span class="keyword">where</span> <span class="keyword">name</span> regexp <span class="string">'[uvw]'</span>;<span class="comment">#æŸ¥è¯¢nameå­—æ®µå–å€¼åŒ…å« â€œuâ€ã€â€œvâ€ã€â€œwâ€ å­—ç¬¦çš„è®°å½•è¡Œ</span></span><br></pre></td></tr></table></figure><table>  <tr>    <th>ç¬¦å·</th>    <th>å«ä¹‰</th>  </tr>  <tr>    <td>^</td>    <td>åœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„è¿›è¡ŒåŒ¹é…</td>  </tr>    <tr>    <td>$</td>    <td>åœ¨å­—ç¬¦ä¸²æœ«å°¾å¤„è¿›è¡ŒåŒ¹é…</td>  </tr>    <tr>    <td>.</td>    <td>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦</td>  </tr>  <tr>    <td>[...]</td>    <td>åŒ¹é…å‡ºæ‹¬å·å†…çš„ä»»æ„å­—ç¬¦</td>  </tr>  <tr>    <td>[^...]</td>    <td>åŒ¹é…ä¸å‡ºæ‹¬å·å†…çš„ä»»æ„å­—ç¬¦</td>  </tr>  <tr>    <td>a*</td>    <td>åŒ¹é…é›¶ä¸ªæˆ–è€…å¤šä¸ªaï¼ˆåŒ…æ‹¬ç©ºä¸²ï¼‰</td>  </tr>  <tr>    <td>a+</td>    <td>åŒ¹é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªaï¼ˆä¸åŒ…æ‹¬ç©ºä¸²ï¼‰</td>  </tr>  <tr>    <td>a?</td>    <td>åŒ¹é…é›¶ä¸ªæˆ–è€…ä¸€ä¸ªa</td>  </tr>    <tr>    <td>a1|a2</td>    <td>åŒ¹é…a1æˆ–è€…a2</td>  </tr>    <tr>    <td>a(m)</td>    <td>åŒ¹é…mä¸ªa</td>  </tr>      <tr>    <td>a(m,)</td>    <td>è‡³å°‘åŒ¹é…mä¸ªa</td>  </tr>      <tr>    <td>a(m,n)</td>    <td>åŒ¹é…mä¸ªa åˆ°nä¸ªa</td>  </tr>      <tr>    <td>a(,n)</td>    <td>åŒ¹é…0åˆ°nä¸ªa</td>  </tr>      <tr>    <td>(...)</td>    <td>å°†æ¨¡å¼å…ƒç´ ç»„æˆå•ä¸€å…ƒç´ </td>  </tr></table><h2 id="SQLæŠ€å·§-æ•°å­—å‡½æ•°ä¸å­—ç¬¦ä¸²å‡½æ•°"><a href="#SQLæŠ€å·§-æ•°å­—å‡½æ•°ä¸å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="SQLæŠ€å·§ - æ•°å­—å‡½æ•°ä¸å­—ç¬¦ä¸²å‡½æ•°"></a>SQLæŠ€å·§ - æ•°å­—å‡½æ•°ä¸å­—ç¬¦ä¸²å‡½æ•°</h2><h3 id="æ•°å­—å‡½æ•°"><a href="#æ•°å­—å‡½æ•°" class="headerlink" title="æ•°å­—å‡½æ•°"></a>æ•°å­—å‡½æ•°</h3><table>  <tr>    <th>å‡½æ•°åç§°</th>    <th>ä½œç”¨</th>  </tr>  <tr>    <td>ABS</td>    <td>æ±‚ç»å¯¹å€¼</td>  </tr>    <tr>    <td>SQRT</td>    <td>æ±‚äºŒæ¬¡æ–¹æ ¹</td>  </tr>    <tr>    <td>MOD</td>    <td>æ±‚ä½™æ•°</td>  </tr>    <tr>    <td>CEILå’ŒCEILING</td>    <td>ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯è¿”å›ä¸å°äºå‚æ•°çš„æœ€å°æ•´æ•°ï¼Œå³å‘ä¸Šå–æ•´</td>  </tr>  <tr>    <td>FLOOR</td>    <td>å‘ä¸‹å–æ•´ï¼Œè¿”å›å€¼è½¬åŒ–ä¸ºä¸€ä¸ªBIGINT</td>  </tr>  <tr>    <td>RAND</td>    <td>ç”Ÿæˆä¸€ä¸ª0-1ä¹‹é—´çš„éšæœºæ•°ï¼Œä¼ å…¥æ•´æ•°å‚æ•°æ˜¯ï¼Œç”¨æ¥äº§ç”Ÿé‡å¤åºåˆ—</td>  </tr>  <tr>    <td>ROUND</td>    <td>å¯¹æ‰€ä¼ å…¥å‚æ•°è¿›è¡Œå››èˆäº”å…¥</td>  </tr>    <tr>    <td>SIGN</td>    <td>è¿”å›å‚æ•°çš„ç¬¦å·</td>  </tr>    <tr>    <td>POWå’ŒPOWER</td>    <td>ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯æ‰€ä¼ å‚æ•°çš„æ¬¡æ–¹çš„ç»“æœå€¼</td>  </tr>  <tr>    <td>SIN</td>    <td>æ±‚æ­£å¼¦å€¼</td>  </tr>  <tr>    <td>COS</td>    <td>æ±‚ä½™å¼¦å€¼</td>  </tr>  <tr>    <td>ACOS</td>    <td>æ±‚åä½™å¼¦å€¼ï¼Œä¸å‡½æ•°COSäº’ä¸ºåå‡½æ•°</td>  </tr>    <tr>    <td>TAN</td>    <td>æ±‚æ­£åˆ‡å€¼</td>  </tr>  <tr>    <td>ATAN</td>    <td>æ±‚åæ­£åˆ‡å€¼ï¼Œä¸å‡½æ•°TANäº’ä¸ºåå‡½æ•°</td>  </tr>  <tr>    <td>COT</td>    <td>æ±‚ä½™åˆ‡å€¼</td>  </tr></table><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><table>  <tr>    <th>å‡½æ•°åç§°</th>    <th>ä½œç”¨</th>  </tr>  <tr>    <td>LENGTH</td>    <td>è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°ï¼Œè¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦</td>  </tr>    <tr>    <td>CONCAT</td>    <td>åˆå¹¶å­—ç¬¦ä¸²å‡½æ•°ï¼Œè¿”å›ç»“æœä¸ºè¿æ¥å‚æ•°äº§ç”Ÿçš„å­—ç¬¦ä¸²ï¼Œå‚æ•°å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ª</td>  </tr>    <tr>    <td>INSERT</td>    <td>æ›¿æ¢å­—ç¬¦ä¸²å‡½æ•°</td>  </tr>    <tr>    <td>LOWER</td>    <td>å°†å­—ç¬¦ä¸²ä¸­çš„å­—æ¯è½¬æ¢ä¸ºå°å†™</td>  </tr>    <tr>    <td>UPPER</td>    <td>å°†å­—ç¬¦ä¸²ä¸­çš„å­—æ¯è½¬æ¢ä¸ºå¤§å†™</td>  </tr>    <tr>    <td>LEFT</td>    <td>ä»å·¦ä¾§æˆªå–å­—ç¬¦ä¸²ï¼Œè¿”å›å­—ç¬¦ä¸²å·¦è¾¹çš„è‹¥å¹²ä¸ªå­—ç¬¦</td>  </tr>    <tr>    <td>RIGTH</td>    <td>ä»å³ä¾§æˆªå–å­—ç¬¦ä¸²ï¼Œè¿”å›å­—ç¬¦ä¸²å³è¾¹çš„è‹¥å¹²ä¸ªå­—ç¬¦</td>  </tr>    <tr>    <td>TRIM</td>    <td>åˆ é™¤å­—ç¬¦ä¸²å·¦å³ä¸¤ä¾§çš„ç©ºæ ¼</td>  </tr>    <tr>    <td>REPLACE</td>    <td>å­—ç¬¦ä¸²æ›¿æ¢å‡½æ•°ï¼Œè¿”å›æ›¿æ¢åçš„æ–°å­—ç¬¦ä¸²</td>  </tr>    <tr>    <td>SUBSTRING</td>    <td>æˆªå–å­—ç¬¦ä¸²ï¼Œè¿”å›ä»æŒ‡å®šä½ç½®å¼€å§‹çš„æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²</td>  </tr>    <tr>    <td>REVERSE</td>    <td>å­—ç¬¦ä¸²åè½¬ï¼ˆé€†åºï¼‰å‡½æ•°ï¼Œè¿”å›ä¸åŸå§‹å­—ç¬¦ä¸²é¡ºåºç›¸åçš„å­—ç¬¦ä¸²</td>  </tr></table><h2 id="SQLæŠ€å·§-æ—¥æœŸå‡½æ•°ä¸èšåˆå‡½æ•°"><a href="#SQLæŠ€å·§-æ—¥æœŸå‡½æ•°ä¸èšåˆå‡½æ•°" class="headerlink" title="SQLæŠ€å·§ - æ—¥æœŸå‡½æ•°ä¸èšåˆå‡½æ•°"></a>SQLæŠ€å·§ - æ—¥æœŸå‡½æ•°ä¸èšåˆå‡½æ•°</h2><h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h3><table>  <tr>    <th>å‡½æ•°åç§°</th>    <th>ä½œç”¨</th>  </tr>  <tr>    <td>CURDATEå’ŒCURRENT_DATE</td>    <td>ä¸¤ä¸ªå‡½æ•°ä½œç”¨ç›¸åŒï¼Œè¿”å›å½“å‰ç³»ç»Ÿçš„æ—¥æœŸå€¼</td>  </tr>  <tr>    <td>CURTIMEå’ŒCURRENT_TIME</td>    <td>ä¸¤ä¸ªå‡½æ•°ä½œç”¨ç›¸åŒï¼Œè¿”å›å½“å‰ç³»ç»Ÿçš„æ—¶é—´å€¼</td>  </tr>  <tr>    <td>NOWå’ŒSYSDATE</td>    <td>ä¸¤ä¸ªå‡½æ•°ä½œç”¨ç›¸åŒï¼Œè¿”å›å½“å‰ç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´å€¼</td>  </tr>  <tr>    <td>MONTH</td>    <td>è·å–æŒ‡å®šæ—¥æœŸä¸­çš„æœˆä»½</td>  </tr>  <tr>    <td>MONTHNAME</td>    <td>è·å–æŒ‡å®šæ—¥æœŸä¸­çš„æœˆä»½è‹±æ–‡åç§°</td>  </tr>  <tr>    <td>DAYNAE</td>    <td>è·å–æŒ‡å®šæ—¥æœŸå¯¹åº”çš„æ˜ŸæœŸå‡ çš„è‹±æ–‡åç§°</td>  </tr>  <tr>    <td>DAYOFWEEK</td>    <td>è·å–æŒ‡å®šæ—¥æœŸå¯¹åº”çš„ä¸€å‘¨çš„ç´¢å¼•ä½ç½®å€¼</td>  </tr>  <tr>    <td>WEEK</td>    <td>è·å–æŒ‡å®šæ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œè¿”å›å€¼çš„èŒƒå›´æ˜¯å¦ä¸º0~52æˆ–è€…1~53</td>  </tr>  <tr>    <td>DAYOFYEAR</td>    <td>è·å–æŒ‡å®šæ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼Œè¿”å›å€¼èŒƒå›´æ˜¯1~366</td>  </tr>  <tr>    <td>DAYOFMONTH</td>    <td>è·å–æŒ‡å®šæ—¥æœŸæ˜¯ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤©ï¼Œè¿”å›å€¼æ˜¯1~31</td>  </tr>  <tr>    <td>YEAR</td>    <td>è·å–å¹´ä»½ï¼Œè¿”å›å€¼èŒƒå›´æ˜¯1970~2069</td>  </tr>  <tr>    <td>TIME_TO_SEC</td>    <td>å°†æ—¶é—´å‚æ•°è½¬æ¢ä¸ºç§’æ•°</td>  </tr>  <tr>    <td>SEC_TO_TIME</td>    <td>å°†ç§’æ•°è½¬æ¢ä¸ºæ—¶é—´ï¼Œä¸TIME_TO_SECäº’ä¸ºåå‡½æ•°</td>  </tr>  <tr>    <td>DATE_ADDå’ŒADDDATE</td>    <td>ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯å‘æ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”</td>  </tr>  <tr>    <td>DATE_SUBå’ŒSUBDATE</td>    <td>ä¸¤ä¸ªå‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯å‘æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”</td>  </tr>  <tr>    <td>ADDTIME</td>    <td>æ—¶é—´åŠ æ³•è¿ç®—ï¼Œåœ¨åŸå§‹æ—¶é—´ä¸Šæ·»åŠ æŒ‡å®šçš„æ—¶é—´</td>  </tr>  <tr>    <td>SUBTIME</td>    <td>æ—¶é—´å‡æ³•è¿ç®—ï¼Œåœ¨åŸå§‹æ—¶é—´ä¸Šå‡å»æŒ‡å®šæ—¶é—´</td>  </tr>  <tr>    <td>DATEDIFF</td>    <td>è·å–ä¸¤ä¸ªæ—¥æœŸä¹‹é—´é—´éš”ï¼Œè¿”å›å‚æ•°1å‡å»å‚æ•°2çš„å€¼</td>  </tr>  <tr>    <td>DATE_FORMAT</td>    <td>æ ¼å¼åŒ–æŒ‡å®šçš„æ—¥æœŸï¼Œæ ¹æ®å‚æ•°è¿”å›æŒ‡å®šæ ¼å¼çš„å€¼</td>  </tr>  <tr>    <td>WEEKDAY</td>    <td>è·å–æŒ‡å®šæ—¥æœŸåœ¨ä¸€å‘¨å†…çš„å¯¹åº”çš„å·¥ä½œæ—¥ç´¢å¼•</td>  </tr></table><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><table>  <tr>    <th>å‡½æ•°åç§°</th>    <th>ä½œç”¨</th>  </tr>  <tr>    <td>MAX</td>    <td>æŸ¥è¯¢æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</td>  </tr>  <tr>    <td>MIN</td>    <td>æŸ¥è¯¢æŒ‡å®šåˆ—çš„æœ€å°å€¼</td>  </tr>  <tr>    <td>COUNT</td>    <td>ç»Ÿè®¡æŸ¥è¯¢ç»“æœçš„è¡Œæ•°</td>  </tr>  <tr>    <td>SUM</td>    <td>æ±‚å’Œï¼Œè¿”å›æŒ‡å®šåˆ—çš„æ€»å’Œ</td>  </tr>  <tr>    <td>AVG</td>    <td>æ±‚å¹³å‡å€¼ï¼Œè¿”å›æŒ‡å®šåˆ—æ•°æ®çš„å¹³å‡å€¼</td>  </tr></table><h2 id="è¯¾ç¨‹å†…å®¹"><a href="#è¯¾ç¨‹å†…å®¹" class="headerlink" title="è¯¾ç¨‹å†…å®¹"></a>è¯¾ç¨‹å†…å®¹</h2><h2 id="å¸¸ç”¨å·¥å…·-mysql"><a href="#å¸¸ç”¨å·¥å…·-mysql" class="headerlink" title="å¸¸ç”¨å·¥å…· - mysql"></a>å¸¸ç”¨å·¥å…· - mysql</h2><h2 id="å¸¸ç”¨å·¥å…·-mysqladmin"><a href="#å¸¸ç”¨å·¥å…·-mysqladmin" class="headerlink" title="å¸¸ç”¨å·¥å…· - mysqladmin"></a>å¸¸ç”¨å·¥å…· - mysqladmin</h2><h2 id="å¸¸ç”¨å·¥å…·-mysqlbinlogä¸mysqldump"><a href="#å¸¸ç”¨å·¥å…·-mysqlbinlogä¸mysqldump" class="headerlink" title="å¸¸ç”¨å·¥å…· - mysqlbinlogä¸mysqldump"></a>å¸¸ç”¨å·¥å…· - mysqlbinlogä¸mysqldump</h2><h2 id="å¸¸ç”¨å·¥å…·-mysqlimportä¸source"><a href="#å¸¸ç”¨å·¥å…·-mysqlimportä¸source" class="headerlink" title="å¸¸ç”¨å·¥å…· - mysqlimportä¸source"></a>å¸¸ç”¨å·¥å…· - mysqlimportä¸source</h2><h2 id="å¸¸ç”¨å·¥å…·-mysqlshow"><a href="#å¸¸ç”¨å·¥å…·-mysqlshow" class="headerlink" title="å¸¸ç”¨å·¥å…· - mysqlshow"></a>å¸¸ç”¨å·¥å…· - mysqlshow</h2><h2 id="æ—¥å¿—-é”™è¯¯æ—¥å¿—"><a href="#æ—¥å¿—-é”™è¯¯æ—¥å¿—" class="headerlink" title="æ—¥å¿— - é”™è¯¯æ—¥å¿—"></a>æ—¥å¿— - é”™è¯¯æ—¥å¿—</h2><h2 id="æ—¥å¿—-äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆstatementï¼‰"><a href="#æ—¥å¿—-äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆstatementï¼‰" class="headerlink" title="æ—¥å¿— - äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆstatementï¼‰"></a>æ—¥å¿— - äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆstatementï¼‰</h2><h2 id="æ—¥å¿—-äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆrowåŠæ—¥å¿—åˆ é™¤ï¼‰"><a href="#æ—¥å¿—-äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆrowåŠæ—¥å¿—åˆ é™¤ï¼‰" class="headerlink" title="æ—¥å¿— - äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆrowåŠæ—¥å¿—åˆ é™¤ï¼‰"></a>æ—¥å¿— - äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆrowåŠæ—¥å¿—åˆ é™¤ï¼‰</h2><h2 id="æ—¥å¿—-æŸ¥è¯¢æ—¥å¿—"><a href="#æ—¥å¿—-æŸ¥è¯¢æ—¥å¿—" class="headerlink" title="æ—¥å¿— - æŸ¥è¯¢æ—¥å¿—"></a>æ—¥å¿— - æŸ¥è¯¢æ—¥å¿—</h2><h2 id="æ—¥å¿—-æ…¢æŸ¥è¯¢æ—¥å¿—"><a href="#æ—¥å¿—-æ…¢æŸ¥è¯¢æ—¥å¿—" class="headerlink" title="æ—¥å¿— - æ…¢æŸ¥è¯¢æ—¥å¿—"></a>æ—¥å¿— - æ…¢æŸ¥è¯¢æ—¥å¿—</h2><h2 id="å¤åˆ¶-åŸç†"><a href="#å¤åˆ¶-åŸç†" class="headerlink" title="å¤åˆ¶ - åŸç†"></a>å¤åˆ¶ - åŸç†</h2><h2 id="æ¡ˆä¾‹-éœ€æ±‚åŠç¯å¢ƒå‡†å¤‡"><a href="#æ¡ˆä¾‹-éœ€æ±‚åŠç¯å¢ƒå‡†å¤‡" class="headerlink" title="æ¡ˆä¾‹ - éœ€æ±‚åŠç¯å¢ƒå‡†å¤‡"></a>æ¡ˆä¾‹ - éœ€æ±‚åŠç¯å¢ƒå‡†å¤‡</h2><h2 id="æ¡ˆä¾‹-åŸºæœ¬å·¥ç¨‹å¯¼å…¥"><a href="#æ¡ˆä¾‹-åŸºæœ¬å·¥ç¨‹å¯¼å…¥" class="headerlink" title="æ¡ˆä¾‹ - åŸºæœ¬å·¥ç¨‹å¯¼å…¥"></a>æ¡ˆä¾‹ - åŸºæœ¬å·¥ç¨‹å¯¼å…¥</h2><h2 id="æ¡ˆä¾‹-AOPè®°å½•æ—¥å¿—"><a href="#æ¡ˆä¾‹-AOPè®°å½•æ—¥å¿—" class="headerlink" title="æ¡ˆä¾‹ - AOPè®°å½•æ—¥å¿—"></a>æ¡ˆä¾‹ - AOPè®°å½•æ—¥å¿—</h2><h2 id="æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢åç«¯-mapperæ¥å£"><a href="#æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢åç«¯-mapperæ¥å£" class="headerlink" title="æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢åç«¯ - mapperæ¥å£"></a>æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢åç«¯ - mapperæ¥å£</h2><h2 id="æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢åç«¯-Service-amp-Controller"><a href="#æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢åç«¯-Service-amp-Controller" class="headerlink" title="æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢åç«¯ - Service&amp;Controller"></a>æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢åç«¯ - Service&amp;Controller</h2><h2 id="æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢-å‰ç«¯"><a href="#æ¡ˆä¾‹-æ—¥å¿—æŸ¥è¯¢-å‰ç«¯" class="headerlink" title="æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢ - å‰ç«¯"></a>æ¡ˆä¾‹ - æ—¥å¿—æŸ¥è¯¢ - å‰ç«¯</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–åˆ†æ"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–åˆ†æ" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–åˆ†æ"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–åˆ†æ</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-åˆ†é¡µä¼˜åŒ–"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-åˆ†é¡µä¼˜åŒ–" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - åˆ†é¡µä¼˜åŒ–"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - åˆ†é¡µä¼˜åŒ–</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-ç´¢å¼•ä¼˜åŒ–"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-ç´¢å¼•ä¼˜åŒ–" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - ç´¢å¼•ä¼˜åŒ–"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - ç´¢å¼•ä¼˜åŒ–</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-è¯»å†™åˆ†ç¦»æ¦‚è¿°"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-è¯»å†™åˆ†ç¦»æ¦‚è¿°" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - è¯»å†™åˆ†ç¦»æ¦‚è¿°"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - è¯»å†™åˆ†ç¦»æ¦‚è¿°</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-æ•°æ®æºé…ç½®"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-æ•°æ®æºé…ç½®" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - æ•°æ®æºé…ç½®"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - æ•°æ®æºé…ç½®</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº-æµ‹è¯•"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº-æµ‹è¯•" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº - æµ‹è¯•"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº - æµ‹è¯•</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº-åŸç†è§£æ"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-AOPåˆ‡æ¢æ•°æ®æº-åŸç†è§£æ" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº - åŸç†è§£æ"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - AOPåˆ‡æ¢æ•°æ®æº - åŸç†è§£æ</h2><h2 id="æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-åº”ç”¨ä¼˜åŒ–"><a href="#æ¡ˆä¾‹-ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–-åº”ç”¨ä¼˜åŒ–" class="headerlink" title="æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - åº”ç”¨ä¼˜åŒ–"></a>æ¡ˆä¾‹ - ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– - åº”ç”¨ä¼˜åŒ–</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è§‚çœ‹ç¬”è®°ï¼š&lt;a href=&quot;https://www.bilibili.com/video/BV1fJ41127Rj?from=search&amp;
      
    
    </summary>
    
    
      <category term="ç¬”è®°" scheme="https://fengshana.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="ç¬”è®°" scheme="https://fengshana.github.io/tags/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="MySQL" scheme="https://fengshana.github.io/tags/MySQL/"/>
    
      <category term="æ•°æ®åº“ä¼˜åŒ–" scheme="https://fengshana.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡æ”¯ä»˜</title>
    <link href="https://fengshana.github.io/2020/04/23/%E9%9D%A2%E8%AF%95/%E3%80%90%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E3%80%91%E3%80%90%E5%8A%A8%E5%8A%9B%E8%8A%82%E7%82%B9%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%BC%80%E5%8F%91%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    <id>https://fengshana.github.io/2020/04/23/%E9%9D%A2%E8%AF%95/%E3%80%90%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E3%80%91%E3%80%90%E5%8A%A8%E5%8A%9B%E8%8A%82%E7%82%B9%E3%80%91%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%BC%80%E5%8F%91%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/</id>
    <published>2020-04-22T22:54:44.581Z</published>
    <updated>2020-05-18T17:32:00.124Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h2><p>é‡ç‚¹æ˜¯å¤ä¹ ä¸€ä¸‹å¾®ä¿¡æ”¯ä»˜æµç¨‹ã€‚  </p><p>æ˜¨å¤©é¢è¯•å®˜é—®æˆ‘ï¼Œæ¯”å¦‚è¯´æ”¯ä»˜éªŒç­¾ã€åœ¨æ”¯ä»˜è¿‡ç¨‹ä¸­å‰ç«¯ç”¨æˆ·è¿›è¡Œè¾“å…¥è´­ä¹°å•†å“çš„æ”¯ä»˜é‡‘é¢è¿™ä¸ªæ—¶å€™è¢«æŠ“åŒ…äº†æ€ä¹ˆåŠã€æ¥å£åŠ å¯†ã€åœ¨å·²ç»æ˜¯æ”¯ä»˜è·³è½¬è¿™äº›æ—¶å€™ï¼Œæ”¯ä»˜é‡‘é¢é€šè¿‡æŠ“åŒ…è¢«ç¯¡æ”¹æ€ä¹ˆåŠç­‰æ”¯ä»˜æ–¹é¢çš„é—®é¢˜ã€‚  </p><h2 id="å¾®ä¿¡ç‰¹æ€§"><a href="#å¾®ä¿¡ç‰¹æ€§" class="headerlink" title="å¾®ä¿¡ç‰¹æ€§"></a>å¾®ä¿¡ç‰¹æ€§</h2><ul><li>å¾®ä¿¡æˆæƒ</li><li>å¾®ä¿¡æ”¯ä»˜</li><li>å¾®ä¿¡é€€æ¬¾</li></ul><p>éš¾ç‚¹ï¼šéœ€è¦åƒé€å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£ï¼›ä¸€å®šè¦æŒ‰ç…§æ–‡æ¡£çš„è¦æ±‚å»åšï¼›è€Œä¸æ˜¯è‡ªå·±YYï¼›  </p><h3 id="ç¬¬ä¸€ä¸ªå…³é”®ç‚¹"><a href="#ç¬¬ä¸€ä¸ªå…³é”®ç‚¹" class="headerlink" title="ç¬¬ä¸€ä¸ªå…³é”®ç‚¹"></a>ç¬¬ä¸€ä¸ªå…³é”®ç‚¹</h3><p><strong>è·å–OpenIdçš„æ–¹å¼</strong>ï¼š  </p><ul><li><strong>æ‰‹å·¥æ–¹å¼</strong>ï¼ˆä½¿ç”¨æ‰‹å·¥æ–¹å¼çš„åŸå› ç›®çš„åœ¨äºä»”ç»†å»çœ‹å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£ï¼‰</li><li>åˆ©ç”¨<strong>ç¬¬ä¸‰æ–¹SDK</strong>ï¼ˆç›¸è¾ƒäºæ‰‹å·¥æ–¹å¼ï¼Œé«˜çº§çš„æ–¹å¼ï¼‰</li></ul><p>åœ¨å®é™…å¼€å‘å½“ä¸­ä½¿ç”¨æ¨èç¬¬ä¸‰æ–¹SDKè¿›è¡Œå¼€å‘å¾®ä¿¡æ”¯ä»˜æ¨¡å—ã€‚  </p><p>ç¬¬ä¸€æ­¥æ˜¯è¦å®Œæˆç½‘é¡µæˆæƒï¼Œåªæœ‰é€šè¿‡æˆæƒæ‰èƒ½å¤Ÿè·å–å¾—åˆ°OpenIdï¼Œè€Œæœ‰äº†OpenIdï¼Œæ‰èƒ½å¤Ÿç»§ç»­åšä¸‹ä¸€ç³»åˆ—çš„æ“ä½œï¼›æ‰€ä»¥è·å–OpenIdæ˜¯ç¬¬ä¸€ä¸ªå…³é”®ç‚¹ï¼›  </p><p>å¼ºè°ƒï¼šä¸€å®šè¦å•ç‹¬ã€ä»”ç»†ã€å®Œæ•´çš„çœ‹ä¸€éï¼Œç”šè‡³çœ‹å‡ ééƒ½æ˜¯å¯ä»¥çš„ï¼›</p><h3 id="å¾®ä¿¡ç½‘é¡µæˆæƒ"><a href="#å¾®ä¿¡ç½‘é¡µæˆæƒ" class="headerlink" title="å¾®ä¿¡ç½‘é¡µæˆæƒ"></a>å¾®ä¿¡ç½‘é¡µæˆæƒ</h3><p>æ³¨æ„ä¸€å®šè¦ä»¥å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ï¼Œè·Ÿå…¶æ€è·¯è¿›è¡Œã€‚  </p><ul><li>å®˜æ–¹æ–‡æ¡£<br>- <a href="http://mp.weixin.qq.com/wiki" target="_blank" rel="noopener">http://mp.weixin.qq.com/wiki</a><br>- <a href="https://pay.weixin.qq.com/wiki/doc/api/index.html" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/index.html</a></li><li>è°ƒè¯•<br>- <a href="https://natapp.cn/" target="_blank" rel="noopener">https://natapp.cn/</a></li><li>ç¬¬ä¸‰æ–¹SDK<br>- <a href="https://github.com/Wechat-Group/weixin-java-tools" target="_blank" rel="noopener">https://github.com/Wechat-Group/weixin-java-tools</a></li></ul><p>å¾®ä¿¡å®˜æ–¹æ–‡æ¡£å½“ä¸­ï¼Œåˆ†æœ‰æ™®é€šå•†æˆ·ä»¥åŠæœåŠ¡å•†ç‰ˆæœ¬ï¼›</p><p>ç®€å•ä»‹ç»æ™®é€šå•†æˆ·ç‰ˆæœ¬ä»¥åŠæœåŠ¡å•†ç‰ˆæœ¬(<a href="https://pay.weixin.qq.com/wiki/doc/api/index.html)ï¼š" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/index.html)ï¼š</a>  </p><p>æ™®é€šå•†æˆ·å³æ™®é€šå•†å®¶ï¼›ä¸ªäººèº«ä»½æ˜¯ä¸èƒ½å¤Ÿç”³è¯·å¾®ä¿¡æ”¯ä»˜çš„ï¼›å¿…é¡»æœ‰ç€ä¼ä¸šçš„èµ„è´¨æ‰èƒ½å¤Ÿè¿›è¡Œç”³è¯·ï¼›ä¸ªäººå¼€å‘è€…å¦‚æœæƒ³è¦è¿›è¡Œå¼€å‘è°ƒè¯•çš„è¯å¯ä»¥å‘æœ‹å‹å€Ÿè´¦å·ç­‰æ–¹å¼ï¼›  </p><p>æœåŠ¡å•†ç‰ˆå¯ä»¥ç†è§£ä¸ºå¾®ä¿¡çš„ä»£ç†å•†ï¼›æ¥å…¥ä»£ç†å•†åˆ™å¾€å¾€å¯èƒ½æ˜¯å¾®ä¿¡æ–¹è¿›è¡Œæä¾›äº†æŠ€æœ¯ä»¥åŠä¸€äº›æ›´ä½è´¹ç‡ç­‰ç­‰ï¼›å…¶å®æ™®é€šå•†æˆ·ç‰ˆæœ¬ä»¥åŠæœåŠ¡å•†ç‰ˆæœ¬å·®åˆ«å¹¶ä¸å¤ªå¤§ï¼›  </p><p>ç°åœ¨è¿˜å¤šäº†ä¸€ä¸ªé“¶è¡ŒæœåŠ¡å•†ï¼Œæˆ‘çŒœå¤§æ¦‚ä¹Ÿå°±æ˜¯é“¶è¡Œèµ„è´¨çš„ä¸å¾®ä¿¡è¿›è¡Œåˆä½œï¼›  </p><p>è¦ä»‹ç»çš„æ˜¯æ™®é€šå•†æˆ·ç‰ˆæœ¬å½“ä¸­çš„å…¬ä¼—å·å¼€å‘æ”¯ä»˜ï¼Œå³ä¹Ÿå°±æ˜¯é€‰æ‹©JSAPIæ”¯ä»˜æ–¹å¼ï¼ˆç”¨æˆ·é€šè¿‡å¾®ä¿¡æ‰«ç ã€å…³æ³¨å…¬ä¼—å·ç­‰æ–¹å¼è¿›å…¥å•†å®¶H5é¡µé¢ï¼Œå¹¶åœ¨å¾®ä¿¡å†…è°ƒç”¨JSSDKå®Œæˆæ”¯ä»˜ï¼‰ï¼›è·³è½¬è‡³ï¼ˆ<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1ï¼‰ï¼›" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1ï¼‰ï¼›</a>  </p><p>å†æ¬¡å¼ºè°ƒï¼šä»”ç»†æŸ¥é˜…å®˜æ–¹APIæ–‡æ¡£ï¼›å…¶å®ä¸ç®¡ä»»ä½•æ”¯ä»˜ä¹Ÿéƒ½æ˜¯è¿™æ ·ï¼›æ¯”å¦‚è¯´PayPalï¼ˆæƒ³å“­ï¼‰ï¼›éš¾ç‚¹åœ¨äºéœ€è¦å»å®Œå®Œæ•´æ•´çš„ç†æ¸…æ¥šï¼›  </p><p>å¾€å¾€å¾ˆå¤šæ—¶å€™çš„ä¸æˆåŠŸä¸æ˜¯ç”±äºè‡ªèº«å¼€å‘ä¸å¥½ï¼Œè€Œæ˜¯ç”±äºå®˜æ–¹æ–‡æ¡£ä¸Šå¹¶æ²¡æœ‰å»ä»”ç»†é˜…è¯»ï¼›  </p><p>åœºæ™¯ä»‹ç»ã€å¼€å‘æ­¥éª¤ã€æ¡ˆä¾‹ä»‹ç»â€¦.ç­‰ç­‰éƒ½éœ€è¦ä»”ç»†æŸ¥é˜…ï¼Œè€Œä¸æ˜¯åªçœ‹ä¸€ä¸ªè¿™ç§ï¼›  </p><p>ä¸šåŠ¡æµç¨‹ï¼š<br> å¾®ä¿¡å®¢æˆ·ç«¯å‘èµ·æ”¯ä»˜ï¼ˆå±•ç¤ºã€ç”ŸæˆäºŒç»´ç ç­‰ä¸å¤ªé‡è¦ï¼‰<br> ï¼ˆé‡è¦çš„æ˜¯ï¼‰ç¬¬å››æ­¥ï¼Œè¯·æ±‚æ”¯ä»˜è®¢å•ç„¶åç”Ÿæˆå•†æˆ·è®¢å•ï¼Œå†è°ƒç”¨ç»Ÿä¸€ä¸‹å•APIï¼ˆç¬¬äº”æ­¥ï¼‰ï¼›<br>è°ƒç”¨ä¹‹åè¿”å›ä¸€ä¸ªé¢„ä»˜å•ä¿¡æ¯ï¼›<br>æ³¨æ„æ˜¯é¢„ä»˜å•ä¿¡æ¯ï¼›é¢„ä»˜å•ä¿¡æ¯è¿”å›ä¹‹åï¼›<br>éœ€è¦å»è¿›è¡Œç”ŸæˆJSAPIé¡µé¢ï¼›<br>å³åœ¨å¦å¤–ä¸€ä¸ªé¡µé¢ä¸Šè°ƒç”¨é¢„æ”¯ä»˜çš„ä¸€äº›å‚æ•°ï¼›å¹¶ä¸”ç­¾åç„¶åå‘èµ·æ”¯ä»˜ï¼›<br>å‘èµ·æ”¯ä»˜ä¹‹åï¼Œå°±ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥é€šçŸ¥å•†æˆ·æ”¯ä»˜ç»“æœï¼ˆç¬¬åæ­¥ï¼Œå¾ˆé‡è¦ï¼‰ï¼›<br>ç¬¬ä¸€æ­¥ä¸‹å•è¿”å›çš„æ˜¯ä¸€ä¸ªé¢„ä»˜å•ä¿¡æ¯ï¼›å¹¶ä¸æ˜¯ç›´æ¥ä¸‹å•æˆåŠŸï¼›<br>ä¸€èˆ¬æ¥è¯´ä¸ä»…ä»…æ˜¯å¾®ä¿¡æ”¯ä»˜ï¼›æ”¯ä»˜å®ä¹Ÿå¥½ï¼Œæœ€ç»ˆæ”¯ä»˜æˆåŠŸä¹‹åï¼Œä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥çš„é€šçŸ¥ï¼›æ”¯ä»˜å®Œæˆä¹‹åï¼Œéœ€è¦å°†ç›¸å…³çš„è®¢å•ä¿®æ”¹æˆå·²æ”¯ä»˜çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ï¼›<br>æ ¹æ®å¼‚æ­¥é€šçŸ¥æ¥çš„ï¼›<br>ä¹Ÿå¯ä»¥ä½¿ç”¨è®¢å•æŸ¥è¯¢çš„APIï¼›è¿›è¡ŒæŸ¥è¯¢è®¢å•æ”¯ä»˜ç»“æœï¼›<br>å¦‚èƒ½æ¥æ”¶åˆ°å¼‚æ­¥é€šçŸ¥å…¶å®å°±å¯ä»¥è¿›è¡Œä¿®æ”¹æ”¯ä»˜ç»“æœäº†ï¼›</p><ul><li>æ–‡æ¡£è¯´æ˜<ul><li>é˜…è¯»å¯¹è±¡</li><li>ç‰ˆæœ¬è¯´æ˜</li></ul></li><li>æœ¯è¯­<ul><li>æ”¯ä»˜æ¨¡å¼</li><li>åè¯è§£é‡Š</li></ul></li><li>æ”¯ä»˜è´¦æˆ·<ul><li>æ”¯ä»˜è´¦æˆ·</li></ul></li><li>æ¥å£è§„åˆ™<ul><li>åè®®è§„åˆ™</li><li>å‚æ•°è§„å®š</li><li>å®‰å…¨è§„èŒƒ</li><li>è·å–OpenId</li></ul></li><li>JSAPæ”¯ä»˜<ul><li>åœºæ™¯ä»‹ç»</li><li>æ¡ˆä¾‹ä»‹ç»</li><li>å¼€å‘æ­¥éª¤</li><li>ä¸šåŠ¡æµç¨‹</li><li>è·å–å¾®ä¿¡ç‰ˆæœ¬å·</li><li>å¾®ä¿¡å†…H5è°ƒèµ·æ”¯ä»˜</li><li>æ”¶è´§åœ°å€å…±äº«</li><li>æ”¯ä»˜å¸¸è§é—®é¢˜</li></ul></li><li>APIåˆ—è¡¨<ul><li>ç»Ÿä¸€ä¸‹å•</li><li>æŸ¥è¯¢è®¢å•</li><li>å…³é—­è®¢å•</li><li>ç”³è¯·é€€æ¬¾</li><li>æŸ¥è¯¢é€€æ¬¾</li><li>ä¸‹è½½äº¤æ˜“è´¦å•</li><li>ä¸‹è½½èµ„é‡‘è´¦å•</li><li>æ”¯ä»˜ç»“æœé€šçŸ¥</li><li>é€€æ¬¾ç»“æœé€šçŸ¥</li><li>æ‹‰å–è®¢å•è¯„ä»·æ•°æ®</li></ul></li><li>æœ€ä½³å®è·µ<ul><li>æ”¯ä»˜å›è°ƒå’ŒæŸ¥å•å®ç°æŒ‡å¼•</li><li>æ”¯ä»˜éªŒæ”¶æŒ‡å¼•</li><li>ç½‘ç»œæ’æŸ¥æŒ‡å¼•</li><li>æœ€ä½³å®‰å…¨å®è·µ</li><li>è·¨åŸŸå†—ç¾æ–¹æ¡ˆ</li><li>å›è°ƒé€šçŸ¥æ³¨æ„äº‹é¡¹</li></ul></li><li>è¿è¥è§„èŒƒ<ul><li>è¿è¥è§„èŒƒ</li></ul></li><li>SDKä¸DEMOä¸‹è½½</li><li>è”ç³»æˆ‘ä»¬</li></ul><h2 id="æ–‡æ¡£è¯´æ˜"><a href="#æ–‡æ¡£è¯´æ˜" class="headerlink" title="æ–‡æ¡£è¯´æ˜"></a>æ–‡æ¡£è¯´æ˜</h2><h3 id="é˜…è¯»å¯¹è±¡"><a href="#é˜…è¯»å¯¹è±¡" class="headerlink" title="é˜…è¯»å¯¹è±¡"></a>é˜…è¯»å¯¹è±¡</h3><p>é“¾æ¥ï¼š<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=1_1" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=1_1</a>  </p><p>æœ¬æ–‡é˜…è¯»å¯¹è±¡ï¼šå•†æˆ·ç³»ç»Ÿï¼ˆåœ¨çº¿è´­ç‰©å¹³å°ã€äººå·¥æ”¶é“¶ç³»ç»Ÿã€è‡ªåŠ¨åŒ–æ™ºèƒ½æ”¶é“¶ç³»ç»Ÿæˆ–è€…å…¶ä»–ï¼‰é›†æˆå¾®ä¿¡æ”¯ä»˜æ¶‰åŠçš„æŠ€æœ¯æ¶æ„å¸ˆã€ç ”å‘å·¥ç¨‹å¸ˆã€æµ‹è¯•å·¥ç¨‹å¸ˆã€ç³»ç»Ÿè¿ç»´å·¥ç¨‹å¸ˆç­‰ï¼›</p><h3 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h3><p>é“¾æ¥ï¼š<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=1_2" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=1_2</a></p><ul><li>2019.05.06<ul><li>ä¼ä¸šä»˜æ¬¾åˆ°é“¶è¡Œå¡æ¥å£ï¼ŒåŒ—äº¬é“¶è¡Œ é“¶è¡Œç¼–ç ä»1032ä¿®æ”¹ä¸º4836ï¼›</li></ul></li><li>2019.03.12<ul><li>è´¢ä»˜é€š10ä½æµ·å…³æ³¨å†Œç¼–ç å˜æ›´ä¸ºï¼š4403169D3Wï¼ˆåŸç¼–ç 440316T004ä¸å†ä½¿ç”¨ï¼‰</li></ul></li><li>2019.03.06<ul><li>æ”¯ä»˜ç»“æœé€šçŸ¥å›è°ƒé¢‘ç‡è°ƒæ•´ä¸º15s / 15s / 30s / 3m / 10m / 20m / 30m / 30m / 30m / 30m / 60m / 3h / 3h / 3h / 6h / 6h / - æ€»è®¡24h4m</li></ul></li><li>2019.01.10<ul><li>ä¼ä¸šä»˜æ¬¾æ¥å£å¢åŠ æ¥å£é¢‘ç‡è¯´æ˜</li></ul></li><li>2019.01.03<ul><li>é™¤åˆå•æ”¯ä»˜å¤–ï¼Œå­—æ®µspbill_create_ipï¼ˆç»ˆç«¯IPï¼‰æ”¯æŒIPV6å’ŒIPV4ä¸¤ç§æ ¼å¼</li></ul></li><li>2019.12.24<ul><li>å¢ƒå†…ç”³è¯·é€€æ¬¾æ¥å£ï¼Œé€€æ¬¾åŸå› ä¸‹å‘æ¡ä»¶æ›´æ–°</li><li>ä¸è¶…è¿‡1å…ƒçš„éƒ¨åˆ†é€€æ¬¾ï¼Œå°†ä¸ä¼šä¸‹å‘é€€æ¬¾åŸå› </li></ul></li><li>2018.12.12<ul><li>æŠ¥å…³æ¥å£æ–°å¢è¿”å›å‚æ•°</li><li>verify_department-éªŒæ ¸æœºæ„</li><li>verify_department_trade_id-éªŒæ ¸æœºæ„äº¤æ˜“æµæ°´å·</li></ul></li><li>2018.12.10<ul><li>ä¼ä¸šä»˜æ¬¾æ¥å£æ–°å¢é”™è¯¯ç ï¼›</li><li>NO_AUTH</li><li>ä¼ä¸šä»˜æ¬¾å¤‡æ³¨ï¼ˆdescï¼‰å‚æ•°ä¸­çš„æ•æ„Ÿè¯ä¼šè¢«è½¬æˆå­—ç¬¦*</li></ul></li><li>2018.12.09<ul><li>æ–°å¢æ”¯ä»˜å‡­è¯å¤„å¼€æ”¾ç”µå­å‘ç¥¨å…¥å£åŠŸèƒ½</li><li>ç»Ÿä¸€ä¸‹å•ã€ä»˜æ¬¾ç æ”¯ä»˜ã€å§”æ‰˜ä»£æ‰£æ¥å£æ–°å¢ç”µå­å‘ç¥¨å¼€ç¥¨å…¥å£å¼€æ”¾å‚æ•°</li></ul></li><li>2018.12.01<ul><li>ä¼ä¸šä»˜æ¬¾æ¥å£æ–°å¢é”™è¯¯ç ï¼š<ul><li>PAY_CHANNEL_NOT_ALLOWED</li><li>RECV_ACCOUNT_NOT_ALLOWED</li><li>SENDNUM_LIMIT</li></ul></li></ul></li><li>2018.11.30<ul><li>ä¼ä¸šä»˜æ¬¾æ¥å£è§„åˆ™å˜æ›´ï¼š<ul><li>ä»˜æ¬¾åˆ°é›¶é’±-å•†æˆ·å·å•æ—¥å‡ºæ¬¾æ€»é¢ï¼Œç”±100ä¸‡é™ä½è‡³10ä¸‡</li><li>ä»˜æ¬¾åˆ°é›¶é’±-å•†æˆ·å·å•äººå•æ—¥ä»˜æ¬¾é¢åº¦ï¼Œç”±2ä¸‡é™ä½è‡³5000</li><li>ä»˜æ¬¾åˆ°é“¶è¡Œå¡-å•†æˆ·å·å•æ—¥å‡ºæ¬¾æ€»é¢ï¼Œç”±100ä¸‡é™ä½è‡³10ä¸‡</li><li>ä»˜æ¬¾åˆ°é“¶è¡Œå¡-å•†æˆ·å·å•äººå•æ—¥ä»˜æ¬¾é¢åº¦ï¼Œç”±5ä¸‡é™ä½è‡³2ä¸‡</li><li>ä»˜æ¬¾åˆ°é›¶é’±-æ–°å¢ä¸¤ä¸ªå•†æˆ·èµ„é‡‘å®‰å…¨ç›¸å…³çš„é”™è¯¯ç </li><li>ä»˜æ¬¾åˆ°é“¶è¡Œå¡-æ–°å¢ä¸‰ä¸ªå•†æˆ·èµ„é‡‘å®‰å…¨ç›¸å…³çš„é”™è¯¯ç </li></ul></li></ul></li><li>2018.11.27<ul><li>ä»˜æ¬¾ç æ”¯ä»˜è§„åˆ™å˜æ›´<ul><li>1000å…ƒä»¥ä¸‹å…å¯†æ”¯ä»˜æ¬¡æ•°ä»â€œæ¯æ—¥5æ¬¡â€å˜æ›´ä¸ºâ€œæ¯æ—¥10æ¬¡â€</li></ul></li></ul></li><li>2018.11.12<ul><li>æ”¯ä»˜äº§å“åå­—å˜æ›´<ul><li>å…¬ä¼—å·æ”¯ä»˜-å˜æ›´ä¸º-JSAPIæ”¯ä»˜</li><li>æ‰«ç æ”¯ä»˜-å˜æ›´ä¸º-Nativeæ”¯ä»˜</li><li>åˆ·å¡æ”¯ä»˜-å˜æ›´ä¸º-ä»˜æ¬¾ç æ”¯ä»˜</li></ul></li></ul></li><li>2018.07.06<ul><li>SDK&amp;DEMOæ›´æ–°</li></ul></li><li>2018.05.06<ul><li>æŠ¥å…³APIæ–°å¢æ”¯ä»˜äººä¿¡æ¯æ ¡éªŒç»“æœè¿”å›</li></ul></li><li>2018.03.07<ul><li>æ–°å¢H5æ”¯ä»˜API</li></ul></li><li>2018.02.15<ul><li>æ–°å¢å°ç¨‹åºæ”¯ä»˜API</li></ul></li><li>2017.10.15<ul><li>æ–°å¢èµ„é‡‘è´¦å•ä¸‹è½½API</li></ul></li><li>2017.07.15<ul><li>æ–°å¢é€€æ¬¾ç»“æœé€šçŸ¥API</li></ul></li><li>2017.07.13<ul><li>æ·»åŠ â€œåœºæ™¯ä¿¡æ¯ scene_infoâ€å­—æ®µ</li><li>æ·»åŠ çŠ¶æ€æœºå›¾</li></ul></li><li>2017.06.07<ul><li>ç”³è¯·é€€æ¬¾ä¸æŸ¥è¯¢é€€æ¬¾æ¥å£åˆ é™¤å‚æ•°ï¼šop_user_id</li><li>ä»£é‡‘åˆ¸æ¥å£åˆ é™¤å‚æ•°ï¼šcoupon_typeã€locked_numã€used_num</li></ul></li><li>2017.03.20<ul><li>é€€æ¬¾æ¥å£å‚æ•°refund_idå­—æ®µé•¿åº¦å˜æ›´â€”åŸâ€œ28â€ä½å˜æ›´ä¸ºâ€œ32â€ä½</li><li>é€€æ¬¾æ¥å£å‚æ•°out_refund_noå­—æ®µé•¿åº¦å˜æ›´â€”åŸâ€œ28â€ä½å˜æ›´ä¸ºâ€œ64â€ä½</li></ul></li><li>2017.03.15<ul><li>æ›´æ–°å•å“ä¼˜æƒ åŠŸèƒ½</li><li>æ›´æ–°é“¶è¡Œç±»å‹åˆ—è¡¨</li></ul></li><li>2017.02.21<ul><li>ä¸‹è½½å¯¹è´¦å•æ¥å£-æ–°å¢å……å€¼é€€æ¬¾å¯¹è´¦å•ä¸‹è½½ï¼ˆbill_type=RECHARGE_REFUNDï¼‰</li></ul></li><li>2016.10.11<ul><li>æŸ¥è¯¢é€€æ¬¾æ¥å£-é€€æ¬¾çŠ¶æ€-åˆ é™¤â€œNOTSUREâ€çŠ¶æ€</li></ul></li><li>2016.09.09<ul><li>é€€æ¬¾æ¥å£å¢åŠ å­—æ®µï¼ˆå¯é€‰ï¼‰â€”-æ”¯æŒå¯ç”¨ä½™é¢é€€æ¬¾</li><li>å¢åŠ é€€æ¬¾é”™è¯¯ç â€ä½™é¢ä¸è¶³â€œ</li></ul></li><li>2016.08.24<ul><li>æ–‡æ¡£å·¦ä¾§å¯¼èˆªæ å¢åŠ â€œé”™è¯¯ç â€æ </li></ul></li><li>2015.07.29<ul><li>å—ç†æœºæ„æ›´åä¸ºï¼šæœåŠ¡å•†</li><li>å—ç†æœºæ„å­å•†æˆ·æ›´åä¸ºï¼šç‰¹çº¦å•†æˆ·</li></ul></li><li>2014.12.12<ul><li>æ›´æ–°ä»˜æ¬¾ç æ”¯ä»˜javaç‰ˆæœ¬Demo</li><li>ä¼ä¸šçº¢åŒ…æ›´åä¸ºâ€œä»£é‡‘åˆ¸\ç«‹å‡ä¼˜æƒ â€</li><li>é‚®ä»¶ä¸­ä¸é™„å¸¦è¯ä¹¦ï¼ŒæŒ‰ç…§æŒ‡å¼•å»å•†æˆ·ç³»ç»Ÿä¸‹è½½</li></ul></li><li>2014.12.11<ul><li>å‘å¸ƒæ–°å»ºç‰ˆæœ¬ï¼Œæœ¬æ–‡æ¡£é€‚ç”¨äºV3ç‰ˆæœ¬å•†æˆ·å·æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œæ—§ç‰ˆæœ¬è´¦å·æ²¡æœ‰MCHIDï¼Œéœ€è¦ç™»å½•å•†æˆ·ç³»ç»Ÿå‡çº§ï¼ˆè¯¦ç»†è¯·å‚è€ƒå‡çº§æŒ‡å¼•ï¼‰ã€‚</li></ul></li></ul><h2 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h2><h3 id="æ”¯ä»˜æ¨¡å¼"><a href="#æ”¯ä»˜æ¨¡å¼" class="headerlink" title="æ”¯ä»˜æ¨¡å¼"></a>æ”¯ä»˜æ¨¡å¼</h3><blockquote><p>æ”¯ä»˜äº§å“  </p></blockquote><ol><li>ä»˜æ¬¾ç æ”¯ä»˜<br>ä»˜æ¬¾ç æ”¯ä»˜æ˜¯ç”¨æˆ·å±•ç¤ºå¾®ä¿¡é’±åŒ…å†…çš„â€œåˆ·å¡æ¡ç /äºŒç»´ç â€ç»™å•†æˆ·ç³»ç»Ÿæ‰«æåç›´æ¥å®Œæˆæ”¯ä»˜çš„æ¨¡å¼ã€‚ä¸»è¦åº”ç”¨çº¿ä¸‹é¢å¯¹é¢æ”¶é“¶çš„åœºæ™¯ã€‚</li><li>Nativeæ”¯ä»˜<br>Nativeæ”¯ä»˜æ˜¯å•†æˆ·ç³»ç»ŸæŒ‰ç…§å¾®ä¿¡æ”¯ä»˜åè®®ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼Œç”¨æˆ·å†ç”¨å¾®ä¿¡â€œæ‰«ä¸€æ‰«â€å®Œæˆæ”¯ä»˜çš„æ¨¡å¼ã€‚è¯¥æ¨¡å¼é€‚ç”¨äºPCç½‘ç«™æ”¯ä»˜ã€å®ä½“åº—å•å“æˆ–è€…è®¢å•æ”¯ä»˜ã€åª’ä½“å¹¿å‘Šæ”¯ä»˜ç­‰åœºæ™¯ã€‚</li><li>JSAPæ”¯ä»˜<br>JSAPæ”¯ä»˜æ˜¯ç”¨æˆ·åœ¨å¾®ä¿¡ä¸­æ‰“å¼€å•†æˆ·çš„H5é¡µé¢ï¼Œå•†æˆ·åœ¨H5é¡µé¢é€šè¿‡è°ƒç”¨å¾®ä¿¡æ”¯ä»˜æä¾›çš„JSAPæ¥å£è°ƒèµ·å¾®ä¿¡æ”¯ä»˜æ¨¡å—å®Œæˆæ”¯ä»˜ã€‚<br>åº”ç”¨åœºæ™¯ï¼š</li></ol><ul><li>ç”¨æˆ·åœ¨å¾®ä¿¡å…¬ä¼—è´¦å·è¿›å…¥å•†å®¶å…¬ä¼—å·ï¼Œæ‰“å¼€æŸä¸ªä¸»é¡µé¢ï¼Œå®Œæˆæ”¯ä»˜</li><li>ç”¨æˆ·çš„å¥½å‹åœ¨æœ‹å‹åœˆã€èŠå¤©çª—å£ç­‰åˆ†é¡¹å•†å®¶é¡µé¢é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥æ‰“å¼€å•†å®¶é¡µé¢ï¼Œå®Œæˆæ”¯ä»˜</li><li>å°†å•†æˆ·é¡µé¢è½¬æ¢æˆäºŒç»´ç ï¼Œç”¨æˆ·æ‰«æäºŒç»´ç åå†å¾®ä¿¡æµè§ˆå™¨ä¸­æ‰“å¼€é¡µé¢åå®Œæˆæ”¯ä»˜</li></ul><ol start="4"><li>APPæ”¯ä»˜<br>APPæ”¯ä»˜åˆç§°ç§»åŠ¨ç«¯æ”¯ä»˜ï¼Œæ˜¯å•†æˆ·é€šè¿‡åœ¨ç§»åŠ¨ç«¯åº”ç”¨APPä¸­é›†æˆå¼€æ”¾SDKè°ƒèµ·å¾®ä¿¡æ”¯ä»˜æ¨¡å—å®Œæˆæ”¯ä»˜çš„æ¨¡å¼ã€‚  </li><li>H5æ”¯ä»˜<br>H5æ”¯ä»˜ä¸»è¦æ˜¯åœ¨æ‰‹æœºã€ipadç­‰ç§»åŠ¨è®¾å¤‡ä¸­é€šè¿‡æµè§ˆå™¨å”¤èµ·å¾®ä¿¡æ”¯ä»˜çš„æ”¯ä»˜äº§å“ã€‚</li><li>å°ç¨‹åºæ”¯ä»˜<br>å°ç¨‹åºæ”¯ä»˜æ˜¯ä¸“é—¨è¢«å®šä¹‰ä½¿ç”¨åœ¨å°ç¨‹åºä¸­çš„æ”¯ä»˜äº§å“ã€‚ç›®å‰åœ¨å°ç¨‹åºä¸­èƒ½ä¸”åªèƒ½ä½¿ç”¨å°ç¨‹åºæ”¯ä»˜çš„æ–¹å¼æ¥å”¤èµ·å¾®ä¿¡æ”¯ä»˜ã€‚</li></ol><h3 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h3><ol><li>å¾®ä¿¡å…¬ä¼—å¹³å°</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;è®°å½•&quot;&gt;&lt;a href=&quot;#è®°å½•&quot; class=&quot;headerlink&quot; title=&quot;è®°å½•&quot;&gt;&lt;/a&gt;è®°å½•&lt;/h2&gt;&lt;p&gt;é‡ç‚¹æ˜¯å¤ä¹ ä¸€ä¸‹å¾®ä¿¡æ”¯ä»˜æµç¨‹ã€‚  &lt;/p&gt;
&lt;p&gt;æ˜¨å¤©é¢è¯•å®˜é—®æˆ‘ï¼Œæ¯”å¦‚è¯´æ”¯ä»˜éªŒç­¾ã€åœ¨æ”¯ä»˜è¿‡ç¨‹ä¸­å‰ç«¯ç”¨æˆ·è¿›è¡Œè¾“å…¥è´­ä¹°å•†å“çš„æ”¯ä»˜é‡‘é¢è¿™ä¸ªæ—¶å€™è¢«æŠ“åŒ…
      
    
    </summary>
    
    
      <category term="æ”¯ä»˜" scheme="https://fengshana.github.io/categories/%E6%94%AF%E4%BB%98/"/>
    
    
      <category term="æ”¯ä»˜" scheme="https://fengshana.github.io/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="å¾®ä¿¡" scheme="https://fengshana.github.io/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>æƒ³ä¸€æƒ³è‡ªå·±ä¸ºä»€ä¹ˆè¦å»é¢è¯•ï¼Ÿ</title>
    <link href="https://fengshana.github.io/2020/04/20/%E4%BB%8A%E5%B9%B4%E8%A6%81%E4%B9%B0%E7%9A%84%E4%B8%9C%E8%A5%BF/"/>
    <id>https://fengshana.github.io/2020/04/20/%E4%BB%8A%E5%B9%B4%E8%A6%81%E4%B9%B0%E7%9A%84%E4%B8%9C%E8%A5%BF/</id>
    <published>2020-04-20T02:34:46.720Z</published>
    <updated>2020-05-05T10:08:07.143Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³æƒ³ä»Šå¹´ä¸ºä»€ä¹ˆè‡ªå·±æƒ³å»é¢è¯•ï¼Ÿ<br>æ°”æ­»æˆ‘äº†ï¼›  </p><ol><li>æˆ‘ä»Šå¹´å¾—æ¢ä¸ªæ‰‹æœºäº†ï¼›</li><li>å¾—äº¤æˆ¿ç§Ÿäº†ï¼›</li><li>æ—¥å¸¸å¼€é”€ï¼›</li><li>æˆ‘æƒ³ä¹°å°ç›¸æœºï¼›</li><li>æˆ‘è¿˜æƒ³ä¹°æŠŠå‰ä»–ï¼›</li><li>æˆ‘ä»Šå¹´è¿˜æƒ³ä¹°å°ç”µè„‘ï¼›</li><li>æƒ³å»ä¸€æ¬¡æ¼«å±•ï¼Œç­‰ç–«æƒ…å¥½äº†çš„æ—¶å€™ï¼Œè·Ÿæœ‹å‹ä¸€èµ·ï¼›</li><li>æƒ³å»è¥¿å¡˜ï¼Œå‚åŠ æ±‰æœæ–‡åŒ–èŠ‚ï¼›ç­‰ç–«æƒ…å¥½äº†çš„æ—¶å€™ï¼Œè·Ÿæœ‹å‹ä¸€èµ·ï¼›</li><li>æ‰©å……ä¸€ä¸‹è‡ªå·±çš„å…´è¶£çˆ±å¥½ï¼›</li><li>æˆ‘å°±ä¸ä¿¡äº†ï¼Œæˆ‘å¥½æ­¹ä¹Ÿè¢«äººå–Šè¿‡è€å¸ˆï¼Œæˆ‘è¿˜é¢è¯•ä¸ä¸Šä¸€ä»½10kçš„javaå¼€å‘å·¥ç¨‹å¸ˆäº†ï¼Ÿ</li><li>æ¯æ¬¡é¢è¯•å°±é‚£ä¹ˆå‡ ä¸ªé—®é¢˜ï¼Œæˆ‘èŠ±ä¸€ä¸ªæ˜ŸæœŸè¿˜æä¸å®šï¼Ÿ</li><li>æˆ‘å­¦ä¸œè¥¿çš„èƒ½åŠ›æœ‰è¿™ä¹ˆå·®ï¼Ÿ</li><li>å¥½æ­¹è‡ªå·±çš„è„‘å­é‡Œé¢ä¹Ÿä¸å…¨æ˜¯æ°´å•Šï¼Ÿ</li><li>è‡ªä¿¡ä¸€ç‚¹ï¼Œå¾ˆéš¾å—ï¼Ÿæœ‰ç‚¹åº•æ°”è¡Œå—ï¼Ÿåˆ«äººè¿™ä¹ˆä¿¡ä»»ä½ ï¼Ÿæ€ä¹ˆè·Ÿä¸ªæ‰¶ä¸èµ·çš„åˆ˜é˜¿æ–—ä¼¼çš„ï¼Ÿ</li><li>å†ä¸å»è®¤è®¤çœŸçœŸçš„é¢è¯•ï¼Œç­‰ä¼šå„¿ä½ å¦¹éƒ½é«˜è€ƒå®Œäº†æˆ‘è·Ÿä½ è®²ï¼›</li><li>å†ä¸è®¤çœŸé¢è¯•ï¼Œæˆ‘çœ‹ä½ æ€ä¹ˆäº¤ä»£å§ï¼Ÿï¼Ÿï¼Ÿï¼ï¼ï¼ï¼›è€æ˜¯çŠ¹çŠ¹è±«è±«æœ‰ä»€ä¹ˆå¥½çš„ï¼Œéƒ½è®²äº†å‡ ç™¾å›äº†ï¼Œè¦ä½ æœå†³ä¸€ç‚¹ï¼Œæœæ–­ä¸€ç‚¹ï¼Œä½ ä¸å¬ï¼›</li><li>å¥½äº†ï¼Œä¸è¯´äº†ï¼Œå¥½å¥½é¢è¯•ï¼Œå¥½å¥½åŠ æ²¹ï¼›</li><li>æ¯æ¬¡ä¸æƒ³çœ‹è§†é¢‘çš„æ—¶å€™ï¼Œå°±çœ‹çœ‹è¿™é‡Œï¼Œè‡ªå·±æ€ä¹ˆå†™çš„ï¼Œè‡ªå·±æ€ä¹ˆå»åšï¼›æˆ‘å€’æ˜¯çœ‹ä½ æµ‘æµ‘å™©å™©è¦èº²åˆ°ä»€ä¹ˆæ—¶å€™å»ï¼›</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æƒ³æƒ³ä»Šå¹´ä¸ºä»€ä¹ˆè‡ªå·±æƒ³å»é¢è¯•ï¼Ÿ&lt;br&gt;æ°”æ­»æˆ‘äº†ï¼›  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»Šå¹´å¾—æ¢ä¸ªæ‰‹æœºäº†ï¼›&lt;/li&gt;
&lt;li&gt;å¾—äº¤æˆ¿ç§Ÿäº†ï¼›&lt;/li&gt;
&lt;li&gt;æ—¥å¸¸å¼€é”€ï¼›&lt;/li&gt;
&lt;li&gt;æˆ‘æƒ³ä¹°å°ç›¸æœºï¼›&lt;/li&gt;
&lt;li&gt;æˆ‘è¿˜æƒ³ä¹°æŠŠå‰ä»–ï¼›&lt;/li&gt;
&lt;li&gt;æˆ‘ä»Šå¹´è¿˜æƒ³ä¹°å°ç”µè„‘ï¼›&lt;/
      
    
    </summary>
    
    
      <category term="about" scheme="https://fengshana.github.io/categories/about/"/>
    
    
      <category term="å¿ƒæ€" scheme="https://fengshana.github.io/tags/%E5%BF%83%E6%80%81/"/>
    
  </entry>
  
</feed>
