<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
<script data-ad-client="ca-pub-3892229323208960" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script data-ad-client="ca-pub-8318014576592877" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script>
	(function(){
		if(''){
			if (prompt('请输入文章密码','') !== ''){
				alert('密码错误！');
				history.back();
			}
		}
	})();
</script>









<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #A0A0A0; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #A0A0A0, 0 0 5px     #A0A0A0; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #A0A0A0;    /*上边框颜色*/
        border-left-color: #A0A0A0;    /*左边框颜色*/
    }
</style>

<meta name="theme-color" content="#222">










<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/fsn-16x16.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/fsn-32x32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/fsn-16x16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/fsn-16x16.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="ArrayList," />





  <link rel="alternate" href="/atom.xml" title="✨Fsn✨" type="application/atom+xml" />






<meta name="description" content="坚强。虽然很想发个表情包出来。我得坚强。我就不信了，磨不死我。我得向阳而生，活的灿烂一点。我可真讨厌做笔记。   1234&#x2F;* * Copyright (c) 1997, 2017, Oracle and&#x2F;or its affiliates. All rights reserved. * ORACLE PROPRIETARY&#x2F;CONFIDENTIAL. Use is subject to lice">
<meta property="og:type" content="article">
<meta property="og:title" content="ArrayList源码">
<meta property="og:url" content="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/index.html">
<meta property="og:site_name" content="✨Fsn✨">
<meta property="og:description" content="坚强。虽然很想发个表情包出来。我得坚强。我就不信了，磨不死我。我得向阳而生，活的灿烂一点。我可真讨厌做笔记。   1234&#x2F;* * Copyright (c) 1997, 2017, Oracle and&#x2F;or its affiliates. All rights reserved. * ORACLE PROPRIETARY&#x2F;CONFIDENTIAL. Use is subject to lice">
<meta property="og:image" content="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r">
<meta property="article:published_time" content="2020-03-13T15:12:56.000Z">
<meta property="article:modified_time" content="2020-06-05T17:52:34.333Z">
<meta property="article:author" content="Fsn✨🧙‍♀️✨">
<meta property="article:tag" content="ArrayList">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://fengshana.github.io/2020/03/13/【面试】/【复习】ArrayList/"/>









  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "07d52b28"
    });
  daovoice('update');
  </script>

  <title>ArrayList源码 | ✨Fsn✨</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a839053bb6194637483460a0f428730";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  
  <!-- Google AdSense start -->
  <script data-ad-client="ca-pub-3892229323208960" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Google AdSense end -->

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.js"></script>
<script src="https://unpkg.com/minigrid@3.1.1/dist/minigrid.min.js"></script>
<link rel="stylesheet" href="/photos/photos.css">
<script type="text/javascript" src="/photos/photo.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/mermaid/0.2.4/mermaid.full.min.js"></script>


<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">✨Fsn✨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-camera">
          <a href="/photos/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-camera"></i> <br />
            
            相册
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sentence">
          <a href="/shuoshuo" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-commenting"></i> <br />
            
            小心情
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


<!-- Fsn -->
<script type="text/javascript">
WIDGET = {FID: 'o6km9Rzhmn'}
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>




 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="poem-wrap">
  <div class="poem-border poem-left"></div>
  <div class="poem-border poem-right"></div>
    <h1>[🌿诗酒年华🌻]</h1>
    <p id="poem">挑选中🌺...🍃🍂</p>
    <p id="info">

  <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
  <script type="text/javascript">
    jinrishici.load(function(result) {
      poem.innerHTML = result.data.content
      info.innerHTML = '【' + result.data.origin.dynasty + '】' + result.data.origin.author + '🍃《' + result.data.origin.title + '》🍂'
      document.getElementById("poem").value(poem);
      document.getElementById("info").value(info);  
  });
  </script>
</div>

        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fsn✨🧙‍♀️✨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/fsn.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="✨Fsn✨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ArrayList源码</h1>
        

        <div class="post-meta">
		

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-13T23:12:56+08:00">
                2020-03-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-06-06T01:52:34+08:00">
                2020-06-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  47
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r" rel="gallery_ckc6ay0mt00fp54um12lu5foh"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        <p>坚强。<br>虽然很想发个表情包出来。<br>我得坚强。<br>我就不信了，磨不死我。<br>我得向阳而生，活的灿烂一点。<br>我可真讨厌做笔记。  </p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 1997, 2017, Oracle<span class="built_in"> and/or </span>its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<p>Copyright n.版权，著作权 adj.版权的；受版权保护的。vt.保护版权；为…取得版权<br>Oracle n.神谕；语言；神谕处；圣人/ 甲骨文；甲骨文公司；数据库；神谕<br>affiliates 附属公司；联播电台<br>reserved adj.保留的，预定的；缄默的，冷淡的，高冷的；包租的<br>proprietary adj.专卖的，专营的；所有的，所有权的；（行为）像所有者那样的，所有人（似的）n.所有权，所有人<br>confidential adj.机密的；表示信任的；获信任的<br>subject n.主题；科目；[ 语 ]主语；国民；adj.服从的；易患…的；受制于…的；vt.使…隶属；<br>license n.执照，许可证；特许 vt.许可；特许；发许可证给…<br>terms n.地位，关系；[ 法 ]条款；术语；措辞；价钱（term的复数形式）…<br>Oracle and/or its affiliates Oracle和/或其关联公司<br>All rights reserved. 版权所有，保留所有权利。<br>ORACLE PROPRIETARY/CONFIDENTIAL Oracle专有/机密。<br>Use is subject to license terms. 使用受许可条款约束。  </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">package</span> <span class="selector-tag">java</span><span class="selector-class">.util</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.Consumer</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.Predicate</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.UnaryOperator</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">sun</span><span class="selector-class">.misc</span><span class="selector-class">.SharedSecrets</span>;</span><br></pre></td></tr></table></figure>
<p>Consumer 消费者<br>Predicate  谓词<br>Unary 一元<br>UnaryOperator 非合格算子<br>SharedSecrets 共享的秘密  </p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Resizable-array implementation <span class="keyword">of</span> the <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>List<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span> interface.  Implements</span><br><span class="line"> * all optional list operations, <span class="keyword">and</span> permits all elements, including</span><br><span class="line"> * <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>null<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span>.  In addition <span class="keyword">to</span> implementing the <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>List<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span> interface,</span><br><span class="line"> * this class provides methods <span class="keyword">to</span> manipulate the size <span class="keyword">of</span> the <span class="keyword">array</span> that <span class="literal">is</span></span><br><span class="line"> * used internally <span class="keyword">to</span> store the list.  (This class <span class="literal">is</span> roughly equivalent <span class="keyword">to</span></span><br><span class="line"> * <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>Vector<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span>, <span class="keyword">except</span> that it <span class="literal">is</span> unsynchronized.)</span><br></pre></td></tr></table></figure>
<p>Resizable 可调整大小的<br>Implements all optional list operations 实现所有可选的List操作<br>permits 许可证<br>可调整大小的数组实现了接口List。实现了所有可选的List操作，并且许可所有的元素，包括空元素。<br>In addition to 除了<br>manipulate 操作<br>internally 在内部<br>store 贮藏<br>除了实现接口List，该类ArrayList还提供了方法来操作数组的大小的方法，被用在内部来存储的list<br>roughly 粗略地<br>equivalent 等效<br>该类ArrayList粗略地等效于类Vector，除了他不是同步的  </p>
<blockquote>
<p>由此可得，注释当中说明ArrayList是不同步的，也就是unsynchronized；而Vector是同步的，也就是synchronized  </p>
</blockquote>
<p>由此可得，看点源码还是非常非常非常好的。<br>但是我有个问题，为什么呢，为什么这样说他ArrayList是不同步，而Vector是同步的，有理由吗？<br>我觉得接着往下看可能有答案呗。  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">* <span class="tag">&lt;<span class="name">p</span>&gt;</span>The <span class="tag">&lt;<span class="name">tt</span>&gt;</span>size<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>isEmpty<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>get<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>set<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>,</span><br><span class="line">* <span class="tag">&lt;<span class="name">tt</span>&gt;</span>iterator<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, and <span class="tag">&lt;<span class="name">tt</span>&gt;</span>listIterator<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> operations run in constant</span><br><span class="line">* time.  The <span class="tag">&lt;<span class="name">tt</span>&gt;</span>add<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> operation runs in <span class="tag">&lt;<span class="name">i</span>&gt;</span>amortized constant time<span class="tag">&lt;/<span class="name">i</span>&gt;</span>,</span><br><span class="line">* that is, adding n elements requires O(n) time.  All of the other operations</span><br><span class="line">* run in linear time (roughly speaking).  The constant factor is low compared</span><br><span class="line">* to that for the <span class="tag">&lt;<span class="name">tt</span>&gt;</span>LinkedList<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> implementation.</span><br></pre></td></tr></table></figure>
<p>constant 常数<br>size()，isEmpty()，get()，set()，iterator()，listIterator()这些操作运行在常数时间，大概意思应该说的是这些方法经常用。<br>amortized 分期偿还，摊销<br>add() 操作在平摊常数时间中，操作即方法之意<br>that is 那是，添加n个元素要求在O(n) 时间内，注意下是O(n)time，而不是0零啊，我第一反应是同时，现在想来不是同时的意思了。<br>添加n个元素需要O(n)时间。<br>O(n)感觉好像在哪里见过嘞，哦哦之前算法书里面讲过好像。<br>也就是说添加n个元素，数据量增大n倍，那么耗时也就增大几倍。<br>in linear time 在线性时间以内<br>（粗略的来说）所有的其他操作运行都在限行时间以内。<br>factor 因素<br>compared 相比<br>low 就没必要翻译了吧<br>常量因素是低于LinkedList的实现，与LinkedList实现相比，常量因子较低  </p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 描述算法复杂度时，常用o(1)，o(n)，o(logn)，o(nlogn)表示对应算法的时间复杂度，是算法的时空复杂度的表示。不仅仅用于表示时间复杂度，也用于表示空间复杂度。  </span><br><span class="line">* O后面的括号中有一个函数，指明某个算法的耗时&#x2F;耗空间与数据增长量之间的关系。其中的n代表输入数据的量  </span><br><span class="line">* 比如时间复杂度为O(n)，就代表数据量增大几倍，耗时也增大几倍。比如常见的遍历算法。再比如时间复杂度O(n^2)，就代表数据量增大n倍时，耗时增大n的平方倍，这是比线性更高的时间复杂度。比如冒泡排序，就是典型的O(n^2)的算法，对n个数排序，需要扫描n x n次。  </span><br><span class="line">* 再比如O(logn)，当数据增大n倍时，耗时增大logn倍(这里的log是以2为底的，比如，当数据增大256倍时，耗时只增大8倍，是比线性还要低的时间复杂度)。二分查找就是O(logn)的算法，每找一次排除一半的可能，256个数据中查找只要找8次就可以找到目标。  </span><br><span class="line">* O(nlogn)同理，就是n乘以logn，当数据增大256倍时，耗时增大256*8&#x3D;2048倍。这个复杂度高于线性低于平方。归并排序就是O(nlogn)的时间复杂度。  </span><br><span class="line">* O(1)就是最低的时空复杂度了，也就是耗时&#x2F;耗空间与输入数据大小无关，无论输入数据增大多少倍，耗时&#x2F;耗空间都不变。哈希算法就是典型的O(1)时间复杂度，无论数据规模多大，都可以在一次计算后找到目标（不考虑冲突的话）。  </span><br><span class="line"></span><br><span class="line">看来阅读源码，不仅让我知道了我要学算法，我还把冒泡排序这些....东西都给忘了。 </span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>Each <tt>ArrayList</tt> instance has a <i>capacity</i>.  The capacity is</p></li>
<li><p>the size of the array used to store the elements in the list.  It is always</p>
</li>
<li><p>at least as large as the list size.  As elements are added to an ArrayList,</p>
</li>
<li><p>its capacity grows automatically.  The details of the growth policy are not</p>
</li>
<li><p>specified beyond the fact that adding an element has constant amortized</p>
</li>
<li><p>time cost.</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">each 每个，each other互相  </span><br><span class="line">每个ArrayList实例都有一个capacity,capacity电梯里面有，我看到过，容量，就是能够乘载人数容量的那个  </span><br><span class="line">这个容量是数组的大小，被用来存储list当中的元素。  </span><br><span class="line">其总是至少和数组的大小是一样大的。  </span><br><span class="line">我忘了这个as as啥意思了。  </span><br><span class="line">as large as 一样大；at least 至少  </span><br><span class="line">last but <span class="keyword">not</span> least 最后但是同等重要的，突然想起了这个  </span><br><span class="line">最为元素是要被添加到一个ArrayList集合当中去的，他的容量增长是自动增长的。  </span><br><span class="line">automatically 自动，因为auto是自动的意思吧所以联想自动。  </span><br><span class="line">details 细节；<span class="built_in"> policy </span>政策；specified 指定的；beyond 除了；fact 事实  </span><br><span class="line">这个增长政策的细节是没有指定的除了事实上添加一个元素有常数平摊时间消耗上  </span><br><span class="line">增长策略的细节没有指定，除了添加一个元素有恒定的平摊时间成本。  </span><br><span class="line">我都不知道我在说些什么鬼。</span><br></pre></td></tr></table></figure></li>
<li><p>An application can increase the capacity of an <tt>ArrayList</tt> instance</p></li>
<li><p>before adding a large number of elements using the <tt>ensureCapacity</tt></p>
</li>
<li><p>operation.  This may reduce the amount of incremental reallocation.</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">a</span> <span class="string">large number of 大量的  </span></span><br><span class="line"><span class="attr">increase</span> <span class="string">增加  </span></span><br><span class="line"><span class="meta">一个应用程序能够增长其一个ArrayList实例的容量之前添加一个大数量的元素时使用ensureCapacity</span> <span class="string">确保容量操作</span></span><br><span class="line"><span class="meta">在使用ensureCapacity操作添加大量元素之前，应用程序可以增加一个ArrayList实例的容量</span>  <span class="string"></span></span><br><span class="line"><span class="attr">incremental</span> <span class="string">增量 ；reallocation 重新分配；allocation 分配  </span></span><br><span class="line"><span class="meta">这或许可以减少大数量的增量重新分配.</span>  <span class="string"></span></span><br><span class="line"><span class="attr">amount</span> <span class="string">数量</span></span><br><span class="line"><span class="attr">这可能会减少增量重新分配的数量。</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>Note that this implementation is not synchronized.</strong></p></li>
<li><p>If multiple threads access an <tt>ArrayList</tt> instance concurrently,</p>
</li>
<li><p>and at least one of the threads modifies the list structurally, it</p>
</li>
<li><p><i>must</i> be synchronized externally.  (A structural modification is</p>
</li>
<li><p>any operation that adds or deletes one or more elements, or explicitly</p>
</li>
<li><p>resizes the backing array; merely setting the value of an element is not</p>
</li>
<li><p>a structural modification.)  This is typically accomplished by</p>
</li>
<li><p>synchronizing on some object that naturally encapsulates the list.</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Note 请注意  </span><br><span class="line">请注意这个实现方法并不是同步的。也就是ArrayList非同步。  </span><br><span class="line"><span class="keyword">concurrently</span> 同时  ；structurally 构造，externally 外部</span><br><span class="line">如果多个线程同时访问同一个ArrayList实例，并且至少某一个线程对这个list集合做了结构性的修改的操作，他必须是外部同步的  </span><br><span class="line">explicitly 显示地  </span><br><span class="line">一个构造性修改可以使任意操作比如<span class="keyword">add</span>添加或者<span class="keyword">delete</span>删除某一个或者更多的元素，或者显示地重新调整了数组的大小  </span><br><span class="line">backing <span class="keyword">array</span> 备份数组 ；modification 修改  </span><br><span class="line">仅仅是设置一个元素的值是不需要一个构造性的修改的  </span><br><span class="line">accomplished  完成 ；typically 通常 ；naturally自然；encapsulates封装  </span><br><span class="line">这是通常完成同步在某些自然封装的list对象上  </span><br><span class="line">这通常是通过对一些自然封装list的对象进行同步来实现的。</span><br></pre></td></tr></table></figure></li>
<li><p>If no such object exists, the list should be “wrapped” using the</p>
</li>
<li><p>{@link Collections#synchronizedList Collections.synchronizedList}</p>
</li>
<li><p>method.  This is best done at creation time, to prevent accidental</p>
</li>
<li><p>unsynchronized access to the list:<pre></pre></p>
</li>
<li><p>List list = Collections.synchronizedList(new ArrayList(...));</p>
<figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果没有这样的对象存在，这个<span class="keyword">list</span>集合应该是封装的，使用&#123;<span class="meta">@link</span> Collections<span class="comment">#synchronizedList Collections.synchronizedList&#125;方法，同步集合。  </span></span><br><span class="line">prevent 防止；accidental 意外  </span><br><span class="line">这是最好的做法在创建时间上，来防止意外的不同步来访问<span class="keyword">list</span>集合</span><br></pre></td></tr></table></figure></li>
<li><p><a name="fail-fast"></a></p></li>
<li><p>The iterators returned by this class’s {@link #iterator() iterator} and</p>
</li>
<li><p>{@link #listIterator(int) listIterator} methods are <em>fail-fast</em>:</p>
</li>
<li><p>if the list is structurally modified at any time after the iterator is</p>
</li>
<li><p>created, in any way except through the iterator’s own</p>
</li>
<li><p>{@link ListIterator#remove() remove} or</p>
</li>
<li><p>{@link ListIterator#add(Object) add} methods, the iterator will throw a</p>
</li>
<li><p>{@link ConcurrentModificationException}.  Thus, in the face of</p>
</li>
<li><p>concurrent modification, the iterator fails quickly and cleanly, rather</p>
</li>
<li><p>than risking arbitrary, non-deterministic behavior at an undetermined</p>
</li>
<li><p>time in the future.</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">超链接：快速失败  </span><br><span class="line">这个迭代器通过类的iterator以及listIterator方法返回是快速失败的。  </span><br><span class="line">如果<span class="built_in">list</span>是构造性修改在迭代器创建的任何时间之后，在任何方法当中除了迭代器自身  </span><br><span class="line">如果再迭代器创建后的任何时候对<span class="built_in">list</span>集合进行了结构上的修改，则可以使用除了迭代器本身之外的方式进行修改</span><br></pre></td></tr></table></figure></li>
<li><p>Note that the fail-fast behavior of an iterator cannot be guaranteed</p></li>
<li><p>as it is, generally speaking, impossible to make any hard guarantees in the</p>
</li>
<li><p>presence of unsynchronized concurrent modification.  Fail-fast iterators</p>
</li>
<li><p>throw {@code ConcurrentModificationException} on a best-effort basis.</p>
</li>
<li><p>Therefore, it would be wrong to write a program that depended on this</p>
</li>
<li><p>exception for its correctness:  <i>the fail-fast behavior of iterators</i></p>
</li>
<li><p>should be used only to detect bugs.</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">guarantees</span> <span class="string">担保；presence存在 ；impossible 不可能的</span></span><br><span class="line"><span class="meta">请注意快速失败</span> <span class="string">一个迭代器不能够担保作为他自身的行为，通常来说，来制作困难的担保存在在不同步且同时修改是不可能的。  </span></span><br><span class="line"><span class="meta">在不同步并发修改的情况下，不可能做出任何严格的保证。</span>  <span class="string"></span></span><br><span class="line"><span class="attr">concurrent</span> <span class="string">并发  </span></span><br><span class="line"><span class="meta">快速失败</span> <span class="string">迭代器应发的 并发修改异常 在一个最好的努力基础上。  </span></span><br><span class="line"><span class="meta">尽最大努力抛出并发修改异常。</span>  <span class="string"></span></span><br><span class="line"><span class="meta">因此，他可能会导致错误的去写一个对于这个错误去依赖这个异常的程序</span>  <span class="string"></span></span><br><span class="line"><span class="attr">detect</span> <span class="string">检测  </span></span><br><span class="line"><span class="meta">快速失败</span> <span class="string">迭代器应该被仅仅使用在检测bug的行为上</span></span><br></pre></td></tr></table></figure></li>
<li><p>This class is a member of the</p></li>
<li><a href="{@docRoot}/../technotes/guides/collections/index.html"></a></li>
<li><p>Java Collections Framework.</p>
</li>
<li></li>
<li><p>@author  Josh Bloch</p>
</li>
<li><p>@author  Neal Gafter</p>
</li>
<li><p>@see     Collection</p>
</li>
<li><p>@see     List</p>
</li>
<li><p>@see     LinkedList</p>
</li>
<li><p>@see     Vector</p>
</li>
<li><p>@since   1.2</p>
</li>
<li><p>/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java集合框架</span><br></pre></td></tr></table></figure>
<p>public class ArrayList<E> extends AbstractList<E></E></E></p>
<pre><code>implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</code></pre><p>{</p>
<figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;&gt; 可以泛型，继承了父类AbstractList 抽象<span class="built_in">List</span>，实现了接口<span class="built_in">List</span>，RandomAccess随机访问? 可可隆化，以及序列化这几个接口。</span><br></pre></td></tr></table></figure>

<p>  private static final long serialVersionUID = 8683452581122892189L;//定义了一个常量 序列化版本uid</p>
<p>  /**</p>
<ul>
<li><p>Default initial capacity.</p>
</li>
<li><p>/<br>private static final int DEFAULT_CAPACITY = 10;</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认一个初始化容量。  </span><br><span class="line">默认的这个容量的值为<span class="number">10</span>，也就是说这个ArrayList里面默认能放<span class="number">10</span>个object</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Shared empty array instance used for empty instances.</p>
</li>
<li><p>/<br>private static final Object[] EMPTY_ELEMENTDATA = {};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">分享空的数组实例给空的实例数组</span><br></pre></td></tr></table></figure>

<p>/**</p>
</li>
<li><p>Shared empty array instance used for default sized empty instances. We</p>
</li>
<li><p>distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when</p>
</li>
<li><p>first element is added.</p>
</li>
<li><p>/<br>private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">distinguish </span>区分；inflate 膨胀  </span><br><span class="line">分享空的数组实例使用给默认大小的空的实例。 我们区分这个是来自于一个空元素数组  ，来知道当第一个元素被添加时会膨胀多少  </span><br><span class="line">我们将其与EMPTY_ELEMENTDATA区分开来，以了解在添加第一个元素时应该膨胀多少</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>The array buffer into which the elements of the ArrayList are stored.</p>
</li>
<li><p>The capacity of the ArrayList is the length of this array buffer. Any</p>
</li>
<li><p>empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</p>
</li>
<li><p>will be expanded to DEFAULT_CAPACITY when the first element is added.</p>
</li>
<li><p>/<br>transient Object[] elementData; // non-private to simplify nested class access</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">被ArrayList所存储的元素会被缓冲到数组当中去。  </span><br><span class="line">存储ArrayList元素的数组缓冲区。  </span><br><span class="line">这个ArrayList的容量是数组缓冲区的长度。  </span><br><span class="line">任何一个空的ArrayList以及他的数组 等于等于 默认容量空元素数组 将会被扩展到默认容量当第一个元素被添加的时候。</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>The size of the ArrayList (the number of elements it contains).</p>
</li>
<li><p>@serial</p>
</li>
<li><p>/<br>private int size;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">定义这个ArrayList集合的大小，也就是这个集合当中所包含的元素个数</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs an empty list with the specified initial capacity.</p>
</li>
<li></li>
<li><p>@param  initialCapacity  the initial capacity of the list</p>
</li>
<li><p>@throws IllegalArgumentException if the specified initial capacity</p>
</li>
<li><p>is negative</p>
</li>
<li><p>/<br>public ArrayList(int initialCapacity) {<br>  if (initialCapacity &gt; 0) {</p>
<pre><code>this.elementData = new Object[initialCapacity];</code></pre><p>  } else if (initialCapacity == 0) {</p>
<pre><code>this.elementData = EMPTY_ELEMENTDATA;</code></pre><p>  } else {</p>
<pre><code>throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                   initialCapacity);</code></pre><p>  }<br>}</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造一个空的<span class="type">list</span>集合以及指定初始化的容量。  </span><br><span class="line">initalCapacity <span class="type">list</span>集合当中初始化容量大小，当前为构造方法，普通方法为：访问修饰+返回类型+方法名称+方法参数+方法体</span><br><span class="line">如果初始化容量大小大于<span class="number">0</span>，则元素数组构建一个Object数组，当中初始容量为初始化容量大小</span><br><span class="line">如果初始化容量大小等于<span class="number">0</span>，则元素数组则是一个空数组，即所定义的空数组</span><br><span class="line">如果初始化容量大小既不大于<span class="number">0</span>也不是等于<span class="number">0</span>，那就是小于<span class="number">0</span>，为负数了，那么则抛出异常，非法参数异常，非法容量+所需要初始化容量的大小值</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs an empty list with an initial capacity of ten.</p>
</li>
<li><p>/<br>public ArrayList() {<br>  this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>}</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">构造方法是一个空的<span class="type">list</span>集合，并带有默认的初始化容量为<span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs a list containing the elements of the specified</p>
</li>
<li><p>collection, in the order they are returned by the collection’s</p>
</li>
<li><p>iterator.</p>
</li>
<li></li>
<li><p>@param c the collection whose elements are to be placed into this list</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public ArrayList(Collection&lt;? extends E&gt; c) {<br>  elementData = c.toArray();<br>  if ((size = elementData.length) != 0) {</p>
<pre><code>// c.toArray might (incorrectly) not return Object[] (see 6260652)
if (elementData.getClass() != Object[].class)
    elementData = Arrays.copyOf(elementData, size, Object[].class);</code></pre><p>  } else {</p>
<pre><code>// replace with empty array.
this.elementData = EMPTY_ELEMENTDATA;</code></pre><p>  }<br>}</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">构造一个list集合，该list集合包含指定集合当中的元素，通过集合的迭代按照他们返回的顺序  </span><br><span class="line">参数c为元素将被替换到list当中的集合  </span><br><span class="line">抛出空指针异常如果该指定的集合为空  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">Object</span>[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;  </span><br><span class="line">elementData原来就是一个空数组，现在重新赋值为一个新的数组，即该集合数组化成为一个数组。  </span><br><span class="line">对<span class="built_in">size</span>变量进行赋值，<span class="built_in">size</span>即为数组elementData的长度，如果<span class="built_in">size</span>不为<span class="number">0</span>，则  </span><br><span class="line">incorrectly 不正确  </span><br><span class="line">集合c数组后之后可能错误的不能返回对象数组  </span><br><span class="line">如果数组elementData的反射不等于<span class="keyword">Object</span>[]数组的反射，即两者如果不是同出一宗的话  </span><br><span class="line">数组elementData将又被重新赋值，数组的复制，复制的数组elementData，复制的个数，以<span class="keyword">Object</span>[]对象数组的形式  </span><br><span class="line">如果elementData的长度为<span class="number">0</span>，则elementData数组则将被重新赋值为  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">Object</span>[] EMPTY_ELEMENTDATA = &#123;&#125;;空数组</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Trims the capacity of this <tt>ArrayList</tt> instance to be the</p>
</li>
<li><p>list’s current size.  An application can use this operation to minimize</p>
</li>
<li><p>the storage of an <tt>ArrayList</tt> instance.</p>
</li>
<li><p>/<br>public void trimToSize() {<br>  modCount++;<br>  if (size &lt; elementData.length) {</p>
<pre><code>elementData = (size == 0)
  ? EMPTY_ELEMENTDATA
  : Arrays.copyOf(elementData, size);</code></pre><p>  }<br>}</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">trim 修剪；  </span><br><span class="line">修剪ArrayList实例的容量来成为这个<span class="built_in">list</span>集合的当前<span class="built_in">size</span>数量  </span><br><span class="line">minimize 最小化；  </span><br><span class="line">一个应用程序能够使用该操作来最小化一个ArrayList实例的存储量  </span><br><span class="line">该类ArrayList当中没有定影modCount，应该是继承的父类当中的变量。  </span><br><span class="line">修改次数自增。  </span><br><span class="line">如果<span class="built_in">size</span>变量小于elementData数组的长度，则对elementData数组进行重新复制，三元换算法，如果<span class="built_in">size</span>为<span class="number">0</span>则elementData取值为空数组，否则进行复制elementData当中的<span class="built_in">size</span>个元素成为一个新数组并赋值给elementData。</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Increases the capacity of this <tt>ArrayList</tt> instance, if</p>
</li>
<li><p>necessary, to ensure that it can hold at least the number of elements</p>
</li>
<li><p>specified by the minimum capacity argument.</p>
</li>
<li></li>
<li><p>@param   minCapacity   the desired minimum capacity</p>
</li>
<li><p>/<br>public void ensureCapacity(int minCapacity) {<br>  int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)</p>
<pre><code>// any size if not default element table
? 0
// larger than default for default empty table. It&apos;s already
// supposed to be at default size.
: DEFAULT_CAPACITY;</code></pre><p>  if (minCapacity &gt; minExpand) {</p>
<pre><code>ensureExplicitCapacity(minCapacity);</code></pre><p>  }<br>}</p>
<p>private static int calculateCapacity(Object[] elementData, int minCapacity) {<br>  if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {</p>
<pre><code>return Math.max(DEFAULT_CAPACITY, minCapacity);</code></pre><p>  }<br>  return minCapacity;<br>}</p>
<p>private void ensureCapacityInternal(int minCapacity) {<br>  ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));<br>}</p>
<p>private void ensureExplicitCapacity(int minCapacity) {<br>  modCount++;</p>
<p>  // overflow-conscious code<br>  if (minCapacity - elementData.length &gt; 0)</p>
<pre><code>grow(minCapacity);</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>The maximum size of array to allocate.</p>
</li>
<li><p>Some VMs reserve some header words in an array.</p>
</li>
<li><p>Attempts to allocate larger arrays may result in</p>
</li>
<li><p>OutOfMemoryError: Requested array size exceeds VM limit</p>
</li>
<li><p>/<br>private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</p>
<p>/**</p>
</li>
<li><p>Increases the capacity to ensure that it can hold at least the</p>
</li>
<li><p>number of elements specified by the minimum capacity argument.</p>
</li>
<li></li>
<li><p>@param minCapacity the desired minimum capacity</p>
</li>
<li><p>/<br>private void grow(int minCapacity) {<br>  // overflow-conscious code<br>  int oldCapacity = elementData.length;<br>  int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);<br>  if (newCapacity - minCapacity &lt; 0)</p>
<pre><code>newCapacity = minCapacity;</code></pre><p>  if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</p>
<pre><code>newCapacity = hugeCapacity(minCapacity);</code></pre><p>  // minCapacity is usually close to size, so this is a win:<br>  elementData = Arrays.copyOf(elementData, newCapacity);<br>}</p>
<p>private static int hugeCapacity(int minCapacity) {<br>  if (minCapacity &lt; 0) // overflow</p>
<pre><code>throw new OutOfMemoryError();</code></pre><p>  return (minCapacity &gt; MAX_ARRAY_SIZE) ?</p>
<pre><code>Integer.MAX_VALUE :
MAX_ARRAY_SIZE;</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>Returns the number of elements in this list.</p>
</li>
<li></li>
<li><p>@return the number of elements in this list</p>
</li>
<li><p>/<br>public int size() {<br>  return size;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns <tt>true</tt> if this list contains no elements.</p>
</li>
<li></li>
<li><p>@return <tt>true</tt> if this list contains no elements</p>
</li>
<li><p>/<br>public boolean isEmpty() {<br>  return size == 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns <tt>true</tt> if this list contains the specified element.</p>
</li>
<li><p>More formally, returns <tt>true</tt> if and only if this list contains</p>
</li>
<li><p>at least one element <tt>e</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;e==null&nbsp;:&nbsp;o.equals(e))</tt>.</p>
</li>
<li></li>
<li><p>@param o element whose presence in this list is to be tested</p>
</li>
<li><p>@return <tt>true</tt> if this list contains the specified element</p>
</li>
<li><p>/<br>public boolean contains(Object o) {<br>  return indexOf(o) &gt;= 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the index of the first occurrence of the specified element</p>
</li>
<li><p>in this list, or -1 if this list does not contain the element.</p>
</li>
<li><p>More formally, returns the lowest index <tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt>,</p>
</li>
<li><p>or -1 if there is no such index.</p>
</li>
<li><p>/<br>public int indexOf(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int i = 0; i &lt; size; i++)
    if (elementData[i]==null)
        return i;</code></pre><p>  } else {</p>
<pre><code>for (int i = 0; i &lt; size; i++)
    if (o.equals(elementData[i]))
        return i;</code></pre><p>  }<br>  return -1;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the index of the last occurrence of the specified element</p>
</li>
<li><p>in this list, or -1 if this list does not contain the element.</p>
</li>
<li><p>More formally, returns the highest index <tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt>,</p>
</li>
<li><p>or -1 if there is no such index.</p>
</li>
<li><p>/<br>public int lastIndexOf(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int i = size-1; i &gt;= 0; i--)
    if (elementData[i]==null)
        return i;</code></pre><p>  } else {</p>
<pre><code>for (int i = size-1; i &gt;= 0; i--)
    if (o.equals(elementData[i]))
        return i;</code></pre><p>  }<br>  return -1;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a shallow copy of this <tt>ArrayList</tt> instance.  (The</p>
</li>
<li><p>elements themselves are not copied.)</p>
</li>
<li></li>
<li><p>@return a clone of this <tt>ArrayList</tt> instance</p>
</li>
<li><p>/<br>public Object clone() {<br>  try {</p>
<pre><code>ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone();
v.elementData = Arrays.copyOf(elementData, size);
v.modCount = 0;
return v;</code></pre><p>  } catch (CloneNotSupportedException e) {</p>
<pre><code>// this shouldn&apos;t happen, since we are Cloneable
throw new InternalError(e);</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns an array containing all of the elements in this list</p>
</li>
<li><p>in proper sequence (from first to last element).</p>
</li>
<li></li>
<li><p>The returned array will be "safe" in that no references to it are</p></li>
<li><p>maintained by this list.  (In other words, this method must allocate</p>
</li>
<li><p>a new array).  The caller is thus free to modify the returned array.</p>
</li>
<li></li>
<li><p>This method acts as bridge between array-based and collection-based</p></li>
<li><p>APIs.</p>
</li>
<li></li>
<li><p>@return an array containing all of the elements in this list in</p>
</li>
<li><p>proper sequence</p>
</li>
<li><p>/<br>public Object[] toArray() {<br>  return Arrays.copyOf(elementData, size);<br>}</p>
<p>/**</p>
</li>
<li><p>Returns an array containing all of the elements in this list in proper</p>
</li>
<li><p>sequence (from first to last element); the runtime type of the returned</p>
</li>
<li><p>array is that of the specified array.  If the list fits in the</p>
</li>
<li><p>specified array, it is returned therein.  Otherwise, a new array is</p>
</li>
<li><p>allocated with the runtime type of the specified array and the size of</p>
</li>
<li><p>this list.</p>
</li>
<li></li>
<li><p>If the list fits in the specified array with room to spare</p></li>
<li><p>(i.e., the array has more elements than the list), the element in</p>
</li>
<li><p>the array immediately following the end of the collection is set to</p>
</li>
<li><p><tt>null</tt>.  (This is useful in determining the length of the</p>
</li>
<li><p>list <i>only</i> if the caller knows that the list does not contain</p>
</li>
<li><p>any null elements.)</p>
</li>
<li></li>
<li><p>@param a the array into which the elements of the list are to</p>
</li>
<li><p>be stored, if it is big enough; otherwise, a new array of the</p>
</li>
<li><p>same runtime type is allocated for this purpose.</p>
</li>
<li><p>@return an array containing the elements of the list</p>
</li>
<li><p>@throws ArrayStoreException if the runtime type of the specified array</p>
</li>
<li><p>is not a supertype of the runtime type of every element in</p>
</li>
<li><p>this list</p>
</li>
<li><p>@throws NullPointerException if the specified array is null</p>
</li>
<li><p>/<br>@SuppressWarnings(“unchecked”)<br>public <T> T[] toArray(T[] a) {<br>  if (a.length &lt; size)</T></p>
<pre><code>// Make a new array of a&apos;s runtime type, but my contents:
return (T[]) Arrays.copyOf(elementData, size, a.getClass());</code></pre><p>  System.arraycopy(elementData, 0, a, 0, size);<br>  if (a.length &gt; size)</p>
<pre><code>a[size] = null;</code></pre><p>  return a;<br>}</p>
<p>// Positional Access Operations</p>
<p>@SuppressWarnings(“unchecked”)<br>E elementData(int index) {<br>  return (E) elementData[index];<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the element at the specified position in this list.</p>
</li>
<li></li>
<li><p>@param  index index of the element to return</p>
</li>
<li><p>@return the element at the specified position in this list</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E get(int index) {<br>  rangeCheck(index);</p>
<p>  return elementData(index);<br>}</p>
<p>/**</p>
</li>
<li><p>Replaces the element at the specified position in this list with</p>
</li>
<li><p>the specified element.</p>
</li>
<li></li>
<li><p>@param index index of the element to replace</p>
</li>
<li><p>@param element element to be stored at the specified position</p>
</li>
<li><p>@return the element previously at the specified position</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E set(int index, E element) {<br>  rangeCheck(index);</p>
<p>  E oldValue = elementData(index);<br>  elementData[index] = element;<br>  return oldValue;<br>}</p>
<p>/**</p>
</li>
<li><p>Appends the specified element to the end of this list.</p>
</li>
<li></li>
<li><p>@param e element to be appended to this list</p>
</li>
<li><p>@return <tt>true</tt> (as specified by {@link Collection#add})</p>
</li>
<li><p>/<br>public boolean add(E e) {<br>  ensureCapacityInternal(size + 1);  // Increments modCount!!<br>  elementData[size++] = e;<br>  return true;<br>}</p>
<p>/**</p>
</li>
<li><p>Inserts the specified element at the specified position in this</p>
</li>
<li><p>list. Shifts the element currently at that position (if any) and</p>
</li>
<li><p>any subsequent elements to the right (adds one to their indices).</p>
</li>
<li></li>
<li><p>@param index index at which the specified element is to be inserted</p>
</li>
<li><p>@param element element to be inserted</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public void add(int index, E element) {<br>  rangeCheckForAdd(index);</p>
<p>  ensureCapacityInternal(size + 1);  // Increments modCount!!<br>  System.arraycopy(elementData, index, elementData, index + 1,</p>
<pre><code>size - index);</code></pre><p>  elementData[index] = element;<br>  size++;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes the element at the specified position in this list.</p>
</li>
<li><p>Shifts any subsequent elements to the left (subtracts one from their</p>
</li>
<li><p>indices).</p>
</li>
<li></li>
<li><p>@param index the index of the element to be removed</p>
</li>
<li><p>@return the element that was removed from the list</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E remove(int index) {<br>  rangeCheck(index);</p>
<p>  modCount++;<br>  E oldValue = elementData(index);</p>
<p>  int numMoved = size - index - 1;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index+1, elementData, index,
                 numMoved);</code></pre><p>  elementData[–size] = null; // clear to let GC do its work</p>
<p>  return oldValue;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes the first occurrence of the specified element from this list,</p>
</li>
<li><p>if it is present.  If the list does not contain the element, it is</p>
</li>
<li><p>unchanged.  More formally, removes the element with the lowest index</p>
</li>
<li><p><tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt></p>
</li>
<li><p>(if such an element exists).  Returns <tt>true</tt> if this list</p>
</li>
<li><p>contained the specified element (or equivalently, if this list</p>
</li>
<li><p>changed as a result of the call).</p>
</li>
<li></li>
<li><p>@param o element to be removed from this list, if present</p>
</li>
<li><p>@return <tt>true</tt> if this list contained the specified element</p>
</li>
<li><p>/<br>public boolean remove(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int index = 0; index &lt; size; index++)
    if (elementData[index] == null) {
        fastRemove(index);
        return true;
    }</code></pre><p>  } else {</p>
<pre><code>for (int index = 0; index &lt; size; index++)
    if (o.equals(elementData[index])) {
        fastRemove(index);
        return true;
    }</code></pre><p>  }<br>  return false;<br>}</p>
<p>/*</p>
</li>
<li><p>Private remove method that skips bounds checking and does not</p>
</li>
<li><p>return the value removed.</p>
</li>
<li><p>/<br>private void fastRemove(int index) {<br>  modCount++;<br>  int numMoved = size - index - 1;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index+1, elementData, index,
                 numMoved);</code></pre><p>  elementData[–size] = null; // clear to let GC do its work<br>}</p>
<p>/**</p>
</li>
<li><p>Removes all of the elements from this list.  The list will</p>
</li>
<li><p>be empty after this call returns.</p>
</li>
<li><p>/<br>public void clear() {<br>  modCount++;</p>
<p>  // clear to let GC do its work<br>  for (int i = 0; i &lt; size; i++)</p>
<pre><code>elementData[i] = null;</code></pre><p>  size = 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Appends all of the elements in the specified collection to the end of</p>
</li>
<li><p>this list, in the order that they are returned by the</p>
</li>
<li><p>specified collection’s Iterator.  The behavior of this operation is</p>
</li>
<li><p>undefined if the specified collection is modified while the operation</p>
</li>
<li><p>is in progress.  (This implies that the behavior of this call is</p>
</li>
<li><p>undefined if the specified collection is this list, and this</p>
</li>
<li><p>list is nonempty.)</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be added to this list</p>
</li>
<li><p>@return <tt>true</tt> if this list changed as a result of the call</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public boolean addAll(Collection&lt;? extends E&gt; c) {<br>  Object[] a = c.toArray();<br>  int numNew = a.length;<br>  ensureCapacityInternal(size + numNew);  // Increments modCount<br>  System.arraycopy(a, 0, elementData, size, numNew);<br>  size += numNew;<br>  return numNew != 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Inserts all of the elements in the specified collection into this</p>
</li>
<li><p>list, starting at the specified position.  Shifts the element</p>
</li>
<li><p>currently at that position (if any) and any subsequent elements to</p>
</li>
<li><p>the right (increases their indices).  The new elements will appear</p>
</li>
<li><p>in the list in the order that they are returned by the</p>
</li>
<li><p>specified collection’s iterator.</p>
</li>
<li></li>
<li><p>@param index index at which to insert the first element from the</p>
</li>
<li><p>specified collection</p>
</li>
<li><p>@param c collection containing elements to be added to this list</p>
</li>
<li><p>@return <tt>true</tt> if this list changed as a result of the call</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public boolean addAll(int index, Collection&lt;? extends E&gt; c) {<br>  rangeCheckForAdd(index);</p>
<p>  Object[] a = c.toArray();<br>  int numNew = a.length;<br>  ensureCapacityInternal(size + numNew);  // Increments modCount</p>
<p>  int numMoved = size - index;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index, elementData, index + numNew,
                 numMoved);</code></pre><p>  System.arraycopy(a, 0, elementData, index, numNew);<br>  size += numNew;<br>  return numNew != 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes from this list all of the elements whose index is between</p>
</li>
<li><p>{@code fromIndex}, inclusive, and {@code toIndex}, exclusive.</p>
</li>
<li><p>Shifts any succeeding elements to the left (reduces their index).</p>
</li>
<li><p>This call shortens the list by {@code (toIndex - fromIndex)} elements.</p>
</li>
<li><p>(If {@code toIndex==fromIndex}, this operation has no effect.)</p>
</li>
<li></li>
<li><p>@throws IndexOutOfBoundsException if {@code fromIndex} or</p>
</li>
<li><p>{@code toIndex} is out of range</p>
</li>
<li><p>({@code fromIndex &lt; 0 ||</p>
</li>
<li><p>fromIndex &gt;= size() ||</p>
</li>
<li><p>toIndex &gt; size() ||</p>
</li>
<li><p>toIndex &lt; fromIndex})</p>
</li>
<li><p>/<br>protected void removeRange(int fromIndex, int toIndex) {<br>  modCount++;<br>  int numMoved = size - toIndex;<br>  System.arraycopy(elementData, toIndex, elementData, fromIndex,</p>
<pre><code>numMoved);</code></pre><p>  // clear to let GC do its work<br>  int newSize = size - (toIndex-fromIndex);<br>  for (int i = newSize; i &lt; size; i++) {</p>
<pre><code>elementData[i] = null;</code></pre><p>  }<br>  size = newSize;<br>}</p>
<p>/**</p>
</li>
<li><p>Checks if the given index is in range.  If not, throws an appropriate</p>
</li>
<li><p>runtime exception.  This method does <em>not</em> check if the index is</p>
</li>
<li><p>negative: It is always used immediately prior to an array access,</p>
</li>
<li><p>which throws an ArrayIndexOutOfBoundsException if index is negative.</p>
</li>
<li><p>/<br>private void rangeCheck(int index) {<br>  if (index &gt;= size)</p>
<pre><code>throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>A version of rangeCheck used by add and addAll.</p>
</li>
<li><p>/<br>private void rangeCheckForAdd(int index) {<br>  if (index &gt; size || index &lt; 0)</p>
<pre><code>throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>Constructs an IndexOutOfBoundsException detail message.</p>
</li>
<li><p>Of the many possible refactorings of the error handling code,</p>
</li>
<li><p>this “outlining” performs best with both server and client VMs.</p>
</li>
<li><p>/<br>private String outOfBoundsMsg(int index) {<br>  return “Index: “+index+”, Size: “+size;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes from this list all of its elements that are contained in the</p>
</li>
<li><p>specified collection.</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be removed from this list</p>
</li>
<li><p>@return {@code true} if this list changed as a result of the call</p>
</li>
<li><p>@throws ClassCastException if the class of an element of this list</p>
</li>
<li><p>is incompatible with the specified collection</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>)</p>
</li>
<li><p>@throws NullPointerException if this list contains a null element and the</p>
</li>
<li><p>specified collection does not permit null elements</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>),</p>
</li>
<li><p>or if the specified collection is null</p>
</li>
<li><p>@see Collection#contains(Object)</p>
</li>
<li><p>/<br>public boolean removeAll(Collection&lt;?&gt; c) {<br>  Objects.requireNonNull(c);<br>  return batchRemove(c, false);<br>}</p>
<p>/**</p>
</li>
<li><p>Retains only the elements in this list that are contained in the</p>
</li>
<li><p>specified collection.  In other words, removes from this list all</p>
</li>
<li><p>of its elements that are not contained in the specified collection.</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be retained in this list</p>
</li>
<li><p>@return {@code true} if this list changed as a result of the call</p>
</li>
<li><p>@throws ClassCastException if the class of an element of this list</p>
</li>
<li><p>is incompatible with the specified collection</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>)</p>
</li>
<li><p>@throws NullPointerException if this list contains a null element and the</p>
</li>
<li><p>specified collection does not permit null elements</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>),</p>
</li>
<li><p>or if the specified collection is null</p>
</li>
<li><p>@see Collection#contains(Object)</p>
</li>
<li><p>/<br>public boolean retainAll(Collection&lt;?&gt; c) {<br>  Objects.requireNonNull(c);<br>  return batchRemove(c, true);<br>}</p>
<p>private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) {<br>  final Object[] elementData = this.elementData;<br>  int r = 0, w = 0;<br>  boolean modified = false;<br>  try {</p>
<pre><code>for (; r &lt; size; r++)
    if (c.contains(elementData[r]) == complement)
        elementData[w++] = elementData[r];</code></pre><p>  } finally {</p>
<pre><code>// Preserve behavioral compatibility with AbstractCollection,
// even if c.contains() throws.
if (r != size) {
    System.arraycopy(elementData, r,
                     elementData, w,
                     size - r);
    w += size - r;
}
if (w != size) {
    // clear to let GC do its work
    for (int i = w; i &lt; size; i++)
        elementData[i] = null;
    modCount += size - w;
    size = w;
    modified = true;
}</code></pre><p>  }<br>  return modified;<br>}</p>
<p>/**</p>
</li>
<li><p>Save the state of the <tt>ArrayList</tt> instance to a stream (that</p>
</li>
<li><p>is, serialize it).</p>
</li>
<li></li>
<li><p>@serialData The length of the array backing the <tt>ArrayList</tt></p>
</li>
<li><p>instance is emitted (int), followed by all of its elements</p>
</li>
<li><p>(each an <tt>Object</tt>) in the proper order.</p>
</li>
<li><p>/<br>private void writeObject(java.io.ObjectOutputStream s)<br>  throws java.io.IOException{<br>  // Write out element count, and any hidden stuff<br>  int expectedModCount = modCount;<br>  s.defaultWriteObject();</p>
<p>  // Write out size as capacity for behavioural compatibility with clone()<br>  s.writeInt(size);</p>
<p>  // Write out all elements in the proper order.<br>  for (int i=0; i&lt;size; i++) {</p>
<pre><code>s.writeObject(elementData[i]);</code></pre><p>  }</p>
<p>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Reconstitute the <tt>ArrayList</tt> instance from a stream (that is,</p>
</li>
<li><p>deserialize it).</p>
</li>
<li><p>/<br>private void readObject(java.io.ObjectInputStream s)<br>  throws java.io.IOException, ClassNotFoundException {<br>  elementData = EMPTY_ELEMENTDATA;</p>
<p>  // Read in size, and any hidden stuff<br>  s.defaultReadObject();</p>
<p>  // Read in capacity<br>  s.readInt(); // ignored</p>
<p>  if (size &gt; 0) {</p>
<pre><code>// be like clone(), allocate array based upon size not capacity
int capacity = calculateCapacity(elementData, size);
SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);
ensureCapacityInternal(size);

Object[] a = elementData;
// Read in all elements in the proper order.
for (int i=0; i&lt;size; i++) {
    a[i] = s.readObject();
}</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a list iterator over the elements in this list (in proper</p>
</li>
<li><p>sequence), starting at the specified position in the list.</p>
</li>
<li><p>The specified index indicates the first element that would be</p>
</li>
<li><p>returned by an initial call to {@link ListIterator#next next}.</p>
</li>
<li><p>An initial call to {@link ListIterator#previous previous} would</p>
</li>
<li><p>return the element with the specified index minus one.</p>
</li>
<li></li>
<li><p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public ListIterator<E> listIterator(int index) {<br>  if (index &lt; 0 || index &gt; size)</E></p>
<pre><code>throw new IndexOutOfBoundsException(&quot;Index: &quot;+index);</code></pre><p>  return new ListItr(index);<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a list iterator over the elements in this list (in proper</p>
</li>
<li><p>sequence).</p>
</li>
<li></li>
<li><p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@see #listIterator(int)</p>
</li>
<li><p>/<br>public ListIterator<E> listIterator() {<br>  return new ListItr(0);<br>}</E></p>
<p>/**</p>
</li>
<li><p>Returns an iterator over the elements in this list in proper sequence.</p>
</li>
<li></li>
<li><p>The returned iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@return an iterator over the elements in this list in proper sequence</p>
</li>
<li><p>/<br>public Iterator<E> iterator() {<br>  return new Itr();<br>}</E></p>
<p>/**</p>
</li>
<li><p>An optimized version of AbstractList.Itr</p>
</li>
<li><p>/<br>private class Itr implements Iterator<E> {<br>  int cursor;       // index of next element to return<br>  int lastRet = -1; // index of last element returned; -1 if no such<br>  int expectedModCount = modCount;</E></p>
<p>  Itr() {}</p>
<p>  public boolean hasNext() {</p>
<pre><code>return cursor != size;</code></pre><p>  }</p>
<p>  @SuppressWarnings(“unchecked”)<br>  public E next() {</p>
<pre><code>checkForComodification();
int i = cursor;
if (i &gt;= size)
    throw new NoSuchElementException();
Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length)
    throw new ConcurrentModificationException();
cursor = i + 1;
return (E) elementData[lastRet = i];</code></pre><p>  }</p>
<p>  public void remove() {</p>
<pre><code>if (lastRet &lt; 0)
    throw new IllegalStateException();
checkForComodification();

try {
    ArrayList.this.remove(lastRet);
    cursor = lastRet;
    lastRet = -1;
    expectedModCount = modCount;
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }</p>
<p>  @Override<br>  @SuppressWarnings(“unchecked”)<br>  public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {</p>
<pre><code>Objects.requireNonNull(consumer);
final int size = ArrayList.this.size;
int i = cursor;
if (i &gt;= size) {
    return;
}
final Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length) {
    throw new ConcurrentModificationException();
}
while (i != size &amp;&amp; modCount == expectedModCount) {
    consumer.accept((E) elementData[i++]);
}
// update once at end of iteration to reduce heap write traffic
cursor = i;
lastRet = i - 1;
checkForComodification();</code></pre><p>  }</p>
<p>  final void checkForComodification() {</p>
<pre><code>if (modCount != expectedModCount)
    throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>An optimized version of AbstractList.ListItr</p>
</li>
<li><p>/<br>private class ListItr extends Itr implements ListIterator<E> {<br>  ListItr(int index) {</E></p>
<pre><code>super();
cursor = index;</code></pre><p>  }</p>
<p>  public boolean hasPrevious() {</p>
<pre><code>return cursor != 0;</code></pre><p>  }</p>
<p>  public int nextIndex() {</p>
<pre><code>return cursor;</code></pre><p>  }</p>
<p>  public int previousIndex() {</p>
<pre><code>return cursor - 1;</code></pre><p>  }</p>
<p>  @SuppressWarnings(“unchecked”)<br>  public E previous() {</p>
<pre><code>checkForComodification();
int i = cursor - 1;
if (i &lt; 0)
    throw new NoSuchElementException();
Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length)
    throw new ConcurrentModificationException();
cursor = i;
return (E) elementData[lastRet = i];</code></pre><p>  }</p>
<p>  public void set(E e) {</p>
<pre><code>if (lastRet &lt; 0)
    throw new IllegalStateException();
checkForComodification();

try {
    ArrayList.this.set(lastRet, e);
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }</p>
<p>  public void add(E e) {</p>
<pre><code>checkForComodification();

try {
    int i = cursor;
    ArrayList.this.add(i, e);
    cursor = i + 1;
    lastRet = -1;
    expectedModCount = modCount;
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a view of the portion of this list between the specified</p>
</li>
<li><p>{@code fromIndex}, inclusive, and {@code toIndex}, exclusive.  (If</p>
</li>
<li><p>{@code fromIndex} and {@code toIndex} are equal, the returned list is</p>
</li>
<li><p>empty.)  The returned list is backed by this list, so non-structural</p>
</li>
<li><p>changes in the returned list are reflected in this list, and vice-versa.</p>
</li>
<li><p>The returned list supports all of the optional list operations.</p>
</li>
<li></li>
<li><p>This method eliminates the need for explicit range operations (of</p></li>
<li><p>the sort that commonly exist for arrays).  Any operation that expects</p>
</li>
<li><p>a list can be used as a range operation by passing a subList view</p>
</li>
<li><p>instead of a whole list.  For example, the following idiom</p>
</li>
<li><p>removes a range of elements from a list:</p>
</li>
<li><pre></pre></li>
<li><p>list.subList(from, to).clear();</p>
</li>
<li><p></p>
</li>
<li><p>Similar idioms may be constructed for {@link #indexOf(Object)} and</p>
</li>
<li><p>{@link #lastIndexOf(Object)}, and all of the algorithms in the</p>
</li>
<li><p>{@link Collections} class can be applied to a subList.</p>
</li>
<li></li>
<li><p>The semantics of the list returned by this method become undefined if</p></li>
<li><p>the backing list (i.e., this list) is <i>structurally modified</i> in</p>
</li>
<li><p>any way other than via the returned list.  (Structural modifications are</p>
</li>
<li><p>those that change the size of this list, or otherwise perturb it in such</p>
</li>
<li><p>a fashion that iterations in progress may yield incorrect results.)</p>
</li>
<li></li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>@throws IllegalArgumentException {@inheritDoc}</p>
</li>
<li><p>/<br>public List<E> subList(int fromIndex, int toIndex) {<br>  subListRangeCheck(fromIndex, toIndex, size);<br>  return new SubList(this, 0, fromIndex, toIndex);<br>}</E></p>
<p>static void subListRangeCheck(int fromIndex, int toIndex, int size) {<br>  if (fromIndex &lt; 0)</p>
<pre><code>throw new IndexOutOfBoundsException(&quot;fromIndex = &quot; + fromIndex);</code></pre><p>  if (toIndex &gt; size)</p>
<pre><code>throw new IndexOutOfBoundsException(&quot;toIndex = &quot; + toIndex);</code></pre><p>  if (fromIndex &gt; toIndex)</p>
<pre><code>throw new IllegalArgumentException(&quot;fromIndex(&quot; + fromIndex +
                                   &quot;) &gt; toIndex(&quot; + toIndex + &quot;)&quot;);</code></pre><p>}</p>
<p>private class SubList extends AbstractList<E> implements RandomAccess {<br>  private final AbstractList<E> parent;<br>  private final int parentOffset;<br>  private final int offset;<br>  int size;</E></E></p>
<p>  SubList(AbstractList<E> parent,</E></p>
<pre><code>    int offset, int fromIndex, int toIndex) {
this.parent = parent;
this.parentOffset = fromIndex;
this.offset = offset + fromIndex;
this.size = toIndex - fromIndex;
this.modCount = ArrayList.this.modCount;</code></pre><p>  }</p>
<p>  public E set(int index, E e) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
E oldValue = ArrayList.this.elementData(offset + index);
ArrayList.this.elementData[offset + index] = e;
return oldValue;</code></pre><p>  }</p>
<p>  public E get(int index) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
return ArrayList.this.elementData(offset + index);</code></pre><p>  }</p>
<p>  public int size() {</p>
<pre><code>checkForComodification();
return this.size;</code></pre><p>  }</p>
<p>  public void add(int index, E e) {</p>
<pre><code>rangeCheckForAdd(index);
checkForComodification();
parent.add(parentOffset + index, e);
this.modCount = parent.modCount;
this.size++;</code></pre><p>  }</p>
<p>  public E remove(int index) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
E result = parent.remove(parentOffset + index);
this.modCount = parent.modCount;
this.size--;
return result;</code></pre><p>  }</p>
<p>  protected void removeRange(int fromIndex, int toIndex) {</p>
<pre><code>checkForComodification();
parent.removeRange(parentOffset + fromIndex,
                   parentOffset + toIndex);
this.modCount = parent.modCount;
this.size -= toIndex - fromIndex;</code></pre><p>  }</p>
<p>  public boolean addAll(Collection&lt;? extends E&gt; c) {</p>
<pre><code>return addAll(this.size, c);</code></pre><p>  }</p>
<p>  public boolean addAll(int index, Collection&lt;? extends E&gt; c) {</p>
<pre><code>rangeCheckForAdd(index);
int cSize = c.size();
if (cSize==0)
    return false;

checkForComodification();
parent.addAll(parentOffset + index, c);
this.modCount = parent.modCount;
this.size += cSize;
return true;</code></pre><p>  }</p>
<p>  public Iterator<E> iterator() {</E></p>
<pre><code>return listIterator();</code></pre><p>  }</p>
<p>  public ListIterator<E> listIterator(final int index) {</E></p>
<pre><code>checkForComodification();
rangeCheckForAdd(index);
final int offset = this.offset;

return new ListIterator&lt;E&gt;() {
    int cursor = index;
    int lastRet = -1;
    int expectedModCount = ArrayList.this.modCount;

    public boolean hasNext() {
        return cursor != SubList.this.size;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i &gt;= SubList.this.size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[offset + (lastRet = i)];
    }

    public boolean hasPrevious() {
        return cursor != 0;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E previous() {
        checkForComodification();
        int i = cursor - 1;
        if (i &lt; 0)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i;
        return (E) elementData[offset + (lastRet = i)];
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {
        Objects.requireNonNull(consumer);
        final int size = SubList.this.size;
        int i = cursor;
        if (i &gt;= size) {
            return;
        }
        final Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length) {
            throw new ConcurrentModificationException();
        }
        while (i != size &amp;&amp; modCount == expectedModCount) {
            consumer.accept((E) elementData[offset + (i++)]);
        }
        // update once at end of iteration to reduce heap write traffic
        lastRet = cursor = i;
        checkForComodification();
    }

    public int nextIndex() {
        return cursor;
    }

    public int previousIndex() {
        return cursor - 1;
    }

    public void remove() {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            SubList.this.remove(lastRet);
            cursor = lastRet;
            lastRet = -1;
            expectedModCount = ArrayList.this.modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    public void set(E e) {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.set(offset + lastRet, e);
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    public void add(E e) {
        checkForComodification();

        try {
            int i = cursor;
            SubList.this.add(i, e);
            cursor = i + 1;
            lastRet = -1;
            expectedModCount = ArrayList.this.modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    final void checkForComodification() {
        if (expectedModCount != ArrayList.this.modCount)
            throw new ConcurrentModificationException();
    }
};</code></pre><p>  }</p>
<p>  public List<E> subList(int fromIndex, int toIndex) {</E></p>
<pre><code>subListRangeCheck(fromIndex, toIndex, size);
return new SubList(this, offset, fromIndex, toIndex);</code></pre><p>  }</p>
<p>  private void rangeCheck(int index) {</p>
<pre><code>if (index &lt; 0 || index &gt;= this.size)
    throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>  }</p>
<p>  private void rangeCheckForAdd(int index) {</p>
<pre><code>if (index &lt; 0 || index &gt; this.size)
    throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>  }</p>
<p>  private String outOfBoundsMsg(int index) {</p>
<pre><code>return &quot;Index: &quot;+index+&quot;, Size: &quot;+this.size;</code></pre><p>  }</p>
<p>  private void checkForComodification() {</p>
<pre><code>if (ArrayList.this.modCount != this.modCount)
    throw new ConcurrentModificationException();</code></pre><p>  }</p>
<p>  public Spliterator<E> spliterator() {</E></p>
<pre><code>checkForComodification();
return new ArrayListSpliterator&lt;E&gt;(ArrayList.this, offset,
                                   offset + this.size, this.modCount);</code></pre><p>  }<br>}</p>
<p>@Override<br>public void forEach(Consumer&lt;? super E&gt; action) {<br>  Objects.requireNonNull(action);<br>  final int expectedModCount = modCount;<br>  @SuppressWarnings(“unchecked”)<br>  final E[] elementData = (E[]) this.elementData;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</p>
<pre><code>action.accept(elementData[i]);</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Creates a <em><a href="Spliterator.html#binding">late-binding</a></em></p>
</li>
<li><p>and <em>fail-fast</em> {@link Spliterator} over the elements in this</p>
</li>
<li><p>list.</p>
</li>
<li></li>
<li><p>The {@code Spliterator} reports {@link Spliterator#SIZED},</p></li>
<li><p>{@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}.</p>
</li>
<li><p>Overriding implementations should document the reporting of additional</p>
</li>
<li><p>characteristic values.</p>
</li>
<li></li>
<li><p>@return a {@code Spliterator} over the elements in this list</p>
</li>
<li><p>@since 1.8</p>
</li>
<li><p>/<br>@Override<br>public Spliterator<E> spliterator() {<br>  return new ArrayListSpliterator&lt;&gt;(this, 0, -1, 0);<br>}</E></p>
<p>/** Index-based split-by-two, lazily initialized Spliterator */<br>static final class ArrayListSpliterator<E> implements Spliterator<E> {</E></E></p>
<p>  /*</p>
<ul>
<li><p>If ArrayLists were immutable, or structurally immutable (no</p>
</li>
<li><p>adds, removes, etc), we could implement their spliterators</p>
</li>
<li><p>with Arrays.spliterator. Instead we detect as much</p>
</li>
<li><p>interference during traversal as practical without</p>
</li>
<li><p>sacrificing much performance. We rely primarily on</p>
</li>
<li><p>modCounts. These are not guaranteed to detect concurrency</p>
</li>
<li><p>violations, and are sometimes overly conservative about</p>
</li>
<li><p>within-thread interference, but detect enough problems to</p>
</li>
<li><p>be worthwhile in practice. To carry this out, we (1) lazily</p>
</li>
<li><p>initialize fence and expectedModCount until the latest</p>
</li>
<li><p>point that we need to commit to the state we are checking</p>
</li>
<li><p>against; thus improving precision.  (This doesn’t apply to</p>
</li>
<li><p>SubLists, that create spliterators with current non-lazy</p>
</li>
<li><p>values).  (2) We perform only a single</p>
</li>
<li><p>ConcurrentModificationException check at the end of forEach</p>
</li>
<li><p>(the most performance-sensitive method). When using forEach</p>
</li>
<li><p>(as opposed to iterators), we can normally only detect</p>
</li>
<li><p>interference after actions, not before. Further</p>
</li>
<li><p>CME-triggering checks apply to all other possible</p>
</li>
<li><p>violations of assumptions for example null or too-small</p>
</li>
<li><p>elementData array given its size(), that could only have</p>
</li>
<li><p>occurred due to interference.  This allows the inner loop</p>
</li>
<li><p>of forEach to run without any further checks, and</p>
</li>
<li><p>simplifies lambda-resolution. While this does entail a</p>
</li>
<li><p>number of checks, note that in the common case of</p>
</li>
<li><p>list.stream().forEach(a), no checks or other computation</p>
</li>
<li><p>occur anywhere other than inside forEach itself.  The other</p>
</li>
<li><p>less-often-used methods cannot take advantage of most of</p>
</li>
<li><p>these streamlinings.</p>
</li>
<li><p>/</p>
<p>private final ArrayList<E> list;<br>private int index; // current index, modified on advance/split<br>private int fence; // -1 until used; then one past last index<br>private int expectedModCount; // initialized when fence set</E></p>
<p>/** Create new spliterator covering the given  range */<br>ArrayListSpliterator(ArrayList<E> list, int origin, int fence,</E></p>
<pre><code>int expectedModCount) {</code></pre><p>  this.list = list; // OK if null unless traversed<br>  this.index = origin;<br>  this.fence = fence;<br>  this.expectedModCount = expectedModCount;<br>}</p>
<p>private int getFence() { // initialize fence to size on first use<br>  int hi; // (a specialized variant appears in method forEach)<br>  ArrayList<E> lst;<br>  if ((hi = fence) &lt; 0) {</E></p>
<pre><code>if ((lst = list) == null)
    hi = fence = 0;
else {
    expectedModCount = lst.modCount;
    hi = fence = lst.size;
}</code></pre><p>  }<br>  return hi;<br>}</p>
<p>public ArrayListSpliterator<E> trySplit() {<br>  int hi = getFence(), lo = index, mid = (lo + hi) &gt;&gt;&gt; 1;<br>  return (lo &gt;= mid) ? null : // divide range in half unless too small</E></p>
<pre><code>new ArrayListSpliterator&lt;E&gt;(list, lo, index = mid,
                            expectedModCount);</code></pre><p>}</p>
<p>public boolean tryAdvance(Consumer&lt;? super E&gt; action) {<br>  if (action == null)</p>
<pre><code>throw new NullPointerException();</code></pre><p>  int hi = getFence(), i = index;<br>  if (i &lt; hi) {</p>
<pre><code>index = i + 1;
@SuppressWarnings(&quot;unchecked&quot;) E e = (E)list.elementData[i];
action.accept(e);
if (list.modCount != expectedModCount)
    throw new ConcurrentModificationException();
return true;</code></pre><p>  }<br>  return false;<br>}</p>
<p>public void forEachRemaining(Consumer&lt;? super E&gt; action) {<br>  int i, hi, mc; // hoist accesses and checks from loop<br>  ArrayList<E> lst; Object[] a;<br>  if (action == null)</E></p>
<pre><code>throw new NullPointerException();</code></pre><p>  if ((lst = list) != null &amp;&amp; (a = lst.elementData) != null) {</p>
<pre><code>if ((hi = fence) &lt; 0) {
    mc = lst.modCount;
    hi = lst.size;
}
else
    mc = expectedModCount;
if ((i = index) &gt;= 0 &amp;&amp; (index = hi) &lt;= a.length) {
    for (; i &lt; hi; ++i) {
        @SuppressWarnings(&quot;unchecked&quot;) E e = (E) a[i];
        action.accept(e);
    }
    if (lst.modCount == mc)
        return;
}</code></pre><p>  }<br>  throw new ConcurrentModificationException();<br>}</p>
<p>public long estimateSize() {<br>  return (long) (getFence() - index);<br>}</p>
<p>public int characteristics() {<br>  return Spliterator.ORDERED | Spliterator.SIZED | Spliterator.SUBSIZED;<br>}<br>}</p>
</li>
</ul>
<p>@Override<br>public boolean removeIf(Predicate&lt;? super E&gt; filter) {<br>  Objects.requireNonNull(filter);<br>  // figure out which elements are to be removed<br>  // any exception thrown from the filter predicate at this stage<br>  // will leave the collection unmodified<br>  int removeCount = 0;<br>  final BitSet removeSet = new BitSet(size);<br>  final int expectedModCount = modCount;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</p>
<pre><code>@SuppressWarnings(&quot;unchecked&quot;)
final E element = (E) elementData[i];
if (filter.test(element)) {
    removeSet.set(i);
    removeCount++;
}</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }</p>
<p>  // shift surviving elements left over the spaces left by removed elements<br>  final boolean anyToRemove = removeCount &gt; 0;<br>  if (anyToRemove) {</p>
<pre><code>final int newSize = size - removeCount;
for (int i=0, j=0; (i &lt; size) &amp;&amp; (j &lt; newSize); i++, j++) {
    i = removeSet.nextClearBit(i);
    elementData[j] = elementData[i];
}
for (int k=newSize; k &lt; size; k++) {
    elementData[k] = null;  // Let gc do its work
}
this.size = newSize;
if (modCount != expectedModCount) {
    throw new ConcurrentModificationException();
}
modCount++;</code></pre><p>  }</p>
<p>  return anyToRemove;<br>}</p>
<p>@Override<br>@SuppressWarnings(“unchecked”)<br>public void replaceAll(UnaryOperator<E> operator) {<br>  Objects.requireNonNull(operator);<br>  final int expectedModCount = modCount;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</E></p>
<pre><code>elementData[i] = operator.apply((E) elementData[i]);</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>  modCount++;<br>}</p>
<p>@Override<br>@SuppressWarnings(“unchecked”)<br>public void sort(Comparator&lt;? super E&gt; c) {<br>  final int expectedModCount = modCount;<br>  Arrays.sort((E[]) elementData, 0, size, c);<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>  modCount++;<br>}<br>}</p>
</li>
</ul>
</li>
</ul>
<pre><code>



</code></pre>
      
    </div>
    
    
    



<div>
    
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">

  <p><span>本文标题:</span>ArrayList源码📝</a></p>
  <p><span>文章作者:</span>Fsn✨🧙‍♀️✨</a></p>
  <p><span>发布时间:</span>2020年03月13日 - 23:12:56🌞</p>
  <p><span>最后更新:</span>2020年06月06日 - 01:52:34🌜</p>
  <p><span>原始链接:</span><a href="/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/" title="ArrayList源码">https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。🎄	</p>  
</div>
<style>
</style>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        //swal({   
          //title: "",   
         // text: '<div style="width:300px;height:100px;font-size:14px;">道友，复制成功了哟(＾Ｕ＾)ノ~</div>',   
          //html: true,
          //timer: 500,   
        //showConfirmButton: false
        //});
      });
      new ClipboardJS('.fa-clipboard', {
          target: function(trigger) {
              $('<div>').appendTo('body').addClass('alert alert-success').html('🤠道友ᕦ(･ㅂ･)ᕤ，🥭复制成功了哟(^_−)☆').show().delay(1500).fadeOut();
              return trigger.nextElementSibling;
            }
      });
    }));  
</script>


    
</div>



    








<div>
  
    <div>
    
        <br/>
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------🍓🍇本文结束🤞感谢道友的阅读🍍🍒-------------</div>
    
</div>
  
</div>












    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>🥕🍆坚持原创技术分享🐳，🌽🥬您的支持将鼓励我继续创作！🐬</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatreward.png" alt="Fsn✨🧙‍♀️✨ 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipayreward.png" alt="Fsn✨🧙‍♀️✨ 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    










    <footer class="post-footer">
      
        <div class="post-tags" style="text-align:center">
          
            <a href="/tags/ArrayList/" rel="tag">🌟ArrayList</i></a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/12/%E3%80%90Vuejs%E3%80%91/Vuejs%E6%8E%A5%E8%A7%A6/" rel="next" title="OSS">
                👈 OSS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/14/%E3%80%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E3%80%91/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="prev" title="操作系统">
                操作系统 👉
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80ODk3My8yNTQ2Nw=="></div>
    </div>

  
  
  

  
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/fsn.jpg"
                alt="Fsn✨🧙‍♀️✨" />
            
              <p class="site-author-name" itemprop="name">Fsn✨🧙‍♀️✨</p>
              <p class="site-description motion-element" itemprop="description">🌈勿忘初心💫 🌞，🌜方得始终⭐</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <!--<a href="/archives/%7C%7Carchive">-->
                <a href="/archives/">
              
                  <span class="site-state-item-count">155</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">84</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/fengshana" target="_blank" title="GitHub">
                      
                        <i 

                          
                          class="fa fa-fw fa-github">
                          
                         
                        
                        </i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://space.bilibili.com/475144966" target="_blank" title="Bilibili">
                      
                        <i 

                          
                            class="">🏃‍♂️
                          
                         
                        
                        </i>Bilibili</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      


      
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="300" height="300" id="resCanvas" style="width=100%; background-color:transparent;">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArrayList/" rel="tag">ArrayList</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/B-%E6%A0%91/" rel="tag">B+树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/B%E6%A0%91/" rel="tag">B树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CORS/" rel="tag">CORS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="tag">Git工作流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/" rel="tag">Gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HASH%E8%A1%A8/" rel="tag">HASH表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HashMap/" rel="tag">HashMap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">JVM虚拟机</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MICROSERVICES/" rel="tag">MICROSERVICES</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/" rel="tag">MongoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySql/" rel="tag">MySql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySql%E7%B4%A2%E5%BC%95/" rel="tag">MySql索引</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PayPal/" rel="tag">PayPal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" rel="tag">RabbitMQ实战指南</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/" rel="tag">Redis设计与实现</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SendGrid/" rel="tag">SendGrid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SprigBoot/" rel="tag">SprigBoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95/" rel="tag">Spring技术内幕</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sql/" rel="tag">Sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaScript/" rel="tag">javaScript</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk8/" rel="tag">jdk8</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/motto/" rel="tag">motto</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oss/" rel="tag">oss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synchronized/" rel="tag">synchronized</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/" rel="tag">tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volatile/" rel="tag">volatile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%B2/" rel="tag">串</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1666/" rel="tag">信666</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1666%E5%B7%A5%E4%BD%9C%E4%BA%A4%E6%8E%A5/" rel="tag">信666工作交接</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E9%A1%B5/" rel="tag">分页</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">前端面试题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8C%E8%89%B2%E7%90%83/" rel="tag">双色球</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%A3%E8%AF%AD/" rel="tag">口语</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE/" rel="tag">图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" rel="tag">存储过程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/" rel="tag">微信公众号</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">微服务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%80%81/" rel="tag">心态</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%80%81%E8%AF%BE%E7%A8%8B/" rel="tag">心态课程</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%83%85/" rel="tag">心情</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E4%BB%98/" rel="tag">支付</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/" rel="tag">数据库优化</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9F%A5%E6%89%BE/" rel="tag">查找</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" rel="tag">栈与队列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%81%E7%A8%8B%E5%9B%BE/" rel="tag">流程图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%A7%A3%E5%88%86%E6%9E%90/" rel="tag">理解分析</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%B4%A2/" rel="tag">理财</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%B4%A2%E5%AD%A6%E4%B9%A0/" rel="tag">理财学习</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%B4%E6%92%AD/" rel="tag">直播</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E6%8E%A5%E7%8F%AD%E4%BA%BA/" rel="tag">社会主义接班人</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" rel="tag">红黑树</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">线性表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">英语</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">虚拟机</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%8D%E6%B1%87/" rel="tag">词汇</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">邮件服务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">锁</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%86%E8%B5%AB/" rel="tag">领赫</a><span class="tag-list-count">11</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">🌱2019 🍄 🌳

<span itemprop="copyrightYear">2020</span>
  <span class="with-love">
  <!--user-->
    🍉
  </span>
 
 <span class="author" itemprop="copyrightHolder">Fsn✨🧙‍♀️✨</span>

  





  <script async src="http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 
     🏃‍♂️ 
    <span class="post-meta-item-icon">
      📈
    </span>
    
      <span class="post-meta-item-text">小屋💒总字数：</span>
    
	<span title="Site words total count">
     605.8k🌟 </span>
    <!--<span title="symbols_count_time.count_total">1.2m</span>-->
  
</div>



  <!-- <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>-->






<!--



 -->
 






        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-beta.2/lazyload.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  













  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  
  <script type="text/javascript" src="/js/src/exturl.js?v=5.1.4"></script>


  
  
  
  <!-- 
  
  -->
  <link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>

  <!-- 代码块复制功能    <script src="dist/clipboard.min.js"></script>-->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
  


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":250,"vOffset":-10},"mobile":{"show":false},"log":false,"tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>

<!--崩溃欺骗 <script type="text/javascript" src="/js/src/crash_cheat.js"></script> -->




