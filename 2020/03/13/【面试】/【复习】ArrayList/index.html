<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
<script data-ad-client="ca-pub-3892229323208960" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script data-ad-client="ca-pub-8318014576592877" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script>
	(function(){
		if(''){
			if (prompt('è¯·è¾“å…¥æ–‡ç« å¯†ç ','') !== ''){
				alert('å¯†ç é”™è¯¯ï¼');
				history.back();
			}
		}
	})();
</script>









<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #A0A0A0; /*è¿›åº¦æ¡é¢œè‰²*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #A0A0A0, 0 0 5px     #A0A0A0; /*é˜´å½±é¢œè‰²*/
    }
    .pace .pace-activity {
        border-top-color: #A0A0A0;    /*ä¸Šè¾¹æ¡†é¢œè‰²*/
        border-left-color: #A0A0A0;    /*å·¦è¾¹æ¡†é¢œè‰²*/
    }
</style>

<meta name="theme-color" content="#222">










<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/fsn-16x16.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/fsn-32x32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/fsn-16x16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/fsn-16x16.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="ArrayList," />





  <link rel="alternate" href="/atom.xml" title="âœ¨Fsnâœ¨" type="application/atom+xml" />






<meta name="description" content="åšå¼ºã€‚è™½ç„¶å¾ˆæƒ³å‘ä¸ªè¡¨æƒ…åŒ…å‡ºæ¥ã€‚æˆ‘å¾—åšå¼ºã€‚æˆ‘å°±ä¸ä¿¡äº†ï¼Œç£¨ä¸æ­»æˆ‘ã€‚æˆ‘å¾—å‘é˜³è€Œç”Ÿï¼Œæ´»çš„ç¿çƒ‚ä¸€ç‚¹ã€‚æˆ‘å¯çœŸè®¨åŒåšç¬”è®°ã€‚   1234&#x2F;* * Copyright (c) 1997, 2017, Oracle and&#x2F;or its affiliates. All rights reserved. * ORACLE PROPRIETARY&#x2F;CONFIDENTIAL. Use is subject to lice">
<meta property="og:type" content="article">
<meta property="og:title" content="ArrayListæºç ">
<meta property="og:url" content="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/index.html">
<meta property="og:site_name" content="âœ¨Fsnâœ¨">
<meta property="og:description" content="åšå¼ºã€‚è™½ç„¶å¾ˆæƒ³å‘ä¸ªè¡¨æƒ…åŒ…å‡ºæ¥ã€‚æˆ‘å¾—åšå¼ºã€‚æˆ‘å°±ä¸ä¿¡äº†ï¼Œç£¨ä¸æ­»æˆ‘ã€‚æˆ‘å¾—å‘é˜³è€Œç”Ÿï¼Œæ´»çš„ç¿çƒ‚ä¸€ç‚¹ã€‚æˆ‘å¯çœŸè®¨åŒåšç¬”è®°ã€‚   1234&#x2F;* * Copyright (c) 1997, 2017, Oracle and&#x2F;or its affiliates. All rights reserved. * ORACLE PROPRIETARY&#x2F;CONFIDENTIAL. Use is subject to lice">
<meta property="og:image" content="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r">
<meta property="article:published_time" content="2020-03-13T15:12:56.000Z">
<meta property="article:modified_time" content="2020-06-05T17:52:34.333Z">
<meta property="article:author" content="Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨">
<meta property="article:tag" content="ArrayList">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://fengshana.github.io/2020/03/13/ã€é¢è¯•ã€‘/ã€å¤ä¹ ã€‘ArrayList/"/>









  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "07d52b28"
    });
  daovoice('update');
  </script>

  <title>ArrayListæºç  | âœ¨Fsnâœ¨</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a839053bb6194637483460a0f428730";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  
  <!-- Google AdSense start -->
  <script data-ad-client="ca-pub-3892229323208960" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Google AdSense end -->

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.js"></script>
<script src="https://unpkg.com/minigrid@3.1.1/dist/minigrid.min.js"></script>
<link rel="stylesheet" href="/photos/photos.css">
<script type="text/javascript" src="/photos/photo.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/mermaid/0.2.4/mermaid.full.min.js"></script>


<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">âœ¨Fsnâœ¨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-camera">
          <a href="/photos/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-camera"></i> <br />
            
            ç›¸å†Œ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sentence">
          <a href="/shuoshuo" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-commenting"></i> <br />
            
            å°å¿ƒæƒ…
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="æœç´¢..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


<!--Â FsnÂ -->
<script type="text/javascript">
WIDGET = {FID: 'o6km9Rzhmn'}
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>




 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="poem-wrap">
  <div class="poem-border poem-left"></div>
  <div class="poem-border poem-right"></div>
    <h1>[ğŸŒ¿è¯—é…’å¹´åğŸŒ»]</h1>
    <p id="poem">æŒ‘é€‰ä¸­ğŸŒº...ğŸƒğŸ‚</p>
    <p id="info">

  <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
  <script type="text/javascript">
    jinrishici.load(function(result) {
      poem.innerHTML = result.data.content
      info.innerHTML = 'ã€' + result.data.origin.dynasty + 'ã€‘' + result.data.origin.author + 'ğŸƒã€Š' + result.data.origin.title + 'ã€‹ğŸ‚'
      document.getElementById("poem").value(poem);
      document.getElementById("info").value(info);  
  });
  </script>
</div>

        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/fsn.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="âœ¨Fsnâœ¨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ArrayListæºç </h1>
        

        <div class="post-meta">
		

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-03-13T23:12:56+08:00">
                2020-03-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2020-06-06T01:52:34+08:00">
                2020-06-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  47
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r" rel="gallery_ckc6ay0mt00fp54um12lu5foh"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://r.photo.store.qq.com/psc?/V11rBmNJ1xB9lV/hsnfJ.a5yg7.BhItQyNwPWVRpqPAddSoFmfNVnUird9QePM33QZuggoTeNesk*rIzVAhrnmubD*GCL9A9ZKXcHm1wv8ZA4kz.ufU7iGNde0!/r" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        <p>åšå¼ºã€‚<br>è™½ç„¶å¾ˆæƒ³å‘ä¸ªè¡¨æƒ…åŒ…å‡ºæ¥ã€‚<br>æˆ‘å¾—åšå¼ºã€‚<br>æˆ‘å°±ä¸ä¿¡äº†ï¼Œç£¨ä¸æ­»æˆ‘ã€‚<br>æˆ‘å¾—å‘é˜³è€Œç”Ÿï¼Œæ´»çš„ç¿çƒ‚ä¸€ç‚¹ã€‚<br>æˆ‘å¯çœŸè®¨åŒåšç¬”è®°ã€‚  </p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (c) 1997, 2017, Oracle<span class="built_in"> and/or </span>its affiliates. All rights reserved.</span><br><span class="line"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<p>Copyright n.ç‰ˆæƒï¼Œè‘—ä½œæƒ adj.ç‰ˆæƒçš„ï¼›å—ç‰ˆæƒä¿æŠ¤çš„ã€‚vt.ä¿æŠ¤ç‰ˆæƒï¼›ä¸ºâ€¦å–å¾—ç‰ˆæƒ<br>Oracle n.ç¥è°•ï¼›è¯­è¨€ï¼›ç¥è°•å¤„ï¼›åœ£äºº/ ç”²éª¨æ–‡ï¼›ç”²éª¨æ–‡å…¬å¸ï¼›æ•°æ®åº“ï¼›ç¥è°•<br>affiliates é™„å±å…¬å¸ï¼›è”æ’­ç”µå°<br>reserved adj.ä¿ç•™çš„ï¼Œé¢„å®šçš„ï¼›ç¼„é»˜çš„ï¼Œå†·æ·¡çš„ï¼Œé«˜å†·çš„ï¼›åŒ…ç§Ÿçš„<br>proprietary adj.ä¸“å–çš„ï¼Œä¸“è¥çš„ï¼›æ‰€æœ‰çš„ï¼Œæ‰€æœ‰æƒçš„ï¼›ï¼ˆè¡Œä¸ºï¼‰åƒæ‰€æœ‰è€…é‚£æ ·çš„ï¼Œæ‰€æœ‰äººï¼ˆä¼¼çš„ï¼‰n.æ‰€æœ‰æƒï¼Œæ‰€æœ‰äºº<br>confidential adj.æœºå¯†çš„ï¼›è¡¨ç¤ºä¿¡ä»»çš„ï¼›è·ä¿¡ä»»çš„<br>subject n.ä¸»é¢˜ï¼›ç§‘ç›®ï¼›[ è¯­ ]ä¸»è¯­ï¼›å›½æ°‘ï¼›adj.æœä»çš„ï¼›æ˜“æ‚£â€¦çš„ï¼›å—åˆ¶äºâ€¦çš„ï¼›vt.ä½¿â€¦éš¶å±ï¼›<br>license n.æ‰§ç…§ï¼Œè®¸å¯è¯ï¼›ç‰¹è®¸ vt.è®¸å¯ï¼›ç‰¹è®¸ï¼›å‘è®¸å¯è¯ç»™â€¦<br>terms n.åœ°ä½ï¼Œå…³ç³»ï¼›[ æ³• ]æ¡æ¬¾ï¼›æœ¯è¯­ï¼›æªè¾ï¼›ä»·é’±ï¼ˆtermçš„å¤æ•°å½¢å¼ï¼‰â€¦<br>Oracle and/or its affiliates Oracleå’Œ/æˆ–å…¶å…³è”å…¬å¸<br>All rights reserved. ç‰ˆæƒæ‰€æœ‰ï¼Œä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚<br>ORACLE PROPRIETARY/CONFIDENTIAL Oracleä¸“æœ‰/æœºå¯†ã€‚<br>Use is subject to license terms. ä½¿ç”¨å—è®¸å¯æ¡æ¬¾çº¦æŸã€‚  </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">package</span> <span class="selector-tag">java</span><span class="selector-class">.util</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.Consumer</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.Predicate</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.util</span><span class="selector-class">.function</span><span class="selector-class">.UnaryOperator</span>;</span><br><span class="line"><span class="selector-tag">import</span> <span class="selector-tag">sun</span><span class="selector-class">.misc</span><span class="selector-class">.SharedSecrets</span>;</span><br></pre></td></tr></table></figure>
<p>Consumer æ¶ˆè´¹è€…<br>Predicate  è°“è¯<br>Unary ä¸€å…ƒ<br>UnaryOperator éåˆæ ¼ç®—å­<br>SharedSecrets å…±äº«çš„ç§˜å¯†  </p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Resizable-array implementation <span class="keyword">of</span> the <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>List<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span> interface.  Implements</span><br><span class="line"> * all optional list operations, <span class="keyword">and</span> permits all elements, including</span><br><span class="line"> * <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>null<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span>.  In addition <span class="keyword">to</span> implementing the <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>List<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span> interface,</span><br><span class="line"> * this class provides methods <span class="keyword">to</span> manipulate the size <span class="keyword">of</span> the <span class="keyword">array</span> that <span class="literal">is</span></span><br><span class="line"> * used internally <span class="keyword">to</span> store the list.  (This class <span class="literal">is</span> roughly equivalent <span class="keyword">to</span></span><br><span class="line"> * <span class="xml"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>Vector<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span>, <span class="keyword">except</span> that it <span class="literal">is</span> unsynchronized.)</span><br></pre></td></tr></table></figure>
<p>Resizable å¯è°ƒæ•´å¤§å°çš„<br>Implements all optional list operations å®ç°æ‰€æœ‰å¯é€‰çš„Listæ“ä½œ<br>permits è®¸å¯è¯<br>å¯è°ƒæ•´å¤§å°çš„æ•°ç»„å®ç°äº†æ¥å£Listã€‚å®ç°äº†æ‰€æœ‰å¯é€‰çš„Listæ“ä½œï¼Œå¹¶ä¸”è®¸å¯æ‰€æœ‰çš„å…ƒç´ ï¼ŒåŒ…æ‹¬ç©ºå…ƒç´ ã€‚<br>In addition to é™¤äº†<br>manipulate æ“ä½œ<br>internally åœ¨å†…éƒ¨<br>store è´®è—<br>é™¤äº†å®ç°æ¥å£Listï¼Œè¯¥ç±»ArrayListè¿˜æä¾›äº†æ–¹æ³•æ¥æ“ä½œæ•°ç»„çš„å¤§å°çš„æ–¹æ³•ï¼Œè¢«ç”¨åœ¨å†…éƒ¨æ¥å­˜å‚¨çš„list<br>roughly ç²—ç•¥åœ°<br>equivalent ç­‰æ•ˆ<br>è¯¥ç±»ArrayListç²—ç•¥åœ°ç­‰æ•ˆäºç±»Vectorï¼Œé™¤äº†ä»–ä¸æ˜¯åŒæ­¥çš„  </p>
<blockquote>
<p>ç”±æ­¤å¯å¾—ï¼Œæ³¨é‡Šå½“ä¸­è¯´æ˜ArrayListæ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯unsynchronizedï¼›è€ŒVectoræ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯synchronized  </p>
</blockquote>
<p>ç”±æ­¤å¯å¾—ï¼Œçœ‹ç‚¹æºç è¿˜æ˜¯éå¸¸éå¸¸éå¸¸å¥½çš„ã€‚<br>ä½†æ˜¯æˆ‘æœ‰ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œä¸ºä»€ä¹ˆè¿™æ ·è¯´ä»–ArrayListæ˜¯ä¸åŒæ­¥ï¼Œè€ŒVectoræ˜¯åŒæ­¥çš„ï¼Œæœ‰ç†ç”±å—ï¼Ÿ<br>æˆ‘è§‰å¾—æ¥ç€å¾€ä¸‹çœ‹å¯èƒ½æœ‰ç­”æ¡ˆå‘—ã€‚  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">* <span class="tag">&lt;<span class="name">p</span>&gt;</span>The <span class="tag">&lt;<span class="name">tt</span>&gt;</span>size<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>isEmpty<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>get<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, <span class="tag">&lt;<span class="name">tt</span>&gt;</span>set<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>,</span><br><span class="line">* <span class="tag">&lt;<span class="name">tt</span>&gt;</span>iterator<span class="tag">&lt;/<span class="name">tt</span>&gt;</span>, and <span class="tag">&lt;<span class="name">tt</span>&gt;</span>listIterator<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> operations run in constant</span><br><span class="line">* time.  The <span class="tag">&lt;<span class="name">tt</span>&gt;</span>add<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> operation runs in <span class="tag">&lt;<span class="name">i</span>&gt;</span>amortized constant time<span class="tag">&lt;/<span class="name">i</span>&gt;</span>,</span><br><span class="line">* that is, adding n elements requires O(n) time.  All of the other operations</span><br><span class="line">* run in linear time (roughly speaking).  The constant factor is low compared</span><br><span class="line">* to that for the <span class="tag">&lt;<span class="name">tt</span>&gt;</span>LinkedList<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> implementation.</span><br></pre></td></tr></table></figure>
<p>constant å¸¸æ•°<br>size()ï¼ŒisEmpty()ï¼Œget()ï¼Œset()ï¼Œiterator()ï¼ŒlistIterator()è¿™äº›æ“ä½œè¿è¡Œåœ¨å¸¸æ•°æ—¶é—´ï¼Œå¤§æ¦‚æ„æ€åº”è¯¥è¯´çš„æ˜¯è¿™äº›æ–¹æ³•ç»å¸¸ç”¨ã€‚<br>amortized åˆ†æœŸå¿è¿˜ï¼Œæ‘Šé”€<br>add() æ“ä½œåœ¨å¹³æ‘Šå¸¸æ•°æ—¶é—´ä¸­ï¼Œæ“ä½œå³æ–¹æ³•ä¹‹æ„<br>that is é‚£æ˜¯ï¼Œæ·»åŠ nä¸ªå…ƒç´ è¦æ±‚åœ¨O(n) æ—¶é—´å†…ï¼Œæ³¨æ„ä¸‹æ˜¯O(n)timeï¼Œè€Œä¸æ˜¯0é›¶å•Šï¼Œæˆ‘ç¬¬ä¸€ååº”æ˜¯åŒæ—¶ï¼Œç°åœ¨æƒ³æ¥ä¸æ˜¯åŒæ—¶çš„æ„æ€äº†ã€‚<br>æ·»åŠ nä¸ªå…ƒç´ éœ€è¦O(n)æ—¶é—´ã€‚<br>O(n)æ„Ÿè§‰å¥½åƒåœ¨å“ªé‡Œè§è¿‡å˜ï¼Œå“¦å“¦ä¹‹å‰ç®—æ³•ä¹¦é‡Œé¢è®²è¿‡å¥½åƒã€‚<br>ä¹Ÿå°±æ˜¯è¯´æ·»åŠ nä¸ªå…ƒç´ ï¼Œæ•°æ®é‡å¢å¤§nå€ï¼Œé‚£ä¹ˆè€—æ—¶ä¹Ÿå°±å¢å¤§å‡ å€ã€‚<br>in linear time åœ¨çº¿æ€§æ—¶é—´ä»¥å†…<br>ï¼ˆç²—ç•¥çš„æ¥è¯´ï¼‰æ‰€æœ‰çš„å…¶ä»–æ“ä½œè¿è¡Œéƒ½åœ¨é™è¡Œæ—¶é—´ä»¥å†…ã€‚<br>factor å› ç´ <br>compared ç›¸æ¯”<br>low å°±æ²¡å¿…è¦ç¿»è¯‘äº†å§<br>å¸¸é‡å› ç´ æ˜¯ä½äºLinkedListçš„å®ç°ï¼Œä¸LinkedListå®ç°ç›¸æ¯”ï¼Œå¸¸é‡å› å­è¾ƒä½  </p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æè¿°ç®—æ³•å¤æ‚åº¦æ—¶ï¼Œå¸¸ç”¨o(1)ï¼Œo(n)ï¼Œo(logn)ï¼Œo(nlogn)è¡¨ç¤ºå¯¹åº”ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ˜¯ç®—æ³•çš„æ—¶ç©ºå¤æ‚åº¦çš„è¡¨ç¤ºã€‚ä¸ä»…ä»…ç”¨äºè¡¨ç¤ºæ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿç”¨äºè¡¨ç¤ºç©ºé—´å¤æ‚åº¦ã€‚  </span><br><span class="line">* Oåé¢çš„æ‹¬å·ä¸­æœ‰ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‡æ˜æŸä¸ªç®—æ³•çš„è€—æ—¶&#x2F;è€—ç©ºé—´ä¸æ•°æ®å¢é•¿é‡ä¹‹é—´çš„å…³ç³»ã€‚å…¶ä¸­çš„nä»£è¡¨è¾“å…¥æ•°æ®çš„é‡  </span><br><span class="line">* æ¯”å¦‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå°±ä»£è¡¨æ•°æ®é‡å¢å¤§å‡ å€ï¼Œè€—æ—¶ä¹Ÿå¢å¤§å‡ å€ã€‚æ¯”å¦‚å¸¸è§çš„éå†ç®—æ³•ã€‚å†æ¯”å¦‚æ—¶é—´å¤æ‚åº¦O(n^2)ï¼Œå°±ä»£è¡¨æ•°æ®é‡å¢å¤§nå€æ—¶ï¼Œè€—æ—¶å¢å¤§nçš„å¹³æ–¹å€ï¼Œè¿™æ˜¯æ¯”çº¿æ€§æ›´é«˜çš„æ—¶é—´å¤æ‚åº¦ã€‚æ¯”å¦‚å†’æ³¡æ’åºï¼Œå°±æ˜¯å…¸å‹çš„O(n^2)çš„ç®—æ³•ï¼Œå¯¹nä¸ªæ•°æ’åºï¼Œéœ€è¦æ‰«æn x næ¬¡ã€‚  </span><br><span class="line">* å†æ¯”å¦‚O(logn)ï¼Œå½“æ•°æ®å¢å¤§nå€æ—¶ï¼Œè€—æ—¶å¢å¤§lognå€(è¿™é‡Œçš„logæ˜¯ä»¥2ä¸ºåº•çš„ï¼Œæ¯”å¦‚ï¼Œå½“æ•°æ®å¢å¤§256å€æ—¶ï¼Œè€—æ—¶åªå¢å¤§8å€ï¼Œæ˜¯æ¯”çº¿æ€§è¿˜è¦ä½çš„æ—¶é—´å¤æ‚åº¦)ã€‚äºŒåˆ†æŸ¥æ‰¾å°±æ˜¯O(logn)çš„ç®—æ³•ï¼Œæ¯æ‰¾ä¸€æ¬¡æ’é™¤ä¸€åŠçš„å¯èƒ½ï¼Œ256ä¸ªæ•°æ®ä¸­æŸ¥æ‰¾åªè¦æ‰¾8æ¬¡å°±å¯ä»¥æ‰¾åˆ°ç›®æ ‡ã€‚  </span><br><span class="line">* O(nlogn)åŒç†ï¼Œå°±æ˜¯nä¹˜ä»¥lognï¼Œå½“æ•°æ®å¢å¤§256å€æ—¶ï¼Œè€—æ—¶å¢å¤§256*8&#x3D;2048å€ã€‚è¿™ä¸ªå¤æ‚åº¦é«˜äºçº¿æ€§ä½äºå¹³æ–¹ã€‚å½’å¹¶æ’åºå°±æ˜¯O(nlogn)çš„æ—¶é—´å¤æ‚åº¦ã€‚  </span><br><span class="line">* O(1)å°±æ˜¯æœ€ä½çš„æ—¶ç©ºå¤æ‚åº¦äº†ï¼Œä¹Ÿå°±æ˜¯è€—æ—¶&#x2F;è€—ç©ºé—´ä¸è¾“å…¥æ•°æ®å¤§å°æ— å…³ï¼Œæ— è®ºè¾“å…¥æ•°æ®å¢å¤§å¤šå°‘å€ï¼Œè€—æ—¶&#x2F;è€—ç©ºé—´éƒ½ä¸å˜ã€‚å“ˆå¸Œç®—æ³•å°±æ˜¯å…¸å‹çš„O(1)æ—¶é—´å¤æ‚åº¦ï¼Œæ— è®ºæ•°æ®è§„æ¨¡å¤šå¤§ï¼Œéƒ½å¯ä»¥åœ¨ä¸€æ¬¡è®¡ç®—åæ‰¾åˆ°ç›®æ ‡ï¼ˆä¸è€ƒè™‘å†²çªçš„è¯ï¼‰ã€‚  </span><br><span class="line"></span><br><span class="line">çœ‹æ¥é˜…è¯»æºç ï¼Œä¸ä»…è®©æˆ‘çŸ¥é“äº†æˆ‘è¦å­¦ç®—æ³•ï¼Œæˆ‘è¿˜æŠŠå†’æ³¡æ’åºè¿™äº›....ä¸œè¥¿éƒ½ç»™å¿˜äº†ã€‚ </span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>Each <tt>ArrayList</tt> instance has a <i>capacity</i>.  The capacity is</p></li>
<li><p>the size of the array used to store the elements in the list.  It is always</p>
</li>
<li><p>at least as large as the list size.  As elements are added to an ArrayList,</p>
</li>
<li><p>its capacity grows automatically.  The details of the growth policy are not</p>
</li>
<li><p>specified beyond the fact that adding an element has constant amortized</p>
</li>
<li><p>time cost.</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">each æ¯ä¸ªï¼Œeach otheräº’ç›¸  </span><br><span class="line">æ¯ä¸ªArrayListå®ä¾‹éƒ½æœ‰ä¸€ä¸ªcapacity,capacityç”µæ¢¯é‡Œé¢æœ‰ï¼Œæˆ‘çœ‹åˆ°è¿‡ï¼Œå®¹é‡ï¼Œå°±æ˜¯èƒ½å¤Ÿä¹˜è½½äººæ•°å®¹é‡çš„é‚£ä¸ª  </span><br><span class="line">è¿™ä¸ªå®¹é‡æ˜¯æ•°ç»„çš„å¤§å°ï¼Œè¢«ç”¨æ¥å­˜å‚¨listå½“ä¸­çš„å…ƒç´ ã€‚  </span><br><span class="line">å…¶æ€»æ˜¯è‡³å°‘å’Œæ•°ç»„çš„å¤§å°æ˜¯ä¸€æ ·å¤§çš„ã€‚  </span><br><span class="line">æˆ‘å¿˜äº†è¿™ä¸ªas aså•¥æ„æ€äº†ã€‚  </span><br><span class="line">as large as ä¸€æ ·å¤§ï¼›at least è‡³å°‘  </span><br><span class="line">last but <span class="keyword">not</span> least æœ€åä½†æ˜¯åŒç­‰é‡è¦çš„ï¼Œçªç„¶æƒ³èµ·äº†è¿™ä¸ª  </span><br><span class="line">æœ€ä¸ºå…ƒç´ æ˜¯è¦è¢«æ·»åŠ åˆ°ä¸€ä¸ªArrayListé›†åˆå½“ä¸­å»çš„ï¼Œä»–çš„å®¹é‡å¢é•¿æ˜¯è‡ªåŠ¨å¢é•¿çš„ã€‚  </span><br><span class="line">automatically è‡ªåŠ¨ï¼Œå› ä¸ºautoæ˜¯è‡ªåŠ¨çš„æ„æ€å§æ‰€ä»¥è”æƒ³è‡ªåŠ¨ã€‚  </span><br><span class="line">details ç»†èŠ‚ï¼›<span class="built_in"> policy </span>æ”¿ç­–ï¼›specified æŒ‡å®šçš„ï¼›beyond é™¤äº†ï¼›fact äº‹å®  </span><br><span class="line">è¿™ä¸ªå¢é•¿æ”¿ç­–çš„ç»†èŠ‚æ˜¯æ²¡æœ‰æŒ‡å®šçš„é™¤äº†äº‹å®ä¸Šæ·»åŠ ä¸€ä¸ªå…ƒç´ æœ‰å¸¸æ•°å¹³æ‘Šæ—¶é—´æ¶ˆè€—ä¸Š  </span><br><span class="line">å¢é•¿ç­–ç•¥çš„ç»†èŠ‚æ²¡æœ‰æŒ‡å®šï¼Œé™¤äº†æ·»åŠ ä¸€ä¸ªå…ƒç´ æœ‰æ’å®šçš„å¹³æ‘Šæ—¶é—´æˆæœ¬ã€‚  </span><br><span class="line">æˆ‘éƒ½ä¸çŸ¥é“æˆ‘åœ¨è¯´äº›ä»€ä¹ˆé¬¼ã€‚</span><br></pre></td></tr></table></figure></li>
<li><p>An application can increase the capacity of an <tt>ArrayList</tt> instance</p></li>
<li><p>before adding a large number of elements using the <tt>ensureCapacity</tt></p>
</li>
<li><p>operation.  This may reduce the amount of incremental reallocation.</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">a</span> <span class="string">large number of å¤§é‡çš„  </span></span><br><span class="line"><span class="attr">increase</span> <span class="string">å¢åŠ   </span></span><br><span class="line"><span class="meta">ä¸€ä¸ªåº”ç”¨ç¨‹åºèƒ½å¤Ÿå¢é•¿å…¶ä¸€ä¸ªArrayListå®ä¾‹çš„å®¹é‡ä¹‹å‰æ·»åŠ ä¸€ä¸ªå¤§æ•°é‡çš„å…ƒç´ æ—¶ä½¿ç”¨ensureCapacity</span> <span class="string">ç¡®ä¿å®¹é‡æ“ä½œ</span></span><br><span class="line"><span class="meta">åœ¨ä½¿ç”¨ensureCapacityæ“ä½œæ·»åŠ å¤§é‡å…ƒç´ ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å¢åŠ ä¸€ä¸ªArrayListå®ä¾‹çš„å®¹é‡</span>  <span class="string"></span></span><br><span class="line"><span class="attr">incremental</span> <span class="string">å¢é‡ ï¼›reallocation é‡æ–°åˆ†é…ï¼›allocation åˆ†é…  </span></span><br><span class="line"><span class="meta">è¿™æˆ–è®¸å¯ä»¥å‡å°‘å¤§æ•°é‡çš„å¢é‡é‡æ–°åˆ†é….</span>  <span class="string"></span></span><br><span class="line"><span class="attr">amount</span> <span class="string">æ•°é‡</span></span><br><span class="line"><span class="attr">è¿™å¯èƒ½ä¼šå‡å°‘å¢é‡é‡æ–°åˆ†é…çš„æ•°é‡ã€‚</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>Note that this implementation is not synchronized.</strong></p></li>
<li><p>If multiple threads access an <tt>ArrayList</tt> instance concurrently,</p>
</li>
<li><p>and at least one of the threads modifies the list structurally, it</p>
</li>
<li><p><i>must</i> be synchronized externally.  (A structural modification is</p>
</li>
<li><p>any operation that adds or deletes one or more elements, or explicitly</p>
</li>
<li><p>resizes the backing array; merely setting the value of an element is not</p>
</li>
<li><p>a structural modification.)  This is typically accomplished by</p>
</li>
<li><p>synchronizing on some object that naturally encapsulates the list.</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Note è¯·æ³¨æ„  </span><br><span class="line">è¯·æ³¨æ„è¿™ä¸ªå®ç°æ–¹æ³•å¹¶ä¸æ˜¯åŒæ­¥çš„ã€‚ä¹Ÿå°±æ˜¯ArrayListéåŒæ­¥ã€‚  </span><br><span class="line"><span class="keyword">concurrently</span> åŒæ—¶  ï¼›structurally æ„é€ ï¼Œexternally å¤–éƒ¨</span><br><span class="line">å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªArrayListå®ä¾‹ï¼Œå¹¶ä¸”è‡³å°‘æŸä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªlisté›†åˆåšäº†ç»“æ„æ€§çš„ä¿®æ”¹çš„æ“ä½œï¼Œä»–å¿…é¡»æ˜¯å¤–éƒ¨åŒæ­¥çš„  </span><br><span class="line">explicitly æ˜¾ç¤ºåœ°  </span><br><span class="line">ä¸€ä¸ªæ„é€ æ€§ä¿®æ”¹å¯ä»¥ä½¿ä»»æ„æ“ä½œæ¯”å¦‚<span class="keyword">add</span>æ·»åŠ æˆ–è€…<span class="keyword">delete</span>åˆ é™¤æŸä¸€ä¸ªæˆ–è€…æ›´å¤šçš„å…ƒç´ ï¼Œæˆ–è€…æ˜¾ç¤ºåœ°é‡æ–°è°ƒæ•´äº†æ•°ç»„çš„å¤§å°  </span><br><span class="line">backing <span class="keyword">array</span> å¤‡ä»½æ•°ç»„ ï¼›modification ä¿®æ”¹  </span><br><span class="line">ä»…ä»…æ˜¯è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„å€¼æ˜¯ä¸éœ€è¦ä¸€ä¸ªæ„é€ æ€§çš„ä¿®æ”¹çš„  </span><br><span class="line">accomplished  å®Œæˆ ï¼›typically é€šå¸¸ ï¼›naturallyè‡ªç„¶ï¼›encapsulateså°è£…  </span><br><span class="line">è¿™æ˜¯é€šå¸¸å®ŒæˆåŒæ­¥åœ¨æŸäº›è‡ªç„¶å°è£…çš„listå¯¹è±¡ä¸Š  </span><br><span class="line">è¿™é€šå¸¸æ˜¯é€šè¿‡å¯¹ä¸€äº›è‡ªç„¶å°è£…listçš„å¯¹è±¡è¿›è¡ŒåŒæ­¥æ¥å®ç°çš„ã€‚</span><br></pre></td></tr></table></figure></li>
<li><p>If no such object exists, the list should be â€œwrappedâ€ using the</p>
</li>
<li><p>{@link Collections#synchronizedList Collections.synchronizedList}</p>
</li>
<li><p>method.  This is best done at creation time, to prevent accidental</p>
</li>
<li><p>unsynchronized access to the list:<pre></pre></p>
</li>
<li><p>List list = Collections.synchronizedList(new ArrayList(...));</p>
<figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœæ²¡æœ‰è¿™æ ·çš„å¯¹è±¡å­˜åœ¨ï¼Œè¿™ä¸ª<span class="keyword">list</span>é›†åˆåº”è¯¥æ˜¯å°è£…çš„ï¼Œä½¿ç”¨&#123;<span class="meta">@link</span> Collections<span class="comment">#synchronizedList Collections.synchronizedList&#125;æ–¹æ³•ï¼ŒåŒæ­¥é›†åˆã€‚  </span></span><br><span class="line">prevent é˜²æ­¢ï¼›accidental æ„å¤–  </span><br><span class="line">è¿™æ˜¯æœ€å¥½çš„åšæ³•åœ¨åˆ›å»ºæ—¶é—´ä¸Šï¼Œæ¥é˜²æ­¢æ„å¤–çš„ä¸åŒæ­¥æ¥è®¿é—®<span class="keyword">list</span>é›†åˆ</span><br></pre></td></tr></table></figure></li>
<li><p><a name="fail-fast"></a></p></li>
<li><p>The iterators returned by this classâ€™s {@link #iterator() iterator} and</p>
</li>
<li><p>{@link #listIterator(int) listIterator} methods are <em>fail-fast</em>:</p>
</li>
<li><p>if the list is structurally modified at any time after the iterator is</p>
</li>
<li><p>created, in any way except through the iteratorâ€™s own</p>
</li>
<li><p>{@link ListIterator#remove() remove} or</p>
</li>
<li><p>{@link ListIterator#add(Object) add} methods, the iterator will throw a</p>
</li>
<li><p>{@link ConcurrentModificationException}.  Thus, in the face of</p>
</li>
<li><p>concurrent modification, the iterator fails quickly and cleanly, rather</p>
</li>
<li><p>than risking arbitrary, non-deterministic behavior at an undetermined</p>
</li>
<li><p>time in the future.</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¶…é“¾æ¥ï¼šå¿«é€Ÿå¤±è´¥  </span><br><span class="line">è¿™ä¸ªè¿­ä»£å™¨é€šè¿‡ç±»çš„iteratorä»¥åŠlistIteratoræ–¹æ³•è¿”å›æ˜¯å¿«é€Ÿå¤±è´¥çš„ã€‚  </span><br><span class="line">å¦‚æœ<span class="built_in">list</span>æ˜¯æ„é€ æ€§ä¿®æ”¹åœ¨è¿­ä»£å™¨åˆ›å»ºçš„ä»»ä½•æ—¶é—´ä¹‹åï¼Œåœ¨ä»»ä½•æ–¹æ³•å½“ä¸­é™¤äº†è¿­ä»£å™¨è‡ªèº«  </span><br><span class="line">å¦‚æœå†è¿­ä»£å™¨åˆ›å»ºåçš„ä»»ä½•æ—¶å€™å¯¹<span class="built_in">list</span>é›†åˆè¿›è¡Œäº†ç»“æ„ä¸Šçš„ä¿®æ”¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é™¤äº†è¿­ä»£å™¨æœ¬èº«ä¹‹å¤–çš„æ–¹å¼è¿›è¡Œä¿®æ”¹</span><br></pre></td></tr></table></figure></li>
<li><p>Note that the fail-fast behavior of an iterator cannot be guaranteed</p></li>
<li><p>as it is, generally speaking, impossible to make any hard guarantees in the</p>
</li>
<li><p>presence of unsynchronized concurrent modification.  Fail-fast iterators</p>
</li>
<li><p>throw {@code ConcurrentModificationException} on a best-effort basis.</p>
</li>
<li><p>Therefore, it would be wrong to write a program that depended on this</p>
</li>
<li><p>exception for its correctness:  <i>the fail-fast behavior of iterators</i></p>
</li>
<li><p>should be used only to detect bugs.</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">guarantees</span> <span class="string">æ‹…ä¿ï¼›presenceå­˜åœ¨ ï¼›impossible ä¸å¯èƒ½çš„</span></span><br><span class="line"><span class="meta">è¯·æ³¨æ„å¿«é€Ÿå¤±è´¥</span> <span class="string">ä¸€ä¸ªè¿­ä»£å™¨ä¸èƒ½å¤Ÿæ‹…ä¿ä½œä¸ºä»–è‡ªèº«çš„è¡Œä¸ºï¼Œé€šå¸¸æ¥è¯´ï¼Œæ¥åˆ¶ä½œå›°éš¾çš„æ‹…ä¿å­˜åœ¨åœ¨ä¸åŒæ­¥ä¸”åŒæ—¶ä¿®æ”¹æ˜¯ä¸å¯èƒ½çš„ã€‚  </span></span><br><span class="line"><span class="meta">åœ¨ä¸åŒæ­¥å¹¶å‘ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½åšå‡ºä»»ä½•ä¸¥æ ¼çš„ä¿è¯ã€‚</span>  <span class="string"></span></span><br><span class="line"><span class="attr">concurrent</span> <span class="string">å¹¶å‘  </span></span><br><span class="line"><span class="meta">å¿«é€Ÿå¤±è´¥</span> <span class="string">è¿­ä»£å™¨åº”å‘çš„ å¹¶å‘ä¿®æ”¹å¼‚å¸¸ åœ¨ä¸€ä¸ªæœ€å¥½çš„åŠªåŠ›åŸºç¡€ä¸Šã€‚  </span></span><br><span class="line"><span class="meta">å°½æœ€å¤§åŠªåŠ›æŠ›å‡ºå¹¶å‘ä¿®æ”¹å¼‚å¸¸ã€‚</span>  <span class="string"></span></span><br><span class="line"><span class="meta">å› æ­¤ï¼Œä»–å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„å»å†™ä¸€ä¸ªå¯¹äºè¿™ä¸ªé”™è¯¯å»ä¾èµ–è¿™ä¸ªå¼‚å¸¸çš„ç¨‹åº</span>  <span class="string"></span></span><br><span class="line"><span class="attr">detect</span> <span class="string">æ£€æµ‹  </span></span><br><span class="line"><span class="meta">å¿«é€Ÿå¤±è´¥</span> <span class="string">è¿­ä»£å™¨åº”è¯¥è¢«ä»…ä»…ä½¿ç”¨åœ¨æ£€æµ‹bugçš„è¡Œä¸ºä¸Š</span></span><br></pre></td></tr></table></figure></li>
<li><p>This class is a member of the</p></li>
<li><a href="{@docRoot}/../technotes/guides/collections/index.html"></a></li>
<li><p>Java Collections Framework.</p>
</li>
<li></li>
<li><p>@author  Josh Bloch</p>
</li>
<li><p>@author  Neal Gafter</p>
</li>
<li><p>@see     Collection</p>
</li>
<li><p>@see     List</p>
</li>
<li><p>@see     LinkedList</p>
</li>
<li><p>@see     Vector</p>
</li>
<li><p>@since   1.2</p>
</li>
<li><p>/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javaé›†åˆæ¡†æ¶</span><br></pre></td></tr></table></figure>
<p>public class ArrayList<E> extends AbstractList<E></E></E></p>
<pre><code>implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</code></pre><p>{</p>
<figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;&gt; å¯ä»¥æ³›å‹ï¼Œç»§æ‰¿äº†çˆ¶ç±»AbstractList æŠ½è±¡<span class="built_in">List</span>ï¼Œå®ç°äº†æ¥å£<span class="built_in">List</span>ï¼ŒRandomAccesséšæœºè®¿é—®? å¯å¯éš†åŒ–ï¼Œä»¥åŠåºåˆ—åŒ–è¿™å‡ ä¸ªæ¥å£ã€‚</span><br></pre></td></tr></table></figure>

<p>  private static final long serialVersionUID = 8683452581122892189L;//å®šä¹‰äº†ä¸€ä¸ªå¸¸é‡ åºåˆ—åŒ–ç‰ˆæœ¬uid</p>
<p>  /**</p>
<ul>
<li><p>Default initial capacity.</p>
</li>
<li><p>/<br>private static final int DEFAULT_CAPACITY = 10;</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤ä¸€ä¸ªåˆå§‹åŒ–å®¹é‡ã€‚  </span><br><span class="line">é»˜è®¤çš„è¿™ä¸ªå®¹é‡çš„å€¼ä¸º<span class="number">10</span>ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªArrayListé‡Œé¢é»˜è®¤èƒ½æ”¾<span class="number">10</span>ä¸ªobject</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Shared empty array instance used for empty instances.</p>
</li>
<li><p>/<br>private static final Object[] EMPTY_ELEMENTDATA = {};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ†äº«ç©ºçš„æ•°ç»„å®ä¾‹ç»™ç©ºçš„å®ä¾‹æ•°ç»„</span><br></pre></td></tr></table></figure>

<p>/**</p>
</li>
<li><p>Shared empty array instance used for default sized empty instances. We</p>
</li>
<li><p>distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when</p>
</li>
<li><p>first element is added.</p>
</li>
<li><p>/<br>private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">distinguish </span>åŒºåˆ†ï¼›inflate è†¨èƒ€  </span><br><span class="line">åˆ†äº«ç©ºçš„æ•°ç»„å®ä¾‹ä½¿ç”¨ç»™é»˜è®¤å¤§å°çš„ç©ºçš„å®ä¾‹ã€‚ æˆ‘ä»¬åŒºåˆ†è¿™ä¸ªæ˜¯æ¥è‡ªäºä¸€ä¸ªç©ºå…ƒç´ æ•°ç»„  ï¼Œæ¥çŸ¥é“å½“ç¬¬ä¸€ä¸ªå…ƒç´ è¢«æ·»åŠ æ—¶ä¼šè†¨èƒ€å¤šå°‘  </span><br><span class="line">æˆ‘ä»¬å°†å…¶ä¸EMPTY_ELEMENTDATAåŒºåˆ†å¼€æ¥ï¼Œä»¥äº†è§£åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶åº”è¯¥è†¨èƒ€å¤šå°‘</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>The array buffer into which the elements of the ArrayList are stored.</p>
</li>
<li><p>The capacity of the ArrayList is the length of this array buffer. Any</p>
</li>
<li><p>empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</p>
</li>
<li><p>will be expanded to DEFAULT_CAPACITY when the first element is added.</p>
</li>
<li><p>/<br>transient Object[] elementData; // non-private to simplify nested class access</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¢«ArrayListæ‰€å­˜å‚¨çš„å…ƒç´ ä¼šè¢«ç¼“å†²åˆ°æ•°ç»„å½“ä¸­å»ã€‚  </span><br><span class="line">å­˜å‚¨ArrayListå…ƒç´ çš„æ•°ç»„ç¼“å†²åŒºã€‚  </span><br><span class="line">è¿™ä¸ªArrayListçš„å®¹é‡æ˜¯æ•°ç»„ç¼“å†²åŒºçš„é•¿åº¦ã€‚  </span><br><span class="line">ä»»ä½•ä¸€ä¸ªç©ºçš„ArrayListä»¥åŠä»–çš„æ•°ç»„ ç­‰äºç­‰äº é»˜è®¤å®¹é‡ç©ºå…ƒç´ æ•°ç»„ å°†ä¼šè¢«æ‰©å±•åˆ°é»˜è®¤å®¹é‡å½“ç¬¬ä¸€ä¸ªå…ƒç´ è¢«æ·»åŠ çš„æ—¶å€™ã€‚</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>The size of the ArrayList (the number of elements it contains).</p>
</li>
<li><p>@serial</p>
</li>
<li><p>/<br>private int size;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰è¿™ä¸ªArrayListé›†åˆçš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªé›†åˆå½“ä¸­æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs an empty list with the specified initial capacity.</p>
</li>
<li></li>
<li><p>@param  initialCapacity  the initial capacity of the list</p>
</li>
<li><p>@throws IllegalArgumentException if the specified initial capacity</p>
</li>
<li><p>is negative</p>
</li>
<li><p>/<br>public ArrayList(int initialCapacity) {<br>  if (initialCapacity &gt; 0) {</p>
<pre><code>this.elementData = new Object[initialCapacity];</code></pre><p>  } else if (initialCapacity == 0) {</p>
<pre><code>this.elementData = EMPTY_ELEMENTDATA;</code></pre><p>  } else {</p>
<pre><code>throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                   initialCapacity);</code></pre><p>  }<br>}</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ„é€ ä¸€ä¸ªç©ºçš„<span class="type">list</span>é›†åˆä»¥åŠæŒ‡å®šåˆå§‹åŒ–çš„å®¹é‡ã€‚  </span><br><span class="line">initalCapacity <span class="type">list</span>é›†åˆå½“ä¸­åˆå§‹åŒ–å®¹é‡å¤§å°ï¼Œå½“å‰ä¸ºæ„é€ æ–¹æ³•ï¼Œæ™®é€šæ–¹æ³•ä¸ºï¼šè®¿é—®ä¿®é¥°+è¿”å›ç±»å‹+æ–¹æ³•åç§°+æ–¹æ³•å‚æ•°+æ–¹æ³•ä½“</span><br><span class="line">å¦‚æœåˆå§‹åŒ–å®¹é‡å¤§å°å¤§äº<span class="number">0</span>ï¼Œåˆ™å…ƒç´ æ•°ç»„æ„å»ºä¸€ä¸ªObjectæ•°ç»„ï¼Œå½“ä¸­åˆå§‹å®¹é‡ä¸ºåˆå§‹åŒ–å®¹é‡å¤§å°</span><br><span class="line">å¦‚æœåˆå§‹åŒ–å®¹é‡å¤§å°ç­‰äº<span class="number">0</span>ï¼Œåˆ™å…ƒç´ æ•°ç»„åˆ™æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå³æ‰€å®šä¹‰çš„ç©ºæ•°ç»„</span><br><span class="line">å¦‚æœåˆå§‹åŒ–å®¹é‡å¤§å°æ—¢ä¸å¤§äº<span class="number">0</span>ä¹Ÿä¸æ˜¯ç­‰äº<span class="number">0</span>ï¼Œé‚£å°±æ˜¯å°äº<span class="number">0</span>ï¼Œä¸ºè´Ÿæ•°äº†ï¼Œé‚£ä¹ˆåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œéæ³•å‚æ•°å¼‚å¸¸ï¼Œéæ³•å®¹é‡+æ‰€éœ€è¦åˆå§‹åŒ–å®¹é‡çš„å¤§å°å€¼</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs an empty list with an initial capacity of ten.</p>
</li>
<li><p>/<br>public ArrayList() {<br>  this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>}</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºçš„<span class="type">list</span>é›†åˆï¼Œå¹¶å¸¦æœ‰é»˜è®¤çš„åˆå§‹åŒ–å®¹é‡ä¸º<span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Constructs a list containing the elements of the specified</p>
</li>
<li><p>collection, in the order they are returned by the collectionâ€™s</p>
</li>
<li><p>iterator.</p>
</li>
<li></li>
<li><p>@param c the collection whose elements are to be placed into this list</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public ArrayList(Collection&lt;? extends E&gt; c) {<br>  elementData = c.toArray();<br>  if ((size = elementData.length) != 0) {</p>
<pre><code>// c.toArray might (incorrectly) not return Object[] (see 6260652)
if (elementData.getClass() != Object[].class)
    elementData = Arrays.copyOf(elementData, size, Object[].class);</code></pre><p>  } else {</p>
<pre><code>// replace with empty array.
this.elementData = EMPTY_ELEMENTDATA;</code></pre><p>  }<br>}</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æ„é€ ä¸€ä¸ªlisté›†åˆï¼Œè¯¥listé›†åˆåŒ…å«æŒ‡å®šé›†åˆå½“ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡é›†åˆçš„è¿­ä»£æŒ‰ç…§ä»–ä»¬è¿”å›çš„é¡ºåº  </span><br><span class="line">å‚æ•°cä¸ºå…ƒç´ å°†è¢«æ›¿æ¢åˆ°listå½“ä¸­çš„é›†åˆ  </span><br><span class="line">æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸å¦‚æœè¯¥æŒ‡å®šçš„é›†åˆä¸ºç©º  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">Object</span>[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;  </span><br><span class="line">elementDataåŸæ¥å°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œç°åœ¨é‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå³è¯¥é›†åˆæ•°ç»„åŒ–æˆä¸ºä¸€ä¸ªæ•°ç»„ã€‚  </span><br><span class="line">å¯¹<span class="built_in">size</span>å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œ<span class="built_in">size</span>å³ä¸ºæ•°ç»„elementDataçš„é•¿åº¦ï¼Œå¦‚æœ<span class="built_in">size</span>ä¸ä¸º<span class="number">0</span>ï¼Œåˆ™  </span><br><span class="line">incorrectly ä¸æ­£ç¡®  </span><br><span class="line">é›†åˆcæ•°ç»„åä¹‹åå¯èƒ½é”™è¯¯çš„ä¸èƒ½è¿”å›å¯¹è±¡æ•°ç»„  </span><br><span class="line">å¦‚æœæ•°ç»„elementDataçš„åå°„ä¸ç­‰äº<span class="keyword">Object</span>[]æ•°ç»„çš„åå°„ï¼Œå³ä¸¤è€…å¦‚æœä¸æ˜¯åŒå‡ºä¸€å®—çš„è¯  </span><br><span class="line">æ•°ç»„elementDataå°†åˆè¢«é‡æ–°èµ‹å€¼ï¼Œæ•°ç»„çš„å¤åˆ¶ï¼Œå¤åˆ¶çš„æ•°ç»„elementDataï¼Œå¤åˆ¶çš„ä¸ªæ•°ï¼Œä»¥<span class="keyword">Object</span>[]å¯¹è±¡æ•°ç»„çš„å½¢å¼  </span><br><span class="line">å¦‚æœelementDataçš„é•¿åº¦ä¸º<span class="number">0</span>ï¼Œåˆ™elementDataæ•°ç»„åˆ™å°†è¢«é‡æ–°èµ‹å€¼ä¸º  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">Object</span>[] EMPTY_ELEMENTDATA = &#123;&#125;;ç©ºæ•°ç»„</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Trims the capacity of this <tt>ArrayList</tt> instance to be the</p>
</li>
<li><p>listâ€™s current size.  An application can use this operation to minimize</p>
</li>
<li><p>the storage of an <tt>ArrayList</tt> instance.</p>
</li>
<li><p>/<br>public void trimToSize() {<br>  modCount++;<br>  if (size &lt; elementData.length) {</p>
<pre><code>elementData = (size == 0)
  ? EMPTY_ELEMENTDATA
  : Arrays.copyOf(elementData, size);</code></pre><p>  }<br>}</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">trim ä¿®å‰ªï¼›  </span><br><span class="line">ä¿®å‰ªArrayListå®ä¾‹çš„å®¹é‡æ¥æˆä¸ºè¿™ä¸ª<span class="built_in">list</span>é›†åˆçš„å½“å‰<span class="built_in">size</span>æ•°é‡  </span><br><span class="line">minimize æœ€å°åŒ–ï¼›  </span><br><span class="line">ä¸€ä¸ªåº”ç”¨ç¨‹åºèƒ½å¤Ÿä½¿ç”¨è¯¥æ“ä½œæ¥æœ€å°åŒ–ä¸€ä¸ªArrayListå®ä¾‹çš„å­˜å‚¨é‡  </span><br><span class="line">è¯¥ç±»ArrayListå½“ä¸­æ²¡æœ‰å®šå½±modCountï¼Œåº”è¯¥æ˜¯ç»§æ‰¿çš„çˆ¶ç±»å½“ä¸­çš„å˜é‡ã€‚  </span><br><span class="line">ä¿®æ”¹æ¬¡æ•°è‡ªå¢ã€‚  </span><br><span class="line">å¦‚æœ<span class="built_in">size</span>å˜é‡å°äºelementDataæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™å¯¹elementDataæ•°ç»„è¿›è¡Œé‡æ–°å¤åˆ¶ï¼Œä¸‰å…ƒæ¢ç®—æ³•ï¼Œå¦‚æœ<span class="built_in">size</span>ä¸º<span class="number">0</span>åˆ™elementDataå–å€¼ä¸ºç©ºæ•°ç»„ï¼Œå¦åˆ™è¿›è¡Œå¤åˆ¶elementDataå½“ä¸­çš„<span class="built_in">size</span>ä¸ªå…ƒç´ æˆä¸ºä¸€ä¸ªæ–°æ•°ç»„å¹¶èµ‹å€¼ç»™elementDataã€‚</span><br></pre></td></tr></table></figure>
<p>/**</p>
</li>
<li><p>Increases the capacity of this <tt>ArrayList</tt> instance, if</p>
</li>
<li><p>necessary, to ensure that it can hold at least the number of elements</p>
</li>
<li><p>specified by the minimum capacity argument.</p>
</li>
<li></li>
<li><p>@param   minCapacity   the desired minimum capacity</p>
</li>
<li><p>/<br>public void ensureCapacity(int minCapacity) {<br>  int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)</p>
<pre><code>// any size if not default element table
? 0
// larger than default for default empty table. It&apos;s already
// supposed to be at default size.
: DEFAULT_CAPACITY;</code></pre><p>  if (minCapacity &gt; minExpand) {</p>
<pre><code>ensureExplicitCapacity(minCapacity);</code></pre><p>  }<br>}</p>
<p>private static int calculateCapacity(Object[] elementData, int minCapacity) {<br>  if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {</p>
<pre><code>return Math.max(DEFAULT_CAPACITY, minCapacity);</code></pre><p>  }<br>  return minCapacity;<br>}</p>
<p>private void ensureCapacityInternal(int minCapacity) {<br>  ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));<br>}</p>
<p>private void ensureExplicitCapacity(int minCapacity) {<br>  modCount++;</p>
<p>  // overflow-conscious code<br>  if (minCapacity - elementData.length &gt; 0)</p>
<pre><code>grow(minCapacity);</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>The maximum size of array to allocate.</p>
</li>
<li><p>Some VMs reserve some header words in an array.</p>
</li>
<li><p>Attempts to allocate larger arrays may result in</p>
</li>
<li><p>OutOfMemoryError: Requested array size exceeds VM limit</p>
</li>
<li><p>/<br>private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</p>
<p>/**</p>
</li>
<li><p>Increases the capacity to ensure that it can hold at least the</p>
</li>
<li><p>number of elements specified by the minimum capacity argument.</p>
</li>
<li></li>
<li><p>@param minCapacity the desired minimum capacity</p>
</li>
<li><p>/<br>private void grow(int minCapacity) {<br>  // overflow-conscious code<br>  int oldCapacity = elementData.length;<br>  int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);<br>  if (newCapacity - minCapacity &lt; 0)</p>
<pre><code>newCapacity = minCapacity;</code></pre><p>  if (newCapacity - MAX_ARRAY_SIZE &gt; 0)</p>
<pre><code>newCapacity = hugeCapacity(minCapacity);</code></pre><p>  // minCapacity is usually close to size, so this is a win:<br>  elementData = Arrays.copyOf(elementData, newCapacity);<br>}</p>
<p>private static int hugeCapacity(int minCapacity) {<br>  if (minCapacity &lt; 0) // overflow</p>
<pre><code>throw new OutOfMemoryError();</code></pre><p>  return (minCapacity &gt; MAX_ARRAY_SIZE) ?</p>
<pre><code>Integer.MAX_VALUE :
MAX_ARRAY_SIZE;</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>Returns the number of elements in this list.</p>
</li>
<li></li>
<li><p>@return the number of elements in this list</p>
</li>
<li><p>/<br>public int size() {<br>  return size;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns <tt>true</tt> if this list contains no elements.</p>
</li>
<li></li>
<li><p>@return <tt>true</tt> if this list contains no elements</p>
</li>
<li><p>/<br>public boolean isEmpty() {<br>  return size == 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns <tt>true</tt> if this list contains the specified element.</p>
</li>
<li><p>More formally, returns <tt>true</tt> if and only if this list contains</p>
</li>
<li><p>at least one element <tt>e</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;e==null&nbsp;:&nbsp;o.equals(e))</tt>.</p>
</li>
<li></li>
<li><p>@param o element whose presence in this list is to be tested</p>
</li>
<li><p>@return <tt>true</tt> if this list contains the specified element</p>
</li>
<li><p>/<br>public boolean contains(Object o) {<br>  return indexOf(o) &gt;= 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the index of the first occurrence of the specified element</p>
</li>
<li><p>in this list, or -1 if this list does not contain the element.</p>
</li>
<li><p>More formally, returns the lowest index <tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt>,</p>
</li>
<li><p>or -1 if there is no such index.</p>
</li>
<li><p>/<br>public int indexOf(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int i = 0; i &lt; size; i++)
    if (elementData[i]==null)
        return i;</code></pre><p>  } else {</p>
<pre><code>for (int i = 0; i &lt; size; i++)
    if (o.equals(elementData[i]))
        return i;</code></pre><p>  }<br>  return -1;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the index of the last occurrence of the specified element</p>
</li>
<li><p>in this list, or -1 if this list does not contain the element.</p>
</li>
<li><p>More formally, returns the highest index <tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt>,</p>
</li>
<li><p>or -1 if there is no such index.</p>
</li>
<li><p>/<br>public int lastIndexOf(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int i = size-1; i &gt;= 0; i--)
    if (elementData[i]==null)
        return i;</code></pre><p>  } else {</p>
<pre><code>for (int i = size-1; i &gt;= 0; i--)
    if (o.equals(elementData[i]))
        return i;</code></pre><p>  }<br>  return -1;<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a shallow copy of this <tt>ArrayList</tt> instance.  (The</p>
</li>
<li><p>elements themselves are not copied.)</p>
</li>
<li></li>
<li><p>@return a clone of this <tt>ArrayList</tt> instance</p>
</li>
<li><p>/<br>public Object clone() {<br>  try {</p>
<pre><code>ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone();
v.elementData = Arrays.copyOf(elementData, size);
v.modCount = 0;
return v;</code></pre><p>  } catch (CloneNotSupportedException e) {</p>
<pre><code>// this shouldn&apos;t happen, since we are Cloneable
throw new InternalError(e);</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns an array containing all of the elements in this list</p>
</li>
<li><p>in proper sequence (from first to last element).</p>
</li>
<li></li>
<li><p>The returned array will be "safe" in that no references to it are</p></li>
<li><p>maintained by this list.  (In other words, this method must allocate</p>
</li>
<li><p>a new array).  The caller is thus free to modify the returned array.</p>
</li>
<li></li>
<li><p>This method acts as bridge between array-based and collection-based</p></li>
<li><p>APIs.</p>
</li>
<li></li>
<li><p>@return an array containing all of the elements in this list in</p>
</li>
<li><p>proper sequence</p>
</li>
<li><p>/<br>public Object[] toArray() {<br>  return Arrays.copyOf(elementData, size);<br>}</p>
<p>/**</p>
</li>
<li><p>Returns an array containing all of the elements in this list in proper</p>
</li>
<li><p>sequence (from first to last element); the runtime type of the returned</p>
</li>
<li><p>array is that of the specified array.  If the list fits in the</p>
</li>
<li><p>specified array, it is returned therein.  Otherwise, a new array is</p>
</li>
<li><p>allocated with the runtime type of the specified array and the size of</p>
</li>
<li><p>this list.</p>
</li>
<li></li>
<li><p>If the list fits in the specified array with room to spare</p></li>
<li><p>(i.e., the array has more elements than the list), the element in</p>
</li>
<li><p>the array immediately following the end of the collection is set to</p>
</li>
<li><p><tt>null</tt>.  (This is useful in determining the length of the</p>
</li>
<li><p>list <i>only</i> if the caller knows that the list does not contain</p>
</li>
<li><p>any null elements.)</p>
</li>
<li></li>
<li><p>@param a the array into which the elements of the list are to</p>
</li>
<li><p>be stored, if it is big enough; otherwise, a new array of the</p>
</li>
<li><p>same runtime type is allocated for this purpose.</p>
</li>
<li><p>@return an array containing the elements of the list</p>
</li>
<li><p>@throws ArrayStoreException if the runtime type of the specified array</p>
</li>
<li><p>is not a supertype of the runtime type of every element in</p>
</li>
<li><p>this list</p>
</li>
<li><p>@throws NullPointerException if the specified array is null</p>
</li>
<li><p>/<br>@SuppressWarnings(â€œuncheckedâ€)<br>public <T> T[] toArray(T[] a) {<br>  if (a.length &lt; size)</T></p>
<pre><code>// Make a new array of a&apos;s runtime type, but my contents:
return (T[]) Arrays.copyOf(elementData, size, a.getClass());</code></pre><p>  System.arraycopy(elementData, 0, a, 0, size);<br>  if (a.length &gt; size)</p>
<pre><code>a[size] = null;</code></pre><p>  return a;<br>}</p>
<p>// Positional Access Operations</p>
<p>@SuppressWarnings(â€œuncheckedâ€)<br>E elementData(int index) {<br>  return (E) elementData[index];<br>}</p>
<p>/**</p>
</li>
<li><p>Returns the element at the specified position in this list.</p>
</li>
<li></li>
<li><p>@param  index index of the element to return</p>
</li>
<li><p>@return the element at the specified position in this list</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E get(int index) {<br>  rangeCheck(index);</p>
<p>  return elementData(index);<br>}</p>
<p>/**</p>
</li>
<li><p>Replaces the element at the specified position in this list with</p>
</li>
<li><p>the specified element.</p>
</li>
<li></li>
<li><p>@param index index of the element to replace</p>
</li>
<li><p>@param element element to be stored at the specified position</p>
</li>
<li><p>@return the element previously at the specified position</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E set(int index, E element) {<br>  rangeCheck(index);</p>
<p>  E oldValue = elementData(index);<br>  elementData[index] = element;<br>  return oldValue;<br>}</p>
<p>/**</p>
</li>
<li><p>Appends the specified element to the end of this list.</p>
</li>
<li></li>
<li><p>@param e element to be appended to this list</p>
</li>
<li><p>@return <tt>true</tt> (as specified by {@link Collection#add})</p>
</li>
<li><p>/<br>public boolean add(E e) {<br>  ensureCapacityInternal(size + 1);  // Increments modCount!!<br>  elementData[size++] = e;<br>  return true;<br>}</p>
<p>/**</p>
</li>
<li><p>Inserts the specified element at the specified position in this</p>
</li>
<li><p>list. Shifts the element currently at that position (if any) and</p>
</li>
<li><p>any subsequent elements to the right (adds one to their indices).</p>
</li>
<li></li>
<li><p>@param index index at which the specified element is to be inserted</p>
</li>
<li><p>@param element element to be inserted</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public void add(int index, E element) {<br>  rangeCheckForAdd(index);</p>
<p>  ensureCapacityInternal(size + 1);  // Increments modCount!!<br>  System.arraycopy(elementData, index, elementData, index + 1,</p>
<pre><code>size - index);</code></pre><p>  elementData[index] = element;<br>  size++;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes the element at the specified position in this list.</p>
</li>
<li><p>Shifts any subsequent elements to the left (subtracts one from their</p>
</li>
<li><p>indices).</p>
</li>
<li></li>
<li><p>@param index the index of the element to be removed</p>
</li>
<li><p>@return the element that was removed from the list</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public E remove(int index) {<br>  rangeCheck(index);</p>
<p>  modCount++;<br>  E oldValue = elementData(index);</p>
<p>  int numMoved = size - index - 1;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index+1, elementData, index,
                 numMoved);</code></pre><p>  elementData[â€“size] = null; // clear to let GC do its work</p>
<p>  return oldValue;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes the first occurrence of the specified element from this list,</p>
</li>
<li><p>if it is present.  If the list does not contain the element, it is</p>
</li>
<li><p>unchanged.  More formally, removes the element with the lowest index</p>
</li>
<li><p><tt>i</tt> such that</p>
</li>
<li><p><tt>(o==null&nbsp;?&nbsp;get(i)==null&nbsp;:&nbsp;o.equals(get(i)))</tt></p>
</li>
<li><p>(if such an element exists).  Returns <tt>true</tt> if this list</p>
</li>
<li><p>contained the specified element (or equivalently, if this list</p>
</li>
<li><p>changed as a result of the call).</p>
</li>
<li></li>
<li><p>@param o element to be removed from this list, if present</p>
</li>
<li><p>@return <tt>true</tt> if this list contained the specified element</p>
</li>
<li><p>/<br>public boolean remove(Object o) {<br>  if (o == null) {</p>
<pre><code>for (int index = 0; index &lt; size; index++)
    if (elementData[index] == null) {
        fastRemove(index);
        return true;
    }</code></pre><p>  } else {</p>
<pre><code>for (int index = 0; index &lt; size; index++)
    if (o.equals(elementData[index])) {
        fastRemove(index);
        return true;
    }</code></pre><p>  }<br>  return false;<br>}</p>
<p>/*</p>
</li>
<li><p>Private remove method that skips bounds checking and does not</p>
</li>
<li><p>return the value removed.</p>
</li>
<li><p>/<br>private void fastRemove(int index) {<br>  modCount++;<br>  int numMoved = size - index - 1;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index+1, elementData, index,
                 numMoved);</code></pre><p>  elementData[â€“size] = null; // clear to let GC do its work<br>}</p>
<p>/**</p>
</li>
<li><p>Removes all of the elements from this list.  The list will</p>
</li>
<li><p>be empty after this call returns.</p>
</li>
<li><p>/<br>public void clear() {<br>  modCount++;</p>
<p>  // clear to let GC do its work<br>  for (int i = 0; i &lt; size; i++)</p>
<pre><code>elementData[i] = null;</code></pre><p>  size = 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Appends all of the elements in the specified collection to the end of</p>
</li>
<li><p>this list, in the order that they are returned by the</p>
</li>
<li><p>specified collectionâ€™s Iterator.  The behavior of this operation is</p>
</li>
<li><p>undefined if the specified collection is modified while the operation</p>
</li>
<li><p>is in progress.  (This implies that the behavior of this call is</p>
</li>
<li><p>undefined if the specified collection is this list, and this</p>
</li>
<li><p>list is nonempty.)</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be added to this list</p>
</li>
<li><p>@return <tt>true</tt> if this list changed as a result of the call</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public boolean addAll(Collection&lt;? extends E&gt; c) {<br>  Object[] a = c.toArray();<br>  int numNew = a.length;<br>  ensureCapacityInternal(size + numNew);  // Increments modCount<br>  System.arraycopy(a, 0, elementData, size, numNew);<br>  size += numNew;<br>  return numNew != 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Inserts all of the elements in the specified collection into this</p>
</li>
<li><p>list, starting at the specified position.  Shifts the element</p>
</li>
<li><p>currently at that position (if any) and any subsequent elements to</p>
</li>
<li><p>the right (increases their indices).  The new elements will appear</p>
</li>
<li><p>in the list in the order that they are returned by the</p>
</li>
<li><p>specified collectionâ€™s iterator.</p>
</li>
<li></li>
<li><p>@param index index at which to insert the first element from the</p>
</li>
<li><p>specified collection</p>
</li>
<li><p>@param c collection containing elements to be added to this list</p>
</li>
<li><p>@return <tt>true</tt> if this list changed as a result of the call</p>
</li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>@throws NullPointerException if the specified collection is null</p>
</li>
<li><p>/<br>public boolean addAll(int index, Collection&lt;? extends E&gt; c) {<br>  rangeCheckForAdd(index);</p>
<p>  Object[] a = c.toArray();<br>  int numNew = a.length;<br>  ensureCapacityInternal(size + numNew);  // Increments modCount</p>
<p>  int numMoved = size - index;<br>  if (numMoved &gt; 0)</p>
<pre><code>System.arraycopy(elementData, index, elementData, index + numNew,
                 numMoved);</code></pre><p>  System.arraycopy(a, 0, elementData, index, numNew);<br>  size += numNew;<br>  return numNew != 0;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes from this list all of the elements whose index is between</p>
</li>
<li><p>{@code fromIndex}, inclusive, and {@code toIndex}, exclusive.</p>
</li>
<li><p>Shifts any succeeding elements to the left (reduces their index).</p>
</li>
<li><p>This call shortens the list by {@code (toIndex - fromIndex)} elements.</p>
</li>
<li><p>(If {@code toIndex==fromIndex}, this operation has no effect.)</p>
</li>
<li></li>
<li><p>@throws IndexOutOfBoundsException if {@code fromIndex} or</p>
</li>
<li><p>{@code toIndex} is out of range</p>
</li>
<li><p>({@code fromIndex &lt; 0 ||</p>
</li>
<li><p>fromIndex &gt;= size() ||</p>
</li>
<li><p>toIndex &gt; size() ||</p>
</li>
<li><p>toIndex &lt; fromIndex})</p>
</li>
<li><p>/<br>protected void removeRange(int fromIndex, int toIndex) {<br>  modCount++;<br>  int numMoved = size - toIndex;<br>  System.arraycopy(elementData, toIndex, elementData, fromIndex,</p>
<pre><code>numMoved);</code></pre><p>  // clear to let GC do its work<br>  int newSize = size - (toIndex-fromIndex);<br>  for (int i = newSize; i &lt; size; i++) {</p>
<pre><code>elementData[i] = null;</code></pre><p>  }<br>  size = newSize;<br>}</p>
<p>/**</p>
</li>
<li><p>Checks if the given index is in range.  If not, throws an appropriate</p>
</li>
<li><p>runtime exception.  This method does <em>not</em> check if the index is</p>
</li>
<li><p>negative: It is always used immediately prior to an array access,</p>
</li>
<li><p>which throws an ArrayIndexOutOfBoundsException if index is negative.</p>
</li>
<li><p>/<br>private void rangeCheck(int index) {<br>  if (index &gt;= size)</p>
<pre><code>throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>A version of rangeCheck used by add and addAll.</p>
</li>
<li><p>/<br>private void rangeCheckForAdd(int index) {<br>  if (index &gt; size || index &lt; 0)</p>
<pre><code>throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>}</p>
<p>/**</p>
</li>
<li><p>Constructs an IndexOutOfBoundsException detail message.</p>
</li>
<li><p>Of the many possible refactorings of the error handling code,</p>
</li>
<li><p>this â€œoutliningâ€ performs best with both server and client VMs.</p>
</li>
<li><p>/<br>private String outOfBoundsMsg(int index) {<br>  return â€œIndex: â€œ+index+â€, Size: â€œ+size;<br>}</p>
<p>/**</p>
</li>
<li><p>Removes from this list all of its elements that are contained in the</p>
</li>
<li><p>specified collection.</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be removed from this list</p>
</li>
<li><p>@return {@code true} if this list changed as a result of the call</p>
</li>
<li><p>@throws ClassCastException if the class of an element of this list</p>
</li>
<li><p>is incompatible with the specified collection</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>)</p>
</li>
<li><p>@throws NullPointerException if this list contains a null element and the</p>
</li>
<li><p>specified collection does not permit null elements</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>),</p>
</li>
<li><p>or if the specified collection is null</p>
</li>
<li><p>@see Collection#contains(Object)</p>
</li>
<li><p>/<br>public boolean removeAll(Collection&lt;?&gt; c) {<br>  Objects.requireNonNull(c);<br>  return batchRemove(c, false);<br>}</p>
<p>/**</p>
</li>
<li><p>Retains only the elements in this list that are contained in the</p>
</li>
<li><p>specified collection.  In other words, removes from this list all</p>
</li>
<li><p>of its elements that are not contained in the specified collection.</p>
</li>
<li></li>
<li><p>@param c collection containing elements to be retained in this list</p>
</li>
<li><p>@return {@code true} if this list changed as a result of the call</p>
</li>
<li><p>@throws ClassCastException if the class of an element of this list</p>
</li>
<li><p>is incompatible with the specified collection</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>)</p>
</li>
<li><p>@throws NullPointerException if this list contains a null element and the</p>
</li>
<li><p>specified collection does not permit null elements</p>
</li>
<li><p>(<a href="Collection.html#optional-restrictions">optional</a>),</p>
</li>
<li><p>or if the specified collection is null</p>
</li>
<li><p>@see Collection#contains(Object)</p>
</li>
<li><p>/<br>public boolean retainAll(Collection&lt;?&gt; c) {<br>  Objects.requireNonNull(c);<br>  return batchRemove(c, true);<br>}</p>
<p>private boolean batchRemove(Collection&lt;?&gt; c, boolean complement) {<br>  final Object[] elementData = this.elementData;<br>  int r = 0, w = 0;<br>  boolean modified = false;<br>  try {</p>
<pre><code>for (; r &lt; size; r++)
    if (c.contains(elementData[r]) == complement)
        elementData[w++] = elementData[r];</code></pre><p>  } finally {</p>
<pre><code>// Preserve behavioral compatibility with AbstractCollection,
// even if c.contains() throws.
if (r != size) {
    System.arraycopy(elementData, r,
                     elementData, w,
                     size - r);
    w += size - r;
}
if (w != size) {
    // clear to let GC do its work
    for (int i = w; i &lt; size; i++)
        elementData[i] = null;
    modCount += size - w;
    size = w;
    modified = true;
}</code></pre><p>  }<br>  return modified;<br>}</p>
<p>/**</p>
</li>
<li><p>Save the state of the <tt>ArrayList</tt> instance to a stream (that</p>
</li>
<li><p>is, serialize it).</p>
</li>
<li></li>
<li><p>@serialData The length of the array backing the <tt>ArrayList</tt></p>
</li>
<li><p>instance is emitted (int), followed by all of its elements</p>
</li>
<li><p>(each an <tt>Object</tt>) in the proper order.</p>
</li>
<li><p>/<br>private void writeObject(java.io.ObjectOutputStream s)<br>  throws java.io.IOException{<br>  // Write out element count, and any hidden stuff<br>  int expectedModCount = modCount;<br>  s.defaultWriteObject();</p>
<p>  // Write out size as capacity for behavioural compatibility with clone()<br>  s.writeInt(size);</p>
<p>  // Write out all elements in the proper order.<br>  for (int i=0; i&lt;size; i++) {</p>
<pre><code>s.writeObject(elementData[i]);</code></pre><p>  }</p>
<p>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Reconstitute the <tt>ArrayList</tt> instance from a stream (that is,</p>
</li>
<li><p>deserialize it).</p>
</li>
<li><p>/<br>private void readObject(java.io.ObjectInputStream s)<br>  throws java.io.IOException, ClassNotFoundException {<br>  elementData = EMPTY_ELEMENTDATA;</p>
<p>  // Read in size, and any hidden stuff<br>  s.defaultReadObject();</p>
<p>  // Read in capacity<br>  s.readInt(); // ignored</p>
<p>  if (size &gt; 0) {</p>
<pre><code>// be like clone(), allocate array based upon size not capacity
int capacity = calculateCapacity(elementData, size);
SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);
ensureCapacityInternal(size);

Object[] a = elementData;
// Read in all elements in the proper order.
for (int i=0; i&lt;size; i++) {
    a[i] = s.readObject();
}</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a list iterator over the elements in this list (in proper</p>
</li>
<li><p>sequence), starting at the specified position in the list.</p>
</li>
<li><p>The specified index indicates the first element that would be</p>
</li>
<li><p>returned by an initial call to {@link ListIterator#next next}.</p>
</li>
<li><p>An initial call to {@link ListIterator#previous previous} would</p>
</li>
<li><p>return the element with the specified index minus one.</p>
</li>
<li></li>
<li><p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>/<br>public ListIterator<E> listIterator(int index) {<br>  if (index &lt; 0 || index &gt; size)</E></p>
<pre><code>throw new IndexOutOfBoundsException(&quot;Index: &quot;+index);</code></pre><p>  return new ListItr(index);<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a list iterator over the elements in this list (in proper</p>
</li>
<li><p>sequence).</p>
</li>
<li></li>
<li><p>The returned list iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@see #listIterator(int)</p>
</li>
<li><p>/<br>public ListIterator<E> listIterator() {<br>  return new ListItr(0);<br>}</E></p>
<p>/**</p>
</li>
<li><p>Returns an iterator over the elements in this list in proper sequence.</p>
</li>
<li></li>
<li><p>The returned iterator is <a href="#fail-fast"><i>fail-fast</i></a>.</p></li>
<li></li>
<li><p>@return an iterator over the elements in this list in proper sequence</p>
</li>
<li><p>/<br>public Iterator<E> iterator() {<br>  return new Itr();<br>}</E></p>
<p>/**</p>
</li>
<li><p>An optimized version of AbstractList.Itr</p>
</li>
<li><p>/<br>private class Itr implements Iterator<E> {<br>  int cursor;       // index of next element to return<br>  int lastRet = -1; // index of last element returned; -1 if no such<br>  int expectedModCount = modCount;</E></p>
<p>  Itr() {}</p>
<p>  public boolean hasNext() {</p>
<pre><code>return cursor != size;</code></pre><p>  }</p>
<p>  @SuppressWarnings(â€œuncheckedâ€)<br>  public E next() {</p>
<pre><code>checkForComodification();
int i = cursor;
if (i &gt;= size)
    throw new NoSuchElementException();
Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length)
    throw new ConcurrentModificationException();
cursor = i + 1;
return (E) elementData[lastRet = i];</code></pre><p>  }</p>
<p>  public void remove() {</p>
<pre><code>if (lastRet &lt; 0)
    throw new IllegalStateException();
checkForComodification();

try {
    ArrayList.this.remove(lastRet);
    cursor = lastRet;
    lastRet = -1;
    expectedModCount = modCount;
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }</p>
<p>  @Override<br>  @SuppressWarnings(â€œuncheckedâ€)<br>  public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {</p>
<pre><code>Objects.requireNonNull(consumer);
final int size = ArrayList.this.size;
int i = cursor;
if (i &gt;= size) {
    return;
}
final Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length) {
    throw new ConcurrentModificationException();
}
while (i != size &amp;&amp; modCount == expectedModCount) {
    consumer.accept((E) elementData[i++]);
}
// update once at end of iteration to reduce heap write traffic
cursor = i;
lastRet = i - 1;
checkForComodification();</code></pre><p>  }</p>
<p>  final void checkForComodification() {</p>
<pre><code>if (modCount != expectedModCount)
    throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>An optimized version of AbstractList.ListItr</p>
</li>
<li><p>/<br>private class ListItr extends Itr implements ListIterator<E> {<br>  ListItr(int index) {</E></p>
<pre><code>super();
cursor = index;</code></pre><p>  }</p>
<p>  public boolean hasPrevious() {</p>
<pre><code>return cursor != 0;</code></pre><p>  }</p>
<p>  public int nextIndex() {</p>
<pre><code>return cursor;</code></pre><p>  }</p>
<p>  public int previousIndex() {</p>
<pre><code>return cursor - 1;</code></pre><p>  }</p>
<p>  @SuppressWarnings(â€œuncheckedâ€)<br>  public E previous() {</p>
<pre><code>checkForComodification();
int i = cursor - 1;
if (i &lt; 0)
    throw new NoSuchElementException();
Object[] elementData = ArrayList.this.elementData;
if (i &gt;= elementData.length)
    throw new ConcurrentModificationException();
cursor = i;
return (E) elementData[lastRet = i];</code></pre><p>  }</p>
<p>  public void set(E e) {</p>
<pre><code>if (lastRet &lt; 0)
    throw new IllegalStateException();
checkForComodification();

try {
    ArrayList.this.set(lastRet, e);
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }</p>
<p>  public void add(E e) {</p>
<pre><code>checkForComodification();

try {
    int i = cursor;
    ArrayList.this.add(i, e);
    cursor = i + 1;
    lastRet = -1;
    expectedModCount = modCount;
} catch (IndexOutOfBoundsException ex) {
    throw new ConcurrentModificationException();
}</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Returns a view of the portion of this list between the specified</p>
</li>
<li><p>{@code fromIndex}, inclusive, and {@code toIndex}, exclusive.  (If</p>
</li>
<li><p>{@code fromIndex} and {@code toIndex} are equal, the returned list is</p>
</li>
<li><p>empty.)  The returned list is backed by this list, so non-structural</p>
</li>
<li><p>changes in the returned list are reflected in this list, and vice-versa.</p>
</li>
<li><p>The returned list supports all of the optional list operations.</p>
</li>
<li></li>
<li><p>This method eliminates the need for explicit range operations (of</p></li>
<li><p>the sort that commonly exist for arrays).  Any operation that expects</p>
</li>
<li><p>a list can be used as a range operation by passing a subList view</p>
</li>
<li><p>instead of a whole list.  For example, the following idiom</p>
</li>
<li><p>removes a range of elements from a list:</p>
</li>
<li><pre></pre></li>
<li><p>list.subList(from, to).clear();</p>
</li>
<li><p></p>
</li>
<li><p>Similar idioms may be constructed for {@link #indexOf(Object)} and</p>
</li>
<li><p>{@link #lastIndexOf(Object)}, and all of the algorithms in the</p>
</li>
<li><p>{@link Collections} class can be applied to a subList.</p>
</li>
<li></li>
<li><p>The semantics of the list returned by this method become undefined if</p></li>
<li><p>the backing list (i.e., this list) is <i>structurally modified</i> in</p>
</li>
<li><p>any way other than via the returned list.  (Structural modifications are</p>
</li>
<li><p>those that change the size of this list, or otherwise perturb it in such</p>
</li>
<li><p>a fashion that iterations in progress may yield incorrect results.)</p>
</li>
<li></li>
<li><p>@throws IndexOutOfBoundsException {@inheritDoc}</p>
</li>
<li><p>@throws IllegalArgumentException {@inheritDoc}</p>
</li>
<li><p>/<br>public List<E> subList(int fromIndex, int toIndex) {<br>  subListRangeCheck(fromIndex, toIndex, size);<br>  return new SubList(this, 0, fromIndex, toIndex);<br>}</E></p>
<p>static void subListRangeCheck(int fromIndex, int toIndex, int size) {<br>  if (fromIndex &lt; 0)</p>
<pre><code>throw new IndexOutOfBoundsException(&quot;fromIndex = &quot; + fromIndex);</code></pre><p>  if (toIndex &gt; size)</p>
<pre><code>throw new IndexOutOfBoundsException(&quot;toIndex = &quot; + toIndex);</code></pre><p>  if (fromIndex &gt; toIndex)</p>
<pre><code>throw new IllegalArgumentException(&quot;fromIndex(&quot; + fromIndex +
                                   &quot;) &gt; toIndex(&quot; + toIndex + &quot;)&quot;);</code></pre><p>}</p>
<p>private class SubList extends AbstractList<E> implements RandomAccess {<br>  private final AbstractList<E> parent;<br>  private final int parentOffset;<br>  private final int offset;<br>  int size;</E></E></p>
<p>  SubList(AbstractList<E> parent,</E></p>
<pre><code>    int offset, int fromIndex, int toIndex) {
this.parent = parent;
this.parentOffset = fromIndex;
this.offset = offset + fromIndex;
this.size = toIndex - fromIndex;
this.modCount = ArrayList.this.modCount;</code></pre><p>  }</p>
<p>  public E set(int index, E e) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
E oldValue = ArrayList.this.elementData(offset + index);
ArrayList.this.elementData[offset + index] = e;
return oldValue;</code></pre><p>  }</p>
<p>  public E get(int index) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
return ArrayList.this.elementData(offset + index);</code></pre><p>  }</p>
<p>  public int size() {</p>
<pre><code>checkForComodification();
return this.size;</code></pre><p>  }</p>
<p>  public void add(int index, E e) {</p>
<pre><code>rangeCheckForAdd(index);
checkForComodification();
parent.add(parentOffset + index, e);
this.modCount = parent.modCount;
this.size++;</code></pre><p>  }</p>
<p>  public E remove(int index) {</p>
<pre><code>rangeCheck(index);
checkForComodification();
E result = parent.remove(parentOffset + index);
this.modCount = parent.modCount;
this.size--;
return result;</code></pre><p>  }</p>
<p>  protected void removeRange(int fromIndex, int toIndex) {</p>
<pre><code>checkForComodification();
parent.removeRange(parentOffset + fromIndex,
                   parentOffset + toIndex);
this.modCount = parent.modCount;
this.size -= toIndex - fromIndex;</code></pre><p>  }</p>
<p>  public boolean addAll(Collection&lt;? extends E&gt; c) {</p>
<pre><code>return addAll(this.size, c);</code></pre><p>  }</p>
<p>  public boolean addAll(int index, Collection&lt;? extends E&gt; c) {</p>
<pre><code>rangeCheckForAdd(index);
int cSize = c.size();
if (cSize==0)
    return false;

checkForComodification();
parent.addAll(parentOffset + index, c);
this.modCount = parent.modCount;
this.size += cSize;
return true;</code></pre><p>  }</p>
<p>  public Iterator<E> iterator() {</E></p>
<pre><code>return listIterator();</code></pre><p>  }</p>
<p>  public ListIterator<E> listIterator(final int index) {</E></p>
<pre><code>checkForComodification();
rangeCheckForAdd(index);
final int offset = this.offset;

return new ListIterator&lt;E&gt;() {
    int cursor = index;
    int lastRet = -1;
    int expectedModCount = ArrayList.this.modCount;

    public boolean hasNext() {
        return cursor != SubList.this.size;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i &gt;= SubList.this.size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[offset + (lastRet = i)];
    }

    public boolean hasPrevious() {
        return cursor != 0;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E previous() {
        checkForComodification();
        int i = cursor - 1;
        if (i &lt; 0)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i;
        return (E) elementData[offset + (lastRet = i)];
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {
        Objects.requireNonNull(consumer);
        final int size = SubList.this.size;
        int i = cursor;
        if (i &gt;= size) {
            return;
        }
        final Object[] elementData = ArrayList.this.elementData;
        if (offset + i &gt;= elementData.length) {
            throw new ConcurrentModificationException();
        }
        while (i != size &amp;&amp; modCount == expectedModCount) {
            consumer.accept((E) elementData[offset + (i++)]);
        }
        // update once at end of iteration to reduce heap write traffic
        lastRet = cursor = i;
        checkForComodification();
    }

    public int nextIndex() {
        return cursor;
    }

    public int previousIndex() {
        return cursor - 1;
    }

    public void remove() {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            SubList.this.remove(lastRet);
            cursor = lastRet;
            lastRet = -1;
            expectedModCount = ArrayList.this.modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    public void set(E e) {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.set(offset + lastRet, e);
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    public void add(E e) {
        checkForComodification();

        try {
            int i = cursor;
            SubList.this.add(i, e);
            cursor = i + 1;
            lastRet = -1;
            expectedModCount = ArrayList.this.modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    final void checkForComodification() {
        if (expectedModCount != ArrayList.this.modCount)
            throw new ConcurrentModificationException();
    }
};</code></pre><p>  }</p>
<p>  public List<E> subList(int fromIndex, int toIndex) {</E></p>
<pre><code>subListRangeCheck(fromIndex, toIndex, size);
return new SubList(this, offset, fromIndex, toIndex);</code></pre><p>  }</p>
<p>  private void rangeCheck(int index) {</p>
<pre><code>if (index &lt; 0 || index &gt;= this.size)
    throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>  }</p>
<p>  private void rangeCheckForAdd(int index) {</p>
<pre><code>if (index &lt; 0 || index &gt; this.size)
    throw new IndexOutOfBoundsException(outOfBoundsMsg(index));</code></pre><p>  }</p>
<p>  private String outOfBoundsMsg(int index) {</p>
<pre><code>return &quot;Index: &quot;+index+&quot;, Size: &quot;+this.size;</code></pre><p>  }</p>
<p>  private void checkForComodification() {</p>
<pre><code>if (ArrayList.this.modCount != this.modCount)
    throw new ConcurrentModificationException();</code></pre><p>  }</p>
<p>  public Spliterator<E> spliterator() {</E></p>
<pre><code>checkForComodification();
return new ArrayListSpliterator&lt;E&gt;(ArrayList.this, offset,
                                   offset + this.size, this.modCount);</code></pre><p>  }<br>}</p>
<p>@Override<br>public void forEach(Consumer&lt;? super E&gt; action) {<br>  Objects.requireNonNull(action);<br>  final int expectedModCount = modCount;<br>  @SuppressWarnings(â€œuncheckedâ€)<br>  final E[] elementData = (E[]) this.elementData;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</p>
<pre><code>action.accept(elementData[i]);</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>}</p>
<p>/**</p>
</li>
<li><p>Creates a <em><a href="Spliterator.html#binding">late-binding</a></em></p>
</li>
<li><p>and <em>fail-fast</em> {@link Spliterator} over the elements in this</p>
</li>
<li><p>list.</p>
</li>
<li></li>
<li><p>The {@code Spliterator} reports {@link Spliterator#SIZED},</p></li>
<li><p>{@link Spliterator#SUBSIZED}, and {@link Spliterator#ORDERED}.</p>
</li>
<li><p>Overriding implementations should document the reporting of additional</p>
</li>
<li><p>characteristic values.</p>
</li>
<li></li>
<li><p>@return a {@code Spliterator} over the elements in this list</p>
</li>
<li><p>@since 1.8</p>
</li>
<li><p>/<br>@Override<br>public Spliterator<E> spliterator() {<br>  return new ArrayListSpliterator&lt;&gt;(this, 0, -1, 0);<br>}</E></p>
<p>/** Index-based split-by-two, lazily initialized Spliterator */<br>static final class ArrayListSpliterator<E> implements Spliterator<E> {</E></E></p>
<p>  /*</p>
<ul>
<li><p>If ArrayLists were immutable, or structurally immutable (no</p>
</li>
<li><p>adds, removes, etc), we could implement their spliterators</p>
</li>
<li><p>with Arrays.spliterator. Instead we detect as much</p>
</li>
<li><p>interference during traversal as practical without</p>
</li>
<li><p>sacrificing much performance. We rely primarily on</p>
</li>
<li><p>modCounts. These are not guaranteed to detect concurrency</p>
</li>
<li><p>violations, and are sometimes overly conservative about</p>
</li>
<li><p>within-thread interference, but detect enough problems to</p>
</li>
<li><p>be worthwhile in practice. To carry this out, we (1) lazily</p>
</li>
<li><p>initialize fence and expectedModCount until the latest</p>
</li>
<li><p>point that we need to commit to the state we are checking</p>
</li>
<li><p>against; thus improving precision.  (This doesnâ€™t apply to</p>
</li>
<li><p>SubLists, that create spliterators with current non-lazy</p>
</li>
<li><p>values).  (2) We perform only a single</p>
</li>
<li><p>ConcurrentModificationException check at the end of forEach</p>
</li>
<li><p>(the most performance-sensitive method). When using forEach</p>
</li>
<li><p>(as opposed to iterators), we can normally only detect</p>
</li>
<li><p>interference after actions, not before. Further</p>
</li>
<li><p>CME-triggering checks apply to all other possible</p>
</li>
<li><p>violations of assumptions for example null or too-small</p>
</li>
<li><p>elementData array given its size(), that could only have</p>
</li>
<li><p>occurred due to interference.  This allows the inner loop</p>
</li>
<li><p>of forEach to run without any further checks, and</p>
</li>
<li><p>simplifies lambda-resolution. While this does entail a</p>
</li>
<li><p>number of checks, note that in the common case of</p>
</li>
<li><p>list.stream().forEach(a), no checks or other computation</p>
</li>
<li><p>occur anywhere other than inside forEach itself.  The other</p>
</li>
<li><p>less-often-used methods cannot take advantage of most of</p>
</li>
<li><p>these streamlinings.</p>
</li>
<li><p>/</p>
<p>private final ArrayList<E> list;<br>private int index; // current index, modified on advance/split<br>private int fence; // -1 until used; then one past last index<br>private int expectedModCount; // initialized when fence set</E></p>
<p>/** Create new spliterator covering the given  range */<br>ArrayListSpliterator(ArrayList<E> list, int origin, int fence,</E></p>
<pre><code>int expectedModCount) {</code></pre><p>  this.list = list; // OK if null unless traversed<br>  this.index = origin;<br>  this.fence = fence;<br>  this.expectedModCount = expectedModCount;<br>}</p>
<p>private int getFence() { // initialize fence to size on first use<br>  int hi; // (a specialized variant appears in method forEach)<br>  ArrayList<E> lst;<br>  if ((hi = fence) &lt; 0) {</E></p>
<pre><code>if ((lst = list) == null)
    hi = fence = 0;
else {
    expectedModCount = lst.modCount;
    hi = fence = lst.size;
}</code></pre><p>  }<br>  return hi;<br>}</p>
<p>public ArrayListSpliterator<E> trySplit() {<br>  int hi = getFence(), lo = index, mid = (lo + hi) &gt;&gt;&gt; 1;<br>  return (lo &gt;= mid) ? null : // divide range in half unless too small</E></p>
<pre><code>new ArrayListSpliterator&lt;E&gt;(list, lo, index = mid,
                            expectedModCount);</code></pre><p>}</p>
<p>public boolean tryAdvance(Consumer&lt;? super E&gt; action) {<br>  if (action == null)</p>
<pre><code>throw new NullPointerException();</code></pre><p>  int hi = getFence(), i = index;<br>  if (i &lt; hi) {</p>
<pre><code>index = i + 1;
@SuppressWarnings(&quot;unchecked&quot;) E e = (E)list.elementData[i];
action.accept(e);
if (list.modCount != expectedModCount)
    throw new ConcurrentModificationException();
return true;</code></pre><p>  }<br>  return false;<br>}</p>
<p>public void forEachRemaining(Consumer&lt;? super E&gt; action) {<br>  int i, hi, mc; // hoist accesses and checks from loop<br>  ArrayList<E> lst; Object[] a;<br>  if (action == null)</E></p>
<pre><code>throw new NullPointerException();</code></pre><p>  if ((lst = list) != null &amp;&amp; (a = lst.elementData) != null) {</p>
<pre><code>if ((hi = fence) &lt; 0) {
    mc = lst.modCount;
    hi = lst.size;
}
else
    mc = expectedModCount;
if ((i = index) &gt;= 0 &amp;&amp; (index = hi) &lt;= a.length) {
    for (; i &lt; hi; ++i) {
        @SuppressWarnings(&quot;unchecked&quot;) E e = (E) a[i];
        action.accept(e);
    }
    if (lst.modCount == mc)
        return;
}</code></pre><p>  }<br>  throw new ConcurrentModificationException();<br>}</p>
<p>public long estimateSize() {<br>  return (long) (getFence() - index);<br>}</p>
<p>public int characteristics() {<br>  return Spliterator.ORDERED | Spliterator.SIZED | Spliterator.SUBSIZED;<br>}<br>}</p>
</li>
</ul>
<p>@Override<br>public boolean removeIf(Predicate&lt;? super E&gt; filter) {<br>  Objects.requireNonNull(filter);<br>  // figure out which elements are to be removed<br>  // any exception thrown from the filter predicate at this stage<br>  // will leave the collection unmodified<br>  int removeCount = 0;<br>  final BitSet removeSet = new BitSet(size);<br>  final int expectedModCount = modCount;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</p>
<pre><code>@SuppressWarnings(&quot;unchecked&quot;)
final E element = (E) elementData[i];
if (filter.test(element)) {
    removeSet.set(i);
    removeCount++;
}</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }</p>
<p>  // shift surviving elements left over the spaces left by removed elements<br>  final boolean anyToRemove = removeCount &gt; 0;<br>  if (anyToRemove) {</p>
<pre><code>final int newSize = size - removeCount;
for (int i=0, j=0; (i &lt; size) &amp;&amp; (j &lt; newSize); i++, j++) {
    i = removeSet.nextClearBit(i);
    elementData[j] = elementData[i];
}
for (int k=newSize; k &lt; size; k++) {
    elementData[k] = null;  // Let gc do its work
}
this.size = newSize;
if (modCount != expectedModCount) {
    throw new ConcurrentModificationException();
}
modCount++;</code></pre><p>  }</p>
<p>  return anyToRemove;<br>}</p>
<p>@Override<br>@SuppressWarnings(â€œuncheckedâ€)<br>public void replaceAll(UnaryOperator<E> operator) {<br>  Objects.requireNonNull(operator);<br>  final int expectedModCount = modCount;<br>  final int size = this.size;<br>  for (int i=0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) {</E></p>
<pre><code>elementData[i] = operator.apply((E) elementData[i]);</code></pre><p>  }<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>  modCount++;<br>}</p>
<p>@Override<br>@SuppressWarnings(â€œuncheckedâ€)<br>public void sort(Comparator&lt;? super E&gt; c) {<br>  final int expectedModCount = modCount;<br>  Arrays.sort((E[]) elementData, 0, size, c);<br>  if (modCount != expectedModCount) {</p>
<pre><code>throw new ConcurrentModificationException();</code></pre><p>  }<br>  modCount++;<br>}<br>}</p>
</li>
</ul>
</li>
</ul>
<pre><code>



</code></pre>
      
    </div>
    
    
    



<div>
    
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JSåº“ sweetalert å¯ä¿®æ”¹è·¯å¾„ -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">

  <p><span>æœ¬æ–‡æ ‡é¢˜:</span>ArrayListæºç ğŸ“</a></p>
  <p><span>æ–‡ç« ä½œè€…:</span>Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨</a></p>
  <p><span>å‘å¸ƒæ—¶é—´:</span>2020å¹´03æœˆ13æ—¥ - 23:12:56ğŸŒ</p>
  <p><span>æœ€åæ›´æ–°:</span>2020å¹´06æœˆ06æ—¥ - 01:52:34ğŸŒœ</p>
  <p><span>åŸå§‹é“¾æ¥:</span><a href="/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/" title="ArrayListæºç ">https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/</a>
    <span class="copy-path"  title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard" data-clipboard-text="https://fengshana.github.io/2020/03/13/%E3%80%90%E9%9D%A2%E8%AF%95%E3%80%91/%E3%80%90%E5%A4%8D%E4%B9%A0%E3%80%91ArrayList/"  aria-label="å¤åˆ¶æˆåŠŸï¼"></i></span>
  </p>
  <p><span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚ğŸ„	</p>  
</div>
<style>
</style>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        //swal({   
          //title: "",   
         // text: '<div style="width:300px;height:100px;font-size:14px;">é“å‹ï¼Œå¤åˆ¶æˆåŠŸäº†å“Ÿ(ï¼¾ï¼µï¼¾)ãƒ~</div>',   
          //html: true,
          //timer: 500,   
        //showConfirmButton: false
        //});
      });
      new ClipboardJS('.fa-clipboard', {
          target: function(trigger) {
              $('<div>').appendTo('body').addClass('alert alert-success').html('ğŸ¤ é“å‹á•¦(ï½¥ã…‚ï½¥)á•¤ï¼ŒğŸ¥­å¤åˆ¶æˆåŠŸäº†å“Ÿ(^_âˆ’)â˜†').show().delay(1500).fadeOut();
              return trigger.nextElementSibling;
            }
      });
    }));  
</script>


    
</div>



    








<div>
  
    <div>
    
        <br/>
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------ğŸ“ğŸ‡æœ¬æ–‡ç»“æŸğŸ¤æ„Ÿè°¢é“å‹çš„é˜…è¯»ğŸğŸ’-------------</div>
    
</div>
  
</div>












    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>ğŸ¥•ğŸ†åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ğŸ³ï¼ŒğŸŒ½ğŸ¥¬æ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼ğŸ¬</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>æ‰“èµ</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatreward.png" alt="Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨ å¾®ä¿¡æ”¯ä»˜"/>
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipayreward.png" alt="Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨ æ”¯ä»˜å®"/>
        <p>æ”¯ä»˜å®</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    










    <footer class="post-footer">
      
        <div class="post-tags" style="text-align:center">
          
            <a href="/tags/ArrayList/" rel="tag">ğŸŒŸArrayList</i></a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/12/%E3%80%90Vuejs%E3%80%91/Vuejs%E6%8E%A5%E8%A7%A6/" rel="next" title="OSS">
                ğŸ‘ˆ OSS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/14/%E3%80%90%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E3%80%91/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="prev" title="æ“ä½œç³»ç»Ÿ">
                æ“ä½œç³»ç»Ÿ ğŸ‘‰
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80ODk3My8yNTQ2Nw=="></div>
    </div>

  
  
  

  
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/fsn.jpg"
                alt="Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨" />
            
              <p class="site-author-name" itemprop="name">Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨</p>
              <p class="site-description motion-element" itemprop="description">ğŸŒˆå‹¿å¿˜åˆå¿ƒğŸ’« ğŸŒï¼ŒğŸŒœæ–¹å¾—å§‹ç»ˆâ­</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <!--<a href="/archives/%7C%7Carchive">-->
                <a href="/archives/">
              
                  <span class="site-state-item-count">155</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">84</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/fengshana" target="_blank" title="GitHub">
                      
                        <i 

                          
                          class="fa fa-fw fa-github">
                          
                         
                        
                        </i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://space.bilibili.com/475144966" target="_blank" title="Bilibili">
                      
                        <i 

                          
                            class="">ğŸƒâ€â™‚ï¸
                          
                         
                        
                        </i>Bilibili</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      


      
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="300" height="300" id="resCanvas" style="width=100%; background-color:transparent;">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArrayList/" rel="tag">ArrayList</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/B-%E6%A0%91/" rel="tag">B+æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/B%E6%A0%91/" rel="tag">Bæ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CORS/" rel="tag">CORS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git%E5%B7%A5%E4%BD%9C%E6%B5%81/" rel="tag">Gitå·¥ä½œæµ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/" rel="tag">Gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HASH%E8%A1%A8/" rel="tag">HASHè¡¨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HashMap/" rel="tag">HashMap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">JVMè™šæ‹Ÿæœº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MICROSERVICES/" rel="tag">MICROSERVICES</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/" rel="tag">MongoDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySql/" rel="tag">MySql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySql%E7%B4%A2%E5%BC%95/" rel="tag">MySqlç´¢å¼•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PayPal/" rel="tag">PayPal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" rel="tag">RabbitMQå®æˆ˜æŒ‡å—</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/" rel="tag">Redisè®¾è®¡ä¸å®ç°</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SendGrid/" rel="tag">SendGrid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SprigBoot/" rel="tag">SprigBoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95/" rel="tag">SpringæŠ€æœ¯å†…å¹•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sql/" rel="tag">Sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaScript/" rel="tag">javaScript</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk8/" rel="tag">jdk8</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/motto/" rel="tag">motto</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oss/" rel="tag">oss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synchronized/" rel="tag">synchronized</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/" rel="tag">tomcat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volatile/" rel="tag">volatile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%B2/" rel="tag">ä¸²</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">äº‹åŠ¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">äºŒå‰æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1666/" rel="tag">ä¿¡666</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1666%E5%B7%A5%E4%BD%9C%E4%BA%A4%E6%8E%A5/" rel="tag">ä¿¡666å·¥ä½œäº¤æ¥</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">åˆ†å¸ƒå¼</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E9%A1%B5/" rel="tag">åˆ†é¡µ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">å‰ç«¯é¢è¯•é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8C%E8%89%B2%E7%90%83/" rel="tag">åŒè‰²çƒ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%A3%E8%AF%AD/" rel="tag">å£è¯­</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE/" rel="tag">å›¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/" rel="tag">å­˜å‚¨è¿‡ç¨‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">å¾®ä¿¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/" rel="tag">å¾®ä¿¡å…¬ä¼—å·</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">å¾®æœåŠ¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%80%81/" rel="tag">å¿ƒæ€</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%80%81%E8%AF%BE%E7%A8%8B/" rel="tag">å¿ƒæ€è¯¾ç¨‹</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%83%85/" rel="tag">å¿ƒæƒ…</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">æ’åº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">æ“ä½œç³»ç»Ÿ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%AF%E4%BB%98/" rel="tag">æ”¯ä»˜</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/" rel="tag">æ•°æ®åº“ä¼˜åŒ–</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">æ•°æ®ç»“æ„</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9F%A5%E6%89%BE/" rel="tag">æŸ¥æ‰¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" rel="tag">æ ˆä¸é˜Ÿåˆ—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">æ ‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%81%E7%A8%8B%E5%9B%BE/" rel="tag">æµç¨‹å›¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%A7%A3%E5%88%86%E6%9E%90/" rel="tag">ç†è§£åˆ†æ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%B4%A2/" rel="tag">ç†è´¢</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%90%86%E8%B4%A2%E5%AD%A6%E4%B9%A0/" rel="tag">ç†è´¢å­¦ä¹ </a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%B4%E6%92%AD/" rel="tag">ç›´æ’­</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E6%8E%A5%E7%8F%AD%E4%BA%BA/" rel="tag">ç¤¾ä¼šä¸»ä¹‰æ¥ç­äºº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">ç¬”è®°</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" rel="tag">çº¢é»‘æ ‘</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">çº¿æ€§è¡¨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">ç¼“å­˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD/" rel="tag">è‹±è¯­</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">è™šæ‹Ÿæœº</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%8D%E6%B1%87/" rel="tag">è¯æ±‡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/" rel="tag">é‚®ä»¶æœåŠ¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">é”</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">é¢è¯•</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%86%E8%B5%AB/" rel="tag">é¢†èµ«</a><span class="tag-list-count">11</span></li></ul>
        </canvas>
    </div>
</div>



    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">ğŸŒ±2019 ğŸ„ ğŸŒ³

<span itemprop="copyrightYear">2020</span>
  <span class="with-love">
  <!--user-->
    ğŸ‰
  </span>
 
 <span class="author" itemprop="copyrightHolder">Fsnâœ¨ğŸ§™â€â™€ï¸âœ¨</span>

  





  <script async src="http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 
     ğŸƒâ€â™‚ï¸ 
    <span class="post-meta-item-icon">
      ğŸ“ˆ
    </span>
    
      <span class="post-meta-item-text">å°å±‹ğŸ’’æ€»å­—æ•°ï¼š</span>
    
	<span title="Site words total count">
     605.8kğŸŒŸ </span>
    <!--<span title="symbols_count_time.count_total">1.2m</span>-->
  
</div>



  <!-- <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>-->






<!--



 -->
 






        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-beta.2/lazyload.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  













  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  
  <script type="text/javascript" src="/js/src/exturl.js?v=5.1.4"></script>


  
  
  
  <!-- 
  
  -->
  <link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>

  <!-- ä»£ç å—å¤åˆ¶åŠŸèƒ½    <script src="dist/clipboard.min.js"></script>-->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
  


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":250,"vOffset":-10},"mobile":{"show":false},"log":false,"tagMode":false});</script></body>
</html>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>

<!--å´©æºƒæ¬ºéª— <script type="text/javascript" src="/js/src/crash_cheat.js"></script> -->




